<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>å‰‘æŒ‡Offer</title>
      <link href="2021/01/01/suanfa/"/>
      <url>2021/01/01/suanfa/</url>
      
        <content type="html"><![CDATA[<h2 id="é¢˜ç›®3ï¼šæ‰¾å‡ºæ•°ç»„ä¸­é‡å¤çš„æ•°å­—"><a href="#é¢˜ç›®3ï¼šæ‰¾å‡ºæ•°ç»„ä¸­é‡å¤çš„æ•°å­—" class="headerlink" title="é¢˜ç›®3ï¼šæ‰¾å‡ºæ•°ç»„ä¸­é‡å¤çš„æ•°å­—"></a>é¢˜ç›®3ï¼šæ‰¾å‡ºæ•°ç»„ä¸­é‡å¤çš„æ•°å­—</h2><p>åœ¨ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ nums é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½åœ¨ 0ï½n-1 çš„èŒƒå›´å†…ã€‚æ•°ç»„ä¸­æŸäº›æ•°å­—æ˜¯é‡å¤çš„ï¼Œä½†ä¸çŸ¥é“æœ‰å‡ ä¸ªæ•°å­—é‡å¤äº†ï¼Œä¹Ÿä¸çŸ¥é“æ¯ä¸ªæ•°å­—é‡å¤äº†å‡ æ¬¡ã€‚è¯·æ‰¾å‡ºæ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªé‡å¤çš„æ•°å­—ã€‚</p><p>ä¾‹å¦‚ï¼š[2, 3, 1, 0, 2, 5, 3]ï¼Œè¾“å‡ºï¼š2 æˆ– 3ã€‚</p><h3 id="æ€è·¯ä¸€"><a href="#æ€è·¯ä¸€" class="headerlink" title="æ€è·¯ä¸€"></a>æ€è·¯ä¸€</h3><blockquote><p>å°†æ•°ç»„è¿›è¡Œä¸€æ¬¡éå†å¹¶æ’åºï¼Œç”±äºé¢˜ç›®ä¸ŠæŒ‡æ˜äº†æ‰€æœ‰æ•°å­—éƒ½åœ¨0~n-1èŒƒå›´å†…ï¼Œæ¯æ¬¡å¾ªç¯å‰ï¼Œé¦–å…ˆå°†ä¸‹æ ‡<code>i</code> ä¸ å¯¹åº”çš„å€¼<code>nums[i]</code>è¿›è¡Œæ¯”è¾ƒï¼Œç›¸ç­‰åˆ™æ¥ç€æ‰«æä¸‹ä¸€ä¸ªæ•°å­—ï¼Œä¸ç›¸ç­‰åˆ™å†å°†<code>nums[i]</code>ä¸ <code>nums[nums[i]]</code>æ¯”è¾ƒï¼Œç›¸ç­‰å°±æ‰¾åˆ°äº†ä¸€ä¸ªé‡å¤æ•°å­—ï¼Œä¸ç›¸ç­‰åˆ™äº¤æ¢ä½ç½®ã€‚</p><p>ä¾‹å¦‚ï¼š[2, 3, 1, 0, 2, 5, 3] ï¼Œç¬¬ä¸€ä¸ªæ•°2ä¸å¯¹åº”ä¸‹æ ‡0ä¸ç›¸ç­‰ï¼Œä¸ä¸‹æ ‡2å¯¹åº”æ•°å­—0ä¹Ÿä¸ç›¸ç­‰ï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡å¾ªç¯åäº¤æ¢ä½ç½®ä¸º[0, 3, 1, 2, 2, 5, 3]ï¼Œç”±äºç¬¬ä¸€ä¸ªæ•°0ä¸ä¸‹æ ‡0ç›¸ç­‰ï¼Œåˆ™è¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯ï¼š[0, 2, 1, 3, 2, 5, 3]-&gt;[0, 1, 2, 3, 2, 5, 3]â€¦â€¦åœ¨ç¬¬äº”æ¬¡å¾ªç¯ä¸­ï¼Œ<code>nums[4]=2</code>ä¸<code>nums[nums[4]]=nums[2]=2</code>ç›¸ç­‰ï¼Œè¿”å›ç¬¬ä¸€ä¸ªç›¸ç­‰çš„æ•°å­— 2â€¦â€¦åœ¨ç¬¬ä¸ƒæ¬¡å¾ªç¯ä¸­ï¼Œ<code>nums[6]=3</code>ä¸<code>nums[nums[6]]=nums[3]=3</code>ç›¸ç­‰ï¼Œè¿”å›ç¬¬äºŒä¸ªç›¸ç­‰çš„æ•°å­— 3ã€‚</p></blockquote><p><strong>ä»£ç å®ç°ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findRepeatNumber</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> temp<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> i <span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> nums<span class="token punctuation">[</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    <span class="token keyword">return</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                temp <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>temp<span class="token punctuation">]</span><span class="token punctuation">;</span>                nums<span class="token punctuation">[</span>temp<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="é¢˜ç›®4ï¼šäºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾"><a href="#é¢˜ç›®4ï¼šäºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾" class="headerlink" title="é¢˜ç›®4ï¼šäºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾"></a>é¢˜ç›®4ï¼šäºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾</h2><p>åœ¨ä¸€ä¸ª n * m çš„äºŒç»´æ•°ç»„ä¸­ï¼Œæ¯ä¸€è¡Œéƒ½æŒ‰ç…§ä»å·¦åˆ°å³é€’å¢çš„é¡ºåºæ’åºï¼Œæ¯ä¸€åˆ—éƒ½æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹é€’å¢çš„é¡ºåºæ’åºã€‚è¯·å®Œæˆä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥è¿™æ ·çš„ä¸€ä¸ªäºŒç»´æ•°ç»„å’Œä¸€ä¸ªæ•´æ•°ï¼Œåˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å«æœ‰è¯¥æ•´æ•°ã€‚</p><p>ä¾‹å¦‚ï¼šå¦‚ä¸‹äºŒç»´æ•°ç»„ï¼Œå¦‚æœæŸ¥æ‰¾ 7ï¼Œè¿”å›trueï¼›å¦‚æœæŸ¥æ‰¾20ï¼Œè¿”å›false</p><pre class=" language-markdown"><code class="language-markdown">1   2   8   92   4   9   124   7   10  136   8   11  15</code></pre><h3 id="æ€è·¯ä¸€-1"><a href="#æ€è·¯ä¸€-1" class="headerlink" title="æ€è·¯ä¸€"></a>æ€è·¯ä¸€</h3><blockquote><p>æŸ¥æ‰¾æŸä¸€ä¸ªæ•°å­—æ—¶ï¼Œé¦–å…ˆå°†è¯¥æ•°å­—ä¸å³ä¸Šè§’çš„æ•°å­—æ¯”è¾ƒï¼Œç›¸ç­‰å°±ç›´æ¥è¿”å›trueï¼›å¦‚æœå°äºå³ä¸Šè§’çš„æ•°å­—ï¼Œåˆ™æ’é™¤äº†æœ€åä¸€åˆ—ä¸Šçš„æ‰€æœ‰æ•°å­—ï¼ˆå› ä¸ºå³ä¸Šè§’çš„æ•°å­—æ˜¯æœ€åä¸€åˆ—ä¸Šæœ€å°çš„ï¼‰ï¼›å¦‚æœå¤§äºå³ä¸Šè§’çš„æ•°å­—ï¼Œåˆ™æ’é™¤äº†ç¬¬ä¸€è¡Œçš„æ‰€æœ‰æ•°å­—ï¼ˆå› ä¸ºå³ä¸Šè§’çš„æ•°å­—æ˜¯ç¬¬ä¸€åˆ—ä¸Šæœ€å¤§çš„ï¼‰ï¼Œè¿™æ ·æ¯æ¬¡æŸ¥æ‰¾éƒ½ä¼šæ’é™¤ä¸€åˆ—æˆ–ä¸€è¡Œçš„æ•°å­—ï¼Œç›´åˆ°æŸ¥æ‰¾è¿”å›ä¸ºç©ºã€‚</p><p>ä¾‹å¦‚æŸ¥æ‰¾æ•°å­—<code>7</code>ï¼Œé¦–å…ˆä¸å³ä¸Šè§’çš„<code>9</code>è¿›è¡Œæ¯”è¾ƒï¼Œ<code>9</code>å¤§äº<code>7</code>ï¼Œæ’é™¤æœ€åä¸€åˆ—ï¼Œå³ä¸Šè§’çš„æ•°å­—å˜ä¸º<code>8</code>ï¼›å†ä¸<code>8</code>æ¯”è¾ƒï¼Œ<code>8</code>å¤§äº<code>7</code>ï¼Œæ’é™¤<code>8</code>æ‰€åœ¨çš„åˆ—ï¼Œå³ä¸Šè§’çš„æ•°å­—å˜ä¸º<code>2</code>ï¼›å†ä¸<code>2</code>æ¯”è¾ƒï¼Œ<code>2</code>å°äº<code>7</code>ï¼Œæ’é™¤<code>2</code>æ‰€åœ¨çš„é‚£ä¸€è¡Œï¼Œå³ä¸Šè§’çš„æ•°å­—å˜ä¸º<code>4</code>ï¼›å†ä¸<code>4</code>æ¯”è¾ƒï¼Œ<code>4</code>å°äº<code>7</code>ï¼Œæ’é™¤<code>4</code>æ‰€åœ¨çš„é‚£ä¸€è¡Œï¼Œå³ä¸Šè§’çš„æ•°å­—å˜ä¸º<code>7</code>ï¼›å†ä¸<code>7</code>æ¯”è¾ƒæ—¶ï¼Œç›¸ç­‰ç›´æ¥è¿”å›<code>true</code>ã€‚<br><img src="/2021/01/01/suanfa/1.png" alt></p></blockquote><p><strong>ä»£ç å®ç°ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">findNumberIn2DArray</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> matrix<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>matrix <span class="token operator">==</span> null <span class="token operator">||</span> matrix<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">int</span> rows <span class="token operator">=</span> matrix<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">int</span> cols <span class="token operator">=</span> matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å³ä¸Šè§’æ•°å­—çš„ä¸‹æ ‡</span>        <span class="token keyword">int</span> rowIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> colIndex <span class="token operator">=</span> cols<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>rowIndex <span class="token operator">&lt;</span> rows <span class="token operator">&amp;&amp;</span> colIndex<span class="token operator">>=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>target <span class="token operator">></span> matrix<span class="token punctuation">[</span>rowIndex<span class="token punctuation">]</span><span class="token punctuation">[</span>colIndex<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                rowIndex<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>target <span class="token operator">&lt;</span> matrix<span class="token punctuation">[</span>rowIndex<span class="token punctuation">]</span><span class="token punctuation">[</span>colIndex<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                colIndex<span class="token operator">--</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>              <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="é¢˜ç›®5ï¼šæ›¿æ¢ç©ºæ ¼"><a href="#é¢˜ç›®5ï¼šæ›¿æ¢ç©ºæ ¼" class="headerlink" title="é¢˜ç›®5ï¼šæ›¿æ¢ç©ºæ ¼"></a>é¢˜ç›®5ï¼šæ›¿æ¢ç©ºæ ¼</h2><p>è¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠå­—ç¬¦ä¸² <code>s</code> ä¸­çš„æ¯ä¸ªç©ºæ ¼æ›¿æ¢æˆâ€%20â€ã€‚</p><p>ä¾‹å¦‚ï¼š</p><pre class=" language-markdown"><code class="language-markdown">è¾“å…¥ï¼šs = "We are happy."è¾“å‡ºï¼š"We%20are%20happy."</code></pre><p>ğŸ–é¢ï¼Œ<code>String</code>ç±»ä¸­æœ‰ä¸ªå‡½æ•°å«<code>replace(resouce,target)</code></p><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> String <span class="token function">replaceSpace</span><span class="token punctuation">(</span>String s<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">,</span><span class="token string">"%20"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>ğŸ˜‚ï¼Œæˆ–è®¸ä¹Ÿå¯ä»¥è¿™æ ·ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> String <span class="token function">replaceSpace</span><span class="token punctuation">(</span>String s<span class="token punctuation">)</span> <span class="token punctuation">{</span>         StringBuilder sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>             <span class="token keyword">char</span> c <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token keyword">if</span><span class="token punctuation">(</span>c<span class="token operator">==</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                 sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"%20"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>               sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token punctuation">}</span>         <span class="token punctuation">}</span>         <span class="token keyword">return</span> sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="é¢˜ç›®6ï¼šä»å°¾åˆ°å¤´æ‰“å°å•é“¾è¡¨"><a href="#é¢˜ç›®6ï¼šä»å°¾åˆ°å¤´æ‰“å°å•é“¾è¡¨" class="headerlink" title="é¢˜ç›®6ï¼šä»å°¾åˆ°å¤´æ‰“å°å•é“¾è¡¨"></a>é¢˜ç›®6ï¼šä»å°¾åˆ°å¤´æ‰“å°å•é“¾è¡¨</h2><p>è¾“å…¥ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼Œä»å°¾åˆ°å¤´åè¿‡æ¥è¿”å›æ¯ä¸ªèŠ‚ç‚¹çš„å€¼ï¼ˆç”¨æ•°ç»„è¿”å›ï¼‰ã€‚</p><p>ä¾‹å¦‚ï¼š</p><pre class=" language-markdown"><code class="language-markdown">è¾“å…¥ï¼šhead = [1,3,2]è¾“å‡ºï¼š[2,3,1]</code></pre><h3 id="æ€è·¯ä¸€-2"><a href="#æ€è·¯ä¸€-2" class="headerlink" title="æ€è·¯ä¸€"></a>æ€è·¯ä¸€</h3><blockquote><p>ä»å‰å¾€åéå†å•é“¾è¡¨ï¼Œå¹¶å­˜å…¥æ ˆä¸­ï¼Œéå†å®Œåä¾æ¬¡å‡ºæ ˆï¼Œå³ä¸ºå€’åºã€‚</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * Definition for singly-linked list. * public class ListNode { *     int val; *     ListNode next; *     ListNode(int x) { val = x; } * } */</span><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">reversePrint</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// éå†å•é“¾è¡¨ï¼Œå¹¶å…¥æ ˆï¼Œç„¶åå‡ºæ ˆï¼Œå³ä¸ºé€†åº</span>        Stack<span class="token operator">&lt;</span>Integer<span class="token operator">></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>head<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>            stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>            head <span class="token operator">=</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>stack<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            arr<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> arr<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springbootæ•´åˆElasticSearch</title>
      <link href="2020/12/27/elasticSearch-02/"/>
      <url>2020/12/27/elasticSearch-02/</url>
      
        <content type="html"><![CDATA[<p>1ã€åˆ›å»ºé¡¹ç›®æ—¶å‹¾é€‰ï¼š<br><img src="/2020/12/27/elasticSearch-02/1.png" style="zoom:80%;"></p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-data-elasticsearch<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>2ã€åˆ›å»º<code>RestHighLevelClient</code>å¯¹è±¡å¹¶æ³¨å…¥å®¹å™¨</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ElasticSearchConfig</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractElasticsearchConfiguration</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> RestHighLevelClient <span class="token function">elasticsearchClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// å®šä¹‰å®¢æˆ·ç«¯é…ç½®å¯¹è±¡</span>        <span class="token keyword">final</span> ClientConfiguration clientConfiguration <span class="token operator">=</span> ClientConfiguration<span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">connectedTo</span><span class="token punctuation">(</span><span class="token string">"localhost:9200"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ä½¿ç”¨ RestClientsåˆ›å»ºå¯¹è±¡</span>        <span class="token keyword">return</span> RestClients<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>clientConfiguration<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>3ã€ä½¿ç”¨<code>RestHighLevelClient</code>è¿›è¡Œcrud</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">class</span> <span class="token class-name">Elasticsearch01ApplicationTests</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> RestHighLevelClient restHighLevelClient<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testInsert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>        User user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"æå››å››"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">29</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        IndexRequest indexRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IndexRequest</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string">"6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        indexRequest<span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">,</span> XContentType<span class="token punctuation">.</span>JSON<span class="token punctuation">)</span><span class="token punctuation">;</span>        IndexResponse indexResponse <span class="token operator">=</span> restHighLevelClient<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span>indexRequest<span class="token punctuation">,</span> RequestOptions<span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>indexResponse<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>        User user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        UpdateRequest updateRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UpdateRequest</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span><span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string">"4"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        updateRequest<span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">,</span>XContentType<span class="token punctuation">.</span>JSON<span class="token punctuation">)</span><span class="token punctuation">;</span>        UpdateResponse updateResponse <span class="token operator">=</span> restHighLevelClient<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>updateRequest<span class="token punctuation">,</span> RequestOptions<span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>updateResponse<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDelete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>        DeleteRequest deleteRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DeleteRequest</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        DeleteResponse deleteResponse <span class="token operator">=</span> restHighLevelClient<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>deleteRequest<span class="token punctuation">,</span> RequestOptions<span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>deleteResponse<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSearch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>        SearchRequest searchRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SearchRequest</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æœç´¢æ¡ä»¶</span>        SearchSourceBuilder searchSourceBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SearchSourceBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        searchSourceBuilder<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>QueryBuilders<span class="token punctuation">.</span><span class="token function">matchQuery</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"å¼ "</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span> SortOrder<span class="token punctuation">.</span>DESC<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">postFilter</span><span class="token punctuation">(</span>QueryBuilders<span class="token punctuation">.</span><span class="token function">rangeQuery</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">highlighter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HighlightBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">field</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        searchRequest<span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span>searchSourceBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å‘èµ·æœç´¢è¯·æ±‚</span>        SearchResponse searchResponse <span class="token operator">=</span> restHighLevelClient<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>searchRequest<span class="token punctuation">,</span> RequestOptions<span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>        TotalHits totalHits <span class="token operator">=</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTotalHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ–‡æ¡£æ€»æ•°ï¼š"</span> <span class="token operator">+</span> totalHits<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">float</span> maxScore <span class="token operator">=</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMaxScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœ€é«˜å‘½ä¸­å¾—åˆ†ï¼š"</span> <span class="token operator">+</span> maxScore<span class="token punctuation">)</span><span class="token punctuation">;</span>        SearchHit<span class="token punctuation">[</span><span class="token punctuation">]</span> searchHits <span class="token operator">=</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>SearchHit searchHit <span class="token operator">:</span> searchHits<span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>searchHit<span class="token punctuation">.</span><span class="token function">getSourceAsMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>4ã€ä½¿ç”¨<code>ElasticSearchRepository</code>è¿›è¡Œç®€å•çš„crud<br>4.1 åœ¨å®ä½“ç±»ä¸­æ·»åŠ æ³¨è§£ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token comment" spellcheck="true">// æ˜ å°„æ–‡æ¡£</span><span class="token annotation punctuation">@Document</span><span class="token punctuation">(</span>indexName <span class="token operator">=</span> <span class="token string">"test"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Id</span>    <span class="token keyword">private</span> String id<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Field</span><span class="token punctuation">(</span>type <span class="token operator">=</span> FieldType<span class="token punctuation">.</span>Text<span class="token punctuation">,</span>analyzer <span class="token operator">=</span> <span class="token string">"ik_max_word"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Field</span><span class="token punctuation">(</span>type <span class="token operator">=</span> FieldType<span class="token punctuation">.</span>Integer<span class="token punctuation">)</span>    <span class="token keyword">private</span> Integer age<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>4.2 æ·»åŠ è‡ªå®šä¹‰æ¥å£å¹¶ç»§æ‰¿<code>ElasticsearchRepository&lt;T,T&gt;</code></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserRepository</span> <span class="token keyword">extends</span> <span class="token class-name">ElasticsearchRepository</span><span class="token operator">&lt;</span>User<span class="token punctuation">,</span>String<span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><p>4.3 ä½¿ç”¨è‡ªå®šä¹‰çš„æ¥å£æ“ä½œæ•°æ®</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestUserRepository</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> UserRepository userRepository<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSave</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        User user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// idä¸å­˜åœ¨ä¿å­˜ï¼Œå­˜åœ¨åˆ™æ›´æ–°</span>        user<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"å¼ ä¼Ÿ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        userRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDelete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// deleteAll åˆ é™¤æ‰€æœ‰</span>        userRepository<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token string">"d6d99c19-6a8d-4ab5-bd71-f2586e07b28b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        Optional<span class="token operator">&lt;</span>User<span class="token operator">></span> userOptional <span class="token operator">=</span> userRepository<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userOptional<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// æ’åº</span>        Iterable<span class="token operator">&lt;</span>User<span class="token operator">></span> all <span class="token operator">=</span> userRepository<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span>Sort<span class="token punctuation">.</span><span class="token function">by</span><span class="token punctuation">(</span>Sort<span class="token punctuation">.</span>Order<span class="token punctuation">.</span><span class="token function">desc</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ†é¡µ</span>        Page<span class="token operator">&lt;</span>User<span class="token operator">></span> all1 <span class="token operator">=</span> userRepository<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span>PageRequest<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        all1<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>user <span class="token operator">-</span><span class="token operator">></span> System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ElasticSearch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ElasticSearchåŸºç¡€çŸ¥è¯†</title>
      <link href="2020/12/23/elasticSearch/"/>
      <url>2020/12/23/elasticSearch/</url>
      
        <content type="html"><![CDATA[<h2 id="ElasticSearchçš„å®‰è£…ä¸å¯åŠ¨"><a href="#ElasticSearchçš„å®‰è£…ä¸å¯åŠ¨" class="headerlink" title="ElasticSearchçš„å®‰è£…ä¸å¯åŠ¨"></a>ElasticSearchçš„å®‰è£…ä¸å¯åŠ¨</h2><p>é…ç½®ElasticSearchæ”¯æŒè·¨åŸŸï¼šconfig/elasticsearch.yml</p><pre class=" language-yml"><code class="language-yml">http.cors.enabled: truehttp.cors.allow-origin: "*"</code></pre><p>ä¸‹è½½æˆ–åœ¨Google Chromeä¸­æ·»åŠ ElasticSearch Head æ’ä»¶ï¼Œç”¨äºè¿æ¥ElasticSearchæœç´¢å¼•æ“ï¼Œå¹¶æä¾›å¯è§†åŒ–çš„æ“ä½œé¡µé¢å¯¹ElasticSearchæœç´¢å¼•æ“è¿›è¡Œå„ç§è®¾ç½®å’Œæ•°æ®æ£€ç´¢åŠŸèƒ½çš„ç®¡ç†ã€‚<br>å¯åŠ¨ElasticSearchåï¼Œè¿›è¡Œè¿æ¥æµ‹è¯•ï¼š<br><img src="/2020/12/23/elasticSearch/1.png" alt></p><h2 id="ElasticSearchæ ¸å¿ƒæ¦‚å¿µ"><a href="#ElasticSearchæ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="ElasticSearchæ ¸å¿ƒæ¦‚å¿µ"></a>ElasticSearchæ ¸å¿ƒæ¦‚å¿µ</h2><p>elasticsearchæ˜¯é¢å‘æ–‡æ¡£çš„ã€‚<br><strong>indicesç´¢å¼•</strong>ç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„<strong>æ•°æ®åº“</strong>ï¼Œé»˜è®¤å°†ç´¢å¼•åˆ’åˆ†ä¸ºå¤šä¸ªåˆ†ç‰‡ï¼Œæ¯ä¸ªåˆ†ç‰‡å¯ä»¥åœ¨é›†ç¾¤ä¸­çš„ä¸åŒçš„æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œè¿ç§»ï¼›ä¸€ä¸ªåˆ†ç‰‡å°±æ˜¯ä¸€ä¸ªLuceneç´¢å¼•ï¼Œä¸€ä¸ªåŒ…å«<strong>å€’æ’ç´¢å¼•</strong>çš„æ–‡ä»¶ç›®å½•ï¼Œæœ‰åˆ©äºå…¨æ–‡æœç´¢ã€‚<br><strong>documentæ–‡æ¡£</strong>ç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„<strong>è¡Œ</strong>ï¼Œç´¢å¼•å’Œæœç´¢çš„åŸºæœ¬å•ä½å°±æ˜¯æ–‡æ¡£ï¼Œå°±æ˜¯ä¸€æ¡æ¡jsonæ•°æ®ï¼›<br><strong>fields</strong>ç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„<strong>å­—æ®µ</strong>ï¼›<br>typeç±»ä¼¼äºæ•°æ®åº“ä¸­çš„è¡¨ ï¼ˆæ…¢æ…¢è¢«åºŸå¼ƒï¼‰ã€‚</p><h2 id="ELKçš„ç®€ä»‹"><a href="#ELKçš„ç®€ä»‹" class="headerlink" title="ELKçš„ç®€ä»‹"></a>ELKçš„ç®€ä»‹</h2><p>ELKæ˜¯ElasticSearchã€Logstashã€Kibanä¸‰å¤§å¼€æºæ¡†æ¶çš„ç®€ç§°ï¼Œä¸€èˆ¬ç”¨äºæ—¥å¿—çš„åˆ†æå’Œæ”¶é›†ç­‰åœºæ™¯ã€‚<br>ElasticSearchæ˜¯åŸºäºLuceneçš„åˆ†å¸ƒå¼æœç´¢å¼•æ“ã€‚<br>Logstashæ˜¯ELKçš„ä¸­å¤®æ•°æ®æµå¼•æ“ï¼Œç”¨äºä»ä¸åŒç›®æ ‡ï¼ˆæ–‡ä»¶ã€MQï¼‰ä¸­æ”¶é›†ä¸åŒæ ¼å¼æ•°æ®ï¼Œç»è¿‡è¿‡æ»¤åè¾“å‡ºåˆ°ç›®çš„åœ°ï¼ˆæ–‡ä»¶ã€MQã€reidsã€elasticsearchç­‰ï¼‰ã€‚<br>Kibanaå¯å°†ElasticSearchä¸­çš„æ•°æ®è¿›è¡Œå‹å¥½çš„å±•ç¤ºï¼Œå¹¶æä¾›å®æ—¶çš„åˆ†æåŠŸèƒ½ã€‚</p><h2 id="Kibanaçš„å®‰è£…å¯åŠ¨"><a href="#Kibanaçš„å®‰è£…å¯åŠ¨" class="headerlink" title="Kibanaçš„å®‰è£…å¯åŠ¨"></a>Kibanaçš„å®‰è£…å¯åŠ¨</h2><p>å¯åŠ¨ElasticSearchåï¼Œå†å¯åŠ¨Kibannaåè®¿é—®``<a href="http://localhost:5601`">http://localhost:5601`</a></p><h2 id="å®‰è£…IKåˆ†è¯å™¨"><a href="#å®‰è£…IKåˆ†è¯å™¨" class="headerlink" title="å®‰è£…IKåˆ†è¯å™¨"></a>å®‰è£…IKåˆ†è¯å™¨</h2><p>ä¸‹è½½å®Œæˆåè§£å‹åˆ°elasticsearchçš„pluginsç›®å½•ä¸‹å³å¯ã€‚</p><p>åœ¨kibanaçš„æ§åˆ¶å°è¿›è¡Œæµ‹è¯•ï¼š</p><blockquote><p>æœ€å°åˆ‡åˆ† ik_smart</p></blockquote><pre class=" language-bash"><code class="language-bash">GET _analyze<span class="token punctuation">{</span>  <span class="token string">"analyzer"</span><span class="token keyword">:</span> <span class="token string">"ik_smart"</span>,  <span class="token string">"text"</span><span class="token keyword">:</span> <span class="token string">"ä»Šå¤©æ˜¯å¹³å®‰å¤œ"</span><span class="token punctuation">}</span></code></pre><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span> <span class="token property">"tokens"</span> <span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span>      <span class="token property">"token"</span> <span class="token operator">:</span> <span class="token string">"ä»Šå¤©æ˜¯"</span><span class="token punctuation">,</span>      <span class="token property">"start_offset"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>      <span class="token property">"end_offset"</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>      <span class="token property">"type"</span> <span class="token operator">:</span> <span class="token string">"CN_WORD"</span><span class="token punctuation">,</span>      <span class="token property">"position"</span> <span class="token operator">:</span> <span class="token number">0</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      <span class="token property">"token"</span> <span class="token operator">:</span> <span class="token string">"å¹³å®‰å¤œ"</span><span class="token punctuation">,</span>      <span class="token property">"start_offset"</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>      <span class="token property">"end_offset"</span> <span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>      <span class="token property">"type"</span> <span class="token operator">:</span> <span class="token string">"CN_WORD"</span><span class="token punctuation">,</span>      <span class="token property">"position"</span> <span class="token operator">:</span> <span class="token number">1</span>    <span class="token punctuation">}</span>  <span class="token punctuation">]</span><span class="token punctuation">}</span></code></pre><blockquote><p>æœ€ç»†ç²’åº¦åˆ’åˆ† ik_max_word</p></blockquote><pre class=" language-bash"><code class="language-bash">GET _analyze<span class="token punctuation">{</span>  <span class="token string">"analyzer"</span><span class="token keyword">:</span> <span class="token string">"ik_max_word"</span>,  <span class="token string">"text"</span><span class="token keyword">:</span> <span class="token string">"ä»Šå¤©æ˜¯å¹³å®‰å¤œ"</span><span class="token punctuation">}</span></code></pre><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>   <span class="token property">"tokens"</span> <span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span>      <span class="token property">"token"</span> <span class="token operator">:</span> <span class="token string">"ä»Šå¤©æ˜¯"</span><span class="token punctuation">,</span>      <span class="token property">"start_offset"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>      <span class="token property">"end_offset"</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>      <span class="token property">"type"</span> <span class="token operator">:</span> <span class="token string">"CN_WORD"</span><span class="token punctuation">,</span>      <span class="token property">"position"</span> <span class="token operator">:</span> <span class="token number">0</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      <span class="token property">"token"</span> <span class="token operator">:</span> <span class="token string">"ä»Šå¤©"</span><span class="token punctuation">,</span>      <span class="token property">"start_offset"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>      <span class="token property">"end_offset"</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>      <span class="token property">"type"</span> <span class="token operator">:</span> <span class="token string">"CN_WORD"</span><span class="token punctuation">,</span>      <span class="token property">"position"</span> <span class="token operator">:</span> <span class="token number">1</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      <span class="token property">"token"</span> <span class="token operator">:</span> <span class="token string">"æ˜¯"</span><span class="token punctuation">,</span>      <span class="token property">"start_offset"</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>      <span class="token property">"end_offset"</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>      <span class="token property">"type"</span> <span class="token operator">:</span> <span class="token string">"CN_CHAR"</span><span class="token punctuation">,</span>      <span class="token property">"position"</span> <span class="token operator">:</span> <span class="token number">2</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      <span class="token property">"token"</span> <span class="token operator">:</span> <span class="token string">"å¹³å®‰å¤œ"</span><span class="token punctuation">,</span>      <span class="token property">"start_offset"</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>      <span class="token property">"end_offset"</span> <span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>      <span class="token property">"type"</span> <span class="token operator">:</span> <span class="token string">"CN_WORD"</span><span class="token punctuation">,</span>      <span class="token property">"position"</span> <span class="token operator">:</span> <span class="token number">3</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      <span class="token property">"token"</span> <span class="token operator">:</span> <span class="token string">"å¹³å®‰"</span><span class="token punctuation">,</span>      <span class="token property">"start_offset"</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>      <span class="token property">"end_offset"</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>      <span class="token property">"type"</span> <span class="token operator">:</span> <span class="token string">"CN_WORD"</span><span class="token punctuation">,</span>      <span class="token property">"position"</span> <span class="token operator">:</span> <span class="token number">4</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      <span class="token property">"token"</span> <span class="token operator">:</span> <span class="token string">"å¤œ"</span><span class="token punctuation">,</span>      <span class="token property">"start_offset"</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>      <span class="token property">"end_offset"</span> <span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>      <span class="token property">"type"</span> <span class="token operator">:</span> <span class="token string">"CN_CHAR"</span><span class="token punctuation">,</span>      <span class="token property">"position"</span> <span class="token operator">:</span> <span class="token number">5</span>    <span class="token punctuation">}</span>  <span class="token punctuation">]</span><span class="token punctuation">}</span></code></pre><p>åœ¨ikåˆ†è¯å™¨çš„configç›®å½•ä¸‹å¯ä»¥è‡ªå®šä¹‰å­—å…¸ï¼Œå¹¶è¿›è¡Œé…ç½®<br><img src="/2020/12/23/elasticSearch/2.png" style="zoom:80%;"></p><h2 id="Restful"><a href="#Restful" class="headerlink" title="Restful"></a>Restful</h2><p>ä¸€ç§è½¯ä»¶æ¶æ„é£æ ¼ã€è®¾è®¡é£æ ¼ï¼Œè€Œä¸æ˜¯æ ‡å‡†ï¼Œåªæ˜¯æä¾›äº†ä¸€ç»„è®¾è®¡åŸåˆ™å’Œçº¦æŸæ¡ä»¶ã€‚å®ƒä¸»è¦ç”¨äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨äº¤äº’ç±»çš„è½¯ä»¶ã€‚åŸºäºè¿™ä¸ªé£æ ¼è®¾è®¡çš„è½¯ä»¶å¯ä»¥æ›´ç®€æ´ï¼Œæ›´æœ‰å±‚æ¬¡ï¼Œæ›´æ˜“äºå®ç°ç¼“å­˜ç­‰æœºåˆ¶ã€‚</p><p>ä¸€å¥è¯æè¿°ï¼š<strong>URLå®šä½èµ„æºï¼Œç”¨HTTPåŠ¨è¯ï¼ˆGET,POST,DELETE,DETCï¼‰æè¿°æ“ä½œã€‚</strong></p><h2 id="ElasticSearchåŸºæœ¬æ“ä½œ"><a href="#ElasticSearchåŸºæœ¬æ“ä½œ" class="headerlink" title="ElasticSearchåŸºæœ¬æ“ä½œ"></a>ElasticSearchåŸºæœ¬æ“ä½œ</h2><p>1ã€åˆ›å»ºç´¢å¼•å¹¶æ·»åŠ æ–‡æ¡£<br><code>PUT /ç´¢å¼•å/ç±»å‹å/æ–‡æ¡£id {è¯·æ±‚ä½“}</code><br><img src="/2020/12/23/elasticSearch/3.png" alt></p><p>å‘é€è¯·æ±‚å®Œæˆåï¼Œå°±åˆ›å»ºäº†ä¸€æ¡ç´¢å¼•ï¼š<br><img src="/2020/12/23/elasticSearch/4.png" alt></p><p>2ã€è®¾ç½®æ˜ å°„è§„åˆ™ï¼ˆå­—æ®µç±»å‹ï¼‰<br><img src="/2020/12/23/elasticSearch/5.png" alt></p><p>3ã€è·å–ç´¢å¼•ä¿¡æ¯ï¼š<code>GET /test2</code></p><p>4ã€æŸ¥çœ‹æ‰€æœ‰ç´¢å¼•çš„ä¿¡æ¯ï¼š<code>GET _cat/indices?v</code><br><img src="/2020/12/23/elasticSearch/6.png" alt></p><p>5ã€ä¿®æ”¹ç´¢å¼•ä¸­çš„æ–‡æ¡£<br><code>POST /test3/_doc/1/_update {&quot;doc&quot;:{&quot;name&quot;:&quot;zhangyuzhen&quot;}}</code><br><img src="/2020/12/23/elasticSearch/7.png" alt></p><p>6ã€åˆ é™¤ç´¢å¼•ï¼š<code>DELETE /test3</code></p><p>7ã€è·å–æ–‡æ¡£<br>åˆ›å»ºç´¢å¼•å¹¶æ·»åŠ å‡ æ¡æ–‡æ¡£ï¼š<br><img src="/2020/12/23/elasticSearch/8.png" alt></p><p>è·å–ç¬¬ä¸€æ¡æ–‡æ¡£æ•°æ®ï¼š <code>GET /test/user/1</code><br><img src="/2020/12/23/elasticSearch/9.png" alt></p><p>æŒ‡å®šæ¡ä»¶è·å–æ•°æ®ï¼š<code>GET /test/user_search?q=name:lisi</code></p><p><strong>å¤æ‚æœç´¢ï¼š</strong></p><p>æ¡ä»¶åŒ¹é…ä¸ç»“æœè¿‡æ»¤ï¼š<img src="/2020/12/23/elasticSearch/10.png" alt></p><p>æ’åºä¸åˆ†é¡µï¼š<br><img src="/2020/12/23/elasticSearch/11.png" alt></p><p>boolå¤šæ¡ä»¶æŸ¥è¯¢ï¼š<br><img src="/2020/12/23/elasticSearch/12.png" alt></p><p>è¿‡æ»¤å™¨ï¼š<br><img src="/2020/12/23/elasticSearch/13.png" alt></p><blockquote><ul><li>gt å¤§äº</li><li>gte å¤§äºç­‰äº</li><li>lt å°äº</li><li>lte å°äºç­‰äº</li></ul></blockquote><p>ç²¾ç¡®æŸ¥è¯¢ï¼š<br>termï¼Œç›´æ¥é€šè¿‡å€’æ’ç´¢å¼•æŒ‡å®šçš„è¯æ¡è¿›è¡Œç²¾ç¡®æŸ¥æ‰¾ã€‚<br>matchï¼Œä½¿ç”¨åˆ†è¯å™¨è§£æã€‚   </p><blockquote><p>keywordç±»å‹ä¸ä¼šè¢«åˆ†è¯å™¨è§£æ</p></blockquote><p>æŸ¥è¯¢å…³é”®å­—é«˜äº®ï¼š<br><img src="/2020/12/23/elasticSearch/14.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ElasticSearch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ä¹ ç¬”è®°</title>
      <link href="2020/11/28/note/"/>
      <url>2020/11/28/note/</url>
      
        <content type="html"><![CDATA[<h2 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h2><ul><li><p>ã€å¼ºåˆ¶ã€‘ä¸»é”®ç´¢å¼•åä¸ºpk_å­—æ®µåï¼›</p><p>â€‹    å”¯ä¸€ç´¢å¼•åä¸ºuk_å­—æ®µåï¼›</p><p>â€‹    æ™®é€šç´¢å¼•ååˆ™ä¸ºidx_å­—æ®µåã€‚</p><p>â€‹    è¯´æ˜ï¼špk_ å³primary keyï¼›uk_ å³unique keyï¼›idx_ å³indexçš„ç®€ç§°ã€‚</p></li><li><p>ã€å¼ºåˆ¶ã€‘è¡¨å¿…å¤‡ä¸‰å­—æ®µï¼šid, gmt_create, gmt_modifiedã€‚</p><p>è¯´æ˜ï¼šå…¶ä¸­idå¿…ä¸ºä¸»é”®ï¼Œç±»å‹ä¸ºunsigned bigintã€å•è¡¨æ—¶è‡ªå¢ã€æ­¥é•¿ä¸º1ã€‚gmt_create, gmt_modifiedçš„ç±»å‹å‡ä¸ºdatetimeç±»å‹ï¼Œå‰è€…ç°åœ¨æ—¶è¡¨ç¤ºä¸»åŠ¨åˆ›å»ºï¼Œåè€…è¿‡å»åˆ†è¯è¡¨ç¤ºè¢«åŠ¨æ›´æ–°ã€‚gmtè¡¨ç¤ºæ ¼æ—å¨æ²»æ—¶é—´å³å›½é™…æ—¶é—´ã€‚</p><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true"># DEFAULT CURRENT_TIMESTAMP  è¡¨ç¤ºå½“æ’å…¥æ•°æ®çš„æ—¶å€™ï¼Œè¯¥å­—æ®µé»˜è®¤å€¼ä¸ºå½“å‰æ—¶é—´</span><span class="token comment" spellcheck="true"># ON UPDATE CURRENT_TIMESTAM  è¡¨ç¤ºæ¯æ¬¡æ›´æ–°è¿™æ¡æ•°æ®çš„æ—¶å€™ï¼Œè¯¥å­—æ®µéƒ½ä¼šæ›´æ–°æˆå½“å‰æ—¶é—´</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>test<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'ä¸»é”®id'</span><span class="token punctuation">,</span><span class="token punctuation">`</span>create_time<span class="token punctuation">`</span> <span class="token keyword">timestamp</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">COMMENT</span> <span class="token string">'åˆ›å»ºæ—¶é—´'</span><span class="token punctuation">,</span><span class="token punctuation">`</span>update_time<span class="token punctuation">`</span> <span class="token keyword">timestamp</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">COMMENT</span> <span class="token string">'æ›´æ–°æ—¶é—´'</span><span class="token punctuation">)</span></code></pre></li><li><p>ã€å¼ºåˆ¶ã€‘POJOç±»çš„å¸ƒå°”å±æ€§ä¸èƒ½åŠ isï¼Œè€Œæ•°æ®åº“å­—æ®µå¿…é¡»åŠ is_ï¼Œè¦æ±‚åœ¨resultMapä¸­è¿›è¡Œå­—æ®µä¸å±æ€§ä¹‹é—´çš„æ˜ å°„ã€‚è¯´æ˜ï¼šå‚è§å®šä¹‰POJOç±»ä»¥åŠæ•°æ®åº“å­—æ®µå®šä¹‰è§„å®šï¼Œåœ¨<code>&lt;resultMap&gt;</code>ä¸­å¢åŠ æ˜ å°„ï¼Œæ˜¯å¿…é¡»çš„ã€‚åœ¨MyBatis Generatorç”Ÿæˆçš„ä»£ç ä¸­ï¼Œéœ€è¦è¿›è¡Œå¯¹åº”çš„ä¿®æ”¹ã€‚</p></li><li><p>è‡ªå¢IDä¸UUID</p><ul><li><p>è‡ªå¢IDæ•°æ®å­˜å‚¨ç©ºé—´å°ï¼Œæ€§èƒ½å¥½ï¼Œä½†æ˜¯å®‰å…¨æ€§ä½ï¼Œå¾ˆéš¾å¤„ç†åˆ†å¸ƒå¼å­˜å‚¨çš„æ•°æ®è¡¨ï¼Œå¤„ç†å¤§é‡æ•°æ®å¯èƒ½ä¼šè¶…è¿‡è‡ªå¢é•¿çš„å–å€¼èŒƒå›´</p></li><li><p>uuid_short() ç”Ÿæˆ18ä½æ­£éšæœºæ•° ===&gt;bigint(20)</p></li></ul></li></ul><pre class=" language-xml"><code class="language-xml">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>addLocationArea<span class="token punctuation">"</span></span>          <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      INSERT INTO location( ... )      VALUES      (SHORT_UUID(), ...)  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">></span></span></code></pre><ul><li><p>éšæœºæ­£Longå€¼uuid ===&gt;bigint(20)</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">static</span> Long <span class="token function">getUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// ç”Ÿæˆ19ä½æ­£éšæœºæ•°</span>    <span class="token keyword">return</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getLeastSignificantBits</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre></li><li><p>MySQLå­—æ®µå°½é‡é¿å…NULLï¼Œåº”è¯¥æŒ‡å®šåˆ—ä¸ºNOT NULLï¼Œé™¤éä½ æƒ³å­˜å‚¨NULLã€‚åœ¨MySQLä¸­ï¼Œå«æœ‰ç©ºå€¼çš„åˆ—å¾ˆéš¾è¿›è¡ŒæŸ¥è¯¢ä¼˜åŒ–ï¼Œè€Œä¸”å¯¹è¡¨ç´¢å¼•æ—¶ä¸ä¼šå­˜å‚¨NULLå€¼çš„ï¼Œæ‰€ä»¥å¦‚æœç´¢å¼•çš„å­—æ®µå¯ä»¥ä¸ºNULLï¼Œç´¢å¼•çš„æ•ˆç‡ä¼šä¸‹é™å¾ˆå¤šã€‚å› ä¸ºå®ƒä»¬ä½¿å¾—ç´¢å¼•ã€ç´¢å¼•çš„ç»Ÿè®¡ä¿¡æ¯ä»¥åŠæ¯”è¾ƒè¿ç®—æ›´åŠ å¤æ‚ã€‚ä½ åº”è¯¥ç”¨0ã€ä¸€ä¸ªç‰¹æ®Šçš„å€¼æˆ–è€…ä¸€ä¸ªç©ºä¸²ä»£æ›¿ç©ºå€¼ã€‚</p><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true"># æŸ¥è¯¢å‡ºæ¥çš„çš„è®°å½•ä¸­colåˆ—å¯ä»¥ä¸º''(ç©ºå­—ç¬¦ä¸²)</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">`</span><span class="token keyword">table</span><span class="token punctuation">`</span> <span class="token keyword">WHERE</span> col <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢colåˆ—ä¸ä¸º''çš„æ‰€æœ‰è®°å½•</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">`</span><span class="token keyword">table</span><span class="token punctuation">`</span> <span class="token keyword">WHERE</span> col1 <span class="token operator">&lt;></span> <span class="token string">''</span><span class="token punctuation">;</span> </code></pre><h3 id="crud"><a href="#crud" class="headerlink" title="crud"></a>crud</h3></li><li><p>æ¨¡ç³Šæœç´¢ï¼š </p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> id<span class="token punctuation">,</span>name <span class="token keyword">from</span> product <span class="token keyword">where</span> name <span class="token operator">like</span> concat<span class="token punctuation">(</span><span class="token string">'%'</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true">#{name,jdbcType=varchar},'%')</span></code></pre></li></ul><ul><li><p>æ ¹æ®ä¸ç¡®å®šçš„å­—æ®µæ¡ä»¶è¿›è¡ŒæŸ¥è¯¢ï¼š</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ResultMap<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.UserPO<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">jdbcType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>BIGINT<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">jdbcType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>VARCHAR<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">jdbcType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>VARCHAR<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>userItemPOList<span class="token punctuation">"</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.UserItemPO<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!--propertyå¯¹åº”UserPOä¸­çš„æ˜ç»†å¯¹è±¡é›†åˆ  ofTypeå¯¹åº”é›†åˆå¯¹è±¡çš„å®ä½“ç±»--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item_id<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">jdbcType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>BIGINT<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>school_name<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">jdbcType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>VARCHAR<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>school_address<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>address<span class="token punctuation">"</span></span> <span class="token attr-name">jdbcType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>VARCHAR<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment" spellcheck="true">&lt;!--columnå±æ€§ä¸ºè”è¡¨æŸ¥è¯¢ä¸­ä¸»è¡¨ä»¥å¤–çš„è¡¨çš„å­—æ®µåˆ«å--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collection</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sql</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Base_Column_List<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>    id,name,password<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sql</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ResultMap<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">refid</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Base_Column_List<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        from t_user        where 1=1        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>PO.id !<span class="token punctuation">=</span> null<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>            and id = #{PO.id,jdbcType=BIGINT}        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>PO.name !<span class="token punctuation">=</span> null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            and name = #{PO.name,jdbcType=VARCHAR}        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre></li></ul>  <!--æ‰¹é‡æ¡ä»¶æŸ¥è¯¢  æ ¹æ®å•†å“æ˜ç»†åˆ—è¡¨ä¸­çš„æ‰€æœ‰idæŸ¥è¯¢å¯¹åº”çš„æ˜ç»†è¯¦æƒ…-->  <select id="list" resultmap="ResultMap">          SELECT          <include refid="chargeofforderitemdetailColumns">          FROM chargeofforderitemdetail          <where>              <if test="chargeOfforderItemIdList != null and chargeOfforderItemIdList.size() > 0">                  ChargeOfforderItem_Id in                  <foreach collection="chargeOfforderItemIdList" item="item" separator="," open="(" close=")">                      #{item,jdbcType=VARCHAR}                  </foreach>              </if>          </where>  </include></select>  ```<ul><li><p>æ’å…¥ä¸ç¡®å®šçš„å±æ€§å­—æ®µ</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>insert<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    insert into table    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>trim</span> <span class="token attr-name">prefix</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>(<span class="token punctuation">"</span></span> <span class="token attr-name">suffix</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>)<span class="token punctuation">"</span></span> <span class="token attr-name">suffixOverrides</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>,<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            id,        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>PO.name !<span class="token punctuation">=</span> null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            name,        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>        create_Time,        lastUpdate_Time    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>trim</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>trim</span> <span class="token attr-name">prefix</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>values (<span class="token punctuation">"</span></span> <span class="token attr-name">suffix</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>)<span class="token punctuation">"</span></span> <span class="token attr-name">suffixOverrides</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>,<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>         UUID_SHORT(),         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>PO.name !<span class="token punctuation">=</span> null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>             #{PO.name,jdbcType=VARCHAR},         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>         now(),         now()   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>trim</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">></span></span></code></pre></li><li><p>æ‰¹é‡æ’å…¥</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>insertbatch<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>java.util.List<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>    insert into user(Id,name)values    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>,<span class="token punctuation">"</span></span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        (        UUID_SHORT(),        #{item.name,jdbcType=VARCHAR}        )    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">></span></span></code></pre></li><li><p>æ ¹æ®ä¸ç¡®å®šçš„å­—æ®µæ¡ä»¶è¿›è¡Œæ›´æ–°</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>update<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    update table    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>PO.state !<span class="token punctuation">=</span> null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            name = #{PO.name,jdbcType=VARCHAR},        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>PO.password !<span class="token punctuation">=</span> null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            password = #{PO.password,jdbcType=VARCHAR},        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">></span></span>    where id = #{PO.id,jdbc=BIGINT}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">></span></span></code></pre></li><li><p>æ—¶é—´æ®µçš„å¤„ç†</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>beginTime !<span class="token punctuation">=</span> null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      and <span class="token cdata">&lt;![CDATA[ BusinessTime >=  #{beginTime,jdbcType=TIMESTAMP} ]]></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>endTime !<span class="token punctuation">=</span> null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      and <span class="token cdata">&lt;![CDATA[ BusinessTime &lt;=  #{endTime,jdbcType=TIMESTAMP} ]]></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span></code></pre></li></ul><h2 id="æ¡†æ¶"><a href="#æ¡†æ¶" class="headerlink" title="æ¡†æ¶"></a>æ¡†æ¶</h2><h3 id="Springç¼“å­˜æ³¨è§£"><a href="#Springç¼“å­˜æ³¨è§£" class="headerlink" title="Springç¼“å­˜æ³¨è§£"></a>Springç¼“å­˜æ³¨è§£</h3><ul><li><p>Spring Cacheæ˜¯ä½œç”¨åœ¨æ–¹æ³•ä¸Šçš„ï¼Œå½“æˆ‘ä»¬åœ¨è°ƒç”¨ä¸€ä¸ªç¼“å­˜æ–¹æ³•æ—¶ä¼šæŠŠè¯¥æ–¹æ³•å‚æ•°å’Œè¿”å›ç»“æœä½œä¸ºä¸€ä¸ªé”®å€¼å¯¹å­˜æ”¾åœ¨ç¼“å­˜ä¸­ï¼Œç­‰åˆ°ä¸‹æ¬¡è°ƒç”¨åŒæ ·çš„å‚æ•°æ¥è°ƒç”¨è¯¥æ–¹æ³•æ—¶å°†ä¸å†æ‰§è¡Œè¯¥æ–¹æ³•ï¼Œè€Œæ˜¯ç›´æ¥ä»ç¼“å­˜ä¸­è·å–ç»“æœè¿›è¡Œè¿”å›ã€‚</p></li><li><p><code>@Cacheable(key=&quot;&quot; , value=&quot;&quot;)</code> ç”¨äº<strong>æŸ¥è¯¢</strong>çš„æ–¹æ³•</p></li><li><p><code>@CacheEvict(key=&quot;&quot; , value=&quot;&quot;)</code> è°ƒç”¨æ­¤æ³¨è§£ä¸‹çš„æ–¹æ³•æ—¶ä¼šæ¸…é™¤ç¼“å­˜ï¼Œç”¨äº<strong>å¢åˆ æ”¹</strong>æ–¹æ³•</p><p> keyå±æ€§æ˜¯ç”¨æ¥æŒ‡å®šSpringç¼“å­˜æ–¹æ³•çš„<strong>è¿”å›ç»“æœæ—¶å¯¹åº”çš„key</strong>ï¼Œvalueå±æ€§ç”¨æ¥æŒ‡å®š<strong>ç¼“å­˜åç§°</strong>ã€‚</p></li><li><p>ä½¿ç”¨åœºæ™¯ï¼šä¸šåŠ¡å±‚blä¸­çš„å…³äºç”¨æˆ·çš„åŸºç¡€å¢åˆ æ”¹æŸ¥åŠŸèƒ½ã€‚</p></li><li><p><strong>ä»¥åä¸ä¼šä½¿ç”¨æ­¤æ–¹å¼äº†ï¼Œå› ä¸ºä¸èƒ½æŒ‡å®šæ•°æ®æœ‰æ•ˆæ—¶é—´ï¼Œä»¥åŠè¯»å–æ”¹å˜çš„æ•°æ®ä¸å¤Ÿçµæ´»ã€‚ä¸€èˆ¬ä½¿ç”¨RedisTempleæˆ–è€…è‡ªå®šä¹‰æ³¨è§£çš„æ–¹å¼ã€‚</strong></p></li></ul><h3 id="Transactional"><a href="#Transactional" class="headerlink" title="@Transactional"></a>@Transactional</h3><ul><li>ä¸€èˆ¬åœ¨blå±‚çš„æ–¹æ³•ä¸­æ‰§è¡Œå¤šæ¡sqlæ—¶ä½¿ç”¨<ul><li><code>@Transactional(rollbackFor = { Exception.class })</code></li><li>é»˜è®¤å‘ç”Ÿ<code>Error</code>æˆ–<code>RuntimeException</code>æ—¶æ‰ä¼šå›æ»šï¼Œå‘ç”Ÿéè¿è¡Œæ—¶å¼‚å¸¸æ—¶ä¸ä¼šå›æ»šï¼Œéœ€è¦ä½¿ç”¨<code>rollbackFor</code>å±æ€§æŒ‡å®šå›æ»šçš„éè¿è¡Œæ—¶å¼‚å¸¸ã€‚</li></ul></li></ul><h3 id="Controllerä¸­çš„Modelå‚æ•°"><a href="#Controllerä¸­çš„Modelå‚æ•°" class="headerlink" title="Controllerä¸­çš„Modelå‚æ•°"></a>Controllerä¸­çš„Modelå‚æ•°</h3><ul><li>åªæœ‰åœ¨å‰ç«¯è¯·æ±‚æœ‰é¡µé¢è¿”å›çš„æ—¶å€™ç”¨åˆ°ï¼Œä¿å­˜äº†æƒ³è¦å±•ç¤ºåœ¨é¡µé¢ä¸Šçš„æ•°æ®ã€‚</li><li>ä¾‹å¦‚æ•°æ®çš„å¯¼å‡ºæ—¶ï¼Œä½¿ç”¨åˆ°äº†Modelå‚æ•°ã€‚</li></ul><h3 id="è‡ªå®šä¹‰æ³¨è§£ä¸­çš„å…ƒæ³¨è§£"><a href="#è‡ªå®šä¹‰æ³¨è§£ä¸­çš„å…ƒæ³¨è§£" class="headerlink" title="è‡ªå®šä¹‰æ³¨è§£ä¸­çš„å…ƒæ³¨è§£"></a>è‡ªå®šä¹‰æ³¨è§£ä¸­çš„å…ƒæ³¨è§£</h3><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// å®šä¹‰æ³¨è§£ä½¿ç”¨çš„æ—¶æœº METHOD->é€‚ç”¨äºæ–¹æ³•  TYPE->é€‚ç”¨äº class,interface,enum</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span>ElementType<span class="token punctuation">.</span>METHOD<span class="token punctuation">,</span> ElementType<span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// åœ¨è¿è¡Œæ—¶å»åŠ¨æ€è·å–æ³¨è§£ä¿¡æ¯</span><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span>RetentionPolicy<span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span></code></pre><h3 id="å…¨å±€å¼‚å¸¸å¤„ç†"><a href="#å…¨å±€å¼‚å¸¸å¤„ç†" class="headerlink" title="å…¨å±€å¼‚å¸¸å¤„ç†"></a>å…¨å±€å¼‚å¸¸å¤„ç†</h3><ul><li>å¯¹ç±»æ·»åŠ @ControllerAdviceæ³¨è§£ï¼Œåœ¨å¤„ç†å¼‚å¸¸çš„æ–¹æ³•å‰æ·»åŠ <pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@ResponseStatus</span><span class="token punctuation">(</span>HttpStatus<span class="token punctuation">.</span>OK<span class="token punctuation">)</span><span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token punctuation">{</span>Exception<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token annotation punctuation">@ResponseBody</span></code></pre></li></ul><h3 id="CommandLineRunneræ¥å£"><a href="#CommandLineRunneræ¥å£" class="headerlink" title="CommandLineRunneræ¥å£"></a>CommandLineRunneræ¥å£</h3><p>åœ¨åº”ç”¨åˆå§‹åŒ–åï¼Œå»æ‰§è¡Œä¸€æ®µä»£ç å—é€»è¾‘ï¼Œè¿™æ®µåˆå§‹åŒ–ä»£ç åœ¨æ•´ä¸ªåº”ç”¨ç”Ÿå‘½å‘¨æœŸå†…åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</p><p>ç”¨äºé¢„å…ˆåŠ è½½æ•°æ®ï¼Œå®ç°CommandLineRunneræ¥å£ï¼Œéœ€è¦åŠ è½½çš„æ•°æ®çš„é€»è¾‘å†™åœ¨run()æ–¹æ³•ä¸­ã€‚</p><p>å¯ä½¿ç”¨@Order(1)ï¼Œ@Order(2)â€¦â€¦æ³¨è§£æŒ‡å®šåŠ è½½é¡ºåºã€‚</p><h3 id="å¯¹è±¡çš„æœ‰çŠ¶æ€ä¸æ— çŠ¶æ€"><a href="#å¯¹è±¡çš„æœ‰çŠ¶æ€ä¸æ— çŠ¶æ€" class="headerlink" title="å¯¹è±¡çš„æœ‰çŠ¶æ€ä¸æ— çŠ¶æ€"></a>å¯¹è±¡çš„æœ‰çŠ¶æ€ä¸æ— çŠ¶æ€</h3><ul><li><p>æ˜¯å¦å­˜å‚¨æ•°æ®</p></li><li><p>æ— çŠ¶æ€çš„Beané€‚åˆç”¨å•ä¾‹æ¨¡å¼ï¼Œè¿™æ ·å¯ä»¥å…±äº«å®ä¾‹ï¼Œæé«˜æ€§èƒ½ã€‚æœ‰çŠ¶æ€çš„Beanï¼Œå¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¸å®‰å…¨ï¼Œé‚£ä¹ˆé€‚åˆç”¨PrototypeåŸå‹æ¨¡å¼ã€‚Prototype: æ¯æ¬¡å¯¹beançš„è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„beanå®ä¾‹ã€‚</p></li></ul><h3 id="Controllerä¸­çš„è¿”å›æ•°æ®"><a href="#Controllerä¸­çš„è¿”å›æ•°æ®" class="headerlink" title="Controllerä¸­çš„è¿”å›æ•°æ®"></a>Controllerä¸­çš„è¿”å›æ•°æ®</h3><ul><li><code>ResponseAdvisor</code>å¯¹è¿”å›æ•°æ®è¿›è¡Œäº†æ‹¦æˆªï¼Œç„¶åç»Ÿä¸€å¤„ç†ï¼Œæ‰€æœ‰çš„controlleråªéœ€è¦è¿”å›ä¸šåŠ¡ç›¸å…³æ•°æ®å³å¯ã€‚</li></ul><pre class=" language-java"><code class="language-java">    <span class="token annotation punctuation">@ControllerAdvice</span> <span class="token comment" spellcheck="true">// å¯¹controllerçš„å…¨å±€é…ç½®</span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResponseAdvisor</span> <span class="token keyword">implements</span> <span class="token class-name">ResponseBodyAdvice</span><span class="token operator">&lt;</span>Object<span class="token operator">></span> <span class="token punctuation">{</span>       <span class="token annotation punctuation">@Override</span>       <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">supports</span><span class="token punctuation">(</span>MethodParameter returnType<span class="token punctuation">,</span> Class<span class="token operator">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">HttpMessageConverter</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">>></span> converterType<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span>       <span class="token annotation punctuation">@Override</span>       <span class="token keyword">public</span> Object <span class="token function">beforeBodyWrite</span><span class="token punctuation">(</span>Object body<span class="token punctuation">,</span> MethodParameter returnType<span class="token punctuation">,</span> MediaType selectedContentType<span class="token punctuation">,</span>             Class<span class="token operator">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">HttpMessageConverter</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">>></span> selectedConverterType<span class="token punctuation">,</span> ServerHttpRequest request<span class="token punctuation">,</span>             ServerHttpResponse response<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>body <span class="token keyword">instanceof</span> <span class="token class-name">Result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>             <span class="token keyword">return</span> body<span class="token punctuation">;</span>          <span class="token punctuation">}</span>          <span class="token comment" spellcheck="true">// å¤„ç†æ•°æ®ï¼Œå°†ä¸šåŠ¡æ•°æ®å°è£…æˆè‡ªå®šä¹‰çš„ç»“æœé›†å¯¹è±¡Result </span>          <span class="token keyword">return</span> RetResponse<span class="token punctuation">.</span><span class="token function">makeOKRsp</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p>  <code>RetResponse</code>å¯¹controllerè¿”å›çš„ä¸šåŠ¡æ•°æ®å°è£…æˆè‡ªå®šä¹‰çš„ Resultå¯¹è±¡è¿”å›ç»™å‰ç«¯</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * å“åº”ç»“æœå°è£… å¯¹controllerè¿”å›çš„å‚æ•°å°è£…æˆè‡ªå®šä¹‰çš„ Resultå¯¹è±¡è¿”å›ç»™å‰ç«¯ */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RetResponse</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token operator">&lt;</span>T<span class="token operator">></span> Result<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">makeOKRsp</span><span class="token punctuation">(</span>T data<span class="token punctuation">,</span> String msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span>ResultCode<span class="token punctuation">.</span>SUCCESS<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 200</span>                <span class="token punctuation">.</span><span class="token function">setResult</span><span class="token punctuation">(</span>WebConstants<span class="token punctuation">.</span>RESULT_SUCCESS<span class="token punctuation">)</span><span class="token comment" spellcheck="true">// success</span>                <span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setMsg</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç»“æœä¿¡æ¯</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token operator">&lt;</span>T<span class="token operator">></span> Result<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">makeOKRsp</span><span class="token punctuation">(</span>T data<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span>ResultCode<span class="token punctuation">.</span>SUCCESS<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setResult</span><span class="token punctuation">(</span>WebConstants<span class="token punctuation">.</span>RESULT_SUCCESS<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token operator">&lt;</span>T<span class="token operator">></span> Result<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">makeOKRsp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span>ResultCode<span class="token punctuation">.</span>SUCCESS<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setResult</span><span class="token punctuation">(</span>WebConstants<span class="token punctuation">.</span>RESULT_SUCCESS<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token operator">&lt;</span>T<span class="token operator">></span> Result<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">makeErrRsp</span><span class="token punctuation">(</span>T data<span class="token punctuation">,</span> String msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                                                       <span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span>ResultCode<span class="token punctuation">.</span>INTERNAL_SERVER_ERROR<span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">setResult</span><span class="token punctuation">(</span>WebConstants<span class="token punctuation">.</span>RESULT_FAILED<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setMsg</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token operator">&lt;</span>T<span class="token operator">></span> Result<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">makeFailRsp</span><span class="token punctuation">(</span>T data<span class="token punctuation">,</span> String msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                                                       <span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span>ResultCode<span class="token punctuation">.</span>FAIL<span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">setResult</span><span class="token punctuation">(</span>WebConstants<span class="token punctuation">.</span>RESULT_FAILED<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setMsg</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token operator">&lt;</span>T<span class="token operator">></span> Result<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">makeRsp</span><span class="token punctuation">(</span>String code<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span>Integer<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token operator">&lt;</span>T<span class="token operator">></span> Result<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">makeRsp</span><span class="token punctuation">(</span>String code<span class="token punctuation">,</span> String msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span>Integer<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setMsg</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token operator">&lt;</span>T<span class="token operator">></span> Result<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">makeExceptionRsp</span><span class="token punctuation">(</span>String code<span class="token punctuation">,</span> String msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span>Integer<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">setMsg</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setResult</span><span class="token punctuation">(</span>WebConstants<span class="token punctuation">.</span>RESULT_FAILED<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token operator">&lt;</span>T<span class="token operator">></span> Result<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">makeRsp</span><span class="token punctuation">(</span>Integer code<span class="token punctuation">,</span> String msg<span class="token punctuation">,</span> T data<span class="token punctuation">,</span> String result<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setMsg</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setResult</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>  <code>Result</code>è‡ªå®šä¹‰ç»“æœé›†å°è£…å¯¹è±¡</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å“åº”ç </span>    <span class="token keyword">private</span> <span class="token keyword">int</span> code<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// çŠ¶æ€ä¿¡æ¯</span>    <span class="token keyword">private</span> String msg<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è¿”å›æ•°æ®</span>    <span class="token keyword">private</span> T data<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è¿”å›å¸¸é‡</span>    <span class="token keyword">private</span> String result<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Result</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**      * å¼‚å¸¸æ„é€ æ–¹æ³•      * @param exception      */</span>    <span class="token keyword">public</span> <span class="token function">Result</span><span class="token punctuation">(</span>Exception exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>result <span class="token operator">=</span> WebConstants<span class="token punctuation">.</span>RESULT_FAILED<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> exception<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span> exception<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">Result</span><span class="token punctuation">(</span>String message<span class="token punctuation">,</span> Exception exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">(</span>exception<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> message<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">Result</span><span class="token punctuation">(</span>String message<span class="token punctuation">,</span> Exception exception<span class="token punctuation">,</span> Boolean success<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">(</span>exception<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> ResultCode<span class="token punctuation">.</span>FAIL<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> message<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>result <span class="token operator">=</span> WebConstants<span class="token punctuation">.</span>RESULT_SUCCESS<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">Result</span><span class="token punctuation">(</span>String message<span class="token punctuation">,</span> Exception exception<span class="token punctuation">,</span> Integer code<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">(</span>exception<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> message<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Result <span class="token function">setCode</span><span class="token punctuation">(</span>ResultCode resultCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> resultCode<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>å“åº”ç æšä¸¾ç±»</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">enum</span> ResultCode <span class="token punctuation">{</span>    <span class="token function">SUCCESS</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true">//æˆåŠŸ</span>    <span class="token function">FAIL</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true">//å¤±è´¥</span>    <span class="token function">UNAUTHORIZED</span><span class="token punctuation">(</span><span class="token number">401</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true">//æœªè®¤è¯ï¼ˆç­¾åé”™è¯¯ï¼‰</span>    <span class="token function">NOT_FOUND</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true">//æ¥å£ä¸å­˜åœ¨</span>    <span class="token function">INTERNAL_SERVER_ERROR</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//æœåŠ¡å™¨å†…éƒ¨é”™è¯¯</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> code<span class="token punctuation">;</span>    <span class="token function">ResultCode</span><span class="token punctuation">(</span><span class="token keyword">int</span> code<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> code<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> code<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>è¿”å›å¸¸é‡</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConstants</span> <span class="token punctuation">{</span>   <span class="token comment" spellcheck="true">// è¿”è¿˜æˆåŠŸ</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String RESULT_SUCCESS <span class="token operator">=</span> <span class="token string">"success"</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">// è¿”è¿˜å¼‚å¸¸-ä¸šåŠ¡å¼‚å¸¸</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String RESULT_FAILED <span class="token operator">=</span> <span class="token string">"fail"</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">// è¿”è¿˜å¤±è´¥-ç³»ç»Ÿå¼‚å¸¸</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String RESULT_ERROR <span class="token operator">=</span> <span class="token string">"error"</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">// token</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String HEADER_TOKEN <span class="token operator">=</span> <span class="token string">"Atoken"</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">// TokenéªŒè¯å¤±è´¥,ç”¨æˆ·éªŒè¯å¼‚å¸¸</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> Integer AUTH_VALIDATE_FAILED <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String SERVICE_ERROR_TIPS <span class="token operator">=</span> <span class="token string">"æœåŠ¡å†…éƒ¨å¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•"</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><ul><li><p>æ—¶é—´æ ¼å¼åŒ–</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@JsonFormat</span><span class="token punctuation">(</span>pattern <span class="token operator">=</span> <span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">,</span> timezone <span class="token operator">=</span> <span class="token string">"GMT+8"</span><span class="token punctuation">)</span><span class="token keyword">private</span> Date createTime<span class="token punctuation">;</span></code></pre></li><li><p>åœ¨æ•°æ®åº“ä¸­ä¸èƒ½ä¸ºç©ºçš„å­—æ®µåœ¨ServiceImplä¸­ä½¿ç”¨ AssertUtils.notNull( å­—æ®µ  , â€œå‚æ•°ä¸èƒ½ä¸ºç©ºâ€)  è¿›è¡Œæ–­è¨€ï¼Œå‚æ•°ä¸ºç©ºæŠ›å‡ºå¼‚å¸¸ä¿¡æ¯ã€‚</p></li><li><p>è°ƒç”¨è¿‡ç¨‹ï¼š</p><p>controller (dto)-&gt;serviceæ¥å£(dto)-&gt;serviceImplå®ç°ç±»(dto)ï¼šä½¿ç”¨@Serviceæ³¨è§£-&gt;bl(dto)å®ç°ç±»ï¼šä½¿ç”¨@Serviceæ³¨è§£-&gt;mapper(po)æ¥å£ï¼ˆå¯¹åº”mapper.xmlæ–‡ä»¶ï¼‰-&gt;mysql</p></li><li><p>å½“å‰æ—¶é—´ï¼š</p><pre class=" language-java"><code class="language-java">Timestamp timestamp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Timestamp</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 2020-12-10 11:03:11.976</span>SimpleDateFormat df <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>String timestampDF <span class="token operator">=</span> df<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>timestampDF<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 2020-12-11 11:19:51</span>Date parseDate <span class="token operator">=</span> DateUtils<span class="token punctuation">.</span><span class="token function">parseDate</span><span class="token punctuation">(</span>timestampDF<span class="token punctuation">,</span> <span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>parseDate<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// Fri Dec 11 11:20:23 CST 2020</span></code></pre></li></ul><h3 id="åˆ†é¡µ"><a href="#åˆ†é¡µ" class="headerlink" title="åˆ†é¡µ"></a>åˆ†é¡µ</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PageList</span><span class="token operator">&lt;</span>T <span class="token keyword">extends</span> <span class="token class-name">Serializable</span><span class="token operator">></span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * serialVersionUID.     */</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token operator">-</span>6177180431483012580L<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * è¿”å›çš„æ•°æ®é›†åˆ     */</span>    <span class="token keyword">private</span> List<span class="token operator">&lt;</span>T<span class="token operator">></span> dataList<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * è¿”å›çš„åˆ†é¡µå¯¹è±¡ä¿¡æ¯     */</span>    <span class="token keyword">private</span> Pager pager<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * è·å– è¿”å›çš„æ•°æ®é›†åˆ     */</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">getDataList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> dataList<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * è®¾ç½® è¿”å›çš„æ•°æ®é›†åˆ     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDataList</span><span class="token punctuation">(</span>List<span class="token operator">&lt;</span>T<span class="token operator">></span> dataList<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>dataList <span class="token operator">=</span> dataList<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * è·å– è¿”å›çš„åˆ†é¡µå¯¹è±¡ä¿¡æ¯     */</span>    <span class="token keyword">public</span> Pager <span class="token function">getPager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> pager<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * è®¾ç½® è¿”å›çš„åˆ†é¡µå¯¹è±¡ä¿¡æ¯     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPager</span><span class="token punctuation">(</span>Pager pager<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>pager <span class="token operator">=</span> pager<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Pager</span> <span class="token keyword">extends</span> <span class="token class-name">PagerCondition</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * serialVersionUID.     */</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> 1L<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * æ€»è®°å½•æ•°     */</span>    <span class="token keyword">private</span> Integer recordCount<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * æ€»é¡µæ•°     */</span>    <span class="token keyword">private</span> Integer totalPage<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Pager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">Pager</span><span class="token punctuation">(</span>Integer currentPage<span class="token punctuation">,</span> Integer pageSize<span class="token punctuation">,</span> Integer recordCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>currentPage<span class="token punctuation">,</span> pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>recordCount <span class="token operator">=</span> recordCount<span class="token punctuation">;</span>        Integer totalPageSize <span class="token operator">=</span> recordCount <span class="token operator">/</span> pageSize<span class="token punctuation">;</span>        Integer remailder <span class="token operator">=</span> recordCount <span class="token operator">%</span> pageSize<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å¦‚æœæ€»è®°å½•æ•°ä¸æ¯é¡µæ˜¾ç¤ºæ¡æ•°çš„ä½™æ•°å¤§äº0ï¼Œæ€»é¡µæ•°åŠ 1</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>remailder <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            totalPageSize <span class="token operator">=</span> totalPageSize <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        totalPage <span class="token operator">=</span> totalPageSize<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * åˆ†é¡µæŸ¥è¯¢æ—¶ä½¿ç”¨     */</span>    <span class="token keyword">public</span> <span class="token function">Pager</span><span class="token punctuation">(</span>PagerCondition pageCondition<span class="token punctuation">,</span> Integer recordCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">setCurrentPage</span><span class="token punctuation">(</span>pageCondition<span class="token punctuation">.</span><span class="token function">getCurrentPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setPageSize</span><span class="token punctuation">(</span>pageCondition<span class="token punctuation">.</span><span class="token function">getPageSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setRecordCount</span><span class="token punctuation">(</span>recordCount<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setTotalPage</span><span class="token punctuation">(</span><span class="token punctuation">(</span>recordCount <span class="token operator">+</span> <span class="token function">getPageSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">getPageSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Integer <span class="token function">getRecordCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> recordCount<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setRecordCount</span><span class="token punctuation">(</span>Integer recordCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>recordCount <span class="token operator">=</span> recordCount<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Integer <span class="token function">getTotalPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> totalPage<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTotalPage</span><span class="token punctuation">(</span>Integer totalPage<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>totalPage <span class="token operator">=</span> totalPage<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PagerCondition</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>   <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> 1L<span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">/**    * @Fields å½“å‰é¡µ    */</span>   <span class="token keyword">private</span> Integer currentPage <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">/**    * @Fields æ¯é¡µçš„æ•°é‡    */</span>   <span class="token keyword">private</span> Integer pageSize <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>   <span class="token keyword">public</span> <span class="token function">PagerCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token keyword">public</span> <span class="token function">PagerCondition</span><span class="token punctuation">(</span>Integer currentPage<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>currentPage <span class="token operator">!=</span> null<span class="token punctuation">)</span>         <span class="token keyword">this</span><span class="token punctuation">.</span>currentPage <span class="token operator">=</span> currentPage<span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>pageSize <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token keyword">public</span> <span class="token function">PagerCondition</span><span class="token punctuation">(</span>Integer currentPage<span class="token punctuation">,</span> Integer pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>currentPage <span class="token operator">!=</span> null<span class="token punctuation">)</span>         <span class="token keyword">this</span><span class="token punctuation">.</span>currentPage <span class="token operator">=</span> currentPage<span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>pageSize <span class="token operator">=</span> pageSize<span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token keyword">public</span> Integer <span class="token function">getCurrentPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> currentPage<span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token keyword">public</span> Integer <span class="token function">getLimitnum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getPageSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token keyword">public</span> Integer <span class="token function">getOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCurrentPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getPageSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token keyword">public</span> Integer <span class="token function">getPageSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>pageSize <span class="token operator">==</span> null <span class="token operator">||</span> pageSize <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>         <span class="token keyword">return</span> <span class="token number">20</span><span class="token punctuation">;</span>      <span class="token keyword">else</span>         <span class="token keyword">return</span> pageSize<span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token keyword">public</span> Integer <span class="token function">getPreviousPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentPage <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>         <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentPage <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>         <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>   <span class="token punctuation">}</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCurrentPage</span><span class="token punctuation">(</span>Integer currentPage<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>currentPage <span class="token operator">=</span> currentPage<span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPageSize</span><span class="token punctuation">(</span>Integer pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>pageSize <span class="token operator">=</span> pageSize<span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token keyword">public</span> Integer <span class="token function">startRow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">int</span> startRow <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>currentPage <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>         startRow <span class="token operator">=</span> <span class="token punctuation">(</span>currentPage <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> pageSize<span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token keyword">return</span> startRow<span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// è¿™é‡Œçš„Pageæ˜¯PageHelperå†…éƒ¨å®šä¹‰çš„Page</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PageResult</span><span class="token operator">&lt;</span>E <span class="token keyword">extends</span> <span class="token class-name">Serializable</span><span class="token operator">></span> <span class="token keyword">extends</span> <span class="token class-name">Page</span><span class="token operator">&lt;</span>E<span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * è½¬æ¢ä¸ºPageList     * @return è½¬æ¢ç»“æœ     */</span>    <span class="token keyword">public</span> PageList<span class="token operator">&lt;</span>E<span class="token operator">></span> <span class="token function">toPageList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">final</span> PageList<span class="token operator">&lt;</span>E<span class="token operator">></span> pageList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PageList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        pageList<span class="token punctuation">.</span><span class="token function">setPager</span><span class="token punctuation">(</span><span class="token function">getPager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        pageList<span class="token punctuation">.</span><span class="token function">setDataList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> pageList<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Pager <span class="token function">getPager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">final</span> Pager pager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        pager<span class="token punctuation">.</span><span class="token function">setPageSize</span><span class="token punctuation">(</span><span class="token function">getPageSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        pager<span class="token punctuation">.</span><span class="token function">setCurrentPage</span><span class="token punctuation">(</span><span class="token function">getPageNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        pager<span class="token punctuation">.</span><span class="token function">setRecordCount</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">toIntExact</span><span class="token punctuation">(</span><span class="token function">getTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        pager<span class="token punctuation">.</span><span class="token function">setTotalPage</span><span class="token punctuation">(</span><span class="token function">getPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> pager<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>å¹¶ç»“åˆPageHelperå®ç°åˆ†é¡µï¼ŒPageHelperåˆ†é¡µçš„å®ç°åŸç†å°±æ˜¯ï¼Œé€šè¿‡PageHelperå†…éƒ¨çš„æ‹¦æˆªå™¨åœ¨æˆ‘ä»¬æ‰§è¡ŒSQLè¯­å¥ä¹‹å‰åŠ¨æ€çš„å°†SQLè¯­å¥æ‹¼æ¥äº†åˆ†é¡µçš„è¯­å¥ã€‚</p><p>é…ç½®å¥½PageHelperåï¼Œåœ¨æ¯æ¬¡æŸ¥è¯¢å‰è®¾ç½®Pageå‚æ•°å³å¯å®Œæˆåˆ†é¡µï¼š</p><pre class=" language-java"><code class="language-java">PageHelper<span class="token punctuation">.</span><span class="token function">startPage</span><span class="token punctuation">(</span>queryDTO<span class="token punctuation">.</span><span class="token function">getCurrentPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> queryDTO<span class="token punctuation">.</span><span class="token function">getPageSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>æˆ–è€…è‡ªå®šä¹‰ä¸€ä¸ªæ‹¦æˆªå™¨å®ç°mybatisçš„Interceptoræ¥å£ï¼Œä¸ç”¨æ¯æ¬¡æŸ¥è¯¢å‰éƒ½è¦è¿›è¡ŒstartPage():</strong></p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Componnent</span> <span class="token comment" spellcheck="true">// è¿˜å¯ä»¥åœ¨mybatisé…ç½®æ–‡ä»¶ä¸­é…ç½®&lt;pulgin interceptor="">&lt;/pulgin>,æˆ–è€…ç¼–å†™@Configurationé…ç½®ç±»ä¸¤ç§æ–¹å¼é…ç½®è‡ªå®šä¹‰çš„mybatisæ‹¦æˆªå™¨</span><span class="token annotation punctuation">@Intercepts</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Signature</span><span class="token punctuation">(</span>type <span class="token operator">=</span> Executor<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token string">"query"</span><span class="token punctuation">,</span> args <span class="token operator">=</span> <span class="token punctuation">{</span>MappedStatement<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> RowBounds<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> ResultHandler<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PageResultEnhancer</span> <span class="token keyword">implements</span> <span class="token class-name">Interceptor</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> Object <span class="token function">intercept</span><span class="token punctuation">(</span>Invocation invocation<span class="token punctuation">)</span> <span class="token keyword">throws</span> Throwable <span class="token punctuation">{</span>        <span class="token keyword">final</span> Object result <span class="token operator">=</span> invocation<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token keyword">instanceof</span> <span class="token class-name">Page</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">final</span> Page page <span class="token operator">=</span> <span class="token punctuation">(</span>Page<span class="token punctuation">)</span> result<span class="token punctuation">;</span>            <span class="token keyword">final</span> PageResult pageResult <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PageResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            pageResult<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>            pageResult<span class="token punctuation">.</span><span class="token function">setPageNum</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">getPageNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            pageResult<span class="token punctuation">.</span><span class="token function">setPageSize</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">getPageSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            pageResult<span class="token punctuation">.</span><span class="token function">setStartRow</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">getStartRow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            pageResult<span class="token punctuation">.</span><span class="token function">setEndRow</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">getEndRow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            pageResult<span class="token punctuation">.</span><span class="token function">setTotal</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">getTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            pageResult<span class="token punctuation">.</span><span class="token function">setPages</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">getPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            pageResult<span class="token punctuation">.</span><span class="token function">setCount</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">isCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            pageResult<span class="token punctuation">.</span><span class="token function">setCountSignal</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">getCountSignal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            pageResult<span class="token punctuation">.</span><span class="token function">setOrderBy</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">getOrderBy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            pageResult<span class="token punctuation">.</span><span class="token function">setOrderByOnly</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">isOrderByOnly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            pageResult<span class="token punctuation">.</span><span class="token function">setReasonable</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">getReasonable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            pageResult<span class="token punctuation">.</span><span class="token function">setPageSizeZero</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">getPageSizeZero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> pageResult<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * åªæ‹¦æˆªExecutor     */</span>    <span class="token keyword">public</span> Object <span class="token function">plugin</span><span class="token punctuation">(</span>Object target<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>target <span class="token keyword">instanceof</span> <span class="token class-name">Executor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// wrap():æ ¹æ®å½“å‰çš„Interceptorä¸Šé¢çš„æ³¨è§£å®šä¹‰å“ªäº›æ¥å£éœ€è¦æ‹¦æˆªï¼Œç„¶ååˆ¤æ–­å½“å‰ç›®æ ‡å¯¹è±¡æ˜¯å¦æœ‰å®ç°å¯¹åº”éœ€è¦æ‹¦æˆªçš„æ¥å£ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿”å›ç›®æ ‡å¯¹è±¡æœ¬èº«ï¼Œå¦‚æœæœ‰åˆ™è¿”å›ä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚</span>            <span class="token keyword">return</span> Plugin<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> target<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token comment" spellcheck="true">// Configurationåˆå§‹åŒ–å½“å‰çš„Interceptoræ—¶æ‰§è¡Œ</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setProperties</span><span class="token punctuation">(</span>Properties properties<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>@Interceptsæ ‡è®°äº†è¿™æ˜¯ä¸€ä¸ªInterceptorï¼Œç„¶ååœ¨@Interceptsä¸­å®šä¹‰äº†ä¸€ä¸ª@Signatureï¼Œå³ä¸€ä¸ªæ‹¦æˆªç‚¹ã€‚@Signatureå®šä¹‰äº†è¯¥Interceptorå°†æ‹¦æˆªExecutoræ¥å£ä¸­å‚æ•°ç±»å‹ä¸ºMappedStatementã€Objectã€RowBoundså’ŒResultHandlerçš„queryæ–¹æ³•ï¼›<br><img src="/2020/11/28/note/1.png" alt></p></blockquote><h2 id="åæ€"><a href="#åæ€" class="headerlink" title="åæ€"></a>åæ€</h2><ul><li>ä¸è¦æƒ³å½“ç„¶ï¼Œå‡­ä¸»è§‚åˆ¤æ–­åˆ«äººå†™çš„æ–¹æ³•ï¼Œè°ƒç”¨åˆ«äººçš„æ–¹æ³•çš„æ—¶å€™ç‚¹è¿›å»çœ‹ä¸€çœ‹æ˜¯å¦æ»¡è¶³è‡ªå·±çš„éœ€æ±‚ã€‚</li><li>ä»”ç»†æ£€æŸ¥ï¼ï¼ï¼ åšäº‹æƒ…è¦æœ‰ç†æœ‰æ®ï¼Œä¸è¦é©¬è™ï¼ï¼ï¼</li><li>ä¸è¦è¿‡åˆ†åœ°å‚ç…§åŸæ¥çš„ä»£ç ï¼Œå®ƒæœ‰å¯èƒ½ä¹Ÿä¸è§„èŒƒï¼</li><li>å­—æ®µçš„æ„ä¹‰ï¼Ÿå†…éƒ¨ä¸šåŠ¡é€»è¾‘ï¼Ÿå¤šé—®å†™è¯¥ä»£ç çš„åŒäº‹ï¼</li><li>å¯¹è±¡è°ƒç”¨æ–¹æ³•å‰ï¼Œè®°å¾—è€ƒè™‘ä¸€ä¸‹æ˜¯å¦ä¸ºç©ºï¼</li><li>if-elseè¯­å¥ä¸­æœ‰é‡å¤çš„è¯­å¥ï¼Œæå–å‡ºæ¥æ”¾ç½®if-elseä¹‹å¤–ï¼</li><li>ç†Ÿæ‚‰ä¸€å—ä¸šåŠ¡åŠŸèƒ½ä¸èƒ½åªçœ‹ä»£ç ï¼Œåº”è¯¥è¿˜è¦å»ç†Ÿæ‚‰æµç¨‹ï¼Œæ•°æ®åº“ã€‚</li><li>æ°¸è¿œä¸è¦ç›¸ä¿¡å‰ç«¯ä¼ è¿‡æ¥çš„å‚æ•°æ˜¯å¯é ï¼Œå¤„äºå®‰å…¨è€ƒè™‘ï¼Œåç«¯å¿…é¡»è¿›è¡Œå¿…è¦çš„å‚æ•°æ ¡éªŒã€‚</li></ul><h2 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h2><ul><li><p>pushä»£ç æ—¶ç¡®ä¿pushåˆ°çš„è¿œç¨‹åˆ†æ”¯æ˜¯è‡ªå·±æ–°å»ºçš„ä¸€ä¸ªåˆ†æ”¯ï¼Œåƒä¸‡ä¸è¦pushåˆ°ä¸»åˆ†æ”¯ä¸­ï¼ï¼ï¼æœ‰çš„é¡¹ç›®å¯èƒ½æ²¡æœ‰è®¾ç½®æƒé™ï¼Œæäº¤çš„ä»£ç å°±ç›´æ¥åˆå¹¶åˆ°ä¸»åˆ†æ”¯ä¸­å‚ä¸æ„å»ºäº†ï¼Œæœ€ç»ˆå¯¼è‡´æ„å»ºå¤±è´¥ï¼</p></li><li><p>pushå¤§é‡æ”¹åŠ¨æ—¶ï¼Œå°†æ”¹åŠ¨æ‹†åˆ†pushï¼Œpushå‰æ£€æŸ¥æ”¹åŠ¨ï¼Œä»¥æœ€å°æ”¹åŠ¨ä¸ºåŸºå‡†ï¼Œèƒ½æ·»åŠ å°½é‡ä¸è¦åˆ é™¤ï¼Œä¸€èˆ¬æƒ…å†µä¸è¦åˆå¹¶å…¶ä»–ç¯å¢ƒçš„ç‰ˆæœ¬åˆ°å½“å‰ç¯å¢ƒçš„ç‰ˆæœ¬ï¼Œdubbo cacheä¸è¦å‹¾é€‰ï¼</p></li><li><p>ç¡®ä¿æœ¬åœ°ç¼–è¯‘æˆåŠŸå†æäº¤ï¼Œpomæ–‡ä»¶çš„ä¾èµ–ä¸èƒ½éšä¾¿åŠ ï¼Œä½†æ˜¯è¦å¯¼çš„åŒ…ä¸€å®šè®°å¾—å¯¼ï¼Œå¯¼ä¸è¿›æ¥çš„äºŒæ–¹æ¥å£æ˜¯åˆ«äººçš„ä»£ç è¿˜æ²¡åˆï¼ŒåŒ…è¿˜æ²¡æ„å»ºçš„åŸå› ã€‚</p></li><li><p>æäº¤å‰mergeåŒä¸€ç¯å¢ƒä¸‹çš„ç›®æ ‡åˆ†æ”¯åˆ°è‡ªå·±æœ¬åœ°çš„åˆ†æ”¯ï¼Œä¸è¦ä¸fetchæ›´æ–°è‡ªå·±è¿œç¨‹çš„åˆ†æ”¯åˆ°æœ¬åœ°åˆ†æ”¯å¼„æ··æ·†ã€‚</p></li><li><p>Git LogæŸ¥çœ‹gitæ“ä½œçš„æ—¥å¿—ã€‚</p></li><li><p>Undo Commit æ’¤é”€commitã€‚</p></li><li><p>git pullå¼ºåˆ¶è¦†ç›–ï¼š</p><p><code>git fetch origin master</code>  å…ˆæŠŠè¿œç¨‹ä»“åº“æœ€æ–°çŠ¶æ€æ‹‰åˆ°æœ¬åœ°ï¼ˆä»¥masterä¸ºä¾‹ï¼‰ï¼›</p><p><code>git reset --hard origin/master</code>  å°†æœ¬åœ°ä»“åº“é‡ç½®åˆ°è¿œç¨‹ä»“åº“æœ€æ–°çŠ¶æ€ï¼ˆæœ¬åœ°å°†è¢«è¦†ç›–ï¼‰ã€‚</p><p>æˆ–è€…å¦‚æœä½ åœ¨å…¶ä»–åˆ†æ”¯ä¸Šï¼š<code>git reset --hard origin/&lt;branch_name&gt;</code></p><p><code>git pull</code></p></li></ul><h2 id="æµ‹è¯•ä»£ç "><a href="#æµ‹è¯•ä»£ç " class="headerlink" title="æµ‹è¯•ä»£ç "></a>æµ‹è¯•ä»£ç </h2><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">class</span> <span class="token class-name">TestApplicationTests</span> <span class="token punctuation">{</span>   <span class="token annotation punctuation">@Test</span>   <span class="token keyword">void</span> <span class="token function">testListToMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      List<span class="token operator">&lt;</span>User<span class="token operator">></span> users <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      users<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"111"</span><span class="token punctuation">,</span> <span class="token string">"zhangsan1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      users<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"222"</span><span class="token punctuation">,</span> <span class="token string">"zhangsan2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      users<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"111"</span><span class="token punctuation">,</span> <span class="token string">"zhangsan3"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// é™¤å»keyé‡å¤çš„é”®å€¼å¯¹ï¼Œä¿ç•™ç¬¬ä¸€æ¬¡å‡ºç°çš„ è¿”å›æŒ‡å®šç±»å‹çš„ map</span>      Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> User<span class="token operator">></span> usersMap <span class="token operator">=</span> users<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span>User<span class="token operator">:</span><span class="token operator">:</span>getId<span class="token punctuation">,</span> Function<span class="token punctuation">.</span><span class="token function">identity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> a<span class="token punctuation">,</span> ConcurrentHashMap<span class="token operator">:</span><span class="token operator">:</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>usersMap<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>usersMap<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token annotation punctuation">@Test</span>   <span class="token keyword">void</span> <span class="token function">testOptional</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      List<span class="token operator">&lt;</span>User<span class="token operator">></span> users <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      users<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"111"</span><span class="token punctuation">,</span> <span class="token string">"zhangsan1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      users<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"222"</span><span class="token punctuation">,</span> <span class="token string">"zhangsan2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      users<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"333"</span><span class="token punctuation">,</span> <span class="token string">"zhangsan3"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      users<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// findAny()æ“ä½œï¼Œè¿”å›çš„å…ƒç´ æ˜¯ä¸ç¡®å®šçš„ï¼Œå¯¹äºåŒä¸€ä¸ªåˆ—è¡¨å¤šæ¬¡è°ƒç”¨findAny()æœ‰å¯èƒ½ä¼šè¿”å›ä¸åŒçš„å€¼ã€‚</span>      <span class="token comment" spellcheck="true">// ä½¿ç”¨findAny()æ˜¯ä¸ºäº†æ›´é«˜æ•ˆçš„æ€§èƒ½ã€‚å¦‚æœæ˜¯æ•°æ®è¾ƒå°‘ï¼Œä¸²è¡Œåœ°æƒ…å†µä¸‹ï¼Œä¸€èˆ¬ä¼šè¿”å›ç¬¬ä¸€ä¸ªç»“æœï¼Œå¦‚æœæ˜¯å¹¶è¡Œçš„æƒ…å†µï¼Œé‚£å°±ä¸èƒ½ç¡®ä¿æ˜¯ç¬¬ä¸€ä¸ª</span>      <span class="token comment" spellcheck="true">// ç”¨æ¥åˆ¤æ–­é›†åˆä¸­æ˜¯å¦æœ‰æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ,å­˜åœ¨è¿”å›trueï¼Œå¹¶ä¸”å…è®¸é›†åˆå…ƒç´ ä¸ºnullçš„æƒ…å†µ</span>      Optional<span class="token operator">&lt;</span>User<span class="token operator">></span> usersIsNull <span class="token operator">=</span> users<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>e <span class="token operator">-</span><span class="token operator">></span> e <span class="token operator">!=</span> null <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findAny</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>usersIsNull<span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// false</span>   <span class="token punctuation">}</span>   <span class="token annotation punctuation">@Test</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testStringUtils</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isNumeric</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"--------isEmpty-------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// isEmptyåˆ¤æ–­ç©ºå­—ç¬¦ä¸²æ—¶è¿”å› false</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"null->"</span> <span class="token operator">+</span> StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\"\"->"</span> <span class="token operator">+</span> StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\" \"->"</span> <span class="token operator">+</span> StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// false</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"--------isBlank-------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"null->"</span> <span class="token operator">+</span> StringUtils<span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\"\"->"</span> <span class="token operator">+</span> StringUtils<span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\" \"->"</span> <span class="token operator">+</span> StringUtils<span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>   <span class="token punctuation">}</span>   <span class="token annotation punctuation">@Test</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testAssert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">//Assert.notNull(null,"åˆ¤æ–­null");// æŠ›å‡ºå¼‚å¸¸</span>      <span class="token comment" spellcheck="true">//Assert.notNull("","åˆ¤æ–­\"\"");// ä¸ä¼šæŠ›å‡ºå¼‚å¸¸</span>      <span class="token comment" spellcheck="true">//Assert.notNull(" ","åˆ¤æ–­null\" \"");// ä¸ä¼šæŠ›å‡ºå¼‚å¸¸</span>      <span class="token comment" spellcheck="true">//Assert.notNull(new ArrayList&lt;>());// ä¸ä¼šæŠ›å‡ºå¼‚å¸¸</span>      User user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token annotation punctuation">@Test</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      Integer num <span class="token operator">=</span> Integer<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æŠ›å‡º java.lang.NumberFormatException</span>   <span class="token punctuation">}</span>   <span class="token annotation punctuation">@Test</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token comment" spellcheck="true">// ç”Ÿæˆ19ä½éšæœºæ•° ç›´æ¥ä½¿ç”¨ åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯èƒ½é‡å¤ å†™æˆå·¥å…·ç±»æ–¹æ³•å¹¶ç”¨synchronizedå…³é”®å­—ä¿®é¥°</span>      Long shortUuid <span class="token operator">=</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getLeastSignificantBits</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>shortUuid<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">// ç”Ÿæˆuuidå»æ‰-ï¼Œå¯ä¸redisçš„keyæ‹¼æ¥ ç”Ÿæˆå”¯ä¸€çš„é”®   </span>      String uuid <span class="token operator">=</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>uuid<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token annotation punctuation">@Test</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      List<span class="token operator">&lt;</span>User<span class="token operator">></span> users <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      ArrayList<span class="token operator">&lt;</span>String<span class="token operator">></span> study <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      ArrayList<span class="token operator">&lt;</span>String<span class="token operator">></span> sports <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      study<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"chinese"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      study<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"math"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      study<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"english"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      sports<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"dance"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      sports<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"basketball"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      users<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"111"</span><span class="token punctuation">,</span> <span class="token string">"zhangsan1"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Hobby</span><span class="token punctuation">(</span>study<span class="token punctuation">,</span>sports<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      users<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"222"</span><span class="token punctuation">,</span> <span class="token string">"zhangsan2"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Hobby</span><span class="token punctuation">(</span>study<span class="token punctuation">,</span>sports<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      users<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"333"</span><span class="token punctuation">,</span> <span class="token string">"zhangsan3"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Hobby</span><span class="token punctuation">(</span>study<span class="token punctuation">,</span>sports<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      List<span class="token operator">&lt;</span>String<span class="token operator">></span> ids <span class="token operator">=</span> users<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>User<span class="token operator">:</span><span class="token operator">:</span>getId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// [111, 222, 333]</span>      <span class="token comment" spellcheck="true">// flatmap å°†å¯¹è±¡ä¸­çš„å±æ€§è½¬æ¢ä¸ºæµï¼Œæ–¹ä¾¿è¿›è¡ŒäºŒæ¬¡å¤„ç†</span>      List<span class="token operator">&lt;</span>String<span class="token operator">></span> usersports <span class="token operator">=</span> users<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>user <span class="token operator">-</span><span class="token operator">></span> user<span class="token punctuation">.</span><span class="token function">getHobby</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSports</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>usersports<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// [dance, basketball, dance, basketball, dance, basketball]</span>      <span class="token comment" spellcheck="true">// groupingByåˆ†ç»„ å°è£…æˆä¸º Map&lt;æŒ‡å®šå±æ€§,List&lt;User>> æŒ‡å®šå±æ€§ç›¸åŒçš„ Useråœ¨ä¸€ä¸ªListé‡Œé¢</span>      Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>User<span class="token operator">>></span> mapById <span class="token operator">=</span> users<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">groupingBy</span><span class="token punctuation">(</span>User<span class="token operator">:</span><span class="token operator">:</span>getId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mapById<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// toMap å°è£…æˆ Map&lt;æŒ‡å®šå±æ€§,User> æŒ‡å®šå±æ€§é‡å¤æ—¶æŠ› java.lang.IllegalStateException</span>      Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> User<span class="token operator">></span> mapById2 <span class="token operator">=</span> users<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span>User<span class="token operator">:</span><span class="token operator">:</span>getId<span class="token punctuation">,</span> Function<span class="token punctuation">.</span><span class="token function">identity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mapById2<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token annotation punctuation">@Test</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSingletonList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">/**       * Arrays.asList(strArray)è¿”å›çš„æ˜¯ä¸€ä¸ªå¯å˜çš„é›†åˆï¼Œ       * ä½†æ˜¯è¿”å›å€¼æ˜¯å…¶å†…éƒ¨ç±»ï¼Œä¸å…·æœ‰addæ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡setæ–¹æ³•è¿›è¡Œå¢åŠ å€¼ï¼Œé»˜è®¤é•¿åº¦æ˜¯10       *       *       * Collections.singletonList()è¿”å›çš„æ˜¯ä¸å¯å˜çš„é›†åˆï¼Œä½†æ˜¯è¿™ä¸ªé•¿åº¦çš„é›†åˆåªæœ‰1ï¼Œå¯ä»¥å‡å°‘å†…å­˜ç©ºé—´ã€‚       * ä½†æ˜¯è¿”å›çš„å€¼ä¾ç„¶æ˜¯Collectionsçš„å†…éƒ¨å®ç°ç±»ï¼ŒåŒæ ·æ²¡æœ‰addçš„æ–¹æ³•ï¼Œè°ƒç”¨addï¼Œsetæ–¹æ³•ä¼šæŠ¥é”™       */</span>      User user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"111"</span><span class="token punctuation">,</span> <span class="token string">"zhangsan1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      List<span class="token operator">&lt;</span>User<span class="token operator">></span> oneToList1 <span class="token operator">=</span> Collections<span class="token punctuation">.</span><span class="token function">singletonList</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// oneToList1.add(new User("222","zyz"));// java.lang.UnsupportedOperationException</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>oneToList1<span class="token punctuation">)</span><span class="token punctuation">;</span>      List<span class="token operator">&lt;</span>User<span class="token operator">></span> oneToList2 <span class="token operator">=</span> Stream<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      oneToList2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"222"</span><span class="token punctuation">,</span><span class="token string">"zyz"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>oneToList2<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token annotation punctuation">@Test</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> ParseException <span class="token punctuation">{</span>      Timestamp timestamp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Timestamp</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 2020-12-10 11:03:11.976</span>      SimpleDateFormat df <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      String timestampDF <span class="token operator">=</span> df<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>timestampDF<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 2020-12-11 11:19:51</span>      Date parseDate <span class="token operator">=</span> DateUtils<span class="token punctuation">.</span><span class="token function">parseDate</span><span class="token punctuation">(</span>timestampDF<span class="token punctuation">,</span> <span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>parseDate<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// Fri Dec 11 11:20:23 CST 2020</span>   <span class="token punctuation">}</span>   <span class="token annotation punctuation">@Test</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testNumeric</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isNumeric</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isNumeric</span><span class="token punctuation">(</span><span class="token string">"12.3"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// false</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isNumeric</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// false</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isNumeric</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// false</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="ä¸šåŠ¡"><a href="#ä¸šåŠ¡" class="headerlink" title="ä¸šåŠ¡"></a>ä¸šåŠ¡</h2><ul><li><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæ·»åŠ å’Œæ›´æ–°åŠŸèƒ½å¯ä»¥å†™åœ¨ä¸€èµ·ï¼Œæ·»åŠ æ—¶å‰ç«¯ä¸ä¼ idï¼Œæ›´æ–°æ—¶å‰ç«¯ä¼ idã€‚</p></li><li><p>å¯¹å‰ç«¯ä¼ è¿‡æ¥çš„jsoné€šè¿‡@RequestBodyè½¬æ¢ä¸ºJavaBeanåè¿›è¡Œéç©ºåˆ¤æ–­</p><ul><li>ç»è¿‡@RequestyBodyå°è£…çš„javaBeanä¸€å®šä¸ä¸ºnullï¼Œåªéœ€è¿›è¡Œéç©ºåˆ¤æ–­ï¼Œæˆ–è€…å¯¹å…¶å±æ€§è¿›è¡Œéç©ºåˆ¤æ–­</li><li>ä¸€äº›å¿…é¡»ä¼ çš„æ•°æ®å¯ä½¿ç”¨æ–­è¨€åˆ¤æ–­ï¼Œæˆªæ–­æµç¨‹</li><li>ifåˆ¤æ–­ï¼Œåœ¨ä¿è¯ä¸é˜»æ–­ä¸šåŠ¡æµç¨‹ä¸‹ä½¿ç”¨</li><li>é›†åˆå…ƒç´ è¿›è¡ŒforEachéå†ä¹‹å‰ï¼Œå¿…é¡»è¿›è¡Œéç©ºåˆ¤æ–­<code>CollectionUtils.isEmpty(collection)</code></li></ul></li><li><p>ä¿®æ”¹å¯†ç çš„é€»è¾‘</p><ul><li>åœ¨æ ¹æ®åŸå¯†ç ä¿®æ”¹å¯†ç ï¼ŒéªŒè¯åŸå¯†ç ï¼ŒéªŒè¯å¯†ç æ—¶éœ€è¦å¯¹åŸå¯†ç è¿›è¡ŒåŠ å¯†å†ä¸æ•°æ®åº“ä¸­çš„å¯†ç è¿›è¡Œæ¯”è¾ƒï¼š</li></ul><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// ä¼ å…¥å‚æ•°ï¼šæ—§å¯†ç oldPasswordã€æ–°å¯†ç newPasswordã€ç”¨æˆ·id userId </span>String digestOldPassword <span class="token operator">=</span> DigestUtils<span class="token punctuation">.</span><span class="token function">md5DigestAsHex</span><span class="token punctuation">(</span>oldPassword<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>digestOldPassword<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¾“å…¥çš„åŸå¯†ç é”™è¯¯ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// å¯†ç å¼ºåº¦æ ¡éªŒ......</span><span class="token comment" spellcheck="true">// å¯¹æ–°å¯†ç è¿›è¡ŒåŠ å¯†</span>String digestNewPassword <span class="token operator">=</span> DigestUtils<span class="token punctuation">.</span><span class="token function">md5DigestAsHex</span><span class="token punctuation">(</span>newPassword<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æ›´æ–°å¯†ç åˆ°æ•°æ®åº“</span></code></pre></li></ul><h3 id="å…¥åº“ç®¡ç†"><a href="#å…¥åº“ç®¡ç†" class="headerlink" title="å…¥åº“ç®¡ç†"></a>å…¥åº“ç®¡ç†</h3><p>å…¥åº“ç”³è¯·â€”-&gt;ç¡®è®¤å…¥åº“â€”-&gt;ç”Ÿæˆå…¥åº“å•â€”-&gt;å…¥åº“</p><p><strong>å…¥åº“ç”³è¯·å•ç®¡ç†</strong>ï¼š</p><p>1ã€æ–°å»ºå…¥åº“ç”³è¯·å•ï¼š</p><p>æ·»åŠ å…¥åº“ç±»å‹ï¼ˆé‡‡è´­ã€è°ƒæ‹¨ã€é€€è´§ï¼‰ã€è´§ä¸»ï¼ˆé€‰æ‹©æˆ–æ·»åŠ è´§ä¸»ï¼‰ã€ä¾›åº”å•†ï¼ˆé€‰æ‹©æˆ–æ·»åŠ ä¾›åº”å•†ï¼‰ã€ç”³è¯·å…¥åº“æ—¥æœŸã€å¤‡æ³¨ã€æ·»åŠ å…¥åº“äº§å“  â€”&gt;æäº¤å…¥åº“ç”³è¯·</p><p>2ã€æ–°å»ºå…¥åº“ç”³è¯·ä¹‹åï¼Œç”Ÿæˆå…¥åº“ç”³è¯·å•ï¼ŒæŸ¥è¯¢å…¥åº“ç”³è¯·å•ï¼ŒçŠ¶æ€æ˜¾ç¤ºå¾…å…¥åº“</p><p>3ã€ç¡®è®¤å…¥åº“ï¼Œæ ¹æ®å…¥åº“æ•°é‡ï¼Œå…¥åº“ç”³è¯·å•æ˜¾ç¤ºå·²å…¥åº“æˆ–éƒ¨åˆ†å…¥åº“ï¼ŒåŒæ—¶ç”Ÿæˆå…¥åº“å•(æ¯æ¬¡ç¡®è®¤å…¥åº“éƒ½ä¼šç”Ÿæˆå…¥åº“å•ï¼Œåˆ†å¤šæ¬¡éƒ¨åˆ†å…¥åº“å°±ä¼šç”Ÿæˆå¤šæ¬¡å…¥åº“å•)</p><p><strong>å…¥åº“å•ç®¡ç†ï¼š</strong></p><p>ç¡®è®¤å…¥åº“åï¼Œç”Ÿæˆå…¥åº“å•ï¼Œå…¥åº“å•æ˜¾ç¤ºå·²å…¥åº“</p><h3 id="å‡ºåº“ç®¡ç†"><a href="#å‡ºåº“ç®¡ç†" class="headerlink" title="å‡ºåº“ç®¡ç†"></a>å‡ºåº“ç®¡ç†</h3><p>æ·»åŠ å‡ºåº“å•â€”-&gt;é€‰æ‹©æ‹£è´§æ–¹å¼â€”-&gt;å‡ºåº“</p><p><strong>å‡ºåº“å•ç®¡ç†ï¼š</strong></p><p>1ã€æ–°å¢å‡ºåº“å•â€”&gt;åˆ›å»ºè®¢å•ï¼Œç”Ÿæˆå‡ºåº“å•ï¼Œå¹¶ç”Ÿæˆå¾…å‡ºåº“è®¢å•ï¼Œå¾…è°ƒåº¦è®¢å•</p><p><strong>æ³¢æ¬¡ç®¡ç†ï¼š</strong></p><p><strong>å¾…å‡ºåº“è®¢å•ï¼š</strong>åˆå§‹çŠ¶æ€ä¸ºå¾…è°ƒåº¦</p><p>2ã€é€‰æ‹©æ‹£è´§æ–¹å¼ï¼š</p><ul><li><p>æ‰«å•å‡ºåº“</p></li><li><p>æŒ‰è®¢å•æ‹£è´§â€”&gt;è®¢å•çŠ¶æ€å˜ä¸ºå¾…æ‹£è´§çŠ¶æ€ï¼Œå¹¶ç”Ÿæˆæ‹£è´§ä»»åŠ¡ã€æ³¢æ¬¡</p><p><strong>å®Œæˆæ‹£è´§ï¼š</strong>è¾“å…¥æ‹£è´§ä»»åŠ¡ç¼–å·ï¼Œå‡ºåº“ä½ã€æ‹£è´§å‘˜ â€”â€“&gt;å®Œæˆæ‹£è´§ï¼Œå‡ºåº“å•ã€å¾…å‡ºåº“è®¢å•çŠ¶æ€ä¿®æ”¹ä¸ºå·²æ‹£è´§</p><p><strong>æ³¢æ¬¡åˆ—è¡¨ï¼š</strong>ç¡®è®¤å‡ºåº“ï¼Œæ³¢æ¬¡åˆ—è¡¨ã€å‡ºåº“å•ã€å¾…å‡ºåº“è®¢å•çŠ¶æ€ä¿®æ”¹ä¸ºå·²å‡ºåº“</p></li><li><p>æŒ‰æ³¢æ¬¡æ‹£è´§ï¼šè®¢å•çŠ¶æ€å˜ä¸ºå¾…æ‹£è´§çŠ¶æ€ï¼Œç”Ÿæˆæ‹£è´§ä»»åŠ¡å’Œæ³¢æ¬¡</p><p><strong>å®Œæˆæ‹£è´§</strong>â€”â€”-&gt;åœ¨<strong>æ³¢æ¬¡åˆ—è¡¨</strong>ä¸­ç¡®è®¤å‡ºåº“</p><blockquote><p>æ³¢æ¬¡ï¼šä¸»è¦æ˜¯å°†ä¸åŒçš„è®¢å•æŒ‰ç…§æŸç§æ ‡å‡†åˆå¹¶ä¸ºä¸€ä¸ªæ³¢æ¬¡ï¼ŒæŒ‡å¯¼ä¸€æ¬¡æ‹£è´§ï¼Œæ›´é€šä¿—çš„è®²ï¼Œæ³¢æ¬¡æ‹£è´§å°±æ˜¯å¯¹è®¢å•è¿›è¡Œåˆ†ç±»æ‹£è´§</p></blockquote><h3 id="è´§ä¸»ä¸è´¸æ˜“ä¼™ä¼´"><a href="#è´§ä¸»ä¸è´¸æ˜“ä¼™ä¼´" class="headerlink" title="è´§ä¸»ä¸è´¸æ˜“ä¼™ä¼´"></a>è´§ä¸»ä¸è´¸æ˜“ä¼™ä¼´</h3><p>è´§ä¸»ï¼šä»“åº“ä¸­å•†å“çš„å½’å±è€…ï¼Œå•†å“çš„å½’å±ä¿¡æ¯éœ€è¦ä¸å¯¹åº”çš„è´§ä¸»ç»‘å®šã€‚æœ¬ç³»ç»Ÿä¸­è´§ä¸»åˆ†ä¸ºåˆä½œå•†å’Œå…¥é©»å•†ã€‚<br>åˆä½œå•†:å¤§å•†æˆ–è€…åˆä½œä¼ä¸šåœ¨å¹³å°ä¸Šé”€å”®äº§å“;ï¼ˆä¸‡è¾¾ï¼‰<br>å…¥é©»å•†:ç»é”€å•†å…¥é©»é”€å”®å¹³å°ï¼Œåœ¨å¹³å°ä¸Šå¼€åº—å¹¶ä¸”é”€å”®è‡ªå·±çš„äº§å“ã€‚ä¾æ¬¡ç‚¹å‡»ç³»ç»Ÿè®¾ç½®/åŸºç¡€ä¿¡æ¯ç®¡ç†/è´§ä¸»ç®¡ç†ï¼Œå¯ä»¥æ–°å»ºè´§ä¸»ä¿¡æ¯ã€‚ï¼ˆåœ¨ä¸‡è¾¾é‡Œé¢ç§Ÿåœ°æ–¹ä¹°ä¸œè¥¿çš„å•†å®¶ï¼‰</p><p>è´¸æ˜“ä¼™ä¼´ï¼šä¸šåŠ¡è¿è¡Œæ—¶æ¶‰åŠåˆ°çš„åˆä½œä¼™ä¼´ï¼Œç³»ç»Ÿä¸­åˆ†ä¸ºä¾›åº”å•†ã€ç»é”€å•†ã€å¿«é€’å…¬å¸ä¸‰ç§ã€‚<br>ä¾›åº”å•†ï¼šä¸ºä»“åº“ä¸­çš„è´§ä¸»ä¾›åº”å•†å“çš„å•†å®¶ï¼›<br>ç»é”€å•†ï¼šæŒ‡è´Ÿè´£é”€å”®ä»“åº“ä¸­çš„è´§ä¸»å•†å“çš„å•†å®¶ï¼›<br>å¿«é€’å…¬å¸ï¼šæä¾›è¿è¾“å•†å“åˆ°æŒ‡å®šåœ°å€æˆ–å®¢æˆ·çš„å…¬å¸ã€‚ä¾æ¬¡ç‚¹å‡»ç³»ç»Ÿè®¾ç½®/åŸºç¡€ä¿¡æ¯ç®¡ç†/è´¸æ˜“ä¼™ä¼´ç®¡ç†ï¼Œå¯ä»¥æ–°å»ºè´¸æ˜“ä¼™ä¼´ä¿¡æ¯ã€‚</p></li></ul><h3 id="äº§å“ä¿¡æ¯"><a href="#äº§å“ä¿¡æ¯" class="headerlink" title="äº§å“ä¿¡æ¯"></a>äº§å“ä¿¡æ¯</h3><p>äº§å“ä¿¡æ¯æ˜¯å•†å“çš„ç»„æˆå•ä½ï¼Œäº§å“skuæ˜¯<strong>é”€å”®çš„åŸºæœ¬å•ä½</strong>ï¼ˆè§„æ ¼+è´§ä¸»ï¼‰ã€‚</p><h3 id="å•æ®å†²é”€"><a href="#å•æ®å†²é”€" class="headerlink" title="å•æ®å†²é”€"></a>å•æ®å†²é”€</h3><ul><li>1ã€<strong>é”€å”®å‡ºåº“å•å†²é”€</strong></li></ul><p>å¯¹wmsæ‰‹å·¥åˆ›å»ºçš„é”€å”®å‡ºåº“å•åšå†²é”€ï¼Œäº§ç”Ÿå¯¹åº”çš„<strong>é”€å”®é€€è´§å…¥åº“å•</strong>ï¼Œç±»å‹æ˜¯å†²é”€ã€‚</p><ul><li>2ã€<strong>é”€å”®é€€è´§å…¥åº“å•å†²é”€</strong></li></ul><p>å¯¹é”€å”®é€€è´§å…¥åº“å•åšå†²é”€ï¼Œäº§ç”Ÿå¯¹åº”çš„<strong>é”€å”®é€€è´§å‡ºåº“å•</strong>ï¼Œç±»å‹æ˜¯å†²é”€</p><ul><li>3ã€<strong>é‡‡è´­å…¥åº“å•å†²é”€</strong></li></ul><p>å¯¹é‡‡è´­å…¥åº“å•åšå†²é”€ï¼Œäº§ç”Ÿå¯¹åº”çš„<strong>é‡‡è´­é€€è´§å‡ºåº“å•</strong>ï¼Œç±»å‹æ˜¯å†²é”€</p><ul><li>4ã€<strong>é‡‡è´­é€€è´§å‡ºåº“å•å†²é”€</strong></li></ul><p>å¯¹é‡‡è´­é€€è´§å‡ºåº“å•åšå†²é”€ï¼Œäº§ç”Ÿå¯¹åº”çš„<strong>é‡‡è´­é€€è´§å…¥åº“å•</strong>ï¼Œç±»å‹æ˜¯å†²é”€</p><ul><li>5ã€<strong>å…¶ä»–å…¥åº“å•å†²é”€</strong></li></ul><p>å¯¹å…¶ä»–å…¥åº“å•åšå†²é”€ï¼Œäº§ç”Ÿå¯¹åº”çš„<strong>å…¶ä»–å‡ºåº“å•</strong>ï¼Œç±»å‹æ˜¯å†²é”€</p><ul><li>6ã€<strong>å…¶ä»–å‡ºåº“å•å†²é”€</strong></li></ul><p>å¯¹å…¶ä»–å‡ºåº“å•åšå†²é”€ï¼Œäº§ç”Ÿå¯¹åº”çš„<strong>å…¶ä»–å…¥åº“å•</strong>ï¼Œç±»å‹æ˜¯å†²é”€</p><p>wmsæ¥å£ï¼š</p><ul><li>å†²é”€å•æ®å®¡æ ¸<ul><li>å†²é”€å•åˆ—è¡¨ï¼šæ ¹æ®è¾“å…¥æ¡ä»¶è¿›è¡Œåˆ†é¡µæŸ¥è¯¢</li><li>æ‰¹é‡å®¡æ ¸</li><li>å®¡æ ¸</li><li>è¯¦æƒ…</li></ul></li></ul><p>æšä¸¾ç±»ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">enum</span> ChargeOffStateEnum <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * å®¡æ ¸ä¸­     */</span>    <span class="token function">WAIT_AUTID</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"å®¡æ ¸ä¸­"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">/**     * å·²å®¡æ ¸     */</span>    <span class="token function">CANCEL</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"å·²å–æ¶ˆ"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">/**     * å·²å–æ¶ˆ     */</span>    <span class="token function">COMPLETE</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"å·²å®Œæˆ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">ChargeOffStateEnum</span><span class="token punctuation">(</span>Byte value<span class="token punctuation">,</span> String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> Byte value<span class="token punctuation">;</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">public</span> Byte <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> value<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> ChargeOffStateEnum <span class="token function">getChargeOffStateEnum</span><span class="token punctuation">(</span>Byte value<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> null<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        ChargeOffStateEnum<span class="token punctuation">[</span><span class="token punctuation">]</span> stateEnums <span class="token operator">=</span> ChargeOffStateEnum<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>ChargeOffStateEnum stateEnum <span class="token operator">:</span> stateEnums<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>stateEnum<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">return</span> stateEnum<span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> null<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>ç½‘å…³å±‚serviceæ›´æ”¹å†²é”€å•çŠ¶æ€ï¼Œå¾®æœåŠ¡å±‚blæ ¡éªŒæ˜¯å¦ä¿®æ”¹æˆåŠŸï¼Œç„¶åå†è¿›è¡Œåç»­æ“ä½œ</p><h3 id="å¼‚å¸¸å•æ®ç›‘æ§"><a href="#å¼‚å¸¸å•æ®ç›‘æ§" class="headerlink" title="å¼‚å¸¸å•æ®ç›‘æ§"></a>å¼‚å¸¸å•æ®ç›‘æ§</h3><p>è°ƒæ‹¨å•ã€å†…é…å•ä¼šå‡ºç°ä¸€æ–¹å·²ç»å¤„ç†ï¼Œä½†å¦ä¸€æ–¹è¿Ÿè¿Ÿä¸å®Œæˆï¼Œæˆ–æ— æ³•å®Œæˆçš„æƒ…å†µï¼Œåœ¨ç³»ç»Ÿä¸­ä¼šç§¯ç´¯å¾ˆå¤šé—®é¢˜å•æ®ï¼Œ<strong>äº§ç”Ÿä¸å—ç›‘æ§çš„åœ¨é€”åº“å­˜</strong>ï¼Œéœ€è¦æä¾›ä¸€ä¸ªåŠŸèƒ½æ¥å¤„ç†è¿™ç§å¼‚å¸¸å•æ®ã€‚</p><blockquote><p>è°ƒæ‹¨å• OrderType</p></blockquote><p>å¼‚å¸¸æ¡ä»¶ï¼š</p><p>è°ƒæ‹¨å‡ºåº“å•å·²å‡ºåº“æœªå®Œæˆè¶…è¿‡å‚æ•°è®¾ç½®çš„å¤©æ•°ï¼Œæˆ–è€…è°ƒæ‹¨å‡ºåº“å•å·²å®Œæˆä½†å¯¹åº”çš„è°ƒæ‹¨å…¥åº“å•æœªå®Œæˆï¼Œå¹¶ä¸”è¶…è¿‡å‚æ•°è®¾ç½®çš„å¤©æ•°</p><p>å¼‚å¸¸è®¤å®šï¼šè°ƒå‡ºä»“ã€è°ƒå…¥ä»“ã€å¸æœºï¼›åŸå› </p><p>å¤„ç†æ–¹å¼ï¼š</p><p>1ã€é€€å›å‡ºåº“æ–¹ï¼šå–æ¶ˆè°ƒæ‹¨å•ï¼Œåº“å­˜è¿”å›å‡ºåº“ä»“</p><p>2ã€å…¥åº“æ–¹å…¥åº“ï¼šå®Œæˆè°ƒæ‹¨å‡ºåº“å•å’Œè°ƒæ‹¨å…¥åº“å•</p><p>3ã€å…¶ä»–å‡ºåº“ï¼šå‡ºåº“æ–¹å–æ¶ˆè°ƒæ‹¨å‡ºåº“ï¼Œè½¬ä¸ºå…¶ä»–å‡ºåº“</p><p>4ã€ç ´æŸå‡ºåº“ï¼šå–æ¶ˆè°ƒæ‹¨å‡ºåº“ï¼Œè½¬ä¸ºç ´æŸå‡ºåº“</p><blockquote><p>å†…é…å•ï¼ˆAllotType==8||9ï¼‰</p></blockquote><p>å¼‚å¸¸æ¡ä»¶ï¼š</p><p>å†…é…å•å·²å‡ºåº“æœªå®Œæˆï¼Œå¹¶ä¸”è¶…è¿‡å‚æ•°è®¾ç½®çš„å¤©æ•°ï¼ˆå¯ä¸è°ƒæ‹¨å•å…±ç”¨ä¸€ä¸ªå‚æ•°ï¼‰</p><p>å¼‚å¸¸è®¤å®šï¼šè°ƒå‡ºä»“ã€è°ƒå…¥ä»“ã€å¸æœºï¼›åŸå› </p><p>å¤„ç†æ–¹å¼ï¼š</p><p>1ã€é€€å›å‘å‡ºæ–¹ï¼šå–æ¶ˆå†…é…å•ï¼Œåº“å­˜è¿”å›å‡ºåº“ä»“</p><p>2ã€æ”¶å…¥æ–¹å…¥åº“ï¼šå®Œæˆå†…é…å•ï¼Œåº“å­˜åŠ åˆ°å…¥åº“ä»“</p><p>3ã€å…¶ä»–å‡ºåº“ï¼šå–æ¶ˆå†…é…å•ï¼Œè½¬ä¸ºå…¶ä»–å‡ºåº“</p><p>4ã€ç ´æŸå‡ºåº“ï¼šå–æ¶ˆå†…é…å•ï¼Œè½¬ä¸ºç ´æŸå‡ºåº“</p><blockquote><p> é”€å”®è®¢å•ï¼ˆé”€å”®è®¢å•ï¼šorderType==0 ä»…é’ˆå¯¹ä¹…æ‰¹è®¢å•ï¼šBusinessType==1||2ï¼‰</p></blockquote><p>å¼‚å¸¸æ¡ä»¶ï¼š</p><p>é”€å”®è®¢å•å·²å‡ºåº“æœªå®Œæˆï¼Œå¹¶ä¸”è¶…è¿‡å‚æ•°è®¾ç½®çš„å¤©æ•°ï¼ˆåŒ…å«ä»“åº“é…é€ã€ç¬¬ä¸‰æ–¹å¿«é€’ï¼‰</p><p>å¼‚å¸¸è®¤å®šï¼šä»“åº“ã€å¸æœºã€å®¢æˆ·</p><p>å¤„ç†æ–¹å¼ï¼š</p><p>1ã€å…¶ä»–å‡ºåº“ï¼šå–æ¶ˆé”€å”®è®¢å•ï¼Œè½¬ä¸ºå…¶ä»–å‡ºåº“</p><p>2ã€ç ´æŸå‡ºåº“ï¼šå–æ¶ˆé”€å”®è®¢å•ï¼Œè½¬ä¸ºç ´æŸå‡ºåº“</p><h2 id="bugå¤„ç†"><a href="#bugå¤„ç†" class="headerlink" title="bugå¤„ç†"></a>bugå¤„ç†</h2><p><img src="/2020/11/28/note/image-20201127180423777.png" alt></p><p><img src="/2020/11/28/note/image-20201127181032477.png" alt></p><p><img src="/2020/11/28/note/image-20201127181317227.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> å®ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å®ä¹ ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Shiroä¸­çš„æƒé™ç®¡ç†</title>
      <link href="2020/11/07/shiro/"/>
      <url>2020/11/07/shiro/</url>
      
        <content type="html"><![CDATA[<h2 id="æƒé™ç®¡ç†"><a href="#æƒé™ç®¡ç†" class="headerlink" title="æƒé™ç®¡ç†"></a>æƒé™ç®¡ç†</h2><p>æƒé™çš„ç®¡ç†åŒ…å«<strong>èº«ä»½è®¤è¯</strong>å’Œ<strong>æˆæƒ</strong>ä¸¤éƒ¨åˆ†ï¼Œå¯¹äºéœ€è¦è®¿é—®æ§åˆ¶èµ„æºçš„ç”¨æˆ·éœ€è¦å…ˆé€šè¿‡èº«ä»½è®¤è¯ï¼Œè®¤è¯é€šè¿‡çš„ç”¨æˆ·å¹¶ä¸”å…·æœ‰è¯¥èµ„æºçš„è®¿é—®æƒé™æ–¹å¯è®¿é—®ã€‚</p><h2 id="Shiro"><a href="#Shiro" class="headerlink" title="Shiro"></a>Shiro</h2><p>Shiroæ˜¯apacheæ——ä¸‹ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œå®ƒå°†è½¯ä»¶ç³»ç»Ÿçš„å®‰å…¨è®¤è¯ç›¸å…³çš„åŠŸèƒ½æŠ½å–å‡ºæ¥ï¼Œå®ç°ç”¨æˆ·èº«ä»½è®¤è¯ï¼Œæƒé™æˆæƒã€åŠ å¯†ã€ä¼šè¯ç®¡ç†ç­‰åŠŸèƒ½ï¼Œç»„æˆäº†ä¸€ä¸ªé€šç”¨çš„å®‰å…¨è®¤è¯æ¡†æ¶ã€‚</p><h2 id="Shiroæ ¸å¿ƒæ¶æ„"><a href="#Shiroæ ¸å¿ƒæ¶æ„" class="headerlink" title="Shiroæ ¸å¿ƒæ¶æ„"></a>Shiroæ ¸å¿ƒæ¶æ„</h2><p><img src="/2020/11/07/shiro/1.png" alt></p><blockquote><p>Subject</p></blockquote><p><code>Subjectå³ä¸»ä½“</code>ï¼Œå¤–éƒ¨åº”ç”¨ä¸subjectè¿›è¡Œäº¤äº’ï¼Œsubjectè®°å½•äº†å½“å‰æ“ä½œç”¨æˆ·ï¼Œå°†ç”¨æˆ·çš„æ¦‚å¿µç†è§£ä¸ºå½“å‰æ“ä½œçš„ä¸»ä½“ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªé€šè¿‡æµè§ˆå™¨è¯·æ±‚çš„ç”¨æˆ·ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªè¿è¡Œçš„ç¨‹åºã€‚Subjectåœ¨shiroä¸­æ˜¯ä¸€ä¸ªæ¥å£ï¼Œæ¥å£ä¸­å®šä¹‰äº†å¾ˆå¤šè®¤è¯æˆæƒç›¸å…³çš„æ–¹æ³•ï¼Œå¤–éƒ¨ç¨‹åºé€šè¿‡subjectè¿›è¡Œè®¤è¯æˆæƒï¼Œè€Œsubjectæ˜¯é€šè¿‡SecurityManagerå®‰å…¨ç®¡ç†å™¨è¿›è¡Œè®¤è¯æˆæƒã€‚</p><blockquote><p>SecurityManager</p></blockquote><p><code>SecurityManagerå³å®‰å…¨ç®¡ç†å™¨</code>ï¼Œå¯¹å…¨éƒ¨çš„subjectè¿›è¡Œå®‰å…¨ç®¡ç†ï¼Œå®ƒæ˜¯shiroçš„æ ¸å¿ƒï¼Œè´Ÿè´£å¯¹æ‰€æœ‰çš„subjectè¿›è¡Œå®‰å…¨ç®¡ç†ã€‚é€šè¿‡SecurityManagerå¯ä»¥å®Œæˆsubjectçš„è®¤è¯ã€æˆæƒç­‰ï¼Œå®è´¨ä¸ŠSecurityManageræ˜¯é€šè¿‡Authenticatorè¿›è¡Œè®¤è¯ï¼Œé€šè¿‡Authorizerè¿›è¡Œæˆæƒï¼Œé€šè¿‡SessionManagerè¿›è¡Œä¼šè¯ç®¡ç†ç­‰ã€‚</p><p><code>SecurityManageræ˜¯ä¸€ä¸ªæ¥å£ï¼Œç»§æ‰¿äº†Authenticator, Authorizer, SessionManagerè¿™ä¸‰ä¸ªæ¥å£ã€‚</code></p><blockquote><p>Authenticator</p></blockquote><p><code>Authenticatorå³è®¤è¯å™¨</code>ï¼Œå¯¹ç”¨æˆ·èº«ä»½è¿›è¡Œè®¤è¯ï¼ŒAuthenticatoræ˜¯ä¸€ä¸ªæ¥å£ï¼Œshiroæä¾›ModularRealmAuthenticatorå®ç°ç±»ï¼Œé€šè¿‡ModularRealmAuthenticatoråŸºæœ¬ä¸Šå¯ä»¥æ»¡è¶³å¤§å¤šæ•°éœ€æ±‚ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰è®¤è¯å™¨ã€‚</p><blockquote><p>Authorizer</p></blockquote><p><code>Authorizerå³æˆæƒå™¨</code>ï¼Œç”¨æˆ·é€šè¿‡è®¤è¯å™¨è®¤è¯é€šè¿‡ï¼Œåœ¨è®¿é—®åŠŸèƒ½æ—¶éœ€è¦é€šè¿‡æˆæƒå™¨åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰æ­¤åŠŸèƒ½çš„æ“ä½œæƒé™ã€‚</p><blockquote><p>Realm</p></blockquote><p><code>Realmå³é¢†åŸŸ</code>ï¼Œç›¸å½“äºdatasourceæ•°æ®æºï¼ŒsecurityManagerè¿›è¡Œå®‰å…¨è®¤è¯éœ€è¦é€šè¿‡Realmè·å–ç”¨æˆ·æƒé™æ•°æ®ï¼Œæ¯”å¦‚ï¼šå¦‚æœç”¨æˆ·èº«ä»½æ•°æ®åœ¨æ•°æ®åº“é‚£ä¹ˆrealmå°±éœ€è¦ä»æ•°æ®åº“è·å–ç”¨æˆ·èº«ä»½ä¿¡æ¯ã€‚</p><ul><li>æ³¨æ„ï¼šä¸è¦æŠŠrealmç†è§£æˆåªæ˜¯ä»æ•°æ®æºå–æ•°æ®ï¼Œåœ¨realmä¸­è¿˜æœ‰è®¤è¯æˆæƒæ ¡éªŒçš„ç›¸å…³çš„ä»£ç ã€‚</li></ul><blockquote><p>SessionManager</p></blockquote><p><code>sessionManagerå³ä¼šè¯ç®¡ç†</code>ï¼Œshiroæ¡†æ¶å®šä¹‰äº†ä¸€å¥—ä¼šè¯ç®¡ç†ï¼Œå®ƒä¸ä¾èµ–webå®¹å™¨çš„sessionï¼Œæ‰€ä»¥shiroå¯ä»¥ä½¿ç”¨åœ¨éwebåº”ç”¨ä¸Šï¼Œä¹Ÿå¯ä»¥å°†åˆ†å¸ƒå¼åº”ç”¨çš„ä¼šè¯é›†ä¸­åœ¨ä¸€ç‚¹ç®¡ç†ï¼Œæ­¤ç‰¹æ€§å¯ä½¿å®ƒå®ç°å•ç‚¹ç™»å½•ã€‚</p><blockquote><p>SessionDAO</p></blockquote><p><code>SessionDAOå³ä¼šè¯dao</code>ï¼Œæ˜¯å¯¹sessionä¼šè¯æ“ä½œçš„ä¸€å¥—æ¥å£ï¼Œæ¯”å¦‚è¦å°†sessionå­˜å‚¨åˆ°æ•°æ®åº“ï¼Œå¯ä»¥é€šè¿‡jdbcå°†ä¼šè¯å­˜å‚¨åˆ°æ•°æ®åº“ã€‚</p><blockquote><p>CacheManager</p></blockquote><p><code>CacheManagerå³ç¼“å­˜ç®¡ç†</code>ï¼Œå°†ç”¨æˆ·æƒé™æ•°æ®å­˜å‚¨åœ¨ç¼“å­˜ï¼Œè¿™æ ·å¯ä»¥æé«˜æ€§èƒ½ã€‚</p><blockquote><p>Cryptography</p></blockquote><p><code>Cryptographyå³å¯†ç ç®¡ç†</code>ï¼Œshiroæä¾›äº†ä¸€å¥—åŠ å¯†/è§£å¯†çš„ç»„ä»¶ï¼Œæ–¹ä¾¿å¼€å‘ã€‚æ¯”å¦‚æä¾›å¸¸ç”¨çš„æ•£åˆ—ã€åŠ /è§£å¯†ç­‰åŠŸèƒ½ã€‚</p><h2 id="Shiroä¸­çš„è®¤è¯"><a href="#Shiroä¸­çš„è®¤è¯" class="headerlink" title="Shiroä¸­çš„è®¤è¯"></a>Shiroä¸­çš„è®¤è¯</h2><p>è®¤è¯å°±æ˜¯åˆ¤æ–­ä¸€ä¸ªç”¨æˆ·æ˜¯å¦ä¸ºåˆæ³•ç”¨æˆ·çš„å¤„ç†è¿‡ç¨‹ã€‚æœ€å¸¸ç”¨çš„ç®€å•èº«ä»½è®¤è¯æ–¹å¼æ˜¯ç³»ç»Ÿé€šè¿‡æ ¸å¯¹ç”¨æˆ·è¾“å…¥çš„<strong>ç”¨æˆ·å</strong>å’Œ<strong>å£ä»¤</strong>ï¼Œçœ‹å…¶æ˜¯å¦ä¸ç³»ç»Ÿä¸­å­˜å‚¨çš„è¯¥ç”¨æˆ·çš„ç”¨æˆ·åå’Œå£ä»¤ä¸€è‡´ï¼Œæ¥åˆ¤æ–­ç”¨æˆ·èº«ä»½æ˜¯å¦æ­£ç¡®ã€‚</p><h3 id="shiroä¸­è®¤è¯çš„å…³é”®å¯¹è±¡"><a href="#shiroä¸­è®¤è¯çš„å…³é”®å¯¹è±¡" class="headerlink" title="shiroä¸­è®¤è¯çš„å…³é”®å¯¹è±¡"></a>shiroä¸­è®¤è¯çš„å…³é”®å¯¹è±¡</h3><ul><li><strong>Subjectï¼šä¸»ä½“</strong></li></ul><p>è®¿é—®ç³»ç»Ÿçš„ç”¨æˆ·ï¼Œä¸»ä½“å¯ä»¥æ˜¯ç”¨æˆ·ï¼Œç¨‹åºç­‰ã€‚</p><ul><li><strong>Princopalï¼šèº«ä»½ä¿¡æ¯</strong></li></ul><p>æ˜¯ä¸»ä½“ï¼ˆsubjectï¼‰è¿›è¡Œèº«ä»½è®¤è¯çš„æ ‡è¯†ï¼Œæ ‡è¯†å¿…é¡»å…·æœ‰<code>å”¯ä¸€æ€§</code>ï¼Œå¦‚ç”¨æˆ·åã€æ‰‹æœºå·ã€é‚®ç®±åœ°å€ç­‰ï¼Œä¸€ä¸ªä¸»ä½“å¯ä»¥æœ‰å¤šä¸ªèº«ä»½ï¼Œä½†æ˜¯å¿…é¡»æœ‰ä¸€ä¸ªä¸»èº«ä»½ï¼ˆPrimary Principalï¼‰ã€‚</p><ul><li><strong>credentialï¼šå‡­è¯ä¿¡æ¯</strong></li></ul><p>æ˜¯åªæœ‰ä¸»ä½“è‡ªå·±çŸ¥é“çš„å®‰å…¨ä¿¡æ¯ï¼Œå¦‚å¯†ç ï¼Œè¯ä¹¦ç­‰ã€‚</p><h3 id="è®¤è¯æµç¨‹"><a href="#è®¤è¯æµç¨‹" class="headerlink" title="è®¤è¯æµç¨‹"></a>è®¤è¯æµç¨‹</h3><img src="/2020/11/07/shiro/2.png" style="zoom:80%;"><blockquote><p>ç”¨æˆ·åæ ¡éªŒ   </p><p>è°ƒç”¨çš„æ˜¯ <code>SimpleAccountRealm</code> ç±»ä¸­çš„ <code>doGetAuthenticationInfo</code> æ–¹æ³•</p></blockquote><blockquote><p>å¯†ç æ ¡éªŒ</p><p>è°ƒç”¨<code>AuthenticatingRealm</code> ç±»ä¸­çš„  <code>assertCredentialsMatch</code> æ–¹æ³•</p></blockquote><img src="/2020/11/07/shiro/3.png" style="zoom: 40%;"><h2 id="Shiroä¸­çš„æˆæƒ"><a href="#Shiroä¸­çš„æˆæƒ" class="headerlink" title="Shiroä¸­çš„æˆæƒ"></a>Shiroä¸­çš„æˆæƒ</h2><p>æˆæƒï¼Œå³è®¿é—®æ§åˆ¶ï¼Œæ§åˆ¶è°èƒ½è®¿é—®å“ªäº›èµ„æºã€‚ä¸»ä½“è¿›è¡Œèº«ä»½è®¤è¯åéœ€è¦åˆ†é…æƒé™æ–¹å¯è®¿é—®ç³»ç»Ÿçš„èµ„æºï¼Œå¯¹äºæŸäº›èµ„æºæ²¡æœ‰æƒé™æ˜¯æ— æ³•è®¿é—®çš„ã€‚</p><h3 id="Shiroä¸­çš„æˆæƒçš„å…³é”®å¯¹è±¡"><a href="#Shiroä¸­çš„æˆæƒçš„å…³é”®å¯¹è±¡" class="headerlink" title="Shiroä¸­çš„æˆæƒçš„å…³é”®å¯¹è±¡"></a>Shiroä¸­çš„æˆæƒçš„å…³é”®å¯¹è±¡</h3><ul><li><strong>Subjectï¼šä¸»ä½“</strong></li></ul><p>éœ€è¦è®¿é—®ç³»ç»Ÿä¸­çš„èµ„æºçš„ç”¨æˆ·ã€ç¨‹åºã€‚</p><ul><li><strong>Resourceï¼šèµ„æº</strong></li></ul><p>å¦‚ç³»ç»Ÿèœå•ã€é¡µé¢ã€æŒ‰é’®ã€ç±»æ–¹æ³•ã€ç³»ç»Ÿå•†å“ä¿¡æ¯ç­‰ã€‚èµ„æºåŒ…æ‹¬<code>èµ„æºç±»å‹</code>å’Œ<code>èµ„æºå®ä¾‹</code>ï¼Œæ¯”å¦‚<code>å•†å“ä¿¡æ¯ä¸ºèµ„æºç±»å‹</code>ï¼Œå¦‚ç¼–å·ä¸º001çš„å•†å“ä¿¡æ¯å±äºèµ„æºå®ä¾‹ã€‚</p><ul><li><strong>Permissionï¼šæƒé™è®¸å¯</strong></li></ul><p>è§„å®šäº†ä¸»ä½“å¯¹èµ„æºçš„æ“ä½œè®¸å¯ï¼Œå¦‚ç”¨æˆ·æŸ¥è¯¢æƒé™ã€ç”¨æˆ·æ·»åŠ æƒé™ã€ä¿®æ”¹æƒé™ã€æŸä¸ªç±»æ–¹æ³•çš„è°ƒç”¨æƒé™ç­‰ã€‚</p><h3 id="æˆæƒæµç¨‹"><a href="#æˆæƒæµç¨‹" class="headerlink" title="æˆæƒæµç¨‹"></a>æˆæƒæµç¨‹</h3><p><img src="/2020/11/07/shiro/4.png" alt></p><h3 id="æˆæƒæ–¹å¼"><a href="#æˆæƒæ–¹å¼" class="headerlink" title="æˆæƒæ–¹å¼"></a>æˆæƒæ–¹å¼</h3><ul><li><p>åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶</p><ul><li><p>RABCåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRole-Based Access Controlï¼‰æ˜¯ä»¥è§’è‰²ä¸ºä¸­å¿ƒè¿›è¡Œè®¿é—®æ§åˆ¶ã€‚</p><p>  è§’è‰²å°±æ˜¯ä¸€ç»„æƒé™çš„é›†åˆï¼Œç»™ç”¨æˆ·åˆ†æˆæƒå°±æ˜¯ç»™ç”¨æˆ·åˆ†é…è§’è‰²ã€‚</p><pre class=" language-java"><code class="language-java">  <span class="token keyword">if</span><span class="token punctuation">(</span>subject<span class="token punctuation">.</span><span class="token function">hasRole</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">// è§’è‰²ä¸ºadminèƒ½è®¿é—®çš„èµ„æº</span>  <span class="token punctuation">}</span></code></pre></li></ul></li><li><p>åŸºäºèµ„æºçš„è®¿é—®æ§åˆ¶</p><ul><li><p>RABCåŸºäºèµ„æºçš„è®¿é—®æ§åˆ¶ï¼ˆResource-Base Access Controlï¼‰æ˜¯ä»¥èµ„æºä¸ºä¸­å¿ƒè¿›è¡Œè®¿é—®æ§åˆ¶</p><pre class=" language-java"><code class="language-java">  <span class="token keyword">if</span><span class="token punctuation">(</span>subject<span class="token punctuation">.</span><span class="token function">isPermission</span><span class="token punctuation">(</span><span class="token string">"user:update:001"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">// ç”¨æˆ·å…·æœ‰ä¿®æ”¹èµ„æºå®ä¾‹001çš„æƒé™</span>  <span class="token punctuation">}</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>subject<span class="token punctuation">.</span><span class="token function">isPermission</span><span class="token punctuation">(</span><span class="token string">"user:update:*"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">// ç”¨æˆ·å…·æœ‰å¯¹æ‰€æœ‰èµ„æºè¿›è¡Œä¿®æ”¹çš„æƒåŠ›</span>  <span class="token punctuation">}</span></code></pre></li><li><p>æƒé™å­—ç¬¦ä¸²ï¼š<strong>èµ„æºæ ‡è¯†ç¬¦ : æ“ä½œ : èµ„æºå®ä¾‹æ ‡è¯†ç¬¦</strong></p><p>  å¯¹èµ„æºçš„å“ªä¸ªèµ„æºå®ä¾‹å…·æœ‰ä»€ä¹ˆï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰æ“ä½œï¼Œæƒé™å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥ä½¿ç”¨ * é€šé…ç¬¦</p></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Shiro </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ElementUIæ•´åˆSpringBoot</title>
      <link href="2020/10/31/elementui/"/>
      <url>2020/10/31/elementui/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ›å»ºå‰ç«¯é¡¹ç›®"><a href="#åˆ›å»ºå‰ç«¯é¡¹ç›®" class="headerlink" title="åˆ›å»ºå‰ç«¯é¡¹ç›®"></a>åˆ›å»ºå‰ç«¯é¡¹ç›®</h2><ul><li>ä½¿ç”¨vue cliåˆ›å»ºä¸€ä¸ªåä¸ºelement_userçš„vueé¡¹ç›®</li></ul><pre class=" language-bash"><code class="language-bash">vue init webpack element_user</code></pre><ul><li>åœ¨å½“å‰é¡¹ç›®ä¸‹å®‰è£…elementui </li></ul><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> i element-ui -S</code></pre><ul><li>åœ¨é¡¹ç›®ä¸­çš„main.jsä¸­å¼•å…¥elementui</li></ul><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> ElementUI <span class="token keyword">from</span> <span class="token string">'element-ui'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token string">'element-ui/lib/theme-chalk/index.css'</span><span class="token punctuation">;</span>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>ElementUI<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ elementui</span></code></pre><blockquote><p>ElementUIçš„ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼š</p><p>ElementUIæ˜¯åŸºäºvueçš„ä¸€ä¸ªuiæ¡†æ¶ï¼Œå¹¶æä¾›äº†å¾ˆå¤šç›¸å…³ç»„ä»¶ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¿«é€Ÿæ„å»ºé¡µé¢ã€‚</p><p><strong>å±æ€§å€¼çš„è®¾ç½®</strong>ï¼š</p><ul><li>å½“å±æ€§å€¼æ˜¯å­—ç¬¦ä¸²æ—¶ï¼Œç›´æ¥ä½¿ç”¨<code>å±æ€§=&quot;å±æ€§å€¼&quot;</code>  çš„æ–¹å¼ç»™å±æ€§èµ‹å€¼</li><li>å½“å±æ€§å€¼æ˜¯è¡¨è¾¾å¼ï¼ˆä¾‹å¦‚ false,trueï¼Œæ•°å­—ç­‰ç­‰ï¼‰æ—¶ï¼Œä½¿ç”¨<code>:å±æ€§=&quot;å±æ€§å€¼&quot;</code>çš„æ–¹å¼ç»™å±æ€§èµ‹å€¼</li></ul><p><strong>äº‹ä»¶çš„ç»‘å®šï¼š</strong></p><ul><li>åœ¨ç»„ä»¶æ ‡ç­¾ä¸­æ·»åŠ <code>@äº‹ä»¶å=vueä¸­äº‹ä»¶å¤„ç†å‡½æ•°</code></li><li>åœ¨ <code>methods:{}</code>å†…ç¼–å†™å¤„ç†å‡½æ•°çš„å®ç°</li></ul><p><strong>ç»„ä»¶æ–¹æ³•çš„è°ƒç”¨ï¼š</strong></p><ul><li>ä½¿ç”¨ç»„ä»¶çš„æ–¹æ³•æ—¶ï¼Œéœ€è¦åœ¨ç»„ä»¶ä¸­åŠ å…¥<code>ref=&quot;ç»„ä»¶åˆ«å&quot;</code></li><li>åœ¨è°ƒç”¨æ–¹æ³•æ—¶ç›´æ¥ä½¿ç”¨<code>this,$refs.ç»„ä»¶åˆ«å.æ–¹æ³•å()</code></li></ul></blockquote><p><strong>vueé¡¹ç›®çš„åŸºæœ¬ç»“æ„ï¼š</strong><br><img src="/2020/10/31/elementui/1.png" alt></p><h3 id="åœ¨App-vueä¸­åˆ›å»ºå¤´éƒ¨å¯¼èˆªæ "><a href="#åœ¨App-vueä¸­åˆ›å»ºå¤´éƒ¨å¯¼èˆªæ " class="headerlink" title="åœ¨App.vueä¸­åˆ›å»ºå¤´éƒ¨å¯¼èˆªæ "></a>åœ¨App.vueä¸­åˆ›å»ºå¤´éƒ¨å¯¼èˆªæ </h3><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>template<span class="token operator">></span>  <span class="token operator">&lt;</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span>el<span class="token operator">-</span>container<span class="token operator">></span>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>header<span class="token operator">></span>        <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu <span class="token punctuation">:</span><span class="token keyword">default</span><span class="token operator">-</span>active<span class="token operator">=</span><span class="token string">"activeIndex"</span>          <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"el-menu-demo"</span> mode<span class="token operator">=</span><span class="token string">"horizontal"</span> @select<span class="token operator">=</span><span class="token string">"handleSelect"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item index<span class="token operator">=</span><span class="token string">"/"</span><span class="token operator">></span>ä¸»é¡µ<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">></span>          <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item index<span class="token operator">=</span><span class="token string">"/userlist"</span><span class="token operator">></span>ç”¨æˆ·ç®¡ç†<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">></span>          <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item index<span class="token operator">=</span><span class="token string">"/orderlist"</span><span class="token operator">></span>è®¢å•ç®¡ç†<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>header<span class="token operator">></span>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>main<span class="token operator">></span>        <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">/</span><span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>main<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>container<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  name<span class="token punctuation">:</span> <span class="token string">"App"</span><span class="token punctuation">,</span>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>      activeIndex<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>path<span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>    <span class="token function">handleSelect</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> keyPath<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>style<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></code></pre><h3 id="ç¼–å†™ä¸»é¡µçš„ç»„ä»¶Index-vue"><a href="#ç¼–å†™ä¸»é¡µçš„ç»„ä»¶Index-vue" class="headerlink" title="ç¼–å†™ä¸»é¡µçš„ç»„ä»¶Index.vue"></a>ç¼–å†™ä¸»é¡µçš„ç»„ä»¶Index.vue</h3><p>ç®€å•å®ç°ä¸€ä¸ªè½®æ’­å›¾çš„æ•ˆæœã€‚</p><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>template<span class="token operator">></span>  <span class="token operator">&lt;</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span>el<span class="token operator">-</span>carousel <span class="token punctuation">:</span>interval<span class="token operator">=</span><span class="token string">"3000"</span> type<span class="token operator">=</span><span class="token string">"card"</span> height<span class="token operator">=</span><span class="token string">"250px"</span><span class="token operator">></span>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>carousel<span class="token operator">-</span>item v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"item in imgs"</span> <span class="token punctuation">:</span>key<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span>        <span class="token operator">&lt;</span>el<span class="token operator">-</span>image style<span class="token operator">=</span><span class="token string">"width: 500px; height: 250px"</span> <span class="token punctuation">:</span>src<span class="token operator">=</span><span class="token string">"item"</span> fit<span class="token operator">=</span><span class="token string">"contain"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>image<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>carousel<span class="token operator">-</span>item<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>carousel<span class="token operator">></span>    <span class="token operator">&lt;</span>h2<span class="token operator">></span>æ¬¢è¿æ¥åˆ°xxç®¡ç†ç³»ç»Ÿï¼<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span><span class="token keyword">import</span> homeImg1 <span class="token keyword">from</span> <span class="token string">"../assets/indexImgs/1.jpg"</span><span class="token punctuation">;</span><span class="token keyword">import</span> homeImg2 <span class="token keyword">from</span> <span class="token string">"../assets/indexImgs/2.jpg"</span><span class="token punctuation">;</span><span class="token keyword">import</span> homeImg3 <span class="token keyword">from</span> <span class="token string">"../assets/indexImgs/3.jpg"</span><span class="token punctuation">;</span><span class="token keyword">import</span> homeImg4 <span class="token keyword">from</span> <span class="token string">"../assets/indexImgs/4.jpg"</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  name<span class="token punctuation">:</span> <span class="token string">"Index"</span><span class="token punctuation">,</span>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>      imgs<span class="token punctuation">:</span> <span class="token punctuation">[</span>homeImg1<span class="token punctuation">,</span> homeImg2<span class="token punctuation">,</span> homeImg3<span class="token punctuation">,</span> homeImg4<span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>style<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></code></pre><h3 id="åœ¨index-jsä¸­å¼•å…¥ç»„ä»¶å’Œè®¿é—®è·¯å¾„"><a href="#åœ¨index-jsä¸­å¼•å…¥ç»„ä»¶å’Œè®¿é—®è·¯å¾„" class="headerlink" title="åœ¨index.jsä¸­å¼•å…¥ç»„ä»¶å’Œè®¿é—®è·¯å¾„"></a>åœ¨index.jsä¸­å¼•å…¥ç»„ä»¶å’Œè®¿é—®è·¯å¾„</h3><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token keyword">import</span> Router <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token keyword">import</span> Index <span class="token keyword">from</span> <span class="token string">'../components/Index'</span><span class="token keyword">import</span> UserList <span class="token keyword">from</span> <span class="token string">'../components/User/UserList'</span><span class="token keyword">import</span> OrderList <span class="token keyword">from</span> <span class="token string">'../components/Order/OrderList'</span>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Router<span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> redirect<span class="token punctuation">:</span><span class="token string">'/index'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/index'</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> Index <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/userlist'</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> UserList <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/orderlist'</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> OrderList <span class="token punctuation">}</span>  <span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h2 id="ç¼–å†™ç”¨æˆ·ç®¡ç†çš„ç»„ä»¶UserList-vue"><a href="#ç¼–å†™ç”¨æˆ·ç®¡ç†çš„ç»„ä»¶UserList-vue" class="headerlink" title="ç¼–å†™ç”¨æˆ·ç®¡ç†çš„ç»„ä»¶UserList.vue"></a>ç¼–å†™ç”¨æˆ·ç®¡ç†çš„ç»„ä»¶UserList.vue</h2><h3 id="åœ¨å½“å‰å·¥ç¨‹ä¸‹å®‰è£…axios"><a href="#åœ¨å½“å‰å·¥ç¨‹ä¸‹å®‰è£…axios" class="headerlink" title="åœ¨å½“å‰å·¥ç¨‹ä¸‹å®‰è£…axios"></a>åœ¨å½“å‰å·¥ç¨‹ä¸‹å®‰è£…axios</h3><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> axios --save-dev</code></pre><h3 id="åœ¨main-js-ä¸­å¼•å…¥axios"><a href="#åœ¨main-js-ä¸­å¼•å…¥axios" class="headerlink" title="åœ¨main.js  ä¸­å¼•å…¥axios"></a>åœ¨main.js  ä¸­å¼•å…¥axios</h3><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span><span class="token punctuation">;</span>Vue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$http<span class="token operator">=</span>axios<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ä¿®æ”¹ vueå†…éƒ¨ $httpä¸º axios</span></code></pre><h3 id="ç¼–å†™UserList-vue"><a href="#ç¼–å†™UserList-vue" class="headerlink" title="ç¼–å†™UserList.vue"></a>ç¼–å†™UserList.vue</h3><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>template<span class="token operator">></span>  <span class="token operator">&lt;</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> size<span class="token operator">=</span><span class="token string">"small"</span> @click<span class="token operator">=</span><span class="token string">"centerDialogVisible = true"</span><span class="token operator">></span>æ·»åŠ <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span>    <span class="token operator">&lt;</span>el<span class="token operator">-</span>table stripe size<span class="token operator">=</span><span class="token string">"small"</span> <span class="token punctuation">:</span>data<span class="token operator">=</span><span class="token string">"tableData"</span><span class="token operator">></span>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column type<span class="token operator">=</span><span class="token string">"index"</span> width<span class="token operator">=</span><span class="token string">"50"</span><span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column label<span class="token operator">=</span><span class="token string">"ç¼–å·"</span> width<span class="token operator">=</span><span class="token string">"100"</span><span class="token operator">></span>        <span class="token operator">&lt;</span>template slot<span class="token operator">-</span>scope<span class="token operator">=</span><span class="token string">"scope"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token string">"margin-left: 10px"</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span> scope<span class="token punctuation">.</span>row<span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column label<span class="token operator">=</span><span class="token string">"å§“å"</span> width<span class="token operator">=</span><span class="token string">"160"</span><span class="token operator">></span>        <span class="token operator">&lt;</span>template slot<span class="token operator">-</span>scope<span class="token operator">=</span><span class="token string">"scope"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>el<span class="token operator">-</span>popover trigger<span class="token operator">=</span><span class="token string">"hover"</span> placement<span class="token operator">=</span><span class="token string">"top"</span><span class="token operator">></span>            <span class="token operator">&lt;</span>p<span class="token operator">></span>å§“å<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> scope<span class="token punctuation">.</span>row<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>            <span class="token operator">&lt;</span>p<span class="token operator">></span>ä½å€<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> scope<span class="token punctuation">.</span>row<span class="token punctuation">.</span>address <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>            <span class="token operator">&lt;</span>div slot<span class="token operator">=</span><span class="token string">"reference"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"name-wrapper"</span><span class="token operator">></span>              <span class="token operator">&lt;</span>el<span class="token operator">-</span>tag size<span class="token operator">=</span><span class="token string">"medium"</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span> scope<span class="token punctuation">.</span>row<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tag<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>popover<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column prop<span class="token operator">=</span><span class="token string">"gender"</span> label<span class="token operator">=</span><span class="token string">"æ€§åˆ«"</span> width<span class="token operator">=</span><span class="token string">"100"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column prop<span class="token operator">=</span><span class="token string">"birth"</span> label<span class="token operator">=</span><span class="token string">"ç”Ÿæ—¥"</span> width<span class="token operator">=</span><span class="token string">"160"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column prop<span class="token operator">=</span><span class="token string">"address"</span> label<span class="token operator">=</span><span class="token string">"åœ°å€"</span> width<span class="token operator">=</span><span class="token string">"160"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column label<span class="token operator">=</span><span class="token string">"æ“ä½œ"</span> width<span class="token operator">=</span><span class="token string">"300"</span><span class="token operator">></span>        <span class="token operator">&lt;</span>template slot<span class="token operator">-</span>scope<span class="token operator">=</span><span class="token string">"scope"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>el<span class="token operator">-</span>button size<span class="token operator">=</span><span class="token string">"small"</span>           @click<span class="token operator">=</span><span class="token string">"handleEdit(scope.$index, scope.row)"</span><span class="token operator">></span>ç¼–è¾‘<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span>          <span class="token operator">&lt;</span>el<span class="token operator">-</span>button size<span class="token operator">=</span><span class="token string">"small"</span>  type<span class="token operator">=</span><span class="token string">"danger"</span>            @click<span class="token operator">=</span><span class="token string">"handleDelete(scope.$index, scope.row)"</span><span class="token operator">></span>åˆ é™¤<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">></span>    <span class="token operator">&lt;</span>el<span class="token operator">-</span>dialog title<span class="token operator">=</span><span class="token string">"å‘˜å·¥ä¿¡æ¯"</span> <span class="token punctuation">:</span>visible<span class="token punctuation">.</span>sync<span class="token operator">=</span><span class="token string">"centerDialogVisible"</span> width<span class="token operator">=</span><span class="token string">"40%"</span> center<span class="token operator">></span>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>form <span class="token punctuation">:</span>hide<span class="token operator">-</span>required<span class="token operator">-</span>asterisk<span class="token operator">=</span><span class="token string">"false"</span> <span class="token punctuation">:</span>rules<span class="token operator">=</span><span class="token string">"rules"</span> ref<span class="token operator">=</span><span class="token string">"userForm"</span> <span class="token punctuation">:</span>model<span class="token operator">=</span><span class="token string">"form"</span> label<span class="token operator">-</span>suffix<span class="token operator">=</span><span class="token string">":"</span><span class="token operator">></span>        <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"å§“å"</span> prop<span class="token operator">=</span><span class="token string">"name"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>el<span class="token operator">-</span>col <span class="token punctuation">:</span>span<span class="token operator">=</span><span class="token string">"11"</span><span class="token operator">></span><span class="token operator">&lt;</span>el<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"form.name"</span> size<span class="token operator">=</span><span class="token string">"small"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span>        <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"æ€§åˆ«"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>el<span class="token operator">-</span>radio<span class="token operator">-</span>group v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"form.gender"</span><span class="token operator">></span>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>radio label<span class="token operator">=</span><span class="token string">"ç”·"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>radio<span class="token operator">></span>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>radio label<span class="token operator">=</span><span class="token string">"å¥³"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>radio<span class="token operator">></span>          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>radio<span class="token operator">-</span>group<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span>        <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"ç”Ÿæ—¥"</span> prop<span class="token operator">=</span><span class="token string">"birth"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>el<span class="token operator">-</span>col <span class="token punctuation">:</span>span<span class="token operator">=</span><span class="token string">"11"</span><span class="token operator">></span>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>date<span class="token operator">-</span>picker value<span class="token operator">-</span>format<span class="token operator">=</span><span class="token string">"yyyy-MM-dd"</span> type<span class="token operator">=</span><span class="token string">"date"</span> placeholder<span class="token operator">=</span><span class="token string">"é€‰æ‹©æ—¥æœŸ"</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"form.birth"</span> style<span class="token operator">=</span><span class="token string">"width: 100%"</span> size<span class="token operator">=</span><span class="token string">"small"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>date<span class="token operator">-</span>picker<span class="token operator">></span>          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span>        <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"è¯¦ç»†åœ°å€"</span> prop<span class="token operator">=</span><span class="token string">"address"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>el<span class="token operator">-</span>input type<span class="token operator">=</span><span class="token string">"textarea"</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"form.address"</span> <span class="token punctuation">:</span>rows<span class="token operator">=</span><span class="token string">"2"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span>        <span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token string">"text-align: center; display: block"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"onSubmit"</span> size<span class="token operator">=</span><span class="token string">"small"</span><span class="token operator">></span>ä¿å­˜<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span>          <span class="token operator">&lt;</span>el<span class="token operator">-</span>button @click<span class="token operator">=</span><span class="token string">"clear"</span> size<span class="token operator">=</span><span class="token string">"small"</span><span class="token operator">></span>é‡ç½®<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dialog<span class="token operator">></span>    <span class="token operator">&lt;</span>el<span class="token operator">-</span>pagination      layout<span class="token operator">=</span><span class="token string">"prev, pager, next,jumper,total,sizes"</span>      background      style<span class="token operator">=</span><span class="token string">"margin: 10px 0px"</span>      <span class="token punctuation">:</span>total<span class="token operator">=</span><span class="token string">"total"</span>      @current<span class="token operator">-</span>change<span class="token operator">=</span><span class="token string">"findCurrentPage"</span>      @size<span class="token operator">-</span>change<span class="token operator">=</span><span class="token string">"findPageSize"</span>    <span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>pagination<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  name<span class="token punctuation">:</span> <span class="token string">"UserList"</span><span class="token punctuation">,</span>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>      search<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>      tableData<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      centerDialogVisible<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>      form<span class="token punctuation">:</span> <span class="token punctuation">{</span>        name<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        gender<span class="token punctuation">:</span> <span class="token string">"ç”·"</span><span class="token punctuation">,</span>        birth<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        address<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      total<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>      pageNo<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>      pageSize<span class="token punctuation">:</span> <span class="token number">9</span><span class="token punctuation">,</span>      rules<span class="token punctuation">:</span> <span class="token punctuation">{</span>        name<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> required<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token punctuation">:</span> <span class="token string">"è¯·è¾“å…¥å§“å"</span><span class="token punctuation">,</span> trigger<span class="token punctuation">:</span> <span class="token string">"blur"</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        birth<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> required<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token punctuation">:</span> <span class="token string">"è¯·é€‰æ‹©å‡ºç”Ÿæ—¥æœŸ"</span><span class="token punctuation">,</span> trigger<span class="token punctuation">:</span> <span class="token string">"blur"</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        address<span class="token punctuation">:</span> <span class="token punctuation">[</span>          <span class="token punctuation">{</span> required<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token punctuation">:</span> <span class="token string">"è¯·è¾“å…¥è¯¦ç»†åœ°å€"</span><span class="token punctuation">,</span> trigger<span class="token punctuation">:</span> <span class="token string">"blur"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>    <span class="token function">handleEdit</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> row<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">// console.log(index, row);</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>centerDialogVisible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>$http        <span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8989/user/select?id="</span> <span class="token operator">+</span> row<span class="token punctuation">.</span>id<span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">//console.log(res.data);</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>form <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">handleDelete</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> row<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$confirm</span><span class="token punctuation">(</span><span class="token string">"ç¡®è®¤åˆ é™¤?"</span><span class="token punctuation">,</span> <span class="token string">"æç¤º"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>        confirmButtonText<span class="token punctuation">:</span> <span class="token string">"ç¡®å®š"</span><span class="token punctuation">,</span>        cancelButtonText<span class="token punctuation">:</span> <span class="token string">"å–æ¶ˆ"</span><span class="token punctuation">,</span>        type<span class="token punctuation">:</span> <span class="token string">"warning"</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>$http            <span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8989/user/delete?id="</span> <span class="token operator">+</span> row<span class="token punctuation">.</span>id<span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>              <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>                  message<span class="token punctuation">:</span> <span class="token string">"åˆ é™¤æˆåŠŸ"</span><span class="token punctuation">,</span>                  type<span class="token punctuation">:</span> <span class="token string">"success"</span><span class="token punctuation">,</span>                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">listAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>                  message<span class="token punctuation">:</span> <span class="token string">"åˆ é™¤å¤±è´¥"</span><span class="token punctuation">,</span>                  type<span class="token punctuation">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span>                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>            type<span class="token punctuation">:</span> <span class="token string">"info"</span><span class="token punctuation">,</span>            message<span class="token punctuation">:</span> <span class="token string">"å·²å–æ¶ˆåˆ é™¤"</span><span class="token punctuation">,</span>          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">onSubmit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>userForm<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>$http            <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8989/user/save"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>              <span class="token keyword">this</span><span class="token punctuation">.</span>centerDialogVisible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>              <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>                  message<span class="token punctuation">:</span> <span class="token string">"ä¿å­˜æˆåŠŸ"</span><span class="token punctuation">,</span>                  type<span class="token punctuation">:</span> <span class="token string">"success"</span><span class="token punctuation">,</span>                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">listAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>                  message<span class="token punctuation">:</span> <span class="token string">"ä¿å­˜å¤±è´¥"</span><span class="token punctuation">,</span>                  type<span class="token punctuation">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span>                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token punctuation">}</span>              <span class="token keyword">this</span><span class="token punctuation">.</span>form <span class="token operator">=</span> <span class="token punctuation">{</span> gender<span class="token punctuation">:</span> <span class="token string">"ç”·"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>            message<span class="token punctuation">:</span> <span class="token string">"è¾“å…¥ä¿¡æ¯ä¸åˆæ³•ï¼"</span><span class="token punctuation">,</span>            type<span class="token punctuation">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span>          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//console.log(this.form);</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>form <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>id<span class="token punctuation">,</span> gender<span class="token punctuation">:</span> <span class="token string">"ç”·"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">listAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>$http        <span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>          <span class="token string">"http://localhost:8989/user/listAll?pageNo="</span> <span class="token operator">+</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>pageNo <span class="token operator">+</span>            <span class="token string">"&amp;pageSize="</span> <span class="token operator">+</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>pageSize        <span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// console.log(res);</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>tableData <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>users<span class="token punctuation">;</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>total <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>recordCount<span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">findCurrentPage</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>pageNo <span class="token operator">=</span> page<span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">listAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">findPageSize</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>pageSize <span class="token operator">=</span> size<span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">listAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">listAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre><h2 id="å®ç°åç«¯æ¥å£"><a href="#å®ç°åç«¯æ¥å£" class="headerlink" title="å®ç°åç«¯æ¥å£"></a>å®ç°åç«¯æ¥å£</h2><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@CrossOrigin</span> <span class="token comment" spellcheck="true">// è§£å†³è·¨åŸŸé—®é¢˜</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> UserService userService<span class="token punctuation">;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/listAll"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> <span class="token function">listAll</span><span class="token punctuation">(</span>Integer pageNo<span class="token punctuation">,</span> Integer pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>        HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        pageNo<span class="token operator">=</span>pageNo<span class="token operator">==</span>null<span class="token operator">?</span><span class="token number">1</span><span class="token operator">:</span>pageNo<span class="token punctuation">;</span>        pageSize<span class="token operator">=</span>pageSize<span class="token operator">==</span>null<span class="token operator">?</span><span class="token number">9</span><span class="token operator">:</span>pageSize<span class="token punctuation">;</span>        List<span class="token operator">&lt;</span>UserPO<span class="token operator">></span> users <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">listAll</span><span class="token punctuation">(</span>pageNo<span class="token punctuation">,</span> pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>        Integer recordCount <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">findTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Integer pageTotal <span class="token operator">=</span> <span class="token punctuation">(</span>recordCount <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> pageSize <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"users"</span><span class="token punctuation">,</span> users<span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"totalPage"</span><span class="token punctuation">,</span> pageTotal<span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"recordCount"</span><span class="token punctuation">,</span> recordCount<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> map<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/save"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> Result <span class="token function">insert</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> UserPO userPO<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Result result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            userService<span class="token punctuation">.</span><span class="token function">insertOrUpdate</span><span class="token punctuation">(</span>userPO<span class="token punctuation">)</span><span class="token punctuation">;</span>            result<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            result<span class="token punctuation">.</span><span class="token function">setMsg</span><span class="token punctuation">(</span><span class="token string">"ä¿å­˜æˆåŠŸ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            result<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            result<span class="token punctuation">.</span><span class="token function">setMsg</span><span class="token punctuation">(</span><span class="token string">"ä¿å­˜å¤±è´¥"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/delete"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> Result <span class="token function">delete</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Result result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            userService<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>            result<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            result<span class="token punctuation">.</span><span class="token function">setMsg</span><span class="token punctuation">(</span><span class="token string">"åˆ é™¤æˆåŠŸ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            result<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            result<span class="token punctuation">.</span><span class="token function">setMsg</span><span class="token punctuation">(</span><span class="token string">"åˆ é™¤å¤±è´¥"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/select"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> UserPO <span class="token function">select</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><p><img src="/2020/10/31/elementui/1.gif" alt></p>]]></content>
      
      
      <categories>
          
          <category> å°é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> ElementUI </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue Cliçš„ä½¿ç”¨</title>
      <link href="2020/10/30/vue_cli/"/>
      <url>2020/10/30/vue_cli/</url>
      
        <content type="html"><![CDATA[<p>vue cliæ˜¯ä¸€ä¸ªç”¨äºæ„å»ºåŸºäºvue.jsé¡¹ç›®ï¼ˆç±»ä¼¼äºjavaåç«¯åƒmavené‚£æ ·ï¼‰çš„æ„å»ºå·¥å…·ã€‚</p><h2 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h2><ul><li><p>å®‰è£…node.js</p></li><li><p>é…ç½® npmï¼ˆç±»ä¼¼äºmavenä¸­çš„ä»“åº“ï¼‰</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># åˆ‡æ¢ä¸ºæ·˜å®é•œåƒæº</span><span class="token function">npm</span> config <span class="token keyword">set</span> registry https://registry.npm.taobao.org<span class="token comment" spellcheck="true"># éªŒè¯æ˜¯å¦åˆ‡æ¢æˆåŠŸ</span><span class="token function">npm</span> config get registry<span class="token comment" spellcheck="true"># é…ç½®npmä¾èµ–ä¸‹è½½ä½ç½®</span><span class="token function">npm</span> config <span class="token keyword">set</span> cache <span class="token string">"d:\nodejs\npm_cache"</span><span class="token function">npm</span> config <span class="token keyword">set</span> prefix <span class="token string">"d:\nodejs\npm_global"</span><span class="token comment" spellcheck="true"># æŸ¥çœ‹é…ç½® </span><span class="token function">npm</span> config <span class="token function">ls</span></code></pre></li><li><p>å®‰è£… vue cli</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># å…¨å±€å®‰è£… å®‰è£…åœ¨ä¹‹å‰é…ç½®å¥½çš„D:\nodejs\npm_global\node_modulesç›®å½•ä¸‹</span><span class="token function">npm</span> <span class="token function">install</span> -g vue-cli</code></pre></li></ul><h2 id="ä½¿ç”¨vue-cliåˆ›å»ºä¸€ä¸ªvueé¡¹ç›®"><a href="#ä½¿ç”¨vue-cliåˆ›å»ºä¸€ä¸ªvueé¡¹ç›®" class="headerlink" title="ä½¿ç”¨vue cliåˆ›å»ºä¸€ä¸ªvueé¡¹ç›®"></a>ä½¿ç”¨vue cliåˆ›å»ºä¸€ä¸ªvueé¡¹ç›®</h2><p><strong>åˆ›å»ºä¸€ä¸ªé¡¹ç›®åä¸ºhelloçš„vueé¡¹ç›®</strong></p><pre class=" language-powershell"><code class="language-powershell">vue init webpack hello</code></pre><p><strong>å¯åŠ¨é¡¹ç›®</strong></p><pre class=" language-bash"><code class="language-bash"><span class="token function">cd</span> hello<span class="token function">npm</span> run dev<span class="token comment" spellcheck="true"># npm start</span></code></pre><p><strong>æœ¬åœ°è®¿é—®</strong></p><p><a href="http://localhost:8080" target="_blank" rel="noopener">http://localhost:8080</a></p><p><strong>é¡¹ç›®ç»“æ„ï¼š</strong></p><pre class=" language-markdown"><code class="language-markdown"><span class="token code keyword">    hello     ------------->é¡¹ç›®å</span><span class="token code keyword">    -build  ------------->ç”¨æ¥ä½¿ç”¨webpackæ‰“åŒ…ä½¿ç”¨buildä¾èµ–</span><span class="token code keyword">    -config ------------->ç”¨æ¥åšæ•´ä¸ªé¡¹ç›®é…ç½®ç›®å½•</span><span class="token code keyword">    -node_modules  ------>ç”¨æ¥ç®¡ç†é¡¹ç›®ä¸­ä½¿ç”¨ä¾èµ–</span><span class="token code keyword">    -src                     ------>ç”¨æ¥ä¹¦å†™vueçš„æºä»£ç [é‡ç‚¹]</span><span class="token code keyword">      -assets      ------>ç”¨æ¥å­˜æ”¾é™æ€èµ„æº [é‡ç‚¹]</span><span class="token code keyword">      -components   ------>ç”¨æ¥ä¹¦å†™Vueç»„ä»¶ [é‡ç‚¹]</span><span class="token code keyword">      -router             ------>ç”¨æ¥é…ç½®é¡¹ç›®ä¸­è·¯ç”±[é‡ç‚¹]</span><span class="token code keyword">      App.vue      ------>é¡¹ç›®ä¸­æ ¹ç»„ä»¶[é‡ç‚¹]</span><span class="token code keyword">      main.js      ------>é¡¹ç›®ä¸­ä¸»å…¥å£[é‡ç‚¹]</span><span class="token code keyword">    -static        ------>å…¶å®ƒé™æ€</span><span class="token code keyword">    -.babelrc      ------> å°†es6è¯­æ³•è½¬ä¸ºes5è¿è¡Œ</span><span class="token code keyword">    -.editorconfig ------> é¡¹ç›®ç¼–è¾‘é…ç½®</span><span class="token code keyword">    -.gitignore    ------> gitç‰ˆæœ¬æ§åˆ¶å¿½ç•¥æ–‡ä»¶</span><span class="token code keyword">    -.postcssrc.js ------> æºç ç›¸å…³js</span><span class="token code keyword">    -index.html    ------> é¡¹ç›®ä¸»é¡µ</span><span class="token code keyword">    -package.json  ------> ç±»ä¼¼ä¸pom.xml ä¾èµ–ç®¡ç†  jquery ä¸å»ºè®®æ‰‹åŠ¨ä¿®æ”¹</span><span class="token code keyword">    -package-lock.json ----> å¯¹package.jsonåŠ é”</span><span class="token code keyword">    -README.md         ----> é¡¹ç›®è¯´æ˜æ–‡ä»¶</span></code></pre><h2 id="å¼€å‘æ­¥éª¤"><a href="#å¼€å‘æ­¥éª¤" class="headerlink" title="å¼€å‘æ­¥éª¤"></a>å¼€å‘æ­¥éª¤</h2><p>1ã€ç¼–å†™å„ä¸ªç»„ä»¶ï¼šä¸»é¡µã€ç”¨æˆ·ã€å•†å“ç­‰ç­‰åŠŸèƒ½æ¨¡å—ï¼Œå¹¶å¯¼å‡º</p><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>template<span class="token operator">></span>  <span class="token operator">&lt;</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span>h1<span class="token operator">></span>ç½‘ç«™ä¸»é¡µ<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">// å¯¼å‡ºç»„ä»¶ï¼Œå‘å¤–æš´éœ²</span>  name<span class="token punctuation">:</span> <span class="token string">"Home"</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>style<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></code></pre><p>2ã€åœ¨index.jsä¸­å¼•å…¥å¹¶æ³¨å†Œç»„ä»¶</p><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token keyword">import</span> Router <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'../components/Home'</span> <span class="token comment" spellcheck="true">// å¼•å…¥ Home</span><span class="token keyword">import</span> User <span class="token keyword">from</span> <span class="token string">'../components/User'</span><span class="token keyword">import</span> Student <span class="token keyword">from</span> <span class="token string">'../components/Student'</span>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Router<span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span>path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>redirect<span class="token punctuation">:</span> <span class="token string">'/home'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// é‡å®šå‘åˆ° /home</span>    <span class="token punctuation">{</span>path<span class="token punctuation">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span>component<span class="token punctuation">:</span> Home<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true">// æ³¨å†Œ Home</span>    <span class="token punctuation">{</span>path<span class="token punctuation">:</span> <span class="token string">'/user'</span><span class="token punctuation">,</span>component<span class="token punctuation">:</span> User<span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>path<span class="token punctuation">:</span> <span class="token string">'/student'</span><span class="token punctuation">,</span>component<span class="token punctuation">:</span> Student<span class="token punctuation">}</span>  <span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>3ã€åœ¨App.vueä¸­æ·»åŠ è®¿é—®è·¯å¾„</p><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>template<span class="token operator">></span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"#/home"</span><span class="token operator">></span>ä¸»é¡µ<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>        <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"#/user"</span><span class="token operator">></span>ç”¨æˆ·ç®¡ç†<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>        <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"#/student"</span><span class="token operator">></span>å­¦ç”Ÿç®¡ç†<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>        <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">/</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  name<span class="token punctuation">:</span> <span class="token string">'App'</span> <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>style<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></code></pre><h2 id="åœ¨vue-cliä¸­ä½¿ç”¨axios"><a href="#åœ¨vue-cliä¸­ä½¿ç”¨axios" class="headerlink" title="åœ¨vue cliä¸­ä½¿ç”¨axios"></a>åœ¨vue cliä¸­ä½¿ç”¨axios</h2><ul><li><p>åœ¨å½“å‰å·¥ç¨‹ä¸‹å®‰è£…axios</p><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> axios --save-dev</code></pre></li><li><p>åœ¨main.js  ä¸­å¼•å…¥axios</p><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span><span class="token punctuation">;</span>Vue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$http<span class="token operator">=</span>axios<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ä¿®æ”¹ vueå†…éƒ¨ $httpä¸º axios</span></code></pre></li><li><p>å‘èµ·å¼‚æ­¥è¯·æ±‚</p><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>script<span class="token operator">></span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  name<span class="token punctuation">:</span> <span class="token string">"User"</span><span class="token punctuation">,</span>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span><span class="token punctuation">{</span>          users<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>      <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  method<span class="token punctuation">:</span><span class="token punctuation">{</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  components<span class="token punctuation">:</span><span class="token punctuation">{</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"http://rap2api.taobao.org/app/mock/270195/user/findAll"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res<span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>users <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>results<span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre></li><li><p>æ•°æ®æ¸²æŸ“</p><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>template<span class="token operator">></span>  <span class="token operator">&lt;</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span>h1<span class="token operator">></span>ç”¨æˆ·ç®¡ç†<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>    <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">""</span><span class="token operator">></span>æ·»åŠ ç”¨æˆ·<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>    <span class="token operator">&lt;</span>table border<span class="token operator">=</span><span class="token string">"1"</span> cellspacing<span class="token operator">=</span><span class="token string">"0"</span> width<span class="token operator">=</span><span class="token string">"600px"</span><span class="token operator">></span>      <span class="token operator">&lt;</span>tr<span class="token operator">></span>        <span class="token operator">&lt;</span>th<span class="token operator">></span>ç¼–å·<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span>        <span class="token operator">&lt;</span>th<span class="token operator">></span>å§“å<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span>        <span class="token operator">&lt;</span>th<span class="token operator">></span>å¹´é¾„<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span>        <span class="token operator">&lt;</span>th<span class="token operator">></span>ç”Ÿæ—¥<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span>        <span class="token operator">&lt;</span>th align<span class="token operator">=</span><span class="token string">"center"</span><span class="token operator">></span>æ“ä½œ<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span>      <span class="token operator">&lt;</span>tr v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"user in users"</span><span class="token operator">></span>        <span class="token operator">&lt;</span>td v<span class="token operator">-</span>text<span class="token operator">=</span><span class="token string">"user.id"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>        <span class="token operator">&lt;</span>td v<span class="token operator">-</span>text<span class="token operator">=</span><span class="token string">"user.name"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>        <span class="token operator">&lt;</span>td v<span class="token operator">-</span>text<span class="token operator">=</span><span class="token string">"user.age"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>        <span class="token operator">&lt;</span>td v<span class="token operator">-</span>text<span class="token operator">=</span><span class="token string">"user.birth"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>        <span class="token operator">&lt;</span>td align<span class="token operator">=</span><span class="token string">"center"</span><span class="token operator">></span><span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">""</span><span class="token operator">></span>ä¿®æ”¹<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>         <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">""</span><span class="token operator">></span>åˆ é™¤<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>table<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></code></pre></li></ul>  <img src="/2020/10/30/vue_cli/1.gif" style="zoom:80%;">]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RabbitMQæ•´åˆspringboot</title>
      <link href="2020/10/26/rabbitmq_02/"/>
      <url>2020/10/26/rabbitmq_02/</url>
      
        <content type="html"><![CDATA[<h2 id="å¼•å…¥ä¾èµ–"><a href="#å¼•å…¥ä¾èµ–" class="headerlink" title="å¼•å…¥ä¾èµ–"></a>å¼•å…¥ä¾èµ–</h2><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-amqp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><h2 id="ç¼–å†™è¿æ¥ä¿¡æ¯"><a href="#ç¼–å†™è¿æ¥ä¿¡æ¯" class="headerlink" title="ç¼–å†™è¿æ¥ä¿¡æ¯"></a>ç¼–å†™è¿æ¥ä¿¡æ¯</h2><pre class=" language-properties"><code class="language-properties"><span class="token attr-name">spring.rabbitmq.host</span><span class="token punctuation">=</span><span class="token attr-value">127.0.0.1</span><span class="token attr-name">spring.rabbitmq.port</span><span class="token punctuation">=</span><span class="token attr-value">5000</span><span class="token attr-name">spring.rabbitmq.virtual-host</span><span class="token punctuation">=</span><span class="token attr-value">/rabbitmq_study</span><span class="token attr-name">spring.rabbitmq.username</span><span class="token punctuation">=</span><span class="token attr-value">zyz</span><span class="token attr-name">spring.rabbitmq.password</span><span class="token punctuation">=</span><span class="token attr-value">2824199842</span></code></pre><h2 id="hellowordæ¨¡å‹"><a href="#hellowordæ¨¡å‹" class="headerlink" title="hellowordæ¨¡å‹"></a>hellowordæ¨¡å‹</h2><p><strong>ç”Ÿäº§è€…</strong></p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Autowired</span> <span class="token comment" spellcheck="true">// æ³¨å…¥RabbitTemplate</span><span class="token keyword">private</span> RabbitTemplate rabbitTemplate<span class="token punctuation">;</span><span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// hello worldæ¨¡å‹</span><span class="token keyword">void</span> <span class="token function">testHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å‘å¸ƒæ¶ˆæ¯</span>    rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">,</span><span class="token string">"hello,world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><strong>æ¶ˆè´¹è€…</strong></p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>queuesToDeclare <span class="token operator">=</span> <span class="token annotation punctuation">@Queue</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// æŒ‡å®šé˜Ÿåˆ— é»˜è®¤æŒä¹…åŒ– éç‹¬å  éè‡ªåŠ¨åˆ é™¤</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloConsumer</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@RabbitHandler</span> <span class="token comment" spellcheck="true">// å–å‡ºæ¶ˆæ¯çš„å›è°ƒæ–¹æ³•</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">receive</span><span class="token punctuation">(</span>String message<span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Messageï¼š"</span><span class="token operator">+</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="workæ¨¡å‹"><a href="#workæ¨¡å‹" class="headerlink" title="workæ¨¡å‹"></a>workæ¨¡å‹</h2><p><strong>ç”Ÿäº§è€…ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// workæ¨¡å‹</span><span class="token keyword">void</span> <span class="token function">testWork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token string">"work"</span><span class="token punctuation">,</span><span class="token string">"hello,workQueue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>æ¶ˆè´¹è€…ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WorkConsumer</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>queuesToDeclare <span class="token operator">=</span> <span class="token annotation punctuation">@Queue</span><span class="token punctuation">(</span><span class="token string">"work"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">receive1</span><span class="token punctuation">(</span>String message<span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"WorkConsumer1æ¥æ”¶æ¶ˆæ¯ï¼š"</span><span class="token operator">+</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>queuesToDeclare <span class="token operator">=</span> <span class="token annotation punctuation">@Queue</span><span class="token punctuation">(</span><span class="token string">"work"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">receive2</span><span class="token punctuation">(</span>String message<span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"WorkConsumer2æ¥æ”¶æ¶ˆæ¯ï¼š"</span><span class="token operator">+</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="Fanoutæ¨¡å‹"><a href="#Fanoutæ¨¡å‹" class="headerlink" title="Fanoutæ¨¡å‹"></a>Fanoutæ¨¡å‹</h2><p><strong>ç”Ÿäº§è€…ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// å¹¿æ’­æ¨¡å‹</span><span class="token keyword">void</span> <span class="token function">testFanout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token string">"logs"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"hello,fanout"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><strong>æ¶ˆè´¹è€…ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FanoutConsumer</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>bindings <span class="token operator">=</span> <span class="token annotation punctuation">@QueueBinding</span><span class="token punctuation">(</span>            value <span class="token operator">=</span> <span class="token annotation punctuation">@Queue</span><span class="token punctuation">,</span>            exchange <span class="token operator">=</span> <span class="token annotation punctuation">@Exchange</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"logs"</span><span class="token punctuation">,</span>type <span class="token operator">=</span> <span class="token string">"fanout"</span><span class="token punctuation">)</span>    <span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">void</span> <span class="token function">receive1</span><span class="token punctuation">(</span>String message<span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"FanoutConsumer1æ¥æ”¶æ¶ˆæ¯ï¼š"</span><span class="token operator">+</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>bindings <span class="token operator">=</span> <span class="token annotation punctuation">@QueueBinding</span><span class="token punctuation">(</span>            value <span class="token operator">=</span> <span class="token annotation punctuation">@Queue</span><span class="token punctuation">,</span>            exchange <span class="token operator">=</span> <span class="token annotation punctuation">@Exchange</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"logs"</span><span class="token punctuation">,</span>type <span class="token operator">=</span> <span class="token string">"fanout"</span><span class="token punctuation">)</span>    <span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">void</span> <span class="token function">receive2</span><span class="token punctuation">(</span>String message<span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"FanoutConsumer2æ¥æ”¶æ¶ˆæ¯ï¼š"</span><span class="token operator">+</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="Routingæ¨¡å‹"><a href="#Routingæ¨¡å‹" class="headerlink" title="Routingæ¨¡å‹"></a>Routingæ¨¡å‹</h2><p><strong>ç”Ÿäº§è€…ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// è·¯ç”±æ¨¡å‹</span><span class="token keyword">void</span> <span class="token function">testRouting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token string">"error_direct"</span><span class="token punctuation">,</span><span class="token string">"error"</span><span class="token punctuation">,</span><span class="token string">"erroræ—¥å¿—æ¶ˆæ¯"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><strong>æ¶ˆè´¹è€…</strong></p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoutingConsumer</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>bindings <span class="token operator">=</span> <span class="token punctuation">{</span>            <span class="token annotation punctuation">@QueueBinding</span><span class="token punctuation">(</span>                    value <span class="token operator">=</span> <span class="token annotation punctuation">@Queue</span><span class="token punctuation">,</span>                    exchange <span class="token operator">=</span> <span class="token annotation punctuation">@Exchange</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"error_direct"</span><span class="token punctuation">,</span>type <span class="token operator">=</span> <span class="token string">"direct"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    key <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"error"</span><span class="token punctuation">,</span><span class="token punctuation">}</span>            <span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">void</span> <span class="token function">receive</span><span class="token punctuation">(</span>String message<span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"RoutingConsumeræ¥æ”¶erroræ¶ˆæ¯ï¼š"</span><span class="token operator">+</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="Topicæ¨¡å‹"><a href="#Topicæ¨¡å‹" class="headerlink" title="Topicæ¨¡å‹"></a>Topicæ¨¡å‹</h2><p><strong>ç”Ÿäº§è€…ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// åŠ¨æ€è·¯ç”±æ¨¡å‹</span><span class="token keyword">void</span> <span class="token function">testTopic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token string">"topic"</span><span class="token punctuation">,</span><span class="token string">"user.save"</span><span class="token punctuation">,</span><span class="token string">"user.saveæ¶ˆæ¯"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><strong>æ¶ˆè´¹è€…ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TopicConsumer</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>bindings <span class="token operator">=</span> <span class="token punctuation">{</span>            <span class="token annotation punctuation">@QueueBinding</span><span class="token punctuation">(</span>                    value <span class="token operator">=</span> <span class="token annotation punctuation">@Queue</span><span class="token punctuation">,</span>                    exchange <span class="token operator">=</span> <span class="token annotation punctuation">@Exchange</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"topic"</span><span class="token punctuation">,</span>type <span class="token operator">=</span> <span class="token string">"topic"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    key <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"user.#"</span><span class="token punctuation">}</span>            <span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">void</span> <span class="token function">receive</span><span class="token punctuation">(</span>String message<span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"TopicConsumeræ¥æ”¶useræ¶ˆæ¯ï¼š"</span><span class="token operator">+</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RabbitMQ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RabbitMQ</title>
      <link href="2020/10/21/rabbitmq/"/>
      <url>2020/10/21/rabbitmq/</url>
      
        <content type="html"><![CDATA[<h2 id="MQç®€ä»‹"><a href="#MQç®€ä»‹" class="headerlink" title="MQç®€ä»‹"></a>MQç®€ä»‹</h2><p><strong>MQ</strong>ï¼ˆMessage Queueï¼‰ï¼Œåˆ«åä¸º<strong>æ¶ˆæ¯ä¸­é—´ä»¶</strong>ã€‚é€šè¿‡å…¸å‹çš„<strong>ç”Ÿäº§è€…</strong>å’Œ<strong>æ¶ˆè´¹è€…</strong>æ¨¡å‹ï¼Œç”Ÿäº§è€…å‘æ¶ˆæ¯é˜Ÿåˆ—ä¸­ä¸æ–­ç”Ÿäº§æ¶ˆæ¯ï¼Œæ¶ˆè´¹è€…ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­ä¸æ–­è·å–æ¶ˆæ¯ã€‚å› ä¸ºæ¶ˆæ¯çš„äº§ç”Ÿå’Œæ¶ˆè´¹éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œè€Œä¸”åªå…³å¿ƒæ¶ˆæ¯çš„å‘é€å’Œæ¥æ”¶ï¼Œæ²¡æœ‰ä¸šåŠ¡é€»è¾‘çš„ä¾µå…¥ï¼Œå®ç°äº†ç³»ç»Ÿä¹‹é—´çš„è§£è€¦ã€‚é€šè¿‡åˆ©ç”¨é«˜æ•ˆå¯é çš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶è¿›è¡Œå¹³å°æ— å…³çš„æ•°æ®äº¤æµï¼Œå¹¶åŸºäºæ•°æ®é€šä¿¡æ¥è¿›è¡Œåˆ†å¸ƒå¼ç³»ç»Ÿçš„é›†æˆã€‚</p><h2 id="ä¸»æµçš„æ¶ˆæ¯ä¸­é—´ä»¶"><a href="#ä¸»æµçš„æ¶ˆæ¯ä¸­é—´ä»¶" class="headerlink" title="ä¸»æµçš„æ¶ˆæ¯ä¸­é—´ä»¶"></a>ä¸»æµçš„æ¶ˆæ¯ä¸­é—´ä»¶</h2><blockquote><p>ActiveMQ</p></blockquote><p>ActiveMQ æ˜¯Apacheå‡ºå“ï¼Œæœ€æµè¡Œçš„ï¼Œèƒ½åŠ›å¼ºåŠ²çš„å¼€æºæ¶ˆæ¯æ€»çº¿ã€‚å®ƒæ˜¯ä¸€ä¸ªå®Œå…¨æ”¯æŒJMSè§„èŒƒçš„çš„æ¶ˆæ¯ä¸­é—´ä»¶ã€‚ä¸°å¯Œçš„API,å¤šç§é›†ç¾¤æ¶æ„æ¨¡å¼è®©ActiveMQåœ¨ä¸šç•Œæˆä¸ºè€ç‰Œçš„æ¶ˆæ¯ä¸­é—´ä»¶,åœ¨ä¸­å°å‹ä¼ä¸šé¢‡å—æ¬¢è¿!</p><blockquote><p>Kafka</p></blockquote><p>Kafkaæ˜¯LinkedInå¼€æºçš„åˆ†å¸ƒå¼å‘å¸ƒ-è®¢é˜…æ¶ˆæ¯ç³»ç»Ÿï¼Œç›®å‰å½’å±äºApacheé¡¶çº§é¡¹ç›®ã€‚Kafkaä¸»è¦ç‰¹ç‚¹æ˜¯åŸºäºPullçš„æ¨¡å¼æ¥å¤„ç†æ¶ˆæ¯æ¶ˆè´¹ï¼Œè¿½æ±‚é«˜ååé‡ï¼Œä¸€å¼€å§‹çš„ç›®çš„å°±æ˜¯ç”¨äºæ—¥å¿—æ”¶é›†å’Œä¼ è¾“ã€‚0.8ç‰ˆæœ¬å¼€å§‹æ”¯æŒå¤åˆ¶ï¼Œä¸æ”¯æŒäº‹åŠ¡ï¼Œå¯¹æ¶ˆæ¯çš„é‡å¤ã€ä¸¢å¤±ã€é”™è¯¯æ²¡æœ‰ä¸¥æ ¼è¦æ±‚ï¼Œé€‚åˆäº§ç”Ÿå¤§é‡æ•°æ®çš„äº’è”ç½‘æœåŠ¡çš„æ•°æ®æ”¶é›†ä¸šåŠ¡ã€‚</p><blockquote><p>RocketMQ</p></blockquote><p>RocketMQæ˜¯é˜¿é‡Œå¼€æºçš„æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œå®ƒæ˜¯çº¯Javaå¼€å‘ï¼Œå…·æœ‰é«˜ååé‡ã€é«˜å¯ç”¨æ€§ã€é€‚åˆå¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿåº”ç”¨çš„ç‰¹ç‚¹ã€‚RocketMQæ€è·¯èµ·æºäºKafkaï¼Œä½†å¹¶ä¸æ˜¯Kafkaçš„ä¸€ä¸ªCopyï¼Œå®ƒå¯¹æ¶ˆæ¯çš„å¯é ä¼ è¾“åŠäº‹åŠ¡æ€§åšäº†ä¼˜åŒ–ï¼Œç›®å‰åœ¨é˜¿é‡Œé›†å›¢è¢«å¹¿æ³›åº”ç”¨äºäº¤æ˜“ã€å……å€¼ã€æµè®¡ç®—ã€æ¶ˆæ¯æ¨é€ã€æ—¥å¿—æµå¼å¤„ç†ã€binglogåˆ†å‘ç­‰åœºæ™¯ã€‚</p><blockquote><p>RabbitMQ</p></blockquote><p>RabbitMQæ˜¯ä½¿ç”¨Erlangè¯­è¨€å¼€å‘çš„å¼€æºæ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿï¼ŒåŸºäºAMQPåè®®æ¥å®ç°ã€‚AMQPçš„ä¸»è¦ç‰¹å¾æ˜¯é¢å‘æ¶ˆæ¯ã€é˜Ÿåˆ—ã€è·¯ç”±ï¼ˆåŒ…æ‹¬ç‚¹å¯¹ç‚¹å’Œå‘å¸ƒ/è®¢é˜…ï¼‰ã€å¯é æ€§ã€å®‰å…¨ã€‚AMQPåè®®æ›´å¤šç”¨åœ¨ä¼ä¸šç³»ç»Ÿå†…å¯¹æ•°æ®ä¸€è‡´æ€§ã€ç¨³å®šæ€§å’Œå¯é æ€§è¦æ±‚å¾ˆé«˜çš„åœºæ™¯ï¼Œå¯¹æ€§èƒ½å’Œååé‡çš„è¦æ±‚è¿˜åœ¨å…¶æ¬¡ã€‚</p><blockquote><p>AMQPï¼ˆadvanced message queuing protocolï¼‰åœ¨2003å¹´æ—¶è¢«æå‡ºï¼Œæœ€æ—©ç”¨äºè§£å†³é‡‘èé¢†ä¸åŒå¹³å°ä¹‹é—´çš„æ¶ˆæ¯ä¼ é€’äº¤äº’é—®é¢˜ã€‚é¡¾åæ€ä¹‰ï¼ŒAMQPæ˜¯ä¸€ç§åè®®ï¼Œæ›´å‡†ç¡®çš„è¯´æ˜¯ä¸€ç§binary wire-level protocolï¼ˆé“¾æ¥åè®®ï¼‰ã€‚è¿™æ˜¯å…¶å’ŒJMSçš„æœ¬è´¨å·®åˆ«ï¼ŒAMQPä¸ä»APIå±‚è¿›è¡Œé™å®šï¼Œè€Œæ˜¯ç›´æ¥å®šä¹‰ç½‘ç»œäº¤æ¢çš„æ•°æ®æ ¼å¼ã€‚è¿™ä½¿å¾—å®ç°äº†AMQPçš„providerå¤©ç„¶æ€§å°±æ˜¯è·¨å¹³å°çš„ã€‚</p></blockquote><h2 id="RabbitMQçš„ä½¿ç”¨"><a href="#RabbitMQçš„ä½¿ç”¨" class="headerlink" title="RabbitMQçš„ä½¿ç”¨"></a>RabbitMQçš„ä½¿ç”¨</h2><h3 id="è®¿é—®rabbitmqçš„ç®¡ç†ç•Œé¢"><a href="#è®¿é—®rabbitmqçš„ç®¡ç†ç•Œé¢" class="headerlink" title="è®¿é—®rabbitmqçš„ç®¡ç†ç•Œé¢"></a>è®¿é—®rabbitmqçš„ç®¡ç†ç•Œé¢</h3><p>åœ°å€ä¸º  ip:15672 </p><img src="/2020/10/21/rabbitmq/1.png" style="zoom:80%;"><p>æ·»åŠ ç”¨æˆ·ï¼Œä»¥åŠè™šæ‹Ÿä¸»æœº<br><img src="/2020/10/21/rabbitmq/2.png" style="zoom:80%;"></p><p><font color="red">è¿˜éœ€è¦åœ¨å½“å‰ç™»å½•ç®¡ç†ç•Œé¢çš„ç”¨æˆ·ä¸‹æ·»åŠ æ–°å¢çš„è™šæ‹Ÿä¸»æœºåœ°å€ï¼Œå¦åˆ™ç›‘æ§ä¸åˆ°åœ¨æ–°å¢è™šæ‹Ÿä¸»æœºä¸‹çš„åˆ›å»ºçš„æ¶ˆæ¯é˜Ÿåˆ—ï¼</font><br><img src="/2020/10/21/rabbitmq/3.png" alt></p><h3 id="ä½¿ç”¨javaåˆ›å»ºæ¶ˆæ¯é˜Ÿåˆ—æ¨¡å‹"><a href="#ä½¿ç”¨javaåˆ›å»ºæ¶ˆæ¯é˜Ÿåˆ—æ¨¡å‹" class="headerlink" title="ä½¿ç”¨javaåˆ›å»ºæ¶ˆæ¯é˜Ÿåˆ—æ¨¡å‹"></a>ä½¿ç”¨javaåˆ›å»ºæ¶ˆæ¯é˜Ÿåˆ—æ¨¡å‹</h3><p>å¼•å…¥ä¾èµ–</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.rabbitmq<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>amqp-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.7.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><h4 id="ç¬¬ä¸€ç§æ¨¡å‹ï¼ˆç›´è¿ï¼‰"><a href="#ç¬¬ä¸€ç§æ¨¡å‹ï¼ˆç›´è¿ï¼‰" class="headerlink" title="ç¬¬ä¸€ç§æ¨¡å‹ï¼ˆç›´è¿ï¼‰"></a>ç¬¬ä¸€ç§æ¨¡å‹ï¼ˆç›´è¿ï¼‰</h4><p><img src="/2020/10/21/rabbitmq/4.png" alt></p><ul><li>Pï¼šç”Ÿäº§è€…ï¼Œä¹Ÿå°±æ˜¯è¦å‘é€æ¶ˆæ¯çš„ç¨‹åºã€‚</li><li>Cï¼šæ¶ˆè´¹è€…ï¼šæ¶ˆæ¯çš„æ¥æ”¶è€…ï¼Œä¼šä¸€ç›´ç­‰å¾…æ¶ˆæ¯åˆ°æ¥ã€‚</li><li>queueï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå›¾ä¸­çº¢è‰²éƒ¨åˆ†ã€‚ç±»ä¼¼ä¸€ä¸ªé‚®ç®±ï¼Œå¯ä»¥ç¼“å­˜æ¶ˆæ¯ï¼›ç”Ÿäº§è€…å‘å…¶ä¸­æŠ•é€’æ¶ˆæ¯ï¼Œæ¶ˆè´¹è€…ä»å…¶ä¸­å–å‡ºæ¶ˆæ¯ã€‚</li></ul><p><strong>ç”Ÿäº§è€…çš„å®ç°ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// ç”Ÿäº§æ¶ˆæ¯</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageProvider</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException<span class="token punctuation">,</span> TimeoutException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºè¿æ¥mqçš„è¿æ¥å·¥å‚å¯¹è±¡</span>        ConnectionFactory connectionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConnectionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è®¾ç½®è¿æ¥çš„rabbitmqä¸»æœº</span>        connectionFactory<span class="token punctuation">.</span><span class="token function">setHost</span><span class="token punctuation">(</span><span class="token string">"172.16.1.57"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        connectionFactory<span class="token punctuation">.</span><span class="token function">setPort</span><span class="token punctuation">(</span><span class="token number">6000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è®¾ç½®è¿æ¥çš„è™šæ‹Ÿä¸»æœº</span>        connectionFactory<span class="token punctuation">.</span><span class="token function">setVirtualHost</span><span class="token punctuation">(</span><span class="token string">"/rabbitmq_study"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è®¾ç½®è®¿é—®è™šæ‹Ÿä¸»æœºçš„ç”¨æˆ·åå’Œå¯†ç </span>        connectionFactory<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"zyz"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        connectionFactory<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"2824199842"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è·å–è¿æ¥å¯¹è±¡</span>        Connection connection <span class="token operator">=</span> connectionFactory<span class="token punctuation">.</span><span class="token function">newConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è·å–è¿æ¥ä¸­çš„é€šé“</span>        Channel channel <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å°†é€šé“ç»‘å®šæ¶ˆæ¯é˜Ÿåˆ—</span>        <span class="token comment" spellcheck="true">/**         * å‚æ•°1: é˜Ÿåˆ—åç§° ä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»º         * å‚æ•°2ï¼šç”¨æ¥å®šä¹‰é˜Ÿåˆ—çš„ç‰¹æ€§æ˜¯å¦è¦æŒä¹…åŒ– true or false         * å‚æ•°3ï¼šæ˜¯å¦ç‹¬å é˜Ÿåˆ—         * å‚æ•°4ï¼šæ˜¯å¦åœ¨æ¶ˆè´¹å®Œæˆåè‡ªåŠ¨åˆ é™¤é˜Ÿåˆ—         * å‚æ•°5ï¼šé™„åŠ å‚æ•°         */</span>        channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> null<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// é€šè¿‡é€šé“å‘å¸ƒæ¶ˆæ¯</span>        <span class="token comment" spellcheck="true">/**         * å‚æ•°1ï¼šäº¤æ¢æœºåç§°         * å‚æ•°2ï¼šé˜Ÿåˆ—åç§°         * å‚æ•°3ï¼šä¼ é€’æ¶ˆæ¯é¢å¤–è®¾ç½®         * å‚æ•°4ï¼šæ¶ˆæ¯çš„å…·ä½“å†…å®¹         */</span>        channel<span class="token punctuation">.</span><span class="token function">basicPublish</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">,</span> null<span class="token punctuation">,</span> <span class="token string">"hello rabbitmq"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>åœ¨ç®¡ç†ç•Œé¢æŸ¥çœ‹åˆ›å»ºçš„mq<img src="/2020/10/21/rabbitmq/5.png" alt></p><p><strong>æ¶ˆè´¹è€…çš„å®ç°ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// æ¥æ”¶æ¶ˆæ¯</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageConsumer</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException<span class="token punctuation">,</span> TimeoutException <span class="token punctuation">{</span>        ConnectionFactory connectionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConnectionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        connectionFactory<span class="token punctuation">.</span><span class="token function">setHost</span><span class="token punctuation">(</span><span class="token string">"172.16.1.57"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        connectionFactory<span class="token punctuation">.</span><span class="token function">setPort</span><span class="token punctuation">(</span><span class="token number">6000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        connectionFactory<span class="token punctuation">.</span><span class="token function">setVirtualHost</span><span class="token punctuation">(</span><span class="token string">"/rabbitmq_study"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        connectionFactory<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"zyz"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        connectionFactory<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"2824199842"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Connection connection <span class="token operator">=</span> connectionFactory<span class="token punctuation">.</span><span class="token function">newConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Channel channel <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ä¸åˆ›å»ºæ¶ˆæ¯é˜Ÿåˆ—ä¸€è‡´</span>        channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> null<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ¶ˆè´¹æ¶ˆæ¯</span>        <span class="token comment" spellcheck="true">/**         * å‚æ•°1ï¼šé˜Ÿåˆ—åç§°         * å‚æ•°2ï¼šæ˜¯å¦å¼€å¯æ¶ˆæ¯çš„è‡ªåŠ¨ç¡®è®¤æœºåˆ¶         * å‚æ•°3ï¼šæ¶ˆè´¹æ—¶çš„å›è°ƒæ¥å£         */</span>        channel<span class="token punctuation">.</span><span class="token function">basicConsume</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">DefaultConsumer</span><span class="token punctuation">(</span>channel<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleDelivery</span><span class="token punctuation">(</span>String consumerTag<span class="token punctuation">,</span> Envelope envelope<span class="token punctuation">,</span> AMQP<span class="token punctuation">.</span>BasicProperties properties<span class="token punctuation">,</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> body<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// è¾“å‡ºæ¶ˆæ¯å†…å®¹</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"body:"</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// channel.close();</span>        <span class="token comment" spellcheck="true">// connection.close();</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><img src="/2020/10/21/rabbitmq/6.png" alt></p><blockquote><p>å°è£…å·¥å…·ç±»</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RabbitMQUtils</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> ConnectionFactory connectionFactory<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è®©ConnectionFactoryåªåŠ è½½ä¸€æ¬¡</span>    <span class="token keyword">static</span> <span class="token punctuation">{</span>        connectionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConnectionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        connectionFactory<span class="token punctuation">.</span><span class="token function">setHost</span><span class="token punctuation">(</span><span class="token string">"172.16.1.57"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        connectionFactory<span class="token punctuation">.</span><span class="token function">setPort</span><span class="token punctuation">(</span><span class="token number">6000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        connectionFactory<span class="token punctuation">.</span><span class="token function">setVirtualHost</span><span class="token punctuation">(</span><span class="token string">"/rabbitmq_study"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        connectionFactory<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"zyz"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        connectionFactory<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"2824199842"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * è·å– RabbitMQçš„è¿æ¥     *     * @return     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Connection <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            Connection connection <span class="token operator">=</span> connectionFactory<span class="token punctuation">.</span><span class="token function">newConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> connection<span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> null<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * å…³é—­ Connectionå’Œ Channel     *     * @param conn     * @param channel     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span>Connection conn<span class="token punctuation">,</span> Channel channel<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>channel <span class="token operator">!=</span> null<span class="token punctuation">)</span> channel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>conn <span class="token operator">!=</span> null<span class="token punctuation">)</span> conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="ç¬¬äºŒç§æ¨¡å‹ï¼ˆwork-queueï¼‰"><a href="#ç¬¬äºŒç§æ¨¡å‹ï¼ˆwork-queueï¼‰" class="headerlink" title="ç¬¬äºŒç§æ¨¡å‹ï¼ˆwork queueï¼‰"></a>ç¬¬äºŒç§æ¨¡å‹ï¼ˆwork queueï¼‰</h4><p><code>Work queues</code>ï¼Œä¹Ÿè¢«ç§°ä¸ºï¼ˆ<code>Task queues</code>ï¼‰ï¼Œä»»åŠ¡æ¨¡å‹ã€‚å½“æ¶ˆæ¯å¤„ç†æ¯”è¾ƒè€—æ—¶çš„æ—¶å€™ï¼Œå¯èƒ½ç”Ÿäº§æ¶ˆæ¯çš„é€Ÿåº¦ä¼šè¿œè¿œå¤§äºæ¶ˆæ¯çš„æ¶ˆè´¹é€Ÿåº¦ã€‚é•¿æ­¤ä»¥å¾€ï¼Œæ¶ˆæ¯å°±ä¼šå †ç§¯è¶Šæ¥è¶Šå¤šï¼Œæ— æ³•åŠæ—¶å¤„ç†ã€‚æ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨work æ¨¡å‹ï¼š<strong>è®©å¤šä¸ªæ¶ˆè´¹è€…ç»‘å®šåˆ°ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå…±åŒæ¶ˆè´¹é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯</strong>ã€‚é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ä¸€æ—¦æ¶ˆè´¹ï¼Œå°±ä¼šæ¶ˆå¤±ï¼Œå› æ­¤ä»»åŠ¡æ˜¯ä¸ä¼šè¢«é‡å¤æ‰§è¡Œçš„ã€‚<br><img src="/2020/10/21/rabbitmq/7.png" alt></p><ul><li>Pï¼šç”Ÿäº§è€…ï¼šä»»åŠ¡çš„å‘å¸ƒè€…</li><li>C1ï¼šæ¶ˆè´¹è€…-1ï¼Œé¢†å–ä»»åŠ¡å¹¶ä¸”å®Œæˆä»»åŠ¡ï¼Œå‡è®¾å®Œæˆé€Ÿåº¦è¾ƒæ…¢</li><li>C2ï¼šæ¶ˆè´¹è€…-2ï¼šé¢†å–ä»»åŠ¡å¹¶å®Œæˆä»»åŠ¡ï¼Œå‡è®¾å®Œæˆé€Ÿåº¦å¿«</li></ul><p><strong>ç”Ÿäº§è€…</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Provider</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// è·å–è¿æ¥</span>        Connection conn <span class="token operator">=</span> RabbitMQUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºé€šé“</span>        Channel channel <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// é€šé“ç»‘å®šæ¶ˆæ¯é˜Ÿåˆ—</span>        channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span><span class="token string">"work"</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å‘å¸ƒæ¶ˆæ¯</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            channel<span class="token punctuation">.</span><span class="token function">basicPublish</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">"work"</span><span class="token punctuation">,</span> null<span class="token punctuation">,</span> <span class="token string">"work queue"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// å…³é—­èµ„æº</span>        RabbitMQUtils<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span>channel<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>æ¶ˆè´¹è€…-1</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Consumer1</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>        Connection conn <span class="token operator">=</span> RabbitMQUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Channel channel <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span><span class="token string">"work"</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">basicConsume</span><span class="token punctuation">(</span><span class="token string">"work"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">DefaultConsumer</span><span class="token punctuation">(</span>channel<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleDelivery</span><span class="token punctuation">(</span>String consumerTag<span class="token punctuation">,</span> Envelope envelope<span class="token punctuation">,</span> AMQP<span class="token punctuation">.</span>BasicProperties properties<span class="token punctuation">,</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> body<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>æ¶ˆè´¹è€…-2</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Consumer2</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>        Connection conn <span class="token operator">=</span> RabbitMQUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Channel channel <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span><span class="token string">"work"</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">basicConsume</span><span class="token punctuation">(</span><span class="token string">"work"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">DefaultConsumer</span><span class="token punctuation">(</span>channel<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleDelivery</span><span class="token punctuation">(</span>String consumerTag<span class="token punctuation">,</span> Envelope envelope<span class="token punctuation">,</span> AMQP<span class="token punctuation">.</span>BasicProperties properties<span class="token punctuation">,</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> body<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><ul><li>é»˜è®¤ä¸ºå¹³å‡åˆ†å‘ï¼Œå°†æ¶ˆæ¯å¹³å‡åˆ†é…ç»™æ¯ä¸ªæ¶ˆè´¹è€…ï¼Œè¿™ç§åˆ†å‘æ–¹å¼å«åšå¾ªç¯ã€‚</li></ul><p>é€šè¿‡å…³é—­è‡ªåŠ¨ç¡®è®¤å’Œå¼€å¯æ‰‹åŠ¨ç¡®è®¤æ¥ä¿è¯ â€œèƒ½è€…å¤šåŠ³ â€â€”â€”æ¶ˆè´¹å¿«çš„æ¶ˆè´¹è€…æ¶ˆè´¹æ›´å¤šçš„æ¶ˆæ¯ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Consumer1</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>        Connection conn <span class="token operator">=</span> RabbitMQUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Channel channel <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//ä¸€æ¬¡åªæ¥å—ä¸€æ¡æœªç¡®è®¤çš„æ¶ˆæ¯</span>        channel<span class="token punctuation">.</span><span class="token function">basicQos</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span><span class="token string">"work"</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å…³é—­æ¶ˆæ¯è‡ªåŠ¨ç¡®è®¤æœºåˆ¶  autoAck : false</span>        channel<span class="token punctuation">.</span><span class="token function">basicConsume</span><span class="token punctuation">(</span><span class="token string">"work"</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">DefaultConsumer</span><span class="token punctuation">(</span>channel<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleDelivery</span><span class="token punctuation">(</span>String consumerTag<span class="token punctuation">,</span> Envelope envelope<span class="token punctuation">,</span> AMQP<span class="token punctuation">.</span>BasicProperties properties<span class="token punctuation">,</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> body<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// æ‰‹åŠ¨ç¡®è®¤</span>                <span class="token comment" spellcheck="true">// å‚æ•°1ï¼šæ¶ˆæ¯æ ‡è¯†</span>                <span class="token comment" spellcheck="true">// å‚æ•°2ï¼šfalse ä¸€æ¬¡åªç¡®è®¤ä¸€ä¸ªæ¶ˆæ¯</span>                channel<span class="token punctuation">.</span><span class="token function">basicAck</span><span class="token punctuation">(</span>envelope<span class="token punctuation">.</span><span class="token function">getDeliveryTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="ç¬¬ä¸‰ç§æ¨¡å‹ï¼ˆå¹¿æ’­ï¼‰"><a href="#ç¬¬ä¸‰ç§æ¨¡å‹ï¼ˆå¹¿æ’­ï¼‰" class="headerlink" title="ç¬¬ä¸‰ç§æ¨¡å‹ï¼ˆå¹¿æ’­ï¼‰"></a>ç¬¬ä¸‰ç§æ¨¡å‹ï¼ˆå¹¿æ’­ï¼‰</h4><p><img src="/2020/10/21/rabbitmq/8.png" alt></p><p>åœ¨å¹¿æ’­æ¨¡å¼ä¸‹ï¼Œæ¶ˆæ¯å‘é€æµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ul><li>å¯ä»¥æœ‰å¤šä¸ªæ¶ˆè´¹è€…</li><li>æ¯ä¸ª<strong>æ¶ˆè´¹è€…æœ‰è‡ªå·±çš„queue</strong>ï¼ˆé˜Ÿåˆ—ï¼‰</li><li>æ¯ä¸ª<strong>é˜Ÿåˆ—éƒ½è¦ç»‘å®šåˆ°Exchange</strong>ï¼ˆäº¤æ¢æœºï¼‰</li><li><strong>ç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯ï¼Œåªèƒ½å‘é€åˆ°äº¤æ¢æœº</strong>ï¼Œäº¤æ¢æœºæ¥å†³å®šè¦å‘ç»™å“ªä¸ªé˜Ÿåˆ—ï¼Œç”Ÿäº§è€…æ— æ³•å†³å®šã€‚</li><li>äº¤æ¢æœºæŠŠæ¶ˆæ¯å‘é€ç»™ç»‘å®šè¿‡çš„æ‰€æœ‰é˜Ÿåˆ—</li><li>é˜Ÿåˆ—çš„æ¶ˆè´¹è€…éƒ½èƒ½æ‹¿åˆ°æ¶ˆæ¯ã€‚å®ç°ä¸€æ¡æ¶ˆæ¯è¢«å¤šä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹</li></ul><p><strong>ç”Ÿäº§è€…ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Provider</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        Connection conn <span class="token operator">=</span> RabbitMQUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Channel channel <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºäº¤æ¢æœº</span>        channel<span class="token punctuation">.</span><span class="token function">exchangeDeclare</span><span class="token punctuation">(</span><span class="token string">"log"</span><span class="token punctuation">,</span><span class="token string">"fanout"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å‘é€æ¶ˆæ¯</span>        channel<span class="token punctuation">.</span><span class="token function">basicPublish</span><span class="token punctuation">(</span><span class="token string">"log"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span>null<span class="token punctuation">,</span><span class="token string">"fanout message"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        RabbitMQUtils<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span>channel<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>æ¶ˆè´¹è€…ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Customer</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception<span class="token punctuation">{</span>        Connection conn <span class="token operator">=</span> RabbitMQUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Channel channel <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºäº¤æ¢æœº  åç§°ï¼Œç±»å‹</span>        channel<span class="token punctuation">.</span><span class="token function">exchangeDeclare</span><span class="token punctuation">(</span><span class="token string">"log"</span><span class="token punctuation">,</span><span class="token string">"fanout"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºä¸´æ—¶é˜Ÿåˆ—</span>        String queue <span class="token operator">=</span> channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ç»‘å®šä¸´æ—¶é˜Ÿåˆ—å’Œäº¤æ¢æœº</span>        channel<span class="token punctuation">.</span><span class="token function">queueBind</span><span class="token punctuation">(</span>queue<span class="token punctuation">,</span><span class="token string">"log"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ¶ˆè´¹æ¶ˆæ¯</span>        channel<span class="token punctuation">.</span><span class="token function">basicConsume</span><span class="token punctuation">(</span>queue<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">DefaultConsumer</span><span class="token punctuation">(</span>channel<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleDelivery</span><span class="token punctuation">(</span>String consumerTag<span class="token punctuation">,</span> Envelope envelope<span class="token punctuation">,</span> AMQP<span class="token punctuation">.</span>BasicProperties properties<span class="token punctuation">,</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> body<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ¶ˆè´¹è€…1ï¼š"</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>æ­¤æ—¶ç”Ÿäº§è€…ç”Ÿäº§çš„ä¸€æ¡æ¶ˆæ¯å¯ä»¥è¢«å¤šä¸ªæ¶ˆè´¹è€…åŒæ—¶æ¶ˆè´¹ã€‚</p><h4 id="ç¬¬å››ç§æ¨¡å‹ï¼ˆè·¯ç”±ï¼‰"><a href="#ç¬¬å››ç§æ¨¡å‹ï¼ˆè·¯ç”±ï¼‰" class="headerlink" title="ç¬¬å››ç§æ¨¡å‹ï¼ˆè·¯ç”±ï¼‰"></a>ç¬¬å››ç§æ¨¡å‹ï¼ˆè·¯ç”±ï¼‰</h4><p>åœ¨Fanoutæ¨¡å¼ä¸­ï¼Œä¸€æ¡æ¶ˆæ¯ï¼Œä¼šè¢«æ‰€æœ‰è®¢é˜…çš„é˜Ÿåˆ—éƒ½æ¶ˆè´¹ã€‚ä½†æ˜¯ï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›ä¸åŒçš„æ¶ˆæ¯è¢«ä¸åŒçš„é˜Ÿåˆ—æ¶ˆè´¹ã€‚è¿™æ—¶å°±è¦ç”¨åˆ°Directç±»å‹çš„Exchangeã€‚</p><p> åœ¨Directæ¨¡å‹ä¸‹ï¼š</p><ul><li>é˜Ÿåˆ—ä¸äº¤æ¢æœºçš„ç»‘å®šï¼Œä¸èƒ½æ˜¯ä»»æ„ç»‘å®šäº†ï¼Œè€Œæ˜¯è¦æŒ‡å®šä¸€ä¸ª<code>RoutingKey</code>ï¼ˆè·¯ç”±keyï¼‰</li><li>æ¶ˆæ¯çš„å‘é€æ–¹åœ¨ å‘ Exchangeå‘é€æ¶ˆæ¯æ—¶ï¼Œä¹Ÿå¿…é¡»æŒ‡å®šæ¶ˆæ¯çš„ <code>RoutingKey</code>ã€‚</li><li>Exchangeä¸å†æŠŠæ¶ˆæ¯äº¤ç»™æ¯ä¸€ä¸ªç»‘å®šçš„é˜Ÿåˆ—ï¼Œè€Œæ˜¯æ ¹æ®æ¶ˆæ¯çš„<code>Routing Key</code>è¿›è¡Œåˆ¤æ–­ï¼Œåªæœ‰é˜Ÿåˆ—çš„<code>Routingkey</code>ä¸æ¶ˆæ¯çš„ <code>Routing key</code>å®Œå…¨ä¸€è‡´ï¼Œæ‰ä¼šæ¥æ”¶åˆ°æ¶ˆæ¯</li></ul><p><img src="/2020/10/21/rabbitmq/9.png" alt></p><ul><li>Pï¼šç”Ÿäº§è€…ï¼Œå‘Exchangeå‘é€æ¶ˆæ¯ï¼Œå‘é€æ¶ˆæ¯æ—¶ï¼Œä¼šæŒ‡å®šä¸€ä¸ªrouting keyã€‚</li><li>Xï¼šExchangeï¼ˆäº¤æ¢æœºï¼‰ï¼Œæ¥æ”¶ç”Ÿäº§è€…çš„æ¶ˆæ¯ï¼Œç„¶åæŠŠæ¶ˆæ¯é€’äº¤ç»™ ä¸routing keyå®Œå…¨åŒ¹é…çš„é˜Ÿåˆ—</li><li>C1ï¼šæ¶ˆè´¹è€…ï¼Œå…¶æ‰€åœ¨é˜Ÿåˆ—æŒ‡å®šäº†éœ€è¦routing key ä¸º error çš„æ¶ˆæ¯</li><li>C2ï¼šæ¶ˆè´¹è€…ï¼Œå…¶æ‰€åœ¨é˜Ÿåˆ—æŒ‡å®šäº†éœ€è¦routing key ä¸º infoã€errorã€warning çš„æ¶ˆæ¯</li></ul><p><strong>ç”Ÿäº§è€…ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MsProvider</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        Connection connection <span class="token operator">=</span> RabbitMQUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Channel channel <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">exchangeDeclare</span><span class="token punctuation">(</span><span class="token string">"log_direct"</span><span class="token punctuation">,</span><span class="token string">"direct"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">basicPublish</span><span class="token punctuation">(</span><span class="token string">"log_direct"</span><span class="token punctuation">,</span><span class="token string">"info"</span><span class="token punctuation">,</span>null<span class="token punctuation">,</span><span class="token string">"routingKeyä¸ºinfoçš„æ¶ˆæ¯"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        RabbitMQUtils<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>connection<span class="token punctuation">,</span>channel<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>æ¶ˆè´¹è€…ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MsConsumer</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        Connection connection <span class="token operator">=</span> RabbitMQUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Channel channel <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">exchangeDeclare</span><span class="token punctuation">(</span><span class="token string">"log_direct"</span><span class="token punctuation">,</span><span class="token string">"direct"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String queue <span class="token operator">=</span> channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">queueBind</span><span class="token punctuation">(</span>queue<span class="token punctuation">,</span><span class="token string">"log_direct"</span><span class="token punctuation">,</span><span class="token string">"info"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">basicConsume</span><span class="token punctuation">(</span>queue<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">DefaultConsumer</span><span class="token punctuation">(</span>channel<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleDelivery</span><span class="token punctuation">(</span>String consumerTag<span class="token punctuation">,</span> Envelope envelope<span class="token punctuation">,</span> AMQP<span class="token punctuation">.</span>BasicProperties properties<span class="token punctuation">,</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> body<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>Routingæ¨¡å‹ä¹‹topic</strong></p><p><code>Topic</code>ç±»å‹çš„<code>Exchange</code>ä¸<code>Direct</code>ç›¸æ¯”ï¼Œéƒ½æ˜¯å¯ä»¥æ ¹æ®<code>RoutingKey</code>æŠŠæ¶ˆæ¯è·¯ç”±åˆ°ä¸åŒçš„é˜Ÿåˆ—ã€‚åªä¸è¿‡<code>Topic</code>ç±»å‹<code>Exchange</code>å¯ä»¥è®©é˜Ÿåˆ—åœ¨ç»‘å®š<code>Routing key</code> çš„æ—¶å€™ä½¿ç”¨é€šé…ç¬¦ï¼è¿™ç§æ¨¡å‹<code>Routingkey</code> ä¸€èˆ¬éƒ½æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªå•è¯ç»„æˆï¼Œå¤šä¸ªå•è¯ä¹‹é—´ä»¥â€.â€åˆ†å‰²ï¼Œä¾‹å¦‚ï¼š <code>item.insert</code></p><p><code>audit.#</code> åŒ¹é…audit.irs.corporateæˆ–è€… audit.irs ç­‰<br><code>audit.*</code>  åªèƒ½åŒ¹é… audit.irs</p>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RabbitMQ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JWTåŸç†åŠä½¿ç”¨</title>
      <link href="2020/10/18/jwt/"/>
      <url>2020/10/18/jwt/</url>
      
        <content type="html"><![CDATA[<h2 id="JWT-ç®€ä»‹"><a href="#JWT-ç®€ä»‹" class="headerlink" title="JWT ç®€ä»‹"></a>JWT ç®€ä»‹</h2><p>JSON Web Tokençš„ç¼©å†™ï¼Œé€šè¿‡jsonä½œä¸ºwebåº”ç”¨ä¸­çš„ä»¤ç‰Œï¼Œç”¨äºåœ¨å„æ–¹ä¹‹é—´å®‰å…¨åœ°ä¼ è¾“jsonæ•°æ®ã€‚åœ¨æ•°æ®çš„ä¼ è¾“è¿‡ç¨‹ä¸­è¿˜å¯ä»¥å®Œæˆæ•°æ®åŠ å¯†ã€ç­¾åç­‰ã€‚</p><h2 id="JWTçš„ä¸»è¦ç”¨é€”"><a href="#JWTçš„ä¸»è¦ç”¨é€”" class="headerlink" title="JWTçš„ä¸»è¦ç”¨é€”"></a>JWTçš„ä¸»è¦ç”¨é€”</h2><p><strong>1ã€è®¤è¯æˆæƒ</strong></p><ul><li>è¿™æ˜¯ä½¿ç”¨JWTçš„æœ€å¸¸è§æ–¹æ¡ˆã€‚ä¸€æ—¦ç”¨æˆ·ç™»å½•ï¼Œæ¯ä¸ªåç»­è¯·æ±‚å°†åŒ…æ‹¬JWTï¼Œä»è€Œå…è®¸ç”¨æˆ·è®¿é—®è¯¥ä»¤ç‰Œå…è®¸çš„è·¯ç”±ï¼ŒæœåŠ¡å’Œèµ„æºã€‚å•ç‚¹ç™»å½•æ˜¯å½“ä»Šå¹¿æ³›ä½¿ç”¨JWTçš„ä¸€é¡¹åŠŸèƒ½ï¼Œå› ä¸ºå®ƒçš„å¼€é”€å¾ˆå°å¹¶ä¸”å¯ä»¥åœ¨ä¸åŒçš„åŸŸä¸­è½»æ¾ä½¿ç”¨ã€‚</li></ul><p><strong>2.ä¿¡æ¯äº¤æ¢</strong></p><ul><li>JSON Web Tokenæ˜¯åœ¨å„æ–¹ä¹‹é—´å®‰å…¨åœ°ä¼ è¾“ä¿¡æ¯çš„å¥½æ–¹æ³•ã€‚å› ä¸ºå¯ä»¥å¯¹JWTè¿›è¡Œç­¾åï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨å…¬é’¥/ç§é’¥å¯¹ï¼‰ï¼Œæ‰€ä»¥æ‚¨å¯ä»¥ç¡®ä¿å‘ä»¶äººæ˜¯ä»–ä»¬æ‰€è¯´çš„äººã€‚æ­¤å¤–ï¼Œç”±äºç­¾åæ˜¯ä½¿ç”¨æ ‡å¤´å’Œæœ‰æ•ˆè´Ÿè½½è®¡ç®—çš„ï¼Œå› æ­¤æ‚¨è¿˜å¯ä»¥éªŒè¯å†…å®¹æ˜¯å¦é­åˆ°ç¯¡æ”¹ã€‚</li></ul><h2 id="JWTä¸Sessionçš„åŒºåˆ«"><a href="#JWTä¸Sessionçš„åŒºåˆ«" class="headerlink" title="JWTä¸Sessionçš„åŒºåˆ«"></a>JWTä¸Sessionçš„åŒºåˆ«</h2><h3 id="åŸºäºä¼ ç»Ÿçš„Sessionè®¤è¯"><a href="#åŸºäºä¼ ç»Ÿçš„Sessionè®¤è¯" class="headerlink" title="åŸºäºä¼ ç»Ÿçš„Sessionè®¤è¯"></a>åŸºäºä¼ ç»Ÿçš„Sessionè®¤è¯</h3><p><strong>è®¤è¯æ–¹å¼</strong></p><ul><li>httpåè®®æœ¬èº«æ˜¯ä¸€ç§æ— çŠ¶æ€çš„åè®®ï¼Œè€Œè¿™å°±æ„å‘³ç€å¦‚æœç”¨æˆ·å‘æˆ‘ä»¬çš„åº”ç”¨æä¾›äº†ç”¨æˆ·åå’Œå¯†ç æ¥è¿›è¡Œç”¨æˆ·è®¤è¯ã€‚é‚£ä¹ˆä¸‹ä¸€æ¬¡è¯·æ±‚æ—¶ï¼Œç”¨æˆ·è¿˜è¦å†ä¸€æ¬¡è¿›è¡Œç”¨æˆ·è®¤è¯æ‰è¡Œï¼Œå› ä¸ºæ ¹æ®httpåè®®ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½çŸ¥é“æ˜¯å“ªä¸ªç”¨æˆ·å‘å‡ºçš„è¯·æ±‚ï¼Œæ‰€ä»¥ä¸ºäº†è®©æˆ‘ä»¬çš„åº”ç”¨èƒ½è¯†åˆ«æ˜¯å“ªä¸ªç”¨æˆ·å‘å‡ºçš„è¯·æ±‚ï¼Œæˆ‘ä»¬åªèƒ½åœ¨æœåŠ¡å™¨å­˜å‚¨ä¸€ä»½ç”¨æˆ·ç™»å½•çš„ä¿¡æ¯(session)ã€‚è¿™ä»½ç™»å½•ä¿¡æ¯ä¼šåœ¨å“åº”æ—¶ä¼ é€’ç»™æµè§ˆå™¨ï¼Œå‘Šè¯‰å…¶ä¿å­˜ä¸ºcookie(å­˜å‚¨sessionid)ï¼Œä»¥ä¾¿ä¸‹æ¬¡è¯·æ±‚æ—¶å‘é€ç»™æˆ‘ä»¬çš„åº”ç”¨ï¼Œè¿™æ ·æˆ‘ä»¬çš„åº”ç”¨å°±èƒ½è¯†åˆ«è¯·æ±‚æ¥è‡ªå“ªä¸ªç”¨æˆ·äº†,è¿™å°±æ˜¯ä¼ ç»Ÿçš„åŸºäºsessionè®¤è¯ã€‚</li></ul><p><strong>2.è®¤è¯æµç¨‹</strong><br><img src="/2020/10/18/jwt/1.png" alt></p><p><strong>3.å­˜åœ¨çš„é—®é¢˜</strong></p><ul><li>1.æ¯ä¸ªç”¨æˆ·ç»è¿‡æˆ‘ä»¬çš„åº”ç”¨è®¤è¯ä¹‹åï¼Œæˆ‘ä»¬çš„åº”ç”¨éƒ½è¦åœ¨æœåŠ¡ç«¯åšä¸€æ¬¡è®°å½•ï¼Œä»¥æ–¹ä¾¿ç”¨æˆ·ä¸‹æ¬¡è¯·æ±‚çš„é‰´åˆ«ï¼Œé€šå¸¸è€Œè¨€sessionéƒ½æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œéšç€è®¤è¯ç”¨æˆ·çš„å¢å¤šï¼ŒæœåŠ¡ç«¯çš„å¼€é”€ä¼šæ˜æ˜¾å¢å¤§</li><li>2.ç”¨æˆ·è®¤è¯ä¹‹åï¼ŒæœåŠ¡ç«¯åšè®¤è¯è®°å½•ï¼Œå¦‚æœè®¤è¯çš„è®°å½•è¢«ä¿å­˜åœ¨å†…å­˜ä¸­çš„è¯ï¼Œè¿™æ„å‘³ç€ç”¨æˆ·ä¸‹æ¬¡è¯·æ±‚è¿˜å¿…é¡»è¦è¯·æ±‚åœ¨è¿™å°æœåŠ¡å™¨ä¸Š,è¿™æ ·æ‰èƒ½æ‹¿åˆ°æˆæƒçš„èµ„æºï¼Œè¿™æ ·åœ¨åˆ†å¸ƒå¼çš„åº”ç”¨ä¸Šï¼Œç›¸åº”çš„é™åˆ¶äº†è´Ÿè½½å‡è¡¡å™¨çš„èƒ½åŠ›ã€‚è¿™ä¹Ÿæ„å‘³ç€é™åˆ¶äº†åº”ç”¨çš„æ‰©å±•èƒ½åŠ›ã€‚</li><li>3.å› ä¸ºæ˜¯åŸºäºcookieæ¥è¿›è¡Œç”¨æˆ·è¯†åˆ«çš„, cookieå¦‚æœè¢«æˆªè·ï¼Œç”¨æˆ·å°±ä¼šå¾ˆå®¹æ˜“å—åˆ°è·¨ç«™è¯·æ±‚ä¼ªé€ çš„æ”»å‡»ã€‚</li><li>4.åœ¨å‰åç«¯åˆ†ç¦»ç³»ç»Ÿä¸­å°±æ›´åŠ ç—›è‹¦:å¦‚ä¸‹å›¾æ‰€ç¤º<br>  ä¹Ÿå°±æ˜¯è¯´å‰åç«¯åˆ†ç¦»åœ¨åº”ç”¨è§£è€¦åå¢åŠ äº†éƒ¨ç½²çš„å¤æ‚æ€§ã€‚é€šå¸¸ç”¨æˆ·ä¸€æ¬¡è¯·æ±‚å°±è¦è½¬å‘å¤šæ¬¡ã€‚æ¯æ¬¡æºå¸¦sessionid åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨è¿˜è¦æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ã€‚è¿˜æœ‰å°±æ˜¯sessionidå°±æ˜¯ä¸€ä¸ªç‰¹å¾å€¼ï¼Œè¡¨è¾¾çš„ä¿¡æ¯ä¸å¤Ÿä¸°å¯Œï¼Œä¸å®¹æ˜“æ‰©å±•ã€‚è€Œä¸”å¦‚æœåç«¯åº”ç”¨æ˜¯å¤šèŠ‚ç‚¹éƒ¨ç½²ï¼Œå°±éœ€è¦å®ç°sessionå…±äº«æœºåˆ¶ã€‚ä¸æ–¹ä¾¿é›†ç¾¤åº”ç”¨ã€‚  <img src="/2020/10/18/jwt/2.png" style="zoom:80%;"></li></ul><h3 id="åŸºäºJWTçš„è®¤è¯"><a href="#åŸºäºJWTçš„è®¤è¯" class="headerlink" title="åŸºäºJWTçš„è®¤è¯"></a>åŸºäºJWTçš„è®¤è¯</h3><p><strong>è®¤è¯æµç¨‹</strong><br><img src="/2020/10/18/jwt/3.png" alt></p><ul><li><p>é¦–å…ˆï¼Œå‰ç«¯é€šè¿‡Webè¡¨å•å°†è‡ªå·±çš„ç”¨æˆ·åå’Œå¯†ç å‘é€åˆ°åç«¯çš„æ¥å£ã€‚è¿™ä¸€è¿‡ç¨‹ä¸€èˆ¬æ˜¯ä¸€ä¸ªHTTP POSTè¯·æ±‚ã€‚å»ºè®®çš„æ–¹å¼æ˜¯é€šè¿‡SSLåŠ å¯†çš„ä¼ è¾“ï¼ˆhttpsåè®®ï¼‰ï¼Œä»è€Œé¿å…æ•æ„Ÿä¿¡æ¯è¢«å—…æ¢ã€‚</p></li><li><p>åç«¯æ ¸å¯¹ç”¨æˆ·åå’Œå¯†ç æˆåŠŸåï¼Œå°†ç”¨æˆ·çš„idç­‰å…¶ä»–ä¿¡æ¯ä½œä¸ºJWT Payloadï¼ˆè´Ÿè½½ï¼‰ï¼Œå°†å…¶ä¸å¤´éƒ¨åˆ†åˆ«è¿›è¡ŒBase64ç¼–ç æ‹¼æ¥åç­¾åï¼Œå½¢æˆä¸€ä¸ªJWT(Token)ã€‚å½¢æˆçš„JWTå°±æ˜¯ä¸€ä¸ªå½¢åŒaaa.bbb.cccçš„å­—ç¬¦ä¸²ã€‚  header.payload.signature</p></li><li><p>åç«¯å°†JWTå­—ç¬¦ä¸²ä½œä¸ºç™»å½•æˆåŠŸçš„è¿”å›ç»“æœè¿”å›ç»™å‰ç«¯ã€‚å‰ç«¯å¯ä»¥å°†è¿”å›çš„ç»“æœä¿å­˜åœ¨localStorageæˆ–sessionStorageä¸Šï¼Œé€€å‡ºç™»å½•æ—¶å‰ç«¯åˆ é™¤ä¿å­˜çš„JWTå³å¯ã€‚</p></li><li><p>å‰ç«¯åœ¨æ¯æ¬¡è¯·æ±‚æ—¶å°†JWTæ”¾å…¥HTTP Headerä¸­çš„Authorizationä½ã€‚(è§£å†³XSSå’ŒXSRFé—®é¢˜) </p></li><li><p>åç«¯æ£€æŸ¥æ˜¯å¦å­˜åœ¨ï¼Œå¦‚å­˜åœ¨éªŒè¯JWTçš„æœ‰æ•ˆæ€§ã€‚ä¾‹å¦‚ï¼Œæ£€æŸ¥ç­¾åæ˜¯å¦æ­£ç¡®ï¼›æ£€æŸ¥Tokenæ˜¯å¦è¿‡æœŸï¼›æ£€æŸ¥Tokençš„æ¥æ”¶æ–¹æ˜¯å¦æ˜¯è‡ªå·±ï¼ˆå¯é€‰ï¼‰ã€‚</p></li><li><p>éªŒè¯é€šè¿‡ååç«¯ä½¿ç”¨JWTä¸­åŒ…å«çš„ç”¨æˆ·ä¿¡æ¯è¿›è¡Œå…¶ä»–é€»è¾‘æ“ä½œï¼Œè¿”å›ç›¸åº”ç»“æœã€‚</p></li></ul><p><strong>JWTçš„ä¼˜åŠ¿</strong></p><ul><li><p>ç®€æ´(Compact): å¯ä»¥é€šè¿‡URLï¼ŒPOSTå‚æ•°æˆ–è€…åœ¨HTTP headerå‘é€ï¼Œå› ä¸ºæ•°æ®é‡å°ï¼Œä¼ è¾“é€Ÿåº¦ä¹Ÿå¾ˆå¿«</p></li><li><p>è‡ªåŒ…å«(Self-contained)ï¼šè´Ÿè½½ä¸­åŒ…å«äº†æ‰€æœ‰ç”¨æˆ·æ‰€éœ€è¦çš„ä¿¡æ¯ï¼Œé¿å…äº†å¤šæ¬¡æŸ¥è¯¢æ•°æ®åº“</p></li><li><p>å› ä¸ºTokenæ˜¯ä»¥JSONåŠ å¯†çš„å½¢å¼ä¿å­˜åœ¨å®¢æˆ·ç«¯çš„ï¼Œæ‰€ä»¥JWTæ˜¯è·¨è¯­è¨€çš„ï¼ŒåŸåˆ™ä¸Šä»»ä½•webå½¢å¼éƒ½æ”¯æŒã€‚</p></li><li><p>ä¸éœ€è¦åœ¨æœåŠ¡ç«¯ä¿å­˜ä¼šè¯ä¿¡æ¯ï¼Œç‰¹åˆ«é€‚ç”¨äºåˆ†å¸ƒå¼å¾®æœåŠ¡ã€‚</p></li></ul><h2 id="JWTçš„ç»“æ„"><a href="#JWTçš„ç»“æ„" class="headerlink" title="JWTçš„ç»“æ„"></a>JWTçš„ç»“æ„</h2><h3 id="1ã€æ ‡å¤´Header"><a href="#1ã€æ ‡å¤´Header" class="headerlink" title="1ã€æ ‡å¤´Header"></a>1ã€æ ‡å¤´Header</h3><p>é€šå¸¸ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šä»¤ç‰Œçš„ç±»å‹ï¼ˆå³JWTï¼‰å’Œæ‰€ä½¿ç”¨çš„ç­¾åç®—æ³•ï¼Œä¾‹å¦‚HMACã€SHA256æˆ–RSAã€‚å®ƒä¼šä½¿ç”¨Base64ç¼–ç ç»„æˆJWTç»“æ„çš„ä¸€éƒ¨åˆ†(aaa.)ã€‚</p><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"alg"</span><span class="token operator">:</span> <span class="token string">"HS256"</span><span class="token punctuation">,</span>  <span class="token property">"typ"</span><span class="token operator">:</span> <span class="token string">"JWT"</span><span class="token punctuation">}</span></code></pre><h3 id="2ã€æœ‰æ•ˆè½½è·Payload"><a href="#2ã€æœ‰æ•ˆè½½è·Payload" class="headerlink" title="2ã€æœ‰æ•ˆè½½è·Payload"></a>2ã€æœ‰æ•ˆè½½è·Payload</h3><p>åŒ…å«æœ‰å…³å®ä½“çš„å£°æ˜ï¼ˆé€šå¸¸æ˜¯ç”¨æˆ·ï¼‰æˆ–å…¶ä»–æ•°æ®ï¼ˆå¯¹ç”¨æˆ·ä¸æ•æ„Ÿçš„ä¿¡æ¯ï¼‰çš„å£°æ˜ã€‚åŒæ ·ä½¿ç”¨Base64ç¼–ç ç»„æˆJWTçš„ç¬¬äºŒéƒ¨åˆ†ï¼ˆbbb.ï¼‰</p><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"sub"</span><span class="token operator">:</span> <span class="token string">"1234567890"</span><span class="token punctuation">,</span>  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"John Doe"</span><span class="token punctuation">,</span>  <span class="token property">"admin"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span></code></pre><h3 id="3ã€ç­¾åSignature"><a href="#3ã€ç­¾åSignature" class="headerlink" title="3ã€ç­¾åSignature"></a>3ã€ç­¾åSignature</h3><p>å‰é¢ä¸¤éƒ¨åˆ†éƒ½æ˜¯ä½¿ç”¨Base64è¿›è¡Œç¼–ç çš„ï¼Œå³åœ¨å‰ç«¯å¯ä»¥Base64è§£ç è§£å¼€é‡Œé¢çš„ä¿¡æ¯ã€‚Signature éœ€è¦ä½¿ç”¨<br>ç¼–ç åçš„headerå’Œpayloadä»¥åŠæˆ‘ä»¬æä¾›çš„ä¸€ä¸ªå¯†é’¥ï¼Œç„¶åä½¿ç”¨headerä¸­æŒ‡æ˜çš„ç­¾åç®—æ³•ï¼ˆHS256ï¼‰è¿›è¡Œç­¾åï¼Œä¿è¯JWTæ²¡æœ‰è¢«ç¯¡æ”¹è¿‡ã€‚</p><p>ä¾‹å¦‚ï¼š<code>HMACSHA256(base64UrlEncode(header) + &quot;.&quot; + base64UrlEncode(payload),secret);</code></p><p><img src="/2020/10/18/jwt/4.png" alt></p><p>æœ€ç»ˆè¾“å‡ºä¸ºï¼š<br><img src="/2020/10/18/jwt/5.png" alt></p><ul><li>è¾“å‡ºæ˜¯ä¸‰ä¸ªç”±ç‚¹åˆ†éš”çš„Base64-URLå­—ç¬¦ä¸²ï¼Œå¯ä»¥åœ¨HTMLå’ŒHTTPç¯å¢ƒä¸­è½»æ¾ä¼ é€’è¿™äº›å­—ç¬¦ä¸²ï¼Œä¸åŸºäºXMLçš„æ ‡å‡†ï¼ˆä¾‹å¦‚SAMLï¼‰ç›¸æ¯”ï¼Œå®ƒæ›´ç´§å‡‘ã€‚</li><li>ç®€æ´(Compact)<br>  å¯ä»¥é€šè¿‡URL, POST å‚æ•°æˆ–è€…åœ¨ HTTP header å‘é€ï¼Œå› ä¸ºæ•°æ®é‡å°ï¼Œä¼ è¾“é€Ÿåº¦å¿«</li><li>è‡ªåŒ…å«(Self-contained)<br>  è´Ÿè½½ä¸­åŒ…å«äº†æ‰€æœ‰ç”¨æˆ·æ‰€éœ€è¦çš„ä¿¡æ¯ï¼Œé¿å…äº†å¤šæ¬¡æŸ¥è¯¢æ•°æ®åº“</li></ul><h2 id="æ•´åˆSpringboot"><a href="#æ•´åˆSpringboot" class="headerlink" title="æ•´åˆSpringboot"></a>æ•´åˆSpringboot</h2><h3 id="1ã€åˆ›å»ºæ•°æ®åº“"><a href="#1ã€åˆ›å»ºæ•°æ®åº“" class="headerlink" title="1ã€åˆ›å»ºæ•°æ®åº“"></a>1ã€åˆ›å»ºæ•°æ®åº“</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> jwt_test<span class="token punctuation">;</span><span class="token keyword">CREATE</span> <span class="token keyword">table</span> t_user<span class="token punctuation">(</span>id <span class="token keyword">int</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">,</span>password <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>password<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'zhangyuzhen'</span><span class="token punctuation">,</span><span class="token string">'123456'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'zhangsan'</span><span class="token punctuation">,</span><span class="token string">'123456'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="2ã€åˆ›å»ºSpringbooté¡¹ç›®"><a href="#2ã€åˆ›å»ºSpringbooté¡¹ç›®" class="headerlink" title="2ã€åˆ›å»ºSpringbooté¡¹ç›®"></a>2ã€åˆ›å»ºSpringbooté¡¹ç›®</h3><p>å¯¼å…¥å¦‚ä¸‹ä¾èµ–ï¼š</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--å¼•å…¥jwt--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.auth0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>java-jwt<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.4.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--å¼•å…¥mybatis--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.1.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--å¼•å…¥lombok--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.18.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--å¼•å…¥druid--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.1.19<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--å¼•å…¥mysql--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>8.0.19<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><h3 id="3ã€ç¼–å†™é…ç½®æ–‡ä»¶"><a href="#3ã€ç¼–å†™é…ç½®æ–‡ä»¶" class="headerlink" title="3ã€ç¼–å†™é…ç½®æ–‡ä»¶"></a>3ã€ç¼–å†™é…ç½®æ–‡ä»¶</h3><pre class=" language-properties"><code class="language-properties"><span class="token attr-name">server.port</span><span class="token punctuation">=</span><span class="token attr-value">8989</span><span class="token attr-name">spring.datasource.type</span><span class="token punctuation">=</span><span class="token attr-value">com.alibaba.druid.pool.DruidDataSource</span><span class="token attr-name">spring.datasource.driver-class-name</span><span class="token punctuation">=</span><span class="token attr-value">com.mysql.cj.jdbc.Driver</span><span class="token attr-name">spring.datasource.url</span><span class="token punctuation">=</span><span class="token attr-value">jdbc:mysql://localhost:3306/jwt_test?serverTimezone=Asia/Shanghai</span><span class="token attr-name">spring.datasource.username</span><span class="token punctuation">=</span><span class="token attr-value">root</span><span class="token attr-name">spring.datasource.password</span><span class="token punctuation">=</span><span class="token attr-value">2824199842</span><span class="token attr-name">mybatis.type-aliases-package</span><span class="token punctuation">=</span><span class="token attr-value">com.zyz.po</span><span class="token attr-name">mybatis.mapper-locations</span><span class="token punctuation">=</span><span class="token attr-value">classpath:com/zyz/mapper/*.xml</span><span class="token attr-name">logging.level.com.zyz.dao</span><span class="token punctuation">=</span><span class="token attr-value">debug</span></code></pre><p>å…ˆæµ‹è¯•æ•°æ®åº“æ˜¯å¦èƒ½è¿æ¥æˆåŠŸ</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">class</span> <span class="token class-name">SpringbootJwtApplicationTests</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    DataSource dataSource<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> SQLException <span class="token punctuation">{</span>        Connection connection <span class="token operator">=</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>connection<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="4ã€åˆ›å»ºé¡¹ç›®çš„åŒ…ç»“æ„"><a href="#4ã€åˆ›å»ºé¡¹ç›®çš„åŒ…ç»“æ„" class="headerlink" title="4ã€åˆ›å»ºé¡¹ç›®çš„åŒ…ç»“æ„"></a>4ã€åˆ›å»ºé¡¹ç›®çš„åŒ…ç»“æ„</h3><p><img src="/2020/10/18/jwt/10.png" alt></p><p>ç¼–å†™å„å±‚çš„ä»£ç ï¼š</p><blockquote><p>po</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@NoArgsConstructor</span><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> Integer id<span class="token punctuation">;</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> String password<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>dao       @Repositoryå¯ä»¥çœç•¥ï¼Œå› ä¸ºå…¶æ¥å£å¯¹åº”çš„mapperæ–‡ä»¶é€šè¿‡namespaceä¸ä¹‹ç›¸å…³è”ï¼Œç”Ÿæˆçš„å®ç°ç±»æ€»æ˜¯åœ¨å®¹å™¨ä¸­</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Repository</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>    User <span class="token function">login</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8" ?></span><span class="token doctype">&lt;!DOCTYPE mapper        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" ></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.dao.UserDao<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>login<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>User<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>User<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select id,name from t_user where name=#{name} and password=#{password}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">></span></span></code></pre><p>åœ¨Springbootå¯åŠ¨ç±»ä¸Šä¸­æ·»åŠ daoæ¥å£åŒ…æ‰«æçš„æ³¨è§£@MapperScan(â€œcom.zyz.daoâ€)æˆ–è€…åœ¨æ¯ä¸ªdaoæ¥å£ä¸­æ·»åŠ @Mapperæ³¨è§£</p><blockquote><p>service</p></blockquote><pre><code>public interface UserService {    User login(User user);}</code></pre><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> UserDao userDao<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> User <span class="token function">login</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span> <span class="token punctuation">{</span>        User user1 <span class="token operator">=</span> userDao<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>ObjectUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"ç™»å½•å¤±è´¥ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> user1<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>utils</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * åˆ›å»º Token */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JWTUtils</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å¯†é’¥</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String SIGNATURE <span class="token operator">=</span> <span class="token string">"qwertyuiopasdfghjklzxcvbnm"</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * ç”Ÿæˆ Token  header.payload.signature     * @param map     * @return     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> String <span class="token function">getToken</span><span class="token punctuation">(</span>Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>String<span class="token operator">></span> map<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// è®¾ç½®tokenæœ‰æ•ˆæ—¶é•¿</span>        Calendar instance <span class="token operator">=</span> Calendar<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        instance<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Calendar<span class="token punctuation">.</span>DATE<span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æœ‰æ•ˆæœŸä¸º7å¤©</span>        JWTCreator<span class="token punctuation">.</span>Builder builder <span class="token operator">=</span> JWT<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è®¾ç½®header  headeræœ‰é»˜è®¤å€¼ï¼Œæ— éœ€æ‰‹åŠ¨è®¾ç½® é»˜è®¤åŠ å¯†æ–¹å¼ä¸ºHMAC256</span>        <span class="token comment" spellcheck="true">// è®¾ç½®payload  éå†mapå°†é”®å€¼å¯¹å­˜å…¥payload</span>        map<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token punctuation">{</span>builder<span class="token punctuation">.</span><span class="token function">withClaim</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String token <span class="token operator">=</span> builder                <span class="token comment" spellcheck="true">// è®¾ç½®tokenè¿‡æœŸæ—¶é•¿</span>                <span class="token punctuation">.</span><span class="token function">withExpiresAt</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">// è®¾ç½®signature</span>                <span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>Algorithm<span class="token punctuation">.</span><span class="token function">HMAC256</span><span class="token punctuation">(</span>SIGNATURE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> token<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * éªŒè¯ token     * @param token     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> DecodedJWT <span class="token function">verify</span><span class="token punctuation">(</span>String token<span class="token punctuation">)</span><span class="token punctuation">{</span>       <span class="token keyword">return</span> JWT<span class="token punctuation">.</span><span class="token function">require</span><span class="token punctuation">(</span>Algorithm<span class="token punctuation">.</span><span class="token function">HMAC256</span><span class="token punctuation">(</span>SIGNATURE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>controller</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> UserService userService<span class="token punctuation">;</span>    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/user/login"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Object<span class="token operator">></span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> User user<span class="token punctuation">)</span><span class="token punctuation">{</span>        Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            User realUser <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>            Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> String<span class="token operator">></span> payload <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç”¨æ¥å­˜æ”¾payload</span>            payload<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span>realUser<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            payload<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span>realUser<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            String token <span class="token operator">=</span> JWTUtils<span class="token punctuation">.</span><span class="token function">getToken</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// åˆ›å»ºtoken</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"è®¤è¯æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">,</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è®¤è¯æˆåŠŸè¿”å›token</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> map<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"hello!"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>interceptor  ç¼–å†™ç”¨äºtokenéªŒè¯çš„æ‹¦æˆªå™¨</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JWTInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerInterceptor</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">,</span> Object handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        String token <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Object<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            JWTUtils<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// éªŒè¯token</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æ”¾è¡Œ</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">TokenExpiredException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"state"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"Tokenå·²ç»è¿‡æœŸ!!!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SignatureVerificationException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"state"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"ç­¾åé”™è¯¯!!!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">AlgorithmMismatchException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"state"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"åŠ å¯†ç®—æ³•ä¸åŒ¹é…!!!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"state"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"æ— æ•ˆtoken~~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// å°†mapè½¬æ¢ä¸ºjsonæ ¼å¼è¿”å›ç»™å‰ç«¯</span>        String json <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"application/json;charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>config  ä½¿ç¼–å†™çš„æ‹¦æˆªå™¨ç”Ÿæ•ˆ</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InterceptorConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span>InterceptorRegistry registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JWTInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// æ‹¦æˆªæ‰€æœ‰è¯·æ±‚</span>                <span class="token punctuation">.</span><span class="token function">excludePathPatterns</span><span class="token punctuation">(</span><span class="token string">"/user/**"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä¸ç”¨æˆ·ç›¸å…³çš„è¯·æ±‚é™¤å¤–</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="ä½¿ç”¨Postmanæµ‹è¯•"><a href="#ä½¿ç”¨Postmanæµ‹è¯•" class="headerlink" title="ä½¿ç”¨Postmanæµ‹è¯•"></a>ä½¿ç”¨Postmanæµ‹è¯•</h2><p>è®¤è¯æˆåŠŸæ—¶ï¼š<br><img src="/2020/10/18/jwt/6.png"></p><p>è®¤è¯å¤±è´¥æ—¶ï¼š<br><img src="/2020/10/18/jwt/7.png"></p><p>æµ‹è¯•è¢«æ‹¦æˆªå™¨æ‹¦æˆªçš„æ¥å£ï¼š<br>ä¸æºå¸¦token:<br><img src="/2020/10/18/jwt/8.png" alt></p><p>æºå¸¦token:<br><img src="/2020/10/18/jwt/9.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JWT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dubboç®€ä»‹</title>
      <link href="2020/10/15/dubbo/"/>
      <url>2020/10/15/dubbo/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ†å¸ƒå¼ç®€ä»‹"><a href="#åˆ†å¸ƒå¼ç®€ä»‹" class="headerlink" title="åˆ†å¸ƒå¼ç®€ä»‹"></a>åˆ†å¸ƒå¼ç®€ä»‹</h2><p>åˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯è‹¥å¹²ç‹¬ç«‹è®¡ç®—æœºçš„é›†åˆï¼Œè¿™äº›è®¡ç®—æœºå¯¹äºç”¨æˆ·æ¥è¯´å°±åƒå•ä¸ªç›¸å…³ç³»ç»Ÿã€‚</p><h2 id="å‘å±•çš„æ¼”å˜"><a href="#å‘å±•çš„æ¼”å˜" class="headerlink" title="å‘å±•çš„æ¼”å˜"></a>å‘å±•çš„æ¼”å˜</h2><p><img src="/2020/10/15/dubbo/1.jpg" alt></p><blockquote><p>å•ä¸€åº”ç”¨æ¶æ„</p></blockquote><p>å½“ç½‘ç«™æµé‡å¾ˆå°æ—¶ï¼Œåªéœ€ä¸€ä¸ªåº”ç”¨ï¼Œå°†æ‰€æœ‰åŠŸèƒ½éƒ½éƒ¨ç½²åœ¨ä¸€èµ·ï¼Œä»¥å‡å°‘éƒ¨ç½²èŠ‚ç‚¹å’Œæˆæœ¬ã€‚<br><img src="/2020/10/15/dubbo/2.jpg" style="zoom:80%;"></p><p>ç¼ºç‚¹ï¼š1ã€æ‹“å±•æ€§èƒ½æ¯”è¾ƒéš¾ï¼›2ã€ååŒå¼€å‘é—®é¢˜ï¼›3ã€ä¸åˆ©äºå‡çº§ç»´æŠ¤</p><blockquote><p>å‚ç›´åº”ç”¨æ¶æ„</p></blockquote><p>å½“è®¿é—®é‡é€æ¸å¢å¤§ï¼Œå•ç‹¬å¢åŠ æœºå™¨å¸¦æ¥çš„åŠ é€Ÿåº¦è¶Šæ¥è¶Šå°ï¼Œå°†åº”ç”¨æ‹†æˆäº’ä¸ç›¸å¹²çš„å‡ ä¸ªåº”ç”¨ï¼Œä»¥æå‡æ•ˆç‡ã€‚æ­¤æ—¶ï¼Œç”¨äºåŠ é€Ÿå‰ç«¯é¡µé¢å¼€å‘çš„Webæ¡†æ¶(MVC)æ˜¯å…³é”®ã€‚<br><img src="/2020/10/15/dubbo/3.png" alt></p><p>é€šè¿‡åˆ‡åˆ†ä¸šåŠ¡æ¥å®ç°å„ä¸ªæ¨¡å—ç‹¬ç«‹éƒ¨ç½²ï¼Œé™ä½äº†ç»´æŠ¤å’Œéƒ¨ç½²çš„éš¾åº¦ï¼Œå›¢é˜Ÿå„å¸å…¶èŒæ›´æ˜“ç®¡ç†ï¼Œæ€§èƒ½æ‰©å±•ä¹Ÿæ›´æ–¹ä¾¿ï¼Œæ›´æœ‰é’ˆå¯¹æ€§ã€‚</p><p>ç¼ºç‚¹ï¼š å…¬ç”¨æ¨¡å—æ— æ³•é‡å¤åˆ©ç”¨ï¼Œå¼€å‘æ€§çš„æµªè´¹ã€‚</p><blockquote><p>åˆ†å¸ƒå¼æœåŠ¡æ¶æ„</p></blockquote><p>å½“å‚ç›´åº”ç”¨è¶Šæ¥è¶Šå¤šï¼Œåº”ç”¨ä¹‹é—´äº¤äº’ä¸å¯é¿å…ï¼Œå°†æ ¸å¿ƒä¸šåŠ¡æŠ½å–å‡ºæ¥ï¼Œä½œä¸ºç‹¬ç«‹çš„æœåŠ¡ï¼Œé€æ¸å½¢æˆç¨³å®šçš„æœåŠ¡ä¸­å¿ƒï¼Œä½¿å‰ç«¯åº”ç”¨èƒ½æ›´å¿«é€Ÿçš„å“åº”å¤šå˜çš„å¸‚åœºéœ€æ±‚ã€‚æ­¤æ—¶ï¼Œç”¨äºæé«˜ä¸šåŠ¡å¤ç”¨åŠæ•´åˆçš„<strong>åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶(RPC)</strong>æ˜¯å…³é”®ã€‚<br><img src="/2020/10/15/dubbo/4.png" alt></p><blockquote><p>æµå¼è®¡ç®—æ¶æ„</p></blockquote><p>å½“æœåŠ¡è¶Šæ¥è¶Šå¤šï¼Œå®¹é‡çš„è¯„ä¼°ï¼Œå°æœåŠ¡èµ„æºçš„æµªè´¹ç­‰é—®é¢˜é€æ¸æ˜¾ç°ï¼Œæ­¤æ—¶éœ€å¢åŠ ä¸€ä¸ªè°ƒåº¦ä¸­å¿ƒåŸºäºè®¿é—®å‹åŠ›å®æ—¶ç®¡ç†é›†ç¾¤å®¹é‡ï¼Œæé«˜é›†ç¾¤åˆ©ç”¨ç‡ã€‚æ­¤æ—¶ï¼Œç”¨äº<strong>æé«˜æœºå™¨åˆ©ç”¨ç‡çš„èµ„æºè°ƒåº¦å’Œæ²»ç†ä¸­å¿ƒ(SOA)[ Service Oriented Architecture]</strong>æ˜¯å…³é”®ã€‚<br><img src="/2020/10/15/dubbo/5.png" alt></p><h2 id="RPC"><a href="#RPC" class="headerlink" title="RPC"></a>RPC</h2><p>Remote Procedure Call æ˜¯æŒ‡è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œæ˜¯è¿›ç¨‹ä¹‹é—´çš„ä¸€ç§é€šè®¯æ–¹å¼ã€‚å®ƒå…è®¸ç¨‹åºè°ƒç”¨å¦ä¸€ä¸ªåœ°å€ç©ºé—´ï¼ˆé€šå¸¸æ˜¯å…±äº«ç½‘ç»œçš„å¦ä¸€å°æœºå™¨ä¸Šï¼‰çš„è¿‡ç¨‹æˆ–å‡½æ•°ï¼Œè€Œä¸ç”¨ç¨‹åºå‘˜æ˜¾å¼ç¼–ç è¿™ä¸ªè¿œç¨‹è°ƒç”¨çš„ç»†èŠ‚ã€‚å³åœ¨AæœåŠ¡å™¨ä¸­è°ƒç”¨BæœåŠ¡å™¨ä¸­çš„ä»£ç ï¼Œæœ¬è´¨ä¸Šç¼–å†™çš„è°ƒç”¨ä»£ç åŸºæœ¬ç›¸åŒï¼ŒRPCæ¡†æ¶å¸®æˆ‘ä»¬å±è”½äº†è°ƒç”¨å®ç°çš„ç»†èŠ‚ã€‚</p><p>è°ƒç”¨çš„è¿‡ç¨‹ï¼š<br><img src="/2020/10/15/dubbo/6.png" alt></p><p>RPCçš„æ ¸å¿ƒæ¨¡å—æ˜¯ï¼šé€šè®¯ï¼Œåºåˆ—åŒ–ã€‚<br>å¸¸è§çš„RPCæ¡†æ¶ï¼šdubboã€gRPCã€Thriftã€HSF</p><h2 id="Dubbo"><a href="#Dubbo" class="headerlink" title="Dubbo"></a>Dubbo</h2><p>Apache Dubbo æ˜¯ä¸€ä¸ªåŸºäºJavaçš„é«˜æ€§èƒ½ï¼Œè½»é‡çº§çš„RPCæ¡†æ¶ã€‚Dubboæä¾›äº†ä¸‰ä¸ªå…³é”®åŠŸèƒ½ï¼ŒåŒ…æ‹¬åŸºäºæ¥å£çš„è¿œç¨‹å‘¼å«ï¼Œå®¹é”™å’Œè´Ÿè½½å¹³è¡¡ä»¥åŠè‡ªåŠ¨æœåŠ¡æ³¨å†Œå’Œå‘ç°ã€‚</p><p>Dubboæ¶æ„ï¼š<br><img src="/2020/10/15/dubbo/7.png" alt></p><p><strong>æœåŠ¡æä¾›è€…ï¼ˆProviderï¼‰</strong>ï¼šæš´éœ²æœåŠ¡çš„æœåŠ¡æä¾›æ–¹ï¼ŒæœåŠ¡æä¾›è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒ<strong>æ³¨å†Œ</strong>è‡ªå·±æä¾›çš„æœåŠ¡ã€‚</p><p><strong>æœåŠ¡æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰</strong>: è°ƒç”¨è¿œç¨‹æœåŠ¡çš„æœåŠ¡æ¶ˆè´¹æ–¹ï¼ŒæœåŠ¡æ¶ˆè´¹è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒ<strong>è®¢é˜…</strong>è‡ªå·±æ‰€éœ€çš„æœåŠ¡ï¼ŒæœåŠ¡æ¶ˆè´¹è€…ä»æä¾›è€…åœ°å€åˆ—è¡¨ä¸­ï¼ŒåŸºäºè½¯è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œé€‰ä¸€å°æä¾›è€…è¿›è¡Œè°ƒç”¨ï¼Œå¦‚æœè°ƒç”¨å¤±è´¥ï¼Œå†é€‰å¦ä¸€å°è°ƒç”¨ã€‚</p><p><strong>æ³¨å†Œä¸­å¿ƒï¼ˆRegistryï¼‰</strong>ï¼šæ³¨å†Œä¸­å¿ƒè¿”å›æœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨ç»™æ¶ˆè´¹è€…ï¼Œå¦‚æœæœ‰å˜æ›´ï¼Œæ³¨å†Œä¸­å¿ƒå°†åŸºäºé•¿è¿æ¥æ¨é€å˜æ›´æ•°æ®ç»™æ¶ˆè´¹è€….</p><p><strong>ç›‘æ§ä¸­å¿ƒï¼ˆMonitorï¼‰</strong>ï¼šæœåŠ¡æ¶ˆè´¹è€…å’Œæä¾›è€…ï¼Œåœ¨å†…å­˜ä¸­ç´¯è®¡è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´ï¼Œå®šæ—¶æ¯åˆ†é’Ÿå‘é€ä¸€æ¬¡ç»Ÿè®¡æ•°æ®åˆ°ç›‘æ§ä¸­å¿ƒã€‚</p><h2 id="è°ƒç”¨è¿‡ç¨‹"><a href="#è°ƒç”¨è¿‡ç¨‹" class="headerlink" title="è°ƒç”¨è¿‡ç¨‹"></a>è°ƒç”¨è¿‡ç¨‹</h2><img src="/2020/10/15/dubbo/8.png" style="zoom:80%;">]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Dubbo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å•ä¾‹è®¾è®¡æ¨¡å¼</title>
      <link href="2020/10/09/designModel-02/"/>
      <url>2020/10/09/designModel-02/</url>
      
        <content type="html"><![CDATA[<p>è®¾è®¡æ¨¡å¼åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼šåˆ›å»ºå‹æ¨¡å¼ã€ç»“æ„å‹æ¨¡å¼ã€è¡Œä¸ºå‹æ¨¡å¼ï¼Œå…±23ç§ã€‚</p><h2 id="å•ä¾‹è®¾è®¡æ¨¡å¼"><a href="#å•ä¾‹è®¾è®¡æ¨¡å¼" class="headerlink" title="å•ä¾‹è®¾è®¡æ¨¡å¼"></a>å•ä¾‹è®¾è®¡æ¨¡å¼</h2><p>å•ä¾‹è®¾è®¡æ¨¡å¼å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œå°±æ˜¯é‡‡å–ä¸€å®šçš„æ–¹æ³•ä¿è¯æ•´ä¸ªè½¯ä»¶ç³»ç»Ÿä¸­ï¼Œå¯¹æŸä¸ªç±»åªèƒ½å­˜åœ¨ä¸€ä¸ªå¯¹è±¡å®ä¾‹ï¼Œå¹¶ä¸”è¯¥ç±»åªæä¾›ä¸€ä¸ªè·å–è¯¥å¯¹è±¡å®ä¾‹çš„æ–¹æ³•(é™æ€æ–¹æ³•)ã€‚</p><h3 id="å•ä¾‹æ¨¡å¼çš„å‡ ç§å†™æ³•"><a href="#å•ä¾‹æ¨¡å¼çš„å‡ ç§å†™æ³•" class="headerlink" title="å•ä¾‹æ¨¡å¼çš„å‡ ç§å†™æ³•"></a>å•ä¾‹æ¨¡å¼çš„å‡ ç§å†™æ³•</h3><h4 id="é¥¿æ±‰å¼ï¼ˆé™æ€å¸¸é‡ï¼‰"><a href="#é¥¿æ±‰å¼ï¼ˆé™æ€å¸¸é‡ï¼‰" class="headerlink" title="é¥¿æ±‰å¼ï¼ˆé™æ€å¸¸é‡ï¼‰"></a>é¥¿æ±‰å¼ï¼ˆé™æ€å¸¸é‡ï¼‰</h4><p>æ­¥éª¤ï¼š<br>1ã€æ„é€ å™¨ç§æœ‰åŒ–ï¼›<br>2ã€ç±»å†…éƒ¨åˆ›å»ºä¸€ä¸ªé™æ€çš„å¯¹è±¡å®ä¾‹å¹¶ç§æœ‰åŒ–ï¼›<br>3ã€å¯¹å¤–æš´éœ²ä¸€ä¸ªé™æ€çš„å…¬å…±æ–¹æ³•getInstance()</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SingletonTest1</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Singleton instance1 <span class="token operator">=</span> Singleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Singleton instance2 <span class="token operator">=</span> Singleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>instance1<span class="token operator">==</span>instance2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Singleton</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// ç§æœ‰åŒ–æ„é€ å™¨</span>    <span class="token keyword">private</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// åˆ›å»ºé™æ€å®ä¾‹å¯¹è±¡</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> Singleton singleton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å¯¹å¤–æš´éœ²è·å–å®ä¾‹çš„é™æ€æ–¹æ³•</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Singleton <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> singleton<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>ä¼˜ç‚¹ï¼šåœ¨ç±»è£…è½½æ—¶å°±å®Œæˆäº†å¯¹è±¡çš„å®ä¾‹åŒ–ï¼Œé¿å…äº†çº¿ç¨‹åŒæ­¥é—®é¢˜ã€‚<br>ç¼ºç‚¹ï¼šç”±äºåœ¨ç±»åŠ è½½æ—¶å°±å®Œæˆäº†ç±»çš„å®ä¾‹åŒ–ï¼Œæ²¡æœ‰è¾¾åˆ°æ‡’åŠ è½½çš„æ•ˆæœï¼Œå¦‚æœè¿™ä¸ªå®ä¾‹å¯¹è±¡ä¸€ç›´æ²¡æœ‰ä½¿ç”¨è¿‡ï¼Œå°±ä¼šé€ æˆå†…å­˜çš„æµªè´¹ã€‚</p><h4 id="é¥¿æ±‰å¼ï¼ˆé™æ€ä»£ç å—ï¼‰"><a href="#é¥¿æ±‰å¼ï¼ˆé™æ€ä»£ç å—ï¼‰" class="headerlink" title="é¥¿æ±‰å¼ï¼ˆé™æ€ä»£ç å—ï¼‰"></a>é¥¿æ±‰å¼ï¼ˆé™æ€ä»£ç å—ï¼‰</h4><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>singleton<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SingletonTest2</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Singleton instance1 <span class="token operator">=</span> Singleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Singleton instance2 <span class="token operator">=</span> Singleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>instance1<span class="token operator">==</span>instance2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Singleton</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// ç§æœ‰åŒ–æ„é€ å™¨</span>    <span class="token keyword">private</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// åˆ›å»ºé™æ€å¯¹è±¡</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> Singleton singleton<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// åœ¨é™æ€ä»£ç å—ä¸­å®ä¾‹åŒ–å¯¹è±¡</span>    <span class="token keyword">static</span> <span class="token punctuation">{</span>        singleton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// å¯¹å¤–æš´éœ²è·å–å®ä¾‹çš„é™æ€æ–¹æ³•</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Singleton <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> singleton<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="æ‡’æ±‰å¼ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰"><a href="#æ‡’æ±‰å¼ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰" class="headerlink" title="æ‡’æ±‰å¼ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰"></a>æ‡’æ±‰å¼ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰</h4><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SingletonTest3</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Singleton instance1 <span class="token operator">=</span> Singleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Singleton instance2 <span class="token operator">=</span> Singleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>instance1<span class="token operator">==</span>instance2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Singleton</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// ç§æœ‰åŒ–æ„é€ å™¨</span>    <span class="token keyword">private</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// ç§æœ‰åŒ–é™æ€å˜é‡</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> Singleton singleton<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// æš´éœ²è·å–å®ä¾‹å¯¹è±¡çš„é™æ€æ–¹æ³•ï¼Œä½¿ç”¨è¯¥æ–¹æ³•æ‰åˆ›å»ºå¯¹è±¡</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Singleton <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// å¯¹è±¡å®ä¾‹ä¸å­˜åœ¨å°±åˆ›å»ºï¼Œå¦åˆ™ç›´æ¥è¿”å›</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>singleton<span class="token operator">==</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>            singleton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> singleton<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>è¾¾åˆ°äº†æ‡’åŠ è½½çš„æ•ˆæœï¼Œä½†æ˜¯å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯èƒ½ä¼šåˆ›å»ºå¤šä¸ªå¯¹è±¡å®ä¾‹ã€‚</p><h4 id="æ‡’æ±‰å¼ï¼ˆçº¿ç¨‹å®‰å…¨ï¼ŒåŒæ­¥æ–¹æ³•ï¼‰"><a href="#æ‡’æ±‰å¼ï¼ˆçº¿ç¨‹å®‰å…¨ï¼ŒåŒæ­¥æ–¹æ³•ï¼‰" class="headerlink" title="æ‡’æ±‰å¼ï¼ˆçº¿ç¨‹å®‰å…¨ï¼ŒåŒæ­¥æ–¹æ³•ï¼‰"></a>æ‡’æ±‰å¼ï¼ˆçº¿ç¨‹å®‰å…¨ï¼ŒåŒæ­¥æ–¹æ³•ï¼‰</h4><p>ä½¿ç”¨<code>synchronized</code>å…³é”®å­—ä¿®é¥°getInstance()æ–¹æ³•</p><h4 id="åŒé‡æ£€æŸ¥"><a href="#åŒé‡æ£€æŸ¥" class="headerlink" title="åŒé‡æ£€æŸ¥"></a>åŒé‡æ£€æŸ¥</h4><p>è§£å†³äº†çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œæ‡’åŠ è½½é—®é¢˜ï¼ŒåŒæ—¶ä¿è¯äº†æ•ˆç‡ï¼Œåœ¨å®é™…å¼€å‘ä¸­æ¨èä½¿ç”¨ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SingletonTest4</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Singleton instance1 <span class="token operator">=</span> Singleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Singleton instance2 <span class="token operator">=</span> Singleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>instance1 <span class="token operator">==</span> instance2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// ç§æœ‰åŒ–æ„é€ å™¨</span>    <span class="token keyword">private</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// ç§æœ‰åŒ–é™æ€å˜é‡</span>    <span class="token comment" spellcheck="true">// ä½¿ç”¨volatileä¿è¯å˜é‡åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„å¯è§æ€§</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> Singleton singleton<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// æš´éœ²è·å–å®ä¾‹å¯¹è±¡çš„é™æ€æ–¹æ³•ï¼Œä½¿ç”¨è¯¥æ–¹æ³•æ‰åˆ›å»ºå¯¹è±¡</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Singleton <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åŒé‡æ£€æŸ¥ï¼Œå¯¹è±¡å®ä¾‹ä¸å­˜åœ¨å°±åˆ›å»ºï¼Œå¦åˆ™ç›´æ¥è¿”å›</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>singleton <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>Singleton<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>singleton <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    singleton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> singleton<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="é™æ€å†…éƒ¨ç±»"><a href="#é™æ€å†…éƒ¨ç±»" class="headerlink" title="é™æ€å†…éƒ¨ç±»"></a>é™æ€å†…éƒ¨ç±»</h4><p>é™æ€å†…éƒ¨ç±»ä¸ä¼šè‡ªåŠ¨åŠ è½½ï¼Œåªæœ‰è°ƒç”¨é™æ€å†…éƒ¨ç±»çš„æ–¹æ³•ï¼Œé™æ€åŸŸï¼Œæˆ–è€…æ„é€ æ–¹æ³•çš„æ—¶å€™æ‰ä¼šåŠ è½½ï¼Œå¹¶ä¸”åªåŠ è½½ä¸€æ¬¡ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SingletonTest5</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Singleton instance1 <span class="token operator">=</span> Singleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Singleton instance2 <span class="token operator">=</span> Singleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>instance1 <span class="token operator">==</span> instance2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// ç§æœ‰åŒ–æ„é€ å™¨</span>    <span class="token keyword">private</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// ä½¿ç”¨é™æ€å†…éƒ¨ç±»ï¼Œæä¾›ä¸€ä¸ªå®ä¾‹</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonInstance</span><span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> Singleton INSTANCE <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// æš´éœ²è·å–å®ä¾‹å¯¹è±¡çš„é™æ€æ–¹æ³•ï¼Œä½¿ç”¨è¯¥æ–¹æ³•æ‰åŠ è½½é™æ€å†…éƒ¨ç±»ï¼Œå¹¶è¿”å›ä¸€ä¸ªå®ä¾‹å¯¹è±¡</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Singleton <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> SingletonInstance<span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="æšä¸¾"><a href="#æšä¸¾" class="headerlink" title="æšä¸¾"></a>æšä¸¾</h4><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SingletonTest6</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Singleton instance1 <span class="token operator">=</span> Singleton<span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>        Singleton instance2 <span class="token operator">=</span> Singleton<span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>instance1 <span class="token operator">==</span> instance2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">enum</span> Singleton <span class="token punctuation">{</span>    INSTANCE<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="å•ä¾‹æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯"><a href="#å•ä¾‹æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="å•ä¾‹æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯"></a>å•ä¾‹æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯</h3><ul><li>éœ€è¦é¢‘ç¹åˆ›å»ºå’Œé”€æ¯çš„å¯¹è±¡</li><li>åˆ›å»ºå¯¹è±¡æ—¶è€—æ—¶è¿‡å¤šæˆ–è€—è´¹èµ„æºè¿‡å¤š</li><li>å·¥å…·ç±»å¯¹è±¡</li><li>é¢‘ç¹è®¿é—®æ•°æ®åº“æˆ–æ–‡ä»¶çš„å¯¹è±¡ï¼ˆæ¯”å¦‚æ•°æ®æºã€sessionå·¥å‚ç­‰ï¼‰</li></ul>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¸ƒå¤§åŸåˆ™</title>
      <link href="2020/10/07/designModel-01/"/>
      <url>2020/10/07/designModel-01/</url>
      
        <content type="html"><![CDATA[<h2 id="è®¾è®¡æ¨¡å¼ä¸ƒå¤§åŸåˆ™"><a href="#è®¾è®¡æ¨¡å¼ä¸ƒå¤§åŸåˆ™" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¸ƒå¤§åŸåˆ™"></a>è®¾è®¡æ¨¡å¼ä¸ƒå¤§åŸåˆ™</h2><h3 id="å•ä¸€èŒè´£åŸåˆ™"><a href="#å•ä¸€èŒè´£åŸåˆ™" class="headerlink" title="å•ä¸€èŒè´£åŸåˆ™"></a>å•ä¸€èŒè´£åŸåˆ™</h3><p>å¯¹ä¸€ä¸ªç±»æ¥è¯´ï¼Œä¸€ä¸ªç±»åº”è¯¥åªè´Ÿè´£ä¸€é¡¹èŒè´£ã€‚ä¾‹å¦‚daoä¸­çš„UserDaoï¼ŒOrderDaoç­‰ç­‰ã€‚</p><h3 id="æ¥å£éš”ç¦»åŸåˆ™"><a href="#æ¥å£éš”ç¦»åŸåˆ™" class="headerlink" title="æ¥å£éš”ç¦»åŸåˆ™"></a>æ¥å£éš”ç¦»åŸåˆ™</h3><p>ä¸€ä¸ªç±»å¯¹äºå¦ä¸€ä¸ªç±»çš„ä¾èµ–åº”è¯¥å»ºç«‹åœ¨æœ€å°æ¥å£ä¸Šï¼Œå³ å°†å…·æœ‰å¤šä¸ªåŠŸèƒ½çš„æ¥å£æ‹†åˆ†ä¸ºå¤šä¸ªæ¥å£ã€‚</p><h3 id="ä¾èµ–å€’è½¬åŸåˆ™"><a href="#ä¾èµ–å€’è½¬åŸåˆ™" class="headerlink" title="ä¾èµ–å€’è½¬åŸåˆ™"></a>ä¾èµ–å€’è½¬åŸåˆ™</h3><p>é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–äºä½å±‚æ¨¡å—ï¼ŒäºŒè€…éƒ½åº”è¯¥ä¾èµ–å…¶æŠ½è±¡ç±»ã€‚<br>ä¾èµ–å€’è½¬çš„ä¸­å¿ƒæ€æƒ³æ˜¯é¢å‘æ¥å£ç¼–ç¨‹ã€‚ä½¿ç”¨æ¥å£æˆ–æŠ½è±¡ç±»å®šåˆ¶å·è§„èŒƒï¼Œè€Œä¸æ¶‰åŠå…·ä½“çš„æ“ä½œï¼Œå°†å…·ä½“çš„æ“ä½œäº¤ç»™å…¶å®ç°ç±»å»å®ç°ã€‚</p><p>ä¾èµ–å…³ç³»çš„ä¸‰ç§ä¼ é€’æ–¹å¼ï¼š</p><ul><li><p>æ¥å£ä¼ é€’</p><pre class=" language-java"><code class="language-java">  <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DependencyPass1</span> <span class="token punctuation">{</span>      <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>          InternetTV internetTV <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InternetTV</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          OpenAndClose openAndClose <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OpenAndCloseImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          openAndClose<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>internetTV<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// å®ä½“æ¥å£</span>  <span class="token keyword">interface</span> <span class="token class-name">TV</span> <span class="token punctuation">{</span>      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// åŠŸèƒ½æ¥å£</span>  <span class="token keyword">interface</span> <span class="token class-name">OpenAndClose</span> <span class="token punctuation">{</span>      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">open</span><span class="token punctuation">(</span>TV tv<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æ¥æ”¶æ¥å£</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// å®ç°å®ä½“æ¥å£</span>  <span class="token keyword">class</span> <span class="token class-name">InternetTV</span> <span class="token keyword">implements</span> <span class="token class-name">TV</span> <span class="token punctuation">{</span>      <span class="token annotation punctuation">@Override</span>      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"InternetTVä¸­çš„play()è¢«è°ƒç”¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// å®ç°åŠŸèƒ½æ¥å£</span>  <span class="token keyword">class</span> <span class="token class-name">OpenAndCloseImpl</span> <span class="token keyword">implements</span> <span class="token class-name">OpenAndClose</span> <span class="token punctuation">{</span>      <span class="token annotation punctuation">@Override</span>      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">open</span><span class="token punctuation">(</span>TV tv<span class="token punctuation">)</span> <span class="token punctuation">{</span>          tv<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>  <span class="token punctuation">}</span></code></pre></li><li><p>æ„é€ å™¨ä¼ é€’</p><pre class=" language-java"><code class="language-java">  <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DependencyPass2</span> <span class="token punctuation">{</span>      <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>          InternetTV internetTV <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InternetTV</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          OpenAndClose openAndClose <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OpenAndCloseImpl</span><span class="token punctuation">(</span>internetTV<span class="token punctuation">)</span><span class="token punctuation">;</span>          openAndClose<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// å®ä½“æ¥å£</span>  <span class="token keyword">interface</span> <span class="token class-name">TV</span> <span class="token punctuation">{</span>      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// åŠŸèƒ½æ¥å£</span>  <span class="token keyword">interface</span> <span class="token class-name">OpenAndClose</span> <span class="token punctuation">{</span>      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// å®ç°å®ä½“æ¥å£</span>  <span class="token keyword">class</span> <span class="token class-name">InternetTV</span> <span class="token keyword">implements</span> <span class="token class-name">TV</span> <span class="token punctuation">{</span>      <span class="token annotation punctuation">@Override</span>      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"InternetTVä¸­çš„play()è¢«è°ƒç”¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// å®ç°åŠŸèƒ½æ¥å£</span>  <span class="token comment" spellcheck="true">// é€šè¿‡æ„é€ æ–¹æ³•æ¥æ”¶æ¥å£</span>  <span class="token keyword">class</span> <span class="token class-name">OpenAndCloseImpl</span> <span class="token keyword">implements</span> <span class="token class-name">OpenAndClose</span> <span class="token punctuation">{</span>      <span class="token keyword">private</span> TV tv<span class="token punctuation">;</span>      <span class="token keyword">public</span> <span class="token function">OpenAndCloseImpl</span><span class="token punctuation">(</span>TV tv<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>tv <span class="token operator">=</span> tv<span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token annotation punctuation">@Override</span>      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          tv<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>  <span class="token punctuation">}</span></code></pre></li><li><p>setteræ–¹å¼ä¼ é€’</p><pre class=" language-java"><code class="language-java">  <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DependencyPass3</span> <span class="token punctuation">{</span>      <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>          InternetTV internetTV <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InternetTV</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          OpenAndCloseImpl openAndClose <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OpenAndCloseImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          openAndClose<span class="token punctuation">.</span><span class="token function">setTv</span><span class="token punctuation">(</span>internetTV<span class="token punctuation">)</span><span class="token punctuation">;</span>          openAndClose<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// å®ä½“æ¥å£</span>  <span class="token keyword">interface</span> <span class="token class-name">TV</span> <span class="token punctuation">{</span>      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// åŠŸèƒ½æ¥å£</span>  <span class="token keyword">interface</span> <span class="token class-name">OpenAndClose</span> <span class="token punctuation">{</span>      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// å®ç°å®ä½“æ¥å£</span>  <span class="token keyword">class</span> <span class="token class-name">InternetTV</span> <span class="token keyword">implements</span> <span class="token class-name">TV</span> <span class="token punctuation">{</span>      <span class="token annotation punctuation">@Override</span>      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"InternetTVä¸­çš„play()è¢«è°ƒç”¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// å®ç°åŠŸèƒ½æ¥å£</span>  <span class="token comment" spellcheck="true">// é€šè¿‡setteræ–¹æ³•æ¥æ”¶æ¥å£</span>  <span class="token keyword">class</span> <span class="token class-name">OpenAndCloseImpl</span> <span class="token keyword">implements</span> <span class="token class-name">OpenAndClose</span> <span class="token punctuation">{</span>      <span class="token keyword">private</span> TV tv<span class="token punctuation">;</span>      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTv</span><span class="token punctuation">(</span>TV tv<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>tv <span class="token operator">=</span> tv<span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token annotation punctuation">@Override</span>      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          tv<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>  <span class="token punctuation">}</span></code></pre></li></ul><h3 id="é‡Œæ°æ›¿æ¢åŸåˆ™"><a href="#é‡Œæ°æ›¿æ¢åŸåˆ™" class="headerlink" title="é‡Œæ°æ›¿æ¢åŸåˆ™"></a>é‡Œæ°æ›¿æ¢åŸåˆ™</h3><p>è®©åŸæ¥çš„å­ç±»å’Œçˆ¶ç±»éƒ½ç»§æ‰¿ä¸€ä¸ªé€šç”¨çš„åŸºç±»ï¼ŒåŸæœ‰çš„ç»§æ‰¿å…³ç³»å»æ‰ï¼Œé‡‡ç”¨ä¾èµ–ï¼Œèšåˆï¼Œç»„åˆç­‰å…³ç³»ä»£æ›¿ã€‚</p><h3 id="å¼€é—­åŸåˆ™"><a href="#å¼€é—­åŸåˆ™" class="headerlink" title="å¼€é—­åŸåˆ™"></a>å¼€é—­åŸåˆ™</h3><p>å¯¹æ‰©å±•å¼€æ”¾ï¼Œä¿®æ”¹å…³é—­ã€‚<br>ä½¿ç”¨æŠ½è±¡ç±»æä¾›æ¨¡æ¿ï¼Œåœ¨è¿›è¡Œæ‹“å±•æ—¶ï¼Œç»§æ‰¿æŠ½è±¡ç±»å®ç°å…·ä½“çš„æ–¹æ³•å³å¯ã€‚</p><h3 id="è¿ªç±³ç‰¹æ³•åˆ™"><a href="#è¿ªç±³ç‰¹æ³•åˆ™" class="headerlink" title="è¿ªç±³ç‰¹æ³•åˆ™"></a>è¿ªç±³ç‰¹æ³•åˆ™</h3><p>ä¸€ä¸ªå¯¹è±¡åº”è¯¥å¯¹å…¶ä»–å¯¹è±¡ä¿æŒæœ€å°‘çš„äº†è§£ï¼Œç”¨æ¥é™ä½ç¨‹åºä¹‹é—´çš„è€¦åˆåº¦ã€‚</p><h3 id="åˆæˆå¤ç”¨åŸåˆ™"><a href="#åˆæˆå¤ç”¨åŸåˆ™" class="headerlink" title="åˆæˆå¤ç”¨åŸåˆ™"></a>åˆæˆå¤ç”¨åŸåˆ™</h3><p>å°½é‡ä½¿ç”¨åˆæˆæˆ–èšåˆå…³ç³»ï¼Œå°‘ä½¿ç”¨ç»§æ‰¿å…³ç³»ã€‚</p><h2 id="ç±»çš„å…³ç³»"><a href="#ç±»çš„å…³ç³»" class="headerlink" title="ç±»çš„å…³ç³»"></a>ç±»çš„å…³ç³»</h2><h3 id="ä¾èµ–å…³ç³»-Dependency"><a href="#ä¾èµ–å…³ç³»-Dependency" class="headerlink" title="ä¾èµ–å…³ç³» Dependency"></a>ä¾èµ–å…³ç³» Dependency</h3><p>åªè¦æ˜¯åœ¨ç±»ä¸­ä½¿ç”¨åˆ°äº†å¯¹æ–¹ï¼Œä»–ä»¬ä¹‹é—´å°±å­˜åœ¨ä¾èµ–å…³ç³»ã€‚<br><img src="/2020/10/07/designModel-01/1.png" alt></p><p>Aä¾èµ–äºBï¼ŒAä½œä¸ºç®­å¤´çš„èµ·ç‚¹ï¼Œå³ç®­å¤´ä»ä¸»è¯­å¼€å§‹ï¼ŒæŒ‡å‘å®¾è¯­ã€‚æ‰€æœ‰çš„å…³ç³»éƒ½æ˜¯è¿™æ ·å­çš„ï¼</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PersonServiceBean</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> PersonDao personDao<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span>Person person<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">public</span> IDCard <span class="token function">getIDCard</span><span class="token punctuation">(</span>Integer personId<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">modify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        Department department <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Department</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PersonDao</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IDcard</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Department</span><span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><h3 id="æ³›åŒ–å…³ç³»-Generalization"><a href="#æ³›åŒ–å…³ç³»-Generalization" class="headerlink" title="æ³›åŒ–å…³ç³» Generalization"></a>æ³›åŒ–å…³ç³» Generalization</h3><p>å°±æ˜¯ç»§æ‰¿å…³ç³»ï¼Œå®ƒæ˜¯ä¾èµ–å…³ç³»çš„ç‰¹ä¾‹ã€‚<br><img src="/2020/10/07/designModel-01/2.png" alt></p><h3 id="å®ç°å…³ç³»-Realization"><a href="#å®ç°å…³ç³»-Realization" class="headerlink" title="å®ç°å…³ç³» Realization"></a>å®ç°å…³ç³» Realization</h3><p>å°±æ˜¯Aç±»å®ç°Bç±»ï¼Œä¹Ÿæ˜¯ä¾èµ–å…³ç³»çš„ç‰¹ä¾‹<br><img src="/2020/10/07/designModel-01/3.png" alt></p><h3 id="å…³è”å…³ç³»-Association"><a href="#å…³è”å…³ç³»-Association" class="headerlink" title="å…³è”å…³ç³» Association"></a>å…³è”å…³ç³» Association</h3><p>ç±»ä¸ç±»ä¹‹é—´çš„è”ç³»ï¼Œä¹Ÿæ˜¯ä¾èµ–å…³ç³»çš„ç‰¹ä¾‹ã€‚<br>å…³è”å…·æœ‰å¯¼èˆªæ€§ï¼Œå³å•å‘æˆ–åŒå‘ã€‚<br>å…³è”å…·æœ‰å¤šé‡æ€§ï¼Œä¸€å¯¹ä¸€æˆ–ä¸€å¯¹å¤š</p><p>å•å‘ä¸€å¯¹ä¸€ï¼š<br><img src="/2020/10/07/designModel-01/4.png" alt></p><p>åŒå‘ä¸€å¯¹ä¸€ï¼š<br><img src="/2020/10/07/designModel-01/5.png" alt></p><h3 id="èšåˆå…³ç³»-Aggregation"><a href="#èšåˆå…³ç³»-Aggregation" class="headerlink" title="èšåˆå…³ç³» Aggregation"></a>èšåˆå…³ç³» Aggregation</h3><p>è¡¨ç¤ºæ•´ä½“å’Œå±€éƒ¨ä¹‹é—´çš„å…³ç³»ï¼Œæ•´ä½“å’Œå±€éƒ¨å¯ä»¥åˆ†å¼€ï¼Œæ˜¯å…³è”å…³ç³»çš„ç‰¹ä¾‹ã€‚</p><blockquote><p>Moniterã€MouseèšåˆäºComputer<br><img src="/2020/10/07/designModel-01/6.png" alt></p></blockquote><h3 id="ç»„åˆå…³ç³»-Composition"><a href="#ç»„åˆå…³ç³»-Composition" class="headerlink" title="ç»„åˆå…³ç³» Composition"></a>ç»„åˆå…³ç³» Composition</h3><p>å¦‚æœèšåˆå…³ç³»ä¸­æ•´ä½“å’Œå±€éƒ¨æ˜¯ä¸å¯åˆ†å¼€çš„ï¼Œå°±å‡çº§ä¸ºç»„åˆå…³ç³»ã€‚<br><img src="/2020/10/07/designModel-01/7.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NIO</title>
      <link href="2020/09/09/nio/"/>
      <url>2020/09/09/nio/</url>
      
        <content type="html"><![CDATA[<h2 id="NIOç®€ä»‹"><a href="#NIOç®€ä»‹" class="headerlink" title="NIOç®€ä»‹"></a>NIOç®€ä»‹</h2><p>Java NIO æ˜¯ä»jdk1.4å¼€å§‹å¼•å…¥çš„ä¸€ä¸ªæ–°çš„IO API ,å¯ä»¥å®Œå…¨ä»£æ›¿æ ‡å‡†çš„IO APIã€‚NIOä¸åŸæ¥çš„IOæœ‰åŒæ ·çš„ä½œç”¨å’Œç›®çš„ï¼Œä½†æ˜¯ä½¿ç”¨æ–¹å¼å®Œå…¨ä¸åŒï¼ŒNIOæ”¯æŒ<strong>é¢å‘ç¼“å†²åŒº</strong>çš„ã€åŸºäºé€šé“çš„IOæ“ä½œï¼Œè¯»å†™æ“ä½œæ›´åŠ é«˜æ•ˆã€‚<a id="more"></a></p><p><strong>IOä¸NIOçš„åŒºåˆ«ï¼š</strong><br><img src="/2020/09/09/nio/1.png" style="zoom:80%;"></p><p>NIOç³»ç»Ÿçš„æ ¸å¿ƒåœ¨äºï¼šé€šé“ï¼ˆChannelï¼‰å’Œç¼“å†²åŒºï¼ˆBufferï¼‰ã€‚é€šé“è¡¨ç¤ºæ‰“å¼€åˆ°IOè®¾å¤‡ï¼ˆæ–‡ä»¶ã€å¥—æ¥å­—ç­‰ï¼‰çš„è¿æ¥ï¼Œç¼“å†²åŒºè´Ÿè´£æš‚æ—¶å­˜æ”¾ä¼ è¾“æ•°æ®ã€‚<br><font color="red">ç®€è€Œè¨€ä¹‹ï¼ŒChannelè´Ÿè´£ä¼ è¾“ï¼ŒBufferè´Ÿè´£å­˜å‚¨ã€‚</font></p><h2 id="Bufferå­˜å–æ•°æ®"><a href="#Bufferå­˜å–æ•°æ®" class="headerlink" title="Bufferå­˜å–æ•°æ®"></a>Bufferå­˜å–æ•°æ®</h2><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * ä¸€ã€Bufferåœ¨NIOä¸­è´Ÿè´£æ•°æ®çš„å­˜å–ã€‚ç¼“å­˜åŒºå°±æ˜¯æ•°ç»„ï¼Œç”¨äºå­˜å‚¨ä¸åŒç±»å‹çš„æ•°æ® * æ ¹æ®æ•°æ®ç±»å‹ä¸åŒ booleané™¤å¤– * ByteBuffer * CharBuffer * ShortBuffer * IntBuffer * LongBuffer * FloatBuffer * DoubleBuffer * éƒ½é€šè¿‡allocate() è·å–ç¼“å†²åŒº * * äºŒã€Bufferå­˜å–æ•°æ®çš„æ ¸å¿ƒæ–¹æ³• * put():å­˜ * get():å– * * ä¸‰ã€Bufferå››ä¸ªæ ¸å¿ƒå±æ€§ * capacity:å®¹é‡ï¼Œè¡¨ç¤ºç¼“å†²åŒºä¸­å­˜å‚¨æ•°æ®çš„æœ€å¤§å®¹é‡ï¼Œä¸€æ—¦å£°æ˜ä¸å¯æ”¹å˜ * limit:ç•Œé™ï¼Œè¡¨ç¤ºç¼“å†²åŒºå¯ä»¥æ“ä½œæ•°æ®çš„å¤§å°ï¼Œlimitåçš„æ•°æ®ä¸å¯æ“ä½œ * position:ä½ç½®ï¼Œè¡¨ç¤ºç¼“å†²åŒºæ­£åœ¨æ“ä½œæ•°æ®çš„ä½ç½® * mark:æ ‡è®°ï¼Œè®°å½•å½“å‰ positionçš„ä½ç½®ï¼Œå¯é€šè¿‡ resetæ¢å¤åˆ° markä½ç½® * 0&lt;=mark&lt;=position&lt;=limit&lt;=capacity */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BufferTest</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 1ã€åˆ†é…æŒ‡å®šå¤§å°çš„ç¼“å†²åŒº</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"-------allocate--------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ByteBuffer buffer <span class="token operator">=</span> ByteBuffer<span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 0</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 1024</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 1024</span>        <span class="token comment" spellcheck="true">// 2ã€åˆ©ç”¨put()å­˜å…¥æ•°æ®åˆ°ç¼“å†²åŒº</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"----------put----------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String str <span class="token operator">=</span> <span class="token string">"abcde"</span><span class="token punctuation">;</span>        buffer<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 5</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 1024</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 1024</span>        <span class="token comment" spellcheck="true">// 3ã€åˆ‡æ¢è¯»å–æ•°æ®æ¨¡å¼</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"----------flip----------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        buffer<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 0</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 5</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 1024</span>        <span class="token comment" spellcheck="true">// 4ã€åˆ©ç”¨get()è¯»å–æ•°æ®</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"----------get-----------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span>buffer<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        buffer<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>dest<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 5</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 5</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 1024</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¯»å–çš„æ•°æ®ï¼š"</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>dest<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>dest<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 5ã€rewind():å¯é‡å¤è¯»å–æ•°æ® å°†æ ¸å¿ƒå±æ€§æ¢å¤åˆ°è¯»ä¹‹å‰çš„çŠ¶æ€</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"---------rewind---------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        buffer<span class="token punctuation">.</span><span class="token function">rewind</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 0</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 5</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 1024</span>        <span class="token comment" spellcheck="true">// 6ã€clear():æ¸…ç©ºç¼“å†²åŒºï¼Œä½†æ˜¯æ•°æ®è¿˜åœ¨ï¼Œå¤„äºè¢«é—å¿˜çš„çŠ¶æ€</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"---------clear---------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        buffer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 0</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 1024</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 1024</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        String str <span class="token operator">=</span> <span class="token string">"abcde"</span><span class="token punctuation">;</span>        ByteBuffer buffer <span class="token operator">=</span> ByteBuffer<span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        buffer<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        buffer<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span>buffer<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        buffer<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>dest<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¯»å–åˆ°çš„å­—ç¬¦ä¸²:"</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>dest<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>dest<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ab</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"position:"</span><span class="token operator">+</span>buffer<span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 2</span>        <span class="token comment" spellcheck="true">// æ ‡è®°position</span>        buffer<span class="token punctuation">.</span><span class="token function">mark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/**         *  buffer.get(dest,2,2);         *  System.out.println("è¯»å–åˆ°çš„å­—ç¬¦ä¸²:"+new String(dest,0,dest.length));// acbd         */</span>        buffer<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>dest<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¯»å–åˆ°çš„å­—ç¬¦ä¸²:"</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>dest<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>dest<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// cd</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"position:"</span><span class="token operator">+</span>buffer<span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 4</span>        <span class="token comment" spellcheck="true">// reseté‡ç½®  å°†positionæ¢å¤åˆ°markæ—¶çš„ä½ç½®</span>        buffer<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"position:"</span><span class="token operator">+</span>buffer<span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 2</span>        <span class="token comment" spellcheck="true">// åˆ¤æ–­ç¼“å†²åŒºæ˜¯å¦è¿˜æœ‰å‰©ä½™æ•°æ®</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">hasRemaining</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// è¾“å‡ºå‰©ä½™æ•°æ®çš„ä¸ªæ•°</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">remaining</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 3</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="ç›´æ¥ç¼“å†²åŒºå’Œéç›´æ¥ç¼“å†²åŒº"><a href="#ç›´æ¥ç¼“å†²åŒºå’Œéç›´æ¥ç¼“å†²åŒº" class="headerlink" title="ç›´æ¥ç¼“å†²åŒºå’Œéç›´æ¥ç¼“å†²åŒº"></a>ç›´æ¥ç¼“å†²åŒºå’Œéç›´æ¥ç¼“å†²åŒº</h2><p>éç›´æ¥ç¼“å†²åŒºï¼šé€šè¿‡allocate()æ–¹æ³•åˆ†é…ç¼“å†²åŒºï¼Œå°†ç¼“å†²åŒºå»ºç«‹åœ¨JVMçš„å†…å­˜ä¸­</p><p>ç›´æ¥ç¼“å†²åŒºï¼šé€šè¿‡allocateDirect()æ–¹æ³•åˆ†é…ï¼Œå°†ç¼“å†²åŒºç›´æ¥å»ºç«‹åœ¨ç‰©ç†å†…å­˜ä¸­ã€‚å¯ä»¥æé«˜æ•ˆç‡ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ByteBuffer buffer <span class="token operator">=</span> ByteBuffer<span class="token punctuation">.</span><span class="token function">allocateDirect</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// åˆ¤æ–­æ˜¯å¦ä¸ºç›´æ¥ç¼“å†²åŒº</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">isDirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span><span class="token punctuation">}</span></code></pre><h2 id="Channelä¼ è¾“æ•°æ®"><a href="#Channelä¼ è¾“æ•°æ®" class="headerlink" title="Channelä¼ è¾“æ•°æ®"></a>Channelä¼ è¾“æ•°æ®</h2><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * ä¸€ã€Channelç”¨äºæºèŠ‚ç‚¹ä¸ç›®æ ‡èŠ‚ç‚¹çš„è¿æ¥ï¼Œè´Ÿè´£ç¼“å†²åŒºä¸­æ•°æ®çš„ä¼ è¾“ * äºŒã€ä¸»è¦å®ç°ç±»ï¼š * FileChannel * SocketChannel * ServerSocketChannel * DatagramChannel * ä¸‰ã€è·å–é€šé“ * 1ã€Javaé’ˆå¯¹æ”¯æŒé€šé“çš„ç±»æä¾›äº† getChannel()æ–¹æ³• * æœ¬åœ° IO: * FileInputStream/FileOutputStream * RandomAccessFile * ç½‘ç»œ IO: * Socket * ServerSocket * DatagramSocket * 2ã€jdk1.7ä¸­NIO.2é’ˆå¯¹å„ä¸ªé€šé“æä¾›äº†é™æ€çš„ open()æ–¹æ³• *                 ä»¥åŠFileså·¥å…·ç±»çš„ newByteChannel()æ–¹æ³• */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ChannelTest</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// å®Œæˆæ–‡ä»¶çš„å¤åˆ¶ éç›´æ¥ç¼“å†²åŒº</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        FileInputStream fis <span class="token operator">=</span> null<span class="token punctuation">;</span>        FileOutputStream fos <span class="token operator">=</span> null<span class="token punctuation">;</span>        FileChannel fisChannel <span class="token operator">=</span> null<span class="token punctuation">;</span>        FileChannel fosChannel <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// åˆ›å»ºè¾“å…¥è¾“å‡ºæµ</span>            fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"1.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            fos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"2.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// è·å–é€šé“</span>            fisChannel <span class="token operator">=</span> fis<span class="token punctuation">.</span><span class="token function">getChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            fosChannel <span class="token operator">=</span> fos<span class="token punctuation">.</span><span class="token function">getChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// åˆ†é…ç¼“å†²åŒº</span>            ByteBuffer buffer <span class="token operator">=</span> ByteBuffer<span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// å°†é€šé“ä¸­çš„æ•°æ®å­˜å…¥ç¼“å†²åŒº</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>fisChannel<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// è¯»å–ç¼“å†²åŒºä¸­çš„æ•°æ®å¹¶å†™å…¥é€šé“</span>                buffer<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// åˆ‡æ¢æˆè¯»æ¨¡å¼</span>                fosChannel<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// æ¸…ç©ºç¼“å†²åŒº</span>                buffer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// å…³é—­èµ„æº</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>fis<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    fis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>fos<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    fos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>fisChannel<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    fisChannel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>fosChannel<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    fosChannel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// å®Œæˆæ–‡ä»¶çš„å¤åˆ¶(å†…å­˜æ˜ å°„æ–‡ä»¶) ç›´æ¥ç¼“å†²åŒº</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    FileChannel fisChannel <span class="token operator">=</span> null<span class="token punctuation">;</span>    FileChannel fosChannel <span class="token operator">=</span> null<span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// ä½¿ç”¨ç›¸åº”çš„é€šé“çš„openæ–¹æ³•è·å–é€šé“</span>        fisChannel <span class="token operator">=</span> FileChannel<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>Paths<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"1.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> StandardOpenOption<span class="token punctuation">.</span>READ<span class="token punctuation">)</span><span class="token punctuation">;</span>        fosChannel <span class="token operator">=</span> FileChannel<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>Paths<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"3.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>StandardOpenOption<span class="token punctuation">.</span>READ<span class="token punctuation">,</span>StandardOpenOption<span class="token punctuation">.</span>WRITE<span class="token punctuation">,</span>StandardOpenOption<span class="token punctuation">.</span>CREATE<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºå†…å­˜æ˜ å°„æ–‡ä»¶</span>        MappedByteBuffer inMapperBuf <span class="token operator">=</span> fisChannel<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>FileChannel<span class="token punctuation">.</span>MapMode<span class="token punctuation">.</span>READ_ONLY<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> fisChannel<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        MappedByteBuffer outMapperBuf <span class="token operator">=</span> fosChannel<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>FileChannel<span class="token punctuation">.</span>MapMode<span class="token punctuation">.</span>READ_WRITE<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> fisChannel<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span>inMapperBuf<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ç›´æ¥ç¼“å†²åŒºä¸­çš„æ•°æ®è¿›è¡Œè¯»å†™</span>        inMapperBuf<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>dest<span class="token punctuation">)</span><span class="token punctuation">;</span>        outMapperBuf<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>dest<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>fisChannel<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                fisChannel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>fosChannel<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                fosChannel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>å¯¹äºç›´æ¥å­—èŠ‚ç¼“å­˜åŒºæ¥è¯´ï¼ŒJVMä¼šå°½æœ€å¤§åŠªåŠ›ç›´æ¥åœ¨æ­¤ç¼“å†²åŒºæ‰§è¡Œæœ¬æœºçš„IOæ“ä½œï¼Œé¿å…æ¯æ¬¡è°ƒç”¨åŸºç¡€æ“ä½œç³»ç»Ÿçš„ä¸€ä¸ªæœ¬æœºIOæ“ä½œä¹‹å‰æˆ–ä¹‹åï¼Œå°†ç¼“å†²åŒºçš„å†…å®¹å¤åˆ¶åˆ°ä¸­é—´çš„ç¼“å†²åŒºä¸­ã€‚<br><img src="/2020/09/09/nio/3.png" style="zoom:80%;"></p><h2 id="é€šé“ä¹‹é—´çš„æ•°æ®ä¼ è¾“"><a href="#é€šé“ä¹‹é—´çš„æ•°æ®ä¼ è¾“" class="headerlink" title="é€šé“ä¹‹é—´çš„æ•°æ®ä¼ è¾“"></a>é€šé“ä¹‹é—´çš„æ•°æ®ä¼ è¾“</h2><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// é€šé“ä¹‹é—´çš„æ•°æ®ä¼ è¾“</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    FileChannel fisChannel <span class="token operator">=</span> null<span class="token punctuation">;</span>    FileChannel fosChannel <span class="token operator">=</span> null<span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        fisChannel <span class="token operator">=</span> FileChannel<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>Paths<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"1.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> StandardOpenOption<span class="token punctuation">.</span>READ<span class="token punctuation">)</span><span class="token punctuation">;</span>        fosChannel <span class="token operator">=</span> FileChannel<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>Paths<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"4.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> StandardOpenOption<span class="token punctuation">.</span>READ<span class="token punctuation">,</span>StandardOpenOption<span class="token punctuation">.</span>WRITE<span class="token punctuation">,</span>StandardOpenOption<span class="token punctuation">.</span>CREATE<span class="token punctuation">)</span><span class="token punctuation">;</span>        fisChannel<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>fisChannel<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>fosChannel<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// fosChannel.transferFrom(fisChannel,0,fisChannel.size());</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>fisChannel<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                fisChannel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>fosChannel<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                fosChannel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="åˆ†æ•£è¯»å–å’Œèšé›†å†™å…¥"><a href="#åˆ†æ•£è¯»å–å’Œèšé›†å†™å…¥" class="headerlink" title="åˆ†æ•£è¯»å–å’Œèšé›†å†™å…¥"></a>åˆ†æ•£è¯»å–å’Œèšé›†å†™å…¥</h2><p>åˆ†æ•£è¯»å–ï¼šå°†é€šé“ä¸­è¯»å–åˆ°çš„æ•°æ®åˆ†æ•£åˆ°å¤šä¸ªç¼“å†²åŒºä¸­ã€‚</p><p>èšé›†å†™å…¥ï¼šå°†å¤šä¸ªç¼“å†²åŒºä¸­çš„æ•°æ®å†™å…¥åˆ°ä¸€ä¸ªé€šé“ä¸­ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// åˆ†æ•£è¯»å–å’Œèšé›†å†™å…¥</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    RandomAccessFile randomAccessFile1 <span class="token operator">=</span> null<span class="token punctuation">;</span>    RandomAccessFile randomAccessFile2 <span class="token operator">=</span> null<span class="token punctuation">;</span>    FileChannel inChannel <span class="token operator">=</span> null<span class="token punctuation">;</span>    FileChannel outChannel <span class="token operator">=</span> null<span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        randomAccessFile1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RandomAccessFile</span><span class="token punctuation">(</span><span class="token string">"1.jpg"</span><span class="token punctuation">,</span> <span class="token string">"rw"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        inChannel <span class="token operator">=</span> randomAccessFile1<span class="token punctuation">.</span><span class="token function">getChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ByteBuffer buffer1 <span class="token operator">=</span> ByteBuffer<span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">102400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ByteBuffer buffer2 <span class="token operator">=</span> ByteBuffer<span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">102400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ†æ•£è¯»å–</span>        ByteBuffer<span class="token punctuation">[</span><span class="token punctuation">]</span> buffers <span class="token operator">=</span> <span class="token punctuation">{</span>buffer1<span class="token punctuation">,</span> buffer2<span class="token punctuation">}</span><span class="token punctuation">;</span>        inChannel<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffers<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// èšé›†å†™å…¥</span>        randomAccessFile2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RandomAccessFile</span><span class="token punctuation">(</span><span class="token string">"5.jpg"</span><span class="token punctuation">,</span> <span class="token string">"rw"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        outChannel <span class="token operator">=</span> randomAccessFile2<span class="token punctuation">.</span><span class="token function">getChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span>ByteBuffer buffer<span class="token operator">:</span>buffers<span class="token punctuation">)</span><span class="token punctuation">{</span>            buffer<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        outChannel<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffers<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>randomAccessFile1 <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                randomAccessFile1<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>randomAccessFile2 <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                randomAccessFile2<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>inChannel<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                inChannel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>outChannel<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                outChannel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="é˜»å¡ä¸éé˜»å¡"><a href="#é˜»å¡ä¸éé˜»å¡" class="headerlink" title="é˜»å¡ä¸éé˜»å¡"></a>é˜»å¡ä¸éé˜»å¡</h2><ul><li>ä¼ ç»Ÿçš„IO æµéƒ½æ˜¯é˜»å¡å¼çš„ã€‚å½“ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨read() æˆ–write()æ—¶ï¼Œè¯¥çº¿ç¨‹è¢«é˜»å¡ï¼Œç›´åˆ°æœ‰ä¸€äº›æ•°æ®è¢«è¯»å–æˆ–å†™å…¥ï¼Œè¯¥çº¿ç¨‹åœ¨æ­¤æœŸé—´ä¸èƒ½æ‰§è¡Œå…¶ä»–ä»»åŠ¡ã€‚å› æ­¤ï¼Œåœ¨å®Œæˆç½‘ç»œé€šä¿¡è¿›è¡ŒIO æ“ä½œæ—¶ï¼Œç”±äºçº¿ç¨‹ä¼šé˜»å¡ï¼Œæ‰€ä»¥æœåŠ¡å™¨ç«¯å¿…é¡»ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯éƒ½æä¾›ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹è¿›è¡Œå¤„ç†ï¼Œå½“æœåŠ¡å™¨ç«¯éœ€è¦å¤„ç†å¤§é‡å®¢æˆ·ç«¯æ—¶ï¼Œæ€§èƒ½æ€¥å‰§ä¸‹é™ã€‚</li><li>Java NIO æ˜¯éé˜»å¡æ¨¡å¼çš„ã€‚å½“çº¿ç¨‹ä»æŸé€šé“è¿›è¡Œè¯»å†™æ•°æ®æ—¶ï¼Œè‹¥æ²¡æœ‰æ•°æ®å¯ç”¨æ—¶ï¼Œè¯¥çº¿ç¨‹å¯ä»¥è¿›è¡Œå…¶ä»–ä»»åŠ¡ã€‚çº¿ç¨‹é€šå¸¸å°†éé˜»å¡IO çš„ç©ºé—²æ—¶é—´ç”¨äºåœ¨å…¶ä»–é€šé“ä¸Šæ‰§è¡ŒIO æ“ä½œï¼Œæ‰€ä»¥å•ç‹¬çš„çº¿ç¨‹å¯ä»¥ç®¡ç†å¤šä¸ªè¾“å…¥å’Œè¾“å‡ºé€šé“ã€‚å› æ­¤ï¼ŒNIO å¯ä»¥è®©æœåŠ¡å™¨ç«¯ä½¿ç”¨ä¸€ä¸ªæˆ–æœ‰é™å‡ ä¸ªçº¿ç¨‹æ¥åŒæ—¶å¤„ç†è¿æ¥åˆ°æœåŠ¡å™¨ç«¯çš„æ‰€æœ‰å®¢æˆ·ç«¯è¯·æ±‚ã€‚</li></ul><blockquote><p>é˜»å¡å¼IOé€šä¿¡</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BlockTest</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * ä½¿ç”¨ NIOå®Œæˆç½‘ç»œé€šä¿¡çš„ä¸‰ä¸ªæ ¸å¿ƒ     * 1ã€é€šé“ Channel:è´Ÿè´£æ¥è¿æ¥     * SocketChannel/ServerSocketChannel     * DatagramChannel     * 2ã€ç¼“å†²åŒº buffer: è´Ÿè´£æ•°æ®å­˜å‚¨     * 3ã€é€‰æ‹©å™¨ Selector:æ˜¯SelectableChannelå¯¹è±¡çš„å¤šè·¯å¤ç”¨å™¨ï¼Œç”¨äºç›‘æ§ SelectableSelectorçš„IOçŠ¶å†µ     */</span>    <span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// å›¾ç‰‡å‘é€</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">client</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception<span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å›¾ç‰‡å‘é€~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 1ã€è·å–é€šé“</span>        SocketChannel socketChannel <span class="token operator">=</span> SocketChannel<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InetSocketAddress</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> <span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        FileChannel inFileChannel <span class="token operator">=</span> FileChannel<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>Paths<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"1.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> StandardOpenOption<span class="token punctuation">.</span>READ<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 2ã€è·å–ç¼“å†²åŒº</span>        ByteBuffer buffer <span class="token operator">=</span> ByteBuffer<span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 3ã€è¯»å–é€šé“ä¸­çš„æ•°æ®</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>inFileChannel<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            buffer<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 4ã€å‘é€åˆ°æœåŠ¡ç«¯</span>            socketChannel<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>            buffer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å›¾ç‰‡å‘é€å®Œæˆï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        socketChannel<span class="token punctuation">.</span><span class="token function">shutdownOutput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ¥æ”¶æœåŠ¡ç«¯çš„åé¦ˆä¿¡æ¯</span>        <span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> socketChannel<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            buffer<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            buffer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// 5ã€å…³é—­èµ„æº</span>        inFileChannel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        socketChannel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// å›¾ç‰‡æ¥æ”¶</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">server</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception<span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœåŠ¡ç«¯å¼€å¯!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 1ã€è·å–é€šé“</span>        ServerSocketChannel serverSocketChannel <span class="token operator">=</span> ServerSocketChannel<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        FileChannel outFileChannel <span class="token operator">=</span> FileChannel<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>Paths<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"666.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> StandardOpenOption<span class="token punctuation">.</span>WRITE<span class="token punctuation">,</span>StandardOpenOption<span class="token punctuation">.</span>CREATE<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 2ã€ç»‘å®šç«¯å£</span>        serverSocketChannel<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InetSocketAddress</span><span class="token punctuation">(</span><span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 3ã€è·å–å®¢æˆ·ç«¯è¿æ¥çš„é€šé“</span>        SocketChannel clientSocketChannel <span class="token operator">=</span> serverSocketChannel<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 4ã€åˆ›å»ºç¼“å†²åŒº</span>        ByteBuffer buffer <span class="token operator">=</span> ByteBuffer<span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 5ã€è¯»å†™æ•°æ®</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>clientSocketChannel<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            buffer<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            outFileChannel<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>            buffer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">/**         * ç»™å®¢æˆ·ç«¯å‘é€åé¦ˆä¿¡æ¯         * 1ã€å°†æ•°æ®å­˜å…¥ç¼“å†²åŒº         * 2ã€è¯»å–ç¼“å†²åŒºä¸­çš„æ•°æ®å¹¶å†™å…¥å®¢æˆ·ç«¯é€šé“ä¸­         * 3ã€æ¸…ç©ºç¼“å†²åŒº         */</span>        buffer<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"æ¥è‡ªæœåŠ¡ç«¯ï¼šæˆ‘å·²ç»æ¥æ”¶å®Œæˆäº†ï¼"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        buffer<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        clientSocketChannel<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>        buffer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 6ã€å…³é—­èµ„æº</span>        outFileChannel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        serverSocketChannel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        clientSocketChannel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å›¾ç‰‡æ¥æ”¶å®Œæˆï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>éé˜»å¡å¼IOé€šä¿¡</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NonBlockTest</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">client</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception<span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 1ã€è·å–é€šé“</span>        SocketChannel socketChannel <span class="token operator">=</span> SocketChannel<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InetSocketAddress</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> <span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 2ã€åˆ‡æ¢æˆéé˜»å¡æ¨¡å¼</span>        socketChannel<span class="token punctuation">.</span><span class="token function">configureBlocking</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 3ã€åˆ†é…ç¼“å†²åŒº</span>        ByteBuffer buffer <span class="token operator">=</span> ByteBuffer<span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 4ã€å‘é€æ•°æ®</span>        buffer<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        buffer<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        socketChannel<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>        socketChannel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">server</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception<span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 1ã€è·å–é€šé“</span>        ServerSocketChannel serverSocketChannel <span class="token operator">=</span> ServerSocketChannel<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 2ã€åˆ‡æ¢ä¸ºéé˜»å¡æ¨¡å¼</span>        serverSocketChannel<span class="token punctuation">.</span><span class="token function">configureBlocking</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 3ã€ç»‘å®šç«¯å£</span>        serverSocketChannel<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InetSocketAddress</span><span class="token punctuation">(</span><span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 4ã€è·å–é€‰æ‹©å™¨</span>        Selector selector <span class="token operator">=</span> Selector<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 5ã€æ³¨å†Œé€šé“åˆ°é€‰æ‹©å™¨ä¸Š</span>        serverSocketChannel<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span> SelectionKey<span class="token punctuation">.</span>OP_ACCEPT<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 6ã€é€šè¿‡è½®è¯¢çš„æ–¹å¼è·å–é€šé“</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>selector<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 7ã€è·å–æ³¨å†Œçš„æ‰€æœ‰é€‰æ‹©é”®</span>            Iterator<span class="token operator">&lt;</span>SelectionKey<span class="token operator">></span> iterator <span class="token operator">=</span> selector<span class="token punctuation">.</span><span class="token function">selectedKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                SelectionKey selectionKey <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// 9ã€åˆ¤æ–­äº‹ä»¶å°±ç»ª</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>selectionKey<span class="token punctuation">.</span><span class="token function">isAcceptable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    <span class="token comment" spellcheck="true">// 10ã€æ¥æ”¶å°±ç»ªï¼Œè·å–è¿æ¥</span>                    SocketChannel clientSocketChannel <span class="token operator">=</span> serverSocketChannel<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment" spellcheck="true">// 11ã€è®¾ç½®ä¸ºéé˜»å¡</span>                    clientSocketChannel<span class="token punctuation">.</span><span class="token function">configureBlocking</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment" spellcheck="true">// 12ã€æ³¨å†Œé€šé“å¹¶ç›‘æ§è¯»å°±ç»ªäº‹ä»¶</span>                    clientSocketChannel<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span>SelectionKey<span class="token punctuation">.</span>OP_READ<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>selectionKey<span class="token punctuation">.</span><span class="token function">isReadable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">// 13ã€è·å–è¯»å°±ç»ªçŠ¶æ€çš„é€šé“</span>                    SocketChannel clientSocketChannel <span class="token operator">=</span> <span class="token punctuation">(</span>SocketChannel<span class="token punctuation">)</span> selectionKey<span class="token punctuation">.</span><span class="token function">channel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    ByteBuffer buffer <span class="token operator">=</span> ByteBuffer<span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> clientSocketChannel<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                        buffer<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        buffer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>                <span class="token comment" spellcheck="true">// 14ã€å–æ¶ˆé€‰æ‹©é”®</span>                iterator<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
            <tag> NIO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¿æ¥æŸ¥è¯¢å’Œç´¢å¼•</title>
      <link href="2020/09/09/mysql-senior/"/>
      <url>2020/09/09/mysql-senior/</url>
      
        <content type="html"><![CDATA[<h2 id="å­˜å‚¨å¼•æ“"><a href="#å­˜å‚¨å¼•æ“" class="headerlink" title="å­˜å‚¨å¼•æ“"></a>å­˜å‚¨å¼•æ“</h2><p>æŸ¥çœ‹æ‰€æœ‰å¼•æ“ä»¥åŠå½“å‰ä½¿ç”¨çš„å¼•æ“ï¼š</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">show</span> engines<span class="token punctuation">;</span><span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'%storage_engine%'</span><span class="token punctuation">;</span></code></pre><p>ä¸»è¦åˆ†ä¸ºMyISAMä¸InnoDB<br><img src="/2020/09/09/mysql-senior/1.png" style="zoom:70%;"></p><h2 id="æ€§èƒ½ä¸‹é™çš„åŸå› "><a href="#æ€§èƒ½ä¸‹é™çš„åŸå› " class="headerlink" title="æ€§èƒ½ä¸‹é™çš„åŸå› "></a>æ€§èƒ½ä¸‹é™çš„åŸå› </h2><p>1ã€æŸ¥è¯¢è¯­å¥å†™çš„çƒ‚</p><p>2ã€ç´¢å¼•å¤±æ•ˆ</p><p>3ã€å…³è”æŸ¥è¯¢å¤ªå¤šçš„join</p><p>4ã€æœåŠ¡å™¨è°ƒä¼˜åŠå„ä¸ªå‚æ•°çš„è®¾ç½®ï¼ˆç¼“å†²ã€çº¿ç¨‹æ•°ç­‰ï¼‰</p><h2 id="å¸¸è§çš„joinæŸ¥è¯¢"><a href="#å¸¸è§çš„joinæŸ¥è¯¢" class="headerlink" title="å¸¸è§çš„joinæŸ¥è¯¢"></a>å¸¸è§çš„joinæŸ¥è¯¢</h2><p>æŸ¥è¯¢é¡ºåºï¼š<br>æ‰‹å†™ï¼š<br><img src="/2020/09/09/mysql-senior/2.png" style="zoom:80%;"></p><p>æœºè¯»ï¼š<br><img src="/2020/09/09/mysql-senior/3.png" alt></p><p><img src="/2020/09/09/mysql-senior/4.png" alt></p><p>ä¸ƒç§è¿æ¥çš„æƒ…å†µï¼š<br><img src="/2020/09/09/mysql-senior/5.png" style="zoom:80%;"></p><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true"># å†…è¿æ¥ å·¦ã€å³è¡¨å…±æœ‰</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_emp <span class="token number">e</span> <span class="token keyword">inner</span> <span class="token keyword">join</span> t_dept <span class="token number">d</span> <span class="token keyword">on</span> <span class="token number">e</span><span class="token punctuation">.</span>deptid<span class="token operator">=</span><span class="token number">d</span><span class="token punctuation">.</span>id<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># å·¦å¤– å·¦è¡¨ç‹¬æœ‰+å·¦ã€å³è¡¨å…±æœ‰</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_emp <span class="token number">e</span> <span class="token keyword">left</span> <span class="token keyword">join</span> t_dept <span class="token number">d</span> <span class="token keyword">on</span> <span class="token number">e</span><span class="token punctuation">.</span>deptid<span class="token operator">=</span><span class="token number">d</span><span class="token punctuation">.</span>id<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># å·¦è¡¨æœ‰ï¼Œå³è¡¨æ²¡æœ‰</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_emp <span class="token number">e</span> <span class="token keyword">left</span> <span class="token keyword">join</span> t_dept <span class="token number">d</span> <span class="token keyword">on</span> <span class="token number">e</span><span class="token punctuation">.</span>deptid<span class="token operator">=</span><span class="token number">d</span><span class="token punctuation">.</span>id <span class="token keyword">where</span> <span class="token number">d</span><span class="token punctuation">.</span>id <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># å…¨æœ‰ å·¦è¡¨ç‹¬æœ‰+å·¦ã€å³è¡¨å…±æœ‰+å³è¡¨ç‹¬æœ‰</span><span class="token comment" spellcheck="true"># mysqlä¸æ”¯æŒå…¨å¤–</span><span class="token comment" spellcheck="true"># select * from  t_emp e full out join t_dept d on e.deptid=d.id;</span><span class="token comment" spellcheck="true"># ä½¿ç”¨unionè”åˆæŸ¥è¯¢ union:è”åˆåŠ å»é‡</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span>  t_emp <span class="token number">e</span> <span class="token keyword">left</span> <span class="token keyword">join</span> t_dept <span class="token number">d</span> <span class="token keyword">on</span> <span class="token number">e</span><span class="token punctuation">.</span>deptid<span class="token operator">=</span><span class="token number">d</span><span class="token punctuation">.</span>id <span class="token keyword">union</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span>  t_emp <span class="token number">e</span> <span class="token keyword">right</span> <span class="token keyword">join</span> t_dept <span class="token number">d</span> <span class="token keyword">on</span> <span class="token number">e</span><span class="token punctuation">.</span>deptid<span class="token operator">=</span><span class="token number">d</span><span class="token punctuation">.</span>id<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># å·¦ã€å³è¡¨å„è‡ªç‹¬æœ‰ å·¦è¡¨ç‹¬æœ‰+å³è¡¨ç‹¬æœ‰</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span>  t_emp <span class="token number">e</span> <span class="token keyword">left</span> <span class="token keyword">join</span> t_dept <span class="token number">d</span> <span class="token keyword">on</span> <span class="token number">e</span><span class="token punctuation">.</span>deptid<span class="token operator">=</span><span class="token number">d</span><span class="token punctuation">.</span>id <span class="token keyword">where</span> <span class="token number">d</span><span class="token punctuation">.</span>id <span class="token operator">is</span> <span class="token boolean">null</span><span class="token keyword">union</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span>  t_emp <span class="token number">e</span> <span class="token keyword">right</span> <span class="token keyword">join</span> t_dept <span class="token number">d</span> <span class="token keyword">on</span> <span class="token number">e</span><span class="token punctuation">.</span>deptid<span class="token operator">=</span><span class="token number">d</span><span class="token punctuation">.</span>id<span class="token keyword">where</span> <span class="token number">e</span><span class="token punctuation">.</span>deptid <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span></code></pre><h2 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h2><h3 id="ç´¢å¼•ç®€ä»‹"><a href="#ç´¢å¼•ç®€ä»‹" class="headerlink" title="ç´¢å¼•ç®€ä»‹"></a>ç´¢å¼•ç®€ä»‹</h3><p>ç´¢å¼•å°±æ˜¯å¸®åŠ©mysqlé«˜é€Ÿè·å–æ•°æ®çš„ä¸€ç§<strong>æ•°æ®ç»“æ„</strong>ï¼Œç›®çš„åœ¨äºæé«˜æŸ¥æ‰¾æ•ˆç‡ï¼Œç±»æ¯”å­—å…¸ï¼Œå¦‚æœæŸ¥è¯¢mysqlè¿™ä¸ªè¯ï¼Œé¦–å…ˆå®šä½åˆ°må­—æ¯ï¼Œç„¶åä¾æ¬¡å®šä½åˆ°ä¹‹åçš„å­—æ¯ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢ã€‚</p><p><font color="red"><strong>ç®€å•çš„ç†è§£ä¸º â€ æ’å¥½åºçš„å¿«é€ŸæŸ¥æ‰¾æ•°æ®ç»“æ„ â€œ ã€‚</strong></font><br><img src="/2020/09/09/mysql-senior/6.png" alt></p><p>ä¸ºäº†åŠ å¿«Col2çš„æŸ¥æ‰¾ï¼Œæ•°æ®åº“ç»´æŠ¤äº†ä¸€ä¸ªæŸ¥æ‰¾äºŒå‰æ ‘ï¼ˆBæ ‘ï¼‰ï¼Œæ¯ä¸ªèŠ‚ç‚¹åˆ†åˆ«åŒ…å«ç´¢å¼•é”®å€¼å’Œä¸€ä¸ªæŒ‡å‘å¯¹åº”æ•°æ®è®°å½•ç‰©ç†åœ°å€çš„æŒ‡é’ˆï¼Œè¿™æ ·å°±å¯ä»¥è¿ç”¨äºŒå‰æŸ¥æ‰¾åœ¨å¿«é€Ÿè·å–ç›¸åº”çš„æ•°æ®ã€‚</p><p>ç´¢å¼•ä¹Ÿå¾ˆå¤§ï¼Œä¸èƒ½å®Œå…¨å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œä¸€èˆ¬ä»¥ç´¢å¼•æ–‡ä»¶çš„å½¢å¼å­˜å‚¨åœ¨ç£ç›˜ä¸­ã€‚</p><h3 id="ç´¢å¼•åˆ†ç±»"><a href="#ç´¢å¼•åˆ†ç±»" class="headerlink" title="ç´¢å¼•åˆ†ç±»"></a>ç´¢å¼•åˆ†ç±»</h3><blockquote><p>å•å€¼ç´¢å¼•</p></blockquote><p>ä¸€ä¸ªç´¢å¼•åªåŒ…å«å•ä¸ªåˆ—ï¼Œä¸€ä¸ªè¡¨å¯ä»¥æœ‰å¤šä¸ªå•å€¼ç´¢å¼•ã€‚ï¼ˆå»ºè®®ä¸è¶…è¿‡5ä¸ªï¼‰</p><blockquote><p>å”¯ä¸€ç´¢å¼•</p></blockquote><p>ç´¢å¼•åˆ—çš„å€¼å¿…é¡»å”¯ä¸€ï¼Œä½†å…è®¸æœ‰ç©ºå€¼</p><blockquote><p>å¤åˆç´¢å¼•</p></blockquote><p>ä¸€ä¸ªç´¢å¼•åŒ…å«äº†å¤šä¸ªåˆ—</p><h3 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><blockquote><p>åˆ›å»º</p></blockquote><pre class=" language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token punctuation">[</span><span class="token keyword">unique</span><span class="token punctuation">]</span> <span class="token keyword">index</span> indexname <span class="token keyword">on</span> <span class="token keyword">table</span><span class="token punctuation">(</span>cloumnname<span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> <span class="token keyword">add</span> <span class="token punctuation">[</span><span class="token keyword">unique</span><span class="token punctuation">]</span> <span class="token keyword">index</span> <span class="token punctuation">[</span>indexname<span class="token punctuation">]</span> <span class="token keyword">on</span> <span class="token punctuation">(</span>columnname<span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><blockquote><p>åˆ é™¤</p></blockquote><pre class=" language-sql"><code class="language-sql"><span class="token keyword">drop</span> <span class="token keyword">index</span> <span class="token punctuation">[</span>indexname<span class="token punctuation">]</span> <span class="token keyword">on</span> <span class="token keyword">table</span><span class="token punctuation">;</span></code></pre><blockquote><p>æŸ¥çœ‹</p></blockquote><pre class=" language-sql"><code class="language-sql"><span class="token keyword">show</span> <span class="token keyword">index</span> <span class="token keyword">from</span> <span class="token keyword">table</span></code></pre><h3 id="ç´¢å¼•é€‚ç”¨çš„æ¡ä»¶"><a href="#ç´¢å¼•é€‚ç”¨çš„æ¡ä»¶" class="headerlink" title="ç´¢å¼•é€‚ç”¨çš„æ¡ä»¶"></a>ç´¢å¼•é€‚ç”¨çš„æ¡ä»¶</h3><ul><li>ä¸»é”®è‡ªåŠ¨å»ºç«‹å”¯ä¸€ç´¢å¼•ï¼›</li><li>é¢‘ç¹ä½œä¸ºæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µåº”è¯¥åˆ›å»ºç´¢å¼•</li><li>æŸ¥è¯¢ä¸­ä¸å…¶å®ƒè¡¨å…³è”çš„å­—æ®µï¼Œå¤–é”®å…³ç³»å»ºç«‹ç´¢å¼•</li><li>å•é”®/ç»„åˆç´¢å¼•çš„é€‰æ‹©é—®é¢˜ï¼Œç»„åˆç´¢å¼•æ€§ä»·æ¯”æ›´é«˜</li><li>æŸ¥è¯¢ä¸­æ’åºçš„å­—æ®µï¼Œæ’åºå­—æ®µè‹¥é€šè¿‡ç´¢å¼•å»è®¿é—®å°†å¤§å¤§æé«˜æ’åºé€Ÿåº¦</li><li>æŸ¥è¯¢ä¸­ç»Ÿè®¡æˆ–è€…åˆ†ç»„å­—æ®µ</li></ul><h3 id="ç´¢å¼•ä¸é€‚ç”¨çš„æ¡ä»¶"><a href="#ç´¢å¼•ä¸é€‚ç”¨çš„æ¡ä»¶" class="headerlink" title="ç´¢å¼•ä¸é€‚ç”¨çš„æ¡ä»¶"></a>ç´¢å¼•ä¸é€‚ç”¨çš„æ¡ä»¶</h3><ul><li>è¡¨è®°å½•å¤ªå°‘</li><li>ç»å¸¸å¢åˆ æ”¹çš„è¡¨æˆ–è€…å­—æ®µ</li><li>Where æ¡ä»¶é‡Œç”¨ä¸åˆ°çš„å­—æ®µä¸åˆ›å»ºç´¢å¼•</li><li>è¿‡æ»¤æ€§ä¸å¥½çš„ä¸é€‚åˆå»ºç´¢å¼•</li></ul><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>åœ¨ä½¿ç”¨likeâ€œ%å­—æ®µ%â€è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œæ˜¯è¿›è¡Œå…¨è¡¨æ‰«æçš„ï¼Œä¸ä¼šä½¿ç”¨ç´¢å¼•ï¼Œå› ä¸ºç´¢å¼•æ˜¯éµå¾ªæœ€å·¦åŒ¹é…çš„åŸåˆ™çš„ï¼Œæ‰€ä»¥è¯´å½“æ‰«æåˆ°ç¬¬ä¸€ä¸ªæ˜¯â€œ%â€æ—¶ï¼Œå¹¶ä¸ä¼šä½¿ç”¨ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JVMå…¥é—¨</title>
      <link href="2020/09/06/jvm/"/>
      <url>2020/09/06/jvm/</url>
      
        <content type="html"><![CDATA[<h2 id="jvmç”Ÿå‘½å‘¨æœŸ"><a href="#jvmç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="jvmç”Ÿå‘½å‘¨æœŸ"></a>jvmç”Ÿå‘½å‘¨æœŸ</h2><p>1ã€jvmå¯åŠ¨<br>ç”±å¼•å¯¼ç±»åŠ è½½å™¨bootstrap class loaderé€šè¿‡åˆ›å»ºä¸€ä¸ªåˆå§‹ç±»æ¥å®Œæˆçš„ï¼Œè¿™ä¸ªç±»æ˜¯ç”±è™šæ‹Ÿæœºå…·ä½“çš„å®ç°æŒ‡å®šçš„ã€‚</p><p>2ã€jvmæ‰§è¡Œ<br>æ‰§è¡Œjavaç¨‹åº</p><p>3ã€jvmé€€å‡º</p><p>ç¨‹åºæ­£å¸¸æ‰§è¡Œç»“æŸï¼›<br>ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸æˆ–é”™è¯¯ï¼›<br>æ“ä½œç³»ç»Ÿå‡ºç°é”™è¯¯ï¼›<br>æŸçº¿ç¨‹è°ƒç”¨Runtimeç±»ä¸­halt()æˆ–Systemç±»ä¸­exit()</p><h2 id="å†…å­˜ç»“æ„å›¾"><a href="#å†…å­˜ç»“æ„å›¾" class="headerlink" title="å†…å­˜ç»“æ„å›¾"></a>å†…å­˜ç»“æ„å›¾</h2><p>ç»“æ„ç®€å›¾ï¼š<br><img src="/2020/09/06/jvm/1.png" style="zoom:80%;"></p><h2 id="ç±»åŠ è½½å™¨"><a href="#ç±»åŠ è½½å™¨" class="headerlink" title="ç±»åŠ è½½å™¨"></a>ç±»åŠ è½½å™¨</h2><blockquote><p>ä¸‰ç§ç±»åŠ è½½å™¨ï¼š</p></blockquote><p>BootstrapClassLoader  å¼•å¯¼ç±»åŠ è½½å™¨<br>æ˜¯ç”¨C/C++å®ç°çš„ï¼Œç”¨æ¥åŠ è½½javaçš„æ ¸å¿ƒç±»åº“ï¼Œæ²¡æœ‰çˆ¶åŠ è½½å™¨ï¼Œç”¨æ¥åŠ è½½æ‹“å±•ç±»åŠ è½½å™¨ï¼Œç³»ç»Ÿç±»åŠ è½½å™¨ï¼›<br>å‡ºäºå®‰å…¨è€ƒè™‘ï¼ŒBootstrapåŠ è½½å™¨åªåŠ è½½ javaã€javaxã€sunå¼€å¤´çš„ç±»ã€‚ </p><p>ExtClassLoader  æ‹“å±•ç±»åŠ è½½å™¨<br>æ´¾ç”ŸäºClassLoaderï¼Œçˆ¶ç±»åŠ è½½å™¨æ˜¯BootstrapClassLoader;<br>ä»jre/lib/extç›®å½•åŠ è½½ç±»åº“</p><p>AppClassLoader ç³»ç»Ÿç±»åŠ è½½å™¨<br>æ´¾ç”ŸäºClassLoaderï¼Œçˆ¶åŠ è½½å™¨æ˜¯ExtClassLoaderï¼›<br>åŠ è½½ç¯å¢ƒå˜é‡å’Œç³»ç»Ÿå±æ€§ï¼Œé»˜è®¤ä¸ºåº”ç”¨ç¨‹åºçš„åŠ è½½ç±»</p><p>ç±»åŠ è½½è¿‡ç¨‹ï¼š<br><img src="/2020/09/06/jvm/2.png" alt></p><blockquote><p>è·å–åŠ è½½å™¨çš„æ–¹æ³•</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// è·å–å½“å‰ç±»åŠ è½½å™¨</span>clazz<span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è·å–å½“å‰çº¿ç¨‹ä¸Šä¸‹æ–‡çš„ClassLoader</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContextClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è·å–ç³»ç»Ÿçš„ClassLoader</span>ClassLoader<span class="token punctuation">.</span><span class="token function">getSystemClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è·å–è°ƒç”¨è€…çš„ClassLoader</span>DriverManager<span class="token punctuation">.</span><span class="token function">getCallerClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><blockquote><p>åŒäº²å§”æ´¾æœºåˆ¶</p></blockquote><p>å¦‚æœä¸€ä¸ªç±»çš„åŠ è½½å™¨æ”¶åˆ°äº†åŠ è½½ç±»çš„è¯·æ±‚ï¼Œå¹¶ä¸ä¼šé©¬ä¸ŠåŠ è½½ï¼Œè€Œæ˜¯å°†è¯·æ±‚å‘ä¸Šå§”æ‰˜ç»™çˆ¶åŠ è½½å™¨ï¼Œç›´åˆ°åˆ°è¾¾å¼•å¯¼ç±»åŠ è½½å™¨ï¼›å¦‚æœçˆ¶åŠ è½½å™¨èƒ½å®ŒæˆåŠ è½½ç±»çš„å§”æ‰˜ï¼Œåˆ™æˆåŠŸè¿”å›ï¼Œå¦åˆ™ï¼Œå­åŠ è½½å™¨æ‰ä¼šå°è¯•è‡ªå·±åŠ è½½ã€‚<br><img src="/2020/09/06/jvm/3.png" alt></p><h2 id="æœ¬åœ°æ–¹æ³•æ ˆ-Native-Method-Stack"><a href="#æœ¬åœ°æ–¹æ³•æ ˆ-Native-Method-Stack" class="headerlink" title="æœ¬åœ°æ–¹æ³•æ ˆ(Native Method Stack)"></a>æœ¬åœ°æ–¹æ³•æ ˆ(Native Method Stack)</h2><p>çº¿ç¨‹ç§æœ‰ï¼Œnativeæ–¹æ³•ç”¨æ¥è°ƒç”¨C/C++ç¨‹åºï¼Œåœ¨å†…å­˜ä¸­ä¸“é—¨å¼€è¾Ÿäº†ä¸€å—åŒºåŸŸå¤„ç†æ ‡è®°ä¸ºnativeçš„ä»£ç ã€‚</p><h2 id="ç¨‹åºå¯„å­˜å™¨-Program-Counter-Register"><a href="#ç¨‹åºå¯„å­˜å™¨-Program-Counter-Register" class="headerlink" title="ç¨‹åºå¯„å­˜å™¨(Program Counter Register)"></a>ç¨‹åºå¯„å­˜å™¨(Program Counter Register)</h2><p>çº¿ç¨‹ç§æœ‰ï¼Œå­˜å‚¨æŒ‡å‘ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ã€‚</p><h2 id="æ–¹æ³•åŒº-Method-Stack"><a href="#æ–¹æ³•åŒº-Method-Stack" class="headerlink" title="æ–¹æ³•åŒº(Method Stack)"></a>æ–¹æ³•åŒº(Method Stack)</h2><p>å„ä¸ªçº¿ç¨‹å…±äº«ï¼Œå®ƒå­˜å‚¨äº†æ¯ä¸ªç±»çš„ç»“æ„ä¿¡æ¯ï¼šå­—æ®µå’Œæ–¹æ³•æ•°æ®ã€æ„é€ æ–¹æ³•å’Œæ™®é€šæ–¹æ³•çš„å­—èŠ‚ç å†…å®¹ã€å¸¸é‡æ± ã€‚<br>æ–¹æ³•åŒºæ˜¯è§„èŒƒï¼Œä¸åŒè™šæ‹Ÿæœºçš„å®ç°ä¸åŒã€‚ï¼ˆç±»ä¼¼äºæ¥å£çš„ä¸åŒå®ç°ï¼‰</p><h2 id="è™šæ‹Ÿæœºæ ˆ-JVM-Stack"><a href="#è™šæ‹Ÿæœºæ ˆ-JVM-Stack" class="headerlink" title="è™šæ‹Ÿæœºæ ˆ(JVM Stack)"></a>è™šæ‹Ÿæœºæ ˆ(JVM Stack)</h2><p>ä¸»ç®¡ç¨‹åºçš„è¿è¡Œï¼Œåœ¨çº¿ç¨‹åˆ›å»ºæ—¶åˆ›å»ºï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸè·Ÿéšçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œçº¿ç¨‹ç»“æŸæ—¶é‡Šæ”¾ï¼Œå¯¹äºæ ˆæ¥è¯´ä¸å­˜åœ¨åƒåœ¾å›æ”¶é—®é¢˜ï¼Œæ˜¯çº¿ç¨‹ç§æœ‰çš„ã€‚<br><font color="red">8ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¯¹è±¡çš„å¼•ç”¨å˜é‡ï¼Œå®ä¾‹æ–¹æ³•éƒ½æ˜¯åœ¨æ ˆå†…å­˜ä¸­åˆ†é…çš„ã€‚</font><br>æ ˆå¸§ä¸­ä¸»è¦å­˜å‚¨3ç±»æ•°æ®ï¼š<br>æœ¬åœ°å˜é‡ï¼šè¾“å…¥ã€è¾“å‡ºå‚æ•°ï¼Œæ–¹æ³•ä¸­çš„å˜é‡<br>æ ˆæ“ä½œï¼šè®°å½•è¿›æ ˆã€å‡ºæ ˆ<br>æ ˆå¸§æ•°æ®ï¼šè¿è¡Œæ—¶æ•°æ®ã€æ–¹æ³•ç­‰<br><img src="/2020/09/06/jvm/4.png" alt></p><p>æ ˆ+å †+æ–¹æ³•åŒºçš„å…³ç³»ï¼š<br><img src="/2020/09/06/jvm/5.png" alt=" "></p><h2 id="å †-Heap"><a href="#å †-Heap" class="headerlink" title="å †(Heap)"></a>å †(Heap)</h2><p>ä¸»ç®¡æ•°æ®çš„å­˜å‚¨ï¼Œä¸€ä¸ªJVMå®ä¾‹åªå­˜åœ¨ä¸€ä¸ªå †å†…å­˜ï¼Œå †å†…å­˜çš„å¤§å°æ˜¯å¯ä»¥è°ƒèŠ‚çš„ã€‚<br>ç±»åŠ è½½å™¨è¯»å–äº†ç±»æ–‡ä»¶åï¼Œéœ€è¦æŠŠç±»ï¼Œæ–¹æ³•ï¼Œå¸¸ã€å˜é‡æ”¾å…¥å †å†…å­˜ä¸­ï¼Œä¿å­˜æ‰€æœ‰å¼•ç”¨ç±»å‹çš„çœŸå®ä¿¡æ¯ã€‚<br>é€»è¾‘ä¸Šåˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šæ–°ç”ŸåŒºã€å…»è€åŒºã€å…ƒç©ºé—´<br>ç‰©ç†ä¸Šåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šæ–°ç”ŸåŒºã€å…»è€åŒº<br><img src="/2020/09/06/jvm/6.png" style="zoom:70%;"></p><blockquote><p>åƒåœ¾å›æ”¶è¿‡ç¨‹</p></blockquote><p>EdenåŒºæ»¡äº†ï¼Œè§¦å‘ç¬¬ä¸€æ¬¡GCï¼Œç§°ä¸ºMinor GCï¼Œå°†å­˜æ´»æ•°æ®å¤åˆ¶åˆ°FromåŒºï¼Œæ¸…ç©ºEdenåŒºï¼Œ</p><blockquote><p>GCè¿‡ç¨‹ï¼ˆå¤åˆ¶ -&gt; æ¸…ç©º -&gt; äº’æ¢ï¼‰ï¼Œ<br><img src="/2020/09/06/jvm/7.png" style="zoom: 67%;"></p></blockquote><p>å½“EdenåŒºå†æ¬¡è§¦å‘GCæ—¶ï¼Œä¼šæ‰«æEdenåŒºå’ŒFromåŒºï¼Œå¯¹ä¸¤ä¸ªåŒºåŸŸè¿›è¡Œåƒåœ¾å›æ”¶ï¼Œç»è¿‡è¿™æ¬¡å›æ”¶è¿˜å­˜æ´»çš„å¯¹è±¡ç›´æ¥å¤åˆ¶åˆ°ToåŒºï¼ŒåŒæ—¶æŠŠè¿™äº›æ•°æ®çš„å¹´é¾„åŠ 1ï¼Œæ¸…ç©ºEdenåŒºå’ŒFromåŒºï¼Œæ¸…ç©ºåçš„FromåŒºæˆä¸ºä¸‹æ¬¡GCçš„ToåŒºï¼Œå®Œæˆäº¤æ¢ï¼Œå¦‚æ­¤äº¤æ¢15æ¬¡ï¼Œè‹¥æ•°æ®è¿˜æœ‰å­˜æ´»åˆ™å­˜å…¥è€å¹´åŒºã€‚</p><p>å…»è€åŒºæ»¡äº†ï¼Œå¼€å¯Full GCï¼ŒFGCå¤šæ¬¡ï¼Œå…»è€åŒºä¹Ÿæ— æ³•è…¾å‡ºç©ºé—´äº†ï¼ŒæŠ›å‡ºOOM</p><blockquote><p>æ°¸ä¹…ä»£</p></blockquote><p>æ˜¯ä¸€ä¸ªå¸¸é©»å†…å­˜åŒºåŸŸï¼Œç”¨äºå­˜æ”¾jdkè‡ªèº«æºå¸¦çš„Class,Interfaceå…ƒæ•°æ®ï¼Œå³è¿è¡Œç¯å¢ƒå¿…éœ€çš„ç±»ä¿¡æ¯ï¼Œå­˜æ”¾çš„æ•°æ®ä¸ä¼šè¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ï¼Œå…³é—­JVMæ‰ä¼šé‡Šæ”¾ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> JVM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JVM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ—…æ¸¸ä¿¡æ¯ç®¡ç†ç³»ç»Ÿ</title>
      <link href="2020/08/17/project-02/"/>
      <url>2020/08/17/project-02/</url>
      
        <content type="html"><![CDATA[<h1 id="éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚åˆ†æ" class="headerlink" title="éœ€æ±‚åˆ†æ"></a>éœ€æ±‚åˆ†æ</h1><p>åˆ†æå„ä¸ªæ¨¡å—å’Œç¡®å®šæŠ€æœ¯é€‰å‹</p><ul><li>ç”¨æˆ·æ¨¡å—<ul><li>ç™»å½•å’Œæ³¨å†Œ</li></ul></li><li>çœä»½æ¨¡å—<ul><li>å¢åˆ æ”¹æŸ¥</li><li>ä½¿ç”¨redisä½œä¸ºmybatisçš„ç¼“å­˜</li></ul></li><li>æ™¯ç‚¹æ¨¡å—<ul><li>å¢åˆ æ”¹æŸ¥</li><li>ä½¿ç”¨redisä½œä¸ºmybatisçš„ç¼“å­˜</li></ul></li><li>æŠ€æœ¯é€‰å‹<ul><li>å‰ç«¯ï¼švue+axios</li><li>åç«¯ï¼šspringboot + mybatis + mysql + redis</li></ul></li></ul><h1 id="åº“è¡¨è®¾è®¡"><a href="#åº“è¡¨è®¾è®¡" class="headerlink" title="åº“è¡¨è®¾è®¡"></a>åº“è¡¨è®¾è®¡</h1><p>1ã€ç³»ç»Ÿä¸­æœ‰å“ªäº›è¡¨</p><p>ç”¨æˆ·è¡¨t_userã€çœä»½è¡¨t_provinceã€æ™¯ç‚¹è¡¨t_place</p><p>2ã€è¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»</p><p>ç”¨æˆ·è¡¨æ˜¯ç‹¬ç«‹çš„ï¼›çœä»½è¡¨ä¸æ™¯ç‚¹è¡¨æ˜¯1:Nçš„å…³ç³»</p><p>3ã€è¡¨ä¸­çš„å­—æ®µ</p><p>t_userï¼šidã€usernameã€passwordã€email</p><p>t_provinceï¼šidã€nameã€tagsã€placecounts</p><p>t_placeï¼šidã€nameã€picpathã€hotticketã€dimticketã€detailsã€provinceid</p><p>åº“ï¼štravels</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> t_user<span class="token punctuation">(</span>    id <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>    username <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    password <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    email <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">create</span> <span class="token keyword">table</span> t_province<span class="token punctuation">(</span>    id <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    tags <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    placecounts <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">create</span> <span class="token keyword">table</span> t_place<span class="token punctuation">(</span>    id <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    picpath <span class="token keyword">mediumtext</span><span class="token punctuation">,</span>    hotticket <span class="token keyword">double</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    dimticket <span class="token keyword">double</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    details <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    provinceid <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token keyword">references</span> t_province<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h1 id="ç¼–ç ç¯èŠ‚"><a href="#ç¼–ç ç¯èŠ‚" class="headerlink" title="ç¼–ç ç¯èŠ‚"></a>ç¼–ç ç¯èŠ‚</h1><h2 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h2><p>1ã€åˆ›å»ºspringbooté¡¹ç›®<br><img src="/2020/08/17/project-02/1.png" alt></p><p>2ã€å¯¼å…¥druidæ•°æ®æ®æºå’Œæ–‡ä»¶ä¸Šä¼ ä¾èµ–</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>commons-fileupload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>commons-fileupload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.1.23<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>3ã€ç¼–å†™é…ç½®æ–‡ä»¶</p><pre class=" language-yml"><code class="language-yml"># æŒ‡å®šå·¥ç¨‹è®¿é—®è·¯å¾„server:  servlet:    context-path: /travelsAdminspring:  datasource:    type: com.alibaba.druid.pool.DruidDataSource    driver-class-name: com.mysql.cj.jdbc.Driver    url: jdbc:mysql://localhost:3306/travels?serverTimezone=Asia/Shanghai    username: root    password: 2824199842mybatis:  type-aliases-package: com.zyz.bean  mapper-locations: classpath:com/zyz/mapper/*.xml  configuration:    map-underscore-to-camel-case: truelogging:  level:    com:      zyz:        dao: debug        service: info        controller: info</code></pre><h2 id="å¼€å§‹ç¼–ç "><a href="#å¼€å§‹ç¼–ç " class="headerlink" title="å¼€å§‹ç¼–ç "></a>å¼€å§‹ç¼–ç </h2><h3 id="ç”¨æˆ·æ¨¡å—"><a href="#ç”¨æˆ·æ¨¡å—" class="headerlink" title="ç”¨æˆ·æ¨¡å—"></a>ç”¨æˆ·æ¨¡å—</h3><h4 id="å®ç°æ³¨å†Œå’Œç™»å½•åŠŸèƒ½"><a href="#å®ç°æ³¨å†Œå’Œç™»å½•åŠŸèƒ½" class="headerlink" title="å®ç°æ³¨å†Œå’Œç™»å½•åŠŸèƒ½"></a>å®ç°æ³¨å†Œå’Œç™»å½•åŠŸèƒ½</h4><blockquote><p>bean </p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>bean<span class="token punctuation">;</span><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> String id<span class="token punctuation">;</span>    <span class="token keyword">private</span> String username<span class="token punctuation">;</span>    <span class="token keyword">private</span> String password<span class="token punctuation">;</span>    <span class="token keyword">private</span> String email<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>dao</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>dao<span class="token punctuation">;</span><span class="token annotation punctuation">@Mapper</span><span class="token annotation punctuation">@Repository</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span><span class="token punctuation">;</span>    User <span class="token function">queryUserByName</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8" ?></span><span class="token doctype">&lt;!DOCTYPE mapper        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" ></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.dao.UserDao<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>add<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>User<span class="token punctuation">"</span></span>  <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">useGeneratedKeys</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        insert into t_user values(#{id},#{username},#{password},#{email})    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>queryUserByName<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>String<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>User<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select id,username,password,email from t_user where username=#{username}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">></span></span></code></pre><blockquote><p>service</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>service<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">register</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span><span class="token punctuation">;</span>    User <span class="token function">queryUserByName</span><span class="token punctuation">(</span>String username<span class="token punctuation">)</span><span class="token punctuation">;</span>    User <span class="token function">login</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">;</span><span class="token annotation punctuation">@Service</span><span class="token annotation punctuation">@Transactional</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> UserDao userDao<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">register</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥ç”¨æˆ·åï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥å¯†ç ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥é‚®ç®±ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// åˆ¤æ–­ç”¨æˆ·åæ˜¯å¦å­˜åœ¨</span>        User realUser <span class="token operator">=</span> userDao<span class="token punctuation">.</span><span class="token function">queryUserByName</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>realUser <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯¥ç”¨æˆ·åå·²å­˜åœ¨ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        userDao<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> User <span class="token function">queryUserByName</span><span class="token punctuation">(</span>String username<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> userDao<span class="token punctuation">.</span><span class="token function">queryUserByName</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> User <span class="token function">login</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥ç”¨æˆ·åï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥å¯†ç ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        User realuser <span class="token operator">=</span> userDao<span class="token punctuation">.</span><span class="token function">queryUserByName</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>realuser <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·åä¸å­˜åœ¨æˆ–é”™è¯¯ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>realuser<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"å¯†ç é”™è¯¯ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> realuser<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>controller</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>controller<span class="token punctuation">;</span><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> UserService userService<span class="token punctuation">;</span>    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"login"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Object<span class="token operator">></span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> User user<span class="token punctuation">,</span>String code<span class="token punctuation">,</span>HttpServletRequest request<span class="token punctuation">)</span><span class="token punctuation">{</span>        HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥éªŒè¯ç ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">// è·å–éªŒè¯ç </span>            String realcode <span class="token operator">=</span> <span class="token punctuation">(</span>String<span class="token punctuation">)</span> request<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"code"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>realcode<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"éªŒè¯ç é”™è¯¯ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            User realUser <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span>realUser<span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"æç¤ºï¼šç™»å½•æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"æç¤ºï¼š"</span><span class="token operator">+</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> map<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * ç”¨æˆ·ç™»å½•     * @param user     * @param code     * @param request     * @return     */</span>    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"register"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> User user<span class="token punctuation">,</span> String code<span class="token punctuation">,</span> HttpServletRequest request<span class="token punctuation">)</span> <span class="token punctuation">{</span>        HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// åˆ¤æ–­éªŒè¯ç æ˜¯å¦ä¸ºç©º</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥éªŒè¯ç ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">// è·å–éªŒè¯ç </span>            String realcode <span class="token operator">=</span> <span class="token punctuation">(</span>String<span class="token punctuation">)</span> request<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"code"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>realcode<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"éªŒè¯ç é”™è¯¯ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            userService<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"æç¤ºï¼šæ³¨å†ŒæˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"æç¤ºï¼š"</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> map<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * å±•ç¤ºéªŒè¯ç      * @param request     * @return     * @throws Exception     */</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"getImageCode"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">getImageCode</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// ä½¿ç”¨å·¥å…·ç±»ç”ŸæˆéªŒè¯ç å¹¶è¾“å‡º</span>        ByteArrayOutputStream os <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String code <span class="token operator">=</span> VerifyCodeUtils<span class="token punctuation">.</span><span class="token function">generateVerifyCode</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        VerifyCodeUtils<span class="token punctuation">.</span><span class="token function">outputImage</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> os<span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ä¿å­˜è‡³applicationContextåŸŸä¸­</span>        request<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"code"</span><span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å°†å›¾ç‰‡è½¬æ¢ä¸ºbase64æ ¼å¼ï¼Œè¿”å›ç»™å‰ç«¯</span>        String s <span class="token operator">=</span> Base64Utils<span class="token punctuation">.</span><span class="token function">encodeToString</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span><span class="token function">toByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"data:image/png;base64,"</span> <span class="token operator">+</span> s<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>å‰ç«¯</p><p>ä½¿ç”¨v-modelå°†è¡¨å•ä¸­çš„æ•°æ®ä¸vueä¸­dataç»‘å®š</p></blockquote><blockquote><p>ç™»å½•</p></blockquote><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"js/axios.min.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"js/vue.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span>    <span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        el<span class="token punctuation">:</span> <span class="token string">"#wrap"</span><span class="token punctuation">,</span>        data<span class="token punctuation">:</span><span class="token punctuation">{</span>            date<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>             url<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>            user<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>            code<span class="token punctuation">:</span><span class="token string">""</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        methods<span class="token punctuation">:</span><span class="token punctuation">{</span>            <span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/travelsAdmin/user/getImageCode?time="</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>                        <span class="token comment" spellcheck="true">// console.log(res.data);</span>                        <span class="token keyword">this</span><span class="token punctuation">.</span>url <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token function">getCodeImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// éªŒè¯ç ç‚¹å‡»äº‹ä»¶</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>                axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/travelsAdmin/user/login?code="</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>code<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res<span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>                    <span class="token comment" spellcheck="true">//console.log();</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">{</span>                        <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token operator">+</span><span class="token string">"ç‚¹å‡»ç¡®å®šè·³è½¬ç®¡ç†é¡µé¢"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span>JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        location<span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token string">"province/provincelist.html"</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                        <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token operator">+</span><span class="token string">"ç‚¹å‡»ç¡®å®šé‡æ–°ç™»å½•"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// æ˜¾ç¤ºéªŒè¯ç </span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// æ˜¾ç¤ºå½“å‰æ—¥æœŸ</span>            <span class="token keyword">var</span> realDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>date<span class="token operator">=</span>realDate<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"/"</span><span class="token operator">+</span><span class="token punctuation">(</span>realDate<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"/"</span><span class="token operator">+</span>realDate<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre><blockquote><p>æ³¨å†Œ</p></blockquote><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>script<span class="token operator">></span>    <span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        el<span class="token punctuation">:</span> <span class="token string">"#wrap"</span><span class="token punctuation">,</span>        data<span class="token punctuation">:</span><span class="token punctuation">{</span>            date<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>            url<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>            user<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>            code<span class="token punctuation">:</span><span class="token string">""</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        methods<span class="token punctuation">:</span><span class="token punctuation">{</span>            <span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/travelsAdmin/user/getImageCode?time="</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>                        <span class="token comment" spellcheck="true">// console.log(res.data);</span>                        <span class="token keyword">this</span><span class="token punctuation">.</span>url <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token function">getCodeImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// éªŒè¯ç ç‚¹å‡»äº‹ä»¶</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// æ³¨å†Œ</span>                <span class="token comment" spellcheck="true">// console.log(this.user);</span>                <span class="token comment" spellcheck="true">// console.log(this.code);</span>                <span class="token comment" spellcheck="true">// å‘èµ·å¼‚æ­¥è¯·æ±‚</span>                axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/travelsAdmin/user/register?code="</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>code<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res<span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>                    <span class="token comment" spellcheck="true">// æŸ¥çœ‹è¿”å›çš„æ•°æ®</span>                    <span class="token comment" spellcheck="true">// console.log(res.data);</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">{</span>                        <span class="token keyword">if</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token operator">+</span><span class="token string">"ç‚¹å‡»ç¡®å®šè·³è½¬ç™»å½•é¡µé¢"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                            location<span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token string">"login.html"</span>                        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>                            location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token punctuation">}</span>                    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>                        <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// æ˜¾ç¤ºéªŒè¯ç </span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// æ˜¾ç¤ºå½“å‰æ—¥æœŸ</span>            <span class="token keyword">var</span> realDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>date<span class="token operator">=</span>realDate<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"/"</span><span class="token operator">+</span><span class="token punctuation">(</span>realDate<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"/"</span><span class="token operator">+</span>realDate<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre><p>åœ¨ç®¡ç†é¡µé¢æ˜¾ç¤ºå½“å‰ç”¨æˆ·åï¼š</p><pre class=" language-js"><code class="language-js"><span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">var</span> user <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>user<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        location<span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token string">"http://localhost:8080/travelsAdmin/login.html"</span>    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>user <span class="token operator">=</span> JSON<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre><p>ç”¨æˆ·é€€å‡ºï¼š</p><pre class=" language-html"><code class="language-html"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>javascript:;<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>logout<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">float</span><span class="token punctuation">:</span> right</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å®‰å…¨é€€å‡º<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code></pre><pre class=" language-js"><code class="language-js">methods<span class="token punctuation">:</span><span class="token punctuation">{</span>    <span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        location<span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token string">"http://localhost:8080/travelsAdmin/login.html"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="çœä»½æ¨¡å—"><a href="#çœä»½æ¨¡å—" class="headerlink" title="çœä»½æ¨¡å—"></a>çœä»½æ¨¡å—</h3><h4 id="å±•ç¤ºæ‰€æœ‰çœä»½"><a href="#å±•ç¤ºæ‰€æœ‰çœä»½" class="headerlink" title="å±•ç¤ºæ‰€æœ‰çœä»½"></a>å±•ç¤ºæ‰€æœ‰çœä»½</h4><blockquote><p>bean</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>bean<span class="token punctuation">;</span><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Province</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> String id<span class="token punctuation">;</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> String tags<span class="token punctuation">;</span>    <span class="token keyword">private</span> Integer placecounts<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>dao</p></blockquote><p>æŠ½å–BaseDao</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * * @param &lt;T> ç±»å‹ * @param &lt;K> æ¡ä»¶å‚æ•°çš„ç±»å‹ */</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BaseDao</span><span class="token operator">&lt;</span>T<span class="token punctuation">,</span>K<span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>T t<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span>K k<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span>T t<span class="token punctuation">)</span><span class="token punctuation">;</span>    T <span class="token function">queryByName</span><span class="token punctuation">(</span>K k<span class="token punctuation">)</span><span class="token punctuation">;</span>    T <span class="token function">queryById</span><span class="token punctuation">(</span>K k<span class="token punctuation">)</span><span class="token punctuation">;</span>    List<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">listByPage</span><span class="token punctuation">(</span>Integer start<span class="token punctuation">,</span>Integer rows<span class="token punctuation">)</span><span class="token punctuation">;</span>    Integer <span class="token function">findTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>ProvinceDaoç»§æ‰¿BaseDao</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>dao<span class="token punctuation">;</span><span class="token annotation punctuation">@Mapper</span><span class="token annotation punctuation">@Repository</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ProvinceDao</span> <span class="token keyword">extends</span> <span class="token class-name">BaseDao</span><span class="token operator">&lt;</span>Province<span class="token punctuation">,</span>String<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span> <span class="token operator">?</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE mapper        PUBLIC <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>        <span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span> <span class="token operator">></span><span class="token operator">&lt;</span>mapper namespace<span class="token operator">=</span><span class="token string">"com.zyz.dao.ProvinceDao"</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>  åˆ†é¡µæŸ¥è¯¢  <span class="token operator">--</span><span class="token operator">></span>    <span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">"listByPage"</span> resultType<span class="token operator">=</span><span class="token string">"Province"</span><span class="token operator">></span>        select id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>tags<span class="token punctuation">,</span>placecounts from t_province        order by placecounts desc        limit #<span class="token punctuation">{</span>start<span class="token punctuation">}</span><span class="token punctuation">,</span>#<span class="token punctuation">{</span>rows<span class="token punctuation">}</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> æŸ¥è¯¢æ€»è®°å½•æ•° <span class="token operator">--</span><span class="token operator">></span>    <span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">"findTotal"</span> resultType<span class="token operator">=</span><span class="token string">"Integer"</span><span class="token operator">></span>        select <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> from t_province    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>mapper<span class="token operator">></span></code></pre><blockquote><p>service</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>service<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ProvinceService</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * åˆ†é¡µæŸ¥è¯¢     * @param page  å½“å‰é¡µ     * @param rows  æ¯ä¸€é¡µæ˜¾ç¤ºçš„è®°å½•æ•°     * @return     */</span>    List<span class="token operator">&lt;</span>Province<span class="token operator">></span> <span class="token function">listByPage</span><span class="token punctuation">(</span>Integer page<span class="token punctuation">,</span> Integer rows<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * æŸ¥è¯¢æ€»è®°å½•æ•°     * @return     */</span>    Integer <span class="token function">findTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>Province province<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span>String id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span>Province province<span class="token punctuation">)</span><span class="token punctuation">;</span>    Province <span class="token function">queryById</span><span class="token punctuation">(</span>String id<span class="token punctuation">)</span><span class="token punctuation">;</span>    Province <span class="token function">queryByName</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">;</span><span class="token annotation punctuation">@Service</span><span class="token annotation punctuation">@Transactional</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProvinceServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">ProvinceService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> ProvinceDao provinceDao<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Province<span class="token operator">></span> <span class="token function">listByPage</span><span class="token punctuation">(</span>Integer page<span class="token punctuation">,</span> Integer rows<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> start <span class="token operator">=</span> <span class="token punctuation">(</span>page<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>rows<span class="token punctuation">;</span>        <span class="token keyword">return</span> provinceDao<span class="token punctuation">.</span><span class="token function">listByPage</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span>rows<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> Integer <span class="token function">findTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> provinceDao<span class="token punctuation">.</span><span class="token function">findTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>Province province<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span>String id<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span>Province province<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> Province <span class="token function">queryByName</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> null<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>controller</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>controller<span class="token punctuation">;</span><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"province"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProvinceController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> ProvinceService provinceService<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * æŸ¥è¯¢æ‰€æœ‰çœä»½     * @param page     * @param rows     * @return     */</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"listByPage"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> <span class="token function">listByPage</span><span class="token punctuation">(</span>Integer page<span class="token punctuation">,</span> Integer rows<span class="token punctuation">)</span> <span class="token punctuation">{</span>        page <span class="token operator">=</span> page <span class="token operator">==</span> null <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> page<span class="token punctuation">;</span>        rows <span class="token operator">=</span> rows <span class="token operator">==</span> null <span class="token operator">?</span> <span class="token number">4</span> <span class="token operator">:</span> rows<span class="token punctuation">;</span>        HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ†é¡µå¤„ç†</span>        List<span class="token operator">&lt;</span>Province<span class="token operator">></span> provinces <span class="token operator">=</span> provinceService<span class="token punctuation">.</span><span class="token function">listByPage</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> rows<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è®¡ç®—æ€»é¡µæ•°</span>        Integer total <span class="token operator">=</span> provinceService<span class="token punctuation">.</span><span class="token function">findTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Integer totalPage <span class="token operator">=</span> total <span class="token operator">%</span> rows <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> total <span class="token operator">/</span> rows <span class="token operator">:</span> <span class="token punctuation">(</span>total <span class="token operator">/</span> rows<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"provinces"</span><span class="token punctuation">,</span> provinces<span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"total"</span><span class="token punctuation">,</span> total<span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"totalPage"</span><span class="token punctuation">,</span> totalPage<span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"page"</span><span class="token punctuation">,</span> page<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> map<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>å‰ç«¯</p></blockquote><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>script<span class="token operator">></span>    <span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        el<span class="token punctuation">:</span> <span class="token string">"#wrap"</span><span class="token punctuation">,</span>        data<span class="token punctuation">:</span><span class="token punctuation">{</span>            date<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>            url<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>            user<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>            provinces<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            page<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>            rows<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>            totalPage<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>            total<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        methods<span class="token punctuation">:</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// åˆ¤æ–­æ˜¯å¦ç™»å½•</span>            <span class="token function">isLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">var</span> user <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>user<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    location<span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token string">"http://localhost:8080/travelsAdmin/login.html"</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                    <span class="token keyword">this</span><span class="token punctuation">.</span>user <span class="token operator">=</span> JSON<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true">// æ˜¾ç¤ºå½“å‰æ—¥æœŸ</span>            <span class="token function">showDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">var</span> realDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>date<span class="token operator">=</span>realDate<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"/"</span><span class="token operator">+</span><span class="token punctuation">(</span>realDate<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"/"</span><span class="token operator">+</span>realDate<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true">// é€€å‡º</span>            <span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                location<span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token string">"http://localhost:8080/travelsAdmin/login.html"</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true">// æŸ¥è¯¢æ‰€æœ‰çœä»½</span>            <span class="token function">listAll</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>page <span class="token operator">=</span> page<span class="token punctuation">;</span>                axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/travelsAdmin/province/listByPage?page="</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>page<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res<span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>                    <span class="token keyword">this</span><span class="token punctuation">.</span>provinces <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>provinces<span class="token punctuation">;</span>                    <span class="token keyword">this</span><span class="token punctuation">.</span>page <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>page<span class="token punctuation">;</span>                    <span class="token keyword">this</span><span class="token punctuation">.</span>total <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>total<span class="token punctuation">;</span>                    <span class="token keyword">this</span><span class="token punctuation">.</span>totalPage <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>totalPage<span class="token punctuation">;</span>                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// åˆ¤æ–­æ˜¯å¦ç™»å½•</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// æ˜¾ç¤ºå½“å‰æ—¥æœŸ</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">showDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// æŸ¥è¯¢æ‰€æœ‰çœä»½</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">listAll</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre><p>éå†å½“å‰æŸ¥è¯¢åˆ°çš„ä¿¡æ¯</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>province in provinces<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>province.id<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">v-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>province.id<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">v-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>province.name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">v-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>province.tags<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">v-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>province.placecounts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">></span></span></code></pre><p>åˆ†é¡µæ§ä»¶</p><pre class=" language-html"><code class="language-html"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pages<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>javascript:;<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>page!<span class="token punctuation">=</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>listAll(page-1)<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>page<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token entity" title="&lt;">&amp;lt;</span>ä¸Šä¸€é¡µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>javascript:;<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>page<span class="token punctuation">=</span><span class="token punctuation">=</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>page<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token entity" title="&lt;">&amp;lt;</span>ä¸Šä¸€é¡µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>num in totalPage<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>javascript:;<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>page<span class="token punctuation">"</span></span>  <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>num!<span class="token punctuation">=</span>page<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>listAll(num)<span class="token punctuation">"</span></span> <span class="token attr-name">v-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>num<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>javascript:;<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>page<span class="token punctuation">"</span></span>  <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>num<span class="token punctuation">=</span><span class="token punctuation">=</span>page<span class="token punctuation">"</span></span> <span class="token attr-name">v-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>num<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>javascript:;<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>page!<span class="token punctuation">=</span>totalPage<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>listAll(page+1)<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>page<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¸‹ä¸€é¡µ<span class="token entity" title="&gt;">&amp;gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>javascript:;<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>page<span class="token punctuation">=</span><span class="token punctuation">=</span>totalPage<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>page<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¸‹ä¸€é¡µ<span class="token entity" title="&gt;">&amp;gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><h4 id="æ·»åŠ çœä»½"><a href="#æ·»åŠ çœä»½" class="headerlink" title="æ·»åŠ çœä»½"></a>æ·»åŠ çœä»½</h4><blockquote><p>dao</p></blockquote><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--  æ·»åŠ çœä»½  --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>add<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Province<span class="token punctuation">"</span></span> <span class="token attr-name">useGeneratedKeys</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    insert into t_province values(#{id},#{name},#{tags},#{placecounts})<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--  æ ¹æ®åç§°æŸ¥çœä»½  --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>queryByName<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>String<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Province<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    select id,name,tags,placecounts from t_province where name=#{name}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre><blockquote><p>service</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>Province province<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>province<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥çœä»½ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>province<span class="token punctuation">.</span><span class="token function">getTags</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">throw</span>  <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥æ ‡ç­¾ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>province<span class="token punctuation">.</span><span class="token function">getPlacecounts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥æ™¯ç‚¹æ•°é‡ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Province realProvince <span class="token operator">=</span> provinceDao<span class="token punctuation">.</span><span class="token function">queryByName</span><span class="token punctuation">(</span>province<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>ObjectUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>realProvince<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯¥çœä»½å·²å­˜åœ¨ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    provinceDao<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>province<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>controller</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * æ·»åŠ çœä»½ * @param province * @return */</span><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"add"</span><span class="token punctuation">)</span><span class="token keyword">public</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Object<span class="token operator">></span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> Province province<span class="token punctuation">)</span><span class="token punctuation">{</span>    HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        provinceService<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>province<span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"æç¤ºï¼šæ·»åŠ æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"æç¤ºï¼š"</span><span class="token operator">+</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> map<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>å‰ç«¯</p></blockquote><p>çœä»½ç®¡ç†é¡µï¼š</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>toAdd<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>æ·»åŠ çœä»½<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></code></pre><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// è·³è½¬æ·»åŠ é¡µé¢</span><span class="token function">toAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    location<span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token string">"addprovince.html"</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>æ·»åŠ é¡µï¼š</p><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// æ·»åŠ çœä»½æ–¹æ³•</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/travelsAdmin/province/add"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>province<span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg <span class="token operator">+</span> <span class="token string">"ç‚¹å‡»ç¡®å®šè·³è½¬ç®¡ç†é¡µé¢"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">"provincelist.html"</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                    location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><h4 id="åˆ é™¤çœä»½"><a href="#åˆ é™¤çœä»½" class="headerlink" title="åˆ é™¤çœä»½"></a>åˆ é™¤çœä»½</h4><blockquote><p>dao</p></blockquote><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--  åˆ é™¤çœä»½  --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>delete<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>String<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    delete from t_province where id = #{id}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>delete</span><span class="token punctuation">></span></span></code></pre><blockquote><p>serivce</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span>String id<span class="token punctuation">)</span> <span class="token punctuation">{</span>    provinceDao<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>controller</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * åˆ é™¤çœä»½ * @param id * @return*/</span><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"delete"</span><span class="token punctuation">)</span><span class="token keyword">public</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Object<span class="token operator">></span> <span class="token function">delete</span><span class="token punctuation">(</span>String id<span class="token punctuation">)</span><span class="token punctuation">{</span>    HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        provinceService<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"æç¤ºï¼šåˆ é™¤æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"æç¤ºï¼šåˆ é™¤å¤±è´¥"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> map<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre></blockquote><blockquote><p>å‰ç«¯</p></blockquote><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>javascript:;<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>deletePro(province.id)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>åˆ é™¤çœä»½<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code></pre><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// åˆ é™¤çœä»½</span><span class="token function">deletePro</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">"ç¡®å®šåˆ é™¤å—ï¼Ÿ"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/travelsAdmin/province/delete?id="</span><span class="token operator">+</span>id<span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>                    location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                    <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="ä¿®æ”¹çœä»½"><a href="#ä¿®æ”¹çœä»½" class="headerlink" title="ä¿®æ”¹çœä»½"></a>ä¿®æ”¹çœä»½</h4><blockquote><p>dao</p></blockquote><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--  æ ¹æ®idæŸ¥è¯¢çœä»½  --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>queryById<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>String<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Province<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    select id,name,tags,placecounts from t_province where id = #{id}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--  ä¿®æ”¹çœä»½  --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>update<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Province<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    update t_province set name=#{name},tags=#{tags},placecounts=#{placecounts}    where id=#{id}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">></span></span></code></pre><blockquote><p>service</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span>Province province<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>province<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥çœä»½ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>province<span class="token punctuation">.</span><span class="token function">getTags</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">throw</span>  <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥æ ‡ç­¾ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>province<span class="token punctuation">.</span><span class="token function">getPlacecounts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥æ™¯ç‚¹æ•°é‡ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    provinceDao<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>province<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> Province <span class="token function">queryById</span><span class="token punctuation">(</span>String id<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> provinceDao<span class="token punctuation">.</span><span class="token function">queryById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>controller</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * ä¿®æ”¹çœä»½ * @param province * @return */</span><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"update"</span><span class="token punctuation">)</span><span class="token keyword">public</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Object<span class="token operator">></span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> Province province<span class="token punctuation">)</span><span class="token punctuation">{</span>    HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        provinceService<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>province<span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"æç¤ºï¼šä¿®æ”¹æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"æç¤ºï¼š"</span><span class="token operator">+</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> map<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/** * è·å–çœä»½ * @param id * @return */</span><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"getProvince"</span><span class="token punctuation">)</span><span class="token keyword">public</span> Province <span class="token function">getProvince</span><span class="token punctuation">(</span>String id<span class="token punctuation">)</span><span class="token punctuation">{</span>    Province province <span class="token operator">=</span> provinceService<span class="token punctuation">.</span><span class="token function">queryById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> province<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>å‰ç«¯</p></blockquote><p>ç®¡ç†é¡µé¢ï¼š</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>javascript:;<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>toUpdate(province.id)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¿®æ”¹çœä»½<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code></pre><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// è·³è½¬ä¿®æ”¹é¡µé¢</span><span class="token function">toUpdate</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>    location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">"updateprovince.html?id="</span> <span class="token operator">+</span> id<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>ä¿®æ”¹é¡µé¢ï¼š</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>update<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¿® æ”¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token entity" title="&emsp;">&amp;emsp;</span></code></pre><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">    <span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        el<span class="token punctuation">:</span> <span class="token string">"#wrap"</span><span class="token punctuation">,</span>        data<span class="token punctuation">:</span> <span class="token punctuation">{</span>            date<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>            province<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// æ˜¾ç¤ºå½“å‰æ—¥æœŸæ–¹æ³•</span>            <span class="token function">showDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">var</span> realDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>date <span class="token operator">=</span> realDate<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>realDate<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> realDate<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true">// æ ¹æ®idæŸ¥è¯¢å½“å‰çœä»½</span>            <span class="token function">getProvince</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// è·å–id</span>                <span class="token keyword">var</span> start <span class="token operator">=</span> location<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">"="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">var</span> id <span class="token operator">=</span> location<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>start<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/travelsAdmin/province/getProvince?id="</span><span class="token operator">+</span>id<span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res<span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>                        <span class="token comment" spellcheck="true">// console.log(res.data);</span>                        <span class="token keyword">this</span><span class="token punctuation">.</span>province <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>                    <span class="token punctuation">}</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true">// ä¿®æ”¹çœä»½æ–¹æ³•</span>            <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/travelsAdmin/province/update"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>province<span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>                            <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>                            location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">"provincelist.html"</span><span class="token punctuation">;</span>                        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                            <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token punctuation">}</span>                    <span class="token punctuation">}</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// æ˜¾ç¤ºå½“å‰æ—¥æœŸ</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">showDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// æŸ¥è¯¢å½“å‰çœä»½çš„ä¿¡æ¯</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getProvince</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h3 id="æ™¯ç‚¹æ¨¡å—"><a href="#æ™¯ç‚¹æ¨¡å—" class="headerlink" title="æ™¯ç‚¹æ¨¡å—"></a>æ™¯ç‚¹æ¨¡å—</h3><h4 id="æ ¹æ®çœä»½å±•ç¤ºè¯¥çœä»½çš„æ‰€æœ‰æ™¯ç‚¹"><a href="#æ ¹æ®çœä»½å±•ç¤ºè¯¥çœä»½çš„æ‰€æœ‰æ™¯ç‚¹" class="headerlink" title="æ ¹æ®çœä»½å±•ç¤ºè¯¥çœä»½çš„æ‰€æœ‰æ™¯ç‚¹"></a>æ ¹æ®çœä»½å±•ç¤ºè¯¥çœä»½çš„æ‰€æœ‰æ™¯ç‚¹</h4><blockquote><p>åˆ›å»ºå®ä½“ç±»</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>bean<span class="token punctuation">;</span><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Place</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> String id<span class="token punctuation">;</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> String picpath<span class="token punctuation">;</span>    <span class="token keyword">private</span> Double hotticket<span class="token punctuation">;</span>    <span class="token keyword">private</span> Double dimticket<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æ·¡å­£é—¨ç¥¨</span>    <span class="token keyword">private</span> String details<span class="token punctuation">;</span>    <span class="token keyword">private</span> String provinceid<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>daoå±‚</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>dao<span class="token punctuation">;</span><span class="token annotation punctuation">@Mapper</span><span class="token annotation punctuation">@Repository</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">PlaceDao</span>  <span class="token keyword">extends</span> <span class="token class-name">BaseDao</span><span class="token operator">&lt;</span>Place<span class="token punctuation">,</span>String<span class="token operator">></span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * æ ¹æ®çœä»½idè¿›è¡Œåˆ†é¡µæŸ¥è¯¢     * @param start     * @param rows     * @param provinceId     * @return     */</span>    List<span class="token operator">&lt;</span>Place<span class="token operator">></span> <span class="token function">listByProvinceId</span><span class="token punctuation">(</span>Integer start<span class="token punctuation">,</span>Integer rows<span class="token punctuation">,</span>String provinceId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * æ ¹æ®çœä»½æŸ¥è¯¢æ™¯ç‚¹æ€»æ•°     * @param provinceId     * @return     */</span>    Integer <span class="token function">findTotalByProvinceId</span><span class="token punctuation">(</span>String provinceId<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8" ?></span><span class="token doctype">&lt;!DOCTYPE mapper        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" ></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.dao.PlaceDao<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- åˆ†é¡µæŸ¥è¯¢å½“å‰çœä»½çš„æ‰€æœ‰æ™¯ç‚¹ä¿¡æ¯å¹¶æ’åº  --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>listByProvinceId<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Place<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select id,name,picpath,hotticket,dimticket,details,provinceid        from t_place where provinceid = #{provinceId}        order by hotticket        limit #{start},#{rows}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- æŸ¥è¯¢å½“å‰çœä»½çš„æ™¯ç‚¹çš„ä¸ªæ•°   --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>findTotalByProvinceId<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>String<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Integer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select count(*) from t_place where provinceid=#{provinceId}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">></span></span></code></pre><blockquote><p>serivceå±‚</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>service<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">PlaceService</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * æ ¹æ®çœä»½idè¿›è¡Œåˆ†é¡µæŸ¥è¯¢     * @param page     * @param rows     * @param provinceId     * @return     */</span>    List<span class="token operator">&lt;</span>Place<span class="token operator">></span> <span class="token function">listByProvinceId</span><span class="token punctuation">(</span>Integer page<span class="token punctuation">,</span> Integer rows<span class="token punctuation">,</span> String provinceId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * æ ¹æ®çœä»½æŸ¥è¯¢æ™¯ç‚¹æ€»æ•°     * @param provinceId     * @return     */</span>    Integer <span class="token function">findTotalByProvinceId</span><span class="token punctuation">(</span>String provinceId<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">;</span><span class="token annotation punctuation">@Service</span><span class="token annotation punctuation">@Transactional</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PlaceServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">PlaceService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> PlaceDao placeDao<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> ProvinceDao provinceDao<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Place<span class="token operator">></span> <span class="token function">listByProvinceId</span><span class="token punctuation">(</span>Integer page<span class="token punctuation">,</span> Integer rows<span class="token punctuation">,</span> String provinceId<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> start <span class="token operator">=</span> <span class="token punctuation">(</span>page<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>rows<span class="token punctuation">;</span>        <span class="token keyword">return</span> placeDao<span class="token punctuation">.</span><span class="token function">listByProvinceId</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span>rows<span class="token punctuation">,</span>provinceId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> Integer <span class="token function">findTotalByProvinceId</span><span class="token punctuation">(</span>String provinceId<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> placeDao<span class="token punctuation">.</span><span class="token function">findTotalByProvinceId</span><span class="token punctuation">(</span>provinceId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>controller</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>controller<span class="token punctuation">;</span><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"place"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PlaceController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> PlaceService placeService<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * å±•ç¤ºæ‰€æœ‰æ™¯ç‚¹     * @param page     * @param rows     * @param provinceId     * @return     */</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"listAll"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> <span class="token function">listAll</span><span class="token punctuation">(</span>Integer page<span class="token punctuation">,</span> Integer rows<span class="token punctuation">,</span> String provinceId<span class="token punctuation">)</span> <span class="token punctuation">{</span>        page <span class="token operator">=</span> page <span class="token operator">==</span> null <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> page<span class="token punctuation">;</span>        rows <span class="token operator">=</span> rows <span class="token operator">==</span> null <span class="token operator">?</span> <span class="token number">3</span> <span class="token operator">:</span> rows<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ€»è®°å½•æ•°</span>        Integer total <span class="token operator">=</span> placeService<span class="token punctuation">.</span><span class="token function">findTotalByProvinceId</span><span class="token punctuation">(</span>provinceId<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ€»é¡µæ•°</span>        Integer totalPage <span class="token operator">=</span> total <span class="token operator">%</span> rows <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> total <span class="token operator">/</span> rows <span class="token operator">:</span> <span class="token punctuation">(</span>total <span class="token operator">/</span> rows<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ™¯ç‚¹ä¿¡æ¯</span>        List<span class="token operator">&lt;</span>Place<span class="token operator">></span> places <span class="token operator">=</span> placeService<span class="token punctuation">.</span><span class="token function">listByProvinceId</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> rows<span class="token punctuation">,</span> provinceId<span class="token punctuation">)</span><span class="token punctuation">;</span>        HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"total"</span><span class="token punctuation">,</span> total<span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"totalPage"</span><span class="token punctuation">,</span> totalPage<span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"places"</span><span class="token punctuation">,</span> places<span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"page"</span><span class="token punctuation">,</span> page<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> map<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="å¢åŠ æ™¯ç‚¹"><a href="#å¢åŠ æ™¯ç‚¹" class="headerlink" title="å¢åŠ æ™¯ç‚¹"></a>å¢åŠ æ™¯ç‚¹</h4><blockquote><p>daoå±‚</p><p>ç»§æ‰¿äº†BaseDaoä¸­çš„å¢åˆ æ”¹æ–¹æ³•ï¼Œä»¥åŠæ·»åŠ æ‰€éœ€è¦çš„åˆ¤æ–­æ™¯ç‚¹æ˜¯å¦å·²ç»å­˜åœ¨ çš„queryByName()æ–¹æ³•ï¼Œä¿®æ”¹æ‰€éœ€è¦çš„å›æ˜¾å½“å‰æ™¯ç‚¹ä¿¡æ¯çš„queryById()æ–¹æ³•ï¼Œå› æ­¤åªéœ€è¦ç¼–å†™å¯¹åº”çš„mapperæ–‡ä»¶å°±è¡Œ</p></blockquote><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--æ·»åŠ æ™¯ç‚¹--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>add<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Place<span class="token punctuation">"</span></span> <span class="token attr-name">useGeneratedKeys</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    insert into t_place    values(#{id},#{name},#{picpath},#{hotticket},#{dimticket},#{details},#{provinceid})<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--  æ ¹æ®åç§°æŸ¥è¯¢æ™¯ç‚¹  --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>queryByName<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>String<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Place<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    select id,name,picpath,hotticket,dimticket,details,provinceid    from t_place where name = #{name}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre><blockquote><p>serviceå±‚ï¼Œæ·»åŠ add()æ–¹æ³•å¹¶å®ç°</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>Place place<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>Place place<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>place<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥æ™¯ç‚¹åï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>place<span class="token punctuation">.</span><span class="token function">getHotticket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">throw</span>  <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥æ—ºå­£é—¨ç¥¨ä»·æ ¼ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>place<span class="token punctuation">.</span><span class="token function">getDimticket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥æ·¡å­£é—¨ç¥¨ä»·æ ¼ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>place<span class="token punctuation">.</span><span class="token function">getProvinceid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·é€‰æ‹©çœä»½ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Place place1<span class="token operator">=</span> placeDao<span class="token punctuation">.</span><span class="token function">queryByName</span><span class="token punctuation">(</span>place<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>ObjectUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>place1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯¥æ™¯ç‚¹å·²å­˜åœ¨ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// æ›´æ–°æ­¤æ™¯ç‚¹çœä»½çš„æ™¯ç‚¹æ•°é‡</span>    Province province <span class="token operator">=</span> provinceDao<span class="token punctuation">.</span><span class="token function">queryById</span><span class="token punctuation">(</span>place<span class="token punctuation">.</span><span class="token function">getProvinceid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    province<span class="token punctuation">.</span><span class="token function">setPlacecounts</span><span class="token punctuation">(</span>province<span class="token punctuation">.</span><span class="token function">getPlacecounts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    provinceDao<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>province<span class="token punctuation">)</span><span class="token punctuation">;</span>    placeDao<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>place<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>controllerå±‚ ç¼–å†™å¤„ç†æ·»åŠ è¯·æ±‚çš„æ–¹æ³•</p></blockquote><p>é…ç½®æ–‡ä»¶ä¸Šä¼ è·¯å¾„ï¼š</p><pre class=" language-yml"><code class="language-yml"># æ–‡ä»¶ä¸Šä¼ è·¯å¾„upload:  dir: D:\img</code></pre><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// æ³¨å…¥æ–‡ä»¶ä¸Šä¼ è·¯å¾„</span><span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"${upload.dir}"</span><span class="token punctuation">)</span><span class="token keyword">private</span> String uploadPath<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** æ·»åŠ æ™¯ç‚¹* @param place* @param file* @return*/</span><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"add"</span><span class="token punctuation">)</span><span class="token keyword">public</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> <span class="token function">add</span><span class="token punctuation">(</span>Place place<span class="token punctuation">,</span> MultipartFile file<span class="token punctuation">)</span> <span class="token punctuation">{</span>    Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ObjectUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// ä¿®æ”¹æ–‡ä»¶å</span>            String filename <span class="token operator">=</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"."</span>                <span class="token operator">+</span> FilenameUtils<span class="token punctuation">.</span><span class="token function">getExtension</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// å°†æ–‡ä»¶è½¬æ¢ä¸ºbase64æ ¼å¼å­˜å‚¨åˆ°æ•°æ®åº“ä¸­</span>            place<span class="token punctuation">.</span><span class="token function">setPicpath</span><span class="token punctuation">(</span>Base64Utils<span class="token punctuation">.</span><span class="token function">encodeToString</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            placeService<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>place<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// æ–‡ä»¶ä¸Šä¼ </span>            file<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>uploadPath<span class="token punctuation">,</span>filename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"æç¤ºï¼šæ·»åŠ æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·ä¸Šä¼ å›¾ç‰‡ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"æç¤º"</span><span class="token operator">+</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> map<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>ä¿®æ”¹å‰ç«¯é¡µé¢</p></blockquote><p>æºå¸¦çœä»½idè·³è½¬åˆ°æ·»åŠ é¡µé¢ï¼Œä¾¿äºè¿”å›</p><pre class=" language-js"><code class="language-js"><span class="token function">toAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">var</span> start <span class="token operator">=</span> location<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> provinceid <span class="token operator">=</span> location<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>start<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">"addviewspot.html?provinceid="</span><span class="token operator">+</span>provinceid<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">    <span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        el<span class="token punctuation">:</span> <span class="token string">"#wrap"</span><span class="token punctuation">,</span>        data<span class="token punctuation">:</span> <span class="token punctuation">{</span>            date<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>            provinces<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            place<span class="token punctuation">:</span> <span class="token punctuation">{</span>                name<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>                picpath<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>                hotticket<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>                dimticket<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>                details<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>                provinceid<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>                myfile<span class="token punctuation">:</span> <span class="token string">""</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// åˆ¤æ–­æ˜¯å¦ç™»å½•</span>            <span class="token function">isLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">var</span> user <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"è¯·ç™»å½•ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">"http://localhost:8080/travelsAdmin/login.html"</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true">// æ˜¾ç¤ºå½“å‰æ—¥æœŸ</span>            <span class="token function">showDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">var</span> realDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>date <span class="token operator">=</span> realDate<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>realDate<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> realDate<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true">// æŸ¥è¯¢çœä»½</span>            <span class="token function">listAllProvince</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/travelsAdmin/province/listByPage?rows=35"</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>                        <span class="token comment" spellcheck="true">//console.log(res.data.provinces);</span>                        <span class="token keyword">this</span><span class="token punctuation">.</span>provinces <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>provinces<span class="token punctuation">;</span>                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true">// æ·»åŠ æ™¯ç‚¹</span>            <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// æ„é€ è¡¨å•</span>                <span class="token keyword">var</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>place<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>                formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"hotticket"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>place<span class="token punctuation">.</span>hotticket<span class="token punctuation">)</span><span class="token punctuation">;</span>                formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"dimticket"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>place<span class="token punctuation">.</span>dimticket<span class="token punctuation">)</span><span class="token punctuation">;</span>                formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"provinceid"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>place<span class="token punctuation">.</span>provinceid<span class="token punctuation">)</span><span class="token punctuation">;</span>                formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"details"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>place<span class="token punctuation">.</span>details<span class="token punctuation">)</span><span class="token punctuation">;</span>                formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"file"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>myfile<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>formData<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>                    method<span class="token punctuation">:</span> <span class="token string">"post"</span><span class="token punctuation">,</span>                    url<span class="token punctuation">:</span> <span class="token string">"http://localhost:8080/travelsAdmin/place/add"</span><span class="token punctuation">,</span>                    data<span class="token punctuation">:</span> formData<span class="token punctuation">,</span>                    headers<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'multipart/form-data'</span><span class="token punctuation">}</span>                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg <span class="token operator">+</span> <span class="token string">"ç‚¹å‡»ç¡®å®šè·³è½¬æ™¯ç‚¹ç®¡ç†é¡µé¢"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                            location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">"viewspotlist.html?provinceid="</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>place<span class="token punctuation">.</span>provinceid<span class="token punctuation">;</span>                        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                            location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token punctuation">}</span>                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                        <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg <span class="token operator">+</span> <span class="token string">"ç‚¹å‡»ç¡®å®šé‡æ–°æ·»åŠ "</span><span class="token punctuation">)</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">var</span> start <span class="token operator">=</span> location<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">var</span> provinceid <span class="token operator">=</span> location<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>start <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">"viewspotlist.html?provinceid="</span> <span class="token operator">+</span> provinceid<span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// åˆ¤æ–­æ˜¯å¦ç™»å½•</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// æ˜¾ç¤ºå½“å‰æ—¥æœŸ</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">showDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// æŸ¥è¯¢æ‰€æœ‰çœä»½</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">listAllProvince</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h4 id="åˆ é™¤æ™¯ç‚¹"><a href="#åˆ é™¤æ™¯ç‚¹" class="headerlink" title="åˆ é™¤æ™¯ç‚¹"></a>åˆ é™¤æ™¯ç‚¹</h4><blockquote><p>dao</p></blockquote><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- åˆ é™¤æ™¯ç‚¹   --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>delete<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>String<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    delete from t_place where id = #{id}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>delete</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--  æ ¹æ®idæŸ¥è¯¢æ™¯ç‚¹ä¿¡æ¯  --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>queryById<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Place<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>String<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    select id,name,picpath,hotticket,dimticket,details,provinceid    from t_place    where id =#{id}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre><blockquote><p>service</p></blockquote><pre><code>void delete(String id);</code></pre><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span>String id<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// è¯¥æ™¯ç‚¹çš„çœä»½æ™¯ç‚¹æ•°-1</span>    <span class="token comment" spellcheck="true">// å…ˆæŸ¥è¯¢è¯¥æ™¯ç‚¹çš„æ‰€æœ‰ä¿¡æ¯</span>    Place place <span class="token operator">=</span> placeDao<span class="token punctuation">.</span><span class="token function">queryById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// æŸ¥è¯¢è¯¥æ™¯ç‚¹æ‰€åœ¨çœä»½çš„ä¿¡æ¯</span>    Province province <span class="token operator">=</span> provinceDao<span class="token punctuation">.</span><span class="token function">queryById</span><span class="token punctuation">(</span>place<span class="token punctuation">.</span><span class="token function">getProvinceid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// æ›´æ–°è¯¥çœä»½çš„æ™¯ç‚¹æ•°</span>    province<span class="token punctuation">.</span><span class="token function">setPlacecounts</span><span class="token punctuation">(</span>province<span class="token punctuation">.</span><span class="token function">getPlacecounts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    provinceDao<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>province<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// åˆ é™¤æ™¯ç‚¹</span>    placeDao<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>controller</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * åˆ é™¤æ™¯ç‚¹ * @param id * @return */</span><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"delete"</span><span class="token punctuation">)</span><span class="token keyword">public</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Object<span class="token operator">></span> <span class="token function">delete</span><span class="token punctuation">(</span>String id<span class="token punctuation">)</span><span class="token punctuation">{</span>    HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        placeService<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"æç¤ºï¼šåˆ é™¤æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"æç¤ºï¼š"</span><span class="token operator">+</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> map<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>å‰ç«¯</p></blockquote><pre class=" language-js"><code class="language-js"><span class="token function">deletePlace</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">"ç¡®å®šåˆ é™¤æ­¤æ™¯ç‚¹å—ï¼Ÿ"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/travelsAdmin/place/delete?id="</span> <span class="token operator">+</span> id<span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"åˆ é™¤æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre><h4 id="ä¿®æ”¹æ™¯ç‚¹ä¿¡æ¯"><a href="#ä¿®æ”¹æ™¯ç‚¹ä¿¡æ¯" class="headerlink" title="ä¿®æ”¹æ™¯ç‚¹ä¿¡æ¯"></a>ä¿®æ”¹æ™¯ç‚¹ä¿¡æ¯</h4><blockquote><p>service </p></blockquote><pre class=" language-java"><code class="language-java"> Place <span class="token function">queryById</span><span class="token punctuation">(</span>String id<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span>Place place<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> Place <span class="token function">queryById</span><span class="token punctuation">(</span>String id<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> placeDao<span class="token punctuation">.</span><span class="token function">queryById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span>Place place<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>place<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥æ™¯ç‚¹åï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>place<span class="token punctuation">.</span><span class="token function">getHotticket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">throw</span>  <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥æ—ºå­£é—¨ç¥¨ä»·æ ¼ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>place<span class="token punctuation">.</span><span class="token function">getDimticket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥æ·¡å­£é—¨ç¥¨ä»·æ ¼ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    placeDao<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>place<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>controller</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * æ ¹æ®idæŸ¥è¯¢æ™¯ç‚¹ * @param id * @return */</span><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"queryById"</span><span class="token punctuation">)</span><span class="token keyword">public</span> Place <span class="token function">queryById</span><span class="token punctuation">(</span>String id <span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token keyword">return</span> placeService<span class="token punctuation">.</span><span class="token function">queryById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/** * ä¿®æ”¹æ™¯ç‚¹ä¿¡æ¯ * @param place * @param photo * @return */</span><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"update"</span><span class="token punctuation">)</span><span class="token keyword">public</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Object<span class="token operator">></span> <span class="token function">update</span><span class="token punctuation">(</span>Place place<span class="token punctuation">,</span>MultipartFile photo<span class="token punctuation">)</span><span class="token punctuation">{</span>    HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>ObjectUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>photo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            String filename <span class="token operator">=</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"."</span>                    <span class="token operator">+</span>FilenameUtils<span class="token punctuation">.</span><span class="token function">getExtension</span><span class="token punctuation">(</span>photo<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// æ›´æ–°picpath</span>            place<span class="token punctuation">.</span><span class="token function">setPicpath</span><span class="token punctuation">(</span>Base64Utils<span class="token punctuation">.</span><span class="token function">encodeToString</span><span class="token punctuation">(</span>photo<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// ä¸Šä¼ åˆ°æŒ‡å®šè·¯å¾„</span>            photo<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>uploadPath<span class="token punctuation">,</span>filename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// ä¿å­˜è‡³æ•°æ®åº“</span>        placeService<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>place<span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"æç¤ºï¼šä¿®æ”¹æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"æç¤ºï¼š"</span><span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> map<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>å‰ç«¯</p></blockquote><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">    <span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        el<span class="token punctuation">:</span> <span class="token string">"#wrap"</span><span class="token punctuation">,</span>        data<span class="token punctuation">:</span> <span class="token punctuation">{</span>            date<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>            id<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>            place<span class="token punctuation">:</span> <span class="token punctuation">{</span>                name<span class="token punctuation">:</span><span class="token string">""</span><span class="token punctuation">,</span>                picpath<span class="token punctuation">:</span><span class="token string">""</span><span class="token punctuation">,</span>                hotticket<span class="token punctuation">:</span><span class="token string">""</span><span class="token punctuation">,</span>                dimticket<span class="token punctuation">:</span><span class="token string">""</span><span class="token punctuation">,</span>                details<span class="token punctuation">:</span><span class="token string">""</span><span class="token punctuation">,</span>                provinceid<span class="token punctuation">:</span><span class="token string">""</span><span class="token punctuation">,</span>                myfile<span class="token punctuation">:</span><span class="token string">""</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            provinces<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            src<span class="token punctuation">:</span><span class="token string">""</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// åˆ¤æ–­æ˜¯å¦ç™»å½•</span>            <span class="token function">isLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">var</span> user <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"è¯·ç™»å½•ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">"http://localhost:8080/travelsAdmin/login.html"</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true">// æ˜¾ç¤ºå½“å‰æ—¥æœŸ</span>            <span class="token function">showDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">var</span> realDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>date <span class="token operator">=</span> realDate<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>realDate<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> realDate<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token function">showView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// è·å–id</span>                <span class="token keyword">var</span> start <span class="token operator">=</span> location<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">var</span> id <span class="token operator">=</span> location<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>start<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/travelsAdmin/place/queryById?id="</span><span class="token operator">+</span>id<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res<span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>                    <span class="token comment" spellcheck="true">// console.log(res.data);</span>                    <span class="token keyword">this</span><span class="token punctuation">.</span>place <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>                    <span class="token comment" spellcheck="true">// æ˜¾ç¤ºå›¾ç‰‡</span>                    <span class="token keyword">this</span><span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">"data:image/png;base64,"</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>place<span class="token punctuation">.</span>picpath<span class="token punctuation">;</span>                    <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>                <span class="token punctuation">}</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token function">queryProvinces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/travelsAdmin/province/listByPage?rows=35"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res<span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>                    <span class="token keyword">this</span><span class="token punctuation">.</span>provinces <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>provinces<span class="token punctuation">;</span>                <span class="token punctuation">}</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                location<span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token string">"viewspotlist.html?provinceid="</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>place<span class="token punctuation">.</span>provinceid<span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token function">updatePlace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">var</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>place<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>                formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>place<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>                formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"picpath"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>place<span class="token punctuation">.</span>picpath<span class="token punctuation">)</span><span class="token punctuation">;</span>                formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"photo"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>myfile<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"hotticket"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>place<span class="token punctuation">.</span>hotticket<span class="token punctuation">)</span><span class="token punctuation">;</span>                formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"dimticket"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>place<span class="token punctuation">.</span>dimticket<span class="token punctuation">)</span><span class="token punctuation">;</span>                formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"provinceid"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>place<span class="token punctuation">.</span>provinceid<span class="token punctuation">)</span>                formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"details"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>place<span class="token punctuation">.</span>details<span class="token punctuation">)</span>                <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>                    method<span class="token punctuation">:</span> <span class="token string">"post"</span><span class="token punctuation">,</span>                    url<span class="token punctuation">:</span> <span class="token string">"http://localhost:8080/travelsAdmin/place/update"</span><span class="token punctuation">,</span>                    data<span class="token punctuation">:</span> formData<span class="token punctuation">,</span>                    headers<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token string">'content-type'</span><span class="token punctuation">:</span><span class="token string">'multipart/formdata'</span><span class="token punctuation">}</span>                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res<span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">{</span>                        <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token operator">+</span><span class="token string">"ç‚¹å‡»ç¡®å®šè·³è½¬æ™¯ç‚¹ç®¡ç†é¡µé¢"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">"viewspotlist.html?provinceid="</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>place<span class="token punctuation">.</span>provinceid<span class="token punctuation">;</span>                    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                        <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// åˆ¤æ–­æ˜¯å¦ç™»å½•</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// æ˜¾ç¤ºå½“å‰æ—¥æœŸ</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">showDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// æ˜¾ç¤ºå½“å‰å¾…ä¿®æ”¹æ™¯ç‚¹çš„ä¿¡æ¯</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">queryProvinces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">showView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>å›¾ç‰‡ä¸Šä¼ ä¸æ˜¾ç¤º</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">    <span class="token keyword">function</span> <span class="token function">imgfileChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">var</span> img_show <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"img-show"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> imgfile <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"imgfile"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> freader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        freader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>imgfile<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        freader<span class="token punctuation">.</span>onload <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            img_show<span class="token punctuation">.</span>src <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>result<span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>label-text<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å°è±¡å›¾ç‰‡ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><span class="token property">padding-left</span><span class="token punctuation">:</span> <span class="token number">36%</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>src<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>img-show<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>imgfile<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">display</span><span class="token punctuation">:</span> none</span><span class="token punctuation">"</span></span> <span class="token attr-name">onchange</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>imgfileChange()<span class="token punctuation">"</span></span>               <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myfile<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span></code></pre><p>çœä»½é€‰æ‹©æ¡†ï¼š</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>label-text<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ‰€å±çœä»½ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ofprovince<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>place.provinceid<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">25</span>px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">disabled</span><span class="token punctuation">></span></span>è¯·é€‰æ‹©çœä»½<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pro in provinces<span class="token punctuation">"</span></span> <span class="token attr-name">v-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pro.name<span class="token punctuation">"</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pro.id<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span></code></pre><h3 id="ä½¿ç”¨Redisä½œä¸ºMybatisçš„ç¼“å­˜"><a href="#ä½¿ç”¨Redisä½œä¸ºMybatisçš„ç¼“å­˜" class="headerlink" title="ä½¿ç”¨Redisä½œä¸ºMybatisçš„ç¼“å­˜"></a>ä½¿ç”¨Redisä½œä¸ºMybatisçš„ç¼“å­˜</h3><p>1ã€é…ç½®Redisåœ°å€å’Œç«¯å£</p><pre class=" language-yml"><code class="language-yml">spring:  redis:    host: 127.0.0.1    port: 6379</code></pre><p>2ã€å®ç°mybatisä¸­çš„Cacheæ¥å£</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>cache<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisCache</span> <span class="token keyword">implements</span> <span class="token class-name">Cache</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> String id<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">RedisCache</span><span class="token punctuation">(</span> String id<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// è·å–RedisTemplate</span>    <span class="token keyword">public</span> RedisTemplate <span class="token function">getRedisTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        RedisTemplate template <span class="token operator">=</span><span class="token punctuation">(</span>RedisTemplate<span class="token punctuation">)</span> ApplicationContextUtils<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"redisTemplate"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> template<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// å°†æ•°æ®å­˜å…¥Redis</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">putObject</span><span class="token punctuation">(</span>Object key<span class="token punctuation">,</span> Object value<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">getRedisTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>key<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// ä»Redisä¸­è·å–æ•°æ®</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> Object <span class="token function">getObject</span><span class="token punctuation">(</span>Object key<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token function">getRedisTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>key<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// åˆ é™¤æŒ‡å®šç¼“å­˜ä¿¡æ¯</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> Object <span class="token function">removeObject</span><span class="token punctuation">(</span>Object key<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token function">getRedisTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>key<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// æ¸…é™¤ç¼“å­˜</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">getRedisTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// è·å–æ•°æ®å¤§å°</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token function">getRedisTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>å·¥å…·ç±»ApplicationContextUtilsè·å–å·¥å‚å®ä¾‹</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>utils<span class="token punctuation">;</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationContextUtils</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationContextAware</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å½“å‰å·¥å‚</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> ApplicationContext applicationContext<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setApplicationContext</span><span class="token punctuation">(</span>ApplicationContext applicationContext<span class="token punctuation">)</span> <span class="token keyword">throws</span> BeansException <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>applicationContext <span class="token operator">=</span> applicationContext<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// è·å–å·¥å‚ä¸­çš„å®ç°ç±»</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Object <span class="token function">getBean</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>3ã€åœ¨mapperæ–‡ä»¶ä¸­æ·»åŠ è‡ªå®šä¹‰çš„Redisç¼“å­˜</p><pre class=" language-xml"><code class="language-xml"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.cache.RedisCache<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cache</span><span class="token punctuation">></span></span></code></pre><p>4ã€å­˜å‚¨åœ¨Redisä¸­çš„å®ä½“ç±»å¿…é¡»å®ç°Serializableæ¥å£<br><img src="/2020/08/17/project-02/2.png" alt></p><h1 id="ä¸»è¦ç•Œé¢"><a href="#ä¸»è¦ç•Œé¢" class="headerlink" title="ä¸»è¦ç•Œé¢"></a>ä¸»è¦ç•Œé¢</h1><blockquote><p>ç”¨æˆ·æ¨¡å—</p></blockquote><p><img src="/2020/08/17/project-02/3.png" alt></p><p><img src="/2020/08/17/project-02/4.png" alt></p><blockquote><p>çœä»½æ¨¡å—</p></blockquote><p><img src="/2020/08/17/project-02/5.png" alt></p><p><img src="/2020/08/17/project-02/6.png" alt></p><p><img src="/2020/08/17/project-02/7.png" alt></p><blockquote><p>æ™¯ç‚¹æ¨¡å—</p></blockquote><p><img src="/2020/08/17/project-02/8.png" alt></p><p><img src="/2020/08/17/project-02/9.png" alt></p><p><img src="/2020/08/17/project-02/10.png" alt></p><h1 id="é¡¹ç›®æ€»ç»“"><a href="#é¡¹ç›®æ€»ç»“" class="headerlink" title="é¡¹ç›®æ€»ç»“"></a>é¡¹ç›®æ€»ç»“</h1><p>åšäº†ä»€ä¹ˆï¼Ÿ</p><ul><li>ç®¡ç†å‘˜çš„æ³¨å†Œå’Œç™»å½•</li><li>çœä»½ä¿¡æ¯çš„å¢åˆ æ”¹æŸ¥</li><li>æ™¯ç‚¹ä¿¡æ¯çš„å¢åˆ æ”¹æŸ¥</li></ul><p>å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ</p><ul><li>åœ¨å‰åç«¯åˆ†ç¦»ä¸­åˆ†é¡µæŸ¥è¯¢åŠŸèƒ½çš„å®ç°</li><li>ä½¿ç”¨mysqlä¸­çš„meduimtextæ•°æ®ç±»å‹å­˜å‚¨å›¾ç‰‡ï¼Œå›¾ç‰‡éœ€è¦å…ˆè¿›è¡Œbase64ç¼–ç ç„¶åå­˜è¿›æ•°æ®åº“</li><li>vueä¸­é€‰æ‹©æ¡†çš„æ•°æ®åŒå‘ç»‘å®š</li></ul><p>é‡åˆ°çš„é—®é¢˜ï¼Ÿæ€ä¹ˆè§£å†³çš„ï¼Ÿ</p><ul><li>åœ¨å®Œæˆæ·»åŠ æ™¯ç‚¹åŠŸèƒ½æ—¶ï¼Œåœ¨æµè§ˆå™¨ç«¯è°ƒè¯•æ€»æ˜¯å‡ºç°undefinedçš„é”™è¯¯ï¼Œä»”ç»†ä¸ä¹‹å‰çš„æ·»åŠ åŠŸèƒ½ç›¸æ¯”ï¼Œæ­¤æ·»åŠ åŠŸèƒ½æ¶‰åŠåˆ°äº†æ–‡ä»¶çš„ä¸Šä¼ ï¼Œéœ€è¦æ„é€ è¡¨å•ï¼Œç„¶ååœ¨è¡¨å•ä¸­æ·»åŠ æ•°æ®  <img src="/2020/08/17/project-02/11.png" style="zoom:80%;"></li></ul><pre><code>&lt;img src=&quot;project-02/12.png&quot; style=&quot;zoom:80%;&quot; /&gt;</code></pre><ul><li><p>åœ¨ä¿®æ”¹æ™¯ç‚¹ä¿¡æ¯æ—¶ï¼Œæäº¤ä¸€ç›´æ˜¾ç¤ºå›¾ç‰‡æœªä¸Šä¼ ï¼Œä»”ç»†è¯»å‡ºç°ä¸éš¾å‘ç°ï¼Œå¦‚æœåœ¨ä¿®æ”¹æ™¯ç‚¹ä¿¡æ¯æ—¶æ²¿ç”¨æ·»åŠ æ™¯ç‚¹æ—¶çš„é‚£ç§æ–¹å¼ï¼Œ<img src="/2020/08/17/project-02/13.png" alt><br>  æ‰€ä»¥ä¸€ç›´æ˜¾ç¤ºå›¾ç‰‡æœªä¸Šä¼ ï¼Œåªè¦ä¿®æ”¹ä¸€ä¸‹åˆ¤æ–­é€»è¾‘å°±å¯ä»¥äº†ï¼Œåœ¨åˆ¤æ–­æ²¡æœ‰ä¿®æ”¹å›¾ç‰‡æ—¶ç›´æ¥æ›´æ–°ï¼Œä¿®æ”¹å›¾ç‰‡åè¿›è¡Œé‡å‘½åï¼Œæ–‡ä»¶ä¸Šä¼ ç„¶åæ›´æ–°<br>  <img src="/2020/08/17/project-02/14.png" alt>  </p></li><li><p>æ™¯ç‚¹çœä»½ä¸ºç©º<br>  <img src="/2020/08/17/project-02/15.png" alt></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å°é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤šçº¿ç¨‹æ€»ç»“</title>
      <link href="2020/08/13/thread/"/>
      <url>2020/08/13/thread/</url>
      
        <content type="html"><![CDATA[<h2 id="è¿›ç¨‹ä¸çº¿ç¨‹"><a href="#è¿›ç¨‹ä¸çº¿ç¨‹" class="headerlink" title="è¿›ç¨‹ä¸çº¿ç¨‹"></a>è¿›ç¨‹ä¸çº¿ç¨‹</h2><blockquote><p>è¿›ç¨‹</p></blockquote><p>è¿›ç¨‹æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œæ˜¯æŒ‡ç¨‹åºåŠå…¶æ•°æ®åœ¨å¤„ç†æœºä¸Šé¡ºåºæ‰§è¡Œæ—¶æ‰€å‘ç”Ÿçš„æ´»åŠ¨ï¼Œä¸€ç»„å…·æœ‰ç‹¬ç«‹åŠŸèƒ½çš„ç¨‹åºåœ¨æ•°æ®é›†åˆä¸Šçš„ä¸€æ¬¡æ´»åŠ¨ï¼Œå®ƒæ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ç‹¬ç«‹å•ä½ã€‚<a id="more"></a></p><blockquote><p>çº¿ç¨‹</p></blockquote><p>ä¸ºäº†æé«˜ç³»ç»Ÿçš„æ‰§è¡Œæ•ˆç‡ï¼Œå‡å°‘å¤„ç†æœºçš„ç©ºè½¬æ—¶é—´å’Œè°ƒåº¦åˆ‡æ¢çš„æ—¶é—´ï¼Œä»¥åŠä¾¿äºç³»ç»Ÿç®¡ç†ã€‚æå‡ºäº†çº¿ç¨‹çš„æ¦‚å¿µï¼Œå°†ä¸€ä¸ªè¿›ç¨‹åˆ†ä¸ºå¤šä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹ä½œä¸ºè°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬å•ä½ã€‚</p><p>çº¿ç¨‹çš„ä¸‰ä¸ªåŸºæœ¬çŠ¶æ€ï¼šæ‰§è¡Œï¼Œå°±ç»ªï¼Œé˜»å¡</p><p>çº¿ç¨‹çš„ä¸¤ä¸ªåŸºæœ¬ç±»å‹</p><ul><li>ç”¨æˆ·çº§è¿›ç¨‹ï¼šåœ¨ç”¨æˆ·çº§çº¿ç¨‹ä¸­ï¼Œæœ‰å…³çº¿ç¨‹ç®¡ç†çš„æ‰€æœ‰å·¥ä½œéƒ½ç”±åº”ç”¨ç¨‹åºå®Œæˆï¼Œ<strong>å†…æ ¸æ„è¯†ä¸åˆ°çº¿ç¨‹çš„å­˜åœ¨</strong>ã€‚</li><li>ç³»ç»Ÿçº§è¿›ç¨‹ï¼šåœ¨å†…æ ¸çº§çº¿ç¨‹ä¸­ï¼Œçº¿ç¨‹ç®¡ç†çš„æ‰€æœ‰å·¥ä½œéƒ½ç”±å†…æ ¸å®Œæˆï¼Œåº”ç”¨ç¨‹åºæ²¡æœ‰è¿›è¡Œçº¿ç¨‹ç®¡ç†çš„ä»£ç ï¼Œåªæœ‰ä¸€ä¸ªåˆ°å†…æ ¸çº§çº¿ç¨‹çš„ç¼–ç¨‹æ¥å£ã€‚</li></ul><h2 id="å¹¶å‘ä¸å¹¶è¡Œ"><a href="#å¹¶å‘ä¸å¹¶è¡Œ" class="headerlink" title="å¹¶å‘ä¸å¹¶è¡Œ"></a>å¹¶å‘ä¸å¹¶è¡Œ</h2><p><strong>å¹¶è¡Œï¼š</strong></p><ul><li>å¹¶è¡Œæ˜¯æŒ‡<strong>åŒä¸€æ—¶åˆ»</strong>å†…å‘ç”Ÿä¸¤ä¸ªæˆ–å¤šä¸ªäº‹ä»¶</li><li>å¹¶è¡Œæ˜¯åœ¨<strong>ä¸åŒå®ä½“ï¼ˆå¤„ç†æœºï¼‰</strong>ä¸Šçš„å¤šä¸ªäº‹ä»¶</li></ul><p><strong>å¹¶å‘ï¼š</strong></p><ul><li>å¹¶å‘æ€§æ˜¯æŒ‡<strong>åŒä¸€æ—¶é—´é—´éš”</strong>å†…å‘ç”Ÿä¸¤ä¸ªæˆ–å¤šä¸ªäº‹ä»¶</li><li>å¹¶å‘æ˜¯åœ¨<strong>åŒä¸€å®ä½“</strong>ä¸Šçš„å¤šä¸ªäº‹ä»¶</li></ul><p>å¹¶è¡Œæ˜¯é’ˆå¯¹è¿›ç¨‹çš„ï¼Œå¹¶è¡Œæ˜¯æ­£å¯¹çº¿ç¨‹çš„ã€‚</p><h2 id="Javaå®ç°å¤šçº¿ç¨‹"><a href="#Javaå®ç°å¤šçº¿ç¨‹" class="headerlink" title="Javaå®ç°å¤šçº¿ç¨‹"></a>Javaå®ç°å¤šçº¿ç¨‹</h2><p>åˆ›å»ºå¤šçº¿ç¨‹çš„å››ç§æ–¹å¼ï¼š</p><ul><li>ç»§æ‰¿Threadç±»ï¼Œé‡å†™run()æ–¹æ³•</li><li>å®ç°Runnableæ¥å£ï¼Œé‡å†™run()æ–¹æ³•</li><li>å®ç°Callableæ¥å£ï¼Œé‡å†™call()æ–¹æ³•</li><li>ä½¿ç”¨çº¿ç¨‹æ± </li></ul><p><strong>å®ç°Runnableæ¥å£</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">MyThread2</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 1ã€å®ç°Runnableæ¥å£ä¸­çš„run()æ–¹æ³•</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment" spellcheck="true">// 3.åˆ›å»ºRunnableå®ç°ç±»çš„å¯¹è±¡</span>       MyThread2 mThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment" spellcheck="true">// 4.å°†æ­¤å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ å…¥Threadç±»çš„æ„é€ å™¨ä¸­ï¼Œåˆ›å»ºThread()ç±»å¯¹è±¡</span>       Thread t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>mThread<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment" spellcheck="true">// 5.é€šè¿‡Threadç±»å¯¹è±¡è°ƒç”¨start()æ–¹æ³•</span>       t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment" spellcheck="true">// å†å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ ä¸éœ€è¦å†é€ å®ç°ç±»å¯¹è±¡</span>       Thread t3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>mThread<span class="token punctuation">)</span><span class="token punctuation">;</span>       t3<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><strong>å®ç°Callableæ¥å£ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">MyThread3</span> <span class="token keyword">implements</span> <span class="token class-name">Callable</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> Object <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºå­çº¿ç¨‹1</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºCallableå®ç°ç±»çš„å¯¹è±¡</span>        MyThread3 t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å®ä¾‹åŒ–FutureTaskç±»ï¼Œå°†Callableå®ç°ç±»çš„å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ å…¥</span>        FutureTask futureTask <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FutureTask</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>        FutureTask futureTask1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FutureTask</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// Thread(Runnable target)éœ€è¦ä¼ å…¥ä¸€ä¸ªRunnableå®ç°ç±»çš„å¯¹è±¡</span>        <span class="token comment" spellcheck="true">// è€ŒFutureTaskç±»ä¸ä»…å®ç°äº†Futureæ¥å£ï¼ŒåŒæ—¶ä¹Ÿå®ç°äº†Runnableæ¥å£</span>        <span class="token comment" spellcheck="true">// å› æ­¤å¯å°†FutureTaskç±»çš„å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ å…¥</span>        Thread th3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>futureTask<span class="token punctuation">)</span><span class="token punctuation">;</span>        th3<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"å­çº¿ç¨‹1ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        th3<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºå­çº¿ç¨‹2</span>        Thread th4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>futureTask1<span class="token punctuation">)</span><span class="token punctuation">;</span>        th4<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"å­çº¿ç¨‹2ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        th4<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>Callableä¸Runnable ä¸¤ç‚¹ä¸åŒï¼š</p><p>ç¬¬ä¸€ï¼Œå¯ä»¥é€šè¿‡ call()è·å¾—è¿”å›å€¼ã€‚å‰ä¸¤ç§æ–¹å¼éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„ç¼ºé™·ï¼Œå³åœ¨ä»»åŠ¡æ‰§è¡Œå®Œæˆå ï¼Œæ— æ³•ç›´æ¥è·å–æ‰§è¡Œç»“æœéœ€è¦å€ŸåŠ©å…±äº«å˜é‡ç­‰è·å– ï¼Œè€Œ Callableå’ŒFutureåˆ™å¾ˆå¥½åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼›</p><p> ç¬¬äºŒï¼Œ call()å¯ä»¥æŠ›å‡ºå¼‚å¸¸ã€‚è€Œ Runnable è¦é€šè¿‡ setDefaultUncaughtExceptionHandler() çš„æ–¹å¼æ‰èƒ½åœ¨ä¸»çº¿ç¨‹ä¸­æ•æ‰åˆ°å­çº¿ç¨‹å¼‚å¸¸ã€‚</p></blockquote><p><strong>ä½¿ç”¨çº¿ç¨‹æ± </strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadTest4</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºçº¿ç¨‹æ±  æä¾›æŒ‡å®šçº¿ç¨‹æ•°é‡</span>        ExecutorService service <span class="token operator">=</span> Executors<span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºçº¿ç¨‹å¹¶å¼€å§‹çº¿ç¨‹</span>        service<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyThread4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        service<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyThread4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å…³é—­è¿æ¥æ± </span>        service<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">MyThread4</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">":"</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="Javaå®ç°å¤šçº¿ç¨‹è¦æ³¨æ„çš„ç»†èŠ‚"><a href="#Javaå®ç°å¤šçº¿ç¨‹è¦æ³¨æ„çš„ç»†èŠ‚" class="headerlink" title="Javaå®ç°å¤šçº¿ç¨‹è¦æ³¨æ„çš„ç»†èŠ‚"></a>Javaå®ç°å¤šçº¿ç¨‹è¦æ³¨æ„çš„ç»†èŠ‚</h2><p><strong>run()ä¸start()çš„åŒºåˆ«ï¼š</strong></p><ul><li><code>run()</code>ï¼šåªæ˜¯å°è£…äº†è¢«çº¿ç¨‹æ‰§è¡Œçš„ä»£ç ï¼Œç›´æ¥è°ƒç”¨å°±æ˜¯æ™®é€šæ–¹æ³•</li><li><code>start()ï¼š</code>é¦–å…ˆå¯åŠ¨äº†çº¿ç¨‹ï¼Œç„¶åå†ç”±jvmå»è°ƒç”¨è¯¥çº¿ç¨‹çš„run()æ–¹æ³•</li></ul><p><strong>javaè™šæ‹Ÿæœºçš„å¯åŠ¨æ˜¯å•çº¿ç¨‹è¿˜æ˜¯å¤šçº¿ç¨‹çš„ï¼Ÿ</strong></p><ul><li>æ˜¯å¤šçº¿ç¨‹çš„ï¼Œä¸ä»…å¯åŠ¨mainçº¿ç¨‹ï¼Œè¿˜è‡³å°‘å¯åŠ¨äº†åƒåœ¾å›æ”¶çº¿ç¨‹</li></ul><p><strong>ä¸€èˆ¬ä½¿ç”¨å¤šçº¿ç¨‹çš„å“ªç§å®ç°æ–¹å¼ï¼Ÿ</strong></p><ul><li><p>ä½¿ç”¨å®ç°Runnableæ¥å£çš„æ–¹å¼ï¼Œé¿å…äº†å•ç»§æ‰¿çš„å±€é™æ€§</p></li><li><p>åº”è¯¥å°†å¹¶å‘è¿è¡Œä»»åŠ¡å’Œè¿è¡Œæœºåˆ¶è§£è€¦</p></li></ul><h2 id="Threadä¸­çš„å¸¸ç”¨æ–¹æ³•"><a href="#Threadä¸­çš„å¸¸ç”¨æ–¹æ³•" class="headerlink" title="Threadä¸­çš„å¸¸ç”¨æ–¹æ³•"></a>Threadä¸­çš„å¸¸ç”¨æ–¹æ³•</h2><p><strong>è·å–çº¿ç¨‹åï¼š</strong><code>getName()</code></p><p><strong>è·å–å½“å‰çº¿ç¨‹åï¼š</strong><code>Thread.currentThread.getName()</code></p><p><strong>è®¾ç½®çº¿ç¨‹åï¼š</strong><code>setName()</code></p><p><strong>è®¾ç½®å®ˆæŠ¤è¿›ç¨‹ï¼š</strong><code>setDeamon(boolean on)</code></p><ul><li>å®ˆæŠ¤è¿›ç¨‹<ul><li>å°±æ˜¯ä¸ºå…¶ä»–è¿›ç¨‹æœåŠ¡çš„è¿›ç¨‹ï¼Œä¾‹å¦‚åƒåœ¾å›æ”¶çš„è¿›ç¨‹</li><li>å½“åˆ«çš„ç”¨æˆ·è¿›ç¨‹æ‰§è¡Œå®Œåï¼Œè™šæ‹Ÿæœºå°±ä¼šé€€å‡ºï¼Œå®ˆæŠ¤è¿›ç¨‹å°±ä¼šåœæ­¢</li><li>è®¾ç½®å®ˆæŠ¤è¿›ç¨‹æ—¶ï¼Œå¿…é¡»è¦åœ¨çº¿ç¨‹å¯åŠ¨å‰è®¾ç½®<code>setDeamon(true)</code>ï¼Œå¯åŠ¨åè®¾ç½®ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œ</li><li>ä½¿ç”¨å®ˆæŠ¤è¿›ç¨‹ä¸è¦è®¿é—®å…±äº«èµ„æºï¼Œå› ä¸ºä»–ä»¬å¯èƒ½åœ¨ä»»ä½•æ—¶å€™å°±æŒ‚æ‰äº†</li><li>å®ˆæŠ¤è¿›ç¨‹ä¸­äº§ç”Ÿçš„æ–°è¿›ç¨‹ä¹Ÿæ˜¯å®ˆæŠ¤è¿›ç¨‹</li></ul></li></ul><p><strong>è®¾ç½®çº¿ç¨‹ä¼˜å…ˆçº§:</strong><code>setPriority()</code></p><p>çº¿ç¨‹ä¼˜å…ˆçº§é«˜ä»…ä»…è¡¨ç¤ºçº¿ç¨‹<strong>è·å–çš„CPUæ—¶é—´ç‰‡çš„å‡ ç‡é«˜</strong>ï¼Œä½†è¿™ä¸æ˜¯ä¸€ä¸ª<strong>ç¡®å®šçš„å› ç´ </strong>ï¼</p><p> <strong>çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼š</strong></p><blockquote><p>sleep()æ–¹æ³•</p></blockquote><p>è°ƒç”¨sleepæ–¹æ³•ä¼šè¿›å…¥è®¡æ—¶ç­‰å¾…çŠ¶æ€ï¼Œç­‰æ—¶é—´åˆ°äº†ï¼Œ<strong>è¿›å…¥çš„æ˜¯å°±ç»ªçŠ¶æ€è€Œå¹¶éæ˜¯è¿è¡ŒçŠ¶æ€</strong><br><img src="/2020/08/13/thread/1.png" alt></p><blockquote><p>yield()æ–¹æ³•</p></blockquote><p>æš‚åœå½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ï¼ŒæŠŠæ‰§è¡Œæœºä¼šè®©ç»™ä¼˜å…ˆçº§ç›¸åŒæˆ–æ›´é«˜çš„çº¿ç¨‹ï¼Œä¸ç¡®ä¿çœŸæ­£çš„è®©å‡ºã€‚</p><blockquote><p>join()æ–¹æ³•</p></blockquote><p>ä½¿è°ƒç”¨çš„çº¿ç¨‹å…ˆæ‰§è¡Œï¼Œæ‰§è¡Œå®Œåå†æ‰§è¡Œå…¶ä»–çº¿ç¨‹ï¼›</p><p>ä½ä¼˜å…ˆçº§çš„çº¿ç¨‹ä¹Ÿå¯ä»¥è·å¾—æ‰§è¡Œã€‚</p><blockquote><p>wait()æ–¹æ³•</p></blockquote><p>wait()æ˜¯Objectç±»ä¸­å®šä¹‰çš„nativeæ–¹æ³•ï¼›</p><p>ä¸€æ—¦çº¿ç¨‹æ‰§è¡Œæ­¤æ–¹æ³•ï¼Œå½“å‰çº¿ç¨‹å°±ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œå¹¶é‡Šæ”¾é”</p><blockquote><p>notify()æ–¹æ³•</p></blockquote><p>notify()ä¹Ÿæ˜¯Objectç±»ä¸­å®šä¹‰çš„nativeæ–¹æ³•ï¼›</p><p>ä¸€æ—¦æ‰§è¡Œæ­¤æ–¹æ³•å°±ä¼šå”¤é†’è¢«waitçš„ä¸€ä¸ªçº¿ç¨‹ã€‚è‹¥æœ‰å¤šä¸ªçº¿ç¨‹è¢«waitï¼Œåˆ™å”¤é†’ä¼˜å…ˆçº§é«˜çš„</p><blockquote><p>notifyAll()æ–¹æ³•</p></blockquote><p>ä¹Ÿæ˜¯Objectç±»ä¸­çš„æ–¹æ³•ï¼Œå”¤é†’æ‰€æœ‰waitçš„çº¿ç¨‹</p><blockquote><p>interrupt()æ–¹æ³•</p></blockquote><p>çº¿ç¨‹ä¸­æ–­åœ¨ä¹‹å‰çš„ç‰ˆæœ¬ä¸­æœ‰stop()æ–¹æ³•ï¼Œå› ä¸ºå­˜åœ¨å®‰å…¨é—®é¢˜è¢«è®¾ç½®è¿‡æ—¶äº†ã€‚</p><p>stop()æ–¹æ³•å¯ä»¥è®©ä¸€ä¸ªçº¿ç¨‹Aç»ˆæ­¢ä¸€ä¸ªçº¿ç¨‹Bï¼Œè¢«ç»ˆæ­¢çš„çº¿ç¨‹ä¼šç«‹å³é‡Šæ”¾é”ï¼Œè¿™å¯èƒ½ä¼šè®©å¯¹è±¡å¤„äºä¸ä¸€è‡´çš„çŠ¶æ€ã€‚</p><p>ä¸€èˆ¬ä½¿ç”¨interrupt()æ¥è¯·æ±‚ç»ˆæ­¢çº¿ç¨‹ã€‚</p><ul><li>interruptä¸ä¼šçœŸæ­£åœæ­¢ä¸€ä¸ªçº¿ç¨‹ï¼Œä»…ä»…æ˜¯å‘å‡ºä¸€ä¸ªä¸­æ–­ä¿¡å·ï¼Œå‘Šè¯‰ä»–åº”è¯¥è¦ç»“æŸäº†</li><li>è®©çº¿ç¨‹è‡ªå·±å¤„ç†ï¼Œåˆ°åº•æ˜¯ä¸­æ–­è¿˜æ˜¯ç»§ç»­æ‰§è¡Œ</li></ul><pre class=" language-java"><code class="language-java">Thread t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// è‹¥æœªå‘ç”Ÿä¸­æ–­ï¼Œå°±æ­£å¸¸æ‰§è¡Œä»»åŠ¡</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>Thread<span class="token punctuation">.</span>currentThread<span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// æ­£å¸¸ä»»åŠ¡ä»£ç â€¦â€¦</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// ä¸­æ–­çš„å¤„ç†ä»£ç â€¦â€¦</span>        <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å¦‚æœé˜»å¡çº¿ç¨‹è°ƒç”¨äº†interrupt()æ–¹æ³•ï¼Œé‚£ä¹ˆä¼š<strong>æŠ›å‡ºå¼‚å¸¸ï¼Œè®¾ç½®æ ‡å¿—ä½ä¸ºfalseï¼ŒåŒæ—¶è¯¥çº¿ç¨‹ä¼šé€€å‡ºé˜»å¡</strong>ã€‚</p><h2 id="Synchronizedé”ä¸Locké”"><a href="#Synchronizedé”ä¸Locké”" class="headerlink" title="Synchronizedé”ä¸Locké”"></a>Synchronizedé”ä¸Locké”</h2><p><strong>Synchronizedé”ä½¿ç”¨ï¼š</strong></p><blockquote><p>æ–¹å¼ä¸€ï¼šåŒæ­¥ä»£ç å—</p></blockquote><p>å°†å¯èƒ½å‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜çš„ä»£ç ä½¿ç”¨<code>synchronized</code>å…³é”®å­—åŒ…è£¹</p><pre class=" language-java"><code class="language-java"><span class="token keyword">synchronized</span><span class="token punctuation">(</span><span class="token comment" spellcheck="true">/*é”*/</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">// è¦ä¿è¯æ˜¯åŒä¸€æŠŠé”</span>    <span class="token comment" spellcheck="true">// éœ€è¦åŒæ­¥çš„ä»£ç </span><span class="token punctuation">}</span></code></pre><blockquote><p>æ–¹å¼äºŒï¼šåŒæ­¥æ–¹æ³•</p></blockquote><p> å°†å¯èƒ½å‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜çš„ä»£ç å—å°è£…æˆä¸€ä¸ªåŒæ­¥æ–¹æ³•</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">synchronized</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// æ–¹æ³•ä½“</span><span class="token punctuation">}</span></code></pre><p><strong>Locké”</strong></p><p>é€šè¿‡æ˜¾å¼å®šä¹‰åŒæ­¥é”å¯¹è±¡ï¼Œå³Lockå¯¹è±¡ï¼Œæ¥å®ç°åŒæ­¥ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">buyTicket</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> ticketNum <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 1.å®ä¾‹åŒ–ReentrantLock</span>    <span class="token comment" spellcheck="true">// ReentrantLockç±»å®ç°äº†Lockï¼Œä»¥åŠåˆ›å»ºé”çš„lock()æ–¹æ³•ï¼Œé‡Šæ”¾é”çš„unlock()æ–¹æ³•ã€‚</span>    ReentrantLock lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">try</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// 2.è°ƒç”¨é”å®šæ–¹æ³•lock()</span>                lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>ticketNum<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    ticketNum<span class="token operator">--</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token keyword">finally</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// 3.è°ƒç”¨è§£é”æ–¹æ³•unlock()</span>                lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‘˜å·¥ç®¡ç†ç³»ç»Ÿ</title>
      <link href="2020/08/11/project-01/"/>
      <url>2020/08/11/project-01/</url>
      
        <content type="html"><![CDATA[<h1 id="éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚åˆ†æ" class="headerlink" title="éœ€æ±‚åˆ†æ"></a>éœ€æ±‚åˆ†æ</h1><p>æ¨¡å—ï¼ŒåŠŸèƒ½ï¼ŒæŠ€æœ¯é€‰å‹ï¼š</p><ul><li><p>ç”¨æˆ·æ¨¡å—ï¼š</p><ul><li>1ã€ç”¨æˆ·ç™»å½•<ul><li>2ã€ç”¨æˆ·æ³¨å†Œ</li><li>3ã€éªŒè¯ç å®ç°</li><li>4ã€æ¬¢è¿xxç”¨æˆ·ç™»å½•</li><li>5ã€å®‰å…¨é€€å‡º</li></ul></li></ul></li><li><p>å‘˜å·¥ç®¡ç†æ¨¡å—ï¼š</p><ul><li>6ã€å‘˜å·¥ä¿¡æ¯å±•ç¤º</li><li>7ã€å‘˜å·¥çš„æ·»åŠ </li><li>8ã€å‘˜å·¥çš„åˆ é™¤</li><li>9ã€å‘˜å·¥çš„ä¿®æ”¹</li><li>10ã€å‘˜å·¥åˆ—è¡¨åŠ å…¥Redisç¼“å­˜å®ç°</li></ul></li><li><p>æŠ€æœ¯é€‰å‹</p><ul><li>å‰ç«¯ï¼švue+axios</li><li>åç«¯ï¼šspringboot + mybatis + mysql + redis</li></ul></li></ul><h1 id="åº“è¡¨è®¾è®¡"><a href="#åº“è¡¨è®¾è®¡" class="headerlink" title="åº“è¡¨è®¾è®¡"></a>åº“è¡¨è®¾è®¡</h1><p>1ã€ç³»ç»Ÿéœ€è¦å“ªäº›è¡¨</p><p>ç”¨æˆ·è¡¨</p><p>å‘˜å·¥è¡¨</p><p>2ã€åˆ†æè¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»</p><p>ç”¨æˆ·è¡¨ç®¡ç†å‘˜å·¥è¡¨ï¼Œæ²¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Œæ¶‰åŠåˆ°çš„éƒ½æ˜¯å•è¡¨æ“ä½œ</p><p>3ã€åˆ†æè¡¨ä¸­çš„å­—æ®µ</p><p>ç”¨æˆ·è¡¨å­—æ®µ<br>idã€usernameã€realnameã€passwordã€genderã€statusã€registerTime</p><p>å‘˜å·¥è¡¨</p><p>idã€nameã€photoPathã€salaryã€age</p><p>åˆ›å»ºempæ•°æ®åº“ï¼Œåˆ›å»ºè¡¨</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> t_user<span class="token punctuation">(</span>    id <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>    username <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    realname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    password <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    gender <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token keyword">status</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    regist_time <span class="token keyword">timestamp</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">create</span> <span class="token keyword">table</span> t_emp<span class="token punctuation">(</span>    id <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    photo_path <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    salary <span class="token keyword">double</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    age <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><h1 id="è¯¦ç»†è®¾è®¡"><a href="#è¯¦ç»†è®¾è®¡" class="headerlink" title="è¯¦ç»†è®¾è®¡"></a>è¯¦ç»†è®¾è®¡</h1><p>æµç¨‹å›¾ï¼Œä¼ªä»£ç ï¼ˆå°é¡¹ç›®çœç•¥ï¼‰</p><h1 id="ç¼–ç ç¯èŠ‚"><a href="#ç¼–ç ç¯èŠ‚" class="headerlink" title="ç¼–ç ç¯èŠ‚"></a>ç¼–ç ç¯èŠ‚</h1><h2 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h2><p>springboot+mybatis+mysqlã€å¼•å…¥å‘˜å·¥ç³»ç»Ÿé¡µé¢</p><p>é¡¹ç›®åï¼šemps</p><p>é¡¹ç›®ç»“æ„ï¼š</p><pre><code>-src/main/java--------------com.zyz.---------------------bean---------------------dao---------------------service---------------------controller---------------------utils---------------------cache-src/main/resource------------------application.yml ------------------com.zyz.mapper/   mapperé…ç½®æ–‡ä»¶------------------com.zyz.sql/      æ•°æ®åº“æ–‡ä»¶------------------static/          é™æ€èµ„æº</code></pre><h2 id="æ­£å¼è¿›å…¥ç¼–ç "><a href="#æ­£å¼è¿›å…¥ç¼–ç " class="headerlink" title="æ­£å¼è¿›å…¥ç¼–ç "></a>æ­£å¼è¿›å…¥ç¼–ç </h2><h3 id="ä¸€ã€ç”¨æˆ·æ¨¡å—"><a href="#ä¸€ã€ç”¨æˆ·æ¨¡å—" class="headerlink" title="ä¸€ã€ç”¨æˆ·æ¨¡å—"></a>ä¸€ã€ç”¨æˆ·æ¨¡å—</h3><h4 id="1ã€åˆ›å»ºspringbooté¡¹ç›®ï¼Œå‹¾é€‰ç›¸åº”çš„ä¾èµ–"><a href="#1ã€åˆ›å»ºspringbooté¡¹ç›®ï¼Œå‹¾é€‰ç›¸åº”çš„ä¾èµ–" class="headerlink" title="1ã€åˆ›å»ºspringbooté¡¹ç›®ï¼Œå‹¾é€‰ç›¸åº”çš„ä¾èµ–"></a>1ã€åˆ›å»ºspringbooté¡¹ç›®ï¼Œå‹¾é€‰ç›¸åº”çš„ä¾èµ–</h4><p><img src="/2020/08/11/project-01/1.png" alt></p><p>æ­å»ºé¡¹ç›®åŸºæœ¬ç»“æ„ï¼š<br><img src="/2020/08/11/project-01/2.png" alt></p><p>å¼•å…¥å…¶ä»–ä¾èµ–</p><pre class=" language-xml"><code class="language-xml"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.1.23<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>commons-fileupload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>commons-fileupload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><h4 id="2ã€ç¼–å†™springbooté…ç½®æ–‡ä»¶"><a href="#2ã€ç¼–å†™springbooté…ç½®æ–‡ä»¶" class="headerlink" title="2ã€ç¼–å†™springbooté…ç½®æ–‡ä»¶"></a>2ã€ç¼–å†™springbooté…ç½®æ–‡ä»¶</h4><pre class=" language-yml"><code class="language-yml"># æŒ‡å®šå·¥ç¨‹è®¿é—®è·¯å¾„server:  servlet:    context-path: /empAdminspring:  datasource:    username: root    password: 2824199842    url: jdbc:mysql://127.0.0.1:3306/emp?serverTimezone=Asia/Shanghai    driver-class-name: com.mysql.cj.jdbc.Driver    type: com.alibaba.druid.pool.DruidDataSourcemybatis:  type-aliases-package: com.zyz.bean  mapper-locations: classpath:com/zyz/mapper/*.xml # è¦åœ¨æ¥å£ä¸­æ·»åŠ @Mapperæ³¨è§£  configuration:    map-underscore-to-camel-case: truelogging:  level:    com:      zyz:        dao: debug        service: info        controller: info</code></pre><h4 id="3ã€å®ç°éªŒè¯ç å±•ç¤ºåŠŸèƒ½"><a href="#3ã€å®ç°éªŒè¯ç å±•ç¤ºåŠŸèƒ½" class="headerlink" title="3ã€å®ç°éªŒè¯ç å±•ç¤ºåŠŸèƒ½"></a>3ã€å®ç°éªŒè¯ç å±•ç¤ºåŠŸèƒ½</h4><blockquote><p>éªŒè¯ç å·¥å…·ç±»</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>utils<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">VerifyCodeUtils</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//ä½¿ç”¨åˆ°Algerianå­—ä½“ï¼Œç³»ç»Ÿé‡Œæ²¡æœ‰çš„è¯éœ€è¦å®‰è£…å­—ä½“ï¼Œå­—ä½“åªæ˜¾ç¤ºå¤§å†™ï¼Œå»æ‰äº†1,0,i,oå‡ ä¸ªå®¹æ˜“æ··æ·†çš„å­—ç¬¦</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String VERIFY_CODES <span class="token operator">=</span> <span class="token string">"23456789ABCDEFGHJKLMNPQRSTUVWXYZ"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> Random random <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * ä½¿ç”¨ç³»ç»Ÿé»˜è®¤å­—ç¬¦æºç”ŸæˆéªŒè¯ç      * @param verifySize    éªŒè¯ç é•¿åº¦     * @return     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> String <span class="token function">generateVerifyCode</span><span class="token punctuation">(</span><span class="token keyword">int</span> verifySize<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token function">generateVerifyCode</span><span class="token punctuation">(</span>verifySize<span class="token punctuation">,</span> VERIFY_CODES<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * ä½¿ç”¨æŒ‡å®šæºç”ŸæˆéªŒè¯ç      * @param verifySize    éªŒè¯ç é•¿åº¦     * @param sources   éªŒè¯ç å­—ç¬¦æº     * @return     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> String <span class="token function">generateVerifyCode</span><span class="token punctuation">(</span><span class="token keyword">int</span> verifySize<span class="token punctuation">,</span> String sources<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sources <span class="token operator">==</span> null <span class="token operator">||</span> sources<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            sources <span class="token operator">=</span> VERIFY_CODES<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">int</span> codesLen <span class="token operator">=</span> sources<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Random rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        StringBuilder verifyCode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span>verifySize<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> verifySize<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            verifyCode<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>sources<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>codesLen<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> verifyCode<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * ç”ŸæˆéšæœºéªŒè¯ç æ–‡ä»¶,å¹¶è¿”å›éªŒè¯ç å€¼     * @param w     * @param h     * @param outputFile     * @param verifySize     * @return     * @throws IOException     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> String <span class="token function">outputVerifyImage</span><span class="token punctuation">(</span><span class="token keyword">int</span> w<span class="token punctuation">,</span> <span class="token keyword">int</span> h<span class="token punctuation">,</span> File outputFile<span class="token punctuation">,</span> <span class="token keyword">int</span> verifySize<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException<span class="token punctuation">{</span>        String verifyCode <span class="token operator">=</span> <span class="token function">generateVerifyCode</span><span class="token punctuation">(</span>verifySize<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">outputImage</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> h<span class="token punctuation">,</span> outputFile<span class="token punctuation">,</span> verifyCode<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> verifyCode<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * è¾“å‡ºéšæœºéªŒè¯ç å›¾ç‰‡æµ,å¹¶è¿”å›éªŒè¯ç å€¼     * @param w     * @param h     * @param os     * @param verifySize     * @return     * @throws IOException     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> String <span class="token function">outputVerifyImage</span><span class="token punctuation">(</span><span class="token keyword">int</span> w<span class="token punctuation">,</span> <span class="token keyword">int</span> h<span class="token punctuation">,</span> OutputStream os<span class="token punctuation">,</span> <span class="token keyword">int</span> verifySize<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException<span class="token punctuation">{</span>        String verifyCode <span class="token operator">=</span> <span class="token function">generateVerifyCode</span><span class="token punctuation">(</span>verifySize<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">outputImage</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> h<span class="token punctuation">,</span> os<span class="token punctuation">,</span> verifyCode<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> verifyCode<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * ç”ŸæˆæŒ‡å®šéªŒè¯ç å›¾åƒæ–‡ä»¶     * @param w     * @param h     * @param outputFile     * @param code     * @throws IOException     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">outputImage</span><span class="token punctuation">(</span><span class="token keyword">int</span> w<span class="token punctuation">,</span> <span class="token keyword">int</span> h<span class="token punctuation">,</span> File outputFile<span class="token punctuation">,</span> String code<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException<span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>outputFile <span class="token operator">==</span> null<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        File dir <span class="token operator">=</span> outputFile<span class="token punctuation">.</span><span class="token function">getParentFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>dir<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            dir<span class="token punctuation">.</span><span class="token function">mkdirs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">try</span><span class="token punctuation">{</span>            outputFile<span class="token punctuation">.</span><span class="token function">createNewFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            FileOutputStream fos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>outputFile<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">outputImage</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> h<span class="token punctuation">,</span> fos<span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span>            fos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>IOException e<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">throw</span> e<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * è¾“å‡ºæŒ‡å®šéªŒè¯ç å›¾ç‰‡æµ     * @param w     * @param h     * @param os     * @param code     * @throws IOException     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">outputImage</span><span class="token punctuation">(</span><span class="token keyword">int</span> w<span class="token punctuation">,</span> <span class="token keyword">int</span> h<span class="token punctuation">,</span> OutputStream os<span class="token punctuation">,</span> String code<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException<span class="token punctuation">{</span>        <span class="token keyword">int</span> verifySize <span class="token operator">=</span> code<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        BufferedImage image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedImage</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> h<span class="token punctuation">,</span> BufferedImage<span class="token punctuation">.</span>TYPE_INT_RGB<span class="token punctuation">)</span><span class="token punctuation">;</span>        Random rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Graphics2D g2 <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">createGraphics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        g2<span class="token punctuation">.</span><span class="token function">setRenderingHint</span><span class="token punctuation">(</span>RenderingHints<span class="token punctuation">.</span>KEY_ANTIALIASING<span class="token punctuation">,</span>RenderingHints<span class="token punctuation">.</span>VALUE_ANTIALIAS_ON<span class="token punctuation">)</span><span class="token punctuation">;</span>        Color<span class="token punctuation">[</span><span class="token punctuation">]</span> colors <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Color</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        Color<span class="token punctuation">[</span><span class="token punctuation">]</span> colorSpaces <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Color</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> Color<span class="token punctuation">.</span>WHITE<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>CYAN<span class="token punctuation">,</span>                Color<span class="token punctuation">.</span>GRAY<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>LIGHT_GRAY<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>MAGENTA<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>ORANGE<span class="token punctuation">,</span>                Color<span class="token punctuation">.</span>PINK<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>YELLOW <span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token keyword">float</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fractions <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">float</span><span class="token punctuation">[</span>colors<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> colors<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            colors<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> colorSpaces<span class="token punctuation">[</span>rand<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>colorSpaces<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            fractions<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> rand<span class="token punctuation">.</span><span class="token function">nextFloat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        Arrays<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>fractions<span class="token punctuation">)</span><span class="token punctuation">;</span>        g2<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>GRAY<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è®¾ç½®è¾¹æ¡†è‰²</span>        g2<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> w<span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>        Color c <span class="token operator">=</span> <span class="token function">getRandColor</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        g2<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è®¾ç½®èƒŒæ™¯è‰²</span>        g2<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> w<span class="token punctuation">,</span> h<span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//ç»˜åˆ¶å¹²æ‰°çº¿</span>        Random random <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        g2<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token function">getRandColor</span><span class="token punctuation">(</span><span class="token number">160</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è®¾ç½®çº¿æ¡çš„é¢œè‰²</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">int</span> x <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>w <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> y <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>h <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> xl <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> yl <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>            g2<span class="token punctuation">.</span><span class="token function">drawLine</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> x <span class="token operator">+</span> xl <span class="token operator">+</span> <span class="token number">40</span><span class="token punctuation">,</span> y <span class="token operator">+</span> yl <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// æ·»åŠ å™ªç‚¹</span>        <span class="token keyword">float</span> yawpRate <span class="token operator">=</span> <span class="token number">0.05f</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å™ªå£°ç‡</span>        <span class="token keyword">int</span> area <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>yawpRate <span class="token operator">*</span> w <span class="token operator">*</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> area<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">int</span> x <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> y <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> rgb <span class="token operator">=</span> <span class="token function">getRandomIntColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            image<span class="token punctuation">.</span><span class="token function">setRGB</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> rgb<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token function">shear</span><span class="token punctuation">(</span>g2<span class="token punctuation">,</span> w<span class="token punctuation">,</span> h<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä½¿å›¾ç‰‡æ‰­æ›²</span>        g2<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token function">getRandColor</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">160</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> fontSize <span class="token operator">=</span> h<span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">;</span>        Font font <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Font</span><span class="token punctuation">(</span><span class="token string">"Algerian"</span><span class="token punctuation">,</span> Font<span class="token punctuation">.</span>ITALIC<span class="token punctuation">,</span> fontSize<span class="token punctuation">)</span><span class="token punctuation">;</span>        g2<span class="token punctuation">.</span><span class="token function">setFont</span><span class="token punctuation">(</span>font<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> chars <span class="token operator">=</span> code<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> verifySize<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            AffineTransform affine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AffineTransform</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            affine<span class="token punctuation">.</span><span class="token function">setToRotation</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span>PI <span class="token operator">/</span> <span class="token number">4</span> <span class="token operator">*</span> rand<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">nextBoolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>w <span class="token operator">/</span> verifySize<span class="token punctuation">)</span> <span class="token operator">*</span> i <span class="token operator">+</span> fontSize<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            g2<span class="token punctuation">.</span><span class="token function">setTransform</span><span class="token punctuation">(</span>affine<span class="token punctuation">)</span><span class="token punctuation">;</span>            g2<span class="token punctuation">.</span><span class="token function">drawChars</span><span class="token punctuation">(</span>chars<span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>w<span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">/</span> verifySize<span class="token punctuation">)</span> <span class="token operator">*</span> i <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> h<span class="token operator">/</span><span class="token number">2</span> <span class="token operator">+</span> fontSize<span class="token operator">/</span><span class="token number">2</span> <span class="token operator">-</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        g2<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ImageIO<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token string">"jpg"</span><span class="token punctuation">,</span> os<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> Color <span class="token function">getRandColor</span><span class="token punctuation">(</span><span class="token keyword">int</span> fc<span class="token punctuation">,</span> <span class="token keyword">int</span> bc<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>fc <span class="token operator">></span> <span class="token number">255</span><span class="token punctuation">)</span>            fc <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>bc <span class="token operator">></span> <span class="token number">255</span><span class="token punctuation">)</span>            bc <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> r <span class="token operator">=</span> fc <span class="token operator">+</span> random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>bc <span class="token operator">-</span> fc<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> g <span class="token operator">=</span> fc <span class="token operator">+</span> random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>bc <span class="token operator">-</span> fc<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> b <span class="token operator">=</span> fc <span class="token operator">+</span> random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>bc <span class="token operator">-</span> fc<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> g<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">getRandomIntColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> rgb <span class="token operator">=</span> <span class="token function">getRandomRgb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> color <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> c <span class="token operator">:</span> rgb<span class="token punctuation">)</span> <span class="token punctuation">{</span>            color <span class="token operator">=</span> color <span class="token operator">&lt;&lt;</span> <span class="token number">8</span><span class="token punctuation">;</span>            color <span class="token operator">=</span> color <span class="token operator">|</span> c<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> color<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getRandomRgb</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> rgb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            rgb<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> rgb<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">shear</span><span class="token punctuation">(</span>Graphics g<span class="token punctuation">,</span> <span class="token keyword">int</span> w1<span class="token punctuation">,</span> <span class="token keyword">int</span> h1<span class="token punctuation">,</span> Color color<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">shearX</span><span class="token punctuation">(</span>g<span class="token punctuation">,</span> w1<span class="token punctuation">,</span> h1<span class="token punctuation">,</span> color<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">shearY</span><span class="token punctuation">(</span>g<span class="token punctuation">,</span> w1<span class="token punctuation">,</span> h1<span class="token punctuation">,</span> color<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">shearX</span><span class="token punctuation">(</span>Graphics g<span class="token punctuation">,</span> <span class="token keyword">int</span> w1<span class="token punctuation">,</span> <span class="token keyword">int</span> h1<span class="token punctuation">,</span> Color color<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> period <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">boolean</span> borderGap <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> frames <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> phase <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> h1<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">double</span> d <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>period <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">)</span>                    <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> i <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> period                    <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">6.2831853071795862D</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> phase<span class="token punctuation">)</span>                    <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> frames<span class="token punctuation">)</span><span class="token punctuation">;</span>            g<span class="token punctuation">.</span><span class="token function">copyArea</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> w1<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> d<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>borderGap<span class="token punctuation">)</span> <span class="token punctuation">{</span>                g<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>                g<span class="token punctuation">.</span><span class="token function">drawLine</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> d<span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>                g<span class="token punctuation">.</span><span class="token function">drawLine</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> d <span class="token operator">+</span> w1<span class="token punctuation">,</span> i<span class="token punctuation">,</span> w1<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">shearY</span><span class="token punctuation">(</span>Graphics g<span class="token punctuation">,</span> <span class="token keyword">int</span> w1<span class="token punctuation">,</span> <span class="token keyword">int</span> h1<span class="token punctuation">,</span> Color color<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> period <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 50;</span>        <span class="token keyword">boolean</span> borderGap <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> frames <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> phase <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> w1<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">double</span> d <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>period <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">)</span>                    <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> i <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> period                    <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">6.2831853071795862D</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> phase<span class="token punctuation">)</span>                    <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> frames<span class="token punctuation">)</span><span class="token punctuation">;</span>            g<span class="token punctuation">.</span><span class="token function">copyArea</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> h1<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>borderGap<span class="token punctuation">)</span> <span class="token punctuation">{</span>                g<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>                g<span class="token punctuation">.</span><span class="token function">drawLine</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> d<span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                g<span class="token punctuation">.</span><span class="token function">drawLine</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> d <span class="token operator">+</span> h1<span class="token punctuation">,</span> i<span class="token punctuation">,</span> h1<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>åˆ›å»ºUserControllerç±»</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>controller<span class="token punctuation">;</span><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@CrossOrigin</span>  <span class="token comment" spellcheck="true">// å…è®¸è·¨åŸŸ</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * ç”ŸæˆéªŒè¯ç å›¾ç‰‡     * @return     */</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"getImageCode"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">getImageCode</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// ä½¿ç”¨å·¥å…·ç±»ç”ŸæˆéªŒè¯ç å¹¶è¾“å‡º</span>        ByteArrayOutputStream os <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String code <span class="token operator">=</span> VerifyCodeUtils<span class="token punctuation">.</span><span class="token function">generateVerifyCode</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        VerifyCodeUtils<span class="token punctuation">.</span><span class="token function">outputImage</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> os<span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ä¿å­˜è‡³applicationContextåŸŸä¸­</span>        request<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"code"</span><span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å°†å›¾ç‰‡è½¬æ¢ä¸ºbase64</span>        String s <span class="token operator">=</span> Base64Utils<span class="token punctuation">.</span><span class="token function">encodeToString</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span><span class="token function">toByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"data:image/png;base64,"</span> <span class="token operator">+</span> s<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>åœ¨å‰ç«¯å‘èµ·å¼‚æ­¥è¯·æ±‚</p></blockquote><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>js/vue.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>js/axios.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">    <span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        el<span class="token punctuation">:</span> <span class="token string">"#wrap"</span><span class="token punctuation">,</span>        data<span class="token punctuation">:</span> <span class="token punctuation">{</span>            url<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>            date<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// æ›´æ¢éªŒè¯ç </span>            <span class="token function">getImg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSrc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true">// å°è£…è·å–éªŒè¯ç çš„è¯·æ±‚æ–¹æ³•</span>            <span class="token function">getSrc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>                axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/empAdmin/user/getImageCode?time="</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>                        <span class="token comment" spellcheck="true">// console.log(res.data);</span>                        _this<span class="token punctuation">.</span>url <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// é¡µé¢åŠ è½½å‰æ‰§è¡Œ  å‘èµ·å¼‚æ­¥è¯·æ±‚</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSrc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// æ˜¾ç¤ºå½“å‰æ—¥æœŸ</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>num<span class="token punctuation">"</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>javascript:;<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getImg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ¢ä¸€å¼ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span></code></pre><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>date<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre><h4 id="4ã€å®ç°æ³¨å†ŒåŠŸèƒ½"><a href="#4ã€å®ç°æ³¨å†ŒåŠŸèƒ½" class="headerlink" title="4ã€å®ç°æ³¨å†ŒåŠŸèƒ½"></a>4ã€å®ç°æ³¨å†ŒåŠŸèƒ½</h4><blockquote><p>åˆ›å»ºUserå®ä½“ç±»ï¼Œä½¿ç”¨lombokï¼</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>bean<span class="token punctuation">;</span><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> String id<span class="token punctuation">;</span>    <span class="token keyword">private</span> String username<span class="token punctuation">;</span>    <span class="token keyword">private</span> String realname<span class="token punctuation">;</span>    <span class="token keyword">private</span> String password<span class="token punctuation">;</span>    <span class="token keyword">private</span> String gender<span class="token punctuation">;</span>    <span class="token keyword">private</span> String status<span class="token punctuation">;</span>    <span class="token keyword">private</span> Date registerTime<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>ç¼–å†™daoå±‚</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>dao<span class="token punctuation">;</span><span class="token annotation punctuation">@Mapper</span><span class="token annotation punctuation">@Repository</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// æ·»åŠ ç”¨æˆ·</span>    <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// æ ¹æ®ç”¨æˆ·åæŸ¥æ‰¾ç”¨æˆ·</span>    User <span class="token function">queryUserByName</span><span class="token punctuation">(</span>String username<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>å¯¹åº”çš„sqlæ˜ å°„æ–‡ä»¶</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8" ?></span><span class="token doctype">&lt;!DOCTYPE mapper        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" ></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.dao.UserDao<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>save<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>User<span class="token punctuation">"</span></span> <span class="token attr-name">useGeneratedKeys</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        insert into t_user        values        (#{id},#{username},#{realname},#{password},#{gender},#{status},#{registerTime})    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>queryUserByName<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>String<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>User<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select id,username,realname,password,gender,status,register_time        from t_user where username=#{username}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">></span></span></code></pre><blockquote><p>ç¼–å†™serviceå±‚</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>service<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// ç”¨æˆ·æ³¨å†Œ</span>    <span class="token keyword">void</span> <span class="token function">register</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>å®ç°å¯¹åº”çš„serviceæ¥å£</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">;</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> UserDao userDao<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">register</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å­˜åœ¨</span>        User user1 <span class="token operator">=</span> userDao<span class="token punctuation">.</span><span class="token function">queryUserByName</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>user1<span class="token operator">==</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// ç”Ÿæˆç”¨æˆ·çŠ¶æ€</span>            user<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token string">"å·²æ¿€æ´»"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// è®¾ç½®ç”¨æˆ·æ³¨å†Œæ—¶é—´</span>            user<span class="token punctuation">.</span><span class="token function">setRegisterTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// è°ƒç”¨dao</span>            userDao<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·åå·²å­˜åœ¨ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>ç¼–å†™controllerå±‚ï¼Œåœ¨UserControllerä¸­æ·»åŠ å“åº”æ³¨å†Œè¯·æ±‚çš„æ–¹æ³•</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Autowired</span><span class="token keyword">private</span> UserService userService<span class="token punctuation">;</span><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"register"</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// @RequestBodyå°†å‰ç«¯ä¼ æ¥çš„jsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºjavaå¯¹è±¡</span><span class="token keyword">public</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> User user<span class="token punctuation">,</span> String code<span class="token punctuation">,</span> HttpServletRequest request<span class="token punctuation">)</span> <span class="token punctuation">{</span>    Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆ¤æ–­éªŒè¯ç </span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"éªŒè¯ç ä¸ºç©ºï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        String realCode <span class="token operator">=</span> <span class="token punctuation">(</span>String<span class="token punctuation">)</span> request<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"code"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>realCode<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·åä¸ºç©ºï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"å¯†ç ä¸ºç©ºï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">// è°ƒç”¨serviceæ–¹æ³•</span>            userService<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"æç¤ºï¼šæ³¨å†ŒæˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"éªŒè¯ç é”™è¯¯ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"æç¤ºï¼š"</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> map<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>ç¼–å†™å‰ç«¯é¡µé¢</p></blockquote><p>åœ¨vueå¯¹è±¡çš„dataä¸­æ·»åŠ userå¯¹è±¡ï¼Œç”¨æ¥æ¥æ”¶é¡µé¢çš„å‚æ•°<br><img src="/2020/08/11/project-01/4.png" alt></p><p>å°†é¡µé¢ä¸­çš„è¡¨å•é¡¹ä¸userçš„æ¯ä¸€ä¸ªå±æ€§å€¼ç»‘å®šï¼Œ.trimå»æ‰å‰åç©ºæ ¼<br><img src="/2020/08/11/project-01/3.png" alt></p><p>ç»™æŒ‰é’®ç»‘å®šæ³¨å†Œäº‹ä»¶</p><pre class=" language-html"><code class="language-html">&lt;input @click="register" type="button" class="button" value= " æ³¨ å†Œ "/></code></pre><p>å‘èµ·æ³¨å†Œè¯·æ±‚</p><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// æ³¨å†Œ</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/empAdmin/user/register?code="</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>code<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// console.log(res.data);</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// æ³¨å†ŒæˆåŠŸï¼Œè·³è½¬ç™»å½•é¡µé¢</span>                <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg <span class="token operator">+</span> <span class="token string">"ç‚¹å‡»ç¡®å®šè·³è½¬è‡³ç™»å½•é¡µé¢ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">"http://localhost:8080/empAdmin/login.html"</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// æ³¨å†Œå¤±è´¥</span>                <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg <span class="token operator">+</span> <span class="token string">"ç‚¹å‡»ç¡®å®šé‡æ–°æ³¨å†Œï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h4 id="5ã€å®ç°ç™»å½•åŠŸèƒ½"><a href="#5ã€å®ç°ç™»å½•åŠŸèƒ½" class="headerlink" title="5ã€å®ç°ç™»å½•åŠŸèƒ½"></a>5ã€å®ç°ç™»å½•åŠŸèƒ½</h4><blockquote><p>daoå±‚</p></blockquote><p>å·²ç»æœ‰é€šè¿‡åå­—æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯çš„æ–¹æ³•<code>queryUserByName(String username)</code>ï¼Œserviceå±‚ç›´æ¥è°ƒç”¨å³å¯</p><blockquote><p>serviceå±‚</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> User <span class="token function">login</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·åä¸ºç©ºï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"å¯†ç ä¸ºç©ºï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// æ ¹æ®è¾“å…¥çš„ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·</span>    User user1 <span class="token operator">=</span> userDao<span class="token punctuation">.</span><span class="token function">queryUserByName</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å­˜åœ¨  ä½¿ç”¨ObjectUtils!</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>ObjectUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>user1<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> user1<span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"å¯†ç é”™è¯¯ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·åä¸å­˜åœ¨æˆ–é”™è¯¯ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>controllerå±‚</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"login"</span><span class="token punctuation">)</span><span class="token keyword">public</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Object<span class="token operator">></span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> User user<span class="token punctuation">)</span><span class="token punctuation">{</span>    Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Object<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        userService<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"æç¤ºï¼šç™»å½•æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"æç¤ºï¼š"</span><span class="token operator">+</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> map<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>å‰ç«¯é¡µé¢</p></blockquote><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>date<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>user.username<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>user.password<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">    <span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        el<span class="token punctuation">:</span> <span class="token string">"#wrap"</span><span class="token punctuation">,</span>        data<span class="token punctuation">:</span> <span class="token punctuation">{</span>            date<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>            user<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        methods<span class="token punctuation">:</span><span class="token punctuation">{</span>            <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// console.log(this.user);</span>                axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/empAdmin/user/login"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res<span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>                    <span class="token comment" spellcheck="true">// console.log(res.data);</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">{</span>                        <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token operator">+</span><span class="token string">"ç‚¹å‡»ç¡®å®šè·³è½¬å‘˜å·¥ç®¡ç†é¡µé¢ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        location<span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token string">"/empAdmin/emplist.html"</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                        <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token operator">+</span><span class="token string">"ç‚¹å‡»ç¡®å®šé‡æ–°ç™»å½•ï¼"</span><span class="token punctuation">)</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h4 id="6ã€å®ç°ç”¨æˆ·ç™»å½•ä¿¡æ¯å±•ç¤º"><a href="#6ã€å®ç°ç”¨æˆ·ç™»å½•ä¿¡æ¯å±•ç¤º" class="headerlink" title="6ã€å®ç°ç”¨æˆ·ç™»å½•ä¿¡æ¯å±•ç¤º"></a>6ã€å®ç°ç”¨æˆ·ç™»å½•ä¿¡æ¯å±•ç¤º</h4><p>ç™»å½•æˆåŠŸåçš„ä¿¡æ¯éƒ½åœ¨åç«¯è¿™è¾¹ï¼Œå‰ç«¯æ‹¿ä¸åˆ°è¿™äº›æ•°æ®ã€‚</p><p>åœ¨å‰åç«¯æœªåˆ†ç¦»çš„æ—¶å€™ï¼Œé€šå¸¸éƒ½æ˜¯é€šè¿‡æœåŠ¡ç«¯çš„HttpSessionæ¥ä¿å­˜è¿™äº›ä¿¡æ¯ï¼ŒæœåŠ¡ç«¯åœ¨åˆ›å»ºäº†Sessionçš„åŒæ—¶ï¼Œä¼šä¸ºè¯¥Sessionç”Ÿæˆå”¯ä¸€çš„sessionIdå¹¶ä¿å­˜åˆ°æµè§ˆå™¨ä¸­ï¼Œåœ¨éšåçš„è¯·æ±‚é€šè¿‡æºå¸¦sessionIdé‡æ–°è·å¾—å·²ç»åˆ›å»ºçš„Sessionï¼›</p><p>è€Œåœ¨å‰åç«¯åˆ†ç¦»çš„ç³»ç»Ÿä¸­ï¼Œå‰ç«¯ä¸åç«¯åˆ†åˆ«éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œå‰åç«¯äº¤äº’æ—¶ï¼Œå‰ç«¯è¯·æ±‚ä¸ä¼šå¸¦ä¸Šåç«¯sessionIdï¼Œsessionè·å–ä¸åˆ°ã€‚å› æ­¤å°†ä¿¡æ¯ä¿å­˜è‡³æµè§ˆå™¨ä¸­çš„localStorageä¸­</p><p>åœ¨controllerä¸­ä¿å­˜ç”¨æˆ·ä¿¡æ¯ï¼š<br><img src="/2020/08/11/project-01/5.png" alt></p><p>ç™»å½•æˆåŠŸåä¿å­˜ç”¨æˆ·ä¿¡æ¯åˆ°localStorage:</p><pre class=" language-js"><code class="language-js"><span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token comment" spellcheck="true">// console.log(this.user);</span>   axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/empAdmin/user/login"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">)</span>   <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res<span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">// console.log(res.data);</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">{</span>         <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token operator">+</span><span class="token string">"ç‚¹å‡»ç¡®å®šè·³è½¬å‘˜å·¥ç®¡ç†é¡µé¢ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment" spellcheck="true">// å°†ç”¨æˆ·ä¿¡æ¯å­˜æ”¾æŒ‡localStorageä¸­</span>         <span class="token comment" spellcheck="true">// JSON.stringify()å°†jsonå¯¹è±¡è½¬æ¢ä¸ºjsonå­—ç¬¦ä¸²</span>         localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span>JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         location<span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token string">"/empAdmin/emplist.html"</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>         <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token operator">+</span><span class="token string">"ç‚¹å‡»ç¡®å®šé‡æ–°ç™»å½•ï¼"</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><p>åœ¨å‘˜å·¥å±•ç¤ºé¡µé¢æ˜¾ç¤ºç™»å½•åï¼š</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">   <span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      el<span class="token punctuation">:</span> <span class="token string">"#wrap"</span><span class="token punctuation">,</span>      data<span class="token punctuation">:</span><span class="token punctuation">{</span>         date<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>         user<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment" spellcheck="true">// å­˜æ”¾ç”¨æˆ·ç™»å½•ä¿¡æ¯</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>         <span class="token keyword">this</span><span class="token punctuation">.</span>date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token keyword">var</span> userString <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token keyword">if</span><span class="token punctuation">(</span>userString<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">// å·²ç™»å½•</span>            <span class="token comment" spellcheck="true">// å°†jsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºjsonå¯¹è±¡</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>user <span class="token operator">=</span> JSON<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>userString<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">// æœªç™»å½•</span>            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"è¯·ç™»å½•ï¼ç‚¹å‡»ç¡®å®šè·³è½¬ç™»å½•é¡µé¢"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            location<span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token string">"/empAdmin/login.html"</span><span class="token punctuation">;</span>         <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>   <span class="token punctuation">}</span><span class="token punctuation">)</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>ç”¨æˆ·ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>user!<span class="token punctuation">=</span>null<span class="token punctuation">"</span></span> <span class="token attr-name">v-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>user.username<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">color</span><span class="token punctuation">:</span> red</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></code></pre><h4 id="7ã€å®ç°é€€å‡ºåŠŸèƒ½"><a href="#7ã€å®ç°é€€å‡ºåŠŸèƒ½" class="headerlink" title="7ã€å®ç°é€€å‡ºåŠŸèƒ½"></a>7ã€å®ç°é€€å‡ºåŠŸèƒ½</h4><p>åˆ é™¤localStorageä¸­çš„ç”¨æˆ·æ•°æ®ï¼Œè·³è½¬è‡³ç™»å½•é¡µ</p><pre class=" language-js"><code class="language-js">methods<span class="token punctuation">:</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å¤„ç†å®‰å…¨é€€å‡º</span>          <span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>              localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                location<span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token string">"/empAdmin/login.html"</span><span class="token punctuation">;</span>          <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="äºŒã€å‘˜å·¥æ¨¡å—"><a href="#äºŒã€å‘˜å·¥æ¨¡å—" class="headerlink" title="äºŒã€å‘˜å·¥æ¨¡å—"></a>äºŒã€å‘˜å·¥æ¨¡å—</h3><h4 id="1ã€å±•ç¤ºæ‰€æœ‰å‘˜å·¥çš„ä¿¡æ¯"><a href="#1ã€å±•ç¤ºæ‰€æœ‰å‘˜å·¥çš„ä¿¡æ¯" class="headerlink" title="1ã€å±•ç¤ºæ‰€æœ‰å‘˜å·¥çš„ä¿¡æ¯"></a>1ã€å±•ç¤ºæ‰€æœ‰å‘˜å·¥çš„ä¿¡æ¯</h4><blockquote><p>åˆ›å»ºå®ä½“ç±»</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>bean<span class="token punctuation">;</span><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Emp</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> String id<span class="token punctuation">;</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> String photoPath<span class="token punctuation">;</span>    <span class="token keyword">private</span> Double salary<span class="token punctuation">;</span>    <span class="token keyword">private</span> Integer age<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>daoå±‚</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>dao<span class="token punctuation">;</span><span class="token annotation punctuation">@Mapper</span><span class="token annotation punctuation">@Repository</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpDao</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥</span>    List<span class="token operator">&lt;</span>Emp<span class="token operator">></span> <span class="token function">listAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8" ?></span><span class="token doctype">&lt;!DOCTYPE mapper        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" ></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.dao.EmpDao<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>listAll<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Emp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select id,name,photo_path,salary,age from t_emp    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">></span></span></code></pre><blockquote><p>serviceå±‚</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>service<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpService</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å±•ç¤ºæ‰€æœ‰å‘˜å·¥</span>    List<span class="token operator">&lt;</span>Emp<span class="token operator">></span> <span class="token function">listAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">;</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">EmpService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> EmpDao empDao<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Emp<span class="token operator">></span> <span class="token function">listAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> empDao<span class="token punctuation">.</span><span class="token function">listAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>controllerå±‚</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>controller<span class="token punctuation">;</span><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"emp"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> EmpService empService<span class="token punctuation">;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"listAll"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Emp<span class="token operator">></span> <span class="token function">listAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        List<span class="token operator">&lt;</span>Emp<span class="token operator">></span> emps <span class="token operator">=</span> empService<span class="token punctuation">.</span><span class="token function">listAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> emps<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>å‰ç«¯</p></blockquote><p>åœ¨dataä¸­æ·»åŠ ä¸€ä¸ªæ•°ç»„ï¼Œç”¨æ¥å­˜æ”¾æ‰€æœ‰å‘˜å·¥<br><img src="/2020/08/11/project-01/6.png" alt></p><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// æŸ¥è¯¢å‘˜å·¥</span>axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/empAdmin/emp/listAll"</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res<span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// console.log(res.data);</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>emps <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// console.log(this.emps);</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><pre class=" language-html"><code class="language-html"><span class="token comment" spellcheck="true">&lt;!--éå†å‘˜å·¥åˆ—è¡¨--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>(emp,index) in emps<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>emp.id<span class="token punctuation">"</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>index%2<span class="token punctuation">=</span><span class="token punctuation">=</span>0?<span class="token punctuation">'</span>row1<span class="token punctuation">'</span>:<span class="token punctuation">'</span>row2<span class="token punctuation">'</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">v-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>emp.id<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">v-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>emp.name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>emp.photoPath<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">60</span>px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">v-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>emp.salary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">v-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>emp.age<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>emplist.html<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>åˆ é™¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token entity" title="&nbsp;">&amp;nbsp;</span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>updateEmp.html<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¿®æ”¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span></code></pre><h4 id="2ã€æ·»åŠ å‘˜å·¥"><a href="#2ã€æ·»åŠ å‘˜å·¥" class="headerlink" title="2ã€æ·»åŠ å‘˜å·¥"></a>2ã€æ·»åŠ å‘˜å·¥</h4><blockquote><p>daoå±‚</p></blockquote><p>æ·»åŠ æ·»åŠ å‘˜å·¥çš„æ–¹æ³•ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// æ·»åŠ å‘˜å·¥</span><span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>Emp emp<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å¯¹åº”çš„mapperæ–‡ä»¶</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>add<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Emp<span class="token punctuation">"</span></span> <span class="token attr-name">useGeneratedKeys</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    insert into t_emp values(#{id},#{name},#{photoPath},#{salary},#{age})<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">></span></span></code></pre><blockquote><p>serviceå±‚</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>Emp emp<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>Emp emp<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>emp<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥ç”¨æˆ·åï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>emp<span class="token punctuation">.</span><span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥è–ªèµ„ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>emp<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥å¹´é¾„ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    empDao<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>controllerå±‚</p></blockquote><pre class=" language-yml"><code class="language-yml"># é…ç½®ä¸Šä¼ æ–‡ä»¶çš„åœ°å€upload:  dir:    D:\IDEA_workspace\emps\src\main\resources\static\photos</code></pre><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// æ³¨å…¥ä¸Šä¼ ç”¨æˆ·å¤´åƒçš„åœ°å€ </span><span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"${upload.dir}"</span><span class="token punctuation">)</span> <span class="token keyword">private</span> String realPath<span class="token punctuation">;</span><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"addEmp"</span><span class="token punctuation">)</span><span class="token keyword">public</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> <span class="token function">addEmp</span><span class="token punctuation">(</span>Emp emp<span class="token punctuation">,</span> MultipartFile photo<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// System.out.println("å‘˜å·¥ä¿¡æ¯ï¼š"+emp);</span>    <span class="token comment" spellcheck="true">// System.out.println("å¤´åƒï¼š"+photo);</span>    HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// å¤´åƒä¿å­˜</span>        <span class="token comment" spellcheck="true">// 1ã€ä¿®æ”¹æ–‡ä»¶å</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ObjectUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>photo<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            String newFileName <span class="token operator">=</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"."</span> <span class="token operator">+</span>                    FilenameUtils<span class="token punctuation">.</span><span class="token function">getExtension</span><span class="token punctuation">(</span>photo<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// System.out.println(newFileName);</span>            <span class="token comment" spellcheck="true">// 2ã€å›¾åƒä¸Šä¼ </span>            photo<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>realPath<span class="token punctuation">,</span> newFileName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 3ã€è®¾ç½®å¤´åƒè®¿é—®åœ°å€</span>            emp<span class="token punctuation">.</span><span class="token function">setPhotoPath</span><span class="token punctuation">(</span>newFileName<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// æ·»åŠ å‘˜å·¥åˆ°æ•°æ®åº“ä¸­</span>            empService<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"æ·»åŠ æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·ä¸Šä¼ å¤´åƒ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"æç¤ºï¼š"</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> map<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>å‰ç«¯</p></blockquote><p>ç»‘å®šè¡¨å•å±æ€§ï¼Œå¯¹æ–‡ä»¶æ·»åŠ å¼•ç”¨<br><img src="/2020/08/11/project-01/7.png" alt></p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">   <span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      el<span class="token punctuation">:</span> <span class="token string">"#wrap"</span><span class="token punctuation">,</span>      data<span class="token punctuation">:</span><span class="token punctuation">{</span>         date<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>         user<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// å­˜æ”¾ç”¨æˆ·ç™»å½•ä¿¡æ¯</span>         emp<span class="token punctuation">:</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å­˜æ”¾å‘˜å·¥ä¿¡æ¯</span>            name<span class="token punctuation">:</span><span class="token string">""</span><span class="token punctuation">,</span>            age<span class="token punctuation">:</span><span class="token string">""</span><span class="token punctuation">,</span>            salary<span class="token punctuation">:</span><span class="token string">""</span><span class="token punctuation">,</span>            empPhoto<span class="token punctuation">:</span><span class="token string">""</span>         <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>         <span class="token keyword">this</span><span class="token punctuation">.</span>date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token keyword">var</span> userString <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token keyword">if</span><span class="token punctuation">(</span>userString<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">// å·²ç™»å½•</span>            <span class="token comment" spellcheck="true">// å°†jsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºjsonå¯¹è±¡</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>user <span class="token operator">=</span> JSON<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>userString<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">// æœªç™»å½•</span>            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"è¯·ç™»å½•ï¼ç‚¹å‡»ç¡®å®šè·³è½¬ç™»å½•é¡µé¢"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            location<span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token string">"/empAdmin/login.html"</span><span class="token punctuation">;</span>         <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      methods<span class="token punctuation">:</span><span class="token punctuation">{</span>         <span class="token comment" spellcheck="true">// å¤„ç†å®‰å…¨é€€å‡º</span>         <span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            location<span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token string">"/empAdmin/login.html"</span><span class="token punctuation">;</span>         <span class="token punctuation">}</span><span class="token punctuation">,</span>         <span class="token function">addEmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// console.log(this.emp);</span>            <span class="token comment" spellcheck="true">// console.log(this.$refs.empPhoto.files[0]);</span>            <span class="token comment" spellcheck="true">// æ–‡ä»¶ä¸Šä¼ å¿…é¡»æ˜¯postè¯·æ±‚  entypeå¿…é¡»ä¸ºmultipart/from-data</span>            <span class="token comment" spellcheck="true">// æ„é€ è¡¨å•</span>            <span class="token keyword">var</span> fromData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            fromData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>emp<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>            fromData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>emp<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>            fromData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"salary"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>emp<span class="token punctuation">.</span>salary<span class="token punctuation">)</span><span class="token punctuation">;</span>            fromData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"photo"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>empPhoto<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>               method<span class="token punctuation">:</span><span class="token string">"post"</span><span class="token punctuation">,</span>               url<span class="token punctuation">:</span><span class="token string">"http://localhost:8080/empAdmin/emp/addEmp"</span><span class="token punctuation">,</span>               data<span class="token punctuation">:</span>fromData<span class="token punctuation">,</span>               headers<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token string">'content-type'</span><span class="token punctuation">:</span><span class="token string">'multipart/form-data'</span><span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res<span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>               <span class="token comment" spellcheck="true">// console.log(res.data);</span>               <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">{</span>                  <span class="token keyword">if</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token operator">+</span><span class="token string">"ç‚¹å‡»è·³è½¬å‘˜å·¥åˆ—è¡¨é¡µé¢"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                     location<span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token string">"/empAdmin/emplist.html"</span><span class="token punctuation">;</span>                  <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                     location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token punctuation">}</span>               <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                  <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span>         <span class="token punctuation">}</span>      <span class="token punctuation">}</span>   <span class="token punctuation">}</span><span class="token punctuation">)</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>ä¿®æ”¹æ˜¾ç¤ºç”¨æˆ·å¤´åƒçš„æ ‡ç­¾è·¯å¾„</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">'</span>/empAdmin/photos/<span class="token punctuation">'</span>+emp.photoPath<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">60</span>px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span></code></pre><h4 id="3ã€åˆ é™¤å‘˜å·¥"><a href="#3ã€åˆ é™¤å‘˜å·¥" class="headerlink" title="3ã€åˆ é™¤å‘˜å·¥"></a>3ã€åˆ é™¤å‘˜å·¥</h4><blockquote><p>daoå±‚</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// åˆ é™¤å‘˜å·¥</span><span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span>String id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æ ¹æ®idæŸ¥è¯¢å‘˜å·¥</span>Emp <span class="token function">queryEmpById</span><span class="token punctuation">(</span>String id<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>delete<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>String<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>    delete from t_emp where id = #{id}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>delete</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>queryEmpById<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Emp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    select id,name,photo_path,salary,age from t_emp    where id = #{id}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre><blockquote><p>serviceå±‚</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// åˆ é™¤å‘˜å·¥</span><span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span>String id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æ ¹æ®idæŸ¥è¯¢å‘˜å·¥</span>Emp <span class="token function">queryEmpById</span><span class="token punctuation">(</span>String id<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span>String id<span class="token punctuation">)</span> <span class="token punctuation">{</span>    empDao<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> Emp <span class="token function">queryEmpById</span><span class="token punctuation">(</span>String id<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> empDao<span class="token punctuation">.</span><span class="token function">queryEmpById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>controllerå±‚</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"delete"</span><span class="token punctuation">)</span><span class="token keyword">public</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Object<span class="token operator">></span> <span class="token function">delete</span><span class="token punctuation">(</span>String id<span class="token punctuation">)</span><span class="token punctuation">{</span>    HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆ é™¤å‘˜å·¥å¤´åƒ</span>        Emp emp <span class="token operator">=</span> empService<span class="token punctuation">.</span><span class="token function">queryEmpById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        File file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>emp<span class="token punctuation">.</span><span class="token function">getPhotoPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            file<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        empService<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"åˆ é™¤æˆåŠŸ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"åˆ é™¤å¤±è´¥"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> map<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>å‰ç«¯</p></blockquote><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// åˆ é™¤å‘˜å·¥</span><span class="token function">deleteEmp</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">"ç¡®è®¤åˆ é™¤å—ï¼Ÿ"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/empAdmin/emp/delete?id="</span> <span class="token operator">+</span> id<span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>                    location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                    <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>å‚æ•°ä¼ é€’ï¼š</p><pre class=" language-html"><code class="language-html"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>javascript:;<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>deleteEmp(emp.id)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>åˆ é™¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code></pre><h4 id="4ã€ä¿®æ”¹å‘˜å·¥"><a href="#4ã€ä¿®æ”¹å‘˜å·¥" class="headerlink" title="4ã€ä¿®æ”¹å‘˜å·¥"></a>4ã€ä¿®æ”¹å‘˜å·¥</h4><blockquote><p>dao</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// ä¿®æ”¹å‘˜å·¥</span><span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span>Emp emp<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>update<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Emp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    update t_emp set    name=#{name},photo_path=#{photoPath},salary=#{salary},age=#{age}    where id = #{id}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">></span></span></code></pre><blockquote><p>service</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// ä¿®æ”¹å‘˜å·¥</span><span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span>Emp emp<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span>Emp emp<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>emp<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥ç”¨æˆ·åï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>emp<span class="token punctuation">.</span><span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥è–ªèµ„ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>emp<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥å¹´é¾„ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    empDao<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>controller</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"update"</span><span class="token punctuation">)</span><span class="token keyword">public</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> <span class="token function">update</span><span class="token punctuation">(</span>Emp emp<span class="token punctuation">,</span> MultipartFile photo<span class="token punctuation">)</span> <span class="token punctuation">{</span>    HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// å¤´åƒä¿å­˜</span>        <span class="token comment" spellcheck="true">// 1ã€ä¿®æ”¹æ–‡ä»¶å</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ObjectUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>photo<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            String newFileName <span class="token operator">=</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"."</span> <span class="token operator">+</span>                    FilenameUtils<span class="token punctuation">.</span><span class="token function">getExtension</span><span class="token punctuation">(</span>photo<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 2ã€å›¾åƒä¸Šä¼ </span>            photo<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>realPath<span class="token punctuation">,</span> newFileName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 3ã€è®¾ç½®å¤´åƒè®¿é—®åœ°å€</span>            emp<span class="token punctuation">.</span><span class="token function">setPhotoPath</span><span class="token punctuation">(</span>newFileName<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        empService<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"ä¿®æ”¹æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"æç¤ºï¼š"</span><span class="token operator">+</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> map<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>å‰ç«¯</p></blockquote><p>ä»å‘˜å·¥åˆ—è¡¨ä¸­é€‰ä¸­å‘˜å·¥çš„idä¼ é€’ç»™ä¿®æ”¹é¡µé¢ï¼š</p><pre class=" language-html"><code class="language-html"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>javascript:;<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>updateEmp(emp.id)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¿®æ”¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code></pre><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// ä¿®æ”¹å‘˜å·¥</span><span class="token function">updateEmp</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">{</span>    location<span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token string">"/empAdmin/updateEmp.html?id="</span><span class="token operator">+</span>id<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>åœ¨ä¿®æ”¹é¡µé¢åˆ›å»ºå‰(created()æ–¹æ³•ä¸­)å‘èµ·è·å–å½“å‰å‘˜å·¥ä¿¡æ¯çš„è¯·æ±‚</p><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// è·å–å‘˜å·¥id</span><span class="token keyword">var</span> start <span class="token operator">=</span> location<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">"="</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> id <span class="token operator">=</span> location<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>start<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// console.log(id);</span><span class="token comment" spellcheck="true">// æŸ¥è¯¢å½“å‰å‘˜å·¥æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š</span>axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/empAdmin/emp/getEmp?id="</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res<span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>emp <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>ä½¿ç”¨v-modelå°†è¿”å›çš„jsonæ•°æ®ç»‘å®šè¡¨å•ä¸­çš„å±æ€§å€¼</p><p>æ—§ç…§ç‰‡çš„æ˜¾ç¤ºå’Œæ–°ç…§ç‰‡ä¸Šä¼ <br><img src="/2020/08/11/project-01/8.png" alt></p><p>ç»‘å®šæ›´æ–°äº‹ä»¶</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>updateEmp<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>æ›´ æ–°<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></code></pre><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// æ›´æ–°å‘˜å·¥ä¿¡æ¯</span><span class="token function">updateEmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">var</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>emp<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>emp<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"photoPath"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>emp<span class="token punctuation">.</span>photoPath<span class="token punctuation">)</span>    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"photo"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>empPhoto<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"salary"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>emp<span class="token punctuation">.</span>salary<span class="token punctuation">)</span><span class="token punctuation">;</span>    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>emp<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>formData<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        method<span class="token punctuation">:</span> <span class="token string">"post"</span><span class="token punctuation">,</span>        url<span class="token punctuation">:</span><span class="token string">"http://localhost:8080/empAdmin/emp/update"</span><span class="token punctuation">,</span>        data<span class="token punctuation">:</span> formData<span class="token punctuation">,</span>        headers<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token string">'content-type'</span><span class="token punctuation">:</span><span class="token string">'multipart/form-data'</span><span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res<span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                location<span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token string">"/empAdmin/emplist.html"</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><h3 id="ä¸‰ã€æ•´åˆRedisç¼“å­˜"><a href="#ä¸‰ã€æ•´åˆRedisç¼“å­˜" class="headerlink" title="ä¸‰ã€æ•´åˆRedisç¼“å­˜"></a>ä¸‰ã€æ•´åˆRedisç¼“å­˜</h3><p>1ã€å¯¼å…¥ä¾èµ–ï¼š</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>2ã€é…ç½®Redisè®¿é—®ipå’Œç«¯å£</p><pre class=" language-yml"><code class="language-yml">spring:  datasource:    username: root    password: 2824199842    url: jdbc:mysql://127.0.0.1:3306/emp?serverTimezone=Asia/Shanghai    driver-class-name: com.mysql.cj.jdbc.Driver    type: com.alibaba.druid.pool.DruidDataSource  redis:    host: 127.0.0.1    port: 6379</code></pre><p>3ã€åˆ›å»ºRedisCacheç±»å®ç°mybatisä¸­çš„Cacheæ¥å£ï¼Œå¯¹æ“çºµmybatisç¼“å­˜</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>cache<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä½¿ç”¨redisæ“çºµmybatisç¼“å­˜</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisCache</span> <span class="token keyword">implements</span> <span class="token class-name">Cache</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å¯¹åº”mapperæ–‡ä»¶ä¸­çš„namespace</span>    <span class="token keyword">private</span> String id<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">RedisCache</span><span class="token punctuation">(</span>String id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// å°è£…è·å–redisTemplateçš„æ–¹æ³•</span>    <span class="token keyword">public</span> RedisTemplate <span class="token function">getRedisTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        RedisTemplate redisTemplate <span class="token operator">=</span><span class="token punctuation">(</span>RedisTemplate<span class="token punctuation">)</span> ApplicationContextUtils<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"redisTemplate"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> redisTemplate<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å½“å‰ç¼“å­˜çš„idï¼š"</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// æ”¾å…¥redisç¼“å­˜</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">putObject</span><span class="token punctuation">(</span>Object key<span class="token punctuation">,</span> Object value<span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ”¾å…¥ç¼“å­˜çš„key-value"</span><span class="token operator">+</span>key<span class="token operator">+</span><span class="token string">"-"</span><span class="token operator">+</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è·å–redisTemplate</span>        <span class="token function">getRedisTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>key<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// ä»redisç¼“å­˜ä¸­è·å–</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> Object <span class="token function">getObject</span><span class="token punctuation">(</span>Object key<span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è·å–ç¼“å­˜çš„key-value"</span><span class="token operator">+</span>key<span class="token operator">+</span><span class="token string">"-"</span><span class="token operator">+</span><span class="token function">getRedisTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>key<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">getRedisTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>key<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// åˆ é™¤æŒ‡å®šç¼“å­˜ä¿¡æ¯</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> Object <span class="token function">removeObject</span><span class="token punctuation">(</span>Object o<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> null<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// æ¸…é™¤ç¼“å­˜ä¿¡æ¯</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ¸…é™¤ç¼“å­˜"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">getRedisTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// ç¼“å­˜å¤§å°</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token function">getRedisTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>4ã€åˆ›å»ºå·¥å…·ç±»applicationContextUtilså®ç°ApplicationContextAwareè·å–å·¥å‚å®ä¾‹ï¼Œå¹¶ä»ä¸­è·å–éœ€è¦çš„å®ç°ç±»</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>utils<span class="token punctuation">;</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationContextUtils</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationContextAware</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> ApplicationContext applicationContext<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è·å–å½“å‰å·¥å‚</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setApplicationContext</span><span class="token punctuation">(</span>ApplicationContext applicationContext<span class="token punctuation">)</span> <span class="token keyword">throws</span> BeansException <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>applicationContext <span class="token operator">=</span> applicationContext<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// è·å–å·¥å‚ä¸­çš„å®ç°ç±»</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Object <span class="token function">getBean</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>å­˜å‚¨åœ¨ç¼“å­˜ä¸­çš„å®ä½“ç±»å¿…é¡»å®ç°Serializableæ¥å£<br><img src="/2020/08/11/project-01/9.png" alt></p><p>5ã€åœ¨mapperæ–‡ä»¶ä¸­è®¾ç½®è‡ªå®šä¹‰çš„Redisç¼“å­˜</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- ä½¿ç”¨è‡ªå®šä¹‰çš„Redisç¼“å­˜ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.cache.RedisCache<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cache</span><span class="token punctuation">></span></span></code></pre><p><img src="/2020/08/11/project-01/10.png" alt></p><p><img src="/2020/08/11/project-01/11.png" alt></p><h1 id="ä¸»è¦ç•Œé¢"><a href="#ä¸»è¦ç•Œé¢" class="headerlink" title="ä¸»è¦ç•Œé¢"></a>ä¸»è¦ç•Œé¢</h1><p><img src="/2020/08/11/project-01/13.png" style="zoom:80%;"><img src="/2020/08/11/project-01/14.png" alt></p><img src="/2020/08/11/project-01/12.png" style="zoom:80%;"><img src="/2020/08/11/project-01/16.png" style="zoom:80%;"><img src="/2020/08/11/project-01/15.png" style="zoom:80%;"><h1 id="é¡¹ç›®æ€»ç»“"><a href="#é¡¹ç›®æ€»ç»“" class="headerlink" title="é¡¹ç›®æ€»ç»“"></a>é¡¹ç›®æ€»ç»“</h1><p>åšäº†ä»€ä¹ˆï¼Ÿ</p><ul><li>å®ç°äº†ç®¡ç†å‘˜çš„æ³¨å†Œå’Œç™»å½•</li><li>å‘˜å·¥çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½</li></ul><p>å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ</p><ul><li>ä½¿ç”¨äº†Redisä½œä¸ºMybatisçš„ç¼“å­˜ï¼Œä»¥å‰åªæ˜¯å¯¹Mybatisçš„ç¼“å­˜æœºåˆ¶åœç•™åœ¨äº†è§£é˜¶æ®µï¼Œè¿™æ¬¡ä½¿ç”¨ä¸Šäº†ä¹‹å‰å­¦ä¹ çš„Redisæ•°æ®åº“</li><li>ä½¿ç”¨äº†vueå¯¹é¡µé¢è¿›è¡Œæ¸²æŸ“ï¼Œaxioså‘èµ·å¼‚æ­¥è¯·æ±‚ï¼Œç†Ÿæ‚‰äº†å‰åç«¯åˆ†ç¦»ç³»ç»Ÿçš„æ•°æ®äº¤äº’æ¨¡å¼</li><li>ä½¿ç”¨base64æ ¼å¼åœ¨æµè§ˆå™¨ç«¯æ˜¾ç¤ºå›¾ç‰‡ï¼Œéœ€è¦åœ¨base64æ ¼å¼çš„å›¾ç‰‡å‰é¢åŠ ä¸Š<code>data:image/png;base64,</code>å‰ç¼€</li><li>å­¦ä¹ åˆ°äº†ä½¿ç”¨ObjectUtilsï¼ŒStringUtilså¯¹ä¸€äº›å±æ€§è¿›è¡Œéç©ºåˆ¤æ–­</li><li>ä½¿ç”¨ Exception+ResponseBodyï¼Œè®²å¼‚å¸¸è¿”å›ç»™å‰ç«¯ï¼Œç»™ç”¨æˆ·å‹å¥½çš„æç¤º</li><li>ä½¿ç”¨localStorageä¿å­˜ç”¨æˆ·ç™»å½•ä¿¡æ¯</li><li>åœ¨vueä¸­æ„é€ è¡¨å•ï¼Œå¡«å……æ•°æ®å’Œæ–‡ä»¶ï¼Œåç«¯ä½¿ç”¨MultipartFileç±»æ¥æ”¶å‰ç«¯çš„æ–‡ä»¶ï¼Œå¹¶ä¸Šä¼ å€¼åˆ°æŒ‡å®šç›®å½•</li></ul><p>é‡åˆ°çš„é—®é¢˜ï¼Œæ€ä¹ˆè§£å†³çš„ï¼Ÿ</p><ul><li>ä¸Šä¼ ç”¨æˆ·ç…§ç‰‡çš„é—®é¢˜ï¼Œåœ¨æŒ‡å®šçš„ä¸Šä¼ ç›®å½•å‘ç°äº†æ–‡ä»¶çš„å­˜åœ¨ï¼Œå¯æ˜¯å´åœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºä¸å‡ºæ¥ï¼Œé€šè¿‡æŸ¥çœ‹æ•°æ®åº“ä¸­å‘˜å·¥è¡¨çš„ä¿¡æ¯ï¼Œå‘ç°å…¶ä»–å±æ€§éƒ½å­˜åœ¨ï¼Œåªæœ‰ç…§ç‰‡ä¸ºç©ºï¼Œé€šè¿‡åœ¨controllerçš„æ·»åŠ æ–¹æ³•æ‰“ä¸Šæ–­ç‚¹ï¼Œè°ƒè¯•å‘ç°å›¾ç‰‡å¹¶æ²¡æœ‰ä¿å­˜åˆ°å‘˜å·¥å¯¹è±¡ä¸­ï¼Œé€šè¿‡æ·»åŠ ç›¸åº”çš„setæ–¹æ³•ï¼Œæœ€åè§£å†³äº†é—®é¢˜ã€‚</li><li>åœ¨é¡¹ç›®ä¸­æˆ‘ä½¿ç”¨äº†dateæ¥æ˜¾ç¤ºå½“å‰çš„æ—¥æœŸï¼Œè€Œå¯¹å‰åç«¯çš„äº¤äº’ä¸­è¦é¢‘ç¹ä½¿ç”¨åˆ°dataå˜é‡ï¼Œåœ¨ä¸€æ¬¡æµ‹è¯•è¿‡ç¨‹ä¸­å°±ä¸€ä¸å°å¿ƒå†™é”™äº†ï¼Œæ£€æŸ¥äº†å¾ˆé•¿æ—¶é—´æ‰å‘ç°ï¼ŒçœŸçš„å·®ä¹‹ä¸€æ¯«ï¼Œè°¬ä¹‹åƒé‡Œå•Šï¼</li></ul><h1 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h1><h2 id="æ·»åŠ æ—¥å¿—è¾“å‡ºåŠŸèƒ½"><a href="#æ·»åŠ æ—¥å¿—è¾“å‡ºåŠŸèƒ½" class="headerlink" title="æ·»åŠ æ—¥å¿—è¾“å‡ºåŠŸèƒ½"></a>æ·»åŠ æ—¥å¿—è¾“å‡ºåŠŸèƒ½</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> Logger LOGGER <span class="token operator">=</span> LoggerFactory<span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span>UserController<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>åœ¨æ–¹æ³•ä¸­æ‰“å°æ—¥å¿—ï¼š</p><pre class=" language-java"><code class="language-java">LOGGER<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·ç™»å½•ï¼Œå‚æ•°ï¼š{}"</span><span class="token punctuation">,</span> JSON<span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£å¹¶å®ç°æ—¥å¿—åˆ‡é¢çš„æ–¹å¼æ‰“å°æ—¥å¿—ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>ElementType<span class="token punctuation">.</span>METHOD<span class="token punctuation">)</span><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span>RetentionPolicy<span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span><span class="token comment" spellcheck="true">// è¿è¡Œæ—¶è·å–æ³¨è§£å€¼</span><span class="token keyword">public</span> @<span class="token keyword">interface</span> <span class="token class-name">Log</span> <span class="token punctuation">{</span>    String <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>LogAspect.java</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@Aspect</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LogAspect</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> Logger LOGGER <span class="token operator">=</span> LoggerFactory<span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span>LogAspect<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"execution(public * com.zyz.controller..*.*(..))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">logPointcut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">"logPointcut()"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">logAround</span><span class="token punctuation">(</span>JoinPoint joinPoint<span class="token punctuation">)</span> <span class="token punctuation">{</span>        MethodSignature methodSignature <span class="token operator">=</span> <span class="token punctuation">(</span>MethodSignature<span class="token punctuation">)</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Method method <span class="token operator">=</span> methodSignature<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Log log <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span>Log<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>null <span class="token operator">!=</span> log<span class="token punctuation">)</span><span class="token punctuation">{</span>            LOGGER<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>log<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="è‡ªå®šä¹‰ç¼“å­˜æ³¨è§£å¹¶å®ç°ç¼“å­˜åˆ‡é¢"><a href="#è‡ªå®šä¹‰ç¼“å­˜æ³¨è§£å¹¶å®ç°ç¼“å­˜åˆ‡é¢" class="headerlink" title="è‡ªå®šä¹‰ç¼“å­˜æ³¨è§£å¹¶å®ç°ç¼“å­˜åˆ‡é¢"></a>è‡ªå®šä¹‰ç¼“å­˜æ³¨è§£å¹¶å®ç°ç¼“å­˜åˆ‡é¢</h2><p>æ”¯æŒå•ç‹¬è®¾ç½®ç¼“å­˜çš„è¿‡æœŸæ—¶é—´<br>1ã€è‡ªå®šä¹‰RedisTemplateï¼ŒæŒ‡å®šåºåˆ—åŒ–æ–¹å¼ï¼Œé˜²æ­¢å‡ºç°ä¹±ç </p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisConfig</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> RedisTemplate<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> <span class="token function">redisTemplate</span><span class="token punctuation">(</span>RedisConnectionFactory factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>        RedisTemplate<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> template <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedisTemplate</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        template<span class="token punctuation">.</span><span class="token function">setConnectionFactory</span><span class="token punctuation">(</span>factory<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Jsonåºåˆ—åŒ–</span>        Jackson2JsonRedisSerializer jackson2JsonRedisSerializer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jackson2JsonRedisSerializer</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ObjectMapper objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        objectMapper<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span>PropertyAccessor<span class="token punctuation">.</span>ALL<span class="token punctuation">,</span> JsonAutoDetect<span class="token punctuation">.</span>Visibility<span class="token punctuation">.</span>ANY<span class="token punctuation">)</span><span class="token punctuation">;</span>        objectMapper<span class="token punctuation">.</span><span class="token function">enableDefaultTyping</span><span class="token punctuation">(</span>ObjectMapper<span class="token punctuation">.</span>DefaultTyping<span class="token punctuation">.</span>NON_FINAL<span class="token punctuation">)</span><span class="token punctuation">;</span>        jackson2JsonRedisSerializer<span class="token punctuation">.</span><span class="token function">setObjectMapper</span><span class="token punctuation">(</span>objectMapper<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// Stringåºåˆ—åŒ–</span>        StringRedisSerializer stringRedisSerializer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringRedisSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// keyé‡‡ç”¨Stringåºåˆ—åŒ–æ–¹å¼</span>        template<span class="token punctuation">.</span><span class="token function">setKeySerializer</span><span class="token punctuation">(</span>stringRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>        template<span class="token punctuation">.</span><span class="token function">setHashKeySerializer</span><span class="token punctuation">(</span>stringRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>        template<span class="token punctuation">.</span><span class="token function">setValueSerializer</span><span class="token punctuation">(</span>jackson2JsonRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>        template<span class="token punctuation">.</span><span class="token function">setHashValueSerializer</span><span class="token punctuation">(</span>jackson2JsonRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>        template<span class="token punctuation">.</span><span class="token function">afterPropertiesSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> template<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>2ã€è‡ªå®šä¹‰ç¼“å­˜æ³¨è§£</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span>ElementType<span class="token punctuation">.</span>METHOD<span class="token punctuation">,</span> ElementType<span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span>RetentionPolicy<span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span><span class="token comment" spellcheck="true">// è¿è¡Œæ—¶è·å–æ³¨è§£å€¼</span><span class="token keyword">public</span> @<span class="token keyword">interface</span> <span class="token class-name">Cache</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// key</span>    String <span class="token function">key</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// æœ‰æ•ˆæ—¶é—´ é»˜è®¤30åˆ†é’Ÿ å•ä½ s</span>    <span class="token keyword">long</span> <span class="token function">expire</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token number">30</span><span class="token operator">*</span><span class="token number">60</span> <span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>3ã€å®ç°ç¼“å­˜åˆ‡é¢CacheAspect.java</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Aspect</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CacheAspect</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> RedisTemplate redisTemplate<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"@annotation(com.zyz.aop.cache.Cache)"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cachePointcut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"cachePointcut() &amp;&amp; @annotation(cache)"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> Object <span class="token function">cacheAround</span><span class="token punctuation">(</span>ProceedingJoinPoint point<span class="token punctuation">,</span> Cache cache<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// æ ¹æ®å‚æ•°ç”Ÿæˆkey</span>        <span class="token keyword">final</span> String key <span class="token operator">=</span> <span class="token function">parseKey</span><span class="token punctuation">(</span>cache<span class="token punctuation">.</span><span class="token function">key</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Object value <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// ä»redisä¸­è·å–ç¼“å­˜</span>            value <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>null <span class="token operator">!=</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>            MethodSignature methodSignature <span class="token operator">=</span> <span class="token punctuation">(</span>MethodSignature<span class="token punctuation">)</span> point<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Method method <span class="token operator">=</span> methodSignature<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> value<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//ç­‰å¾…è¿”å›ç»“æœ</span>            Object proceed <span class="token operator">=</span> point<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>proceed <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    <span class="token comment" spellcheck="true">//è®¾ç½®ç¼“å­˜</span>                    redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> proceed<span class="token punctuation">,</span> cache<span class="token punctuation">.</span><span class="token function">expire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> TimeUnit<span class="token punctuation">.</span>SECONDS<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> proceed<span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>            throwable<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> null<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * redisçš„é”®å€¼ç”Ÿæˆç­–ç•¥     *     * @param key  keyå‰ç¼€     */</span>    <span class="token keyword">private</span> String <span class="token function">parseKey</span><span class="token punctuation">(</span>String key<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// ä½¿ç”¨uuidæ‹¼æ¥ä¿è¯keyå”¯ä¸€</span>        StringBuilder sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span>key <span class="token operator">+</span> <span class="token string">":"</span><span class="token operator">+</span> UuidUtils<span class="token punctuation">.</span><span class="token function">getUuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UuidUtils</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">synchronized</span> String <span class="token function">getUuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>4ã€ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Cache</span><span class="token punctuation">(</span>key<span class="token operator">=</span><span class="token string">"user:login"</span><span class="token punctuation">,</span>expire <span class="token operator">=</span> <span class="token number">15</span><span class="token operator">*</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token keyword">public</span> User <span class="token function">login</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><p>ç”Ÿæˆçš„key-valueï¼š</p><p><img src="/2020/08/11/project-01/17.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> å°é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaé›†åˆæ€»ç»“</title>
      <link href="2020/08/11/collection/"/>
      <url>2020/08/11/collection/</url>
      
        <content type="html"><![CDATA[<h2 id="é›†åˆçš„ä½œç”¨"><a href="#é›†åˆçš„ä½œç”¨" class="headerlink" title="é›†åˆçš„ä½œç”¨"></a>é›†åˆçš„ä½œç”¨</h2><p>ç®€å•æ¥è¯´ï¼Œé›†åˆå°±æ˜¯å­˜å‚¨å¯¹è±¡çš„å®¹å™¨ï¼Œæ–¹ä¾¿æˆ‘ä»¬æ“ä½œå¤šä¸ªJavaå¯¹è±¡ã€‚</p><h2 id="é›†åˆåˆ†ç±»"><a href="#é›†åˆåˆ†ç±»" class="headerlink" title="é›†åˆåˆ†ç±»"></a>é›†åˆåˆ†ç±»</h2><p>é›†åˆæ¥å£ä»¥åŠå¸¸ç”¨å®ç°ç±»<br><img src="/2020/08/11/collection/1.png" alt></p><p>ä½¿ç”¨åœºæ™¯ï¼š</p><ul><li>å¦‚æœæ˜¯é›†åˆç±»å‹ï¼Œå¯é€‰æ‹©Listæˆ–Setã€‚LIstæ˜¯æ’å…¥æœ‰åºï¼Œå¯é‡å¤çš„ï¼›Set æ˜¯ä¸å¯é‡å¤çš„ã€‚</li><li>å¦‚æœæ˜¯key-valueç±»å‹ï¼Œåˆ™é€‰æ‹©Mapã€‚ä¿æŒæ’å…¥é¡ºåºé€‰æ‹©LinkedHashMap;æ’åºé€‰æ‹©TreeMapã€‚</li></ul><h2 id="Collection"><a href="#Collection" class="headerlink" title="Collection"></a>Collection</h2><h3 id="1ã€Collectionä»‹ç»"><a href="#1ã€Collectionä»‹ç»" class="headerlink" title="1ã€Collectionä»‹ç»"></a>1ã€Collectionä»‹ç»</h3><p>é›†åˆä¸æ•°ç»„çš„åŒºåˆ«ï¼š</p><ul><li>æ•°ç»„é•¿åº¦å›ºå®šï¼Œé›†åˆé•¿åº¦å¯å˜</li><li>æ•°ç»„å¯ä»¥å­˜å‚¨åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹ï¼›é›†åˆåªèƒ½å­˜å‚¨å¼•ç”¨æ•°æ®ç±»å‹ï¼Œå­˜å‚¨åŸºæœ¬æ•°æ®ç±»å‹æ—¶ä¼šè‡ªåŠ¨è£…ç®±ï¼Œè½¬æ¢ä¸ºå¯¹åº”çš„åŒ…è£…ç±»ã€‚</li></ul><p><img src="/2020/08/11/collection/2.png" alt></p><p>åŸºæœ¬æ–¹æ³•ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token number">1</span>ã€æ·»åŠ åŠŸèƒ½ï¼š    <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span>Object obj<span class="token punctuation">)</span>ï¼šæ·»åŠ ä¸€ä¸ªå…ƒç´     <span class="token keyword">boolean</span> <span class="token function">addAll</span><span class="token punctuation">(</span>Collection c<span class="token punctuation">)</span>ï¼šæ·»åŠ ä¸€ä¸ªé›†åˆçš„æ‰€æœ‰å…ƒç´ <span class="token number">2</span>ã€åˆ é™¤åŠŸèƒ½ï¼š    <span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ï¼šç§»é™¤æ‰€æœ‰å…ƒç´     <span class="token keyword">boolean</span> <span class="token function">remove</span><span class="token punctuation">(</span>Object obj<span class="token punctuation">)</span>ï¼šç§»é™¤ä¸€ä¸ªå…ƒç´     <span class="token keyword">boolean</span> <span class="token function">removeAll</span><span class="token punctuation">(</span>Collecion c<span class="token punctuation">)</span>ï¼šç§»é™¤å½“å‰é›†åˆçš„æ‰€æœ‰å…ƒç´ ï¼Œåªè¦ä¸€ä¸ªå…ƒç´ è¢«ç§»é™¤å°±è¿”å›<span class="token boolean">true</span><span class="token number">3</span>ã€åˆ¤æ–­åŠŸèƒ½ï¼š    <span class="token keyword">boolean</span> <span class="token function">contains</span><span class="token punctuation">(</span>Object obj<span class="token punctuation">)</span>ï¼šåˆ¤æ–­å½“å‰é›†åˆæ˜¯å¦åŒ…å«å½“å‰å…ƒç´     <span class="token keyword">boolean</span> <span class="token function">containsAll</span><span class="token punctuation">(</span>Collection c<span class="token punctuation">)</span>ï¼šåˆ¤æ–­å½“å‰é›†åˆåŒ…å«æŒ‡å®šé›†åˆ    <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ï¼šåˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©º<span class="token number">4</span>ã€è·å–åŠŸèƒ½ï¼š    Iterator<span class="token operator">&lt;</span>E<span class="token operator">></span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ï¼šè·å–è¿­ä»£å™¨<span class="token number">5</span>ã€é•¿åº¦åŠŸèƒ½ï¼š    <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ï¼šè·å–å…ƒç´ ä¸ªæ•°<span class="token number">6</span>ã€äº¤é›†åŠŸèƒ½ï¼š    <span class="token keyword">boolean</span> <span class="token function">retainAll</span><span class="token punctuation">(</span>Collection c<span class="token punctuation">)</span>ï¼šç§»é™¤å½“å‰é›†åˆä¸­é›†åˆcæ²¡æœ‰çš„å…ƒç´ ï¼Œæœ€ç»ˆç»“æœä¿å­˜è‡³å½“å‰é›†åˆä¸­</code></pre><h3 id="2ã€è¿­ä»£å™¨ï¼ˆIteratorï¼‰"><a href="#2ã€è¿­ä»£å™¨ï¼ˆIteratorï¼‰" class="headerlink" title="2ã€è¿­ä»£å™¨ï¼ˆIteratorï¼‰"></a>2ã€è¿­ä»£å™¨ï¼ˆIteratorï¼‰</h3><p>java.utils.Collectionç»§æ‰¿äº†java.lang.Iterableæ¥å£ï¼ŒCollectionç»§æ‰¿äº†Iterableçš„Iterator()æ–¹æ³•ï¼Œè¿”å›Iteratorå¯¹è±¡ã€‚</p><p>java.utils.Iteratorä¹Ÿæ˜¯ä¸€ä¸ªæ¥å£ï¼Œåªæœ‰ä¸‰ä¸ªæ–¹æ³•</p><ul><li>hasNext()</li><li>next()</li><li>remove()</li></ul><p>è¿™ä¸‰ä¸ªæ–¹æ³•é€šè¿‡Collectionçš„å®ç°ç±»ä»¥å†…éƒ¨ç±»çš„æ–¹å¼å®ç°ï¼Œå› ä¸ºCollectionçš„å®ç°ç±»å­˜å‚¨ç»“æ„ä¸åŒï¼Œéå†æ–¹å¼ä¹Ÿå¿…ç„¶ä¸åŒï¼Œå¿…é¡»é€šè¿‡å„ä¸ªå®ç°ç±»ä»¥å†…éƒ¨ç±»çš„æ–¹å¼å®ç°ï¼Œæ¥å®Œæˆå¯¹ä¸åŒå®ç°ç±»çš„éå†ã€‚</p><pre class=" language-java"><code class="language-java"> <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 1ã€åˆ›å»ºé›†åˆå¯¹è±¡</span>        Collection coll1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 2ã€æ·»åŠ æ•°æ®åˆ°é›†åˆä¸­</span>        coll1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        coll1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        coll1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 3ã€ä½¿ç”¨é›†åˆå¯¹è±¡è·å–è¿­ä»£å™¨å¯¹è±¡</span>        Iterator iterator <span class="token operator">=</span> coll1<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// èµ·å§‹æŒ‡é’ˆä½äºç¬¬ä¸€ä¸ªå…ƒç´ ä¹‹å‰</span>        <span class="token comment" spellcheck="true">// hasNext() åˆ¤æ–­æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ </span>        <span class="token comment" spellcheck="true">// next() æŒ‡é’ˆä¸‹ç§»ï¼Œå°†ä¸‹ç§»ä»¥åçš„é›†åˆä½ç½®ä¸Šçš„å…ƒç´ è¿”å›</span>        <span class="token comment" spellcheck="true">// 4ã€éå†é›†åˆ</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">// 5ã€åˆ¤æ–­æ˜¯å¦å­˜åœ¨å…ƒç´ </span>            Object obj <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 6ã€ä¸‹ç§»åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ çš„ä½ç½®</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                iterator<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç§»é™¤å½“å‰å…ƒç´ </span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        iterator <span class="token operator">=</span> coll1<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="3ã€Listé›†åˆ"><a href="#3ã€Listé›†åˆ" class="headerlink" title="3ã€Listé›†åˆ"></a>3ã€Listé›†åˆ</h3><p>LIsté›†åˆç‰¹ç‚¹ï¼šæœ‰åºï¼ˆå­˜å–é¡ºåºä¸å–å‡ºé¡ºåºä¸€è‡´ï¼‰ï¼Œå¯é‡å¤ã€‚</p><p>Listé›†åˆå¸¸ç”¨å®ç°ç±»</p><ul><li>ArrayListï¼šåº•å±‚æ•°æ®ç»“æ„æ˜¯æ•°ç»„ï¼Œçº¿ç¨‹ä¸å®‰å…¨</li><li>LinkedListï¼šåº•å±‚ç»“æ„æ˜¯é“¾è¡¨ï¼Œçº¿ç¨‹ä¸å®‰å…¨</li><li>Vectorï¼šåº•å±‚æ•°æ®ç»“æ„æ˜¯æ•°ç»„ï¼Œçº¿ç¨‹å®‰å…¨</li></ul><h4 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h4><p>åº•å±‚å…¶å®å°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½†æ˜¯å¯ä»¥è¿›è¡Œæ‰©å®¹ï¼Œå®ç°åŠ¨æ€å¢é•¿ã€‚</p><p>æ„é€ æ–¹æ³•ï¼š<br>æŒ‡å®šäº†å®¹é‡åˆ™æŒ‰ç…§è¯¥å®¹é‡åˆå§‹åŒ–ï¼ŒæœªæŒ‡å®šåˆ™è¿”å›ä¸€ä¸ªç©ºæ•°ç»„</p><p>add(E   e)æ–¹æ³•ï¼š<br>æ­¥éª¤ï¼šæ£€æŸ¥æ˜¯å¦éœ€è¦æ‰©å®¹â€”&gt;æ’å…¥å…ƒç´ </p><p>add(int index,E e)<br>æ­¥éª¤ï¼šæ£€æŸ¥è§’æ ‡â€”&gt;æ£€æŸ¥æ˜¯å¦éœ€è¦æ‰©å®¹â€”&gt;æ’å…¥å…ƒç´ </p><p>get(int index)ï¼šæ£€æŸ¥è§’æ ‡â€”&gt;è¿”å›å…ƒç´ </p><p>set(int index,E e)ï¼šæ£€æŸ¥è§’æ ‡â€”&gt;æ›¿ä»£å…ƒç´ â€”&gt;è¿”å›æ—§å€¼</p><p>remove(int index)ï¼šæ£€æŸ¥è§’æ ‡â€”&gt;åˆ é™¤å…ƒç´ â€”&gt;è®¡ç®—å‡ºéœ€è¦ç§»åŠ¨çš„ä¸ªæ•°ï¼Œå¹¶ç§»åŠ¨â€”&gt;è®¾ç½®ä¸ºnullï¼Œè®©gcå›æ”¶</p><p>åœ¨<strong>å¢åˆ æ—¶å€™ï¼Œéœ€è¦æ•°ç»„çš„æ‹·è´å¤åˆ¶(navite æ–¹æ³•ç”±C/C++å®ç°)</strong></p><h4 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h4><p>LinkedListåº•å±‚æ˜¯åŒå‘é“¾è¡¨ </p><h4 id="Vector"><a href="#Vector" class="headerlink" title="Vector"></a>Vector</h4><p>Vectoråº•å±‚ä¹Ÿæ˜¯æ•°ç»„ï¼Œä¸ArrayListæœ€å¤§çš„åŒºåˆ«å°±æ˜¯ï¼š<strong>åŒæ­¥(çº¿ç¨‹å®‰å…¨)</strong></p><p>æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯åŒæ­¥çš„ï¼Œ<strong>æœ‰æ€§èƒ½æŸå¤±</strong>ã€‚</p><h3 id="4ã€Seté›†åˆ"><a href="#4ã€Seté›†åˆ" class="headerlink" title="4ã€Seté›†åˆ"></a>4ã€Seté›†åˆ</h3><p>Seté›†åˆç‰¹ç‚¹ï¼šå…ƒç´ ä¸å¯é‡å¤</p><p>Seté›†åˆå¸¸ç”¨å®ç°ç±»</p><ul><li>HashSetï¼šåº•å±‚æ•°æ®ç»“æ„æ˜¯å“ˆå¸Œè¡¨ã€‚</li><li>TreeSetï¼šåº•å±‚æ•°æ®ç»“æ„æ˜¯çº¢é»‘æ•°ï¼ˆå¹³è¡¡äºŒå‰æ ‘ï¼‰ï¼›ä¿è¯å…ƒç´ æœ‰åºã€‚</li><li>LinkedHashSetï¼šåº•å±‚æ•°æ®ç»“æ„ç”±å“ˆå¸Œè¡¨å’Œé“¾è¡¨ç»„æˆã€‚</li></ul><h4 id="HashSet"><a href="#HashSet" class="headerlink" title="HashSet"></a>HashSet</h4><ul><li>å®ç°Setæ¥å£</li><li>ä¸ä¿è¯è¿­ä»£é¡ºåº</li><li>å…è®¸å…ƒç´ ä¸ºnull</li><li><strong>åº•å±‚å®é™…ä¸Šæ˜¯ä¸€ä¸ªHashMapå®ä¾‹</strong></li><li>éåŒæ­¥</li><li>åˆå§‹å®¹é‡éå¸¸å½±å“è¿­ä»£æ€§èƒ½</li></ul><h4 id="TreeSet"><a href="#TreeSet" class="headerlink" title="TreeSet"></a>TreeSet</h4><ul><li>å¯ä»¥å®ç°æ’åºåŠŸèƒ½</li><li><strong>åº•å±‚å®é™…ä¸Šæ˜¯ä¸€ä¸ªTreeMapå®ä¾‹</strong></li><li>éåŒæ­¥</li></ul><h4 id="LinkedHashSet"><a href="#LinkedHashSet" class="headerlink" title="LinkedHashSet"></a>LinkedHashSet</h4><ul><li>è¿­ä»£æ˜¯æœ‰åºçš„</li><li>å…è®¸ä¸ºnull</li><li><strong>åº•å±‚å®é™…ä¸Šæ˜¯ä¸€ä¸ªHashMap+åŒå‘é“¾è¡¨å®ä¾‹(å…¶å®å°±æ˜¯LinkedHashMap)â€¦</strong></li><li>éåŒæ­¥</li><li>æ€§èƒ½æ¯”HashSetå·®ä¸€ä¸¢ä¸¢ï¼Œå› ä¸ºè¦ç»´æŠ¤ä¸€ä¸ªåŒå‘é“¾è¡¨</li><li>åˆå§‹å®¹é‡ä¸è¿­ä»£æ— å…³ï¼ŒLinkedHashSetè¿­ä»£çš„æ˜¯åŒå‘é“¾è¡¨</li></ul><h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><h3 id="1ã€Mapä»‹ç»"><a href="#1ã€Mapä»‹ç»" class="headerlink" title="1ã€Mapä»‹ç»"></a>1ã€Mapä»‹ç»</h3><p>ç‰¹ç‚¹ï¼šå°†é”®æ˜ å°„åˆ°å€¼çš„å¯¹è±¡ï¼Œä¸€ä¸ªæ˜ å°„ä¸èƒ½æœ‰é‡å¤çš„é”®ï¼Œæ¯ä¸ªé”®æœ€å¤šæ˜ å°„ä¸€ä¸ªå€¼ã€‚</p><p>Mapä¸Collectionçš„åŒºåˆ«</p><ul><li>Mapé›†åˆå­˜å‚¨çš„å…ƒç´ æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œé”®å”¯ä¸€ï¼Œå€¼å¯ä»¥é‡å¤</li><li>Collectioné›†åˆå­˜å‚¨çš„å…ƒç´ æ˜¯å•ç‹¬å‡ºç°çš„ï¼Œå­ç±»Listå­˜å‚¨çš„å€¼å¯é‡å¤ï¼ŒSetä¸å¯é‡å¤</li></ul><p><img src="/2020/08/11/collection/3.png" alt></p><p>åŸºæœ¬æ–¹æ³•ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token number">1</span>ã€æ·»åŠ åŠŸèƒ½ï¼š    <span class="token function">put</span><span class="token punctuation">(</span>K key<span class="token punctuation">,</span>V value<span class="token punctuation">)</span>  æ·»åŠ å…ƒç´ ï¼Œkeyå­˜åœ¨åˆ™æ›¿æ¢<span class="token number">2</span>ã€åˆ é™¤åŠŸèƒ½ï¼š    <span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  ç§»é™¤æ‰€æœ‰é”®å€¼å¯¹    <span class="token function">remove</span><span class="token punctuation">(</span>Object key<span class="token punctuation">)</span>  æ ¹æ®é”®åˆ é™¤å€¼ï¼Œå¹¶æŠŠå€¼è¿”å›<span class="token number">3</span>ã€åˆ¤æ–­åŠŸèƒ½ï¼š    <span class="token keyword">boolean</span> <span class="token function">containsKey</span><span class="token punctuation">(</span>Object key<span class="token punctuation">)</span>  åˆ¤æ–­é›†åˆæ˜¯å¦åŒ…å«æŒ‡å®šçš„é”®    <span class="token keyword">boolean</span> <span class="token function">containsValue</span><span class="token punctuation">(</span>Object value<span class="token punctuation">)</span>  åˆ¤æ–­é›†åˆæ˜¯å¦åŒ…å«æŒ‡å®šçš„å€¼    <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  åˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©º<span class="token number">4</span>ã€è·å–åŠŸèƒ½ï¼š    Set<span class="token operator">&lt;</span>Map<span class="token punctuation">.</span>Entry<span class="token operator">&lt;</span>K key<span class="token punctuation">,</span>V value<span class="token operator">>></span> <span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  è¿”å›é”®å€¼å¯¹å¯¹è±¡çš„é›†åˆ    <span class="token function">get</span><span class="token punctuation">(</span>Object key<span class="token punctuation">)</span>  æ ¹æ®é”®è·å–å€¼    Set<span class="token operator">&lt;</span>K<span class="token operator">></span> <span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  è·å–é›†åˆä¸­æ‰€æœ‰çš„é”®çš„é›†åˆ    Collection<span class="token operator">&lt;</span>V<span class="token operator">></span> <span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  è·å–é›†åˆä¸­æ‰€æœ‰å€¼çš„é›†åˆ<span class="token number">5</span>ã€é•¿åº¦åŠŸèƒ½ï¼š    <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  è¿”å›é›†åˆä¸­é”®å€¼å¯¹çš„å¯¹æ•°<span class="token number">6</span>ã€éå†åŠŸèƒ½ï¼š    <span class="token keyword">void</span> <span class="token function">forEach</span><span class="token punctuation">(</span>Object key<span class="token punctuation">,</span> Object value<span class="token punctuation">)</span></code></pre><h4 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h4><ul><li>æ— åºï¼Œå…è®¸ä¸ºnullï¼ŒéåŒæ­¥</li><li>åº•å±‚æœ‰æ•£åˆ—è¡¨ï¼ˆæ•°ç»„+é“¾è¡¨ï¼‰å®ç°</li></ul><p><strong>put(K key,V value)æ–¹æ³•</strong>ï¼šmap.put(key1,value1)</p><p>é¦–å…ˆè°ƒç”¨key1æ‰€åœ¨ç±»çš„hashCode()è®¡ç®—keyçš„å“ˆå¸Œå€¼ï¼Œæ­¤å“ˆå¸Œå€¼ä¸æ•°ç»„é•¿åº¦-1åšä½è¿ç®—ï¼Œå¾—åˆ°åœ¨Entryæ•°ç»„ä¸­çš„å­˜æ”¾ä½ç½®ï¼›<br>å¦‚æœæ­¤ä½ç½®ä¸ºç©ºï¼Œåˆ™æ·»åŠ æˆåŠŸï¼Œ<br>å¦åˆ™å°†key1çš„å“ˆå¸Œå€¼ä¸æ­¤ä½ç½®ä¸Šå…ƒç´ çš„å“ˆå¸Œå€¼æ¯”è¾ƒï¼Œ<br>å¦‚æœå“ˆå¸Œå€¼ä¸åŒï¼Œåˆ™æ·»åŠ æˆåŠŸ,<br>å¦åˆ™è°ƒç”¨key1æ‰€åœ¨ç±»çš„equals()ï¼Œå¦‚æœè¿”å›falseï¼Œåˆ™æ·»åŠ æˆåŠŸï¼Œå¦åˆ™æ·»åŠ å¤±è´¥</p><p>å½“å…ƒç´ ä¸ªæ•°è¾¾åˆ°å®¹é‡çš„0.75æ—¶ï¼Œå°±ä¼šæ‰©å®¹ï¼Œå®¹é‡æ‰©å¤§ä¸ºåŸæ¥çš„2å€ï¼ŒåŸæœ‰çš„æ•°æ®å…¨éƒ¨è¢«å¤åˆ¶è¿‡æ¥ã€‚</p><p>jdk1.7æ˜¯ä»¥é“¾è¡¨çš„å½¢å¼æ·»åŠ å…ƒç´ ï¼Œjdk1.8ä¹‹åï¼Œé“¾è¡¨é•¿åº¦å¤§äº8çš„æ—¶å€™ï¼Œé“¾è¡¨ä¼šè½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚</p><p><strong>get(Object key)</strong>ï¼šè®¡ç®—keyçš„å“ˆå¸Œå€¼ï¼Œé€šè¿‡getNode(int hash,Object key)è·å–å¯¹åº”çš„value</p><p><strong>remove(Object key)</strong>ï¼šè®¡ç®—keyçš„å“ˆå¸Œå€¼ï¼Œé€šè¿‡removeNode(int hash,Object key,Object value) åˆ é™¤è¯¥é”®å€¼å¯¹ï¼Œå¹¶è¿”å›å€¼</p><p><strong>HashMapä¸HashTableçš„åŒºåˆ«ï¼š</strong></p><p>ä»å­˜å‚¨ç»“æ„å’Œå®ç°æ¥è®²åŸºæœ¬ä¸Šéƒ½æ˜¯ç›¸åŒçš„ã€‚HashTableæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¦å¤–å®ƒä¸å…è®¸keyå’Œvalueä¸ºnullã€‚Hashtableæ˜¯ä¸ªè¿‡æ—¶çš„é›†åˆç±»ï¼Œä¸å»ºè®®åœ¨æ–°ä»£ç ä¸­ä½¿ç”¨ï¼Œä¸éœ€è¦çº¿ç¨‹å®‰å…¨çš„åœºåˆå¯ä»¥ç”¨HashMapæ›¿æ¢ï¼Œéœ€è¦çº¿ç¨‹å®‰å…¨çš„åœºåˆå¯ä»¥ç”¨ConcurrentHashMapæ›¿æ¢ã€‚</p><p>åœ¨JDK8ä¸­HashMapçš„åº•å±‚æ˜¯ï¼š<strong>æ•°ç»„+é“¾è¡¨(æ•£åˆ—è¡¨)+çº¢é»‘æ ‘</strong></p><h4 id="LinkedHashMap"><a href="#LinkedHashMap" class="headerlink" title="LinkedHashMap"></a>LinkedHashMap</h4><ul><li>åº•å±‚æ˜¯æ•£åˆ—è¡¨å’ŒåŒå‘é“¾è¡¨</li><li>å…è®¸ä¸ºnullï¼Œä¸åŒæ­¥</li><li>æ’å…¥çš„é¡ºåºæ˜¯æœ‰åºçš„(åº•å±‚é“¾è¡¨è‡´ä½¿æœ‰åº)</li></ul><h4 id="TreeMap"><a href="#TreeMap" class="headerlink" title="TreeMap"></a>TreeMap</h4><ul><li>å®ç°äº†NavigableMapæ¥å£ï¼Œè€ŒNavigableMapæ¥å£ç»§æ‰¿ç€SortedMapæ¥å£ï¼Œæ‰€ä»¥æ˜¯æœ‰åºçš„</li><li>åº•å±‚æ˜¯çº¢é»‘æ ‘</li><li>keyä¸èƒ½ä¸ºnullï¼Œä¸ºnullä¸ºæŠ›å‡ºNullPointerExceptionçš„</li><li>ä¸åŒæ­¥</li><li>ä½¿ç”¨Comparatoræˆ–è€…Comparableæ¥æ¯”è¾ƒkeyæ˜¯å¦ç›¸ç­‰ä¸æ’åºçš„é—®é¢˜</li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RedisæŒä¹…åŒ–</title>
      <link href="2020/08/10/redis-06/"/>
      <url>2020/08/10/redis-06/</url>
      
        <content type="html"><![CDATA[<p>Redisæ˜¯å†…å­˜æ•°æ®åº“ï¼Œå¦‚æœä¸èƒ½å°†å†…å­˜ä¸­çš„æ•°æ®åº“çŠ¶æ€ä¿å­˜åˆ°ç£ç›˜ï¼Œé‚£ä¹ˆä¸€æ—¦æœåŠ¡å™¨è¿›ç¨‹é€€å‡ºï¼ŒæœåŠ¡å™¨ä¸­çš„æ•°æ®åº“çŠ¶æ€ä¹Ÿä¼šæ¶ˆå¤±ã€‚æ‰€ä»¥Redisæä¾›äº†æŒä¹…åŒ–åŠŸèƒ½ã€‚</p><h2 id="RDB"><a href="#RDB" class="headerlink" title="RDB"></a>RDB</h2><p>åœ¨æŒ‡å®šæ—¶é—´é—´éš”å†…å°†å†…å­˜ä¸­çš„æ•°æ®é›†å¿«ç…§å†™å…¥ç£ç›˜dump.rdbæ–‡ä»¶ï¼Œæ¢å¤æ—¶å°†å¿«ç…§ç›´æ¥è¯»åˆ°å†…å­˜ã€‚</p><p>Redisä¼šå•ç‹¬åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹æ¥è¿›è¡ŒæŒä¹…åŒ–ï¼Œä¼šå°†æ•°æ®å†™å…¥åˆ°ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œç­‰æŒä¹…åŒ–è¿‡ç¨‹ç»“æŸäº†ï¼Œå†å°†è¿™ä¸ªä¸´æ—¶æ–‡ä»¶æ›¿æ¢ä¸Šæ¬¡æŒä¹…åŒ–å¥½çš„æ–‡ä»¶ã€‚ æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¸»è¿›ç¨‹æ˜¯ä¸è¿›è¡ŒIOæ“ä½œçš„ï¼Œä¿è¯äº†æé«˜çš„æ€§èƒ½ã€‚</p><p>å¦‚æœéœ€è¦è¿›è¡Œå¤§è§„æ¨¡æ•°æ®çš„æ¢å¤ï¼Œä¸”å¯¹æ•°æ®çš„å®Œæ•´æ€§ä¸æ˜¯ç‰¹åˆ«æ•æ„Ÿï¼Œé‚£ä¹ˆRDBå°†æ¯”AOFçš„æ•ˆç‡æ›´é«˜ã€‚é»˜è®¤ä¸ºRDBæ–¹å¼ã€‚</p><h2 id="AOF"><a href="#AOF" class="headerlink" title="AOF"></a>AOF</h2><p>å°†æ‰€æœ‰å‘½ä»¤éƒ½è®°å½•ä¸‹æ¥ï¼Œæ¢å¤æ—¶å°†å‘½ä»¤å…¨éƒ¨æ‰§è¡Œä¸€éã€‚</p><p>ä»¥æ—¥å¿—çš„å½¢å¼æ¥è®°å½•æ¯ä¸ªå†™æ“ä½œï¼Œå°†Redisæ‰§è¡Œè¿‡çš„æ‰€æœ‰æŒ‡ä»¤è®°å½•ä¸‹æ¥ï¼ˆè¯»æ“ä½œä¸è®°å½•ï¼‰ï¼Œåªè®¸è¿½åŠ æ–‡ä»¶ä½†ä¸å¯ä»¥æ”¹å†™æ–‡ä»¶ï¼ŒRediså¯åŠ¨ä¹‹åˆä¼šè¯»å–è¯¥æ–‡ä»¶é‡æ–°æ„å»ºæ•°æ®åº“ã€‚</p><p>é»˜è®¤ä¸å¼€å¯AOFæ“ä½œ<br><img src="/2020/08/10/redis-06/3.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jedis,Springbooté›†æˆRedis</title>
      <link href="2020/08/08/redis-05/"/>
      <url>2020/08/08/redis-05/</url>
      
        <content type="html"><![CDATA[<p>Jedisæ˜¯Rediså®˜æ–¹æ¨èçš„Javaè¿æ¥å¼€å‘å·¥å…·ã€‚æ˜¯ä½¿ç”¨Javaæ¥æ“ä½œRedisçš„ä¸­é—´ä»¶ã€‚</p><h2 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h2><p>1ã€åˆ›å»ºä¸€ä¸ªmavené¡¹ç›®</p><p>2ã€å¯¼å…¥ä¾èµ–</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- https://mvnrepository.com/artifact/redis.clients/jedis --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>redis.clients<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jedis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>fastjson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.2.56<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span></code></pre><h2 id="ç¼–ç æµ‹è¯•"><a href="#ç¼–ç æµ‹è¯•" class="headerlink" title="ç¼–ç æµ‹è¯•"></a>ç¼–ç æµ‹è¯•</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JedisTest</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 1ã€åˆ›å»ºJediså¯¹è±¡</span>        Jedis jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span><span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jedis<span class="token punctuation">.</span><span class="token function">ping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è¿æ¥æˆåŠŸè¾“å‡º PONG</span>        <span class="token comment" spellcheck="true">// æ‰€æœ‰çš„apiä¸ä¹‹å‰çš„å­¦ä¹ çš„å‘½ä»¤ä¸€è‡´</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="æµ‹è¯•äº‹åŠ¡"><a href="#æµ‹è¯•äº‹åŠ¡" class="headerlink" title="æµ‹è¯•äº‹åŠ¡"></a>æµ‹è¯•äº‹åŠ¡</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TxTest</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Jedis jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        JSONObject jsonObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        jsonObject<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token string">"zyz"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        jsonObject<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å¼€å¯äº‹åŠ¡</span>        Transaction multi <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">multi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String result <span class="token operator">=</span> jsonObject<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            multi<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"user1"</span><span class="token punctuation">,</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// æ‰§è¡Œäº‹åŠ¡</span>            multi<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            multi<span class="token punctuation">.</span><span class="token function">discard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æ”¾å¼ƒäº‹åŠ¡</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span><span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"user1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// {"name":"zyz","age":21}</span>        <span class="token punctuation">}</span>        jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="Springbootæ•´åˆ"><a href="#Springbootæ•´åˆ" class="headerlink" title="Springbootæ•´åˆ"></a>Springbootæ•´åˆ</h2><p>1ã€åˆ›å»ºspringbooté¡¹ç›®ï¼Œå¹¶å‹¾é€‰å¦‚ä¸‹ä¾èµ–<br><img src="/2020/08/08/redis-05/1.png" alt></p><blockquote><p>åœ¨springboot2.xä¹‹åï¼ŒåŸæ¥ä½¿ç”¨çš„jedisè¢«æ›¿æ¢æˆäº†lettuceã€‚<br>jedisï¼šé‡‡ç”¨ç›´è¿ï¼Œå¤šä¸ªçº¿ç¨‹æ“ä½œä¸å®‰å…¨ã€‚<br>lettuceï¼šé‡‡ç”¨nettyï¼Œå®ä¾‹å¯ä»¥åœ¨å¤šä¸ªçº¿ç¨‹ä¸­å…±äº«ï¼Œä¸å­˜åœ¨çº¿ç¨‹ä¸å®‰å…¨çš„æƒ…å†µã€‚</p></blockquote><p>2ã€é…ç½®è¿æ¥å±æ€§</p><pre class=" language-yml"><code class="language-yml"># springbootæ‰€æœ‰çš„é…ç½®ç±»éƒ½æœ‰ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»  RedisAutoConfiguration# è‡ªåŠ¨é…ç½®ç±»éƒ½ä¼šç»‘å®šä¸€ä¸ªé…ç½®æ–‡ä»¶ RedisProperties  prefix = "spring.redis"spring:  redis:    host: 127.0.0.1    port: 6379</code></pre><p>3ã€æµ‹è¯•è¿æ¥</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">class</span> <span class="token class-name">Redis02SpringbootApplicationTests</span> <span class="token punctuation">{</span>   <span class="token annotation punctuation">@Autowired</span>   RedisTemplate redisTemplate<span class="token punctuation">;</span>   <span class="token annotation punctuation">@Test</span>   <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token string">"zyz"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// zyz</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="è‡ªå®šä¹‰RedisTemplate"><a href="#è‡ªå®šä¹‰RedisTemplate" class="headerlink" title="è‡ªå®šä¹‰RedisTemplate"></a>è‡ªå®šä¹‰RedisTemplate</h2><p>ä½¿ç”¨ç»Ÿä¸€ä½¿ç”¨jacksonåºåˆ—åŒ–ï¼Œé˜²æ­¢ä¹±ç é—®é¢˜</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// è‡ªå®šä¹‰Template</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisConfig</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> RedisTemplate<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> <span class="token function">redisTemplate</span><span class="token punctuation">(</span>RedisConnectionFactory factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>        RedisTemplate<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> template <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedisTemplate</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        template<span class="token punctuation">.</span><span class="token function">setConnectionFactory</span><span class="token punctuation">(</span>factory<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// Jsonåºåˆ—åŒ–</span>        Jackson2JsonRedisSerializer jackson2JsonRedisSerializer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jackson2JsonRedisSerializer</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ObjectMapper objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        objectMapper<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span>PropertyAccessor<span class="token punctuation">.</span>ALL<span class="token punctuation">,</span> JsonAutoDetect<span class="token punctuation">.</span>Visibility<span class="token punctuation">.</span>ANY<span class="token punctuation">)</span><span class="token punctuation">;</span>        objectMapper<span class="token punctuation">.</span><span class="token function">enableDefaultTyping</span><span class="token punctuation">(</span>ObjectMapper<span class="token punctuation">.</span>DefaultTyping<span class="token punctuation">.</span>NON_FINAL<span class="token punctuation">)</span><span class="token punctuation">;</span>        jackson2JsonRedisSerializer<span class="token punctuation">.</span><span class="token function">setObjectMapper</span><span class="token punctuation">(</span>objectMapper<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// Stringåºåˆ—åŒ–</span>        StringRedisSerializer stringRedisSerializer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringRedisSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// keyé‡‡ç”¨Stringåºåˆ—åŒ–æ–¹å¼</span>        template<span class="token punctuation">.</span><span class="token function">setKeySerializer</span><span class="token punctuation">(</span>stringRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>        template<span class="token punctuation">.</span><span class="token function">setHashKeySerializer</span><span class="token punctuation">(</span>stringRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// valueé‡‡ç”¨Jsonåºåˆ—åŒ–</span>        template<span class="token punctuation">.</span><span class="token function">setValueSerializer</span><span class="token punctuation">(</span>jackson2JsonRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>        template<span class="token punctuation">.</span><span class="token function">setHashValueSerializer</span><span class="token punctuation">(</span>jackson2JsonRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>        template<span class="token punctuation">.</span><span class="token function">afterPropertiesSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> template<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>æµ‹è¯•ï¼ŒUserå®ä½“ç±»éœ€è¦å®ç°Serializableæ¥å£</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>       User user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"zyz"</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment" spellcheck="true">// åºåˆ—åŒ–</span>       String jsonUser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>       redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span>jsonUser<span class="token punctuation">)</span><span class="token punctuation">;</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span></code></pre><p>æ§åˆ¶å°è·å–ï¼š<br><img src="/2020/08/08/redis-05/2.png" alt></p><h2 id="å°è£…å·¥å…·ç±»"><a href="#å°è£…å·¥å…·ç±»" class="headerlink" title="å°è£…å·¥å…·ç±»"></a>å°è£…å·¥å…·ç±»</h2><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">RedisUtils</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> RedisTemplate<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> redisTemplate<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// =============================common============================</span>    <span class="token comment" spellcheck="true">/**     * æŒ‡å®šç¼“å­˜å¤±æ•ˆæ—¶é—´     *     * @param key  é”®     * @param time æ—¶é—´(ç§’)     */</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">expire</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> <span class="token keyword">long</span> time<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>time <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                redisTemplate<span class="token punctuation">.</span><span class="token function">expire</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> time<span class="token punctuation">,</span> TimeUnit<span class="token punctuation">.</span>SECONDS<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * æ ¹æ®key è·å–è¿‡æœŸæ—¶é—´     *     * @param key é”® ä¸èƒ½ä¸ºnull     * @return æ—¶é—´(ç§’) è¿”å›0ä»£è¡¨ä¸ºæ°¸ä¹…æœ‰æ•ˆ     */</span>    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">getExpire</span><span class="token punctuation">(</span>String key<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">getExpire</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> TimeUnit<span class="token punctuation">.</span>SECONDS<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨     *     * @param key é”®     * @return true å­˜åœ¨ falseä¸å­˜åœ¨     */</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasKey</span><span class="token punctuation">(</span>String key<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">hasKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * åˆ é™¤ç¼“å­˜     *     * @param key å¯ä»¥ä¼ ä¸€ä¸ªå€¼ æˆ–å¤šä¸ª     */</span>    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"unchecked"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">del</span><span class="token punctuation">(</span>String<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">!=</span> null <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                redisTemplate<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                redisTemplate<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>CollectionUtils<span class="token punctuation">.</span><span class="token function">arrayToList</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// ============================String=============================</span>    <span class="token comment" spellcheck="true">/**     * æ™®é€šç¼“å­˜è·å–     *     * @param key é”®     * @return å€¼     */</span>    <span class="token keyword">public</span> Object <span class="token function">get</span><span class="token punctuation">(</span>String key<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> key <span class="token operator">==</span> null <span class="token operator">?</span> null <span class="token operator">:</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * æ™®é€šç¼“å­˜æ”¾å…¥     *     * @param key   é”®     * @param value å€¼     * @return trueæˆåŠŸ falseå¤±è´¥     */</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">set</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> Object value<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * æ™®é€šç¼“å­˜æ”¾å…¥å¹¶è®¾ç½®æ—¶é—´     *     * @param key   é”®     * @param value å€¼     * @param time  æ—¶é—´(ç§’) timeè¦å¤§äº0 å¦‚æœtimeå°äºç­‰äº0 å°†è®¾ç½®æ— é™æœŸ     * @return trueæˆåŠŸ false å¤±è´¥     */</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">set</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> Object value<span class="token punctuation">,</span> <span class="token keyword">long</span> time<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>time <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> time<span class="token punctuation">,</span> TimeUnit<span class="token punctuation">.</span>SECONDS<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * é€’å¢     *     * @param key   é”®     * @param delta è¦å¢åŠ å‡ (å¤§äº0)     */</span>    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">incr</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> <span class="token keyword">long</span> delta<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>delta <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"é€’å¢å› å­å¿…é¡»å¤§äº0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> delta<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * é€’å‡     *     * @param key   é”®     * @param delta è¦å‡å°‘å‡ (å°äº0)     */</span>    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">decr</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> <span class="token keyword">long</span> delta<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>delta <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"é€’å‡å› å­å¿…é¡»å¤§äº0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token operator">-</span>delta<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// ================================Map=================================</span>    <span class="token comment" spellcheck="true">/**     * HashGet     *     * @param key  é”® ä¸èƒ½ä¸ºnull     * @param item é¡¹ ä¸èƒ½ä¸ºnull     */</span>    <span class="token keyword">public</span> Object <span class="token function">hget</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> String item<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * è·å–hashKeyå¯¹åº”çš„æ‰€æœ‰é”®å€¼     *     * @param key é”®     * @return å¯¹åº”çš„å¤šä¸ªé”®å€¼     */</span>    <span class="token keyword">public</span> Map<span class="token operator">&lt;</span>Object<span class="token punctuation">,</span> Object<span class="token operator">></span> <span class="token function">hmget</span><span class="token punctuation">(</span>String key<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * HashSet     *     * @param key é”®     * @param map å¯¹åº”å¤šä¸ªé”®å€¼     */</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hmset</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">putAll</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * HashSet å¹¶è®¾ç½®æ—¶é—´     *     * @param key  é”®     * @param map  å¯¹åº”å¤šä¸ªé”®å€¼     * @param time æ—¶é—´(ç§’)     * @return trueæˆåŠŸ falseå¤±è´¥     */</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hmset</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map<span class="token punctuation">,</span> <span class="token keyword">long</span> time<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">putAll</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>time <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token function">expire</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * å‘ä¸€å¼ hashè¡¨ä¸­æ”¾å…¥æ•°æ®,å¦‚æœä¸å­˜åœ¨å°†åˆ›å»º     *     * @param key   é”®     * @param item  é¡¹     * @param value å€¼     * @return true æˆåŠŸ falseå¤±è´¥     */</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hset</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> String item<span class="token punctuation">,</span> Object value<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> item<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * å‘ä¸€å¼ hashè¡¨ä¸­æ”¾å…¥æ•°æ®,å¦‚æœä¸å­˜åœ¨å°†åˆ›å»º     *     * @param key   é”®     * @param item  é¡¹     * @param value å€¼     * @param time  æ—¶é—´(ç§’) æ³¨æ„:å¦‚æœå·²å­˜åœ¨çš„hashè¡¨æœ‰æ—¶é—´,è¿™é‡Œå°†ä¼šæ›¿æ¢åŸæœ‰çš„æ—¶é—´     * @return true æˆåŠŸ falseå¤±è´¥     */</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hset</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> String item<span class="token punctuation">,</span> Object value<span class="token punctuation">,</span> <span class="token keyword">long</span> time<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> item<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>time <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token function">expire</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * åˆ é™¤hashè¡¨ä¸­çš„å€¼     *     * @param key  é”® ä¸èƒ½ä¸ºnull     * @param item é¡¹ å¯ä»¥ä½¿å¤šä¸ª ä¸èƒ½ä¸ºnull     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hdel</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> item<span class="token punctuation">)</span> <span class="token punctuation">{</span>        redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * åˆ¤æ–­hashè¡¨ä¸­æ˜¯å¦æœ‰è¯¥é¡¹çš„å€¼     *     * @param key  é”® ä¸èƒ½ä¸ºnull     * @param item é¡¹ ä¸èƒ½ä¸ºnull     * @return true å­˜åœ¨ falseä¸å­˜åœ¨     */</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hHasKey</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> String item<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasKey</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * hashé€’å¢ å¦‚æœä¸å­˜åœ¨,å°±ä¼šåˆ›å»ºä¸€ä¸ª å¹¶æŠŠæ–°å¢åçš„å€¼è¿”å›     *     * @param key  é”®     * @param item é¡¹     * @param by   è¦å¢åŠ å‡ (å¤§äº0)     */</span>    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">hincr</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> String item<span class="token punctuation">,</span> <span class="token keyword">double</span> by<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> item<span class="token punctuation">,</span> by<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * hashé€’å‡     *     * @param key  é”®     * @param item é¡¹     * @param by   è¦å‡å°‘è®°(å°äº0)     */</span>    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">hdecr</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> String item<span class="token punctuation">,</span> <span class="token keyword">double</span> by<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> item<span class="token punctuation">,</span> <span class="token operator">-</span>by<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// ============================set=============================</span>    <span class="token comment" spellcheck="true">/**     * æ ¹æ®keyè·å–Setä¸­çš„æ‰€æœ‰å€¼     *     * @param key é”®     */</span>    <span class="token keyword">public</span> Set<span class="token operator">&lt;</span>Object<span class="token operator">></span> <span class="token function">sGet</span><span class="token punctuation">(</span>String key<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">members</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> null<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * æ ¹æ®valueä»ä¸€ä¸ªsetä¸­æŸ¥è¯¢,æ˜¯å¦å­˜åœ¨     *     * @param key   é”®     * @param value å€¼     * @return true å­˜åœ¨ falseä¸å­˜åœ¨     */</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">sHasKey</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> Object value<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isMember</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * å°†æ•°æ®æ”¾å…¥setç¼“å­˜     *     * @param key    é”®     * @param values å€¼ å¯ä»¥æ˜¯å¤šä¸ª     * @return æˆåŠŸä¸ªæ•°     */</span>    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">sSet</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> values<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * å°†setæ•°æ®æ”¾å…¥ç¼“å­˜     *     * @param key    é”®     * @param time   æ—¶é—´(ç§’)     * @param values å€¼ å¯ä»¥æ˜¯å¤šä¸ª     * @return æˆåŠŸä¸ªæ•°     */</span>    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">sSetAndTime</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> <span class="token keyword">long</span> time<span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            Long count <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> values<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>time <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>                <span class="token function">expire</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> count<span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * è·å–setç¼“å­˜çš„é•¿åº¦     *     * @param key é”®     */</span>    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">sGetSetSize</span><span class="token punctuation">(</span>String key<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * ç§»é™¤å€¼ä¸ºvalueçš„     *     * @param key    é”®     * @param values å€¼ å¯ä»¥æ˜¯å¤šä¸ª     * @return ç§»é™¤çš„ä¸ªæ•°     */</span>    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">setRemove</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            Long count <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> values<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> count<span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// ===============================list=================================</span>    <span class="token comment" spellcheck="true">/**     * è·å–listç¼“å­˜çš„å†…å®¹     *     * @param key   é”®     * @param start å¼€å§‹     * @param end   ç»“æŸ 0 åˆ° -1ä»£è¡¨æ‰€æœ‰å€¼     */</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Object<span class="token operator">></span> <span class="token function">lGet</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> <span class="token keyword">long</span> start<span class="token punctuation">,</span> <span class="token keyword">long</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> null<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * è·å–listç¼“å­˜çš„é•¿åº¦     *     * @param key é”®     */</span>    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">lGetListSize</span><span class="token punctuation">(</span>String key<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * é€šè¿‡ç´¢å¼• è·å–listä¸­çš„å€¼     *     * @param key   é”®     * @param index ç´¢å¼• index>=0æ—¶ï¼Œ 0 è¡¨å¤´ï¼Œ1 ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä¾æ¬¡ç±»æ¨ï¼›index&lt;0æ—¶ï¼Œ-1ï¼Œè¡¨å°¾ï¼Œ-2å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä¾æ¬¡ç±»æ¨     */</span>    <span class="token keyword">public</span> Object <span class="token function">lGetIndex</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> <span class="token keyword">long</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> null<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * å°†listæ”¾å…¥ç¼“å­˜     *     * @param key   é”®     * @param value å€¼     */</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">lSet</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> Object value<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            redisTemplate<span class="token punctuation">.</span><span class="token function">opsForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rightPush</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * å°†listæ”¾å…¥ç¼“å­˜     *     * @param key   é”®     * @param value å€¼     * @param time  æ—¶é—´(ç§’)     */</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">lSet</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> Object value<span class="token punctuation">,</span> <span class="token keyword">long</span> time<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            redisTemplate<span class="token punctuation">.</span><span class="token function">opsForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rightPush</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>time <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>                <span class="token function">expire</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * å°†listæ”¾å…¥ç¼“å­˜     *     * @param key   é”®     * @param value å€¼     * @return     */</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">lSet</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Object<span class="token operator">></span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            redisTemplate<span class="token punctuation">.</span><span class="token function">opsForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rightPushAll</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * å°†listæ”¾å…¥ç¼“å­˜     *     * @param key   é”®     * @param value å€¼     * @param time  æ—¶é—´(ç§’)     * @return     */</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">lSet</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Object<span class="token operator">></span> value<span class="token punctuation">,</span> <span class="token keyword">long</span> time<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            redisTemplate<span class="token punctuation">.</span><span class="token function">opsForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rightPushAll</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>time <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>                <span class="token function">expire</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * æ ¹æ®ç´¢å¼•ä¿®æ”¹listä¸­çš„æŸæ¡æ•°æ®     *     * @param key   é”®     * @param index ç´¢å¼•     * @param value å€¼     * @return     */</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">lUpdateIndex</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> <span class="token keyword">long</span> index<span class="token punctuation">,</span> Object value<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            redisTemplate<span class="token punctuation">.</span><span class="token function">opsForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> index<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * ç§»é™¤Nä¸ªå€¼ä¸ºvalue     *     * @param key   é”®     * @param count ç§»é™¤å¤šå°‘ä¸ª     * @param value å€¼     * @return ç§»é™¤çš„ä¸ªæ•°     */</span>    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">lRemove</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> <span class="token keyword">long</span> count<span class="token punctuation">,</span> Object value<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            Long remove <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> count<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> remove<span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>æµ‹è¯•</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Autowired</span><span class="token keyword">private</span> RedisUtils redisUtils<span class="token punctuation">;</span><span class="token annotation punctuation">@Test</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testRedisUtils</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    redisUtils<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token string">"zyz"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>redisUtils<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redisäº‹åŠ¡</title>
      <link href="2020/08/08/redis-04/"/>
      <url>2020/08/08/redis-04/</url>
      
        <content type="html"><![CDATA[<p>Redisäº‹åŠ¡çš„æœ¬è´¨ï¼šä¸€ç»„å‘½ä»¤çš„é›†åˆã€‚ä¸€ä¸ªäº‹åŠ¡ä¸­çš„æ‰€æœ‰å‘½ä»¤éƒ½ä¼šè¢«åºåˆ—åŒ–ï¼Œåœ¨äº‹åŠ¡çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šé¡ºåºæ‰§è¡Œã€‚</p><p>ä¸€æ¬¡æ€§ï¼Œé¡ºåºæ€§ï¼Œæ’ä»–æ€§</p><p>Redisæ²¡æœ‰éš”ç¦»çº§åˆ«çš„æ¦‚å¿µã€‚</p><p>Rediså•æ¡å‘½ä»¤æ˜¯ä¿è¯åŸå­æ€§çš„ï¼Œä½†æ˜¯äº‹åŠ¡ä¸ä¿è¯åŸå­æ€§ã€‚</p><p>æ‰€æœ‰å‘½ä»¤åœ¨äº‹åŠ¡ä¸­ï¼Œå¹¶æ²¡æœ‰ç›´æ¥æ‰§è¡Œï¼åªæœ‰å‘èµ·æ‰§è¡Œå‘½ä»¤æ—¶æ‰ä¼šæ‰§è¡Œï¼</p><h2 id="Redisäº‹åŠ¡æµç¨‹"><a href="#Redisäº‹åŠ¡æµç¨‹" class="headerlink" title="Redisäº‹åŠ¡æµç¨‹"></a>Redisäº‹åŠ¡æµç¨‹</h2><ul><li>å¼€å¯äº‹åŠ¡ ï¼ˆmultiï¼‰</li><li>å‘½ä»¤å…¥é˜Ÿ</li><li>æ‰§è¡Œäº‹åŠ¡ï¼ˆexecï¼‰</li></ul><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> multiOK127.0.0.1:6379<span class="token operator">></span> <span class="token keyword">set</span> k1 v1QUEUED127.0.0.1:6379<span class="token operator">></span> <span class="token keyword">set</span> k2 v2QUEUED127.0.0.1:6379<span class="token operator">></span> <span class="token keyword">set</span> k3 v3QUEUED127.0.0.1:6379<span class="token operator">></span> get k2QUEUED127.0.0.1:6379<span class="token operator">></span> <span class="token keyword">set</span> k4 v4QUEUED127.0.0.1:6379<span class="token operator">></span> <span class="token function">exec</span>1<span class="token punctuation">)</span> OK2<span class="token punctuation">)</span> OK3<span class="token punctuation">)</span> OK4<span class="token punctuation">)</span> <span class="token string">"v2"</span>5<span class="token punctuation">)</span> OK</code></pre><p>æ”¾å¼ƒäº‹åŠ¡</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> discardOK</code></pre><p>ç¼–è¯‘å‹å¼‚å¸¸ï¼Œäº‹åŠ¡ä¸­çš„æ‰€ç”¨å‘½ä»¤éƒ½ä¸ä¼šæ‰§è¡Œã€‚</p><p>è¿è¡Œæ—¶å¼‚å¸¸ï¼Œå…¶ä»–å‘½ä»¤æ­£å¸¸æ‰§è¡Œï¼Œå¼‚å¸¸å‘½ä»¤æŠ›å‡ºå¼‚å¸¸ã€‚</p><h2 id="ç›‘æ§ï¼ˆä½¿ç”¨watchå®ç°ä¹è§‚é”ï¼‰"><a href="#ç›‘æ§ï¼ˆä½¿ç”¨watchå®ç°ä¹è§‚é”ï¼‰" class="headerlink" title="ç›‘æ§ï¼ˆä½¿ç”¨watchå®ç°ä¹è§‚é”ï¼‰"></a>ç›‘æ§ï¼ˆä½¿ç”¨watchå®ç°ä¹è§‚é”ï¼‰</h2><blockquote><p> æ‚²è§‚é”</p></blockquote><ul><li>è®¤ä¸ºä»»ä½•æ—¶å€™éƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œæ— è®ºåšä»€ä¹ˆéƒ½åŠ é”ã€‚</li></ul><blockquote><p>ä¹è§‚é”</p></blockquote><ul><li>è®¤ä¸ºä»€ä¹ˆæ—¶å€™éƒ½ä¸ä¼šå‡ºé—®é¢˜ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ï¼Œæ›´æ–°æ•°æ®æ—¶å»åˆ¤æ–­ä¸€ä¸‹ï¼Œåœ¨æ­¤æœŸé—´æ˜¯å¦æœ‰äººä¿®æ”¹è¿‡è¿™ä¸ªæ•°æ®ã€‚<ul><li>è·å–version</li><li>æ›´æ–°çš„æ—¶å€™æ¯”è¾ƒversion</li></ul></li></ul><p>æµ‹è¯•ç›‘è§†åŠŸèƒ½</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> <span class="token keyword">set</span> money 100  OK127.0.0.1:6379<span class="token operator">></span> <span class="token keyword">set</span> out 0OK127.0.0.1:6379<span class="token operator">></span> <span class="token function">watch</span> money <span class="token comment" spellcheck="true"># ç›‘è§†moneyå¯¹è±¡</span>OK127.0.0.1:6379<span class="token operator">></span> multi <span class="token comment" spellcheck="true"># äº‹åŠ¡æ­£å¸¸ç»“æŸï¼Œæ•°æ®æœŸé—´æ²¡æœ‰å‘ç”Ÿå˜åŠ¨ï¼Œè¿™ä¸ªæ—¶å€™å°±æ­£å¸¸æ‰§è¡ŒæˆåŠŸ</span>OK127.0.0.1:6379<span class="token operator">></span> decrby money 20QUEUED127.0.0.1:6379<span class="token operator">></span> incrby out 20QUEUED127.0.0.1:6379<span class="token operator">></span> <span class="token function">exec</span>1<span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 802<span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 20</code></pre><p>æµ‹è¯•å¤šçº¿ç¨‹ä¿®æ”¹å€¼ï¼Œä½¿ç”¨watchå¯ä»¥å½“ä½œredisçš„ä¹è§‚é”æ“ä½œ</p><p>å®¢æˆ·ç«¯1ï¼šå¯¹moneyå¯¹è±¡è¿›è¡Œç›‘è§†ï¼Œå¹¶å¼€å¯äº‹åŠ¡ï¼Œå…ˆä¸æ‰§è¡Œäº‹åŠ¡</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> <span class="token function">watch</span> moneyOK127.0.0.1:6379<span class="token operator">></span> multiOK127.0.0.1:6379<span class="token operator">></span> decrby money 20QUEUED127.0.0.1:6379<span class="token operator">></span> incrby out 20QUEUED</code></pre><p>å†æ‰“å¼€ä¸€ä¸ªå®¢æˆ·ç«¯2ï¼Œå¯¹moneyå¯¹è±¡çš„å€¼è¿›è¡Œä¿®æ”¹</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> get money<span class="token string">"80"</span>127.0.0.1:6379<span class="token operator">></span> <span class="token keyword">set</span> money 100OK</code></pre><p>åœ¨å®¢æˆ·ç«¯1ä¸­æ‰§è¡Œäº‹åŠ¡ï¼Œå› ä¸ºç›‘è§†çš„å€¼å‘ç”Ÿäº†æ”¹å˜ï¼Œæ‰€ä»¥äº‹åŠ¡æ‰§è¡Œå¤±è´¥ï¼</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> <span class="token function">exec</span><span class="token punctuation">(</span>nil<span class="token punctuation">)</span></code></pre><blockquote><p>è‡ªæ—‹é”</p></blockquote><p>æ‰§è¡Œå¤±è´¥åï¼Œæ”¾å¼ƒç›‘è§†ï¼ˆè§£é”ï¼‰ï¼Œå†é‡æ–°ç›‘è§†ï¼ˆåŠ é”ï¼‰ï¼Œè·å–ç›‘è§†å¯¹è±¡çš„æœ€æ–°å€¼ï¼Œå†æ‰§è¡Œäº‹åŠ¡ï¼Œå³å¯æˆåŠŸ</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> unwatchOK127.0.0.1:6379<span class="token operator">></span> <span class="token function">watch</span> moneyOK127.0.0.1:6379<span class="token operator">></span> multiOK127.0.0.1:6379<span class="token operator">></span> decrby money 20QUEUED127.0.0.1:6379<span class="token operator">></span> incrby out 20QUEUED127.0.0.1:6379<span class="token operator">></span> <span class="token function">exec</span>1<span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 802<span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 40</code></pre>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redisä¸‰ç§ç‰¹æ®Šç±»å‹</title>
      <link href="2020/08/08/redis-03/"/>
      <url>2020/08/08/redis-03/</url>
      
        <content type="html"><![CDATA[<h2 id="geospatialåœ°ç†ä½ç½®"><a href="#geospatialåœ°ç†ä½ç½®" class="headerlink" title="geospatialåœ°ç†ä½ç½®"></a>geospatialåœ°ç†ä½ç½®</h2><p>æ·»åŠ åœ°ç†æ•°æ®</p><ul><li>æœ‰æ•ˆçš„ç»åº¦ä»-180åº¦åˆ°180åº¦ã€‚</li><li>æœ‰æ•ˆçš„çº¬åº¦ä»-85.05112878åº¦åˆ°85.05112878åº¦ã€‚</li></ul><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># å¯é€šè¿‡javaç¨‹åºä¸€æ¬¡æ€§é“è·¯</span>127.0.0.1:6379<span class="token operator">></span> geoadd china:city 113.16 30.65 tianmen<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1127.0.0.1:6379<span class="token operator">></span> geoadd china:city 112.19 30.35 jinzhou<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1127.0.0.1:6379<span class="token operator">></span> geoadd china:city 116.40 39.90 beijing<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1127.0.0.1:6379<span class="token operator">></span> geoadd china:city 112.19 31.23 shanghai<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1</code></pre><p>è·å–æŒ‡å®šçš„ç»çº¬åº¦</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> geopos china:city beijing1<span class="token punctuation">)</span> 1<span class="token punctuation">)</span> <span class="token string">"116.39999896287918"</span>   2<span class="token punctuation">)</span> <span class="token string">"39.900000091670925"</span></code></pre><p>è¿”å›ä¸¤ä¸ªç»™å®šä½ç½®ä¹‹é—´çš„è·ç¦»</p><pre class=" language-bash"><code class="language-bash">geodist china:city beijing shanghai km <span class="token comment" spellcheck="true"># ä¸¤åœ°çš„ç›´çº¿è·ç¦»</span></code></pre><p>ä»¥ç»™å®šçš„ç»çº¬åº¦ä¸ºä¸­å¿ƒï¼Œ æ‰¾å‡ºæŸä¸€åŠå¾„å†…çš„å…ƒç´ </p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> georadius china:city 110 30 1000 km1<span class="token punctuation">)</span> <span class="token string">"jinzhou"</span>2<span class="token punctuation">)</span> <span class="token string">"shanghai"</span>3<span class="token punctuation">)</span> <span class="token string">"tianmen"</span> georadius china:city 110 30 500 km withdist1<span class="token punctuation">)</span> 1<span class="token punctuation">)</span> <span class="token string">"jinzhou"</span>   2<span class="token punctuation">)</span> <span class="token string">"214.1425"</span>2<span class="token punctuation">)</span> 1<span class="token punctuation">)</span> <span class="token string">"shanghai"</span>   2<span class="token punctuation">)</span> <span class="token string">"250.3140"</span>3<span class="token punctuation">)</span> 1<span class="token punctuation">)</span> <span class="token string">"tianmen"</span>   2<span class="token punctuation">)</span> <span class="token string">"311.8670"</span>127.0.0.1:6379<span class="token operator">></span> georadius china:city 110 30 1000 km withcoord1<span class="token punctuation">)</span> 1<span class="token punctuation">)</span> <span class="token string">"jinzhou"</span>   2<span class="token punctuation">)</span> 1<span class="token punctuation">)</span> <span class="token string">"112.18999832868576"</span>      2<span class="token punctuation">)</span> <span class="token string">"30.349999617100856"</span>2<span class="token punctuation">)</span> 1<span class="token punctuation">)</span> <span class="token string">"shanghai"</span>   2<span class="token punctuation">)</span> 1<span class="token punctuation">)</span> <span class="token string">"112.18999832868576"</span>      2<span class="token punctuation">)</span> <span class="token string">"31.229999039757836"</span>3<span class="token punctuation">)</span> 1<span class="token punctuation">)</span> <span class="token string">"tianmen"</span>   2<span class="token punctuation">)</span> 1<span class="token punctuation">)</span> <span class="token string">"113.15999776124954"</span>      2<span class="token punctuation">)</span> <span class="token string">"30.649999074635581"</span>127.0.0.1:6379<span class="token operator">></span> georadius china:city 110 30 1000 km count 21<span class="token punctuation">)</span> <span class="token string">"jinzhou"</span>2<span class="token punctuation">)</span> <span class="token string">"shanghai"</span></code></pre><p>åº•å±‚æ˜¯zsetï¼Œå¯ä»¥ä½¿ç”¨zsetçš„ä¸€äº›æ“ä½œ</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> zrange china:city 0 -11<span class="token punctuation">)</span> <span class="token string">"jinzhou"</span>2<span class="token punctuation">)</span> <span class="token string">"shanghai"</span>3<span class="token punctuation">)</span> <span class="token string">"tianmen"</span>4<span class="token punctuation">)</span> <span class="token string">"beijing"</span>127.0.0.1:6379<span class="token operator">></span> zrem china:city tianmen<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1127.0.0.1:6379<span class="token operator">></span> zrange china:city 0 -11<span class="token punctuation">)</span> <span class="token string">"jinzhou"</span>2<span class="token punctuation">)</span> <span class="token string">"shanghai"</span>3<span class="token punctuation">)</span> <span class="token string">"beijing"</span></code></pre><h2 id="hyperloglog"><a href="#hyperloglog" class="headerlink" title="hyperloglog"></a>hyperloglog</h2><p> ä¸»è¦ç”¨äºåŸºæ•°ç»Ÿè®¡</p><pre class=" language-bash"><code class="language-bash">pfadd mykey q w e r t y<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1127.0.0.1:6379<span class="token operator">></span> pfcount mykey<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 6</code></pre><h2 id="Bitmap"><a href="#Bitmap" class="headerlink" title="Bitmap"></a>Bitmap</h2><p>ä½å­˜å‚¨ï¼Œä¸€èˆ¬ç”¨äºç”¨æˆ·æ˜¯å¦ç™»å½•ï¼Œç»Ÿè®¡ç”¨æˆ·æ˜¯å¦æ´»è·ƒï¼Œç»Ÿè®¡æ‰“å¡</p><p>ä½¿ç”¨bitmapè®°å½•ä¸€å‘¨çš„æ‰“å¡ï¼šå‘¨ä¸€ï¼š1 å‘¨äºŒï¼š0 â€¦â€¦</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> setbit sign 0 1<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0127.0.0.1:6379<span class="token operator">></span> setbit sign 1 0<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0127.0.0.1:6379<span class="token operator">></span> setbit sign 2 0<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0127.0.0.1:6379<span class="token operator">></span> setbit sign 3 1<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0127.0.0.1:6379<span class="token operator">></span> setbit sign 4 1<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0127.0.0.1:6379<span class="token operator">></span> setbit sign 5 1<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0127.0.0.1:6379<span class="token operator">></span> setbit sign 6 0<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0</code></pre><p>æŸ¥çœ‹æ˜¯å¦æ‰“å¡</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> getbit sign 0 <span class="token comment" spellcheck="true"># æŸ¥çœ‹æ˜ŸæœŸä¸€æ˜¯å¦æ‰“å¡</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1</code></pre><p>ç»Ÿè®¡æ‰“å¡å¤©æ•°</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> bitcount sign  <span class="token comment" spellcheck="true"># ç»Ÿè®¡ä¸€å‘¨çš„æ‰“å¡æ¬¡æ•°</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 4</code></pre>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redisäº”å¤§æ•°æ®ç±»å‹</title>
      <link href="2020/08/05/redis-02/"/>
      <url>2020/08/05/redis-02/</url>
      
        <content type="html"><![CDATA[<h2 id="Stringï¼ˆå­—ç¬¦ä¸²ï¼‰"><a href="#Stringï¼ˆå­—ç¬¦ä¸²ï¼‰" class="headerlink" title="Stringï¼ˆå­—ç¬¦ä¸²ï¼‰"></a>Stringï¼ˆå­—ç¬¦ä¸²ï¼‰</h2><p>è¿½åŠ å­—ç¬¦ä¸²ï¼Œå¦‚æœå½“å‰keyä¸å­˜åœ¨å°±ç›¸å½“äºæ–°å»º</p><pre class=" language-bash"><code class="language-bash">append name 666</code></pre><p>è·å–å­—ç¬¦ä¸²é•¿åº¦</p><pre class=" language-bash"><code class="language-bash">strlen name</code></pre><p>å¢åŠ å‡å°‘</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> <span class="token keyword">set</span> views 1   OK                      127.0.0.1:6379<span class="token operator">></span> incr views <span class="token comment" spellcheck="true"># åŠ 1      </span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 2                127.0.0.1:6379<span class="token operator">></span> get views   <span class="token string">"2"</span>                            127.0.0.1:6379<span class="token operator">></span> decr views   <span class="token comment" spellcheck="true"># å‡1</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1      127.0.0.1:6379<span class="token operator">></span> get views   <span class="token string">"1"</span>                         127.0.0.1:6379<span class="token operator">></span> incrby views 10   <span class="token comment" spellcheck="true"># è®¾ç½®æ­¥é•¿ï¼ŒåŠ 10</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 11    127.0.0.1:6379<span class="token operator">></span> get views    <span class="token string">"11"</span>                         127.0.0.1:6379<span class="token operator">></span> decrby views 10   <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1                     127.0.0.1:6379<span class="token operator">></span> get views       <span class="token string">"1"</span>      </code></pre><p>æˆªå–å­—ç¬¦ä¸²</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> get demo<span class="token string">"hello,world"</span>127.0.0.1:6379<span class="token operator">></span> getrange demo 0 4                                                                      <span class="token string">"hello"</span>   127.0.0.1:6379<span class="token operator">></span> getrange demo 0 -1  <span class="token comment" spellcheck="true"># è·å–å…¨éƒ¨å­—ç¬¦ä¸²                                              </span><span class="token string">"hello,world"</span>   </code></pre><p>æ›¿æ¢</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> get demo<span class="token string">"hello,world"</span>127.0.0.1:6379<span class="token operator">></span> setrange demo 6 redis<span class="token operator">!</span>   <span class="token comment" spellcheck="true"># æ›¿æ¢æŒ‡å®šä½ç½®å¼€å§‹çš„å­—ç¬¦ä¸²                                                              (integer) 12                                                                                           127.0.0.1:6379> get demo                                                              </span><span class="token string">"hello,redis!"</span>   </code></pre><p>è®¾ç½®é”®å€¼å¯¹çš„æ—¶å€™æŒ‡å®šæœ‰æ•ˆæœŸ</p><pre class=" language-bash"><code class="language-bash">setex key1 10 <span class="token string">"hello"</span> <span class="token comment" spellcheck="true"># è®¾ç½®key1çš„å€¼ä¸ºhello,10ç§’åè¿‡æœŸ</span></code></pre><p>å¦‚æœkeyä¸å­˜åœ¨å°±åˆ›å»º</p><pre class=" language-bash"><code class="language-bash">setnx key2 <span class="token string">"hello2"</span></code></pre><p>æ‰¹é‡è®¾ç½®</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> mset k1 v1 k2 v1 k3 v3     OK                             127.0.0.1:6379<span class="token operator">></span> keys *     1<span class="token punctuation">)</span> <span class="token string">"k3"</span>                2<span class="token punctuation">)</span> <span class="token string">"k1"</span>                 3<span class="token punctuation">)</span> <span class="token string">"k2"</span>                127.0.0.1:6379<span class="token operator">></span> msetnx k1 v1 k4 v4   <span class="token comment" spellcheck="true"># åŸå­æ“ä½œ</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0         127.0.0.1:6379<span class="token operator">></span> keys *   1<span class="token punctuation">)</span> <span class="token string">"k3"</span>                  2<span class="token punctuation">)</span> <span class="token string">"k1"</span>              3<span class="token punctuation">)</span> <span class="token string">"k2"</span>         </code></pre><p>è®¾ç½®å¯¹è±¡ user:{id}.{filed}</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> mset user:1:name zyz user:1:age 21OK127.0.0.1:6379<span class="token operator">></span> mget user:1:name user:1:age<span class="token string">"zyz"</span><span class="token string">"21"</span></code></pre><p>å…ˆgetåset</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> getset name zyz  <span class="token comment" spellcheck="true"># keyå€¼ä¸å­˜åœ¨ï¼Œå…ˆè¿”å›nil,å†è®¾ç½®</span><span class="token punctuation">(</span>nil<span class="token punctuation">)</span>                         127.0.0.1:6379<span class="token operator">></span> get name     <span class="token string">"zyz"</span>                     127.0.0.1:6379<span class="token operator">></span> getset name zyz666  <span class="token comment" spellcheck="true"># keyå­˜åœ¨ï¼Œè¿”å›keyå€¼ï¼Œå†è®¾ç½®</span><span class="token string">"zyz"</span>                             127.0.0.1:6379<span class="token operator">></span> get name     <span class="token string">"zyz666"</span>  </code></pre><h2 id="Listï¼ˆåˆ—è¡¨ï¼‰"><a href="#Listï¼ˆåˆ—è¡¨ï¼‰" class="headerlink" title="Listï¼ˆåˆ—è¡¨ï¼‰"></a>Listï¼ˆåˆ—è¡¨ï¼‰</h2><p>æ’å…¥</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> lpush list 1   <span class="token comment" spellcheck="true"># ç›¸å½“äºå‹æ ˆï¼Œæ“ä½œç¬¬ä¸€ä¸ªå…ƒç´ </span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1                    127.0.0.1:6379<span class="token operator">></span> lpush list 2    <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 2               127.0.0.1:6379<span class="token operator">></span> lpush list 3       <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 3              127.0.0.1:6379<span class="token operator">></span> lrange list 0 2         1<span class="token punctuation">)</span> <span class="token string">"3"</span>                2<span class="token punctuation">)</span> <span class="token string">"2"</span>               3<span class="token punctuation">)</span> <span class="token string">"1"</span>             127.0.0.1:6379<span class="token operator">></span> rpush list 4   <span class="token comment" spellcheck="true"># ç›¸å½“äºä»é˜Ÿåˆ—çš„å°¾éƒ¨æ’å…¥ ï¼Œæ“ä½œæœ€åä¸€ä¸ªå…ƒç´   </span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 4                127.0.0.1:6379<span class="token operator">></span> lrange list 0 -1    1<span class="token punctuation">)</span> <span class="token string">"3"</span>       2<span class="token punctuation">)</span> <span class="token string">"2"</span>      3<span class="token punctuation">)</span> <span class="token string">"1"</span>        4<span class="token punctuation">)</span> <span class="token string">"4"</span>         </code></pre><p>åˆ é™¤</p><pre class=" language-shell"><code class="language-shell">127.0.0.1:6379> lrange list 0 -1      1) "3"        2) "2"         3) "1"        4) "4"      127.0.0.1:6379> lpop list   # ç§»é™¤ç¬¬ä¸€ä¸ª"3"                     127.0.0.1:6379> Rpop list   # ç§»é™¤æœ€åä¸€ä¸ª                        "4"  127.0.0.1:6379> lrange list 0 -1     1) "2"                           2) "1"  </code></pre><p>è·å–å€¼</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> lindex list 0                           <span class="token string">"2"</span> </code></pre><p>æŸ¥è¯¢listé•¿åº¦</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> llen list   <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 4   </code></pre><p>æ ¹æ®æŒ‡å®šçš„å€¼åˆ é™¤</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> lrange list 0 -1  1<span class="token punctuation">)</span> <span class="token string">"4"</span>                            2<span class="token punctuation">)</span> <span class="token string">"3"</span>              3<span class="token punctuation">)</span> <span class="token string">"2"</span>         4<span class="token punctuation">)</span> <span class="token string">"1"</span>        127.0.0.1:6379<span class="token operator">></span> lrem list  1 4  <span class="token comment" spellcheck="true"># ç§»é™¤valueä¸º4çš„ä»å¤´å¼€å§‹çš„ç¬¬ä¸€ä¸ªå€¼   </span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1              127.0.0.1:6379<span class="token operator">></span> lrange list 0 -1   1<span class="token punctuation">)</span> <span class="token string">"3"</span>                         2<span class="token punctuation">)</span> <span class="token string">"2"</span>                                                                         3<span class="token punctuation">)</span> <span class="token string">"1"</span>  </code></pre><p>æˆªå–å…ƒç´ </p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> lrange list 0 -1    1<span class="token punctuation">)</span> <span class="token string">"3"</span>                    2<span class="token punctuation">)</span> <span class="token string">"2"</span>                3<span class="token punctuation">)</span> <span class="token string">"1"</span>               127.0.0.1:6379<span class="token operator">></span> ltrim list 0 1   <span class="token comment" spellcheck="true"># é€šä¸‹æ ‡[0]æˆªå–æŒ‡å®šé•¿åº¦[1] </span>OK                     127.0.0.1:6379<span class="token operator">></span> lrange list 0 -1     1<span class="token punctuation">)</span> <span class="token string">"3"</span>                                                        2<span class="token punctuation">)</span> <span class="token string">"2"</span> </code></pre><p>å°†åŸåˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ç§»åˆ°æ–°çš„åˆ—è¡¨ä¸­</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> lrange list 0 -1      1<span class="token punctuation">)</span> <span class="token string">"3"</span>                                2<span class="token punctuation">)</span> <span class="token string">"2"</span>                            127.0.0.1:6379<span class="token operator">></span> rpoplpush list list1  <span class="token comment" spellcheck="true"># å°†listæœ€åä¸€ä¸ªå…ƒç´ ç§»åˆ°list1ä¸­    </span><span class="token string">"2"</span>                      127.0.0.1:6379<span class="token operator">></span> lrange list1 0 -1   1<span class="token punctuation">)</span> <span class="token string">"2"</span>                 127.0.0.1:6379<span class="token operator">></span> lrange list 0 -1    1<span class="token punctuation">)</span> <span class="token string">"3"</span>                                                                          </code></pre><p>æ›´æ–°å€¼ï¼Œéœ€è¦å…ˆåˆ¤æ–­listæ˜¯å¦å­˜åœ¨</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> exists list                                       <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0  127.0.0.1:6379<span class="token operator">></span> lpush list value1                                           <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1   127.0.0.1:6379<span class="token operator">></span> lset list 0 value2                                                        OK   </code></pre><p>ä»æŒ‡å®šå…ƒç´ å€¼å‰é¢/åé¢æ’å…¥</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> lrange list 0 -1  1<span class="token punctuation">)</span> <span class="token string">"1"</span>                           2<span class="token punctuation">)</span> <span class="token string">"2"</span>             127.0.0.1:6379<span class="token operator">></span> linsert list after 2 3   <span class="token comment" spellcheck="true"># åœ¨å€¼ä¸º2çš„å…ƒç´ åé¢æ’å…¥ä¸€ä¸ªå€¼ä¸º3çš„å…ƒç´ </span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 3                         127.0.0.1:6379<span class="token operator">></span> lrange list 0 -1    1<span class="token punctuation">)</span> <span class="token string">"1"</span>                            2<span class="token punctuation">)</span> <span class="token string">"2"</span>             3<span class="token punctuation">)</span> <span class="token string">"3"</span>                127.0.0.1:6379<span class="token operator">></span> linsert list before 1 0    <span class="token comment" spellcheck="true"># åœ¨å€¼ä¸º1çš„å…ƒç´ å‰é¢æ’å…¥ä¸€ä¸ªå€¼ä¸º0çš„å…ƒç´   </span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 4                         127.0.0.1:6379<span class="token operator">></span> lrange list 0 -1      1<span class="token punctuation">)</span> <span class="token string">"0"</span>                            2<span class="token punctuation">)</span> <span class="token string">"1"</span>                         3<span class="token punctuation">)</span> <span class="token string">"2"</span>                                                           4<span class="token punctuation">)</span> <span class="token string">"3"</span>  </code></pre><p>Listå®é™…ä¸Šæ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œå‰åéƒ½å¯ä»¥æ’å…¥å€¼ï¼›keyä¸å­˜åœ¨åˆ›å»ºæ–°çš„èŠ‚ç‚¹ï¼Œkeyå­˜åœ¨ï¼Œæ–°å¢å†…å®¹ï¼›ä¸¤è¾¹æ’å…¥æˆ–æ”¹åŠ¨æ•ˆç‡æœ€é«˜ã€‚</p><p>æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆLpushï¼ŒRpopï¼‰ï¼Œæ ˆï¼ˆLpushï¼ŒLpopï¼‰</p><h2 id="Setï¼ˆé›†åˆï¼‰"><a href="#Setï¼ˆé›†åˆï¼‰" class="headerlink" title="Setï¼ˆé›†åˆï¼‰"></a>Setï¼ˆé›†åˆï¼‰</h2><p><strong>å€¼ä¸å¯é‡å¤</strong>ï¼Œå€¼åˆ™ç›¸åŒæ·»åŠ å¤±è´¥ã€‚</p><p>æ·»åŠ å€¼ã€æŸ¥çœ‹æ‰€æœ‰å€¼ã€åˆ¤æ–­å€¼æ˜¯å¦å­˜åœ¨</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> sadd myset aaa   <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1                     127.0.0.1:6379<span class="token operator">></span> sadd myset bbb     <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1                     127.0.0.1:6379<span class="token operator">></span> smembers myset    1<span class="token punctuation">)</span> <span class="token string">"bbb"</span>              2<span class="token punctuation">)</span> <span class="token string">"aaa"</span>              127.0.0.1:6379<span class="token operator">></span> sismember myset aaa  <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1                  127.0.0.1:6379<span class="token operator">></span> sismember myset ccc                              <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0  </code></pre><p>ç§»é™¤æŒ‡å®šå€¼çš„å…ƒç´ </p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> smembers myset    1<span class="token punctuation">)</span> <span class="token string">"bbb"</span>              2<span class="token punctuation">)</span> <span class="token string">"aaa"</span>    127.0.0.1:6379<span class="token operator">></span> srem myset bbb      <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1                                                                                        127.0.0.1:6379<span class="token operator">></span> smembers myset   1<span class="token punctuation">)</span> <span class="token string">"aaa"</span>  </code></pre><p>éšæœºæŒ‘é€‰å…ƒç´ </p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> smembers myset    1<span class="token punctuation">)</span> <span class="token string">"bbb"</span>                         2<span class="token punctuation">)</span> <span class="token string">"aaa"</span>                    3<span class="token punctuation">)</span> <span class="token string">"ccc"</span>               127.0.0.1:6379<span class="token operator">></span> srandmember myset    <span class="token string">"ccc"</span>                    127.0.0.1:6379<span class="token operator">></span> srandmember myset        <span class="token string">"bbb"</span>                        127.0.0.1:6379<span class="token operator">></span> srandmember myset                                                         <span class="token string">"ccc"</span>    </code></pre><p>éšæœºåˆ é™¤</p><pre class=" language-shell"><code class="language-shell">spop myset</code></pre><p>ç§»åŠ¨æŒ‡å®šå…ƒç´ </p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> smembers myset    1<span class="token punctuation">)</span> <span class="token string">"bbb"</span>                         2<span class="token punctuation">)</span> <span class="token string">"aaa"</span>                    3<span class="token punctuation">)</span> <span class="token string">"ccc"</span>  127.0.0.1:6379<span class="token operator">></span> smove myset myset2 aaa<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1127.0.0.1:6379<span class="token operator">></span> smembers myset1<span class="token punctuation">)</span> <span class="token string">"bbb"</span>2<span class="token punctuation">)</span> <span class="token string">"ccc"</span>127.0.0.1:6379<span class="token operator">></span> smembers myset21<span class="token punctuation">)</span> <span class="token string">"aaa"</span></code></pre><p>å·®é›†ï¼Œäº¤é›†ï¼Œå¹¶é›†==&gt;åº”ç”¨åœºæ™¯ï¼šBç«™ï¼Œå¾®åšçš„å…±åŒå…³æ³¨ç­‰ç­‰</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> sadd myset a<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1127.0.0.1:6379<span class="token operator">></span> sadd myset b<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1127.0.0.1:6379<span class="token operator">></span> sadd myset c<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1127.0.0.1:6379<span class="token operator">></span> sadd myset2 c<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1127.0.0.1:6379<span class="token operator">></span> sadd myset2 d<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1127.0.0.1:6379<span class="token operator">></span> sadd myset2 e<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1127.0.0.1:6379<span class="token operator">></span> <span class="token function">sdiff</span> myset myset21<span class="token punctuation">)</span> <span class="token string">"a"</span>2<span class="token punctuation">)</span> <span class="token string">"b"</span>127.0.0.1:6379<span class="token operator">></span> sinter myset myset21<span class="token punctuation">)</span> <span class="token string">"c"</span>127.0.0.1:6379<span class="token operator">></span> sunion myset myset21<span class="token punctuation">)</span> <span class="token string">"d"</span>2<span class="token punctuation">)</span> <span class="token string">"c"</span>3<span class="token punctuation">)</span> <span class="token string">"b"</span>4<span class="token punctuation">)</span> <span class="token string">"a"</span>5<span class="token punctuation">)</span> <span class="token string">"e"</span></code></pre><h2 id="Hashï¼ˆå“ˆå¸Œï¼‰"><a href="#Hashï¼ˆå“ˆå¸Œï¼‰" class="headerlink" title="Hashï¼ˆå“ˆå¸Œï¼‰"></a>Hashï¼ˆå“ˆå¸Œï¼‰</h2><p>Mapé›†åˆï¼Œkey-mapï¼Œå€¼æ˜¯ä¸€ä¸ªMapé›†åˆ</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> hset myhash field1 aaa <span class="token comment" spellcheck="true"># æ·»åŠ ä¸€ä¸ªå€¼</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1127.0.0.1:6379<span class="token operator">></span> hget myhash field1 <span class="token comment" spellcheck="true"># è·å–ä¸€ä¸ªæŒ‡å®šå­—æ®µçš„å€¼</span><span class="token string">"aaa"</span>127.0.0.1:6379<span class="token operator">></span> hmset myhash field2 bbb field3 ccc <span class="token comment" spellcheck="true"># æ·»åŠ å¤šä¸ªé”®å€¼å¯¹</span>OK127.0.0.1:6379<span class="token operator">></span> hmget myhash field1 field2 <span class="token comment" spellcheck="true"># è·å–å¤šä¸ªå­—æ®µå€¼</span>1<span class="token punctuation">)</span> <span class="token string">"aaa"</span>2<span class="token punctuation">)</span> <span class="token string">"bbb"</span>127.0.0.1:6379<span class="token operator">></span> hgetall myhash <span class="token comment" spellcheck="true"># è·å–å…¨éƒ¨æ•°æ®</span>1<span class="token punctuation">)</span> <span class="token string">"field1"</span>2<span class="token punctuation">)</span> <span class="token string">"aaa"</span>3<span class="token punctuation">)</span> <span class="token string">"field2"</span>4<span class="token punctuation">)</span> <span class="token string">"bbb"</span>5<span class="token punctuation">)</span> <span class="token string">"field3"</span>6<span class="token punctuation">)</span> <span class="token string">"ccc"</span></code></pre><p>è·å–é•¿åº¦</p><pre class=" language-bash"><code class="language-bash">hlen myhash</code></pre><p>åˆ¤æ–­å­—æ®µæ˜¯å¦å­˜åœ¨</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> hexists myhash field1<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1127.0.0.1:6379<span class="token operator">></span> hexists myhash aaaa<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0</code></pre><p>è·å–æ‰€æœ‰å­—æ®µ/å€¼</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> hkeys myhash1<span class="token punctuation">)</span> <span class="token string">"field1"</span>2<span class="token punctuation">)</span> <span class="token string">"field2"</span>3<span class="token punctuation">)</span> <span class="token string">"field3"</span>127.0.0.1:6379<span class="token operator">></span> hvals myhash1<span class="token punctuation">)</span> <span class="token string">"aaa"</span>2<span class="token punctuation">)</span> <span class="token string">"bbb"</span>3<span class="token punctuation">)</span> <span class="token string">"ccc"</span></code></pre><p>è‡ªå¢ï¼Œè‡ªå‡</p><pre class=" language-bash"><code class="language-bash">hincrby myhash field1 1hincrby myhash field1 -1</code></pre><p>hashç”¨äºå­˜æ”¾ç»å¸¸å˜åŠ¨çš„ç›¸ä¿¡ï¼Œä¾‹å¦‚ç”¨æˆ·ä¿¡æ¯</p><h2 id="Zsetï¼ˆæœ‰åºé›†åˆï¼‰"><a href="#Zsetï¼ˆæœ‰åºé›†åˆï¼‰" class="headerlink" title="Zsetï¼ˆæœ‰åºé›†åˆï¼‰"></a>Zsetï¼ˆæœ‰åºé›†åˆï¼‰</h2><p>æ·»åŠ </p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> zadd myzset 1 value1<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1127.0.0.1:6379<span class="token operator">></span> zadd myzset 2 value2 3 value3<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 2127.0.0.1:6379<span class="token operator">></span> zrange myzset 0 -11<span class="token punctuation">)</span> <span class="token string">"value1"</span>2<span class="token punctuation">)</span> <span class="token string">"value2"</span>3<span class="token punctuation">)</span> <span class="token string">"value3"</span></code></pre><p>æ’åº</p><pre class=" language-bash"><code class="language-bash">127.0.0.1:6379<span class="token operator">></span> zrangebyscore myzset -inf +inf <span class="token comment" spellcheck="true"># æœ€å°å€¼åˆ°æœ€å¤§å€¼æ’åº</span>1<span class="token punctuation">)</span> <span class="token string">"value1"</span>2<span class="token punctuation">)</span> <span class="token string">"value2"</span>3<span class="token punctuation">)</span> <span class="token string">"value3"</span>127.0.0.1:6379<span class="token operator">></span> zrevrange myzset 0 -1 <span class="token comment" spellcheck="true"># ä»å¤§åˆ°å°</span>1<span class="token punctuation">)</span> <span class="token string">"value3"</span>2<span class="token punctuation">)</span> <span class="token string">"value2"</span>1<span class="token punctuation">)</span> <span class="token string">"value1"</span></code></pre><p>ç§»é™¤å…ƒç´ </p><pre class=" language-bash"><code class="language-bash"> zrem myzset value1</code></pre><p>è·å–ä¸ªæ•°</p><pre class=" language-bash"><code class="language-bash">zcard myzset</code></pre><p>è·å–æŒ‡å®šåŒºé—´çš„æˆå‘˜æ•°é‡</p><pre class=" language-bash"><code class="language-bash">zcount myzset 1 3</code></pre>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rediså…¥é—¨</title>
      <link href="2020/08/04/redis-01/"/>
      <url>2020/08/04/redis-01/</url>
      
        <content type="html"><![CDATA[<p>éšç€æ•°æ®é‡çš„çˆ†å‘å¼å¢åŠ ï¼Œæ•°æ®å˜åŒ–ç‡çš„æ€¥å‰§å¢åŠ ï¼ŒMySQLç­‰å…³ç³»å‹æ•°æ®åº“ä¸å¤Ÿç”¨äº†ï¼Œå°±éœ€è¦ä½¿ç”¨NoSQLäº†ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯Nosql"><a href="#ä»€ä¹ˆæ˜¯Nosql" class="headerlink" title="ä»€ä¹ˆæ˜¯Nosql"></a>ä»€ä¹ˆæ˜¯Nosql</h2><p>NoSQL=Not Only SQL</p><p>å…³ç³»å‹æ•°æ®åº“ï¼šè¡¨æ ¼ï¼Œè¡Œï¼Œåˆ—</p><p>éå…³ç³»å‹æ•°æ®åº“ï¼š</p><p>è§£è€¦ï¼</p><ul><li>æ–¹ä¾¿æ‹“å±•ï¼Œæ•°æ®ä¹‹é—´æ²¡æœ‰å…³ç³»</li><li>å¤§æ•°æ®é«˜æ€§èƒ½ï¼ˆRedisä¸€ç§’å†™8ä¸‡æ¬¡ï¼Œè¯»å–11ä¸‡ï¼ŒNoSQLçš„ç¼“å­˜æ˜¯ä¸€ç§ç»†ç²’åº¦çš„ç¼“å­˜ï¼Œæ€§èƒ½ä¼šæ¯”è¾ƒé«˜ï¼‰</li><li>æ•°æ®ç±»å‹æ˜¯å¤šæ ·å‹çš„ï¼ˆä¸éœ€è¦äº‹å…ˆè®¾è®¡æ•°æ®åº“ï¼Œéšå–éšç”¨ï¼ï¼‰</li><li>æ²¡æœ‰å›ºå®šçš„æŸ¥è¯¢è¯­è¨€</li><li>é”®å€¼å¯¹å­˜å‚¨ï¼Œåˆ—å­˜å‚¨ï¼Œæ–‡æ¡£å­˜å‚¨ï¼Œå›¾å½¢æ•°æ®åº“</li></ul><h2 id="NoSQLçš„å››å¤§åˆ†ç±»"><a href="#NoSQLçš„å››å¤§åˆ†ç±»" class="headerlink" title="NoSQLçš„å››å¤§åˆ†ç±»"></a>NoSQLçš„å››å¤§åˆ†ç±»</h2><ul><li>KVé”®å€¼å¯¹ï¼šredis</li><li>æ–‡æ¡£å‹æ•°æ®åº“ï¼ˆbsonæ ¼å¼ï¼‰ï¼šMongoDB</li><li>åˆ—å­˜å‚¨ï¼šHBaseï¼ˆç”¨äºåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼‰</li><li>å›¾å…³ç³»å‹æ•°æ®åº“ï¼šNeo4Jï¼ˆå­˜æ”¾å…³ç³»ï¼šç¤¾äº¤ç½‘ç»œï¼Œå¹¿å‘Šæ¨èï¼‰</li></ul><h2 id="Redisæ¦‚è¿°"><a href="#Redisæ¦‚è¿°" class="headerlink" title="Redisæ¦‚è¿°"></a>Redisæ¦‚è¿°</h2><p>Redisï¼ˆRemote Dictionary Server )ï¼Œå³è¿œç¨‹å­—å…¸æœåŠ¡ï¼Œæ˜¯ä¸€ä¸ªå¼€æºçš„ä½¿ç”¨Cè¯­è¨€ç¼–å†™ã€æ”¯æŒç½‘ç»œã€å¯åŸºäºå†…å­˜äº¦å¯æŒä¹…åŒ–çš„æ—¥å¿—å‹ã€Key-Valueæ•°æ®åº“ï¼Œå¹¶æä¾›å¤šç§è¯­è¨€çš„APIã€‚<br>ä¼šå‘¨æœŸæ€§çš„æŠŠæ›´æ–°çš„æ•°æ®å†™å…¥ç£ç›˜æˆ–è€…æŠŠä¿®æ”¹æ“ä½œå†™å…¥è¿½åŠ çš„è®°å½•æ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨æ­¤åŸºç¡€ä¸Šå®ç°äº†master-slave(ä¸»ä»)åŒæ­¥ã€‚</p><h2 id="Windowä¸‹å®‰è£…"><a href="#Windowä¸‹å®‰è£…" class="headerlink" title="Windowä¸‹å®‰è£…"></a>Windowä¸‹å®‰è£…</h2><p>1ã€ä¸‹è½½å‹ç¼©åŒ…è§£å‹å³å¯ï¼š<br><a href="https://github.com/microsoftarchive/redis/releases/tag/win-3.2.100" target="_blank" rel="noopener">https://github.com/microsoftarchive/redis/releases/tag/win-3.2.100</a><br>2ã€è¿è¡ŒæœåŠ¡redis-server.exe<br><img src="/2020/08/04/redis-01/1.png" alt></p><p>3ã€è¿è¡Œå®¢æˆ·ç«¯redis-cli.exeæ¥è¿æ¥redisï¼Œä½¿ç”¨pingå‘½ä»¤æµ‹è¯•æ˜¯å¦è¿æ¥æˆåŠŸ<br><img src="/2020/08/04/redis-01/2.png" alt></p><h2 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h2><p>é€‰æ‹©æ•°æ®åº“ï¼Œé»˜è®¤æ•°æ®åº“æ˜¯0</p><pre class=" language-bash"><code class="language-bash"><span class="token keyword">select</span> <span class="token punctuation">[</span>0~15<span class="token punctuation">]</span></code></pre><p>æŸ¥çœ‹å½“å‰æ•°æ®åº“çš„å¤§å°</p><pre class=" language-bash"><code class="language-bash">dbsize</code></pre><p>è®¾ç½®é”®å€¼å¯¹ï¼Œnameä¸ºkeyçš„å€¼ï¼Œzyzä¸ºvalueçš„å€¼</p><pre class=" language-bash"><code class="language-bash"><span class="token keyword">set</span> name zyz</code></pre><p>è·å–æŒ‡å®škeyçš„value</p><pre class=" language-bash"><code class="language-bash">get name</code></pre><p>ç§»é™¤keyï¼Œ1è¡¨ç¤ºå½“å‰æ•°æ®åº“</p><pre class=" language-bash"><code class="language-bash">move name 1</code></pre><p>æŸ¥çœ‹æ•°æ®åº“çš„æ‰€æœ‰key</p><pre class=" language-bash"><code class="language-bash">keys *</code></pre><p>åˆ¤æ–­æŒ‡å®šçš„keyæ˜¯å¦å­˜åœ¨</p><pre class=" language-bash"><code class="language-bash">exists name</code></pre><p>è®¾ç½®keyçš„æœ‰æ•ˆæœŸ</p><pre class=" language-bash"><code class="language-bash">expire name <span class="token punctuation">[</span>ç§’æ•°<span class="token punctuation">]</span></code></pre><p>æŸ¥çœ‹å‰©ä½™å¤šå°‘ç§’è¿‡æœŸ</p><pre class=" language-bash"><code class="language-bash">ttl name</code></pre><p>æŸ¥çœ‹keyçš„ç±»å‹</p><pre class=" language-bash"><code class="language-bash"><span class="token function">type</span> name</code></pre><p>æ¸…ç©ºå½“å‰æ•°æ®åº“</p><pre class=" language-bash"><code class="language-bash">flushdb</code></pre><p>æ¸…ç©ºå…¨éƒ¨æ•°æ®åº“</p><pre class=" language-bash"><code class="language-bash">flushall</code></pre><p><strong>Redisæ˜¯å•çº¿ç¨‹çš„ï¼ŒåŸºäºå†…å­˜æ“ä½œï¼ŒCPUä¸æ˜¯Redisçš„æ€§èƒ½ç“¶é¢ˆï¼ŒRedisçš„æ€§èƒ½æ˜¯æ ¹æ®æœºå™¨çš„å†…å­˜å’Œç½‘ç»œå¸¦å®½å†³å®šçš„ã€‚</strong></p><p>Rediså°†å…¨éƒ¨æ•°æ®å­˜æ”¾äºå†…å­˜ï¼Œæ‰€ä»¥è¯´ä½¿ç”¨å•çº¿ç¨‹æ•ˆç‡æœ€é«˜ï¼Œå¤šçº¿ç¨‹cpuä¸Šä¸‹æ–‡åˆ‡æ¢è€—æ—¶ï¼Œå¯¹äºå†…å­˜ç³»ç»Ÿæ¥è¯´ï¼Œå¦‚æœæ²¡æœ‰ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œæ•ˆç‡å°±æ˜¯æœ€é«˜çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git</title>
      <link href="2020/08/03/git/"/>
      <url>2020/08/03/git/</url>
      
        <content type="html"><![CDATA[<p>Gitæ˜¯ç›®å‰æœ€å…ˆè¿›çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚æ²¡æœ‰ä¸­å¤®æœåŠ¡å™¨ï¼Œæ¯ä¸ªäººçš„ç”µè„‘å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç‰ˆæœ¬åº“ï¼Œå·¥ä½œçš„æ—¶å€™ä¸éœ€è¦è”ç½‘ã€‚ç›¸äº’æ¨é€å°±èƒ½çœ‹åˆ°å¯¹æ–¹çš„ä¿®æ”¹äº†ã€‚<br>SVNæ˜¯é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç‰ˆæœ¬åº“æ˜¯é›†ä¸­æ”¾åœ¨ä¸­å¤®æœåŠ¡å™¨ä¸Šçš„ï¼Œæ‰€ä»¥å·¥ä½œæ—¶é¦–å…ˆè¦ä»ä¸­å¤®æœåŠ¡å™¨å¾—åˆ°æœ€æ–°çš„ç‰ˆæœ¬ï¼Œç„¶åå·¥ä½œï¼Œå·¥ä½œå®Œæˆåæ¨é€ç»™æœåŠ¡å™¨ã€‚</p><h2 id="æŸ¥çœ‹ä¸åŒçº§åˆ«çš„é…ç½®"><a href="#æŸ¥çœ‹ä¸åŒçº§åˆ«çš„é…ç½®" class="headerlink" title="æŸ¥çœ‹ä¸åŒçº§åˆ«çš„é…ç½®"></a>æŸ¥çœ‹ä¸åŒçº§åˆ«çš„é…ç½®</h2><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># æŸ¥çœ‹ç³»ç»Ÿconfig</span><span class="token function">git</span> config --system --list<span class="token comment" spellcheck="true"># æŸ¥çœ‹å½“å‰ç”¨æˆ·</span><span class="token function">git</span> config --global --list</code></pre><h2 id="è®¾ç½®ç”¨æˆ·åä¸é‚®ç®±"><a href="#è®¾ç½®ç”¨æˆ·åä¸é‚®ç®±" class="headerlink" title="è®¾ç½®ç”¨æˆ·åä¸é‚®ç®±"></a>è®¾ç½®ç”¨æˆ·åä¸é‚®ç®±</h2><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> config --global user.name <span class="token string">"sweetboyZhang"</span>  <span class="token comment" spellcheck="true"># åç§°</span><span class="token function">git</span> config --global user.email <span class="token string">"2824199842@qq.com"</span>   <span class="token comment" spellcheck="true"># é‚®ç®±</span></code></pre><h2 id="ä¸‰ä¸ªåŒºåŸŸ"><a href="#ä¸‰ä¸ªåŒºåŸŸ" class="headerlink" title="ä¸‰ä¸ªåŒºåŸŸ"></a>ä¸‰ä¸ªåŒºåŸŸ</h2><p>Gitæœ¬åœ°æœ‰ä¸‰ä¸ªå·¥ä½œåŒºåŸŸï¼šå·¥ä½œç›®å½•ï¼ˆWorking Directoryï¼‰ã€æš‚å­˜åŒº(Stage/Index)ã€èµ„æºåº“(Repositoryï¼‰ï¼Œå¦‚æœåœ¨åŠ ä¸Šè¿œç¨‹çš„gitä»“åº“(Remote Directory)å°±å¯ä»¥åˆ†ä¸ºå››ä¸ªå·¥ä½œåŒºåŸŸã€‚<br><img src="/2020/08/03/git/1.png" style="zoom:80%;"></p><h2 id="gité¡¹ç›®æ­å»º"><a href="#gité¡¹ç›®æ­å»º" class="headerlink" title="gité¡¹ç›®æ­å»º"></a>gité¡¹ç›®æ­å»º</h2><p><strong>åˆ›å»ºå·¥ä½œç›®å½•</strong></p><p>å·¥ä½œç›®å½•å°±æ˜¯gitç®¡ç†çš„æ–‡ä»¶å¤¹ï¼Œå¯ä»¥æ˜¯é¡¹ç›®ç›®å½•ï¼Œä¹Ÿå¯ä»¥æ˜¯ç©ºç›®å½•ã€‚<br><img src="/2020/08/03/git/2.png" alt></p><p><strong>æ­å»ºæœ¬åœ°ä»“åº“</strong></p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># åœ¨å½“å‰ç›®å½•åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ä»“åº“</span><span class="token function">git</span> init</code></pre><p><strong>å…‹éš†è¿œç¨‹ä»“åº“</strong></p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># å…‹éš†ä¸€ä¸ªé¡¹ç›®å’Œå®ƒæ•´ä¸ªä»£ç å†å²</span><span class="token function">git</span> clone <span class="token punctuation">[</span>url<span class="token punctuation">]</span></code></pre><h2 id="gitæ–‡ä»¶æ“ä½œ"><a href="#gitæ–‡ä»¶æ“ä½œ" class="headerlink" title="gitæ–‡ä»¶æ“ä½œ"></a>gitæ–‡ä»¶æ“ä½œ</h2><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># æŸ¥çœ‹æ–‡ä»¶çŠ¶æ€</span><span class="token function">git</span> status <span class="token punctuation">[</span>filename<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># æŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶çŠ¶æ€</span><span class="token function">git</span> status<span class="token comment" spellcheck="true"># æ·»åŠ æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒº</span><span class="token function">git</span> add <span class="token keyword">.</span><span class="token comment" spellcheck="true"># æäº¤æ–‡ä»¶åˆ°æœ¬åœ°ä»“åº“ -m æäº¤ä¿¡æ¯</span><span class="token function">git</span> commit -m <span class="token string">"[msg]"</span></code></pre><h2 id="é¡¹ç›®ä¸­å¿½ç•¥ä¸Šä¼ æ–‡ä»¶"><a href="#é¡¹ç›®ä¸­å¿½ç•¥ä¸Šä¼ æ–‡ä»¶" class="headerlink" title="é¡¹ç›®ä¸­å¿½ç•¥ä¸Šä¼ æ–‡ä»¶"></a>é¡¹ç›®ä¸­å¿½ç•¥ä¸Šä¼ æ–‡ä»¶</h2><p>.gitignore</p><pre class=" language-gitignore"><code class="language-gitignore">*.class*.log*.lock# Package File *.jar*.war*.eartarget/# idea.idea/*.imlbin/.settings/.classpath.project*.ips*.iws*velocity.log*# STS.apt_generared.factorypath.springbean*.logtmp/</code></pre><h2 id="ç»‘å®šè¿œç¨‹ä»“åº“"><a href="#ç»‘å®šè¿œç¨‹ä»“åº“" class="headerlink" title="ç»‘å®šè¿œç¨‹ä»“åº“"></a>ç»‘å®šè¿œç¨‹ä»“åº“</h2><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># ç”Ÿæˆå…¬é’¥</span>ssh-keygen</code></pre><p>åœ¨æµè§ˆå™¨ä¸Šåˆ›å»ºç©ºä»“åº“åï¼Œå°±å¯ä»¥cloneåˆ°æœ¬åœ°ä»“åº“äº†</p><p><img src="/2020/08/03/git/4.png" alt></p><h2 id="IDEAä¸­é›†æˆgit"><a href="#IDEAä¸­é›†æˆgit" class="headerlink" title="IDEAä¸­é›†æˆgit"></a>IDEAä¸­é›†æˆgit</h2><p>1ã€åˆ›å»ºé¡¹ç›®</p><p>2ã€å°†è¿œç¨‹çš„gitæ–‡ä»¶ç›®å½•å¤åˆ¶åˆ°é¡¹ç›®ä¸­</p><p><img src="/2020/08/03/git/3.png" alt></p><p>3ã€ä½¿ç”¨å‘½ä»¤æˆ–è€…æ˜¯å›¾å½¢ç•Œé¢æ·»åŠ æ–‡ä»¶ï¼Œæäº¤æ–‡ä»¶ï¼Œä¸Šä¼ æ–‡ä»¶</p><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> add <span class="token keyword">.</span><span class="token function">git</span> commit -m <span class="token string">"[æäº¤ä¿¡æ¯]"</span><span class="token function">git</span> push</code></pre><h2 id="gitåˆ†æ”¯"><a href="#gitåˆ†æ”¯" class="headerlink" title="gitåˆ†æ”¯"></a>gitåˆ†æ”¯</h2><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># åˆ—å‡ºæœ¬åœ°æ‰€æœ‰åˆ†æ”¯</span><span class="token function">git</span> branch<span class="token comment" spellcheck="true"># åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯</span><span class="token function">git</span> branch -r<span class="token comment" spellcheck="true"># æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä½†ä¾ç„¶åœç•™åœ¨å½“å‰åˆ†æ”¯</span><span class="token function">git</span> branch <span class="token punctuation">[</span>branch-name<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯</span><span class="token function">git</span> checkout -b <span class="token punctuation">[</span>branch<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯</span>$ <span class="token function">git</span> merge <span class="token punctuation">[</span>branch<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># åˆ é™¤åˆ†æ”¯</span>$ <span class="token function">git</span> branch -d <span class="token punctuation">[</span>branch-name<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># åˆ é™¤è¿œç¨‹åˆ†æ”¯</span>$ <span class="token function">git</span> push origin --delete <span class="token punctuation">[</span>branch-name<span class="token punctuation">]</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¼‚æ­¥ä»»åŠ¡ï¼Œé‚®ä»¶å‘é€</title>
      <link href="2020/08/03/springboot-07/"/>
      <url>2020/08/03/springboot-07/</url>
      
        <content type="html"><![CDATA[<h2 id="å¼‚æ­¥ä»»åŠ¡"><a href="#å¼‚æ­¥ä»»åŠ¡" class="headerlink" title="å¼‚æ­¥ä»»åŠ¡"></a>å¼‚æ­¥ä»»åŠ¡</h2><p>1ã€åœ¨å¯åŠ¨ç±»æ·»åŠ <code>@EnableAsync</code> ï¼Œè¡¨ç¤º å¼€å¯å¼‚æ­¥æ³¨è§£åŠŸèƒ½</p><p>2ã€åœ¨æ–¹æ³•ä¸Šæ·»åŠ <code>@Async</code>ï¼Œè¡¨ç¤ºå¼‚æ­¥æ–¹æ³•</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AsyncService</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// ä½¿ç”¨æ³¨è§£è¡¨ç¤ºå¼‚æ­¥ä»»åŠ¡</span>    <span class="token annotation punctuation">@Async</span>    <span class="token keyword">public</span>  <span class="token keyword">void</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ•°æ®æ­£åœ¨å¤„ç†......"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>3ã€åœ¨Controllerä¸­ç›´æ¥è°ƒç”¨å³å¯</p><h2 id="é‚®ä»¶å‘é€"><a href="#é‚®ä»¶å‘é€" class="headerlink" title="é‚®ä»¶å‘é€"></a>é‚®ä»¶å‘é€</h2><p>1ã€å¯¼å…¥ä¾èµ–</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-mail<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>2ã€æ‰“å¼€é‚®ç®±çš„POP3/SMTPæœåŠ¡è·å–æˆæƒç ï¼Œè®¾ç½®-&gt;è´¦æˆ·-&gt;å¼€å¯pop3å’ŒsmtpæœåŠ¡</p><p><img src="/2020/08/03/springboot-07/1.png" alt></p><p>3ã€ç¼–å†™é…ç½®æ–‡ä»¶</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmailController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> JavaMailSenderImpl mailSender<span class="token punctuation">;</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/sendMail"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">sendMail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        SimpleMailMessage mailMessage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleMailMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        mailMessage<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span><span class="token string">"é€šçŸ¥"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        mailMessage<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        mailMessage<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span><span class="token string">"2824199842@qq.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        mailMessage<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span><span class="token string">"2824199842@qq.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        mailSender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>mailMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"send ok"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/sendMail2"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">sendMail2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception<span class="token punctuation">{</span>        MimeMessage mimeMessage <span class="token operator">=</span> mailSender<span class="token punctuation">.</span><span class="token function">createMimeMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        MimeMessageHelper helper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeMessageHelper</span><span class="token punctuation">(</span>mimeMessage<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        helper<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span><span class="token string">"é€šçŸ¥"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        helper<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"&lt;p style='color:red'>hello~&lt;/p>"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        helper<span class="token punctuation">.</span><span class="token function">addAttachment</span><span class="token punctuation">(</span><span class="token string">"1.jpg"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"C:\\Users\\28241\\Pictures\\Saved Pictures\\1.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// é™„ä»¶</span>        helper<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span><span class="token string">"2824199842@qq.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        helper<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span><span class="token string">"2824199842@qq.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        mailSender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>mimeMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"send ok"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å¾®æœåŠ¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swaggerç®€ä»‹ä¸ä½¿ç”¨</title>
      <link href="2020/08/02/swagger/"/>
      <url>2020/08/02/swagger/</url>
      
        <content type="html"><![CDATA[<p>èƒŒæ™¯ï¼šå‰åç«¯åˆ†ç¦»æ—¶ä»£çš„æ¥ä¸´  Vue+Springboot</p><p>åç«¯æ—¶ä»£ï¼šå‰ç«¯è‡³è´Ÿè´£ç®¡ç†é™æ€é¡µé¢ï¼›html==&gt;åç«¯ã€‚æ¨¡æ¿å¼•æ“jsp=&gt;åç«¯æ˜¯ä¸»åŠ›</p><p>å‰åç«¯åˆ†ç¦»æ—¶ä»£ï¼š<a id="more"></a></p><ul><li>åç«¯ï¼šåç«¯æ§åˆ¶å±‚ï¼ŒæœåŠ¡å±‚ï¼Œæ•°æ®è®¿é—®å±‚</li><li>å‰ç«¯ï¼šå‰ç«¯æ§åˆ¶å±‚ï¼Œè§†å›¾å±‚<ul><li>ä¼ªé€ åç«¯æ•°æ®ï¼Œjsonã€‚ä¸éœ€è¦åç«¯ï¼Œå‰ç«¯å·¥ç¨‹ä¾ç„¶èƒ½å¤Ÿè·‘èµ·æ¥</li></ul></li><li>å‰åç«¯äº¤äº’ï¼šAPI</li><li>å‰åç«¯ç›¸äº’ç‹¬ç«‹ï¼Œæ¾è€¦åˆ</li><li>å‰åç«¯ç”šè‡³å¯ä»¥åˆ†å¸ƒåœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Š</li></ul><p>äº§ç”Ÿçš„ä¸€ä¸ªé—®é¢˜ï¼š</p><ul><li>å‰åç«¯é›†æˆè”è°ƒï¼Œå‰åç«¯äººå‘˜æ— æ³•åšåˆ°â€œåŠæ—¶åå•†ï¼Œå°½æ—©è§£å†³â€ï¼Œæœ€ç»ˆå¯¼è‡´é—®é¢˜çˆ†å‘ã€‚</li></ul><p>è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>é¦–å…ˆæŒ‡å®šschemaï¼Œå®æ—¶æ›´æ–°æœ€æ–°çš„APIï¼Œé™ä½é›†æˆçš„é£é™©</li><li>æ—©äº›å¹´ï¼š<ul><li>æŒ‡å®šwordè®¡åˆ’æ–‡æ¡£ï¼›</li><li>å‰ç«¯æµ‹è¯•åç«¯æ¥å£ï¼špostman</li><li>åç«¯æä¾›æ¥å£ï¼Œéœ€è¦å®æ—¶æ›´æ–°æœ€æ–°çš„æ¶ˆæ¯åŠæ”¹åŠ¨</li></ul></li><li>Swaggeräº§ç”Ÿ ï¼</li></ul><h2 id="Swaggerç®€ä»‹"><a href="#Swaggerç®€ä»‹" class="headerlink" title="Swaggerç®€ä»‹"></a>Swaggerç®€ä»‹</h2><ul><li>å·ç§°ä¸–ç•Œä¸Šæœ€æµè¡Œçš„APIæ¡†æ¶</li><li>ReatFul API æ–‡æ¡£åœ¨çº¿è‡ªåŠ¨ç”Ÿæˆå·¥å…·=&gt;APIæ–‡æ¡£ä¸APIè‡ªåŠ¨æ›´æ–°</li><li>ç›´æ¥è¿è¡Œï¼Œå¯ä»¥åœ¨çº¿æµ‹è¯•APIæ¥å£</li><li>æ”¯æŒå¤šç§è¯­è¨€</li></ul><h2 id="Springbooté›†æˆSwagger"><a href="#Springbooté›†æˆSwagger" class="headerlink" title="Springbooté›†æˆSwagger"></a>Springbooté›†æˆSwagger</h2><p>1ã€åˆ›å»ºspringbooté¡¹ç›®å¹¶å¯¼å…¥webä¾èµ–</p><p>2ã€å¯¼å…¥ç›¸å…³ä¾èµ–</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>io.springfox<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springfox-swagger2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>io.springfox<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springfox-swagger-ui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>3ã€ç¼–å†™ä¸€ä¸ªhellworld</p><p>4ã€ç¼–å†™Swaggeré…ç½®ç±»</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@EnableSwagger2</span>  <span class="token comment" spellcheck="true">// å¼€å¯Swagger2</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SwaggerConfig</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><p>5ã€æµ‹è¯•è®¿é—®ï¼š<a href="http://localhost:8080/swagger-ui.html" target="_blank" rel="noopener">http://localhost:8080/swagger-ui.html</a><br><img src="/2020/08/02/swagger/1.png" alt></p><h2 id="é…ç½®Swagger"><a href="#é…ç½®Swagger" class="headerlink" title="é…ç½®Swagger"></a>é…ç½®Swagger</h2><p>Swaggerçš„beanå®ä¾‹ Docket</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@EnableSwagger2</span>  <span class="token comment" spellcheck="true">// å¼€å¯Swagger2</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SwaggerConfig</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// é…ç½®Swaggerçš„Docketçš„beanå®ä¾‹</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> Docket <span class="token function">docket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Docket</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">DocumentationType</span><span class="token punctuation">(</span><span class="token string">"swagger"</span><span class="token punctuation">,</span> <span class="token string">"2.0"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// é…ç½®Swaggerçš„apiInfo</span>    <span class="token keyword">private</span> ApiInfo <span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        Contact contact <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Contact</span><span class="token punctuation">(</span><span class="token string">"sweetboyZhang"</span><span class="token punctuation">,</span> <span class="token string">"https://sweetboyZhang.github.io"</span><span class="token punctuation">,</span> <span class="token string">"2824199842@qq.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ApiInfo</span><span class="token punctuation">(</span>                <span class="token string">"My Swagger API æ–‡æ¡£"</span><span class="token punctuation">,</span>                <span class="token string">"è¿™æ˜¯ä¸€ä¸ªSwaggeræµ‹è¯•"</span><span class="token punctuation">,</span>                <span class="token string">"1.0"</span><span class="token punctuation">,</span>                <span class="token string">"https://sweetboyZhang.github.io"</span><span class="token punctuation">,</span>                contact<span class="token punctuation">,</span>                <span class="token string">"Apache 2.0"</span><span class="token punctuation">,</span>                <span class="token string">"http://www.apache.org/licenses/LICENSE-2.0"</span><span class="token punctuation">,</span>                <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span>VendorExtension<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="é…ç½®Swaggeræ‰«æè·¯å¾„"><a href="#é…ç½®Swaggeræ‰«æè·¯å¾„" class="headerlink" title="é…ç½®Swaggeræ‰«æè·¯å¾„"></a>é…ç½®Swaggeræ‰«æè·¯å¾„</h2><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> Docket <span class="token function">docket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Docket</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">DocumentationType</span><span class="token punctuation">(</span><span class="token string">"swagger"</span><span class="token punctuation">,</span> <span class="token string">"2.0"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">// RequestHandlerSelectorsé…ç½®è¦æ‰«ææ¥å£çš„æ–¹å¼</span>            <span class="token comment" spellcheck="true">// basePackage æŒ‡å®šè¦æ‰«æçš„åŒ…</span>            <span class="token comment" spellcheck="true">// any() æ‰«æå…¨éƒ¨</span>            <span class="token comment" spellcheck="true">// none() ä¸æ‰«æ</span>            <span class="token comment" spellcheck="true">// withClassAnnotation(xxx.class)æ‰«æç±»ä¸Šçš„æ³¨è§£</span>            <span class="token comment" spellcheck="true">// withMethodAnnotation(xxx.class)æ‰«ææ–¹æ³•ä¸Šçš„æ³¨è§£</span>            <span class="token punctuation">.</span><span class="token function">apis</span><span class="token punctuation">(</span>RequestHandlerSelectors<span class="token punctuation">.</span><span class="token function">basePackage</span><span class="token punctuation">(</span><span class="token string">"com.zyz.controller"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">// .paths è¿‡æ»¤è·¯å¾„</span>            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="æ ¹æ®ç¯å¢ƒæ˜¯å¦å¼€å¯Swagger"><a href="#æ ¹æ®ç¯å¢ƒæ˜¯å¦å¼€å¯Swagger" class="headerlink" title="æ ¹æ®ç¯å¢ƒæ˜¯å¦å¼€å¯Swagger"></a>æ ¹æ®ç¯å¢ƒæ˜¯å¦å¼€å¯Swagger</h2><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> Docket <span class="token function">docket</span><span class="token punctuation">(</span>Environment environment<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// è®¾ç½®è¦æ˜¾ç¤ºçš„Swaggerç¯å¢ƒ</span>    Profiles profiles <span class="token operator">=</span> Profiles<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"dev"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è·å–é¡¹ç›®ç¯å¢ƒ</span>    <span class="token keyword">boolean</span> flag <span class="token operator">=</span> environment<span class="token punctuation">.</span><span class="token function">acceptsProfiles</span><span class="token punctuation">(</span>profiles<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Docket</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">DocumentationType</span><span class="token punctuation">(</span><span class="token string">"swagger"</span><span class="token punctuation">,</span> <span class="token string">"2.0"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">enable</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token comment" spellcheck="true">// è®¾ç½®æ˜¯å¦å¯åŠ¨Swagger</span>            <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">// RequestHandlerSelectorsé…ç½®è¦æ‰«ææ¥å£çš„æ–¹å¼</span>            <span class="token comment" spellcheck="true">// basePackage æŒ‡å®šè¦æ‰«æçš„åŒ…</span>            <span class="token comment" spellcheck="true">// any() æ‰«æå…¨éƒ¨</span>            <span class="token comment" spellcheck="true">// none() ä¸æ‰«æ</span>            <span class="token comment" spellcheck="true">// withClassAnnotation(xxx.class)æ‰«æç±»ä¸Šçš„æ³¨è§£</span>            <span class="token comment" spellcheck="true">// withMethodAnnotation(xxx.class)æ‰«ææ–¹æ³•ä¸Šçš„æ³¨è§£</span>            <span class="token punctuation">.</span><span class="token function">apis</span><span class="token punctuation">(</span>RequestHandlerSelectors<span class="token punctuation">.</span><span class="token function">basePackage</span><span class="token punctuation">(</span><span class="token string">"com.zyz.controller"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">// .paths è¿‡æ»¤è·¯å¾„</span>            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>application-dev.properties</p><pre class=" language-properties"><code class="language-properties"><span class="token comment" spellcheck="true"># ç”Ÿäº§ç¯å¢ƒ</span><span class="token attr-name">server.port</span><span class="token punctuation">=</span><span class="token attr-value">8080</span></code></pre><p>application-pro.properties</p><pre class=" language-properties"><code class="language-properties"><span class="token comment" spellcheck="true"># ä¸Šçº¿ç¯å¢ƒ</span><span class="token attr-name">server.port</span><span class="token punctuation">=</span><span class="token attr-value">8081</span></code></pre><p>application.properties</p><pre class=" language-properties"><code class="language-properties"><span class="token comment" spellcheck="true"># æ¿€æ´»ç”Ÿäº§ç¯å¢ƒ</span><span class="token attr-name">spring.profiles.active</span><span class="token punctuation">=</span><span class="token attr-value">dev  </span></code></pre><h2 id="é…ç½®åˆ†ç»„"><a href="#é…ç½®åˆ†ç»„" class="headerlink" title="é…ç½®åˆ†ç»„"></a>é…ç½®åˆ†ç»„</h2><p>æ–¹ä¾¿å¤šäººååŒå¼€å‘</p><pre class=" language-java"><code class="language-java"><span class="token punctuation">.</span><span class="token function">groupName</span><span class="token punctuation">(</span><span class="token string">"zyz"</span><span class="token punctuation">)</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> Docket <span class="token function">docket1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Docket</span><span class="token punctuation">(</span>DocumentationType<span class="token punctuation">.</span>SWAGGER_2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">groupName</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> Docket <span class="token function">docket2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Docket</span><span class="token punctuation">(</span>DocumentationType<span class="token punctuation">.</span>SWAGGER_2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">groupName</span><span class="token punctuation">(</span><span class="token string">"B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> Docket <span class="token function">docket3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Docket</span><span class="token punctuation">(</span>DocumentationType<span class="token punctuation">.</span>SWAGGER_2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">groupName</span><span class="token punctuation">(</span><span class="token string">"C"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="é…ç½®å®ä½“ç±»"><a href="#é…ç½®å®ä½“ç±»" class="headerlink" title="é…ç½®å®ä½“ç±»"></a>é…ç½®å®ä½“ç±»</h2><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// åªè¦æ¥å£ä¸­çš„è¿”å›å€¼æœ‰å®ä½“ç±»ï¼ŒSwaggerå°±ä¼šæ‰«æåˆ°</span><span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"useræ§åˆ¶æ–¹æ³•"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// æ–¹æ³•æ³¨é‡Š</span><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">)</span><span class="token keyword">public</span> User <span class="token function">user</span><span class="token punctuation">(</span><span class="token annotation punctuation">@ApiParam</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·å"</span><span class="token punctuation">)</span>String name<span class="token punctuation">,</span><span class="token annotation punctuation">@ApiParam</span><span class="token punctuation">(</span><span class="token string">"å¯†ç "</span><span class="token punctuation">)</span> String password<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token annotation punctuation">@NoArgsConstructor</span><span class="token annotation punctuation">@ApiModel</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·å®ä½“ç±»"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// æ³¨é‡Š</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·å"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"å¯†ç "</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> String password<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><img src="/2020/08/02/swagger/2.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swagger </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringSecurity</title>
      <link href="2020/07/28/springboot-06/"/>
      <url>2020/07/28/springboot-06/</url>
      
        <content type="html"><![CDATA[<p>SpringSecurityæ˜¯ä¸€ä¸ªé’ˆå¯¹äºSpringé¡¹ç›®çš„å®‰å…¨æ¡†æ¶ï¼Œä¾§é‡äºä¸ºSpringé¡¹ç›®æä¾›èº«ä»½éªŒè¯å’Œæˆæƒã€‚</p><p>å°†æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨æ‹¦æˆªå™¨ï¼Œè¿‡æ»¤å™¨è¿›è¡Œæƒé™æ£€æŸ¥ï¼Œå’Œèº«ä»½éªŒè¯çš„æ“ä½œè¿›è¡Œäº†ç®€åŒ–ï¼Œå¹¶æä¾›äº†ä¸€å¥— Web åº”ç”¨å®‰å…¨æ€§çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚</p><h2 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h2><h3 id="1ã€åˆ›å»ºspringbootå·¥ç¨‹ï¼Œå¹¶å¯¼å…¥ç›¸åº”çš„ä¾èµ–"><a href="#1ã€åˆ›å»ºspringbootå·¥ç¨‹ï¼Œå¹¶å¯¼å…¥ç›¸åº”çš„ä¾èµ–" class="headerlink" title="1ã€åˆ›å»ºspringbootå·¥ç¨‹ï¼Œå¹¶å¯¼å…¥ç›¸åº”çš„ä¾èµ–"></a>1ã€åˆ›å»ºspringbootå·¥ç¨‹ï¼Œå¹¶å¯¼å…¥ç›¸åº”çš„ä¾èµ–</h3><p><img src="/2020/07/28/springboot-06/1.png" alt></p><h3 id="2ã€å¯¼å…¥é™æ€å·¥ç¨‹"><a href="#2ã€å¯¼å…¥é™æ€å·¥ç¨‹" class="headerlink" title="2ã€å¯¼å…¥é™æ€å·¥ç¨‹"></a>2ã€å¯¼å…¥é™æ€å·¥ç¨‹</h3><p><img src="/2020/07/28/springboot-06/2.png" alt></p><p>å…³é—­thymeleafç¼“å­˜ï¼š</p><pre class=" language-properties"><code class="language-properties"><span class="token comment" spellcheck="true"># å…³é—­thymeleafç¼“å­˜</span><span class="token attr-name">spring.thymeleaf.cache</span><span class="token punctuation">=</span><span class="token attr-value">false</span></code></pre><h3 id="3ã€ç¼–å†™RouterControllerå®ç°é¡µé¢è·³è½¬"><a href="#3ã€ç¼–å†™RouterControllerå®ç°é¡µé¢è·³è½¬" class="headerlink" title="3ã€ç¼–å†™RouterControllerå®ç°é¡µé¢è·³è½¬"></a>3ã€ç¼–å†™RouterControllerå®ç°é¡µé¢è·³è½¬</h3><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Controller</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RouterController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"/"</span><span class="token punctuation">,</span><span class="token string">"/index"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">toIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"index"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/toLogin"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">toLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"views/login"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/level1/{id}"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">toLevel1</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"views/level1/"</span><span class="token operator">+</span>id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/level2/{id}"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">toLevel2</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"views/level2/"</span><span class="token operator">+</span>id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/level3/{id}"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">toLevel3</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"views/level3/"</span><span class="token operator">+</span>id<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="SpringSecurityä½¿ç”¨"><a href="#SpringSecurityä½¿ç”¨" class="headerlink" title="SpringSecurityä½¿ç”¨"></a>SpringSecurityä½¿ç”¨</h2><p>ä»…éœ€å¼•å…¥spring-boot-starter-securityæ¨¡å—ï¼Œè¿›è¡Œå°‘é‡çš„é…ç½®ï¼Œä¾¿å¯ä»¥å®ç°å¼ºå¤§çš„å®‰å…¨ç®¡ç†ã€‚</p><ul><li>WebSecurityConfigureAdapterï¼šè‡ªå®šä¹‰Securityç­–ç•¥</li><li>AuthenticationManagerBuilderï¼šè‡ªå®šä¹‰è®¤è¯ç­–ç•¥</li><li>@EnableWebSecurityï¼šå¼€å¯WebSecurityæ¨¡å¼</li></ul><p>SpringScurityçš„ä¸¤ä¸ªä¸»è¦ç›®æ ‡å°±æ˜¯<strong>è®¤è¯</strong>å’Œ<strong>æˆæƒ</strong>ã€‚</p><h3 id="1ã€å¼•å…¥SpringSecurityæ¨¡å—"><a href="#1ã€å¼•å…¥SpringSecurityæ¨¡å—" class="headerlink" title="1ã€å¼•å…¥SpringSecurityæ¨¡å—"></a>1ã€å¼•å…¥SpringSecurityæ¨¡å—</h3><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-security<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><h3 id="2ã€åˆ›å»ºconfigç›®å½•ï¼Œæ·»åŠ SecurityConfigç±»"><a href="#2ã€åˆ›å»ºconfigç›®å½•ï¼Œæ·»åŠ SecurityConfigç±»" class="headerlink" title="2ã€åˆ›å»ºconfigç›®å½•ï¼Œæ·»åŠ SecurityConfigç±»"></a>2ã€åˆ›å»ºconfigç›®å½•ï¼Œæ·»åŠ SecurityConfigç±»</h3><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// åŸºäºAOP</span><span class="token annotation punctuation">@EnableWebSecurity</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// è¯·æ±‚æˆæƒçš„è§„åˆ™</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span>HttpSecurity http<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// é¦–é¡µæ‰€æœ‰äººéƒ½å¯ä»¥è®¿é—® åŠŸèƒ½é¡µéœ€è¦æƒé™</span>        <span class="token comment" spellcheck="true">// é“¾å¼ç¼–ç¨‹</span>        http<span class="token punctuation">.</span><span class="token function">authorizeRequests</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/level1/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasRole</span><span class="token punctuation">(</span><span class="token string">"vip1"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/level2/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasRole</span><span class="token punctuation">(</span><span class="token string">"vip2"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/level3/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasRole</span><span class="token punctuation">(</span><span class="token string">"vip3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ²¡æœ‰æƒé™é»˜è®¤è·³è½¬åˆ°ç™»å½•é¡µé¢  é»˜è®¤ç™»å½•é¡µé¢æ˜¯æ¡†æ¶æä¾›çš„</span>        http<span class="token punctuation">.</span><span class="token function">formLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">loginPage</span><span class="token punctuation">(</span><span class="token string">"/toLogin"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">usernameParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">passwordParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        http<span class="token punctuation">.</span><span class="token function">csrf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å…³é—­é˜²è·¨ç«™è„šæœ¬æ”»å‡»ï¼Œå…è®¸getæ–¹å¼è·³è½¬</span>        <span class="token comment" spellcheck="true">// æ³¨é”€  å¼€å¯æ³¨é”€åŠŸèƒ½  æ³¨é”€æˆåŠŸåè·³è½¬åˆ°é¦–é¡µ</span>        http<span class="token punctuation">.</span><span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">logoutSuccessUrl</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å¼€å¯è®°ä½æˆ‘åŠŸèƒ½ ä¿å­˜ç™»å½•ä¿¡æ¯åˆ°cookie é»˜è®¤æœ‰æ•ˆæœŸ14å¤©</span>        http<span class="token punctuation">.</span><span class="token function">rememberMe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rememberMeParameter</span><span class="token punctuation">(</span><span class="token string">"remember"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// è®¤è¯</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span>AuthenticationManagerBuilder auth<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// å®é™…å¼€å‘ä¸­ä»æ•°æ®åº“ä¸­è¯»å–æ•°æ®</span>        auth<span class="token punctuation">.</span><span class="token function">inMemoryAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">passwordEncoder</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BCryptPasswordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">withUser</span><span class="token punctuation">(</span><span class="token string">"zyz"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BCryptPasswordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token string">"vip1"</span><span class="token punctuation">,</span><span class="token string">"vip2"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">withUser</span><span class="token punctuation">(</span><span class="token string">"root"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BCryptPasswordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token string">"vip1"</span><span class="token punctuation">,</span><span class="token string">"vip2"</span><span class="token punctuation">,</span><span class="token string">"vip3"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">withUser</span><span class="token punctuation">(</span><span class="token string">"guest"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BCryptPasswordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token string">"vip1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-html"><code class="language-html"><span class="token comment" spellcheck="true">&lt;!--æ³¨é”€--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/logout}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sign-out icon<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span> æ³¨é”€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code></pre><p>thymeleafä¸springsecurityæ•´åˆï¼Œä½¿é¡µé¢ä»…ä»…æ˜¾ç¤ºå½“å‰ç”¨æˆ·æƒé™èƒ½å¤Ÿè®¿é—®çš„é¡µé¢ï¼Œå½“å‰ç”¨æˆ·æ²¡æœ‰æƒé™è®¿é—®çš„é¡µé¢åˆ™ä¸æ˜¾ç¤ºã€‚<br>éœ€è¦å¯¼å…¥thymeleafä¸springsecurityçš„æ•´åˆåŒ…</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.thymeleaf.extras<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>thymeleaf-extras-springsecurity4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.0.4.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>é«˜ç‰ˆæœ¬çš„springbootä¸æ”¯æŒï¼Œéœ€è¦é™ä½ç‰ˆæœ¬</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.0.9.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/></span></span> <span class="token comment" spellcheck="true">&lt;!-- lookup parent from repository --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">></span></span></code></pre><p>åœ¨htmlé¡µé¢æ·»åŠ å‘½åç©ºé—´</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>th</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.thymeleaf.org<span class="token punctuation">"</span></span>      <span class="token attr-name"><span class="token namespace">xmlns:</span>sec</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.thymeleaf.org/thymeleaf-extras-springsecurity4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code></pre><p>thymeleafæ•´åˆSpringSecurity</p><pre class=" language-html"><code class="language-html"><span class="token comment" spellcheck="true">&lt;!--æœªç™»å½•--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">sec:</span>authorize</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>!isAuthenticated()<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/toLogin}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>address card icon<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span> ç™»å½•    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--å·²ç™»å½•--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">sec:</span>authorize</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>isAuthenticated()<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--æ˜¾ç¤ºç”¨æˆ·å--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        ç”¨æˆ·åï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">sec:</span>authentication</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">sec:</span>authorize</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>isAuthenticated()<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--æ³¨é”€--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/logout}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sign-out icon<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>æ³¨é”€    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><p>æ ¹æ®æƒé™æ˜¾ç¤ºç»„ä»¶</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">sec:</span>authorize</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hasRole(<span class="token punctuation">'</span>vip1<span class="token punctuation">'</span>)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><p>å®šåˆ¶ç™»å½•é¡µé¢</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name"><span class="token namespace">th:</span>action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/toLogin}<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></code></pre><p>æ·»åŠ â€è®°ä½æˆ‘â€œç»„ä»¶</p><pre class=" language-html"><code class="language-html">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>remember<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è®°ä½æˆ‘</code></pre>]]></content>
      
      
      <categories>
          
          <category> å¾®æœåŠ¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•´åˆMyBatis</title>
      <link href="2020/07/26/springboot-05/"/>
      <url>2020/07/26/springboot-05/</url>
      
        <content type="html"><![CDATA[<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªsprinbooté¡¹ç›®ï¼Œå¹¶å¼•å…¥web,jbdc,mysqlé©±åŠ¨ä¾èµ–ã€‚</p><h2 id="1ã€æ·»åŠ springbootæ•´åˆmyBatisçš„ä¾èµ–"><a href="#1ã€æ·»åŠ springbootæ•´åˆmyBatisçš„ä¾èµ–" class="headerlink" title="1ã€æ·»åŠ springbootæ•´åˆmyBatisçš„ä¾èµ–"></a>1ã€æ·»åŠ springbootæ•´åˆmyBatisçš„ä¾èµ–</h2><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.1.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><h2 id="2ã€é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯"><a href="#2ã€é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯" class="headerlink" title="2ã€é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯"></a>2ã€é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯</h2><pre class=" language-yml"><code class="language-yml">spring:  datasource:    username: root    password: 2824199842    url: jdbc:mysql://localhost:3306/mybatis?serverTimezone=Asia/Shanghai    driver-class-name: com.mysql.cj.jdbc.Driver</code></pre><h2 id="3ã€æµ‹è¯•æ˜¯å¦èƒ½è¿æ¥æˆåŠŸ"><a href="#3ã€æµ‹è¯•æ˜¯å¦èƒ½è¿æ¥æˆåŠŸ" class="headerlink" title="3ã€æµ‹è¯•æ˜¯å¦èƒ½è¿æ¥æˆåŠŸ"></a>3ã€æµ‹è¯•æ˜¯å¦èƒ½è¿æ¥æˆåŠŸ</h2><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">class</span> <span class="token class-name">Springboot05MybatisApplicationTests</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    DataSource dataSource<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> SQLException <span class="token punctuation">{</span>        Connection connection <span class="token operator">=</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="4ã€åˆ›å»ºå®ä½“ç±»ï¼Œå¯¼å…¥lombok"><a href="#4ã€åˆ›å»ºå®ä½“ç±»ï¼Œå¯¼å…¥lombok" class="headerlink" title="4ã€åˆ›å»ºå®ä½“ç±»ï¼Œå¯¼å…¥lombok"></a>4ã€åˆ›å»ºå®ä½“ç±»ï¼Œå¯¼å…¥lombok</h2><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.18.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>User.java</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>bean<span class="token punctuation">;</span><span class="token keyword">import</span> lombok<span class="token punctuation">.</span>AllArgsConstructor<span class="token punctuation">;</span><span class="token keyword">import</span> lombok<span class="token punctuation">.</span>Data<span class="token punctuation">;</span><span class="token keyword">import</span> lombok<span class="token punctuation">.</span>NoArgsConstructor<span class="token punctuation">;</span><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@NoArgsConstructor</span><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> Integer id<span class="token punctuation">;</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> String pwd<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="5ã€åˆ›å»ºmapperç›®å½•ï¼Œä»¥åŠå¯¹åº”çš„mapperæ¥å£"><a href="#5ã€åˆ›å»ºmapperç›®å½•ï¼Œä»¥åŠå¯¹åº”çš„mapperæ¥å£" class="headerlink" title="5ã€åˆ›å»ºmapperç›®å½•ï¼Œä»¥åŠå¯¹åº”çš„mapperæ¥å£"></a>5ã€åˆ›å»ºmapperç›®å½•ï¼Œä»¥åŠå¯¹åº”çš„mapperæ¥å£</h2><p>UserMapper.java</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token comment" spellcheck="true">// è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªmybatisçš„mapperç±»</span><span class="token annotation punctuation">@Repository</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">{</span>     List<span class="token operator">&lt;</span>User<span class="token operator">></span> <span class="token function">listAllUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     User <span class="token function">queryUserById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">int</span> <span class="token function">addUser</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">int</span> <span class="token function">deleteUser</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">int</span> <span class="token function">updateUser</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>6ã€åˆ›å»ºå¯¹åº”çš„sqlæ˜ å°„æ–‡ä»¶UserMapper.xml<br><img src="/2020/07/26/springboot-05/1.png" alt></p><p>åœ¨é¡¹ç›®é…ç½®æ–‡ä»¶ä¸­æ·»åŠ mybatisé…ç½®</p><pre class=" language-yml"><code class="language-yml"># mybatisé…ç½®mybatis:    type-aliases-package: com.zyz.bean # è®¾ç½®åˆ«å é»˜è®¤ä¸ºç±»å    mapper-locations: classpath:mybatis/mapper/*.xml # mapperæ–‡ä»¶ä½ç½®    configuration:        # è¾“å‡ºsql        log-impl: org.apache.ibatis.logging.stdout.StdOutImpl        # å¼€å¯é©¼å³°å‘½åè§„åˆ™        map-underscore-to-camel-case: true</code></pre><p>UserMapper.xml</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8" ?></span><span class="token doctype">&lt;!DOCTYPE mapper        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" ></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.mapper.UserMapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>listAllUser<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>User<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select * from user    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>queryUserById<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>User<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select * from user where id=#{id}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>addUser<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>User<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        insert into user(name,pwd)values(#{name},#{password})    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>deleteUser<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>int<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        delete from user where id=#{id}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>delete</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>updateUser<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>User<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        update user set name=#{name},pwd=#{pwd} where id=#{id}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">></span></span></code></pre><h2 id="6ã€åˆ›å»ºcontrollerç›®å½•ï¼Œæ·»åŠ UserControllerç±»"><a href="#6ã€åˆ›å»ºcontrollerç›®å½•ï¼Œæ·»åŠ UserControllerç±»" class="headerlink" title="6ã€åˆ›å»ºcontrollerç›®å½•ï¼Œæ·»åŠ UserControllerç±»"></a>6ã€åˆ›å»ºcontrollerç›®å½•ï¼Œæ·»åŠ UserControllerç±»</h2><p>UserController.java</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> UserMapper userMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/listAllUser"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>User<span class="token operator">></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> userMapper<span class="token punctuation">.</span><span class="token function">listAllUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/queryUserById/{id}"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> User <span class="token function">query</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> userMapper<span class="token punctuation">.</span><span class="token function">queryUserById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/addUser"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        userMapper<span class="token punctuation">.</span><span class="token function">addUser</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span><span class="token string">"é©¬è€å¸ˆ"</span><span class="token punctuation">,</span><span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"add success"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/deleteUser/{id}"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">delete</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>        userMapper<span class="token punctuation">.</span><span class="token function">deleteUser</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"delete success"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/updateUser"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        userMapper<span class="token punctuation">.</span> <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"qwer"</span><span class="token punctuation">,</span><span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"update success"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>åˆ°æ­¤ä¸ºæ­¢ï¼ŒMyBatisæ•´åˆå®Œæ¯•ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¾®æœåŠ¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•´åˆjdbcï¼ŒDruid</title>
      <link href="2020/07/25/springboot-04/"/>
      <url>2020/07/25/springboot-04/</url>
      
        <content type="html"><![CDATA[<p>å¯¹äºæ•°æ®è®¿é—®å±‚ï¼Œæ— è®ºæ˜¯SQLè¿˜æ˜¯NOSQLï¼ŒSpringbootåº•å±‚éƒ½æ˜¯é‡‡ç”¨Spring Dataçš„æ–¹å¼è¿›è¡Œç»Ÿä¸€å¤„ç†ã€‚</p><h2 id="æ•´åˆjdbc"><a href="#æ•´åˆjdbc" class="headerlink" title="æ•´åˆjdbc"></a>æ•´åˆjdbc</h2><h3 id="1ã€æ–°å»ºé¡¹ç›®å¼•å…¥webæ¨¡å—å’Œè¿æ¥mysqlå¿…é¡»çš„æ¨¡å—ï¼ŒJDBC-APIï¼ŒMySQL-Driver"><a href="#1ã€æ–°å»ºé¡¹ç›®å¼•å…¥webæ¨¡å—å’Œè¿æ¥mysqlå¿…é¡»çš„æ¨¡å—ï¼ŒJDBC-APIï¼ŒMySQL-Driver" class="headerlink" title="1ã€æ–°å»ºé¡¹ç›®å¼•å…¥webæ¨¡å—å’Œè¿æ¥mysqlå¿…é¡»çš„æ¨¡å—ï¼ŒJDBC APIï¼ŒMySQL Driver"></a>1ã€æ–°å»ºé¡¹ç›®å¼•å…¥webæ¨¡å—å’Œè¿æ¥mysqlå¿…é¡»çš„æ¨¡å—ï¼ŒJDBC APIï¼ŒMySQL Driver</h3><p><img src="/2020/07/25/springboot-04/1.png" alt></p><h3 id="2ã€é¡¹ç›®å»ºç«‹å®Œæˆåï¼Œå‘ç°å·²ç»æ›¿æˆ‘ä»¬å¯¼å…¥å“åº”çš„å¯åŠ¨å™¨"><a href="#2ã€é¡¹ç›®å»ºç«‹å®Œæˆåï¼Œå‘ç°å·²ç»æ›¿æˆ‘ä»¬å¯¼å…¥å“åº”çš„å¯åŠ¨å™¨" class="headerlink" title="2ã€é¡¹ç›®å»ºç«‹å®Œæˆåï¼Œå‘ç°å·²ç»æ›¿æˆ‘ä»¬å¯¼å…¥å“åº”çš„å¯åŠ¨å™¨"></a>2ã€é¡¹ç›®å»ºç«‹å®Œæˆåï¼Œå‘ç°å·²ç»æ›¿æˆ‘ä»¬å¯¼å…¥å“åº”çš„å¯åŠ¨å™¨</h3><pre class=" language-xml"><code class="language-xml"> <span class="token comment" spellcheck="true">&lt;!--web--></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--jdbc--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--mysql--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><h3 id="3ã€ç¼–å†™yamlé…ç½®æ–‡ä»¶è¿æ¥æ•°æ®åº“"><a href="#3ã€ç¼–å†™yamlé…ç½®æ–‡ä»¶è¿æ¥æ•°æ®åº“" class="headerlink" title="3ã€ç¼–å†™yamlé…ç½®æ–‡ä»¶è¿æ¥æ•°æ®åº“"></a>3ã€ç¼–å†™yamlé…ç½®æ–‡ä»¶è¿æ¥æ•°æ®åº“</h3><pre class=" language-yml"><code class="language-yml">spring:  datasource:    username: root    password: 2824199842    url: jdbc:mysql://localhost:3306/mybatis?serverTimezone=Asia/Shanghai    driver-class-name: com.mysql.cj.jdbc.Driver</code></pre><h3 id="åœ¨æµ‹è¯•ç±»ä¸­æµ‹è¯•è¿æ¥æ˜¯å¦æˆåŠŸ"><a href="#åœ¨æµ‹è¯•ç±»ä¸­æµ‹è¯•è¿æ¥æ˜¯å¦æˆåŠŸ" class="headerlink" title="åœ¨æµ‹è¯•ç±»ä¸­æµ‹è¯•è¿æ¥æ˜¯å¦æˆåŠŸ"></a>åœ¨æµ‹è¯•ç±»ä¸­æµ‹è¯•è¿æ¥æ˜¯å¦æˆåŠŸ</h3><p>4ã€é…ç½®å®Œè¿™ä¸€äº›ä¸œè¥¿åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥å»ä½¿ç”¨äº†ï¼Œå› ä¸ºSpringBootå·²ç»é»˜è®¤å¸®æˆ‘ä»¬è¿›è¡Œäº†è‡ªåŠ¨é…ç½®</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">class</span> <span class="token class-name">Springboot04DataApplicationTests</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    DataSource dataSource<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> SQLException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// æŸ¥çœ‹é»˜è®¤æ•°æ®æº æ®è¯´æ˜¯æœ€å¿«çš„æ•°æ®åº“è¿æ¥æ±  HikariDataSource</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è·å–æ•°æ®åº“è¿æ¥</span>        Connection connection <span class="token operator">=</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å…³é—­è¿æ¥</span>        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="5ã€ç¼–å†™ä¸€ä¸ªControllerï¼Œæ³¨å…¥-jdbcTemplateï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•è¿›è¡Œè®¿é—®æµ‹è¯•ï¼›"><a href="#5ã€ç¼–å†™ä¸€ä¸ªControllerï¼Œæ³¨å…¥-jdbcTemplateï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•è¿›è¡Œè®¿é—®æµ‹è¯•ï¼›" class="headerlink" title="5ã€ç¼–å†™ä¸€ä¸ªControllerï¼Œæ³¨å…¥ jdbcTemplateï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•è¿›è¡Œè®¿é—®æµ‹è¯•ï¼›"></a>5ã€ç¼–å†™ä¸€ä¸ªControllerï¼Œæ³¨å…¥ jdbcTemplateï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•è¿›è¡Œè®¿é—®æµ‹è¯•ï¼›</h3><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@RestController</span> <span class="token comment" spellcheck="true">// è¿”å›jsonå¯¹è±¡ç»™æµè§ˆå™¨</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCController</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * springbootå¯¹åŸç”Ÿjdbcåšäº†è½»é‡çº§çš„å°è£…     * å¹¶ä¸”é€šè¿‡JdbcTemplateç±»æä¾›äº†å¯¹æ•°æ®åº“çš„crudæ“ä½œ     *     * executeæ–¹æ³•ï¼šå¯ä»¥ç”¨äºæ‰§è¡Œä»»ä½•SQLè¯­å¥ï¼Œä¸€èˆ¬ç”¨äºæ‰§è¡ŒDDLè¯­å¥ï¼›     * updateæ–¹æ³•åŠbatchUpdateæ–¹æ³•ï¼šupdateæ–¹æ³•ç”¨äºæ‰§è¡Œæ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤ç­‰è¯­å¥ï¼›     * batchUpdateæ–¹æ³•ç”¨äºæ‰§è¡Œæ‰¹å¤„ç†ç›¸å…³è¯­å¥ï¼›     * queryæ–¹æ³•åŠqueryForXXXæ–¹æ³•ï¼šç”¨äºæ‰§è¡ŒæŸ¥è¯¢ç›¸å…³è¯­å¥ï¼›     * callæ–¹æ³•ï¼šç”¨äºæ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ã€å‡½æ•°ç›¸å…³è¯­å¥      */</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> JdbcTemplate jdbcTemplate<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// æŸ¥è¯¢æ•°æ®åº“ä¸­å‘˜å·¥è¡¨çš„æ‰€æœ‰è®°å½•</span>    <span class="token comment" spellcheck="true">// æ²¡æœ‰å®ä½“ç±»ï¼Œä»æ•°æ®åº“æŸ¥è¯¢åˆ°çš„æ•°æ®æ€ä¹ˆå°è£…ï¼Ÿ ä½¿ç”¨ä¸‡èƒ½çš„Map!</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"listAllUser"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Object<span class="token operator">>></span> <span class="token function">listAllUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åŸç”Ÿjdbcæ“ä½œ</span>        String sql <span class="token operator">=</span> <span class="token string">"select * from user"</span><span class="token punctuation">;</span>        List<span class="token operator">&lt;</span>Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">>></span> allUser <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">queryForList</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> allUser<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/addUser"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">addUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        String sql <span class="token operator">=</span> <span class="token string">"insert into user(name,pwd)value('wd1','123456')"</span><span class="token punctuation">;</span>        jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"addOK"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/deleteUser/{id}"</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//@PathVariableæ¥æ”¶è·¯å¾„ä¸­å ä½ç¬¦çš„å€¼</span>    <span class="token keyword">public</span> String <span class="token function">deleteUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>        String sql <span class="token operator">=</span> <span class="token string">"delete from user where id=?"</span><span class="token punctuation">;</span>        jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"deleteOK"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/updateUser/{id}"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>        String sql <span class="token operator">=</span> <span class="token string">"update user set name=?,pwd=? where id="</span><span class="token operator">+</span>id<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å°è£…</span>        Object<span class="token punctuation">[</span><span class="token punctuation">]</span> objects <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        objects<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"å¼ ä¼Ÿ"</span><span class="token punctuation">;</span>        objects<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"666666"</span><span class="token punctuation">;</span>        jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>objects<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"updateOK"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>è‡³æ­¤ï¼Œä½¿ç”¨åŸç”Ÿçš„jdbcå®Œæˆäº†åŸºæœ¬çš„crudæ“ä½œï¼Œå› ä¸ºspringbootå¯¹jdbcè¿›è¡Œäº†è½»é‡çº§çš„å°è£…ï¼Œåœ¨ä½¿ç”¨ä¸Šä¹Ÿå¹¶ä¸æ˜¯å¾ˆç¹çã€‚</p><h2 id="æ•´åˆDruid"><a href="#æ•´åˆDruid" class="headerlink" title="æ•´åˆDruid"></a>æ•´åˆDruid</h2><h3 id="1ã€æ·»åŠ Druidä¾èµ–"><a href="#1ã€æ·»åŠ Druidä¾èµ–" class="headerlink" title="1ã€æ·»åŠ Druidä¾èµ–"></a>1ã€æ·»åŠ Druidä¾èµ–</h3><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--druid--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.1.23<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><h3 id="2ã€åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šæ•°æ®æº"><a href="#2ã€åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šæ•°æ®æº" class="headerlink" title="2ã€åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šæ•°æ®æº"></a>2ã€åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šæ•°æ®æº</h3><pre class=" language-yml"><code class="language-yml">spring:  datasource:    username: root    password: 2824199842    url: jdbc:mysql://localhost:3306/mybatis?serverTimezone=Asia/Shanghai    driver-class-name: com.mysql.cj.jdbc.Driver    type: com.alibaba.druid.pool.DruidDataSource # è‡ªå®šä¹‰æ•°æ®æº</code></pre><h3 id="3ã€æµ‹è¯•å¹¶æŸ¥çœ‹æ•°æ®æº"><a href="#3ã€æµ‹è¯•å¹¶æŸ¥çœ‹æ•°æ®æº" class="headerlink" title="3ã€æµ‹è¯•å¹¶æŸ¥çœ‹æ•°æ®æº"></a>3ã€æµ‹è¯•å¹¶æŸ¥çœ‹æ•°æ®æº</h3><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">class</span> <span class="token class-name">Springboot04DataApplicationTests</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    DataSource dataSource<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> SQLException <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//class com.alibaba.druid.pool.DruidDataSource</span>        <span class="token comment" spellcheck="true">// è·å–æ•°æ®åº“è¿æ¥</span>        Connection connection <span class="token operator">=</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å…³é—­è¿æ¥</span>        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="4ã€è·å–è¿æ¥æˆåŠŸåï¼Œå¯ä»¥è®¾ç½®æ•°æ®æºè¿æ¥åˆå§‹åŒ–å¤§å°ã€æœ€å¤§è¿æ¥æ•°ã€ç­‰å¾…æ—¶é—´ã€æœ€å°è¿æ¥æ•°ç­‰è®¾ç½®é¡¹"><a href="#4ã€è·å–è¿æ¥æˆåŠŸåï¼Œå¯ä»¥è®¾ç½®æ•°æ®æºè¿æ¥åˆå§‹åŒ–å¤§å°ã€æœ€å¤§è¿æ¥æ•°ã€ç­‰å¾…æ—¶é—´ã€æœ€å°è¿æ¥æ•°ç­‰è®¾ç½®é¡¹" class="headerlink" title="4ã€è·å–è¿æ¥æˆåŠŸåï¼Œå¯ä»¥è®¾ç½®æ•°æ®æºè¿æ¥åˆå§‹åŒ–å¤§å°ã€æœ€å¤§è¿æ¥æ•°ã€ç­‰å¾…æ—¶é—´ã€æœ€å°è¿æ¥æ•°ç­‰è®¾ç½®é¡¹"></a>4ã€è·å–è¿æ¥æˆåŠŸåï¼Œå¯ä»¥è®¾ç½®æ•°æ®æºè¿æ¥åˆå§‹åŒ–å¤§å°ã€æœ€å¤§è¿æ¥æ•°ã€ç­‰å¾…æ—¶é—´ã€æœ€å°è¿æ¥æ•°ç­‰è®¾ç½®é¡¹</h3><pre class=" language-yml"><code class="language-yml">spring:  datasource:    username: root    password: 2824199842    url: jdbc:mysql://localhost:3306/mybatis?serverTimezone=Asia/Shanghai    driver-class-name: com.mysql.cj.jdbc.Driver    type: com.alibaba.druid.pool.DruidDataSource # è‡ªå®šä¹‰æ•°æ®æº    #Spring Boot é»˜è®¤æ˜¯ä¸æ³¨å…¥è¿™äº›å±æ€§å€¼çš„ï¼Œéœ€è¦è‡ªå·±ç»‘å®š    #druid æ•°æ®æºä¸“æœ‰é…ç½®    initialSize: 5    minIdle: 5    maxActive: 20    maxWait: 60000    timeBetweenEvictionRunsMillis: 60000    minEvictableIdleTimeMillis: 300000    validationQuery: SELECT 1 FROM DUAL    testWhileIdle: true    testOnBorrow: false    testOnReturn: false    poolPreparedStatements: true    #é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„filtersï¼Œstat:ç›‘æ§ç»Ÿè®¡ã€log4jï¼šæ—¥å¿—è®°å½•ã€wallï¼šé˜²å¾¡sqlæ³¨å…¥    #éœ€è¦å¯¼å…¥ log4j ä¾èµ–    filters: stat,wall,log4j    maxPoolPreparedStatementPerConnectionSize: 20    useGlobalDataSourceStat: true    connectionProperties: druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500</code></pre><h3 id="5ã€å¯¼å…¥log4jä¾èµ–"><a href="#5ã€å¯¼å…¥log4jä¾èµ–" class="headerlink" title="5ã€å¯¼å…¥log4jä¾èµ–"></a>5ã€å¯¼å…¥log4jä¾èµ–</h3><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--log4j --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.2.17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><h3 id="6ã€åˆ›å»ºDruidConfigç±»ï¼Œç”¨äºæ‹“å±•é…ç½®druid"><a href="#6ã€åˆ›å»ºDruidConfigç±»ï¼Œç”¨äºæ‹“å±•é…ç½®druid" class="headerlink" title="6ã€åˆ›å»ºDruidConfigç±»ï¼Œç”¨äºæ‹“å±•é…ç½®druid"></a>6ã€åˆ›å»ºDruidConfigç±»ï¼Œç”¨äºæ‹“å±•é…ç½®druid</h3><p>å°†æ•°æ®æºçš„é…ç½®æ–‡ä»¶ç»‘å®šåˆ°å®¹å™¨ä¸­ï¼Œæ— éœ€springbootå†åˆ›å»ºå®¹å™¨</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DruidConfig</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     *å°†è‡ªå®šä¹‰çš„Druidæ•°æ®æºæ·»åŠ åˆ°å®¹å™¨ä¸­ï¼Œä¸å†è®©Spring Bootè‡ªåŠ¨åˆ›å»º     *ç»‘å®šå…¨å±€é…ç½®æ–‡ä»¶ä¸­çš„druidæ•°æ®æºå±æ€§åˆ°DruidDataSourceä»è€Œè®©å®ƒä»¬ç”Ÿæ•ˆ     * @return     */</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"spring.datasource"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> DruidDataSource <span class="token function">druidDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DruidDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>é…ç½®åå°ç›‘æ§åŠŸèƒ½ï¼š<br>Druid æ•°æ®æºå…·æœ‰ç›‘æ§çš„åŠŸèƒ½ï¼Œå¹¶æä¾›äº†ä¸€ä¸ª web ç•Œé¢æ–¹ä¾¿ç”¨æˆ·æŸ¥çœ‹ï¼Œç±»ä¼¼å®‰è£…è·¯ç”±å™¨ æ—¶ï¼Œäººå®¶ä¹Ÿæä¾›äº†ä¸€ä¸ªé»˜è®¤çš„ web é¡µé¢ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Bean</span> <span class="token comment" spellcheck="true">// æ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼Œå°±ç›¸å½“äºweb.xmlæ–‡ä»¶</span><span class="token keyword">public</span> ServletRegistrationBean <span class="token function">statViewServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ServletRegistrationBean<span class="token operator">&lt;</span>StatViewServlet<span class="token operator">></span> bean <span class="token operator">=</span>         <span class="token keyword">new</span> <span class="token class-name">ServletRegistrationBean</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StatViewServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"/druid/*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// é…ç½®åå°ç™»å½•åå’Œå¯†ç </span>    Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> String<span class="token operator">></span> initParameters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span>String<span class="token punctuation">,</span> String<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å¢åŠ é…ç½®</span>    initParameters<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"loginUsername"</span><span class="token punctuation">,</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// loginUsername loginPasswordæ˜¯å›ºå®šçš„</span>    initParameters<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"loginPassword"</span><span class="token punctuation">,</span><span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è®¿é—®æƒé™</span>    initParameters<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"allow"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è®¾ç½®åˆå§‹åŒ–å‚æ•°</span>    bean<span class="token punctuation">.</span><span class="token function">setInitParameters</span><span class="token punctuation">(</span>initParameters<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> bean<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>è®¿é—®<a href="http://localhost:8080/druid/" target="_blank" rel="noopener">http://localhost:8080/druid/</a><br><img src="/2020/07/25/springboot-04/2.png" alt></p><p>ç™»å½•æˆåŠŸå<br><img src="/2020/07/25/springboot-04/3.png" alt></p><p>é…ç½®è¿‡æ»¤å™¨</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> FilterRegistrationBean <span class="token function">webStatFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    FilterRegistrationBean bean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FilterRegistrationBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bean<span class="token punctuation">.</span><span class="token function">setFilter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">WebStatFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è®¾ç½®è¿‡æ»¤è¯·æ±‚</span>    HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> String<span class="token operator">></span> initParameters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    initParameters<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"exclusion"</span><span class="token punctuation">,</span><span class="token string">"*.js,*.css,/druid/*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è®¾ç½®ä¸è¿›è¡Œè¿‡æ»¤çš„èµ„æº</span>    bean<span class="token punctuation">.</span><span class="token function">setInitParameters</span><span class="token punctuation">(</span>initParameters<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> bean<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å¾®æœåŠ¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾ä¹¦Crudé¡¹ç›®</title>
      <link href="2020/07/15/ssm/"/>
      <url>2020/07/15/ssm/</url>
      
        <content type="html"><![CDATA[<p>æ­¤é¡¹ç›®ç”¨äºå›é¡¾ssmæ•´åˆçš„è¿‡ç¨‹ï¼ŒåŠ æ·±è‡ªå·±å¯¹ssmä¸‰å¤§æ¡†æ¶çš„ç†è§£ä»¥åŠæé«˜ä½¿ç”¨æ¡†æ¶çš„èƒ½åŠ›ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å¯¹å‰ç«¯ï¼Œwebï¼Œmysqlç­‰çŸ¥è¯†çš„å¤ä¹ ã€‚</p><h1 id="ä¸€ã€è®¾è®¡æ•°æ®åº“"><a href="#ä¸€ã€è®¾è®¡æ•°æ®åº“" class="headerlink" title="ä¸€ã€è®¾è®¡æ•°æ®åº“"></a>ä¸€ã€è®¾è®¡æ•°æ®åº“</h1><p>åˆ›å»ºä¸€ä¸ªåä¸ºssmçš„æ•°æ®åº“ï¼Œç”±äºåªæ˜¯ä¸€ä¸ªå›¾ä¹¦çš„crudé¡¹ç›®ï¼Œè¿™é‡Œåªåˆ›å»ºä¸€ä¸ªbooksè¡¨</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> ssm<span class="token punctuation">;</span><span class="token keyword">USE</span> ssm<span class="token punctuation">;</span><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> books <span class="token punctuation">;</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> books<span class="token punctuation">(</span>id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NUll</span><span class="token punctuation">,</span>counts <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>details <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> books<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>counts<span class="token punctuation">,</span>details<span class="token punctuation">)</span><span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'JavaSE'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">'javaä»å…¥é—¨åˆ°ç²¾é€š'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'MySQL'</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token string">'MySQLå…¥é—¨'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'JavaWeb'</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token string">'ä½¿ç”¨javaç¼–å†™ç½‘ç«™'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">'JavaEE'</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token string">'JavaWevä¼ä¸šçº§å¼€å‘è§£å†³æ–¹æ¡ˆ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h1 id="äºŒã€é¡¹ç›®åŸºæœ¬ç¯å¢ƒæ­å»º"><a href="#äºŒã€é¡¹ç›®åŸºæœ¬ç¯å¢ƒæ­å»º" class="headerlink" title="äºŒã€é¡¹ç›®åŸºæœ¬ç¯å¢ƒæ­å»º"></a>äºŒã€é¡¹ç›®åŸºæœ¬ç¯å¢ƒæ­å»º</h1><p>1ã€ä½¿ç”¨Mavenåˆ›å»ºé¡¹ç›® SSMã€‚(æ³¨æ„ï¼šè¿™é‡Œå¹¶æ²¡æœ‰ä½¿ç”¨æ¨¡æ¿åˆ›å»ºï¼‰<br>2ã€å¯¼å…¥é¡¹ç›®éœ€è¦çš„ä¾èµ–</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--ä¾èµ– junit,æ•°æ®åº“è¿æ¥é©±åŠ¨,æ•°æ®åº“è¿æ¥æ± ,servlet,jsp,springmvc,spring-jdbc,mybatis,mybatis-spring--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--Junit--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>4.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--æ•°æ®åº“é©±åŠ¨--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>8.0.19<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- æ•°æ®åº“è¿æ¥æ±  --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.1.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--Servlet - JSP --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.servlet.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jsp-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.2.1-b03<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jstl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--Spring--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-webmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--Mybatis--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.5.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-spring<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.0.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span></code></pre><p>3ã€Mavenèµ„æºè¿‡æ»¤è®¾ç½®</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--é™æ€èµ„æºå¯¼å‡º--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">></span></span>src/main/java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">></span></span>**/*.properties<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">></span></span>**/*.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filtering</span><span class="token punctuation">></span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filtering</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">></span></span>src/main/resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">></span></span>**/*.properties<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">></span></span>**/*.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filtering</span><span class="token punctuation">></span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filtering</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">></span></span></code></pre><p>4ã€å»ºç«‹é¡¹ç›®åŒ…ç»“æ„å’Œé…ç½®æ¡†æ¶<br><img src="/2020/07/15/ssm/1.png" alt></p><p>mybatis-config.xml</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span><span class="token doctype">&lt;!DOCTYPE configuration        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-config.dtd"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span></code></pre><p>application.xml</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>      <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>      <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans       http://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span></code></pre><p>jdbc.properties</p><pre class=" language-properties"><code class="language-properties"><span class="token attr-name">jdbc.url</span><span class="token punctuation">=</span><span class="token attr-value">jdbc:mysql://localhost:3306/ssm?serverTimezone=Asia/Shanghai</span><span class="token attr-name">jdbc.username</span><span class="token punctuation">=</span><span class="token attr-value">root</span><span class="token attr-name">jdbc.password</span><span class="token punctuation">=</span><span class="token attr-value">2824199842</span><span class="token attr-name">jdbc.maxActive</span><span class="token punctuation">=</span><span class="token attr-value">20</span></code></pre><h1 id="ä¸‰ã€MyBatiså±‚ç¼–å†™"><a href="#ä¸‰ã€MyBatiså±‚ç¼–å†™" class="headerlink" title="ä¸‰ã€MyBatiså±‚ç¼–å†™"></a>ä¸‰ã€MyBatiså±‚ç¼–å†™</h1><p>1ã€åˆ›å»ºå®ä½“ç±»Book<br>è¿™é‡Œä½¿ç”¨Lombokï¼ˆå·æ‡’~ï¼‰ï¼Œéœ€è¦å¯¼å…¥ä¾èµ–ï¼šï¼ˆæ³¨æ„ï¼šIDEAé¦–æ¬¡ä½¿ç”¨æ—¶éœ€è¦å®‰è£…æ’ä»¶ setting-&gt;plugins-&gt;lombokï¼‰</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--Lombok--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.18.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Data</span>  <span class="token comment" spellcheck="true">// éšå¼å¯¼å…¥æ‰€æœ‰get set toString æ— å‚æ„é€ ç­‰æ–¹æ³•</span><span class="token annotation punctuation">@AllArgsConstructor</span> <span class="token comment" spellcheck="true">// æœ‰å‚æ„é€ ï¼Œæ­¤æ—¶æ— å‚æ„é€ æ²¡äº†ï¼Œéœ€è¦åŠ ä¸ŠNoArgsConstructor</span><span class="token annotation punctuation">@NoArgsConstructor</span> <span class="token comment" spellcheck="true">// æ— å‚æ„é€ </span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> Integer id<span class="token punctuation">;</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> Integer counts<span class="token punctuation">;</span>    <span class="token keyword">private</span> String details<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>2ã€ç¼–å†™BookMapperæ¥å£</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BookMapper</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * å¢åŠ å›¾ä¹¦     * @return     */</span>    <span class="token keyword">int</span> <span class="token function">addBook</span><span class="token punctuation">(</span>Book book<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * åˆ é™¤å›¾ä¹¦     * @param id     * @return     */</span>    <span class="token keyword">int</span> <span class="token function">deleteBookById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"bookId"</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * æ›´æ–°å›¾ä¹¦     * @param book     * @return     */</span>    <span class="token keyword">int</span> <span class="token function">updateBook</span><span class="token punctuation">(</span>Book book<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * æŸ¥è¯¢å›¾ä¹¦     * @param id     * @return     */</span>    Book <span class="token function">queryBookById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"bookId"</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * æŸ¥è¯¢æ‰€æœ‰å›¾ä¹¦     * @return     */</span>    List<span class="token operator">&lt;</span>Book<span class="token operator">></span> <span class="token function">queryAllBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>3ã€ç¼–å†™BookMapperæ¥å£çš„sqlæ˜ å°„æ–‡ä»¶BookMapper.xml</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8" ?></span><span class="token doctype">&lt;!DOCTYPE mapper        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" ></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.dao.BookMapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>addBook<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.bean.Book<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        insert into books(name,counts,details) values(#{name},#{counts},#{details})    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>deleteBookById<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>int<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        delete from books where id=#{bookId}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>delete</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>updateBook<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.bean.Book<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        update books set name=#{name},counts=#{counts},details=#{details}        where id=#{id}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>queryBookById<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>int<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.bean.Book<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select * from books where id=#{bookId}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>queryAllBook<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.bean.Book<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select * from books    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">></span></span></code></pre><p>4ã€åœ¨mybtisé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œsqlæ˜ å°„æ–‡ä»¶</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span><span class="token doctype">&lt;!DOCTYPE configuration        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-config.dtd"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>     <span class="token comment" spellcheck="true">&lt;!--  æ‰“å°æ—¥å¿—--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>logImpl<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>STDOUT_LOGGING<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--  æ³¨å†Œæ˜ å°„æ–‡ä»¶  --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.dao<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span></code></pre><p>è‡³æ­¤ï¼ŒDaoå±‚ç¼–å†™å®Œæˆï¼Œä¸‹ä¸€æ­¥ç¼–å†™Serviceå±‚</p><p>5ã€ç¼–å†™Serviceå±‚çš„æ¥å£å’Œå®ç°ç±»</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BookService</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * å¢åŠ å›¾ä¹¦     * @return     */</span>    <span class="token keyword">int</span> <span class="token function">addBook</span><span class="token punctuation">(</span>Book book<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * åˆ é™¤å›¾ä¹¦     * @param id     * @return     */</span>    <span class="token keyword">int</span> <span class="token function">deleteBookById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * æ›´æ–°å›¾ä¹¦     * @param book     * @return     */</span>    <span class="token keyword">int</span> <span class="token function">updateBook</span><span class="token punctuation">(</span>Book book<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * æŸ¥è¯¢å›¾ä¹¦     * @param id     * @return     */</span>    Book <span class="token function">queryBookById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * æŸ¥è¯¢æ‰€æœ‰å›¾ä¹¦     * @return     */</span>    List<span class="token operator">&lt;</span>Book<span class="token operator">></span> <span class="token function">queryAllBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">BookService</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> BookMapper bookMapper<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">addBook</span><span class="token punctuation">(</span>Book book<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> bookMapper<span class="token punctuation">.</span><span class="token function">addBook</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">deleteBookById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> bookMapper<span class="token punctuation">.</span><span class="token function">deleteBookById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">updateBook</span><span class="token punctuation">(</span>Book book<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> bookMapper<span class="token punctuation">.</span><span class="token function">updateBook</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Book <span class="token function">queryBookById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> bookMapper<span class="token punctuation">.</span><span class="token function">queryBookById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Book<span class="token operator">></span> <span class="token function">queryAllBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> bookMapper<span class="token punctuation">.</span><span class="token function">queryAllBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h1 id="å››ã€Springå±‚æ•´åˆDao-Serviceå±‚"><a href="#å››ã€Springå±‚æ•´åˆDao-Serviceå±‚" class="headerlink" title="å››ã€Springå±‚æ•´åˆDao,Serviceå±‚"></a>å››ã€Springå±‚æ•´åˆDao,Serviceå±‚</h1><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/context<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>tx</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/tx<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans       http://www.springframework.org/schema/beans/spring-beans.xsd       http://www.springframework.org/schema/context       https://www.springframework.org/schema/context/spring-context.xsd       http://www.springframework.org/schema/tx       http://www.springframework.org/schema/tx/spring-tx.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--  å…³è”æ•°æ®åº“é…ç½®æ–‡ä»¶--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placeholder</span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>classpath:jdbc.properties<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!--å£°æ˜æ•°æ®æº  ç”¨äºè¿æ¥æ•°æ®åº“--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myDataSource<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">"</span></span>          <span class="token attr-name">init-method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>init<span class="token punctuation">"</span></span> <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>close<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${jdbc.url}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${jdbc.username}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${jdbc.password}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>maxActive<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${jdbc.maxActive}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--å£°æ˜mybatisä¸­çš„SqlSessionFactoryBean ç”¨äºåˆ›å»ºSqlSessionFactoryå¯¹è±¡    --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sqlSessionFactory<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.mybatis.spring.SqlSessionFactoryBean<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- setæ³¨å…¥ï¼ŒæŠŠæ•°æ®åº“è¿æ¥æ± èµ‹å€¼ç»™dateSourceå±æ€§--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myDataSource<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment" spellcheck="true">&lt;!-- mybatisä¸»é…ç½®æ–‡ä»¶çš„ä½ç½®--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>configLocation<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>classpath:mybatis-config.xml<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- å£°æ˜Daoç±»         MapperScannerConfigurer:åœ¨å†…éƒ¨è°ƒç”¨getMapper()ç”Ÿæˆæ¯ä¸€ä¸ªæ¥å£çš„daoä»£ç†å¯¹è±¡         åˆ›å»ºå¥½çš„daoå¯¹è±¡æ”¾åœ¨springå®¹å™¨ä¸­ï¼Œé»˜è®¤åç§°ä¸º æ¥å£åé¦–å­—æ¯å°å†™--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.mybatis.spring.mapper.MapperScannerConfigurer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!--æ³¨å…¥sqlSessionFactory--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sqlSessionFactoryBeanName<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sqlSessionFactory<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment" spellcheck="true">&lt;!--è¦æ‰«æçš„daoåŒ…--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>basePackage<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.dao<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--  å£°æ˜serviceçš„æ³¨è§£@Serviceæ‰€åœ¨çš„åŒ…åä½ç½®  --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.service<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!-- å£°æ˜äº‹åŠ¡ç®¡ç†å™¨   --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>transactionManager<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!--  è¿æ¥çš„æ•°æ®åº“ï¼ŒæŒ‡å®šæ•°æ®æº --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myDataSource<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- å¼€å¯äº‹åŠ¡æ³¨è§£é©±åŠ¨ å‘Šè¯‰springä½¿ç”¨æ³¨è§£ç®¡ç†äº‹åŠ¡ï¼Œåˆ›å»ºä»£ç†å¯¹è±¡         åœ¨éœ€è¦ä½¿ç”¨äº‹åŠ¡çš„æ–¹æ³•ä¸Šæ·»åŠ Transactionalæ³¨è§£--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>annotation-driven</span> <span class="token attr-name">transaction-manager</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>transactionManager<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span></code></pre><p>ç„¶åï¼Œéœ€è¦åœ¨Serviceå®ç°ç±»ä¸Šæ·»åŠ @Serviceæ³¨è§£</p><h1 id="äº”ã€SpringMVCå±‚çš„æ•´åˆ"><a href="#äº”ã€SpringMVCå±‚çš„æ•´åˆ" class="headerlink" title="äº”ã€SpringMVCå±‚çš„æ•´åˆ"></a>äº”ã€SpringMVCå±‚çš„æ•´åˆ</h1><p>1ã€æ·»åŠ webæ”¯æŒ<br>å³é”®é¡¹ç›®<br><img src="/2020/07/15/ssm/2.png" alt></p><p>å‹¾é€‰Web Application<br><img src="/2020/07/15/ssm/3.png" alt></p><p>é…ç½®web.xml</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://xmlns.jcp.org/xml/ns/javaee<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd<span class="token punctuation">"</span></span>         <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>4.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--DispatchServlet--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>springmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>org.springframework.web.servlet.DispatcherServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>classpath:springmvc.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>load-on-startup</span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>load-on-startup</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>springmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- æ³¨å†Œç›‘å¬å™¨  ç”¨äºåˆ›å»ºSpringå®¹å™¨   --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>classpath:application.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener-class</span><span class="token punctuation">></span></span>org.springframework.web.context.ContextLoaderListener<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener-class</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--ä¹±ç è¿‡æ»¤--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>encodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">></span></span>org.springframework.web.filter.CharacterEncodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>encoding<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>utf-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>encodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--Session æœ‰æ•ˆæ—¶é—´--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-config</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-timeout</span><span class="token punctuation">></span></span>15<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-timeout</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-config</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">></span></span></code></pre><p>åˆ›å»ºspringmvc.xmlå¹¶è¿›è¡Œé…ç½®</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/context<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>mvc</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/mvc<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans       http://www.springframework.org/schema/beans/spring-beans.xsd       http://www.springframework.org/schema/context       https://www.springframework.org/schema/context/spring-context.xsd       http://www.springframework.org/schema/mvc       https://www.springframework.org/schema/mvc/spring-mvc.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--æ³¨è§£é©±åŠ¨--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!--  å¤„ç†é™æ€èµ„æº--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>default-servlet-handler</span> <span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!--æ‰«æcontroller--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.controller<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!--å£°æ˜springmvcæ¡†æ¶ä¸­çš„è§†å›¾è§£æå™¨ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.springframework.web.servlet.view.InternalResourceViewResolver<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!--å‰ç¼€  è§†å›¾æ–‡ä»¶çš„è·¯å¾„--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>prefix<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/WEB-INF/view/<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment" spellcheck="true">&lt;!--åç¼€  è§†å›¾æ–‡ä»¶çš„æ‹“å±•å--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>suffix<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>.jsp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span></code></pre><p>åˆ°æ­¤ä¸ºæ­¢ï¼Œæ•´ä¸ªssmé¡¹ç›®çš„é…ç½®æ–‡ä»¶åŸºæœ¬ä¸Šé…ç½®å®Œæˆäº†ï¼Œssmé¡¹ç›®ä¸springbooté¡¹ç›®ç›¸æ¯”ï¼Œæœ€å¤§çš„ä¸åŒå°±æ˜¯è¿™ç§ç¹æ‚çš„é…ç½®ï¼Œä½†æ˜¯å­¦ä¹ ssmæ˜¯å¿…ä¸å¯å°‘çš„ï¼Œåªæœ‰è¿™æ ·æ‰èƒ½äº†è§£åˆ°æ•´ä¸ªJavawebå·¥ç¨‹çš„æ ¸å¿ƒã€‚<br>ä¸‹ä¸€æ­¥æ˜¯ç¼–å†™controllerå±‚ä»¥åŠä¸å‰ç«¯é¡µé¢çš„äº¤äº’ã€‚</p><h1 id="å…­ã€Controllerå±‚ä¸é¡µé¢ä¹‹é—´çš„äº¤äº’"><a href="#å…­ã€Controllerå±‚ä¸é¡µé¢ä¹‹é—´çš„äº¤äº’" class="headerlink" title="å…­ã€Controllerå±‚ä¸é¡µé¢ä¹‹é—´çš„äº¤äº’"></a>å…­ã€Controllerå±‚ä¸é¡µé¢ä¹‹é—´çš„äº¤äº’</h1><p>ç¼–å†™BookControllerç±»,æ·»åŠ crudæ–¹æ³•</p><h2 id="æ–¹æ³•ä¸€ï¼šæŸ¥è¯¢æ‰€æœ‰å›¾ä¹¦"><a href="#æ–¹æ³•ä¸€ï¼šæŸ¥è¯¢æ‰€æœ‰å›¾ä¹¦" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæŸ¥è¯¢æ‰€æœ‰å›¾ä¹¦"></a>æ–¹æ³•ä¸€ï¼šæŸ¥è¯¢æ‰€æœ‰å›¾ä¹¦</h2><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Controller</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/book"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookController</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// Controllerå±‚å°±æ˜¯è°ƒç”¨serviceå±‚çš„ä¸€äº›æ–¹æ³•ï¼Œå®Œæˆéœ€è¦çš„ä¸šåŠ¡</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> BookService bookService<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * æŸ¥è¯¢æ‰€æœ‰å›¾ä¹¦     * @return     */</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/allBooks"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">list</span><span class="token punctuation">(</span>Model model<span class="token punctuation">)</span><span class="token punctuation">{</span>        List<span class="token operator">&lt;</span>Book<span class="token operator">></span> books <span class="token operator">=</span> bookService<span class="token punctuation">.</span><span class="token function">queryAllBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"books"</span><span class="token punctuation">,</span>books<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"allBooks"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>ç¼–å†™é¦–é¡µï¼šindex.jsp</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">page</span> <span class="token attr-name">contentType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/html;charset<span class="token punctuation">=</span>UTF-8<span class="token punctuation">"</span></span> <span class="token attr-name">language</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>java<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>é¦–é¡µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style language-css">        <span class="token selector">h3</span><span class="token punctuation">{</span>            <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">2</span>px blueviolet solid<span class="token punctuation">;</span>            <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>            <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">200</span>px<span class="token punctuation">;</span>            <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">50</span>px<span class="token punctuation">;</span>            <span class="token property">background-color</span><span class="token punctuation">:</span> aqua<span class="token punctuation">;</span>            <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">20</span>px<span class="token punctuation">;</span>            <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">10</span>px<span class="token punctuation">;</span>            <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">200</span>px auto<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*å¤–è¾¹è·*/</span>            <span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token number">50</span>px<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*è¡Œé«˜ä¸é«˜åº¦ä¸€è‡´åˆ™å±…ä¸­*/</span>        <span class="token punctuation">}</span>        <span class="token selector">a</span><span class="token punctuation">{</span>            <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*å»æ‰é“¾æ¥çš„ä¸‹åˆ’çº¿*/</span>            <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>            <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">30</span>px<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${pageContext.request.contextPath}/book/allBooks<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æŸ¥è¯¢æ‰€æœ‰å›¾ä¹¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>ç¼–å†™å±•ç¤ºæ‰€æœ‰å›¾ä¹¦çš„é¡µé¢allBook.jsp</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">taglib</span> <span class="token attr-name">prefix</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>c<span class="token punctuation">"</span></span> <span class="token attr-name">uri</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://java.sun.com/jsp/jstl/core<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">page</span> <span class="token attr-name">contentType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/html;charset<span class="token punctuation">=</span>UTF-8<span class="token punctuation">"</span></span> <span class="token attr-name">language</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>java<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>ä¹¦ç±å±•ç¤ºé¡µé¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- å¼•å…¥ Bootstrap --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>row clearfix<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col-md-12 column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>page-header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span><span class="token punctuation">></span></span>ä¹¦ç±åˆ—è¡¨â€”â€”æ˜¾ç¤ºæ‰€æœ‰å›¾ä¹¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>row clearfix<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col-md-12 column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>table table-hover table-striped<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thead</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>ä¹¦ç±ç¼–å·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>ä¹¦ç±åç§°<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>ä¹¦ç±æ•°é‡<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>ä¹¦ç±è¯¦æƒ…<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thead</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--éå†ä»æ•°æ®åº“ä¸­æŸ¥åˆ°çš„å…¨éƒ¨å›¾ä¹¦--%</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>book<span class="token punctuation">"</span></span> <span class="token attr-name">items</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${books}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${book.id}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${book.name}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${book.counts}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${book.details}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>å¯åŠ¨Tomcatæµ‹è¯•ï¼š<br>ç”±äºæˆ‘ä½¿ç”¨mavenç›´æ¥åˆ›å»ºçš„é¡¹ç›®ï¼Œæ²¡æœ‰ä½¿ç”¨mavenä¸­çš„æ¨¡æ¿ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨å°†é¡¹ç›®ç›®å½•ä¸‹çš„åŒ…æ‰“åŒ…è‡³WEB-INFç›®å½•ä¸‹ï¼ŒTomcatæ‰èƒ½æ­£å¸¸å¯åŠ¨ï¼š<br><img src="/2020/07/15/ssm/4.png" alt></p><h2 id="æ–¹æ³•äºŒï¼šæ·»åŠ å›¾ä¹¦"><a href="#æ–¹æ³•äºŒï¼šæ·»åŠ å›¾ä¹¦" class="headerlink" title="æ–¹æ³•äºŒï¼šæ·»åŠ å›¾ä¹¦"></a>æ–¹æ³•äºŒï¼šæ·»åŠ å›¾ä¹¦</h2><p>1ã€é¦–å…ˆåœ¨å±•ç¤ºæ‰€æœ‰å›¾ä¹¦çš„é¡µé¢allBooks.jspæ·»åŠ ä¸€ä¸ªå‘èµ·è¯·æ±‚çš„é“¾æ¥</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col-md-12 column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span> pull-right<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--è·³åˆ°æ–°å¢å›¾ä¹¦é¡µé¢--%</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn btn-success<span class="token punctuation">"</span></span>           <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${pageContext.request.contextPath}/book/toAddBook<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ·»åŠ ä¹¦ç±<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><p>ç„¶ååœ¨BookConntrolleræ·»åŠ ä¸€ä¸ªè·³è½¬åˆ°æ·»åŠ é¡µé¢çš„æ–¹æ³•</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * è·³è½¬åˆ°æ·»åŠ å›¾ä¹¦é¡µé¢ * @return */</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/toAddBook"</span><span class="token punctuation">)</span><span class="token keyword">public</span> String <span class="token function">toAddBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token string">"addBook"</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>ç¼–å†™æ·»åŠ å›¾ä¹¦çš„é¡µé¢addBook.jspï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªè¡¨å•</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">page</span> <span class="token attr-name">contentType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/html;charset<span class="token punctuation">=</span>UTF-8<span class="token punctuation">"</span></span> <span class="token attr-name">language</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>java<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>æ·»åŠ å›¾ä¹¦é¡µé¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- å¼•å…¥ Bootstrap --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>row clearfix<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col-md-12 column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>page-header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span><span class="token punctuation">></span></span>æ·»åŠ å›¾ä¹¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${pageContext.request.contextPath}/book/addBook<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bkName<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¹¦ç±åç§°<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bkName<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bkCounts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¹¦ç±æ•°é‡<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>number<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bkCounts<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>counts<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bkDetails<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¹¦ç±è¯¦æƒ…<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bkDetails<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>details<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn btn-primary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ·»åŠ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>æœ€ååœ¨BookControllerä¸­ç¼–å†™æ·»åŠ å›¾ä¹¦çš„æ–¹æ³•</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * æ·»åŠ å›¾ä¹¦ * @param book * @return */</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/addBook"</span><span class="token punctuation">)</span><span class="token keyword">public</span> String <span class="token function">addBook</span><span class="token punctuation">(</span>Book book<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// System.out.println(book);</span>    bookService<span class="token punctuation">.</span><span class="token function">addBook</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// é‡å®šå‘åˆ°æŸ¥è¯¢æ‰€æœ‰å›¾ä¹¦çš„Controller</span>    <span class="token keyword">return</span> <span class="token string">"redirect:/book/allBooks"</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="æ–¹æ³•ä¸‰ï¼šä¿®æ”¹å›¾ä¹¦"><a href="#æ–¹æ³•ä¸‰ï¼šä¿®æ”¹å›¾ä¹¦" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šä¿®æ”¹å›¾ä¹¦"></a>æ–¹æ³•ä¸‰ï¼šä¿®æ”¹å›¾ä¹¦</h2><p>åœ¨å±•ç¤ºæ‰€æœ‰å›¾ä¹¦çš„é¡µé¢æ·»åŠ å‘èµ·è¯·æ±‚çš„é“¾æ¥ï¼š</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn btn-primary<span class="token punctuation">"</span></span>       <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${pageContext.request.contextPath}/book/toUpdateBook?id<span class="token punctuation">=</span>${book.id}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¿®æ”¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token entity" title="&nbsp;">&amp;nbsp;</span><span class="token entity" title="&nbsp;">&amp;nbsp;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn btn-danger<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>åˆ é™¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span></code></pre><p>åœ¨BookControllerä¸­æ·»åŠ è·³è½¬åˆ°ä¿®æ”¹é¡µé¢çš„æ–¹æ³•</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * è·³è½¬åˆ°ä¿®æ”¹é¡µé¢ * @return */</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/toUpdateBook"</span><span class="token punctuation">)</span><span class="token keyword">public</span> String <span class="token function">toUpdateBook</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">,</span>Model model<span class="token punctuation">)</span><span class="token punctuation">{</span>    Book book <span class="token operator">=</span> bookService<span class="token punctuation">.</span><span class="token function">queryBookById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"book"</span><span class="token punctuation">,</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"updateBook"</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>ç¼–å†™ä¿®æ”¹å›¾ä¹¦çš„é¡µé¢updateBook.jspï¼Œåˆæ˜¯ä¸€ä¸ªè¡¨å•</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">page</span> <span class="token attr-name">contentType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/html;charset<span class="token punctuation">=</span>UTF-8<span class="token punctuation">"</span></span> <span class="token attr-name">language</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>java<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>ä¿®æ”¹å›¾ä¹¦é¡µé¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- å¼•å…¥ Bootstrap --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>row clearfix<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col-md-12 column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>page-header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span><span class="token punctuation">></span></span>ä¿®æ”¹å›¾ä¹¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${pageContext.request.contextPath}/book/updateBook<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bkName<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¹¦ç±åç§°<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bkName<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${book.name}<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bkCounts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¹¦ç±æ•°é‡<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>number<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bkCounts<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>counts<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${book.counts}<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bkDetails<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¹¦ç±è¯¦æƒ…<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bkDetails<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>details<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${book.details}<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn btn-primary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¿®æ”¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>æœ€ååœ¨BookControllerä¸­ç¼–å†™ä¿®æ”¹å›¾ä¹¦çš„æ–¹æ³•</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * ä¿®æ”¹å›¾ä¹¦ * @param book * @return */</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/updateBook"</span><span class="token punctuation">)</span><span class="token keyword">public</span> String <span class="token function">updateBook</span><span class="token punctuation">(</span>Book book<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// System.out.println(book);</span>    bookService<span class="token punctuation">.</span><span class="token function">updateBook</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"redirect:/book/allBooks"</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>è¿™é‡Œæ›´æ–°ä¸äº†çš„åŸå› æ˜¯å› ä¸ºupdateBookä¸­çš„bookå¯¹è±¡çš„idå€¼ä¸ºç©ºï¼Œè€Œæ›´æ–°å›¾ä¹¦æ—¶éœ€è¦idä½œä¸ºå‚æ•°å»æŸ¥æ‰¾å“ªä¸€æœ¬å›¾ä¹¦è¦æ›´æ–°ã€‚è§£å†³æ–¹æ¡ˆæ˜¯åœ¨ä¿®æ”¹å›¾ä¹¦é¡µé¢çš„è¡¨å•ä¸­æ·»åŠ ä¸€ç»„éšè—åŸŸï¼Œå°†idå€¼ä¼ ç»™updateBook()æ–¹æ³•å³å¯</p><pre class=" language-html"><code class="language-html"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hidden<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${book.id}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>### æ–¹æ³•å››ï¼šåˆ é™¤å›¾ä¹¦</code></pre><p>åœ¨å±•ç¤ºæ‰€æœ‰å›¾ä¹¦çš„é¡µé¢æ·»åŠ å‘èµ·è¯·æ±‚çš„é“¾æ¥</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn btn-primary<span class="token punctuation">"</span></span>       <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${pageContext.request.contextPath}/book/toUpdateBook?id<span class="token punctuation">=</span>${book.id}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¿®æ”¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token entity" title="&nbsp;">&amp;nbsp;</span><span class="token entity" title="&nbsp;">&amp;nbsp;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn btn-danger<span class="token punctuation">"</span></span>       <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${pageContext.request.contextPath}/book/deleteBook?id<span class="token punctuation">=</span>${book.id}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>åˆ é™¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span></code></pre><h2 id="æ–¹æ³•å››ï¼šåˆ é™¤å›¾ä¹¦"><a href="#æ–¹æ³•å››ï¼šåˆ é™¤å›¾ä¹¦" class="headerlink" title="æ–¹æ³•å››ï¼šåˆ é™¤å›¾ä¹¦"></a>æ–¹æ³•å››ï¼šåˆ é™¤å›¾ä¹¦</h2><p>åœ¨BookControllerä¸­æ·»åŠ åˆ é™¤å›¾ä¹¦çš„æ–¹æ³•</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * åˆ é™¤å›¾ä¹¦ * @param id * @return */</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/deleteBook"</span><span class="token punctuation">)</span><span class="token keyword">public</span> String <span class="token function">deleteBook</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>    bookService<span class="token punctuation">.</span><span class="token function">deleteBookById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"redirect:/book/allBooks"</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="æ–¹æ³•äº”ï¼šæ¨¡ç³Šæœç´¢"><a href="#æ–¹æ³•äº”ï¼šæ¨¡ç³Šæœç´¢" class="headerlink" title="æ–¹æ³•äº”ï¼šæ¨¡ç³Šæœç´¢"></a>æ–¹æ³•äº”ï¼šæ¨¡ç³Šæœç´¢</h2><p>mapperå±‚ï¼š</p><pre class=" language-java"><code class="language-java"> <span class="token comment" spellcheck="true">/**     * æ ¹æ®ä¹¦åæ¨¡ç³Šæœç´¢     * @param name     * @return     */</span>    List<span class="token operator">&lt;</span>Book<span class="token operator">></span> <span class="token function">queryBookByName</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"bookName"</span><span class="token punctuation">)</span> String name<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>queryBookByName<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.bean.Book<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    select * from books where name like #{bookName}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre><p>serviceå±‚</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * é€šè¿‡nameæ¨¡ç³ŠæŸ¥è¯¢ä¹¦ç± * @param name * @return */</span>List<span class="token operator">&lt;</span>Book<span class="token operator">></span> <span class="token function">queryBookByName</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-java"><code class="language-java"> <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Book<span class="token operator">></span> <span class="token function">queryBookByName</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>String realName <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å»æ‰å‰åç«¯ç©ºæ ¼</span>      <span class="token keyword">return</span> bookMapper<span class="token punctuation">.</span><span class="token function">queryBookByName</span><span class="token punctuation">(</span><span class="token string">"%"</span><span class="token operator">+</span>realName<span class="token operator">+</span><span class="token string">"%"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span></code></pre><p>controllerå±‚</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * æ ¹æ®åç§°æ¨¡ç³ŠæŸ¥è¯¢ä¹¦ç± * @param bkName * @param model * @return */</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/queryBook"</span><span class="token punctuation">)</span><span class="token keyword">public</span> String <span class="token function">queryBook</span><span class="token punctuation">(</span>String bkName<span class="token punctuation">,</span>Model model<span class="token punctuation">)</span><span class="token punctuation">{</span>    List<span class="token operator">&lt;</span>Book<span class="token operator">></span> books <span class="token operator">=</span> bookService<span class="token punctuation">.</span><span class="token function">queryBookByName</span><span class="token punctuation">(</span>bkName<span class="token punctuation">)</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>books<span class="token punctuation">)</span><span class="token punctuation">;</span>    model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"books"</span><span class="token punctuation">,</span>books<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"allBooks"</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>å‰ç«¯é¡µé¢ï¼š</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${pageContext.request.contextPath}/book/queryBook<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col-xs-3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        &lt;input class="form-control" type="text" name="bkName" placeholder="è¯·è¾“å…¥è¦æŸ¥è¯¢çš„ä¹¦ç±åç§°"required>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn btn-primary<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>æŸ¥è¯¢<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></code></pre><h1 id="ä¸ƒã€é¡¹ç›®æ€»ä½“ç»“æ„"><a href="#ä¸ƒã€é¡¹ç›®æ€»ä½“ç»“æ„" class="headerlink" title="ä¸ƒã€é¡¹ç›®æ€»ä½“ç»“æ„"></a>ä¸ƒã€é¡¹ç›®æ€»ä½“ç»“æ„</h1><img src="/2020/07/15/ssm/5.png" style="zoom:80%;"><h1 id="å…«ã€æœ€ç»ˆæ•ˆæœ"><a href="#å…«ã€æœ€ç»ˆæ•ˆæœ" class="headerlink" title="å…«ã€æœ€ç»ˆæ•ˆæœ"></a>å…«ã€æœ€ç»ˆæ•ˆæœ</h1><p><img src="/2020/07/15/ssm/6.png" alt></p><h1 id="ä¹ã€æ€»ç»“"><a href="#ä¹ã€æ€»ç»“" class="headerlink" title="ä¹ã€æ€»ç»“"></a>ä¹ã€æ€»ç»“</h1><p>1ã€ssmæ•´åˆçš„æ€»ä½“æ€è·¯ï¼šä½¿ç”¨springå®¹å™¨å»ç®¡ç†Dao,Serviceå¯¹è±¡ï¼Œspringmvcå®¹å™¨ç®¡ç†Controllerå¯¹è±¡ï¼Œspringmvcå®¹å™¨æ˜¯springçš„å­å®¹å™¨ï¼Œspringmvcå®¹å™¨ä¸­çš„controllerå¯¹è±¡èƒ½è®¿é—®åˆ°springå®¹å™¨ä¸­çš„serviceå¯¹è±¡ã€‚</p><p>2ã€å¯¹cssçš„ä¸€äº›å±æ€§çš„è¿ç”¨è¿˜ä¸æ˜¯å¾ˆç†Ÿç»ƒ</p>]]></content>
      
      
      <categories>
          
          <category> å°é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
            <tag> Spring </tag>
            
            <tag> SpringMVC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot Webå¼€å‘</title>
      <link href="2020/07/11/springboot-03/"/>
      <url>2020/07/11/springboot-03/</url>
      
        <content type="html"><![CDATA[<h2 id="é™æ€èµ„æºçš„å¯¼å…¥"><a href="#é™æ€èµ„æºçš„å¯¼å…¥" class="headerlink" title="é™æ€èµ„æºçš„å¯¼å…¥"></a>é™æ€èµ„æºçš„å¯¼å…¥</h2><p>resourcesç›®å½•ä¸‹å­˜æ”¾é™æ€èµ„æºã€‚<br><img src="/2020/07/11/springboot-03/1.png" alt></p><h2 id="æ¨¡æ¿å¼•æ“Thymeleaf"><a href="#æ¨¡æ¿å¼•æ“Thymeleaf" class="headerlink" title="æ¨¡æ¿å¼•æ“Thymeleaf"></a>æ¨¡æ¿å¼•æ“Thymeleaf</h2><p>å°±æ˜¯å°†åç«¯çš„æ•°æ®æ¸²æŸ“åˆ°å‰ç«¯çš„é¡µé¢ä¸Šå»æ˜¾ç¤ºï¼Œä¾‹å¦‚ jsp å°±æ˜¯ä¸€ä¸ªæ¨¡æ¿å¼•æ“ã€‚<br><img src="/2020/07/11/springboot-03/2.png" alt></p><p><strong>thymeleaf çš„ä½¿ç”¨</strong></p><p>é¦–å…ˆå¯¼å…¥å®ƒçš„ä¾èµ–ï¼Œåœ¨springbootä¸­è¦æ·»åŠ å…¶ä»–ç»„ä»¶ï¼Œæ²¡æœ‰ä»€ä¹ˆæ˜¯ä¸€ä¸ªstarterè§£å†³ä¸äº†çš„ï¼</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--thymeleaf--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-thymeleaf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>å°†æµ‹è¯•é¡µé¢æ”¾åœ¨templatesç›®å½•ä¸‹ï¼Œç¼–å†™conntrollerè·³è½¬é¡µé¢</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Controller</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/test1"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"test1"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>thmeleaf è¯­æ³•</strong></p><pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>th</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.thymeleaf.org<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>test1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--æ‰€æœ‰çš„htmlå…ƒç´ éƒ½å¯ä»¥è¢«thymeleafæ›¿æ¢æ¥ç®¡  th:å…ƒç´ å--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${msg}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!--å¾ªç¯--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>val:${arr}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${val}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--ä¼ é€’å‚æ•°--></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/toUpdate/}+${emp.getId()}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç¼–è¾‘<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/delete/}+${emp.getId()}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>åˆ é™¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>   <span class="token comment" spellcheck="true">&lt;!--å¼•å…¥å…¬å…±ç»„ä»¶--></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>~{common/common::topbar}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--æ—¥æœŸæ ¼å¼åŒ–--></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${#dates.format(emp.getBirth(),<span class="token punctuation">'</span>yyyy-MM-dd<span class="token punctuation">'</span>)}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="æ¥ç®¡SpringMVC"><a href="#æ¥ç®¡SpringMVC" class="headerlink" title="æ¥ç®¡SpringMVC"></a>æ¥ç®¡SpringMVC</h2><p>åˆ›å»ºconfigç›®å½•ï¼Œåœ¨configç›®å½•ä¸‹ç¼–å†™ç±»ï¼Œç”¨æ¥æ¥ç®¡ã€æ‰©å±•SpringMVC</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyMvcConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span> <span class="token comment" spellcheck="true">// é…ç½®é¡µé¢æ˜ å°„å…³ç³»</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addViewControllers</span><span class="token punctuation">(</span>ViewControllerRegistry registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>        registry<span class="token punctuation">.</span><span class="token function">addViewController</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"/index"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        registry<span class="token punctuation">.</span><span class="token function">addViewController</span><span class="token punctuation">(</span><span class="token string">"/index.html"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"/index"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    registry<span class="token punctuation">.</span><span class="token function">addViewController</span><span class="token punctuation">(</span><span class="token string">"/main.html"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"/dashboard"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span> <span class="token comment" spellcheck="true">// é…ç½®æ‹¦æˆªå™¨</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span>InterceptorRegistry registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LoginHandlerInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">"/*"</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">excludePathPatterns</span><span class="token punctuation">(</span><span class="token string">"/index.html"</span><span class="token punctuation">,</span><span class="token string">"/"</span><span class="token punctuation">,</span><span class="token string">"/user/login"</span><span class="token punctuation">,</span><span class="token string">"/static/**"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>ç¼–å†™æ‹¦æˆªå™¨çš„å®ç°ç±»</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginHandlerInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerInterceptor</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">,</span> Object handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// ç™»å½•æˆåŠŸåæœ‰userçš„session</span>        Object loginUser <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"loginUser"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>loginUser<span class="token operator">==</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// æ²¡æœ‰ç™»å½•</span>            request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"æ²¡æœ‰æƒé™ï¼Œè¯·ç™»å½•ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/index.html"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="å¤„ç†å™¨æ¥æ”¶é¡µé¢ä¼ å‚"><a href="#å¤„ç†å™¨æ¥æ”¶é¡µé¢ä¼ å‚" class="headerlink" title="å¤„ç†å™¨æ¥æ”¶é¡µé¢ä¼ å‚"></a>å¤„ç†å™¨æ¥æ”¶é¡µé¢ä¼ å‚</h2><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/delete/}+${emp.getId()}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>åˆ é™¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code></pre><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/delete/{id}"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// @PathVarable æ¥æ”¶è·¯å¾„ä¸­å ä½ç¬¦çš„å€¼</span><span class="token keyword">public</span> String <span class="token function">delete</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span>Integer id<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><h2 id="é¡¹ç›®é…ç½®æ–‡ä»¶"><a href="#é¡¹ç›®é…ç½®æ–‡ä»¶" class="headerlink" title="é¡¹ç›®é…ç½®æ–‡ä»¶"></a>é¡¹ç›®é…ç½®æ–‡ä»¶</h2><pre class=" language-properties"><code class="language-properties"><span class="token comment" spellcheck="true"># å…³é—­thymeleaf ç¼“å­˜</span><span class="token attr-name">spring.thymeleaf.cache</span><span class="token punctuation">=</span><span class="token attr-value">false</span><span class="token comment" spellcheck="true"># é¡¹ç›®è·¯å¾„  localhost:8080/zyz</span><span class="token attr-name">server.servlet.context-path</span><span class="token punctuation">=</span><span class="token attr-value">/springboot_web</span><span class="token comment" spellcheck="true"># å›½é™…åŒ–</span><span class="token comment" spellcheck="true"># spring.messages.basename=i18n.login</span><span class="token comment" spellcheck="true"># æ—¶é—´æ—¥æœŸæ ¼å¼åŒ–</span><span class="token attr-name">spring.mvc.format.date</span><span class="token punctuation">=</span><span class="token attr-value">yyyy-MM-dd</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å¾®æœåŠ¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springbooté…ç½®</title>
      <link href="2020/07/10/springboot-02/"/>
      <url>2020/07/10/springboot-02/</url>
      
        <content type="html"><![CDATA[<h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><p>SpringBootä½¿ç”¨ä¸€ä¸ªå…¨å±€é…ç½®æ–‡ä»¶ï¼Œç”¨äºä¿®æ”¹é»˜è®¤é…ç½®ï¼Œæ–‡ä»¶åå›ºå®šã€‚</p><ul><li>application.propertiesï¼šè¯­æ³•ç»“æ„ï¼škey=value</li><li>application.ymlï¼Œspringbootæ¨èä½¿ç”¨ï¼šè¯­æ³•ç»“æ„ï¼škey: &nbsp;value </li></ul><h2 id="yamlæ¦‚è¿°"><a href="#yamlæ¦‚è¿°" class="headerlink" title="yamlæ¦‚è¿°"></a>yamlæ¦‚è¿°</h2><p>1ã€ç©ºæ ¼ä¸èƒ½çœç•¥ï¼Œkey:ç©ºæ ¼value</p><p>2ã€ä»¥ç¼©è¿›æ¥æ§åˆ¶å±‚çº§å…³ç³»ï¼Œåªè¦æ˜¯å·¦è¾¹å¯¹é½çš„ä¸€åˆ—æ•°æ®éƒ½æ˜¯åŒä¸€ä¸ªå±‚çº§çš„ã€‚</p><p>3ã€å±æ€§å’Œå€¼çš„å¤§å°å†™éƒ½æ˜¯ååˆ†æ•æ„Ÿçš„ã€‚</p><h2 id="yamlæ³¨å…¥é…ç½®æ–‡ä»¶"><a href="#yamlæ³¨å…¥é…ç½®æ–‡ä»¶" class="headerlink" title="yamlæ³¨å…¥é…ç½®æ–‡ä»¶"></a>yamlæ³¨å…¥é…ç½®æ–‡ä»¶</h2><p><img src="/2020/07/10/springboot-02/6.png" alt></p><p>æµ‹è¯•ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">class</span> <span class="token class-name">Springboot02ConfigApplicationTests</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> Cat cat<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> Person person<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cat<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>ç»“æœï¼š</p><pre><code>Cat{name=&#39;å°ç™½&#39;, age=3}Person{name=&#39;zyz&#39;, age=22, happy=true, birth=Fri Jul 10 00:00:00 CST 2020, maps={k1=v1, k2=v2}, lists=[1, 2, 3], cat=Cat{name=&#39;å°èŠ±&#39;, age=2}}</code></pre><p>æŒ‡å®šéšæœºuuid:</p><pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">name</span><span class="token punctuation">:</span> zyz$<span class="token punctuation">{</span>random.uuid<span class="token punctuation">}</span> <span class="token comment" spellcheck="true"># éšæœºuuid</span></code></pre><h2 id="propertiesæ³¨å…¥"><a href="#propertiesæ³¨å…¥" class="headerlink" title="propertiesæ³¨å…¥"></a>propertiesæ³¨å…¥</h2><p><img src="/2020/07/10/springboot-02/7.png" alt></p><h2 id="JSR303æ ¡éªŒ"><a href="#JSR303æ ¡éªŒ" class="headerlink" title="JSR303æ ¡éªŒ"></a>JSR303æ ¡éªŒ</h2><p>Springbootä¸­å¯ä»¥ç”¨@validatedæ¥æ ¡éªŒæ•°æ®ï¼Œå¦‚æœæ•°æ®å¼‚å¸¸åˆ™ä¼šç»Ÿä¸€æŠ›å‡ºå¼‚å¸¸ï¼Œæ–¹ä¾¿å¼‚å¸¸ä¸­å¿ƒç»Ÿä¸€å¤„ç†ã€‚</p><p>å¼•å…¥ä¾èµ–</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-validation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"person"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Validated</span>  <span class="token comment" spellcheck="true">// æ•°æ®æ ¡éªŒ</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Email</span><span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">"é‚®ç®±æ ¼å¼ä¸åˆæ³•"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// ä½¿nameåªèƒ½æ”¯æŒEmailæ ¼å¼</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>è¿è¡Œç»“æœï¼š<br><img src="/2020/07/10/springboot-02/8.png" alt></p><p> <strong>å¸¸è§å‚æ•°</strong></p><p>ç©ºæ£€æŸ¥<br>@Null       éªŒè¯å¯¹è±¡æ˜¯å¦ä¸ºnull<br>@NotNull    éªŒè¯å¯¹è±¡æ˜¯å¦ä¸ä¸ºnull, æ— æ³•æŸ¥æ£€é•¿åº¦ä¸º0çš„å­—ç¬¦ä¸²<br>@NotBlank   æ£€æŸ¥çº¦æŸå­—ç¬¦ä¸²æ˜¯ä¸æ˜¯Nullè¿˜æœ‰è¢«Trimçš„é•¿åº¦æ˜¯å¦å¤§äº0,åªå¯¹å­—ç¬¦ä¸²,ä¸”ä¼šå»æ‰å‰åç©ºæ ¼.<br>@NotEmpty   æ£€æŸ¥çº¦æŸå…ƒç´ æ˜¯å¦ä¸ºNULLæˆ–è€…æ˜¯EMPTY.</p><p>Booelanæ£€æŸ¥<br>@AssertTrue     éªŒè¯ Boolean å¯¹è±¡æ˜¯å¦ä¸º true<br>@AssertFalse    éªŒè¯ Boolean å¯¹è±¡æ˜¯å¦ä¸º false </p><p>é•¿åº¦æ£€æŸ¥<br>@Size(min=, max=) éªŒè¯å¯¹è±¡ï¼ˆArray,Collection,Map,Stringï¼‰é•¿åº¦æ˜¯å¦åœ¨ç»™å®šçš„èŒƒå›´ä¹‹å†…  @Length(min=, max=) string is between min and max included</p><p>æ—¥æœŸæ£€æŸ¥<br>@Past       éªŒè¯ Date å’Œ Calendar å¯¹è±¡æ˜¯å¦åœ¨å½“å‰æ—¶é—´ä¹‹å‰<br>@Future     éªŒè¯ Date å’Œ Calendar å¯¹è±¡æ˜¯å¦åœ¨å½“å‰æ—¶é—´ä¹‹å<br>@Pattern    éªŒè¯ String å¯¹è±¡æ˜¯å¦ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„è§„åˆ™</p><h2 id="å¤šç¯å¢ƒåˆ‡æ¢"><a href="#å¤šç¯å¢ƒåˆ‡æ¢" class="headerlink" title="å¤šç¯å¢ƒåˆ‡æ¢"></a>å¤šç¯å¢ƒåˆ‡æ¢</h2><pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true"># Springbootå¤šç¯å¢ƒé…ç½®</span><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8081 </span><span class="token comment" spellcheck="true"># é»˜è®¤ç¯å¢ƒ</span><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>    <span class="token key atrule">active</span><span class="token punctuation">:</span> dev <span class="token comment" spellcheck="true"># æŒ‡å®šç¯å¢ƒ</span><span class="token punctuation">---</span><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8082</span><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">profiles</span><span class="token punctuation">:</span> test<span class="token punctuation">---</span><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8083</span><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">profiles</span><span class="token punctuation">:</span> dev</code></pre>]]></content>
      
      
      <categories>
          
          <category> å¾®æœåŠ¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springbootç®€ä»‹ã€è‡ªåŠ¨è£…é…åŸç†</title>
      <link href="2020/07/09/springboot-01/"/>
      <url>2020/07/09/springboot-01/</url>
      
        <content type="html"><![CDATA[<p>springbootæ˜¯ä¸€ä¸ªjavawebçš„å¼€å‘æ¡†æ¶ï¼Œå’ŒSpringMVCç±»ä¼¼ï¼Œå¯¹æ¯”å…¶ä»–javawebæ¡†æ¶çš„å¥½å¤„ï¼šç®€åŒ–å¼€å‘ï¼Œçº¦å®šå¤§äºé…ç½®ï¼Œèƒ½è¿…é€Ÿçš„å¼€å‘webåº”ç”¨ï¼Œå‡ è¡Œä»£ç å¼€å‘ä¸€ä¸ªhttpæ¥å£ã€‚</p><h2 id="springboot-helloworld"><a href="#springboot-helloworld" class="headerlink" title="springboot-helloworld"></a>springboot-helloworld</h2><p>1ã€ä½¿ç”¨IDEAåˆ›å»ºä¸€ä¸ªspringboot é¡¹ç›®<br><img src="/2020/07/09/springboot-01/1.png" alt></p><p>2ã€ä¿®æ”¹é¡¹ç›®åç§°åæ·»åŠ webä¾èµ–<br><img src="/2020/07/09/springboot-01/2.png" alt></p><p>3ã€æ•´ç†é¡¹ç›®ç»“æ„<br><img src="/2020/07/09/springboot-01/3.png" alt></p><p>4ã€åœ¨controlleråŒ…ä¸‹æ·»åŠ å¤„ç†è¯·æ±‚çš„ç¨‹åº</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// åŸç†ï¼šè‡ªåŠ¨è£…é…</span><span class="token annotation punctuation">@RestController</span>  <span class="token comment" spellcheck="true">// æ— æ³•è¿”å›è§†å›¾ ç›¸å½“äº@Controller + @ResponseBody</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// æ¥å£  http://localhost:8080/hello</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">doHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"Hello,world!"</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// åœ¨å½“å‰é¡µé¢æ‰“å°å­—ç¬¦ä¸²</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>æ•´ä¸ªè¿‡ç¨‹éå¸¸çš„ç®€å•ï¼Œæ— éœ€åƒSpringMVCé‚£æ ·è¿›è¡Œè¿‡å¤šçš„é…ç½®ï¼Œåªéœ€ç¼–å†™å¤„ç†ä¸šåŠ¡é€»è¾‘çš„ä»£ç ï¼Œå³å‘å‰ç«¯æä¾›æ¥å£ã€‚</p><p>å½“ç„¶ï¼Œè¿™éƒ½æºè‡ªspringbootçš„è‡ªåŠ¨è£…é…åŸç†ã€‚æˆ‘ä»¬æ‰€ç¼–å†™çš„ä¸€ä¸ªä¸ªcontrollerä¸è¿‡æ˜¯ä¸€ä¸ªä¸ªç»„ä»¶ï¼Œspringbootå·²ç»å¸®æˆ‘ä»¬è£…é…å¥½äº†ã€‚</p><p><strong>åœ¨application.propertiesä¸­å¯ä»¥ä¿®æ”¹é¡¹ç›®çš„ç«¯å£å·</strong></p><pre class=" language-properties"><code class="language-properties"><span class="token comment" spellcheck="true"># æ›´æ”¹é¡¹ç›®ç«¯å£å·</span><span class="token attr-name">server.port</span><span class="token punctuation">=</span><span class="token attr-value">8081</span></code></pre><p>ä¿®æ”¹bannerï¼Œåœ¨resourceä¸­æ·»åŠ banner.txtæ·»åŠ ASCIIè‰ºæœ¯å­—ï¼Œé‡æ–°å¯åŠ¨é¡¹ç›®å³å¯ï¼</p><p>åº·åº·æˆ‘çš„â—‹( ï¼¾çš¿ï¼¾)ã£Hiahiahiaâ€¦<br><img src="/2020/07/09/springboot-01/4.png" style="zoom:80%;"></p><h2 id="è‡ªåŠ¨è£…é…åŸç†"><a href="#è‡ªåŠ¨è£…é…åŸç†" class="headerlink" title="è‡ªåŠ¨è£…é…åŸç†"></a>è‡ªåŠ¨è£…é…åŸç†</h2><h3 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h3><p><strong>çˆ¶é¡¹ç›®ä¾èµ–ï¼Œç®¡ç†é¡¹ç›®çš„èµ„æºè¿‡æ»¤åŠæ’ä»¶</strong></p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.3.1.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/></span></span> <span class="token comment" spellcheck="true">&lt;!-- lookup parent from repository --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">></span></span></code></pre><p><strong>webæ¨¡å—æ­£å¸¸è¿è¡Œæ‰€ä¾èµ–çš„ç»„ä»¶</strong>ï¼štomcatï¼Œspringmvcç­‰ç­‰</p><pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span>dependency<span class="token operator">></span>    <span class="token operator">&lt;</span>groupId<span class="token operator">></span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">></span>    <span class="token operator">&lt;</span>artifactId<span class="token operator">></span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>starter<span class="token operator">-</span>web<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">></span></code></pre><h3 id="ä¸»å¯åŠ¨ç±»"><a href="#ä¸»å¯åŠ¨ç±»" class="headerlink" title="ä¸»å¯åŠ¨ç±»"></a>ä¸»å¯åŠ¨ç±»</h3><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// æ ‡æ³¨è¿™æ˜¯ä¸€ä¸ªspringbootçš„åº”ç”¨</span><span class="token annotation punctuation">@SpringBootApplication</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloworldApplication</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        SpringApplication<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>HelloworldApplication<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>SpringBootçš„ä¸»é…ç½®ç±» ï¼Œ SpringBootå°±åº”è¯¥è¿è¡Œè¿™ä¸ªç±»çš„mainæ–¹æ³•æ¥å¯åŠ¨SpringBootåº”ç”¨ï¼›</p><p>Springbootçš„æ‰€æœ‰è‡ªåŠ¨é…ç½®éƒ½æ˜¯åœ¨å¯åŠ¨çš„æ—¶å€™æ‰«æå¹¶åŠ è½½ï¼š<br><img src="/2020/07/09/springboot-01/5.png" alt></p><p>spring.factoriesï¼šæ‰€æœ‰çš„é…ç½®æ–‡ä»¶éƒ½åœ¨é‡Œé¢ï¼Œä½†æ˜¯ä¸ä¸€å®šç”Ÿæ•ˆï¼Œè¦åˆ¤æ–­æ¡ä»¶æˆç«‹ï¼Œåªè¦å¯¼å…¥äº†å¯¹åº”çš„å¯åŠ¨å™¨ï¼Œè‡ªåŠ¨è£…é…æ‰ä¼šæˆåŠŸã€‚</p><ol><li>SpringBootåœ¨å¯åŠ¨çš„æ—¶å€™ä»ç±»è·¯å¾„ä¸‹çš„META-INF/spring.factoriesä¸­è·å–EnableAutoConfigurationæŒ‡å®šçš„å€¼</li><li>å°†è¿™äº›å€¼ä½œä¸ºè‡ªåŠ¨é…ç½®ç±»å¯¼å…¥å®¹å™¨ ï¼Œ è‡ªåŠ¨é…ç½®ç±»å°±ç”Ÿæ•ˆ ï¼Œ å¸®æˆ‘ä»¬è¿›è¡Œè‡ªåŠ¨é…ç½®å·¥ä½œï¼›</li><li>æ•´ä¸ªJavaEEçš„æ•´ä½“è§£å†³æ–¹æ¡ˆå’Œè‡ªåŠ¨é…ç½®éƒ½åœ¨springboot-autoconfigureçš„jaråŒ…ä¸­ï¼›</li><li>å®ƒä¼šç»™å®¹å™¨ä¸­å¯¼å…¥éå¸¸å¤šçš„è‡ªåŠ¨é…ç½®ç±» ï¼ˆxxxAutoConfigurationï¼‰, å°±æ˜¯ç»™å®¹å™¨ä¸­å¯¼å…¥è¿™ä¸ªåœºæ™¯éœ€è¦çš„æ‰€æœ‰ç»„ä»¶ ï¼Œ å¹¶é…ç½®å¥½è¿™äº›ç»„ä»¶ ï¼›</li><li>æœ‰äº†è‡ªåŠ¨é…ç½®ç±» ï¼Œ å…å»äº†æˆ‘ä»¬æ‰‹åŠ¨ç¼–å†™é…ç½®æ³¨å…¥åŠŸèƒ½ç»„ä»¶ç­‰çš„å·¥ä½œï¼›</li></ol><blockquote><p>SpringApplication.run(HelloworldApplication.class, args);</p><p>ä¸€å…±åšäº†ä¸¤ä»¶äº‹ï¼Œåˆ›å»ºSpringApplicationå¯¹è±¡ï¼Œåœ¨è¿›è¡Œåˆå§‹åŒ–çš„æ—¶å€™æ‰¾åˆ°spring.factoriesæ–‡ä»¶ä¸­çš„ç›‘å¬å™¨å¹¶ä¿å­˜ï¼›è°ƒç”¨run()æ–¹æ³•ï¼Œåˆšåˆšä¿å­˜çš„ç›‘å¬å™¨æ ¹æ®å½“å‰æ—¶æœºè§¦å‘ä¸åŒçš„äº‹ä»¶ï¼Œæ¯”å¦‚å®¹å™¨çš„åˆå§‹åŒ–ï¼Œå®¹å™¨åˆ›å»ºå®Œæˆç­‰ã€‚åŒæ—¶ä¹Ÿä¼šåˆ·æ–°å®¹å™¨ï¼Œè¿›è¡Œç»„ä»¶çš„æ‰«æã€åˆ›å»ºã€åŠ è½½ç­‰å·¥ä½œã€‚</p></blockquote><p><strong>xxxxAutoConfigurartionï¼š</strong>è‡ªåŠ¨é…ç½®ç±»ï¼›ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶</p><p><strong>xxxxProperties:</strong>å°è£…é…ç½®æ–‡ä»¶ä¸­ç›¸å…³å±æ€§</p>]]></content>
      
      
      <categories>
          
          <category> å¾®æœåŠ¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringMVCæ ¸å¿ƒæŠ€æœ¯</title>
      <link href="2020/07/05/SpringMVC-04/"/>
      <url>2020/07/05/SpringMVC-04/</url>
      
        <content type="html"><![CDATA[<h2 id="è¯·æ±‚è½¬å‘ä¸é‡å®šå‘"><a href="#è¯·æ±‚è½¬å‘ä¸é‡å®šå‘" class="headerlink" title="è¯·æ±‚è½¬å‘ä¸é‡å®šå‘"></a>è¯·æ±‚è½¬å‘ä¸é‡å®šå‘</h2><p>SpringMVC æ¡†æ¶æŠŠåŸæ¥Servlet ä¸­çš„è¯·æ±‚è½¬å‘å’Œé‡å®šå‘æ“ä½œè¿›è¡Œäº†å°è£…ã€‚<br>ç°åœ¨å¯ä»¥ä½¿ç”¨ç®€å•çš„æ–¹å¼å®ç°è½¬å‘å’Œé‡å®šå‘ã€‚<br>forward:è¡¨ç¤ºè½¬å‘ï¼Œå®ç°request.getRequestDispatcher(â€œxx.jspâ€).forward()<br>redirect:è¡¨ç¤ºé‡å®šå‘ï¼Œå®ç°response.sendRedirect(â€œxxx.jspâ€)</p><h3 id="1ã€è¯·æ±‚è½¬å‘"><a href="#1ã€è¯·æ±‚è½¬å‘" class="headerlink" title="1ã€è¯·æ±‚è½¬å‘"></a>1ã€è¯·æ±‚è½¬å‘</h3><p>åœ¨æ¡†æ¶ä¸­ï¼Œä½¿ç”¨forwardï¼Œredirectï¼Œä¸è§†å›¾è§£æå™¨æ— å…³ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Controller</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyController</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * æ¡†æ¶çš„ forwardè¯·æ±‚è½¬å‘     * @param name     * @param age     * @return     */</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/doForward"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> ModelAndView <span class="token function">doForward</span><span class="token punctuation">(</span>String name<span class="token punctuation">,</span>Integer age<span class="token punctuation">)</span> <span class="token punctuation">{</span>        ModelAndView modelAndView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"Controllerè¯·æ±‚è½¬å‘è·³è½¬æˆåŠŸ~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>        modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ä½¿ç”¨forwardæ˜¾å¼è½¬å‘</span>        <span class="token comment" spellcheck="true">// ä¸€èˆ¬ç”¨äºè·³è½¬åˆ°è§†å›¾è§£æå™¨ä¸­æ²¡æœ‰æŒ‡å®šçš„è·¯å¾„</span>        modelAndView<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"forward:/WEB-INF/view/show.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> modelAndView<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>è¯·æ±‚é¡µé¢ï¼š</p><pre class=" language-jsp"><code class="language-jsp"><%@ page contentType="text/html;charset=UTF-8" language="java" %><% String basePath = request.getContextPath()+"/";%><html><head>    <title>index.jsp</title>    <base href="<%=basePath%>"/></head><body>    <form action="doForward" method="post">        å§“å: <input type="text" name="name"><br/>        å¹´é¾„: <input type="number" name="age"><br/>        <input type="submit" value="è¯·æ±‚è½¬å‘">    </form></body></html></code></pre><p>è½¬å‘é¡µé¢ï¼š</p><pre class=" language-jsp"><code class="language-jsp"><%@ page contentType="text/html;charset=UTF-8" language="java" %><html><head>    <title>show.jsp</title></head><body>    <p>msgæ•°æ®ï¼š${msg}</p>    <p>nameï¼š${name}</p>    <p>ageï¼š${age}</p></body></html></code></pre><h3 id="2ã€é‡å®šå‘"><a href="#2ã€é‡å®šå‘" class="headerlink" title="2ã€é‡å®šå‘"></a>2ã€é‡å®šå‘</h3><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * æ¡†æ¶çš„ redirect é‡å®šå‘ * 1ã€æ¡†æ¶ä¼šæŠŠ Modelä¸­çš„ç®€å•æ•°æ®ç±»å‹çš„æ•°æ®ï¼Œè½¬æ¢ä¸ºStringä½¿ç”¨ï¼Œä½œä¸ºhello.jspçš„getè¯·æ±‚å‚æ•° * ç›®çš„æ˜¯åœ¨ doRedirect å’Œ hello.jsp ä¸¤æ¬¡è¯·æ±‚ä¹‹é—´ä¼ é€’æ•°æ® * 2ã€åœ¨ç›®æ ‡ hello.jspä¸­ä½¿ç”¨å‚æ•°é›†åˆå¯¹è±¡${param}è·å–è¯·æ±‚å‚æ•°å€¼ * @param name * @param age * @return */</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/doRedirect"</span><span class="token punctuation">)</span><span class="token keyword">public</span> ModelAndView <span class="token function">doRedirect</span><span class="token punctuation">(</span>String name<span class="token punctuation">,</span>Integer age<span class="token punctuation">)</span> <span class="token punctuation">{</span>    ModelAndView modelAndView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"Controlleré‡å®šå‘è·³è½¬æˆåŠŸ~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// ä½¿ç”¨redirecté‡å®šå‘</span>    modelAndView<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"redirect:/hello.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> modelAndView<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>è¯·æ±‚é¡µé¢ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">%</span>@ page contentType<span class="token operator">=</span><span class="token string">"text/html;charset=UTF-8"</span> language<span class="token operator">=</span><span class="token string">"java"</span> <span class="token operator">%</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%</span> String basePath <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"/"</span><span class="token punctuation">;</span><span class="token operator">%</span><span class="token operator">></span><span class="token operator">&lt;</span>html<span class="token operator">></span><span class="token operator">&lt;</span>head<span class="token operator">></span>    <span class="token operator">&lt;</span>title<span class="token operator">></span>index<span class="token punctuation">.</span>jsp<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span>    <span class="token operator">&lt;</span>base href<span class="token operator">=</span><span class="token string">"&lt;%=basePath%>"</span><span class="token operator">/</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span><span class="token operator">&lt;</span>body<span class="token operator">></span>    <span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string">"doRedirect"</span> method<span class="token operator">=</span><span class="token string">"post"</span><span class="token operator">></span>        å§“å<span class="token operator">:</span> <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"name"</span><span class="token operator">></span><span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span>        å¹´é¾„<span class="token operator">:</span> <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"number"</span> name<span class="token operator">=</span><span class="token string">"age"</span><span class="token operator">></span><span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span>        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"submit"</span> value<span class="token operator">=</span><span class="token string">"é‡å®šå‘"</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span></code></pre><p>é‡å®šå‘é¡µé¢ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">%</span>@ page contentType<span class="token operator">=</span><span class="token string">"text/html;charset=UTF-8"</span> language<span class="token operator">=</span><span class="token string">"java"</span> <span class="token operator">%</span><span class="token operator">></span><span class="token operator">&lt;</span>html<span class="token operator">></span><span class="token operator">&lt;</span>head<span class="token operator">></span>    <span class="token operator">&lt;</span>title<span class="token operator">></span>hello<span class="token punctuation">.</span>jsp<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span><span class="token operator">&lt;</span>body<span class="token operator">></span>    <span class="token operator">&lt;</span>p<span class="token operator">></span>msgæ•°æ®ï¼š$<span class="token punctuation">{</span>param<span class="token punctuation">.</span>msg<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>    <span class="token operator">&lt;</span>p<span class="token operator">></span>nameï¼š$<span class="token punctuation">{</span>param<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>    <span class="token operator">&lt;</span>p<span class="token operator">></span>ageï¼š$<span class="token punctuation">{</span>param<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span></code></pre><h2 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h2><p>springmvcé‡‡ç”¨å…¨å±€å¼‚å¸¸å¤„ç†ï¼ŒæŠŠcontrollerä¸­çš„å¼‚å¸¸å¤„ç†é›†ä¸­åˆ°ä¸€ä¸ªåœ°æ–¹ã€‚é‡‡ç”¨aopçš„æ€æƒ³ï¼Œå°†ä¸šåŠ¡å¤„ç†ä¸å¼‚å¸¸å¤„ç†åˆ†å¼€ï¼Œè§£è€¦åˆã€‚</p><p>1ã€ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºï¼Œè‡ªå®šä¹‰äº†å‡ ä¸ªå¼‚å¸¸ç±»</p><p>è‡ªå®šä¹‰ç”¨æˆ·å¼‚å¸¸ç±»</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyUserException</span> <span class="token keyword">extends</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token function">MyUserException</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">MyUserException</span><span class="token punctuation">(</span>String message<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>å†å®šä¹‰ä¸¤ä¸ªå­ç±»ç»§æ‰¿ç”¨æˆ·å¼‚å¸¸ç±»</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AgeException</span> <span class="token keyword">extends</span> <span class="token class-name">MyUserException</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token function">AgeException</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">AgeException</span><span class="token punctuation">(</span>String message<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NameException</span> <span class="token keyword">extends</span> <span class="token class-name">MyUserException</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token function">NameException</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">NameException</span><span class="token punctuation">(</span>String message<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>2ã€ç¼–å†™ä¸“é—¨å¤„ç†å¼‚å¸¸çš„controllerç±»</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@ControllerAdvice</span><span class="token comment" spellcheck="true">// æ§åˆ¶å™¨å¢å¼ºï¼Œå¢åŠ å¼‚å¸¸å¤„ç†åŠŸèƒ½ éœ€è¦é…ç½®ç»„ä»¶æ‰«æå™¨ï¼Œå£°æ˜æ­¤ç±»æ‰€åœ¨çš„åŒ…å</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GlobalExceptionHandler</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å®šä¹‰æ–¹æ³•å¤„ç†å¼‚å¸¸</span>    <span class="token comment" spellcheck="true">/**     * å¤„ç† name å¼‚å¸¸çš„æ–¹æ³•     *     * @param e controlleræŠ›å‡ºçš„å¼‚å¸¸å¯¹è±¡     * @return     */</span>    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>value <span class="token operator">=</span> NameException<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// è¦å¤„ç†çš„å¼‚å¸¸ç±»å‹</span>    <span class="token keyword">public</span> ModelAndView <span class="token function">doNameException</span><span class="token punctuation">(</span>Exception e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 1ã€è®°å½•å¼‚å¸¸ï¼Œè®°å½•åˆ°æ•°æ®åº“ï¼Œæ—¥å¿—æ–‡ä»¶ï¼Œè®°å½•æ—¥å¿—å‘ç”Ÿçš„æ—¶é—´ï¼Œå“ªä¸ªæ–¹æ³•å‘ç”Ÿçš„å¼‚å¸¸ï¼Œå¼‚å¸¸é”™è¯¯å†…å®¹</span>        <span class="token comment" spellcheck="true">// 2ã€å‘é€é€šçŸ¥ï¼ŒæŠŠå¼‚å¸¸ä¿¡æ¯å‘é€ç»™ç›¸å…³äººå‘˜</span>        <span class="token comment" spellcheck="true">// 3ã€ç”¨æˆ·å‹å¥½çš„æç¤º</span>        ModelAndView modelAndView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"å§“åå¿…é¡»æ˜¯zyzï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"ex"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>        modelAndView<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"nameError"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> modelAndView<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>value <span class="token operator">=</span> AgeException<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// è¦å¤„ç†çš„å¼‚å¸¸ç±»å‹</span>    <span class="token keyword">public</span> ModelAndView <span class="token function">doAgeException</span><span class="token punctuation">(</span>Exception e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        ModelAndView modelAndView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"å¹´é¾„å¿…é¡»å°äº80ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"ex"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>        modelAndView<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"ageError"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> modelAndView<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// å¤„ç†æœªçŸ¥å¼‚å¸¸  åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¸€èˆ¬åƒè¿™æ ·ä½¿ç”¨ï¼Œç¼–å†™ä¸€ä¸ªæ–¹æ³•å°±èƒ½å¤„ç†æ‰€æœ‰çš„å¼‚å¸¸äº†</span>    <span class="token annotation punctuation">@ExceptionHandler</span>    <span class="token keyword">public</span> ModelAndView <span class="token function">doOtherException</span><span class="token punctuation">(</span>Exception e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        ModelAndView modelAndView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"å…¶ä»–å¼‚å¸¸"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"ex"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>        modelAndView<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"defaultError"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> modelAndView<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>3ã€æ·»åŠ ç»„ä»¶æ‰«æå™¨ï¼Œå£°æ˜å¤„ç†å¼‚å¸¸çš„æ–¹æ³•æ‰€åœ¨çš„åŒ…</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- æ³¨è§£é©±åŠ¨--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">/></span></span><span class="token comment" spellcheck="true">&lt;!-- å¤„ç†å¼‚å¸¸--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.handler<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></code></pre><p>4ã€ç¼–å†™å¼‚å¸¸è·³è½¬çš„é¡µé¢</p><h2 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" class="headerlink" title="æ‹¦æˆªå™¨"></a>æ‹¦æˆªå™¨</h2><p>æ‹¦æˆªå™¨ï¼ˆinterceptorï¼‰ï¼Œæ˜¯ä¸€ç§é¢å‘åˆ‡é¢ç¼–ç¨‹çš„å®ç°ï¼Œå°†å¤šä¸ªæ¨¡å—çš„é€šç”¨æœåŠ¡è¿›è¡Œåˆ†ç¦»ï¼Œå¦‚æƒé™ç®¡ç†ã€æ—¥å¿—æœåŠ¡ï¼Œå°±å¯ä»¥å°†å…¶å„è‡ªå°è£…ä¸ºä¸€ä¸ªå¯é‡ç”¨æ¨¡å—ã€‚è€Œè¿™äº›é€šç”¨æœåŠ¡çš„å…·ä½“å®ç°æ˜¯é€šè¿‡æ‹¦æˆªå™¨æ¥å®Œæˆï¼Œæ¯”å¦‚ç”¨æˆ·å®¢æˆ·ç«¯è®¿é—®ä¸€äº›ä¿å¯†æ¨¡å—éƒ½åº”å…ˆé€šè¿‡æƒé™å®¡æŸ¥çš„æ‹¦æˆªå™¨æ¥è¿›è¡Œæƒé™å®¡æŸ¥ï¼Œç¡®å®šç”¨æˆ·æ˜¯å¦å…·æœ‰è¯¥é¡¹æ“ä½œçš„æƒé™åæ–¹èƒ½å‘ä¸‹æ‰§è¡Œã€‚åœ¨é¢å‘åˆ‡é¢ç¼–ç¨‹ä¸­å°±æ˜¯åœ¨è°ƒç”¨ä¸šåŠ¡æ–¹æ³•å‰è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œæˆ–è€…åœ¨è°ƒç”¨ä¸šåŠ¡æ–¹æ³•åè°ƒç”¨ä¸€ä¸ªæ–¹æ³•ã€‚</p><p><strong>æ‹¦æˆªå™¨çš„æ‰§è¡Œæ—¶é—´ï¼š</strong></p><p>1ã€åœ¨è¯·æ±‚å¤„ç†ä¹‹å‰ï¼Œä¹Ÿå°±æ˜¯controllerç±»ä¸­çš„æ–¹æ³•æ‰§è¡Œä¹‹å‰å…ˆè¢«æ‹¦æˆªã€‚<br>2ã€åœ¨æ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œä¹‹åä¹Ÿä¼šæ‰§è¡Œæ‹¦æˆªå™¨ã€‚<br>3ã€åœ¨è¯·æ±‚å¤„ç†å®Œæˆåä¹Ÿä¼šæ‰§è¡Œæ‹¦æˆªå™¨ã€‚</p><p><strong>æ‹¦æˆªå™¨ç±»</strong></p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// æ‹¦æˆªå™¨ç±»ï¼Œæ‹¦æˆªç”¨æˆ·è¯·æ±‚</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerInterceptor</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * é¢„å¤„ç†æ–¹æ³•     * 1ã€åœ¨æ§åˆ¶å™¨æ–¹æ³•ä¹‹å‰æ‰§è¡Œ     * 2ã€è·å–è¯·æ±‚ä¿¡æ¯ï¼ŒéªŒè¯è¯·æ±‚æ˜¯å¦ç¬¦åˆè¦æ±‚     *   å¯ä»¥éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•ï¼Œæ˜¯å¦æœ‰æƒé™è®¿é—®æŸä¸ªé“¾æ¥åœ°å€ url     *   éªŒè¯å¤±è´¥ï¼Œå¯ä»¥æˆªæ–­è¯·æ±‚ï¼Œè¯·æ±‚ä¸èƒ½è¢«å¤„ç†ã€‚     *   éªŒè¯æˆåŠŸï¼Œå¯ä»¥æ”¾è¡Œè¯·æ±‚ï¼Œæ‰§è¡Œæ§åˆ¶å™¨æ–¹æ³•     * @param request     * @param response     * @param handler  è¢«æ‹¦æˆªçš„æ§åˆ¶å™¨å¯¹è±¡     * @return  true è¡¨ç¤ºéªŒè¯æˆåŠŸï¼Œå¯ä»¥æ‰§è¡Œå¤„ç†å™¨ä¸­æ–¹æ³•     *          false è¡¨ç¤ºéªŒè¯å¤±è´¥ï¼Œè¯·æ±‚åˆ°è¾¾æ‹¦æˆªå™¨å°±æˆªæ­¢äº†ï¼Œè¯·æ±‚æ²¡æœ‰è¢«å¤„ç†     * @throws Exception     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">,</span> Object handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ‹¦æˆªå™¨MyInterceptorçš„preHandle()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ç»™æµè§ˆå™¨ä¸€ä¸ªè¿”å›ç»“æœ</span>        request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/tips.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * åå¤„ç†æ–¹æ³•     * 1ã€åœ¨å¤„ç†å™¨æ–¹æ³•ä¹‹åæ‰§è¡Œ     * 2ã€èƒ½å¤Ÿè·å–åˆ°å¤„ç†å™¨æ–¹æ³•ä¸­çš„è¿”å›å€¼ModelAndViewï¼Œå¹¶ä¸”å¯ä»¥ä¿®æ”¹     * 3ã€ä¸»è¦å¯¹åŸæ¥çš„æ‰§è¡Œç»“æœåšä¿®æ­£     * @param request     * @param response     * @param handler è¢«æ‹¦æˆªçš„æ§åˆ¶å™¨å¯¹è±¡     * @param modelAndView å¤„ç†å™¨æ–¹æ³•çš„è¿”å›å€¼     * @throws Exception     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postHandle</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">,</span> Object handler<span class="token punctuation">,</span> ModelAndView modelAndView<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ‹¦æˆªå™¨MyInterceptorçš„postHandle()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * æœ€åæ‰§è¡Œçš„æ–¹æ³•     * 1ã€è¯·æ±‚å¤„ç†å®Œæˆåæ‰§è¡Œï¼Œå³å¯¹è§†å›¾è¿›è¡Œäº†forward     * 2ã€ä¸€èˆ¬æ˜¯åšèµ„æºå›æ”¶ï¼Œé‡Šæ”¾å†…å­˜     * @param request     * @param response     * @param handler     * @param ex     * @throws Exception     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterCompletion</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">,</span> Object handler<span class="token punctuation">,</span> Exception ex<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ‹¦æˆªå™¨MyInterceptorçš„afterCompletion()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>å£°æ˜æ‹¦æˆªå™¨</strong></p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- å£°æ˜æ‹¦æˆªå™¨  å¯ä»¥æœ‰å¤šä¸ª--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- æŒ‡å®šæ‹¦æˆªå™¨çš„url--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>mapping</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/**<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment" spellcheck="true">&lt;!--å£°æ˜æ‹¦æˆªå™¨å¯¹è±¡--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.handler.MyInterceptor<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">></span></span></code></pre><p>preHandle()è¿”å›trueæ—¶ï¼š<br><img src="/2020/07/05/SpringMVC-04/1.png" alt></p><p><img src="/2020/07/05/SpringMVC-04/2.png" alt><br>è¿”å›falseï¼Œè·³è½¬åˆ°æç¤ºé¡µé¢ï¼Œè¯·æ±‚è¢«ç»ˆæ­¢ï¼Œä¸ä¼šæ‰§è¡ŒpreHandle()ä»¥åçš„æ–¹æ³•</p><p>å½“æœ‰å¤šä¸ªæ‹¦æˆªå™¨æ—¶<br><img src="/2020/07/05/SpringMVC-04/3.png" alt></p><blockquote><p>æ‹¦æˆªå™¨ä¸è¿‡æ»¤å™¨çš„åŒºåˆ«</p></blockquote><p>è¿‡æ»¤å™¨ï¼Œæ˜¯åœ¨java webä¸­å°†ä½ ä¼ å…¥çš„requestã€responseæå‰è¿‡æ»¤æ‰ä¸€äº›ä¿¡æ¯ï¼Œæˆ–è€…æå‰è®¾ç½®ä¸€äº›å‚æ•°ã€‚ç„¶åå†ä¼ å…¥Servletæˆ–Struts2çš„ actionè¿›è¡Œä¸šåŠ¡é€»è¾‘å¤„ç†ã€‚æ¯”å¦‚è¿‡æ»¤æ‰éæ³•urlï¼ˆï¼Œæˆ–è€…åœ¨ä¼ å…¥Servletæˆ–Struts2çš„actionå‰ç»Ÿä¸€è®¾ç½®å­—ç¬¦é›†ï¼Œæˆ–è€…å»é™¤æ‰ä¸€äº›éæ³•å­—ç¬¦ã€‚</p><p>é€šä¿—ç†è§£ï¼š<br>ï¼ˆ1ï¼‰è¿‡æ»¤å™¨ï¼ˆFilterï¼‰ï¼šå½“ä½ æœ‰ä¸€å †ä¸œè¥¿çš„æ—¶å€™ï¼Œä½ åªå¸Œæœ›é€‰æ‹©ç¬¦åˆä½ è¦æ±‚çš„æŸä¸€äº›ä¸œè¥¿ã€‚å®šä¹‰è¿™äº›è¦æ±‚çš„å·¥å…·ï¼Œå°±æ˜¯è¿‡æ»¤å™¨ã€‚<br>ï¼ˆ2ï¼‰æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰ï¼šåœ¨ä¸€ä¸ªæµç¨‹æ­£åœ¨è¿›è¡Œçš„æ—¶å€™ï¼Œä½ å¸Œæœ›å¹²é¢„å®ƒçš„è¿›å±•ï¼Œç”šè‡³ç»ˆæ­¢å®ƒè¿›è¡Œï¼Œè¿™æ˜¯æ‹¦æˆªå™¨åšçš„äº‹æƒ…ã€‚</p><h2 id="æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½"><a href="#æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½"></a>æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½</h2><h3 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h3><p>1ã€å¯¼å…¥ä¾èµ–</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- springmvc--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-webmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--æ–‡ä»¶ä¸Šä¼ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>commons-fileupload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>commons-fileupload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.3.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--servlet-apiå¯¼å…¥é«˜ç‰ˆæœ¬çš„--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>javax.servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>4.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>â€‹      2ã€å¦‚æœæƒ³ä½¿ç”¨Springçš„æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œåˆ™éœ€è¦åœ¨ä¸Šä¸‹æ–‡ä¸­é…ç½®MultipartResolver</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--æ–‡ä»¶ä¸Šä¼ é…ç½®--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>multipartResolver<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.springframework.web.multipart.commons.CommonsMultipartResolver<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>   <span class="token comment" spellcheck="true">&lt;!-- è¯·æ±‚çš„ç¼–ç æ ¼å¼ï¼Œå¿…é¡»å’ŒjSPçš„pageEncodingå±æ€§ä¸€è‡´ï¼Œä»¥ä¾¿æ­£ç¡®è¯»å–è¡¨å•çš„å†…å®¹ï¼Œé»˜è®¤ä¸ºISO-8859-1 --></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>defaultEncoding<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>   <span class="token comment" spellcheck="true">&lt;!-- ä¸Šä¼ æ–‡ä»¶å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼ˆ10485760=10Mï¼‰ --></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>maxUploadSize<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>10485760<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>maxInMemorySize<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>40960<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></code></pre><p>3ã€ç¼–å†™ä¸Šä¼ æ–‡ä»¶çš„è¡¨å•</p><pre class=" language-jsp"><code class="language-jsp"><%@ page contentType="text/html;charset=UTF-8" language="java" %><html><head>    <title>Title</title></head><body><form action="upload2" enctype="multipart/form-data" method="post">    <input type="file" name="file"/>    <input type="submit" value="upload"></form></body></html></code></pre><p>4ã€ç¼–å†™å¤„ç†æ–‡ä»¶ä¸Šä¼ çš„Controlleræ–¹æ³•</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Controller</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/upload"</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//@RequestParam("file") å°†name=fileæ§ä»¶å¾—åˆ°çš„æ–‡ä»¶å°è£…æˆCommonsMultipartFile å¯¹è±¡</span>    <span class="token comment" spellcheck="true">//æ‰¹é‡ä¸Šä¼ CommonsMultipartFileåˆ™ä¸ºæ•°ç»„å³å¯</span>    <span class="token keyword">public</span> String <span class="token function">fileUpload</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">"file"</span><span class="token punctuation">)</span> CommonsMultipartFile file<span class="token punctuation">,</span> HttpServletRequest request<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//è·å–æ–‡ä»¶å : file.getOriginalFilename();</span>        String uploadFileName <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å¦‚æœæ–‡ä»¶åä¸ºç©ºï¼Œç›´æ¥å›åˆ°é¦–é¡µï¼</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>uploadFileName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token string">"redirect:/index.jsp"</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¸Šä¼ æ–‡ä»¶å : "</span> <span class="token operator">+</span> uploadFileName<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//ä¸Šä¼ è·¯å¾„ä¿å­˜è®¾ç½®</span>        String path <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">"/upload"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å¦‚æœè·¯å¾„ä¸å­˜åœ¨ï¼Œåˆ›å»ºä¸€ä¸ª</span>        File realPath <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>realPath<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            realPath<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¸Šä¼ æ–‡ä»¶ä¿å­˜åœ°å€ï¼š"</span> <span class="token operator">+</span> realPath<span class="token punctuation">)</span><span class="token punctuation">;</span>        InputStream is <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//æ–‡ä»¶è¾“å…¥æµ</span>        OutputStream os <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>realPath<span class="token punctuation">,</span> uploadFileName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//æ–‡ä»¶è¾“å‡ºæµ</span>        <span class="token comment" spellcheck="true">//è¯»å–å†™å‡º</span>        <span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            os<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>            os<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        os<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"redirect:/index.jsp"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/*     * é‡‡ç”¨file.TransferTo æ¥ä¿å­˜ä¸Šä¼ çš„æ–‡ä»¶     */</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/upload2"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">fileUpload2</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">"file"</span><span class="token punctuation">)</span> CommonsMultipartFile file<span class="token punctuation">,</span> HttpServletRequest request<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//è·å–æ–‡ä»¶å : file.getOriginalFilename();</span>        String uploadFileName <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å¦‚æœæ–‡ä»¶åä¸ºç©ºï¼Œç›´æ¥å›åˆ°é¦–é¡µï¼</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>uploadFileName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token string">"redirect:/index.jsp"</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//ä¸Šä¼ è·¯å¾„ä¿å­˜è®¾ç½®</span>        String path <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">"/upload"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        File realPath <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>realPath<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            realPath<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//ä¸Šä¼ æ–‡ä»¶åœ°å€</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¸Šä¼ æ–‡ä»¶ä¿å­˜åœ°å€ï¼š"</span> <span class="token operator">+</span> realPath<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//é€šè¿‡CommonsMultipartFileçš„æ–¹æ³•ç›´æ¥å†™æ–‡ä»¶ï¼ˆæ³¨æ„è¿™ä¸ªæ—¶å€™ï¼‰</span>        file<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>realPath <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> file<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"redirect:/index.jsp"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="æ–‡ä»¶ä¸‹è½½"><a href="#æ–‡ä»¶ä¸‹è½½" class="headerlink" title="æ–‡ä»¶ä¸‹è½½"></a>æ–‡ä»¶ä¸‹è½½</h3><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/download"</span><span class="token punctuation">)</span><span class="token keyword">public</span> String <span class="token function">downloads</span><span class="token punctuation">(</span>HttpServletResponse response <span class="token punctuation">,</span> HttpServletRequest request<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception<span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//è¦ä¸‹è½½çš„å›¾ç‰‡åœ°å€</span>    String  path <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">"/upload"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    String  fileName <span class="token operator">=</span> <span class="token string">"åŸºç¡€è¯­æ³•.png"</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//1ã€è®¾ç½®response å“åº”å¤´</span>    response<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//è®¾ç½®é¡µé¢ä¸ç¼“å­˜,æ¸…ç©ºbuffer</span>    response<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//å­—ç¬¦ç¼–ç </span>    response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"multipart/form-data"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//äºŒè¿›åˆ¶ä¼ è¾“æ•°æ®</span>    <span class="token comment" spellcheck="true">// åˆ¤æ–­æµè§ˆå™¨ç±»å‹</span>    String ua <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"User-Agent"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    String str<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// åˆ¤æ–­æ˜¯å¦æ˜¯ç«ç‹æµè§ˆå™¨</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>ua<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"Firefox"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// ä½¿ç”¨ä¸‹é¢çš„æ ¼å¼è¿›è¡ŒBASE64 ç¼–ç å</span>        str <span class="token operator">=</span> <span class="token string">"=?utf-8?B?"</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">BASE64Encoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>fileName<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"?="</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// æŠŠä¸­æ–‡åè¿›è¡ŒUTF-8 ç¼–ç æ“ä½œ</span>        str <span class="token operator">=</span> URLEncoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> <span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//è®¾ç½®å“åº”å¤´</span>    response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Disposition"</span><span class="token punctuation">,</span>            <span class="token string">"attachment;fileName="</span><span class="token operator">+</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>    File file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//2ã€ è¯»å–æ–‡ä»¶--è¾“å…¥æµ</span>    InputStream input<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//3ã€ å†™å‡ºæ–‡ä»¶--è¾“å‡ºæµ</span>    OutputStream out <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buff <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> index<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//4ã€æ‰§è¡Œ å†™å‡ºæ“ä½œ</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>index<span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buff<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buff<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>        out<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"redirect:/index.jsp"</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-jsp"><code class="language-jsp"><a href="download">ä¸‹è½½</a></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringMVC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SSMæ•´åˆå¼€å‘</title>
      <link href="2020/07/04/SpringMVC-03/"/>
      <url>2020/07/04/SpringMVC-03/</url>
      
        <content type="html"><![CDATA[<p>SSMï¼šSpringMVC + Spring +MyBatis</p><p>SpringMVCï¼šè§†å›¾å±‚ï¼Œç”¨äºæ¥æ”¶é¡µé¢è¯·æ±‚ï¼Œæ˜¾ç¤ºå¤„ç†ç»“æœ<br>Springï¼šä¸šåŠ¡å±‚ï¼Œç®¡ç†serviceï¼Œdaoï¼Œå·¥å…·ç±»å¯¹è±¡<br>Mybatisï¼šæŒä¹…å±‚ï¼Œè®¿é—®æ•°æ®åº“</p><p>ç”¨æˆ·å‘èµ·è¯·æ±‚â€”&gt;SpringMVCæ¥æ”¶â€”&gt;Springä¸­è°ƒç”¨çš„Serviceå¯¹è±¡å¤„ç†äº‹åŠ¡â€”&gt;MyBatiså¤„ç†æ•°æ®</p><h2 id="1ã€æ•´åˆçš„æ€è·¯"><a href="#1ã€æ•´åˆçš„æ€è·¯" class="headerlink" title="1ã€æ•´åˆçš„æ€è·¯"></a>1ã€æ•´åˆçš„æ€è·¯</h2><p>åœ¨è¿›è¡Œæ•´åˆæ—¶ï¼Œæœ‰ä¸¤ä¸ªå®¹å™¨å¯¹è±¡<br>1ã€SpringMVCå®¹å™¨ï¼Œç®¡ç†Controlleræ§åˆ¶å™¨å¯¹è±¡<br>2ã€Springå®¹å™¨ï¼Œç®¡ç†Serviceï¼ŒDaoï¼Œå·¥å…·ç±»å¯¹è±¡<br>æˆ‘ä»¬è¦æŠŠä½¿ç”¨çš„å¯¹è±¡äº¤ç»™åˆé€‚çš„å®¹å™¨å»åˆ›å»ºï¼Œç®¡ç†ã€‚<br>æŠŠControllerè¿˜æœ‰webå¼€å‘ç›¸å…³å¯¹è±¡äº¤ç»™SpringMVCå®¹å™¨ï¼Œå°†è¿™äº›webä½¿ç”¨çš„å¯¹è±¡å†™åœ¨springmvcé…ç½®æ–‡ä»¶ä¸­ã€‚<br>æŠŠServiceï¼ŒDaoå¯¹è±¡å®šä¹‰åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œè®©Springç®¡ç†è¿™äº›å¯¹è±¡ã€‚</p><p> <strong>ä¸¤ä¸ªå®¹å™¨ä¹‹é—´çš„å…³ç³»ï¼š</strong><br>SpringMVCå®¹å™¨æ˜¯Springçš„å­å®¹å™¨ï¼Œç±»ä¼¼äºJavaä¸­çš„å­çˆ¶ç±»å…³ç³»â€”â€”å­ç±»å¯ä»¥è®¿é—®çˆ¶ç±»çš„æ•°æ®ã€‚<br>å³åœ¨å­å®¹å™¨SpringMVCä¸­çš„Controllerå¯ä»¥è®¿é—®çˆ¶å®¹å™¨Springä¸­çš„Serviceå¯¹è±¡ï¼Œå°±å¯ä»¥å®ç°Controllerä½¿ç”¨Serviceå¯¹è±¡ã€‚</p><h2 id="2ã€æ•´åˆçš„æ­¥éª¤"><a href="#2ã€æ•´åˆçš„æ­¥éª¤" class="headerlink" title="2ã€æ•´åˆçš„æ­¥éª¤"></a>2ã€æ•´åˆçš„æ­¥éª¤</h2><p>ä½¿ç”¨ä¹‹å‰åˆ›å»ºå¥½çš„mybatisæ•°æ®åº“ï¼Œä½¿ç”¨studentè¡¨</p><h3 id="1ã€åˆ›å»ºmaven-webé¡¹ç›®"><a href="#1ã€åˆ›å»ºmaven-webé¡¹ç›®" class="headerlink" title="1ã€åˆ›å»ºmaven webé¡¹ç›®"></a>1ã€åˆ›å»ºmaven webé¡¹ç›®</h3><h3 id="2ã€åŠ å…¥ä¾èµ–"><a href="#2ã€åŠ å…¥ä¾èµ–" class="headerlink" title="2ã€åŠ å…¥ä¾èµ–"></a>2ã€åŠ å…¥ä¾èµ–</h3><p>springmvcï¼Œspringï¼Œmybatisä¸‰ä¸ªæ¡†æ¶çš„ä¾èµ–ï¼Œjacksonä¾èµ–ï¼Œmysqlé©±åŠ¨ï¼Œdruidè¿æ¥æ± ï¼Œjsp,servletä¾èµ–</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>4.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- servletä¾èµ–--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>javax.servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- jspä¾èµ–--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.servlet.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jsp-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.2.1-b03<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--springmvcä¾èµ–--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-webmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--äº‹åŠ¡--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-tx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--jackson--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jackson-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.9.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jackson-databind<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.9.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--mybatis--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-spring<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.5.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!--mysql--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>8.0.19<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--druid--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.1.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">></span></span>src/main/java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--æ‰€åœ¨çš„ç›®å½•--></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--åŒ…æ‹¬ç›®å½•ä¸‹çš„.properties,.xml æ–‡ä»¶éƒ½ä¼šæ‰«æåˆ°--></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">></span></span>**/*.properties<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">></span></span>**/*.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filtering</span><span class="token punctuation">></span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filtering</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>maven-compiler-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>source</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">></span></span></code></pre><h3 id="3ã€å†™web-xml"><a href="#3ã€å†™web-xml" class="headerlink" title="3ã€å†™web.xml"></a>3ã€å†™web.xml</h3><p>1ã€æ³¨å†Œä¸­å¤®å¤„ç†å™¨DispatcherServletï¼Œ<br>ç›®çš„ï¼š1ã€åˆ›å»ºspringmvcå®¹å™¨å¯¹è±¡ï¼Œæ‰èƒ½åˆ›å»ºControllerå¯¹è±¡ï¼›2ã€åˆ›å»ºçš„æ˜¯Servletï¼Œæ‰èƒ½æ¥æ”¶ç”¨æˆ·çš„è¯·æ±‚ã€‚</p><p>2ã€æ³¨å†Œç›‘å¬å™¨ContextLoaderListenerï¼Œ<br>ç›®çš„ï¼šåˆ›å»ºspringå®¹å™¨å¯¹è±¡ï¼Œæ‰èƒ½åˆ›å»ºserviceï¼Œdaoç­‰å¯¹è±¡</p><p>3ã€æ³¨å†Œå­—ç¬¦é›†è¿‡æ»¤å™¨CharacterEncodingFilterï¼Œ<br>ç›®çš„ï¼šè§£å†³postè¯·æ±‚ä¹±ç </p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://xmlns.jcp.org/xml/ns/javaee<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd<span class="token punctuation">"</span></span>         <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>4.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--  æ³¨å†Œä¸­å¤®è°ƒåº¦å™¨  --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>myweb<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>org.springframework.web.servlet.DispatcherServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>classpath:conf/springmvc.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>load-on-startup</span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>load-on-startup</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>myweb<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>*.do<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!-- æ³¨å†Œç›‘å¬å™¨  ç”¨äºåˆ›å»ºSpringå®¹å™¨   --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>classpath:conf/application.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener-class</span><span class="token punctuation">></span></span>org.springframework.web.context.ContextLoaderListener<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener-class</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--æ³¨å†Œå­—ç¬¦é›†è¿‡æ»¤å™¨--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>characterEncodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">></span></span>org.springframework.web.filter.CharacterEncodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>encoding<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>utf-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>forceRequestEncoding<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>forceResponseEncoding<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>characterEncodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">></span></span></code></pre><h3 id="4ã€åˆ›å»ºåŒ…"><a href="#4ã€åˆ›å»ºåŒ…" class="headerlink" title="4ã€åˆ›å»ºåŒ…"></a>4ã€åˆ›å»ºåŒ…</h3><p>åˆ›å»ºcontrollerã€serviceã€daoã€beanåŒ…<br><img src="/2020/07/04/SpringMVC-03/1.png" alt></p><h3 id="5ã€å†™springmvcï¼Œspringï¼Œmybatisçš„é…ç½®æ–‡ä»¶"><a href="#5ã€å†™springmvcï¼Œspringï¼Œmybatisçš„é…ç½®æ–‡ä»¶" class="headerlink" title="5ã€å†™springmvcï¼Œspringï¼Œmybatisçš„é…ç½®æ–‡ä»¶"></a>5ã€å†™springmvcï¼Œspringï¼Œmybatisçš„é…ç½®æ–‡ä»¶</h3><p>1ã€springmvc.xml</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/context<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>mvc</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/mvc<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans       http://www.springframework.org/schema/beans/spring-beans.xsd       http://www.springframework.org/schema/context       https://www.springframework.org/schema/context/spring-context.xsd       http://www.springframework.org/schema/mvc       https://www.springframework.org/schema/mvc/spring-mvc.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--springmvcé…ç½®æ–‡ä»¶ï¼Œå£°æ˜ controllerå’Œå®ƒç›¸å…³çš„å¯¹è±¡--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.controller<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!--è§†å›¾è§£æå™¨--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.springframework.web.servlet.view.InternalResourceViewResolver<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>prefix<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/WEB-INF/jsp/<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>suffix<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>.jsp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--æ³¨è§£é©±åŠ¨--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span></code></pre><p>2ã€applicationContext.xml</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/context<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans       http://www.springframework.org/schema/beans/spring-beans.xsd        http://www.springframework.org/schema/context       https://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--  å°†æ•°æ®åº“é…ç½®æ–‡ä»¶å†™å…¥å•ç‹¬çš„æ–‡ä»¶ä¸­        --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placeholder</span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>classpath:conf/jdbc.properties<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!--å£°æ˜æ•°æ®æº  ç”¨äºè¿æ¥æ•°æ®åº“--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myDataSource<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">"</span></span>          <span class="token attr-name">init-method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>init<span class="token punctuation">"</span></span> <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>close<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${jdbc.url}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${jdbc.username}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${jdbc.password}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>maxActive<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${jdbc.maxActive}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--å£°æ˜mybatisä¸­çš„SqlSessionFactoryBean ç”¨äºåˆ›å»ºSqlSessionFactoryå¯¹è±¡    --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sqlSessionFactory<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.mybatis.spring.SqlSessionFactoryBean<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- setæ³¨å…¥ï¼ŒæŠŠæ•°æ®åº“è¿æ¥æ± èµ‹å€¼ç»™dateSourceå±æ€§--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myDataSource<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment" spellcheck="true">&lt;!-- mybatisä¸»é…ç½®æ–‡ä»¶çš„ä½ç½®--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>configLocation<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>classpath:conf/mybatisConfig.xml<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- å£°æ˜Daoç±»         MapperScannerConfigurer:åœ¨å†…éƒ¨è°ƒç”¨getMapper()ç”Ÿæˆæ¯ä¸€ä¸ªæ¥å£çš„daoä»£ç†å¯¹è±¡         åˆ›å»ºå¥½çš„daoå¯¹è±¡æ”¾åœ¨springå®¹å™¨ä¸­ï¼Œé»˜è®¤åç§°ä¸º æ¥å£åé¦–å­—æ¯å°å†™--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.mybatis.spring.mapper.MapperScannerConfigurer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sqlSessionFactoryBeanName<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sqlSessionFactory<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>basePackage<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.dao<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--  å£°æ˜serviceçš„æ³¨è§£@Serviceæ‰€åœ¨çš„åŒ…åä½ç½®  --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.service<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!--  äº‹åŠ¡é…ç½®ï¼šæ³¨è§£çš„é…ç½®æˆ–aspectjçš„é…ç½®  --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span></code></pre><p>3ã€mybatisConfig.xml</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span><span class="token doctype">&lt;!DOCTYPE configuration        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-config.dtd"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--  æ³¨å†Œæ˜ å°„æ–‡ä»¶  --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.dao<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span></code></pre><p>4ã€jdbc.properties</p><pre><code>jdbc.url=jdbc:mysql://localhost:3306/mybatis?serverTimezone=Asia/Shanghaijdbc.username=rootjdbc.password=2824199842jdbc.maxActive=20</code></pre><h3 id="6ã€ç¼–å†™å„ä¸ªåŒ…çš„ä»£ç "><a href="#6ã€ç¼–å†™å„ä¸ªåŒ…çš„ä»£ç " class="headerlink" title="6ã€ç¼–å†™å„ä¸ªåŒ…çš„ä»£ç "></a>6ã€ç¼–å†™å„ä¸ªåŒ…çš„ä»£ç </h3><p>beanå®ä½“ç±»</p><p>daoæ¥å£å’Œmapperæ–‡ä»¶</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>dao<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>zyz<span class="token punctuation">.</span>bean<span class="token punctuation">.</span>Employee<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>List<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmployeeDao</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">insertEmp</span><span class="token punctuation">(</span>Employee employee<span class="token punctuation">)</span><span class="token punctuation">;</span>    List<span class="token operator">&lt;</span>Employee<span class="token operator">></span> <span class="token function">listAllEmps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8" ?></span><span class="token doctype">&lt;!DOCTYPE mapper        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" ></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.dao.EmployeeDao<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>listAllEmps<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.bean.Employee<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select name,gender,email,dept_id deptId from employee order by id asc    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>insertEmp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        insert into employee(name,gender,email,dept_id) values (#{name},#{gender},#{email},#{deptId})    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">></span></span></code></pre><p>serviceåŠå…¶å®ç°ç±»</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmployeeService</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> <span class="token function">addEmp</span><span class="token punctuation">(</span>Employee employee<span class="token punctuation">)</span><span class="token punctuation">;</span>    List<span class="token operator">&lt;</span>Employee<span class="token operator">></span> <span class="token function">listAllEmps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmployeeServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">EmployeeService</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å¼•ç”¨ç±»å‹è‡ªåŠ¨æ³¨å…¥@Autowired,@Resource    daoå¯¹è±¡å°±åœ¨Springå®¹å™¨ä¸­</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> EmployeeDao employeeDao<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">addEmp</span><span class="token punctuation">(</span>Employee employee<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> employeeDao<span class="token punctuation">.</span><span class="token function">insertEmp</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Employee<span class="token operator">></span> <span class="token function">listAllEmps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> employeeDao<span class="token punctuation">.</span><span class="token function">listAllEmps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>controller</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Controller</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/employee"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmployeeController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> EmployeeService employeeService<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å‘˜å·¥æ³¨å†Œ</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/addEmployee.do"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> ModelAndView <span class="token function">addStudent</span><span class="token punctuation">(</span>Employee employee<span class="token punctuation">)</span><span class="token punctuation">{</span>        ModelAndView modelAndView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String tips <span class="token operator">=</span> <span class="token string">"æ³¨å†Œå¤±è´¥"</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è°ƒç”¨service</span>        <span class="token keyword">int</span> num <span class="token operator">=</span> employeeService<span class="token punctuation">.</span><span class="token function">addEmp</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>num<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// æ³¨å†ŒæˆåŠŸ</span>            tips<span class="token operator">=</span><span class="token string">"æ³¨å†ŒæˆåŠŸï¼"</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// æ·»åŠ æ•°æ®</span>        modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"tips"</span><span class="token punctuation">,</span>tips<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æŒ‡å®šç»“æœé¡µé¢</span>        modelAndView<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"result"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> modelAndView<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// å‘˜å·¥æŸ¥è¯¢</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/listAllEmps.do"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ResponseBody</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Employee<span class="token operator">></span> <span class="token function">listAllEmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> employeeService<span class="token punctuation">.</span><span class="token function">listAllEmps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="7ã€ç¼–å†™é¡µé¢"><a href="#7ã€ç¼–å†™é¡µé¢" class="headerlink" title="7ã€ç¼–å†™é¡µé¢"></a>7ã€ç¼–å†™é¡µé¢</h3><pre class=" language-jsp"><code class="language-jsp"><%@ page contentType="text/html;charset=UTF-8" language="java" %><%String basePath = request.getContextPath()+"/";%><html><head>    <title>é¦–é¡µ</title>    <base href="<%=basePath%>"/></head><body>    <div align="center">        <img src="images/yy.jpg" style="width: 200px;height: 200px">        <table>            <tr>                <td><a href="addEmployee.jsp">æ³¨å†Œå‘˜å·¥</a></td>            </tr>            <tr>                <td><a href="listAllEmployee.jsp">æµè§ˆå‘˜å·¥</a></td>            </tr>        </table>    </div></body></html></code></pre><pre class=" language-jsp"><code class="language-jsp"><%@ page contentType="text/html;charset=UTF-8" language="java" %><%String basePath = request.getContextPath() + "/";%><html><head>    <title>æ³¨å†Œå‘˜å·¥</title>    <base href="<%=basePath%>"/></head><body><div align="center">    <form action="employee/addEmployee.do" method="post">        <table>            <tr>                <td>å§“åï¼š</td>                <td><input type="text" name="name"/></td>            </tr>            <tr>                <td>æ€§åˆ«ï¼š</td>                <td><input type="radio" name="gender" value="1"/>ç”·&nbsp;&nbsp;&nbsp;                    <input type="radio" name="gender" value="0"/>å¥³                </td>            </tr>            <tr>                <td>ç”µå­é‚®ç®±ï¼š</td>                <td><input type="text" name="email"/></td>            </tr>            <tr>                <td>éƒ¨é—¨ç¼–å·ï¼š</td>                <td><input type="number" name="deptId"/></td>            </tr>            <tr>                <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>                <td><input type="submit" value="æ³¨å†Œ"/></td>            </tr>        </table>    </form></div></body></html></code></pre><pre class=" language-jsp"><code class="language-jsp"><%@ page contentType="text/html;charset=UTF-8" language="java" %><%String basePath = request.getContextPath() + "/";%><html><head>    <title>æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥</title>    <base href="<%=basePath%>"/>    <script type="text/javascript" src="js/jquery-3.4.1.js"></script>    <script type="text/javascript">        $(function () {            // å½“å‰é¡µé¢domå¯¹è±¡åŠ è½½åï¼Œç«‹å³æ‰§è¡Œ            loadEmpData();        })        function loadEmpData() {            $.ajax({                url: "employee/listAllEmps.do",                type: "get",                dataType: "json",                success: function (data) {                    // alert(data);                    // æ¸…é™¤æ—§æ•°æ®                    $("#info").html("");                    $.each(data, function (k, v) {                        $("#info").append("<tr>")                            .append("<td>" + v.name + "</td>")                            .append("<td>" + v.gender + "</td>")                            .append("<td>" + v.email + "</td>")                            .append("<td>" + v.deptId + "</td>")                    })                }            })        }    </script></head><body><div align="center">    <table border="1" cellspacing="0">        <tr>            <th>å§“å</th>            <th>æ€§åˆ«</th>            <th>ç”µå­é‚®ç®±</th>            <th>éƒ¨é—¨ç¼–å·</th>        </tr>        <tr>            <tbody id="info"></tbody>        </tr>    </table></div></body></html></code></pre><p><strong>é¡¹ç›®æ•´ä½“ç»“æ„ï¼š</strong><br><img src="/2020/07/04/SpringMVC-03/2.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
            <tag> Spring </tag>
            
            <tag> SpringMVC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringMVCä¸­çš„æ§åˆ¶å™¨</title>
      <link href="2020/06/30/SpringMVC-02/"/>
      <url>2020/06/30/SpringMVC-02/</url>
      
        <content type="html"><![CDATA[<h2 id="1ã€å¯¹è¯·æ±‚æäº¤æ–¹å¼çš„å®šä¹‰"><a href="#1ã€å¯¹è¯·æ±‚æäº¤æ–¹å¼çš„å®šä¹‰" class="headerlink" title="1ã€å¯¹è¯·æ±‚æäº¤æ–¹å¼çš„å®šä¹‰"></a>1ã€å¯¹è¯·æ±‚æäº¤æ–¹å¼çš„å®šä¹‰</h2><p>@RequestMapping è¯·æ±‚æ˜ å°„<br>å±æ€§:<br>value,è¡¨ç¤ºæ‰€åŒ¹é…è¯·æ±‚çš„URI<br>method,è¡¨ç¤ºè¯·æ±‚çš„æ–¹å¼ï¼š<br>getè¯·æ±‚: RequestMethod.GET<br>postè¯·æ±‚: RequestMethod.POST</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/some.do"</span><span class="token punctuation">,</span>method<span class="token operator">=</span> RequestMethod<span class="token punctuation">.</span>GET<span class="token punctuation">)</span><span class="token keyword">public</span> ModelAndView <span class="token function">doSome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><h2 id="2ã€å¤„ç†å™¨çš„è¯·æ±‚å‚æ•°"><a href="#2ã€å¤„ç†å™¨çš„è¯·æ±‚å‚æ•°" class="headerlink" title="2ã€å¤„ç†å™¨çš„è¯·æ±‚å‚æ•°"></a>2ã€å¤„ç†å™¨çš„è¯·æ±‚å‚æ•°</h2><p>å¤„ç†å™¨æ–¹æ³•å¯ä»¥åŒ…å«ä»¥ä¸‹å››ç±»å‚æ•°ï¼Œè¿™äº›å‚æ•°ä¼šåœ¨ç³»ç»Ÿè°ƒç”¨æ—¶ç”±ç³»ç»Ÿè‡ªåŠ¨èµ‹å€¼ï¼Œå³ç¨‹åºå‘˜å¯åœ¨æ–¹æ³•å†…ç›´æ¥ä½¿ç”¨ã€‚<br>â¢ HttpServletRequest<br>â¢ HttpServletResponse<br>â¢ HttpSession<br>â¢ è¯·æ±‚ä¸­æ‰€æºå¸¦çš„è¯·æ±‚å‚æ•°</p><h3 id="1ã€é€ä¸ªå‚æ•°æ¥æ”¶"><a href="#1ã€é€ä¸ªå‚æ•°æ¥æ”¶" class="headerlink" title="1ã€é€ä¸ªå‚æ•°æ¥æ”¶"></a>1ã€é€ä¸ªå‚æ•°æ¥æ”¶</h3><p>ä¿è¯è¯·æ±‚å‚æ•°åä¸è¯¥è¯·æ±‚å¤„ç†æ–¹æ³•çš„å‚æ•°åç›¸åŒã€‚</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/**     * ä¿è¯è¯·æ±‚å‚æ•°åä¸è¯¥è¯·æ±‚å¤„ç†æ–¹æ³•çš„å‚æ•°åç›¸åŒã€‚     * æ¡†æ¶æ¥æ”¶è¯·æ±‚å‚æ•°     * 1ã€ä½¿ç”¨requestå¯¹è±¡æ¥æ”¶è¯·æ±‚å‚æ•°     * 2ã€springmvcæ¡†æ¶é€šè¿‡DispatcherServlet è°ƒç”¨myControllerä¸­çš„doSome()     * å¹¶æŒ‰åç§°å¯¹åº”ï¼ŒæŠŠæ¥æ”¶åˆ°çš„å‚æ•°èµ‹å€¼ç»™å½¢å‚ï¼Œæ¡†æ¶ä¼šæä¾›ç±»å‹è‡ªåŠ¨è½¬æ¢åŠŸèƒ½     * @param name     * @param age     * @return     */</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/other.do"</span><span class="token punctuation">,</span>method <span class="token operator">=</span> RequestMethod<span class="token punctuation">.</span>POST<span class="token punctuation">)</span><span class="token keyword">public</span> ModelAndView <span class="token function">doOther</span><span class="token punctuation">(</span>String name<span class="token punctuation">,</span>Integer age<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><p>400é”™è¯¯ç ï¼šå®¢æˆ·ç«¯é”™è¯¯ï¼Œè¡¨ç¤ºæäº¤è¯·æ±‚æ—¶å‡ºç°äº†é”™è¯¯</p><h3 id="2ã€è§£å†³ä¸­æ–‡ä¹±ç "><a href="#2ã€è§£å†³ä¸­æ–‡ä¹±ç " class="headerlink" title="2ã€è§£å†³ä¸­æ–‡ä¹±ç "></a>2ã€è§£å†³ä¸­æ–‡ä¹±ç </h3><p>æäº¤è¯·æ±‚å‚æ•°æ—¶ï¼Œgetæ–¹å¼æ²¡æœ‰ä¹±ç ï¼Œpostæ–¹å¼å‡ºç°ä¸­æ–‡ä¹±ç ã€‚<br>ä½¿ç”¨æ¡†æ¶æä¾›çš„è¿‡æ»¤å™¨è§£å†³ä¹±ç ï¼š</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- æ³¨å†Œè¿‡æ»¤å™¨ï¼Œè§£å†³postè¯·æ±‚çš„ä¹±ç é—®é¢˜--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>characterEncodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">></span></span>org.springframework.web.filter.CharacterEncodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--è®¾ç½®é¡¹ç›®ä¸­çš„å­—ç¬¦ç¼–ç --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>encoding<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>utf-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- å¼ºåˆ¶è¯·æ±‚å¯¹è±¡(HttpServletRequest)ä½¿ç”¨encodingç¼–ç å€¼--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>forceRequestEncoding<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- å¼ºåˆ¶å“åº”å¯¹è±¡(HttpServletResponse)ä½¿ç”¨encodingç¼–ç å€¼--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>forceResponseEncoding<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>characterEncodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">></span></span></code></pre><h3 id="3ã€-RequestParamæ ¡æ­£è¯·æ±‚å‚æ•°"><a href="#3ã€-RequestParamæ ¡æ­£è¯·æ±‚å‚æ•°" class="headerlink" title="3ã€@RequestParamæ ¡æ­£è¯·æ±‚å‚æ•°"></a>3ã€@RequestParamæ ¡æ­£è¯·æ±‚å‚æ•°</h3><p>è‹¥è¯·æ±‚URL æ‰€æºå¸¦çš„å‚æ•°åç§°ä¸å¤„ç†æ–¹æ³•ä¸­æŒ‡å®šçš„å‚æ•°åä¸ç›¸åŒæ—¶ï¼Œåˆ™éœ€åœ¨å¤„ç†æ–¹æ³•å‚æ•°å‰ï¼Œæ·»åŠ ä¸€ä¸ªæ³¨è§£@RequestParam(â€œè¯·æ±‚å‚æ•°åâ€)ï¼ŒæŒ‡å®šè¯·æ±‚URL æ‰€æºå¸¦å‚æ•°çš„åç§°ã€‚</p><p><img src="/2020/06/30/SpringMVC-02/1.png" alt> </p><p><img src="/2020/06/30/SpringMVC-02/2.png" alt></p><h3 id="4ã€å¯¹è±¡å‚æ•°æ¥æ”¶"><a href="#4ã€å¯¹è±¡å‚æ•°æ¥æ”¶" class="headerlink" title="4ã€å¯¹è±¡å‚æ•°æ¥æ”¶"></a>4ã€å¯¹è±¡å‚æ•°æ¥æ”¶</h3><p>å°†å¤„ç†å™¨æ–¹æ³•çš„å‚æ•°å®šä¹‰ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œåªè¦ä¿è¯<strong>è¯·æ±‚å‚æ•°åä¸è¿™ä¸ªå¯¹è±¡çš„å±æ€§åŒå</strong>å³å¯ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> Integer age<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">Student</span><span class="token punctuation">(</span>String name<span class="token punctuation">,</span> Integer age<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Integer <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span>Integer age<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/other.do"</span><span class="token punctuation">,</span>method <span class="token operator">=</span> RequestMethod<span class="token punctuation">.</span>POST<span class="token punctuation">)</span>    <span class="token keyword">public</span> ModelAndView <span class="token function">doOther</span><span class="token punctuation">(</span>Student student<span class="token punctuation">)</span><span class="token punctuation">{</span>        ModelAndView modelAndView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"student"</span><span class="token punctuation">,</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æŒ‡å®šè§†å›¾ æ¡†æ¶å¯¹è§†å›¾æ‰§è¡Œforwardæ“ä½œ</span>        modelAndView<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"show"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è¿”å›modelAndView</span>        <span class="token keyword">return</span> modelAndView<span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><pre class=" language-jsp"><code class="language-jsp"><%@ page contentType="text/html;charset=UTF-8" language="java" %><html><head>    <title>show.jsp</title></head><body>    <p>nameï¼š${student.name}</p>    <p>ageï¼š${student.age}</p></body></html></code></pre><h2 id="3ã€å¤„ç†å™¨æ–¹æ³•çš„è¿”å›å€¼"><a href="#3ã€å¤„ç†å™¨æ–¹æ³•çš„è¿”å›å€¼" class="headerlink" title="3ã€å¤„ç†å™¨æ–¹æ³•çš„è¿”å›å€¼"></a>3ã€å¤„ç†å™¨æ–¹æ³•çš„è¿”å›å€¼</h2><h3 id="1ã€è¿”å›ModelAndView"><a href="#1ã€è¿”å›ModelAndView" class="headerlink" title="1ã€è¿”å›ModelAndView"></a>1ã€è¿”å›ModelAndView</h3><p>å¤„ç†å™¨æ–¹æ³•å¤„ç†å®Œåï¼Œéœ€è¦è·³è½¬åˆ°å…¶ä»–èµ„æºï¼Œå¹¶ä¸”è¦åœ¨è·³è½¬çš„èµ„æºä¹‹é—´ä¼ é€’æ•°æ®ã€‚</p><h3 id="2ã€è¿”å›String"><a href="#2ã€è¿”å›String" class="headerlink" title="2ã€è¿”å›String"></a>2ã€è¿”å›String</h3><p>è§†å›¾è·³è½¬ï¼Œä¸ä¼ é€’æ•°æ®ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Controller</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/returnView.do"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">doRetyrnView</span><span class="token punctuation">(</span>String name<span class="token punctuation">,</span>Integer age<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// show  é€»è¾‘è§†å›¾åç§°ã€‚é¡¹ç›®ä¸­é…ç½®äº†è§†å›¾è§£æå™¨</span>        <span class="token comment" spellcheck="true">// æ¡†æ¶å¯¹è§†å›¾è¿›è¡Œforwardè½¬å‘æ“ä½œ</span>        <span class="token keyword">return</span> <span class="token string">"show"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="3ã€è¿”å›void"><a href="#3ã€è¿”å›void" class="headerlink" title="3ã€è¿”å›void"></a>3ã€è¿”å›void</h3><p>ä¸èƒ½è¡¨ç¤ºæ•°æ®ï¼Œä¹Ÿä¸èƒ½è¡¨ç¤ºè§†å›¾ã€‚<br>åœ¨å¤„ç†ajaxçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨voidè¿”å›å€¼ã€‚é€šè¿‡HttpServletResponseè¾“å‡ºæ•°æ®ï¼Œå“åº”ajaxè¯·æ±‚ã€‚<br>ajaxè¯·æ±‚æœåŠ¡ç«¯è¿”å›çš„å°±æ˜¯æ•°æ®ï¼Œä¸è§†å›¾æ— å…³ã€‚</p><p>step1ï¼šæœåŠ¡ç«¯å‘æµè§ˆå™¨ä¼ å›çš„æ˜¯JSON æ•°æ®ï¼Œéœ€è¦ä½¿ç”¨ä¸€ä¸ªå·¥å…·ç±»å°†å­—ç¬¦ä¸²åŒ…è£…ä¸ºJSON æ ¼å¼ï¼Œæ‰€ä»¥éœ€è¦å¯¼å…¥JSON çš„ä¾èµ–ã€‚</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jackson-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.9.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jackson-databind<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.9.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p> step2ï¼šå¼•å…¥jquery<br><img src="/2020/06/30/SpringMVC-02/3.png" alt></p><p>step3ï¼šå‘èµ·ajaxè¯·æ±‚</p><pre class=" language-jsp"><code class="language-jsp"><%@ page contentType="text/html;charset=UTF-8" language="java" %><html><head>    <title>index.jsp</title>    <script type="text/javascript" src="js/jquery-3.4.1.js"></script>    <script type="text/javascript">        $(function(){            $("#btn").click(function(){                // alert("button click")                $.ajax({                    url:"returnVoid-ajax.do",                    data:{                        name:"zyz",                        age:21                    },                    type:"post",                    dataType:"json",                    // respæ˜¯æœåŠ¡å™¨ç«¯è¿”å›çš„jsonæ ¼å¼çš„å­—ç¬¦ä¸²                    // jqueryä¼šæŠŠjsonå­—ç¬¦ä¸²è½¬åŒ–ä¸ºjsonå¯¹è±¡ï¼Œèµ‹å€¼ç»™å½¢å‚                    success:function(resp){                        alert("name:"+resp.name+" age:"+resp.age);                    }                })            })        })    </script></head><body>    <button id="btn">å‘èµ·ajaxè¯·æ±‚</button></body></code></pre><p>step4ï¼šå“åº”ajaxè¯·æ±‚</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/returnVoid-ajax.do"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doReturnVoidAjax</span><span class="token punctuation">(</span>HttpServletResponse resp<span class="token punctuation">,</span> String name<span class="token punctuation">,</span> Integer age<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"name:"</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"age:"</span> <span class="token operator">+</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å¤„ç†ajaxè¯·æ±‚  ä½¿ç”¨jsonæ•°æ®æ ¼å¼</span>    Student student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å°†æ•°æ®è½¬æ¢ä¸ºjsonæ ¼å¼</span>    String studentJson<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>student <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>        ObjectMapper objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         studentJson<span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"studentçš„jsonæ ¼å¼ï¼š"</span><span class="token operator">+</span>studentJson<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// respè¾“å‡ºæ•°æ®åˆ°é¡µé¢ï¼Œå“åº”ajaxè¯·æ±‚</span>    resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"application/json;charset=utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    PrintWriter writer <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    writer<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>studentJson<span class="token punctuation">)</span><span class="token punctuation">;</span>    writer<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    writer<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="4ã€è¿”å›Object"><a href="#4ã€è¿”å›Object" class="headerlink" title="4ã€è¿”å›Object"></a>4ã€è¿”å›Object</h3><p>å¤„ç†å™¨è¿”å›çš„å¯¹è±¡ä¸æ˜¯ä½œä¸ºé€»è¾‘è§†å›¾å‡ºç°çš„ï¼Œè€Œæ˜¯ä½œä¸ºç›´æ¥åœ¨é¡µé¢æ˜¾ç¤ºçš„æ•°æ®å‡ºç°ã€‚<br>å¯ä»¥ä½¿ç”¨å¯¹è±¡è¡¨ç¤ºæ•°æ®ï¼Œå“åº”ajaxè¯·æ±‚ã€‚<br>å°†å¯¹è±¡ç±»å‹è½¬æ¢ä¸ºjsonç±»å‹ ä»¥åŠ å°†ç»“æœæ•°æ®è¾“å‡ºåˆ°é¡µé¢ï¼Œspringmvcæ¡†æ¶éƒ½å¯ä»¥è‡ªåŠ¨å¸®ä½ å®Œæˆï¼š</p><p><strong>step1:</strong><br>åœ¨pom.xmlä¸­å¼•å…¥Jacksonç›¸å…³ä¾èµ–ï¼ŒJacksonå·¥å…·åº“ç”¨äºå°†Objectè½¬æ¢ä¸ºJsonã€‚</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jackson-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.9.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jackson-databind<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.9.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p><strong>step2:</strong></p><p>åœ¨springmvc.xmlé…ç½®æ–‡ä»¶ä¸­æ·»åŠ æ³¨è§£é©±åŠ¨ã€‚<br>å°†Object æ•°æ®è½¬åŒ–ä¸ºJSON æ•°æ®ï¼Œéœ€è¦ç”±æ¶ˆæ¯è½¬æ¢å™¨HttpMessageConverter å®Œæˆã€‚è€Œè½¬æ¢å™¨çš„å¼€å¯ï¼Œéœ€è¦ç”±<code>&lt;mvc:annotation-driven/&gt;</code>æ¥å®Œæˆã€‚<br>SpringMVC ä½¿ç”¨æ¶ˆæ¯è½¬æ¢å™¨å®ç°è¯·æ±‚æ•°æ®å’Œå¯¹è±¡ï¼Œå¤„ç†å™¨æ–¹æ³•è¿”å›å¯¹è±¡å’Œå“åº”è¾“å‡ºä¹‹é—´çš„<strong>è‡ªåŠ¨è½¬æ¢</strong>ã€‚</p><p>å½“Spring å®¹å™¨è¿›è¡Œåˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œåœ¨<code>&lt;mvc:annotation-driven/&gt;</code>å¤„åˆ›å»ºæ³¨è§£é©±åŠ¨æ—¶ï¼Œé»˜è®¤åˆ›å»ºäº†å…«ä¸ªHttpMessageConverter å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æ³¨å†Œ<code>&lt;mvc:annotation-driven/&gt;</code>ï¼Œå°±æ˜¯ä¸ºäº†è®©å®¹å™¨ä¸ºæˆ‘ä»¬åˆ›å»ºHttpMessageConverter å¯¹è±¡ã€‚</p><pre class=" language-xml"><code class="language-xml"> <span class="token comment" spellcheck="true">&lt;!--æ³¨è§£é©±åŠ¨--></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">/></span></span></code></pre><p><strong>step3:</strong></p><p>ä¿®æ”¹å¤„ç†å™¨æ–¹æ³•ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * ä½¿ç”¨æ¡†æ¶æ¥å¤„ç†ajaxè¯·æ±‚ * @return Student */</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/returnStudent.do"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@ResponseBody</span>  <span class="token comment" spellcheck="true">// å¤„ç†å™¨è¿”å›å¯¹è±¡è½¬æ¢ä¸ºjsonåï¼Œé€šè¿‡HttpServletResponseè¾“å‡ºç»™æµè§ˆå™¨</span><span class="token keyword">public</span> Student <span class="token function">doReturnStudentAjax</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    Student student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"zyz"</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> student<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æ¡†æ¶ä¼šå°†objè½¬ä¸ºjsonæ ¼å¼</span><span class="token punctuation">}</span></code></pre><p>ä»é¡µé¢å‘èµ·ajaxè¯·æ±‚ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#btn02"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        url<span class="token punctuation">:</span><span class="token string">"returnStudent.do"</span><span class="token punctuation">,</span>        type<span class="token punctuation">:</span><span class="token string">"post"</span><span class="token punctuation">,</span>        dataType<span class="token punctuation">:</span><span class="token string">"json"</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">// respæ˜¯æœåŠ¡å™¨ç«¯è¿”å›çš„jsonæ ¼å¼çš„å­—ç¬¦ä¸²</span>        <span class="token comment" spellcheck="true">// jqueryä¼šæŠŠjsonå­—ç¬¦ä¸²è½¬åŒ–ä¸ºjsonå¯¹è±¡ï¼Œèµ‹å€¼ç»™å½¢å‚</span>        success<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>resp<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"name:"</span><span class="token operator">+</span>resp<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">" age:"</span><span class="token operator">+</span>resp<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p><strong>å¤„ç†æµç¨‹ï¼š</strong></p><p>1ã€æ¡†æ¶ä¼šæŠŠå¤„ç†å™¨è¿”å›çš„Studentç±»å‹çš„æ•°æ®ï¼Œè°ƒç”¨æ¡†æ¶ä¸­çš„<code>ArrayList&lt;HttpMessageConverter&gt;</code>ä¸­æ¯ä¸ªç±»çš„canWrite()æ–¹æ³•ï¼Œæ£€æŸ¥å“ªä¸ªHttpMessageConverteræ¥å£çš„ç±»èƒ½å¤„ç†Studentç±»å‹çš„æ•°æ®â€”-MappingJackson2HttpMessageConverter<br>2ã€è°ƒç”¨å®ç°ç±»ä¸­çš„Write()æ–¹æ³•ï¼Œå°†studentå¯¹è±¡è½¬æ¢ä¸ºjsonå­—ç¬¦ä¸²<br>3ã€è°ƒç”¨@ResponseBodyæŠŠè½¬æ¢å¥½çš„jsonæ•°æ®è¾“å‡ºåˆ°æµè§ˆå™¨ï¼Œajaxå¤„ç†å®Œæˆ</p><h4 id="è¿”å›Listé›†åˆï¼š"><a href="#è¿”å›Listé›†åˆï¼š" class="headerlink" title="è¿”å›Listé›†åˆï¼š"></a>è¿”å›Listé›†åˆï¼š</h4><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/returnStudents.do"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@ResponseBody</span> <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Student<span class="token operator">></span> <span class="token function">doReturnStudentAjax</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    List<span class="token operator">&lt;</span>Student<span class="token operator">></span> students <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Student student1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"å¼ ä¼Ÿ1"</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Student student2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"å¼ ä¼Ÿ2"</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Student student3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"å¼ ä¼Ÿ3"</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    students<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>student1<span class="token punctuation">)</span><span class="token punctuation">;</span>    students<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>student2<span class="token punctuation">)</span><span class="token punctuation">;</span>    students<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>student3<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> students<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-js"><code class="language-js"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#btn03"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        url<span class="token punctuation">:</span><span class="token string">"returnStudents.do"</span><span class="token punctuation">,</span>        type<span class="token punctuation">:</span><span class="token string">"post"</span><span class="token punctuation">,</span>        dataType<span class="token punctuation">:</span><span class="token string">"json"</span><span class="token punctuation">,</span>        success<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>resp<span class="token punctuation">)</span><span class="token punctuation">{</span>            $<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>resp<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>stu<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token function">alert</span><span class="token punctuation">(</span>stu<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span>stu<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="è¿”å›String"><a href="#è¿”å›String" class="headerlink" title="è¿”å›String"></a>è¿”å›String</h4><p>Stringè¡¨ç¤ºæ•°æ®ï¼Œä¸æ˜¯è§†å›¾ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/returnString.do"</span><span class="token punctuation">,</span> produces<span class="token operator">=</span><span class="token string">"text/plain;charset=utf-8"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@ResponseBody</span><span class="token keyword">public</span> String <span class="token function">doReturnStringAjax</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token string">"è¿”å›çš„å­—ç¬¦ä¸²~"</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-js"><code class="language-js"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#btn04"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        url<span class="token punctuation">:</span><span class="token string">"returnString.do"</span><span class="token punctuation">,</span>        type<span class="token punctuation">:</span><span class="token string">"post"</span><span class="token punctuation">,</span>        success<span class="token punctuation">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span>resp<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">alert</span><span class="token punctuation">(</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="4ã€è§£è¯»url-patternæ ‡ç­¾"><a href="#4ã€è§£è¯»url-patternæ ‡ç­¾" class="headerlink" title="4ã€è§£è¯»url-patternæ ‡ç­¾"></a>4ã€è§£è¯»url-patternæ ‡ç­¾</h2><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>springMVC<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>*.do<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span></code></pre><p>æ„æ€æ˜¯å°†æ‰€æœ‰ä»¥.doç»“å°¾çš„è¯·æ±‚äº¤ç»™ä¸­å¤®è°ƒåº¦å™¨ï¼ˆæ¡†æ¶ï¼‰å¤„ç†ã€‚<br>ä½†æ˜¯ï¼Œå½“æäº¤ä¸€äº›é™æ€èµ„æºï¼Œä¾‹å¦‚å›¾ç‰‡ï¼Œhtmlé¡µé¢ï¼Œjsæ–‡ä»¶çš„è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ä¹Ÿä¼šå“åº”ã€‚<br>å› ä¸ºtomcatæœ¬èº«å°±èƒ½å¤„ç†ä¸€äº›æœªæ˜ å°„çš„é™æ€èµ„æºçš„è®¿é—®ã€‚</p><p><strong>å°†æ‰€æœ‰è¯·æ±‚éƒ½äº¤ç»™æ¡†æ¶å¤„ç†ï¼š</strong></p><pre><code>&lt;servlet-mapping&gt;    &lt;servlet-name&gt;springMVC&lt;/servlet-name&gt;    &lt;url-pattern&gt;/&lt;/url-pattern&gt;&lt;/servlet-mapping&gt;</code></pre><p>å¤„ç†æ–¹å¼ä¸€ï¼šè½¬å‘ç»™æœåŠ¡å™¨å¤„ç†</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- å¤„ç†é™æ€èµ„æºæ¡†æ¶ä¼šåˆ›å»ºæ§åˆ¶å™¨å¯¹è±¡DefaultServletHttpRequestHandleræŠŠæ¥æ”¶åˆ°çš„è¯·æ±‚è½¬å‘ç»™tomcatæ¥å¤„ç†é™æ€èµ„æº--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>default-servlet-handler</span> <span class="token punctuation">/></span></span></code></pre><p>å¤„ç†æ–¹å¼äºŒï¼šæ¡†æ¶è‡ªå·±å¤„ç†</p><p>å°†é™æ€èµ„æºé›†ä¸­å­˜æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­<br><img src="/2020/06/30/SpringMVC-02/4.png" alt></p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--  å¤„ç†é™æ€èµ„æºæ–¹å¼äºŒ åˆ›å»º ResourceHttpServletHandlerå¤„ç†å™¨å¯¹è±¡ è®©è¿™ä¸ªå¯¹è±¡å»å¤„ç†é™æ€èµ„æºçš„è¯·æ±‚  ä¸ä¾èµ–äºtomcat mapping:è®¿é—®é™æ€èµ„æºçš„uri  ä½¿ç”¨é€šé…ç¬¦ ** location:é™æ€èµ„æºåœ¨é¡¹ç›®ä¸­çš„ä½ç½®--></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>resources</span> <span class="token attr-name">mapping</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/static/**<span class="token punctuation">"</span></span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/static/<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></code></pre><h2 id="5ã€ç»å¯¹åœ°å€å’Œç›¸å¯¹åœ°å€"><a href="#5ã€ç»å¯¹åœ°å€å’Œç›¸å¯¹åœ°å€" class="headerlink" title="5ã€ç»å¯¹åœ°å€å’Œç›¸å¯¹åœ°å€"></a>5ã€ç»å¯¹åœ°å€å’Œç›¸å¯¹åœ°å€</h2><p><strong>ç»å¯¹åœ°å€</strong><br>å¸¦æœ‰åè®®çš„åœ°å€ï¼Œåœ¨äº’è”ç½‘ä¸Šå”¯ä¸€çš„</p><p><strong>ç›¸å¯¹åœ°å€</strong><br>æ²¡æœ‰åè®®å¼€å¤´çš„ï¼Œä¸èƒ½ç‹¬ç«‹ä½¿ç”¨ï¼Œéœ€è¦ä¸€ä¸ªå‚è€ƒåœ°å€ã€‚é€šè¿‡å‚è€ƒåœ°å€+ç›¸å¯¹åœ°å€æœ¬èº«æ‰èƒ½æŒ‡å®šèµ„æºã€‚</p><p>åœ¨jspï¼Œhtml ä¸­ä½¿ç”¨çš„åœ°å€ï¼Œéƒ½æ˜¯å‰ç«¯é¡µé¢ä¸­çš„åœ°å€ï¼Œéƒ½æ˜¯ç›¸å¯¹åœ°å€ã€‚</p><p>åœ¨é¡µé¢ä¸­è®¿é—®åœ°å€ä¸åŠ  â€ / â€œ ï¼Œè®¿é—®çš„æ˜¯å½“å‰é¡µé¢åœ°å€åŠ ä¸Šé“¾æ¥åœ°å€ã€‚ä½¿ç”¨baseæ ‡ç­¾å›ºå®šå‚è€ƒåœ°å€<br><img src="/2020/06/30/SpringMVC-02/5.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringMVC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringMVCç®€ä»‹</title>
      <link href="2020/06/20/SpringMVC-01/"/>
      <url>2020/06/20/SpringMVC-01/</url>
      
        <content type="html"><![CDATA[<p>SpringMVCæ˜¯Springæ¡†æ¶çš„ä¸€éƒ¨åˆ†ã€‚ç›¸å½“äºservletçš„ä¸€ä¸ªå‡çº§ã€‚SpringMVCåˆ›å»ºæ§åˆ¶å™¨å¯¹è±¡ï¼Œæ”¾å…¥SpringMVCå®¹å™¨ä¸­ã€‚</p><h2 id="SpringMVCä½¿ç”¨"><a href="#SpringMVCä½¿ç”¨" class="headerlink" title="SpringMVCä½¿ç”¨"></a>SpringMVCä½¿ç”¨</h2><h3 id="1ã€åœ¨webå·¥ç¨‹ä¸­æ·»åŠ ä¾èµ–"><a href="#1ã€åœ¨webå·¥ç¨‹ä¸­æ·»åŠ ä¾èµ–" class="headerlink" title="1ã€åœ¨webå·¥ç¨‹ä¸­æ·»åŠ ä¾èµ–"></a>1ã€åœ¨webå·¥ç¨‹ä¸­æ·»åŠ ä¾èµ–</h3><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>javax.servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-webmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><h3 id="2ã€åœ¨web-xmlæ–‡ä»¶ä¸­æ³¨å†Œä¸­å¤®å¤„ç†å¯¹è±¡DispacherServlet"><a href="#2ã€åœ¨web-xmlæ–‡ä»¶ä¸­æ³¨å†Œä¸­å¤®å¤„ç†å¯¹è±¡DispacherServlet" class="headerlink" title="2ã€åœ¨web.xmlæ–‡ä»¶ä¸­æ³¨å†Œä¸­å¤®å¤„ç†å¯¹è±¡DispacherServlet"></a>2ã€åœ¨web.xmlæ–‡ä»¶ä¸­æ³¨å†Œä¸­å¤®å¤„ç†å¯¹è±¡DispacherServlet</h3><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--æ³¨å†ŒspringMVCæ ¸å¿ƒä¾èµ–DispatcherServlet   tomcatæœåŠ¡å™¨å¯åŠ¨ååˆ›å»ºDispatcherServletå®ä¾‹å¯¹è±¡ï¼ŒåŒæ—¶è¯»å–é…ç½®æ–‡ä»¶åˆ›å»ºå®¹å™¨å¯¹è±¡--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>springMVC<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>org.springframework.web.servlet.DispatcherServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--è‡ªå®šä¹‰è¯»å–é…ç½®æ–‡ä»¶çš„ä½ç½®--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>classpath:springmvc.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- åœ¨tomcatå¯åŠ¨åï¼Œåˆ›å»ºServletå¯¹è±¡  æ•°å€¼è¶Šå°åˆ›å»ºè¶Šæ—©--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>load-on-startup</span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>load-on-startup</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>springMVC<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>*.do<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span></code></pre><h3 id="3ã€åœ¨springmvcé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œç»„ä»¶æ‰«æå™¨"><a href="#3ã€åœ¨springmvcé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œç»„ä»¶æ‰«æå™¨" class="headerlink" title="3ã€åœ¨springmvcé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œç»„ä»¶æ‰«æå™¨"></a>3ã€åœ¨springmvcé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œç»„ä»¶æ‰«æå™¨</h3><pre class=" language-xml"><code class="language-xml">   <span class="token comment" spellcheck="true">&lt;!-- å£°æ˜ç»„ä»¶æ‰«æå™¨ åˆ›å»ºControllerå¯¹è±¡  --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.controller<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></code></pre><h3 id="4ã€ç¼–å†™MyControllerå¤„ç†è¯·æ±‚"><a href="#4ã€ç¼–å†™MyControllerå¤„ç†è¯·æ±‚" class="headerlink" title="4ã€ç¼–å†™MyControllerå¤„ç†è¯·æ±‚"></a>4ã€ç¼–å†™MyControllerå¤„ç†è¯·æ±‚</h3><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Controller</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyController</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * å¤„ç†some.doè¯·æ±‚     * @return è¯·æ±‚å¤„ç†å®Œæˆåï¼Œè¿”å›ç”¨æˆ·çš„æ•°æ®     */</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/some.do"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// è¯·æ±‚æ˜ å°„ï¼Œå°†è¯·æ±‚åœ°å€ä¸è¯·æ±‚æ–¹æ³•ç»‘å®š</span>    <span class="token keyword">public</span> ModelAndView <span class="token function">doSome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        ModelAndView modelAndView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ·»åŠ æ•°æ® æ¡†æ¶è¯·æ±‚çš„æœ€åå°†æ•°æ®æ”¾å…¥RequeståŸŸä¸­</span>        modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"hello,SpringMVC"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æŒ‡å®šè§†å›¾ æ¡†æ¶å¯¹è§†å›¾æ‰§è¡Œforwardæ“ä½œ</span>        modelAndView<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"/show.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è¿”å›modelAndView</span>        <span class="token keyword">return</span> modelAndView<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="5ã€é¡µé¢"><a href="#5ã€é¡µé¢" class="headerlink" title="5ã€é¡µé¢"></a>5ã€é¡µé¢</h3><p>è¯·æ±‚é¡µé¢ï¼šindex.jsp</p><pre class=" language-jsp"><code class="language-jsp"><%@ page contentType="text/html;charset=UTF-8" language="java" %><html><head>    <title>index.jsp</title></head><body>    <p>ç¬¬ä¸€ä¸ªspringMVCç¨‹åº</p>    <p><a href="some.do">å‘èµ·some.doè¯·æ±‚</a></p></body></html></code></pre><p>è·³è½¬é¡µé¢ï¼šshow.jsp</p><pre class=" language-jsp"><code class="language-jsp"><%@ page contentType="text/html;charset=UTF-8" language="java" %><html><head>    <title>show.jsp</title></head><body>    <p>msgæ•°æ®ï¼š${msg}</p></body></html></code></pre><h2 id="SpringMVCè¯·æ±‚çš„å¤„ç†è¿‡ç¨‹"><a href="#SpringMVCè¯·æ±‚çš„å¤„ç†è¿‡ç¨‹" class="headerlink" title="SpringMVCè¯·æ±‚çš„å¤„ç†è¿‡ç¨‹"></a>SpringMVCè¯·æ±‚çš„å¤„ç†è¿‡ç¨‹</h2><p><img src="/2020/06/20/SpringMVC-01/1.png" alt></p><p>SpringMVCå†…éƒ¨æ‰§è¡Œæµç¨‹ï¼š<br><img src="/2020/06/20/SpringMVC-01/4.png" alt></p><h2 id="ä½¿ç”¨è§†å›¾è§£æå™¨"><a href="#ä½¿ç”¨è§†å›¾è§£æå™¨" class="headerlink" title="ä½¿ç”¨è§†å›¾è§£æå™¨"></a>ä½¿ç”¨è§†å›¾è§£æå™¨</h2><p>åœ¨springmvcé…ç½®æ–‡ä»¶ä¸­å£°æ˜è§†å›¾è§£æå™¨ï¼š</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--  å£°æ˜springmvcæ¡†æ¶ä¸­çš„è§†å›¾è§£æå™¨  å¸®åŠ©å¼€å‘äººå‘˜è®¾ç½®è§†å›¾æ–‡ä»¶çš„è·¯å¾„  --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.springframework.web.servlet.view.InternalResourceViewResolver<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--å‰ç¼€  è§†å›¾æ–‡ä»¶çš„è·¯å¾„--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>prefix<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/WEB-INF/view/<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!--åç¼€  è§†å›¾æ–‡ä»¶çš„æ‹“å±•å--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>suffix<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>.jsp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></code></pre><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// é…ç½®è§†å›¾è§£æå™¨å,å¯ç›´æ¥ä½¿ç”¨æ–‡ä»¶åæŒ‡å®šè§†å›¾</span>modelAndView<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"show"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringMVC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Webé¡¹ç›®ç¯å¢ƒæ­å»º</title>
      <link href="2020/06/20/Spring-05/"/>
      <url>2020/06/20/Spring-05/</url>
      
        <content type="html"><![CDATA[<h1 id="å®ç°ä¸€ä¸ªç®€å•çš„æ³¨å†ŒåŠŸèƒ½"><a href="#å®ç°ä¸€ä¸ªç®€å•çš„æ³¨å†ŒåŠŸèƒ½" class="headerlink" title="å®ç°ä¸€ä¸ªç®€å•çš„æ³¨å†ŒåŠŸèƒ½"></a>å®ç°ä¸€ä¸ªç®€å•çš„æ³¨å†ŒåŠŸèƒ½</h1><p>é¡¹ç›®æ•´ä½“ç»“æ„ï¼š<a id="more"></a><br><img src="/2020/06/20/Spring-05/2.jpg" alt></p><h2 id="1ã€ä½¿ç”¨mavenåˆ›å»ºwebé¡¹ç›®"><a href="#1ã€ä½¿ç”¨mavenåˆ›å»ºwebé¡¹ç›®" class="headerlink" title="1ã€ä½¿ç”¨mavenåˆ›å»ºwebé¡¹ç›®"></a>1ã€ä½¿ç”¨mavenåˆ›å»ºwebé¡¹ç›®</h2><p><img src="/2020/06/20/Spring-05/1.jpg" alt></p><h2 id="2ã€æ·»åŠ ä¾èµ–å’Œæ’ä»¶"><a href="#2ã€æ·»åŠ ä¾èµ–å’Œæ’ä»¶" class="headerlink" title="2ã€æ·»åŠ ä¾èµ–å’Œæ’ä»¶"></a>2ã€æ·»åŠ ä¾èµ–å’Œæ’ä»¶</h2><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>4.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--    Springäº‹åŠ¡--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-tx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--    MyBatisä¾èµ–--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.5.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-spring<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>8.0.19<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.1.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- servletä¾èµ–--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>javax.servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- jspä¾èµ–--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.servlet.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jsp-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.2.1-b03<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- ç›‘å¬å™¨ä¾èµ–--></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">></span></span>src/main/java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--æ‰€åœ¨çš„ç›®å½•--></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--åŒ…æ‹¬ç›®å½•ä¸‹çš„.properties,.xmlæ–‡ä»¶éƒ½ä¼šæ‰«æåˆ°--></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">></span></span>**/*.properties<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">></span></span>**/*.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filtering</span><span class="token punctuation">></span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filtering</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>maven-compiler-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>source</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">></span></span></code></pre><p>å°†spring-mybatisæ•´åˆçš„ä»£ç å¤åˆ¶åˆ°srcä¸‹</p><h2 id="3ã€ç¼–å†™é¡µé¢"><a href="#3ã€ç¼–å†™é¡µé¢" class="headerlink" title="3ã€ç¼–å†™é¡µé¢"></a>3ã€ç¼–å†™é¡µé¢</h2><p>index.jsp</p><pre class=" language-jsp"><code class="language-jsp"><%@ page contentType="text/html;charset=UTF-8" language="java" %><html><head>    <title>æ³¨å†Œé¡µé¢</title></head><body>    <h1>å‘˜å·¥æ³¨å†Œ</h1>    <form action="registerServlet" method="post">        <table>            <tr>                <td>å§“å</td>                <td><input type="text" name="name"></td>            </tr>            <tr>                <td>æ€§åˆ«</td>                <td><input type="radio" name="gender" value="1">ç”·                <input type="radio" name="gender" value="0">å¥³</td>            </tr>            <tr>                <td>ç”µå­é‚®ä»¶</td>                <td><input type="text" name="email"></td>            </tr>            <tr>                <td>éƒ¨é—¨ç¼–å·</td>                <td><input type="radio" name="deptId" value="1">1                <input type="radio" name="deptId" value="2">2</td>            </tr>            <tr>                <td colspan="2">                    <input type="submit" value="æ³¨å†Œæäº¤">                </td>            </tr>        </table>    </form></body></html></code></pre><p>registerSuccess.jsp</p><pre class=" language-jsp"><code class="language-jsp"><%@ page contentType="text/html;charset=UTF-8" language="java" %><html><head>    <title>æ³¨å†ŒæˆåŠŸé¡µé¢</title></head><body>    <p>æ³¨å†ŒæˆåŠŸ</p></body></html></code></pre><h2 id="4ã€ç¼–å†™servlet"><a href="#4ã€ç¼–å†™servlet" class="headerlink" title="4ã€ç¼–å†™servlet"></a>4ã€ç¼–å†™servlet</h2><h3 id="1-åœ¨web-xmlä¸­æ³¨å†Œservletå’Œlistener"><a href="#1-åœ¨web-xmlä¸­æ³¨å†Œservletå’Œlistener" class="headerlink" title="1.åœ¨web.xmlä¸­æ³¨å†Œservletå’Œlistener"></a>1.åœ¨web.xmlä¸­æ³¨å†Œservletå’Œlistener</h3><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--æ³¨å†Œservlet--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>RegisterServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>com.zyz.controller.RegisterServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>RegisterServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/registerServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--æ³¨å†Œç›‘å¬å™¨ContextLoaderListener  è‡ªåŠ¨åˆ›å»ºå®¹å™¨å¯¹è±¡ï¼Œå¹¶æ”¾å…¥å…¨å±€ä½œç”¨åŸŸServletContextä¸­                                       ç”¨æˆ·å‘èµ·è¯·æ±‚æ—¶å¯ä»¥ç›´æ¥ä½¿ç”¨å¯¹è±¡ï¼Œä¸éœ€è¦å†åˆ›å»ºå®¹å™¨--></span><span class="token comment" spellcheck="true">&lt;!--è‡ªå®šä¹‰é…ç½®æ–‡ä»¶è·¯å¾„  åˆ›å»ºå®¹å™¨å¯¹è±¡æ—¶éœ€è¦è¯»å–é…ç½®æ–‡ä»¶--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>classpath:applicationContext.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener-class</span><span class="token punctuation">></span></span>org.springframework.web.context.ContextLoaderListener<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener-class</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">></span></span></code></pre><h3 id="2ã€ç¼–å†™servletç¨‹åº"><a href="#2ã€ç¼–å†™servletç¨‹åº" class="headerlink" title="2ã€ç¼–å†™servletç¨‹åº"></a>2ã€ç¼–å†™servletç¨‹åº</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RegisterServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        String name <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String gender <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"gender"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String email <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String deptId <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"deptId"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        WebApplicationContext webApplicationContext <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/*// ä»ServletContextä¸­è·å–å®¹å™¨å¯¹è±¡        String key = WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE;        Object attribute = getServletContext().getAttribute(key);        if(attribute!=null){            webApplicationContext = (WebApplicationContext) attribute;        }*/</span>       <span class="token comment" spellcheck="true">// ä½¿ç”¨æ¡†æ¶æä¾›çš„å·¥å…·ç±»ç›´æ¥ä»ServletContextä¸­è·å–åˆ›å»ºå¥½å®¹å™¨å¯¹è±¡</span>        ServletContext servletContext <span class="token operator">=</span> <span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        webApplicationContext <span class="token operator">=</span> WebApplicationContextUtils<span class="token punctuation">.</span><span class="token function">getRequiredWebApplicationContext</span><span class="token punctuation">(</span>servletContext<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è·å–service</span>        EmployeeService employeeService <span class="token operator">=</span> <span class="token punctuation">(</span>EmployeeService<span class="token punctuation">)</span> webApplicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"employeeService"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Employee employee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span>name<span class="token punctuation">,</span>gender<span class="token punctuation">,</span>email<span class="token punctuation">,</span>Integer<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>deptId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        employeeService<span class="token punctuation">.</span><span class="token function">addEmp</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ³¨å†ŒæˆåŠŸ é¡µé¢è·³è½¬</span>        request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/registerSuccess.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springäº‹åŠ¡</title>
      <link href="2020/06/19/Spring-04/"/>
      <url>2020/06/19/Spring-04/</url>
      
        <content type="html"><![CDATA[<p>springæä¾›ä¸€ç§å¤„ç†äº‹åŠ¡çš„ç»Ÿä¸€æ¨¡å‹ï¼Œèƒ½ä½¿ç”¨ç»Ÿä¸€çš„æ­¥éª¤ï¼Œå®Œæˆå¤šç§ä¸åŒæ•°æ®åº“è®¿é—®æŠ€æœ¯çš„äº‹åŠ¡å¤„ç†ã€‚<br><img src="/2020/06/19/Spring-04/1.png" alt></p><h2 id="springç®¡ç†äº‹åŠ¡çš„ä¸‰ä¸ªæ–¹é¢"><a href="#springç®¡ç†äº‹åŠ¡çš„ä¸‰ä¸ªæ–¹é¢" class="headerlink" title="springç®¡ç†äº‹åŠ¡çš„ä¸‰ä¸ªæ–¹é¢"></a>springç®¡ç†äº‹åŠ¡çš„ä¸‰ä¸ªæ–¹é¢</h2><p>1ã€äº‹åŠ¡ç®¡ç†å™¨<br>äº‹åŠ¡ç®¡ç†å™¨æ˜¯ä¸€ä¸ªæ¥å£å’Œå®ƒçš„ä¼—å¤šå®ç°ç±»ï¼Œç”±äº‹åŠ¡ç®¡ç†å™¨å¯¹è±¡å®Œæˆäº‹åŠ¡çš„æäº¤å’Œå›æ»šã€‚<br>å®ç°ç±»ï¼šspringå°†æ¯ä¸€ç§æ•°æ®åº“è®¿é—®æŠ€æœ¯å¯¹åº”çš„äº‹åŠ¡å¤„ç†ç±»éƒ½åˆ›å»ºå¥½äº†<br>mybatisè®¿é—®æ•°æ®åº“â€”â€”-DateSourceTransactionManager<br>hibernateè®¿é—®æ•°æ®åº“â€”â€”â€”HibernateTransactionManager<br>ä½¿ç”¨æ–¹æ³•ï¼šå‘Šè¯‰springä½ ä½¿ç”¨çš„é‚£ç§æ•°æ®åº“çš„è®¿é—®æ–¹å¼</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>  <span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>  ...DateSourceTransaction<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></code></pre><p>2ã€äº‹åŠ¡çš„ç±»å‹<br>ï¼ˆ1ï¼‰äº‹åŠ¡çš„éš”ç¦»çº§åˆ«<br><img src="/2020/06/19/Spring-04/2.jpg" alt><br>(2)äº‹åŠ¡çš„è¶…æ—¶æ—¶é—´<br>è¡¨ç¤ºä¸€ä¸ªæ–¹æ³•çš„æœ€é•¿æ‰§è¡Œæ—¶é—´ï¼Œå¦‚æœæ–¹æ³•æ‰§è¡Œè¶…è¿‡äº†è¯¥æ—¶é—´ï¼Œäº‹åŠ¡å°±å›æ»š<br>(3)äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º<br>PROPAGATION_REQUIREDï¼šæŒ‡å®šçš„æ–¹æ³•å¿…é¡»åœ¨äº‹åŠ¡å†…æ‰§è¡Œã€‚è‹¥å½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±åŠ å…¥åˆ°å½“å‰äº‹åŠ¡ä¸­ï¼›è‹¥å½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°äº‹åŠ¡ã€‚è¿™ç§ä¼ æ’­è¡Œä¸ºæ˜¯æœ€å¸¸è§çš„é€‰æ‹©ï¼Œä¹Ÿæ˜¯Spring é»˜è®¤çš„äº‹åŠ¡ä¼ æ’­è¡Œä¸ºã€‚<br>PROPAGATION_REQUIRES_NEWï¼šæ€»æ˜¯æ–°å»ºä¸€ä¸ªäº‹åŠ¡ï¼Œè‹¥å½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±å°†å½“å‰äº‹åŠ¡æŒ‚èµ·ï¼Œç›´åˆ°æ–°äº‹åŠ¡æ‰§è¡Œå®Œæ¯•ã€‚<br>PROPAGATION_SUPPORTSï¼šæŒ‡å®šçš„æ–¹æ³•æ”¯æŒå½“å‰äº‹åŠ¡ï¼Œä½†è‹¥å½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œä¹Ÿå¯ä»¥ä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œã€‚</p><p>3ã€springæäº¤äº‹åŠ¡ï¼Œå›æ»šäº‹åŠ¡çš„æ—¶æœº<br>(1)ä¸šåŠ¡æ–¹æ³•æ‰§è¡ŒæˆåŠŸï¼Œæ²¡æœ‰å¼‚å¸¸æŠ›å‡ºï¼Œspringä¼šåœ¨æ–¹æ³•æŒ‡å‘åæäº¤äº‹åŠ¡<br>(2)ä¸šåŠ¡æ–¹æ³•æŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸ï¼Œspringæ‰§è¡Œå›æ»š<br>è¿è¡Œæ—¶å¼‚å¸¸å®šä¹‰ï¼šRuntimeExceptionå’Œå®ƒçš„å­ç±»éƒ½æ˜¯è¿è¡Œæ—¶å¼‚å¸¸ï¼ŒNullPointExceptionï¼ŒNumberFormatException<br>(3)ä¸šåŠ¡æ–¹æ³•æŠ›å‡ºéè¿è¡Œæ—¶å¼‚å¸¸ï¼Œå—æŸ¥å¼‚å¸¸æ—¶ï¼Œæäº¤äº‹åŠ¡ã€‚<br>å—æŸ¥å¼‚å¸¸ï¼šå†™ä»£ç æ—¶å¿…é¡»å¤„ç†çš„å¼‚å¸¸ï¼ŒIOExceptionï¼ŒSQLException</p><h2 id="äº‹åŠ¡åº”ç”¨â€”â€”è´­ä¹°å•†å“é¡¹ç›®"><a href="#äº‹åŠ¡åº”ç”¨â€”â€”è´­ä¹°å•†å“é¡¹ç›®" class="headerlink" title="äº‹åŠ¡åº”ç”¨â€”â€”è´­ä¹°å•†å“é¡¹ç›®"></a>äº‹åŠ¡åº”ç”¨â€”â€”è´­ä¹°å•†å“é¡¹ç›®</h2><p>å®ç°è´­ä¹°å•†å“ï¼Œæ¨¡æ‹Ÿç”¨æˆ·ä¸‹è®¢å•ï¼Œå‘è®¢å•ä¸­æ·»åŠ é”€å”®è®°å½•ï¼Œä»å•†å“è¡¨ä¸­å‡å°‘åº“å­˜ã€‚</p><h3 id="æ³¨è§£æ–¹å¼"><a href="#æ³¨è§£æ–¹å¼" class="headerlink" title="æ³¨è§£æ–¹å¼"></a>æ³¨è§£æ–¹å¼</h3><p>1ã€åœ¨springé…ç½®æ–‡ä»¶æ·»åŠ äº‹åŠ¡ç®¡ç†å™¨å’Œäº‹åŠ¡æ³¨è§£é©±åŠ¨</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- å£°æ˜äº‹åŠ¡ç®¡ç†å™¨   --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>transactionManager<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--  è¿æ¥çš„æ•°æ®åº“ï¼ŒæŒ‡å®šæ•°æ®æº --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myDataSource<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!-- å¼€å¯äº‹åŠ¡æ³¨è§£é©±åŠ¨ å‘Šè¯‰springä½¿ç”¨æ³¨è§£ç®¡ç†äº‹åŠ¡ï¼Œåˆ›å»ºä»£ç†å¯¹è±¡--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>annotation-driven</span> <span class="token attr-name">transaction-manager</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>transactionManager<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></code></pre><p>2ã€åœ¨éœ€è¦ä½¿ç”¨äº‹åŠ¡çš„æ–¹æ³•ä¸Šæ·»åŠ Transactionalæ³¨è§£</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BuyGoodsServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">BuyGoodsService</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> SaleDao saleDao<span class="token punctuation">;</span>    <span class="token keyword">private</span> GoodsDao goodsDao<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSaleDao</span><span class="token punctuation">(</span>SaleDao saleDao<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>saleDao <span class="token operator">=</span> saleDao<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setGoodsDao</span><span class="token punctuation">(</span>GoodsDao goodsDao<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>goodsDao <span class="token operator">=</span> goodsDao<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/*@Transactional(            propagation = Propagation.REQUIRED,// ä¼ æ’­è¡Œä¸º(é»˜è®¤)            isolation = Isolation.DEFAULT,// éš”ç¦»çº§åˆ«(é»˜è®¤)            readOnly = false,            rollbackFor = { // å‘ç”ŸæŒ‡å®šå¼‚å¸¸æ—¶å›æ»š                    RuntimeException.class            }    )*/</span>    <span class="token annotation punctuation">@Transactional</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buy</span><span class="token punctuation">(</span>Integer gid<span class="token punctuation">,</span> Integer nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"buyå¼€å§‹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è®°å½•é”€å”®ä¿¡æ¯ï¼Œå‘saleè¡¨ä¸­æ·»åŠ è®°å½•</span>        saleDao<span class="token punctuation">.</span><span class="token function">insertSale</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Sale</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span> gid<span class="token punctuation">,</span> nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Goods goods <span class="token operator">=</span> goodsDao<span class="token punctuation">.</span><span class="token function">selectGoodsById</span><span class="token punctuation">(</span>gid<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>goods <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"å•†å“ä¸å­˜åœ¨ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>goods<span class="token punctuation">.</span><span class="token function">getAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>nums<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"å•†å“ä¸è¶³"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// æ›´æ–°åº“å­˜</span>        goodsDao<span class="token punctuation">.</span><span class="token function">updateGoods</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Goods</span><span class="token punctuation">(</span>gid<span class="token punctuation">,</span>null<span class="token punctuation">,</span>nums<span class="token punctuation">,</span>null<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"buyç»“æŸ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="ä½¿ç”¨aspectjå®Œæˆäº‹åŠ¡é…ç½®"><a href="#ä½¿ç”¨aspectjå®Œæˆäº‹åŠ¡é…ç½®" class="headerlink" title="ä½¿ç”¨aspectjå®Œæˆäº‹åŠ¡é…ç½®"></a>ä½¿ç”¨aspectjå®Œæˆäº‹åŠ¡é…ç½®</h3><p>1ã€æ·»åŠ aspectjä¾èµ–</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-aspects<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>2ã€å£°æ˜äº‹åŠ¡ç®¡ç†å™¨</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- å£°æ˜äº‹åŠ¡ç®¡ç†å™¨   --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>transactionManager<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!--  è¿æ¥çš„æ•°æ®åº“ï¼ŒæŒ‡å®šæ•°æ®æº --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myDataSource<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></code></pre><p>3ã€å£°æ˜ä¸šåŠ¡æ–¹æ³•åŠäº‹åŠ¡å±æ€§</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--  å£°æ˜ä¸šåŠ¡æ–¹æ³•åŠäº‹åŠ¡å±æ€§ï¼ˆéš”ç¦»çº§åˆ«ã€ä¼ æ’­è¡Œä¸ºã€è¶…æ—¶æ—¶é—´ï¼‰  --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>advice</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myAdvice<span class="token punctuation">"</span></span> <span class="token attr-name">transaction-manager</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>transactionManager<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>attributes</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!-- name æ–¹æ³•åç§°  å¯ä½¿ç”¨é€šé…ç¬¦--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>buy<span class="token punctuation">"</span></span> <span class="token attr-name">propagation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>REQUIRED<span class="token punctuation">"</span></span> <span class="token attr-name">isolation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>DEFAULT<span class="token punctuation">"</span></span>                   <span class="token attr-name">rollback-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>java.lang.RuntimeException<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment" spellcheck="true">&lt;!--ä¿®æ”¹æ–¹æ³•  --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>update*<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment" spellcheck="true">&lt;!--åˆ é™¤æ–¹æ³•  --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>delete*<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment" spellcheck="true">&lt;!--æŸ¥è¯¢æ–¹æ³•  --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>query*<span class="token punctuation">"</span></span> <span class="token attr-name">propagation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>SUPPORTS<span class="token punctuation">"</span></span> <span class="token attr-name">read-only</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>attributes</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>advice</span><span class="token punctuation">></span></span></code></pre><p>4ã€é…ç½®aop</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--é…ç½®aop  --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--é…ç½®åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼šæŒ‡å®šå“ªäº›åŒ…ä¸­çš„ç±»éœ€è¦ä½¿ç”¨äº‹åŠ¡        id:åˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„åç§°ï¼Œå”¯ä¸€å€¼        expression:åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼ŒæŒ‡å®šå“ªäº›ç±»éœ€è¦ä½¿ç”¨äº‹åŠ¡ï¼Œaspectjä¼šè‡ªåŠ¨åˆ›å»ºä»£ç†å¯¹è±¡--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>servicePt<span class="token punctuation">"</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>execution(* *..service..*.*(..))<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>pointcut</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--é…ç½®å¢å¼ºå™¨  å…³è”adviceå’Œpointcut                    advice-ref  é€šçŸ¥,tx:adviceçš„idå€¼                    pointcut-ref  åˆ‡å…¥ç‚¹è¡¨è¾¾å¼aop:pointcutçš„idå€¼ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>advisor</span> <span class="token attr-name">advice-ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myAdvice<span class="token punctuation">"</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>servicePt<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springé›†æˆMyBatis</title>
      <link href="2020/06/16/Spring-03/"/>
      <url>2020/06/16/Spring-03/</url>
      
        <content type="html"><![CDATA[<p>æ•´åˆçš„æƒ³æ³•ï¼šä½¿ç”¨springçš„iocæ ¸å¿ƒæŠ€æœ¯ï¼Œ æŠŠmybatisä¸­ä½¿ç”¨çš„å¯¹è±¡äº¤ç»™springç»Ÿä¸€åˆ›å»ºå’Œç®¡ç†ã€‚springæ˜¯å®¹å™¨ï¼Œå­˜æ”¾é¡¹ç›®ä¸­ä½¿ç”¨çš„å„ç§å¯¹è±¡ï¼Œä¾‹å¦‚Serviceå¯¹è±¡ï¼ŒDaoå¯¹è±¡ï¼Œå·¥å…·ç±»å¯¹è±¡ç­‰ç­‰</p><p>é¡¹ç›®ç»“æ„ï¼š<br><img src="/2020/06/16/Spring-03/3.jpg" alt></p><h2 id="1ã€åœ¨pom-xmlæ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–åŠæ’ä»¶"><a href="#1ã€åœ¨pom-xmlæ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–åŠæ’ä»¶" class="headerlink" title="1ã€åœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–åŠæ’ä»¶"></a>1ã€åœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–åŠæ’ä»¶</h2><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>4.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--    Springäº‹åŠ¡--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-tx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--    MyBatisä¾èµ–--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.5.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-spring<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>8.0.19<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.1.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">></span></span>src/main/java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--æ‰€åœ¨çš„ç›®å½•--></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--åŒ…æ‹¬ç›®å½•ä¸‹çš„.properties,.xmlæ–‡ä»¶éƒ½ä¼šæ‰«æåˆ°--></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">></span></span>**/*.properties<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">></span></span>**/*.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filtering</span><span class="token punctuation">></span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filtering</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>maven-compiler-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>source</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">></span></span></code></pre><h2 id="2ã€äº¤ç»™springçš„mybatiså¯¹è±¡"><a href="#2ã€äº¤ç»™springçš„mybatiså¯¹è±¡" class="headerlink" title="2ã€äº¤ç»™springçš„mybatiså¯¹è±¡"></a>2ã€äº¤ç»™springçš„mybatiså¯¹è±¡</h2><p>1.æ•°æ®æº</p><p>2.SqlSessionFactoryå¯¹è±¡</p><p>3.Daoå¯¹è±¡</p><p>4.Serviceå¯¹è±¡<br>åˆ›å»ºspringé…ç½®æ–‡ä»¶applicationContext.xml</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/context<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans       http://www.springframework.org/schema/beans/spring-beans.xsd        http://www.springframework.org/schema/context       https://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--  å°†æ•°æ®åº“é…ç½®æ–‡ä»¶å†™å…¥å•ç‹¬çš„æ–‡ä»¶ä¸­        --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placeholder</span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>classpath:jdbc.properties<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!--å£°æ˜æ•°æ®æº  ç”¨äºè¿æ¥æ•°æ®åº“--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myDataSource<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">"</span></span>          <span class="token attr-name">init-method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>init<span class="token punctuation">"</span></span> <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>close<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${jdbc.url}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${jdbc.username}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${jdbc.password}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>maxActive<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${jdbc.maxActive}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--å£°æ˜mybatisä¸­çš„SqlSessionFactoryBean ç”¨äºåˆ›å»ºSqlSessionFactoryå¯¹è±¡    --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sqlSessionFactory<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.mybatis.spring.SqlSessionFactoryBean<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- setæ³¨å…¥ï¼ŒæŠŠæ•°æ®åº“è¿æ¥æ± èµ‹å€¼ç»™dateSourceå±æ€§--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myDataSource<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment" spellcheck="true">&lt;!-- mybatisä¸»é…ç½®æ–‡ä»¶çš„ä½ç½®--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>configLocation<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>classpath:mybatisConfig.xml<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- å£°æ˜Daoç±»         MapperScannerConfigurer:åœ¨å†…éƒ¨è°ƒç”¨getMapper()ç”Ÿæˆæ¯ä¸€ä¸ªæ¥å£çš„daoä»£ç†å¯¹è±¡         åˆ›å»ºå¥½çš„daoå¯¹è±¡æ”¾åœ¨springå®¹å™¨ä¸­ï¼Œé»˜è®¤åç§°ä¸º æ¥å£åé¦–å­—æ¯å°å†™--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.mybatis.spring.mapper.MapperScannerConfigurer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sqlSessionFactoryBeanName<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sqlSessionFactory<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>basePackage<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.dao<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--  å£°æ˜Serviceç±»  --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>employeeService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.service.impl.EmployeeServiceImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>employeeDao<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>employeeDao<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span></code></pre><p>jdbc.propeties</p><pre class=" language-properties"><code class="language-properties"><span class="token attr-name">jdbc.url</span><span class="token punctuation">=</span><span class="token attr-value">jdbc:mysql://localhost:3306/mybatis?serverTimezone=Asia/Shanghai</span><span class="token attr-name">jdbc.username</span><span class="token punctuation">=</span><span class="token attr-value">root</span><span class="token attr-name">jdbc.password</span><span class="token punctuation">=</span><span class="token attr-value">2824199842</span><span class="token attr-name">jdbc.maxActive</span><span class="token punctuation">=</span><span class="token attr-value">20</span></code></pre><h2 id="3ã€mybatisé…ç½®æ–‡ä»¶"><a href="#3ã€mybatisé…ç½®æ–‡ä»¶" class="headerlink" title="3ã€mybatisé…ç½®æ–‡ä»¶"></a>3ã€mybatisé…ç½®æ–‡ä»¶</h2><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span><span class="token doctype">&lt;!DOCTYPE configuration        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-config.dtd"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--  æ‰“å°æ—¥å¿—--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>logImpl<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>STDOUT_LOGGING<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--  æ³¨å†Œæ˜ å°„æ–‡ä»¶  --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.dao<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span></code></pre><h2 id="4ã€åœ¨daoåŒ…ä¸‹æ·»åŠ sqlæ˜ å°„æ–‡ä»¶"><a href="#4ã€åœ¨daoåŒ…ä¸‹æ·»åŠ sqlæ˜ å°„æ–‡ä»¶" class="headerlink" title="4ã€åœ¨daoåŒ…ä¸‹æ·»åŠ sqlæ˜ å°„æ–‡ä»¶"></a>4ã€åœ¨daoåŒ…ä¸‹æ·»åŠ sqlæ˜ å°„æ–‡ä»¶</h2><pre class=" language-sql"><code class="language-sql"><span class="token operator">&lt;</span>?xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span> ?<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE mapper        <span class="token keyword">PUBLIC</span> "<span class="token operator">-</span><span class="token comment" spellcheck="true">//mybatis.org//DTD Mapper 3.0//EN"</span>        "http:<span class="token comment" spellcheck="true">//mybatis.org/dtd/mybatis-3-mapper.dtd" ></span><span class="token operator">&lt;</span>mapper namespace<span class="token operator">=</span><span class="token string">"com.zyz.dao.EmployeeDao"</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token keyword">insert</span> id<span class="token operator">=</span><span class="token string">"insertEmp"</span> useGeneratedKeys<span class="token operator">=</span><span class="token string">"true"</span> keyProperty<span class="token operator">=</span><span class="token string">"id"</span><span class="token operator">></span>        <span class="token keyword">insert</span> <span class="token keyword">into</span> employee<span class="token punctuation">(</span>name<span class="token punctuation">,</span>gender<span class="token punctuation">,</span>email<span class="token punctuation">,</span>dept_id<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token comment" spellcheck="true">#{name},#{gender},#{email},#{deptId})</span>    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">insert</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token keyword">select</span> id<span class="token operator">=</span><span class="token string">"selectAllEmps"</span> resultType<span class="token operator">=</span><span class="token string">"com.zyz.bean.Employee"</span><span class="token operator">></span>        <span class="token keyword">select</span> id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> email<span class="token punctuation">,</span> dept_id deptId <span class="token keyword">from</span> employee    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">select</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>mapper<span class="token operator">></span></code></pre><h2 id="5ã€åˆ›å»ºserviceåŒ…æ·»åŠ ç›¸åº”çš„Serviceæ¥å£å¹¶å®ç°"><a href="#5ã€åˆ›å»ºserviceåŒ…æ·»åŠ ç›¸åº”çš„Serviceæ¥å£å¹¶å®ç°" class="headerlink" title="5ã€åˆ›å»ºserviceåŒ…æ·»åŠ ç›¸åº”çš„Serviceæ¥å£å¹¶å®ç°"></a>5ã€åˆ›å»ºserviceåŒ…æ·»åŠ ç›¸åº”çš„Serviceæ¥å£å¹¶å®ç°</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmployeeService</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">addEmp</span><span class="token punctuation">(</span>Employee employee<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Employee<span class="token operator">></span> <span class="token function">queryAllEmps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmployeeServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">EmployeeService</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> EmployeeDao employeeDao<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// ä½¿ç”¨setæ³¨å…¥èµ‹å€¼</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEmployeeDao</span><span class="token punctuation">(</span>EmployeeDao employeeDao<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>employeeDao <span class="token operator">=</span> employeeDao<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">addEmp</span><span class="token punctuation">(</span>Employee employee<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> employeeDao<span class="token punctuation">.</span><span class="token function">insertEmp</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Employee<span class="token operator">></span> <span class="token function">queryAllEmps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> employeeDao<span class="token punctuation">.</span><span class="token function">selectAllEmps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="6ã€åˆ›å»ºæµ‹è¯•ç±»"><a href="#6ã€åˆ›å»ºæµ‹è¯•ç±»" class="headerlink" title="6ã€åˆ›å»ºæµ‹è¯•ç±»"></a>6ã€åˆ›å»ºæµ‹è¯•ç±»</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestDao</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        String config <span class="token operator">=</span> <span class="token string">"applicationContext.xml"</span><span class="token punctuation">;</span>        ApplicationContext applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>        EmployeeDao employeeDao <span class="token operator">=</span> <span class="token punctuation">(</span>EmployeeDao<span class="token punctuation">)</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"employeeDao"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Employee employee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span><span class="token string">"zyz001"</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">,</span><span class="token string">"2824199842@qq.com"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        employeeDao<span class="token punctuation">.</span><span class="token function">insertEmp</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        String config <span class="token operator">=</span> <span class="token string">"applicationContext.xml"</span><span class="token punctuation">;</span>        ApplicationContext applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>        EmployeeDao employeeDao <span class="token operator">=</span> <span class="token punctuation">(</span>EmployeeDao<span class="token punctuation">)</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"employeeDao"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        List<span class="token operator">&lt;</span>Employee<span class="token operator">></span> employees <span class="token operator">=</span> employeeDao<span class="token punctuation">.</span><span class="token function">selectAllEmps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>Employee e<span class="token operator">:</span>employees<span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        String config <span class="token operator">=</span> <span class="token string">"applicationContext.xml"</span><span class="token punctuation">;</span>        ApplicationContext applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>        EmployeeService employeeService <span class="token operator">=</span> <span class="token punctuation">(</span>EmployeeService<span class="token punctuation">)</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"employeeService"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Employee employee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span><span class="token string">"zhangsan"</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">,</span><span class="token string">"zhangsan@126.com"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// äº‹åŠ¡è‡ªåŠ¨æäº¤</span>        employeeService<span class="token punctuation">.</span><span class="token function">addEmp</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        String config <span class="token operator">=</span> <span class="token string">"applicationContext.xml"</span><span class="token punctuation">;</span>        ApplicationContext applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>        EmployeeService employeeService <span class="token operator">=</span> <span class="token punctuation">(</span>EmployeeService<span class="token punctuation">)</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"employeeService"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Employee employee1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span><span class="token string">"zhangsan"</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">,</span><span class="token string">"zhangsan@126.com"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// äº‹åŠ¡è‡ªåŠ¨æäº¤</span>        List<span class="token operator">&lt;</span>Employee<span class="token operator">></span> employees <span class="token operator">=</span> employeeService<span class="token punctuation">.</span><span class="token function">queryAllEmps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span>Employee employee<span class="token operator">:</span>employees<span class="token punctuation">)</span><span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AOPé¢å‘åˆ‡é¢ç¼–ç¨‹</title>
      <link href="2020/06/12/Spring-02/"/>
      <url>2020/06/12/Spring-02/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»£ç†æ¨¡å¼"><a href="#ä»£ç†æ¨¡å¼" class="headerlink" title="ä»£ç†æ¨¡å¼"></a>ä»£ç†æ¨¡å¼</h2><p><img src="/2020/06/12/Spring-02/1.jpg" alt></p><h3 id="é™æ€ä»£ç†"><a href="#é™æ€ä»£ç†" class="headerlink" title="é™æ€ä»£ç†"></a>é™æ€ä»£ç†</h3><p>è§’è‰²åˆ†æï¼š<br>æŠ½è±¡è§’è‰²ï¼šä¸€èˆ¬ä½¿ç”¨æ¥å£æˆ–æŠ½è±¡ç±»æ¥å®ç°ã€‚ä¸€æ˜¯é€šè¿‡ç»§æ‰¿è¢«ä»£ç†ç±»çš„æ–¹å¼å®ç°å…¶å­ç±»ï¼Œé‡å†™çˆ¶ç±»æ–¹æ³•ï¼›äºŒæ˜¯ä¸è¢«ä»£ç†ç±»å®ç°å…±åŒçš„ä¸€ä¸ªæ¥å£ã€‚<br>çœŸå®è§’è‰²ï¼šè¢«ä»£ç†çš„è§’è‰²ã€‚<br>ä»£ç†è§’è‰²ï¼šä»£ç†çœŸå®è§’è‰²ï¼Œæ‰§è¡Œé™„å±æ“ä½œã€‚<br>å®¢æˆ·ï¼šä½¿ç”¨ä»£ç†è§’è‰²æ¥è¿›è¡Œä¸€äº›æ“ä½œã€‚<br>ä»£ç æ­¥éª¤ ï¼š</p><p>1ã€æ¥å£</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Rent</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">rent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>2ã€çœŸå®è§’è‰²</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Host</span> <span class="token keyword">implements</span> <span class="token class-name">Rent</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">rent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hostæä¾›ç§Ÿæˆ¿æœåŠ¡~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>3ã€ä»£ç†è§’è‰²</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Proxy</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> Host host<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Proxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">Proxy</span><span class="token punctuation">(</span>Host host<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>host <span class="token operator">=</span> host<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// ä»£ç†Hostå¯¹è±¡æä¾›æœåŠ¡</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">rent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        host<span class="token punctuation">.</span><span class="token function">rent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>4ã€å®¢æˆ·ç«¯è®¿é—®ä»£ç†è§’è‰²</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Host host <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Host</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Proxy proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>host<span class="token punctuation">)</span><span class="token punctuation">;</span>        proxy<span class="token punctuation">.</span><span class="token function">rent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>å¥½å¤„ï¼š<br>1ã€å¯ä»¥ä½¿çœŸå®è§’è‰²çš„æ“ä½œæ›´åŠ çº¯ç²¹ï¼Œä¸ç”¨å»å…³æ³¨å…¶ä»–å…¬å…±çš„ä¸šåŠ¡<br>2ã€å…¬å…±ä¸šåŠ¡äº¤ç»™ä»£ç†è§’è‰²ï¼Œå®ç°ä¸šåŠ¡åˆ†å·¥<br>3ã€å…¬å…±ä¸šåŠ¡å‘ç”Ÿæ‹“å±•æ—¶ï¼Œæ–¹ä¾¿é›†ä¸­ç®¡ç†<br>ç¼ºç‚¹ï¼š<br>ä¸€ä¸ªçœŸå®è§’è‰²å°±ä¼šäº§ç”Ÿä¸€ä¸ªä»£ç†è§’è‰²ï¼Œé€ æˆä»£ç é‡ç¿»å€</p><h3 id="åŠ¨æ€ä»£ç†"><a href="#åŠ¨æ€ä»£ç†" class="headerlink" title="åŠ¨æ€ä»£ç†"></a>åŠ¨æ€ä»£ç†</h3><p>ä»£ç†ç±»æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œä¸æ˜¯æˆ‘ä»¬ç›´æ¥å†™å¥½çš„ã€‚äº¤ç»™ç¨‹åºå»è‡ªåŠ¨ç”Ÿæˆä»£ç†ç±»ï¼ˆåœ¨ç¨‹åºè¿è¡ŒæœŸé—´ç”±JVMæ ¹æ®åå°„ç­‰æœºåˆ¶åŠ¨æ€çš„ç”Ÿæˆæºç  ï¼‰ã€‚<br>åŠ¨æ€ä»£ç†åˆ†ä¸ºä¸¤å¤§ç±»ï¼šåŸºäºæ¥å£çš„JDKåŠ¨æ€ä»£ç†ï¼›åŸºäºç±»cglibåŠ¨æ€ä»£ç†ã€‚<br>1ã€æ¥å£</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>2ã€çœŸå®è§’è‰²</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ·»åŠ "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åˆ é™¤"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¿®æ”¹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æŸ¥è¯¢"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>3ã€å®ç°InvocationHandleræ¥å£</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyInvocationHandler</span> <span class="token keyword">implements</span> <span class="token class-name">InvocationHandler</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// ç›®æ ‡å¯¹è±¡</span>    <span class="token keyword">private</span> Object target<span class="token punctuation">;</span>     <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTarget</span><span class="token punctuation">(</span>Object target<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// é€šè¿‡ä»£ç†å¯¹è±¡æ‰§è¡Œæ–¹æ³•æ—¶ï¼Œä¼šè°ƒç”¨invoke</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> Object <span class="token function">invoke</span><span class="token punctuation">(</span>Object proxy<span class="token punctuation">,</span> Method method<span class="token punctuation">,</span> Object<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Throwable <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ‰§è¡Œäº†MyInvocationHandlerä¸­çš„invokeæ–¹æ³•"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ‰§è¡Œç›®æ ‡ç±»æ–¹æ³•</span>        <span class="token keyword">return</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>4ã€åˆ›å»ºå¹¶ä½¿ç”¨ä»£ç†å¯¹è±¡</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºç›®æ ‡å¯¹è±¡</span>        UserServiceImpl target <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºMyInvocationHandlerå¯¹è±¡</span>        MYInvocationHandler myInvocationHandler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyInvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        myInvocationHandler<span class="token punctuation">.</span><span class="token function">setTarget</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ä½¿ç”¨Proxyåˆ›å»ºä»£ç†å¯¹è±¡</span>        UserService proxy <span class="token operator">=</span> <span class="token punctuation">(</span>UserService<span class="token punctuation">)</span> Proxy<span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> myInvocationHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// é€šè¿‡ä»£ç†æ‰§è¡Œæ–¹æ³•ï¼Œä¼šè°ƒç”¨myINvocationHandlerä¸­çš„invokeæ–¹æ³•</span>        proxy<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>åŠ¨æ€ä»£ç†ä½œç”¨ï¼š<br>1ã€åœ¨ç›®æ ‡ç±»æºä»£ç ä¸æ”¹å˜çš„æƒ…å†µä¸‹ï¼Œå¢åŠ åŠŸèƒ½ã€‚<br>2ã€å‡å°‘ä»£ç é‡å¤<br>3ã€ä¸“æ³¨ä¸šåŠ¡é€»è¾‘ä»£ç <br>4ã€è§£è€¦åˆ</p><h2 id="AOPå®šä¹‰"><a href="#AOPå®šä¹‰" class="headerlink" title="AOPå®šä¹‰"></a>AOPå®šä¹‰</h2><p>é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ŒåŸºäºåŠ¨æ€ä»£ç†ï¼Œå¯ä½¿ç”¨jdk,cglibä¸¤ç§ä»£ç†æ–¹å¼ã€‚<br>Springä¼šæ ¹æ®å…·ä½“çš„Beanæ˜¯å¦å…·æœ‰æ¥å£å»é€‰æ‹©åŠ¨æ€ä»£ç†æ–¹å¼ï¼Œå¦‚æœæœ‰æ¥å£ï¼Œä½¿ç”¨çš„æ˜¯Jdkçš„åŠ¨æ€ä»£ç†æ–¹å¼ï¼Œå¦‚æœæ²¡æœ‰æ¥å£ï¼Œä½¿ç”¨çš„æ˜¯cglibçš„åŠ¨æ€ä»£ç†æ–¹å¼ã€‚<br>AOPå°±æ˜¯åŠ¨æ€ä»£ç†çš„è§„èŒƒåŒ–ï¼Œä¾›å¼€å‘äººå‘˜ä»¥ç»Ÿä¸€çš„æ–¹å¼ä½¿ç”¨åŠ¨æ€ä»£ç†ã€‚<br>æ¯”å¦‚ä½ å†™äº†ä¸ªæ–¹æ³•ç”¨æ¥åšä¸€äº›äº‹æƒ…ï¼Œä½†è¿™ä¸ªäº‹æƒ…è¦æ±‚ç™»å½•ç”¨æˆ·æ‰èƒ½åšï¼Œä½ å°±å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•æ‰§è¡Œå‰éªŒè¯ä¸€ä¸‹ï¼Œæ‰§è¡Œåè®°å½•ä¸‹æ“ä½œæ—¥å¿—ï¼ŒæŠŠå‰åçš„è¿™äº›ä¸ä¸šåŠ¡é€»è¾‘æ— å…³çš„ä»£ç æŠ½å–å‡ºæ¥æ”¾ä¸€ä¸ªç±»é‡Œï¼Œè¿™ä¸ª<strong>ç±»å°±æ˜¯åˆ‡é¢ï¼ˆAspectï¼‰ï¼Œ</strong>è¿™ä¸ª<strong>è¢«ç¯ç»•çš„æ–¹æ³•å°±æ˜¯åˆ‡ç‚¹ï¼ˆPointcutï¼‰ï¼Œ</strong>ä½ æ‰€åšçš„<strong>æ‰§è¡Œå‰æ‰§è¡Œåçš„</strong>è¿™äº›æ–¹æ³•ç»Ÿä¸€å«åš<strong>å¢å¼ºå¤„ç†ï¼ˆAdviceï¼‰ã€‚</strong></p><p>æ€ä¹ˆç†è§£é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Ÿ<br>1ã€éœ€è¦åœ¨åˆ†æé¡¹ç›®åŠŸèƒ½æ—¶ï¼Œæ‰¾å‡ºåˆ‡é¢<br>2ã€åˆç†çš„å®‰æ’åˆ‡é¢çš„æ‰§è¡Œæ—¶é—´ï¼ˆç›®æ ‡æ–¹æ³•å‰ï¼Œè¿˜æ˜¯ç›®æ ‡æ–¹æ³•åï¼‰â€”-&gt;é€šçŸ¥æ³¨è§£<br>3ã€åˆç†çš„å®‰æ’åˆ‡é¢æ‰§è¡Œçš„ä½ç½®ï¼ˆåœ¨å“ªä¸ªç±»ï¼Œå“ªä¸ªæ–¹æ³•å¢åŠ å¢å¼ºæ–¹æ³•ï¼‰â€”-&gt;åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</p><h2 id="AOPå®ç°"><a href="#AOPå®ç°" class="headerlink" title="AOPå®ç°"></a>AOPå®ç°</h2><p>aspectjï¼šå¼€æºçš„aopå®ç°æ¡†æ¶<br>åŠ å…¥aspectjä¾èµ–</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-aspects<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>1ã€çœŸå®å¯¹è±¡çš„æ¥å£ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SomeService</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>2ã€å®ç°çœŸå®å¯¹è±¡</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SomeServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SomeService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSome</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"doSomeæ–¹æ³•æ‰§è¡Œ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>3ã€åˆ‡é¢å¯¹è±¡ï¼Œç”¨äºç»™ä¸šåŠ¡å¢åŠ åŠŸèƒ½</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * @Aspect è¡¨ç¤ºå½“å‰ç±»æ˜¯åˆ‡é¢ç±»ã€‚ * åˆ‡é¢ç±»ï¼šç”¨äºç»™ä¸šåŠ¡æ–¹æ³•å¢åŠ åŠŸèƒ½ */</span><span class="token annotation punctuation">@Aspect</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyAspect</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * @Before  å‰ç½®é€šçŸ¥      * å®šä¹‰æ–¹æ³•ï¼Œå®ç°åˆ‡é¢åŠŸèƒ½     * å¿…é¡»ä¸º  public void     * åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼šexecution(è®¿é—®ä¿®é¥°ç¬¦ è¿”å›å€¼ åŒ…å.ç±»å.æ–¹æ³•å(æ–¹æ³•å‚æ•°) å¼‚å¸¸ç±»å‹)     */</span>    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"execution(public void com.zyz.SomeServiceImpl.doSome())"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">mybefore</span><span class="token punctuation">(</span>JoinPoint joinPoint<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">// JoinPoint è·å–æ‰§è¡Œæ–¹æ³•çš„ä¿¡æ¯  å¿…é¡»æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°</span>        <span class="token comment" spellcheck="true">// è·å–æ–¹æ³•å</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å‰ç½®é€šçŸ¥ï¼š"</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>4ã€æ·»åŠ é…ç½®æ–‡ä»¶ï¼Œç”±springåˆ›å»ºéœ€è¦çš„å¯¹è±¡</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>aop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/aop<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop https://www.springframework.org/schema/aop/spring-aop.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--    å°†å¯¹è±¡äº¤ç»™springå®¹å™¨ï¼Œç”±springå®¹å™¨ç»Ÿä¸€åˆ›å»ºï¼Œç®¡ç†å¯¹è±¡--></span><span class="token comment" spellcheck="true">&lt;!--    å£°æ˜ç›®æ ‡å¯¹è±¡--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>someService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.SomeServiceImpl<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token comment" spellcheck="true">&lt;!--    å£°æ˜åˆ‡é¢å¯¹è±¡--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myAspection<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.MyAspect<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token comment" spellcheck="true">&lt;!-- å£°æ˜è‡ªåŠ¨ä»£ç†ç”Ÿæˆå™¨ï¼šä½¿ç”¨aspectjæ¡†æ¶å†…éƒ¨çš„åŠŸèƒ½ï¼Œåˆ›å»ºç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡    å°†springå®¹å™¨ä¸­æ‰€æœ‰ç›®æ ‡å¯¹è±¡ï¼Œä¸€æ¬¡æ€§ç”Ÿæˆä»£ç†å¯¹è±¡--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspectj-autoproxy</span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span></code></pre><p>5ã€æµ‹è¯•</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    String config <span class="token operator">=</span> <span class="token string">"applicationContext.xml"</span><span class="token punctuation">;</span>    ApplicationContext applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>    SomeService proxy <span class="token operator">=</span> <span class="token punctuation">(</span>SomeService<span class="token punctuation">)</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"someService"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    proxy<span class="token punctuation">.</span><span class="token function">doSome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>ç»“æœï¼š<br><img src="/2020/06/12/Spring-02/2.jpg" alt></p><p>åç½®é€šçŸ¥ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * returning   ç›®æ ‡æ–¹æ³•è¿”å›å€¼ * @param res */</span><span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"execution(public Integer com.zyz.SomeService.doOther(Integer))"</span><span class="token punctuation">,</span>returning <span class="token operator">=</span> <span class="token string">"res"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">myAfterReturn</span><span class="token punctuation">(</span>Object res<span class="token punctuation">)</span><span class="token punctuation">{</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åç½®é€šçŸ¥  è·å–çš„è¿”å›å€¼ä¸º"</span><span class="token operator">+</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>ç¯ç»•é€šçŸ¥ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * @param proceedingJoinPoint  å›ºå®šå‚æ•° */</span><span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"execution(public Integer com.zyz.SomeService.doAround(Integer))"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">myAround</span><span class="token punctuation">(</span>ProceedingJoinPoint proceedingJoinPoint<span class="token punctuation">)</span> <span class="token keyword">throws</span> Throwable <span class="token punctuation">{</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç¯ç»•é€šçŸ¥:ç›®æ ‡æ–¹æ³•å‰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Object res <span class="token operator">=</span> null<span class="token punctuation">;</span>    res <span class="token operator">=</span> proceedingJoinPoint<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// method.invoke()</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç›®æ ‡æ–¹æ³•è¿”å›å€¼ï¼š"</span><span class="token operator">+</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç¯ç»•é€šçŸ¥ï¼šç›®æ ‡æ–¹æ³•å"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Maven</title>
      <link href="2020/06/01/Maven/"/>
      <url>2020/06/01/Maven/</url>
      
        <content type="html"><![CDATA[<h2 id="Mavenç®€ä»‹"><a href="#Mavenç®€ä»‹" class="headerlink" title="Mavenç®€ä»‹"></a>Mavenç®€ä»‹</h2><p>Mavenæ˜¯ä¸€æ¬¾è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Œä¸“æ³¨æœåŠ¡äºjavaå¹³å°çš„é¡¹ç›®æ„å»ºå’Œä¾èµ–ç®¡ç†ã€‚<br>1ã€mavenå¯ä»¥ç®¡ç†jaråŒ…åŠå…¶å„ä¸ªç‰ˆæœ¬ï¼Œå¹¶ä¸”å¯ä»¥è‡ªåŠ¨ä¸‹è½½å’Œå¼•å…¥é¡¹ç›®ä¸­<br>2ã€mavenå¯ä»¥æŠŠjaråŒ…ä¾èµ–çš„åŒ…è‡ªåŠ¨ä¸‹è½½å¹¶å¼•å…¥é¡¹ç›®ä¸­<br>3ã€mavenå¯ä»¥ç¼–è¯‘ä»£ç ï¼Œæµ‹è¯•ä»£ç <br>4ã€æ‰“åŒ…æ–‡ä»¶ï¼Œå½¢æˆjaræ–‡ä»¶ï¼Œæˆ–æ˜¯waræ–‡ä»¶<br>5ã€éƒ¨ç½²é¡¹ç›®<br>é¡¹ç›®çš„æ„å»ºï¼šæ„å»ºæ˜¯é¢å‘è¿‡ç¨‹çš„ï¼ŒåŒ…æ‹¬é¡¹ç›®çš„ç¼–è¯‘ï¼Œæµ‹è¯•ï¼Œè¿è¡Œï¼Œæ‰“åŒ…ï¼Œéƒ¨ç½²ç­‰ç­‰<br>Mavenæ”¯æŒçš„æ„å»ºåŒ…æ‹¬ï¼š<br>1ã€æ¸…ç†ï¼ŒæŠŠä¹‹å‰é¡¹ç›®ç¼–è¯‘çš„ä¸œè¥¿åˆ é™¤ï¼Œä¸ºæ–°çš„ç¼–è¯‘ä»£ç åšå‡†å¤‡<br>2ã€ç¼–è¯‘ï¼ŒæŠŠç¨‹åºçš„æºä»£ç ç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚ï¼ˆæ‰¹é‡è¿›è¡Œï¼‰<br>3ã€æµ‹è¯•ï¼Œmavenå¯ä»¥æ‰§è¡Œæµ‹è¯•ç¨‹åºä»£ç ï¼ŒéªŒè¯æ‰€éœ€çš„åŠŸèƒ½æ˜¯å¦æ­£ç¡®ã€‚ï¼ˆæ‰¹é‡è¿›è¡Œï¼‰<br>4ã€æŠ¥å‘Šï¼Œç”Ÿæˆæµ‹è¯•ç»“æœæ–‡ä»¶<br>5ã€æ‰“åŒ…ï¼ŒæŠŠé¡¹ç›®ä¸­çš„æ‰€æœ‰classæ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶ç­‰æ‰€æœ‰èµ„æºæ–‡ä»¶æ”¾åˆ°ä¸€ä¸ªå‹ç¼©æ–‡ä»¶ä¸­ã€‚<br>6ã€å®‰è£…ï¼ŒæŠŠæ‰“åŒ…å¥½çš„æ–‡ä»¶jarï¼Œwarå®‰è£…åˆ°æœ¬æœºä»“åº“<br>7ã€éƒ¨ç½²ï¼ŒæŠŠç¨‹åºå®‰è£…å¥½å¯ä»¥æ‰§è¡Œ</p><h2 id="Mavenæ ¸å¿ƒæ¦‚å¿µ"><a href="#Mavenæ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="Mavenæ ¸å¿ƒæ¦‚å¿µ"></a>Mavenæ ¸å¿ƒæ¦‚å¿µ</h2><p>1ã€POMï¼šä¸€ä¸ªæ–‡ä»¶pom.xmlï¼Œé¡¹ç›®å¯¹è±¡æ¨¡å‹ï¼ŒæŠŠä¸€ä¸ªé¡¹ç›®å½“ä½œä¸€ä¸ªæ¨¡å‹æ¥ä½¿ç”¨ã€‚æ§åˆ¶mavenæ„å»ºé¡¹ç›®çš„è¿‡ç¨‹ï¼Œç®¡ç†jarä¾èµ–ã€‚<br>2ã€çº¦å®šçš„ç›®å½•ç»“æ„ï¼šmavené¡¹ç›®çš„ç›®å½•å’Œæ–‡ä»¶çš„ä½ç½®éƒ½æ˜¯è§„å®šçš„ã€‚<br>3ã€åæ ‡ï¼šæ˜¯ä¸€ä¸ªå”¯ä¸€çš„å­—ç¬¦ä¸²ï¼Œç”¨æ¥è¡¨ç¤ºèµ„æºã€‚<br>4ã€ä¾èµ–ç®¡ç†ï¼šç®¡ç†é¡¹ç›®ä¸­çš„jaråŒ…<br>5ã€ä»“åº“ç®¡ç†ï¼šèµ„æºå­˜æ”¾çš„ä½ç½®<br>6ã€ç”Ÿå‘½å‘¨æœŸï¼šmavenæ„å»ºé¡¹ç›®çš„è¿‡ç¨‹<br>7ã€æ’ä»¶å’Œç›®æ ‡ï¼šæ‰§è¡Œmavenæ„å»ºçš„æ—¶å€™ç”¨çš„ å·¥å…·<br>8ã€ç»§æ‰¿<br>9ã€èšåˆ</p><h2 id="Mavenå®‰è£…"><a href="#Mavenå®‰è£…" class="headerlink" title="Mavenå®‰è£…"></a>Mavenå®‰è£…</h2><p>1ã€ä¸‹è½½è§£å‹<br>2ã€é…ç½®ç¯å¢ƒå˜é‡<br>MAVEN_HOME=d:/apache-maven-3.3.9<br>path=%MAVEN_HOME%/bin;<br>3ã€éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ<br>mvn -v<br><img src="/2020/06/01/Maven/1.jpg" alt></p><h2 id="Mavenå·¥ç¨‹çº¦å®šçš„ç›®å½•ç»“æ„"><a href="#Mavenå·¥ç¨‹çº¦å®šçš„ç›®å½•ç»“æ„" class="headerlink" title="Mavenå·¥ç¨‹çº¦å®šçš„ç›®å½•ç»“æ„"></a>Mavenå·¥ç¨‹çº¦å®šçš„ç›®å½•ç»“æ„</h2><p><img src="/2020/06/01/Maven/2.jpg" alt></p><h2 id="ä»“åº“"><a href="#ä»“åº“" class="headerlink" title="ä»“åº“"></a>ä»“åº“</h2><p>å­˜æ”¾mavenä½¿ç”¨çš„jaråŒ…å’Œæˆ‘ä»¬é¡¹ç›®ä½¿ç”¨çš„jaråŒ…<br>ä»“åº“çš„åˆ†ç±»ï¼š<br>æœ¬åœ°ä»“åº“ï¼šä¸ªäººè®¡ç®—æœºä¸Šçš„ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå­˜æ”¾jaråŒ…<br>è¿œç¨‹ä»“åº“ï¼šåœ¨äº’è”ç½‘ä¸Šä½¿ç”¨ç½‘ç»œæ‰èƒ½ä½¿ç”¨çš„ä»“åº“ã€‚<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1ã€ä¸­å¤®ä»“åº“ï¼šæœ€æƒå¨çš„ï¼Œæ‰€æœ‰å¼€å‘äººå‘˜éƒ½å…±äº«ä½¿ç”¨çš„ä¸€ä¸ªé›†ä¸­ä»“åº“<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2ã€ä¸­å¤®ä»“åº“çš„é•œåƒï¼šå°±æ˜¯ä¸­å¤®ä»“åº“çš„å¤‡ä»½ï¼Œåˆ†å¸ƒåœ¨å„å¤§å·ï¼Œé‡è¦åŸå¸‚ã€‚å‡è½»ä¸­å¤®ä»“åº“çš„å‹åŠ›<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3ã€ç§äººæœåŠ¡å™¨ï¼šåœ¨å…¬å¸å†…éƒ¨ï¼Œå±€åŸŸç½‘ä¸­ä½¿ç”¨ï¼Œä¸å¯¹å¤–ä½¿ç”¨<br>ä»“åº“çš„ä½¿ç”¨ï¼š<br>mavenä»“åº“çš„ä½¿ç”¨ä¸éœ€è¦è®¤ä¸ºå‚ä¸<br>mavené¦–å…ˆæŸ¥æœ¬åœ°ä»“åº“â€”&gt;ç§æœâ€”&gt;é•œåƒâ€”&gt;ä¸­å¤®ä»“åº“</p><h2 id="POMæ–‡ä»¶"><a href="#POMæ–‡ä»¶" class="headerlink" title="POMæ–‡ä»¶"></a>POMæ–‡ä»¶</h2><p>é¡¹ç›®å¯¹è±¡æ¨¡å‹ï¼ŒMaven æŠŠä¸€ä¸ªé¡¹ç›®çš„ç»“æ„å’Œå†…å®¹æŠ½è±¡æˆä¸€ä¸ªæ¨¡å‹ï¼Œåœ¨xml æ–‡ä»¶ä¸­è¿›è¡Œå£°æ˜ï¼Œä»¥æ–¹ä¾¿è¿›è¡Œæ„å»ºå’Œæè¿°ï¼Œpom.xml æ˜¯Maven çš„çµé­‚ã€‚<br>1ã€åæ ‡ï¼Œå”¯ä¸€å€¼ï¼Œåœ¨äº’è”ç½‘ä¸­å”¯ä¸€æ ‡è¯†ä¸€ä¸ªé¡¹ç›®</p><pre class=" language-xml"><code class="language-xml"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.maven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!-- å…¬å¸åŸŸåçš„å€’å†™--></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>ch01-maven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span> <span class="token comment" spellcheck="true">&lt;!-- è‡ªå®šä¹‰é¡¹ç›®çš„åç§°--></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span> <span class="token comment" spellcheck="true">&lt;!-- è‡ªå®šä¹‰ç‰ˆæœ¬å·--></span></code></pre><p>2ã€packagingï¼šæ‰“åŒ…åå‹ç¼©æ–‡ä»¶çš„æ‰©å±•åï¼Œé»˜è®¤ä¸ºjarï¼Œwebåº”ç”¨æ˜¯war<br>3ã€ä¾èµ–dependencieså’Œdependencyï¼Œç›¸å½“äºjavaä¸­çš„import</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>8.0.13<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span></code></pre><p>4ã€è®¾ç½®å±æ€§properties<br>5ã€buildï¼šä¸æ„å»ºç›¸å…³çš„é…ç½®ä¿¡æ¯</p><h2 id="IDEAé›†æˆMaven"><a href="#IDEAé›†æˆMaven" class="headerlink" title="IDEAé›†æˆMaven"></a>IDEAé›†æˆMaven</h2><p><img src="/2020/06/01/Maven/3.jpg" alt></p><p><img src="/2020/06/01/Maven/4.jpg" alt></p><p>é€‰æ‹©Settings for New Projectså†æ¬¡è®¾ç½®<br><img src="/2020/06/01/Maven/5.jpg" alt></p><h2 id="åˆ›å»ºMavenç‰ˆçš„æ™®é€šçš„javaé¡¹ç›®"><a href="#åˆ›å»ºMavenç‰ˆçš„æ™®é€šçš„javaé¡¹ç›®" class="headerlink" title="åˆ›å»ºMavenç‰ˆçš„æ™®é€šçš„javaé¡¹ç›®"></a>åˆ›å»ºMavenç‰ˆçš„æ™®é€šçš„javaé¡¹ç›®</h2><p>ä½¿ç”¨æ¨¡æ¿åˆ›å»ºï¼š<br><img src="/2020/06/01/Maven/6.jpg" alt></p><p>é¡¹ç›®ç»“æ„ï¼š<br><img src="/2020/06/01/Maven/7.jpg" alt></p><h2 id="åˆ›å»ºMavenç‰ˆçš„webé¡¹ç›®"><a href="#åˆ›å»ºMavenç‰ˆçš„webé¡¹ç›®" class="headerlink" title="åˆ›å»ºMavenç‰ˆçš„webé¡¹ç›®"></a>åˆ›å»ºMavenç‰ˆçš„webé¡¹ç›®</h2><p><img src="/2020/06/01/Maven/8.jpg" alt></p><p>é¡¹ç›®ç»“æ„ï¼š<br><img src="/2020/06/01/Maven/9.jpg" alt></p><p>æ·»åŠ ä¾èµ–ï¼š</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>javax.servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.servlet.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jsp-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>åˆ›å»ºä¸€ä¸ªServletç¨‹åº<br><img src="/2020/06/01/Maven/10.jpg" alt></p><p>å†è¿è¡Œç¯å¢ƒä¸­æ·»åŠ TomcatæœåŠ¡å™¨ï¼š<br><img src="/2020/06/01/Maven/11.jpg" alt></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springç®€ä»‹ã€IOCæ§åˆ¶åè½¬</title>
      <link href="2020/06/01/Spring-01/"/>
      <url>2020/06/01/Spring-01/</url>
      
        <content type="html"><![CDATA[<h2 id="Springç®€ä»‹"><a href="#Springç®€ä»‹" class="headerlink" title="Springç®€ä»‹"></a>Springç®€ä»‹</h2><p>Springç”¨äºå‡è½»é¡¹ç›®æ¨¡å—ä¹‹é—´çš„ç®¡ç†ï¼Œç±»ä¸ç±»ä¹‹é—´çš„ç®¡ç†ï¼Œå¸®åŠ©å¼€å‘äººå‘˜åˆ›å»ºå¯¹è±¡ï¼Œç®¡ç†å¯¹è±¡ä¹‹é—´çš„å…³ç³»ã€‚<br>Springæ ¸å¿ƒæŠ€æœ¯æ˜¯IOCï¼ŒAOPã€‚èƒ½å®ç°æ¨¡å—ä¹‹é—´çš„ï¼Œç±»ä¹‹é—´çš„è§£è€¦åˆã€‚<br>ä¼˜ç‚¹ï¼š<br>1ã€è½»é‡<br>2ã€é’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼ŒIOCè§£è€¦åˆ<br>3ã€AOPé¢å‘åˆ‡é¢ç¼–ç¨‹<br>4ã€æ–¹ä¾¿é›†æˆå…¶ä»–å„ç§æ¡†æ¶</p><h2 id="Springä½“ç³»ç»“æ„"><a href="#Springä½“ç³»ç»“æ„" class="headerlink" title="Springä½“ç³»ç»“æ„"></a>Springä½“ç³»ç»“æ„</h2><p><img src="/2020/06/01/Spring-01/1.jpg" alt></p><p>Spring æ¡†æ¶æ˜¯ä¸€ä¸ªåˆ†å±‚æ¶æ„ï¼Œç”± 7 ä¸ªå®šä¹‰è‰¯å¥½çš„æ¨¡å—ç»„æˆã€‚</p><p> Spring DAOï¼Œ  Spring Webï¼ŒSpringMVCï¼ŒSpring AOPï¼ŒSpringä¸Šä¸‹æ–‡ï¼ŒSpring ORMï¼Œæ ¸å¿ƒå®¹å™¨ã€‚æ‰€ä»¥ï¼ŒSpringæ˜¯ä¸€ç³»åˆ—è½»é‡çº§Java EEæ¡†æ¶çš„é›†åˆã€‚</p><h2 id="IOCæ§åˆ¶åè½¬"><a href="#IOCæ§åˆ¶åè½¬" class="headerlink" title="IOCæ§åˆ¶åè½¬"></a>IOCæ§åˆ¶åè½¬</h2><p>Inversion of controlï¼šæ§åˆ¶åè½¬ï¼Œæ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œä¸€ç§æ€æƒ³ã€‚<br>æ˜¯æŒ‡æŠŠå¯¹è±¡çš„åˆ›å»ºã€èµ‹å€¼ã€ç®¡ç†å·¥ä½œéƒ½äº¤ç»™ä»£ç ä»¥å¤–çš„å®¹å™¨å®ç°ï¼Œæ§åˆ¶åè½¬å°±æ˜¯å¯¹å¯¹è±¡æ§åˆ¶æƒçš„è½¬ç§»ï¼Œç”±ç¨‹åºä»£ç æœ¬èº«åè½¬åˆ°äº†ç¨‹åºå¤–éƒ¨å®¹å™¨ã€‚<br><strong>æ§åˆ¶ï¼š</strong>åˆ›å»ºå¯¹è±¡ï¼Œå¯¹è±¡å±æ€§çš„èµ‹å€¼ï¼Œå¯¹è±¡ä¹‹é—´å…³ç³»çš„ç®¡ç†ã€‚<br><strong>åè½¬ï¼š</strong>æŠŠåŸæ¥å¼€å‘äººå‘˜ç®¡ç†ï¼Œåˆ›å»ºå¯¹è±¡çš„æƒåŠ›äº¤ç»™ä»£ç ä¹‹å¤–çš„å®¹å™¨ã€‚ç”±å®¹å™¨ä»£æ›¿å¼€å‘äººå‘˜ç®¡ç†å¯¹è±¡ã€‚<br>æ­£è½¬ï¼šç”±å¼€å‘äººå‘˜åœ¨ä»£ç ä¸­ï¼Œä½¿ç”¨new æ„é€ æ–¹æ³• åˆ›å»ºå¯¹è±¡ï¼Œå¼€å‘äººå‘˜ä¸»åŠ¨ç®¡ç†å¯¹è±¡ã€‚<br>å®¹å™¨ï¼šä¸€ä¸ªæœåŠ¡å™¨è½¯ä»¶ï¼Œä¸€ä¸ªæ¡†æ¶(Spring)ã€‚<br>IOCçš„å¥½å¤„ï¼šå‡å°‘å¯¹ä»£ç çš„æ”¹åŠ¨ï¼Œä¹Ÿèƒ½å®ç°ä¸åŒçš„åŠŸèƒ½ã€‚å®ç°è§£è€¦åˆã€‚<br>IOCçš„ä½“ç°ï¼šServlet ,Tomcatä½œä¸ºå®¹å™¨åˆ›å»ºServletå¯¹è±¡ã€‚<br>IOCçš„æŠ€æœ¯å®ç°ï¼š<br>DI(Dependency Injection) ä¾èµ–æ³¨å…¥ï¼Œåªéœ€è¦åœ¨ç¨‹åºä¸­æä¾›å¯¹è±¡çš„åç§°ï¼Œè‡³äºå¯¹è±¡æ˜¯å¦‚ä½•åœ¨å®¹å™¨ä¸­åˆ›å»ºï¼Œèµ‹å€¼ï¼ŒæŸ¥æ‰¾éƒ½æ˜¯ç”±å®¹å™¨å†…éƒ¨å®ç°çš„ã€‚<br>Springä½¿ç”¨DIå®ç°äº†IOCçš„åŠŸèƒ½ï¼ŒSpringåº•å±‚åˆ›å»ºå¯¹è±¡ä½¿ç”¨çš„æ˜¯åå°„æœºåˆ¶ã€‚<br>Springæ˜¯ä¸€ä¸ªå®¹å™¨ã€‚</p><h2 id="ä½¿ç”¨Spring"><a href="#ä½¿ç”¨Spring" class="headerlink" title="ä½¿ç”¨Spring"></a>ä½¿ç”¨Spring</h2><h3 id="1ã€ä½¿ç”¨Mavenåˆ›å»ºä¸€ä¸ªæ™®é€šçš„javaé¡¹ç›®"><a href="#1ã€ä½¿ç”¨Mavenåˆ›å»ºä¸€ä¸ªæ™®é€šçš„javaé¡¹ç›®" class="headerlink" title="1ã€ä½¿ç”¨Mavenåˆ›å»ºä¸€ä¸ªæ™®é€šçš„javaé¡¹ç›®"></a>1ã€ä½¿ç”¨Mavenåˆ›å»ºä¸€ä¸ªæ™®é€šçš„javaé¡¹ç›®</h3><p><img src="/2020/06/01/Spring-01/2.jpg" alt></p><h3 id="2ã€å¼•å…¥Springä¾èµ–"><a href="#2ã€å¼•å…¥Springä¾èµ–" class="headerlink" title="2ã€å¼•å…¥Springä¾èµ–"></a>2ã€å¼•å…¥Springä¾èµ–</h3><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>æ’ä»¶å¯åŠ å¯ä¸åŠ ï¼ŒæŒ‡æ˜jdkç‰ˆæœ¬(å‰é¢å·²ç»æŒ‡å®š)</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>maven-compiler-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>source</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span>ss        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">></span></span></code></pre><h3 id="3ã€åˆ›å»ºSpringé…ç½®æ–‡ä»¶"><a href="#3ã€åˆ›å»ºSpringé…ç½®æ–‡ä»¶" class="headerlink" title="3ã€åˆ›å»ºSpringé…ç½®æ–‡ä»¶"></a>3ã€åˆ›å»ºSpringé…ç½®æ–‡ä»¶</h3><p>bean.xml</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans       http://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!-- å£°æ˜bean ä¸€ä¸ªbeanæ ‡ç­¾å£°æ˜ä¸€ä¸ªå¯¹è±¡--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>someService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.service.impl.SomeServiceImpl<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span></code></pre><h3 id="4ã€ä½¿ç”¨springåˆ›å»ºå¯¹è±¡ï¼Œè°ƒç”¨å¯¹è±¡æ–¹æ³•"><a href="#4ã€ä½¿ç”¨springåˆ›å»ºå¯¹è±¡ï¼Œè°ƒç”¨å¯¹è±¡æ–¹æ³•" class="headerlink" title="4ã€ä½¿ç”¨springåˆ›å»ºå¯¹è±¡ï¼Œè°ƒç”¨å¯¹è±¡æ–¹æ³•"></a>4ã€ä½¿ç”¨springåˆ›å»ºå¯¹è±¡ï¼Œè°ƒç”¨å¯¹è±¡æ–¹æ³•</h3><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// ä½¿ç”¨Spring å®¹å™¨åˆ›å»ºå¯¹è±¡</span><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 1ã€æŒ‡æ˜springé…ç½®æ–‡ä»¶åç§°</span>    String config <span class="token operator">=</span> <span class="token string">"beans.xml"</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 2ã€åˆ›å»ºspringå®¹å™¨å¯¹è±¡ ApplicationContext</span>    <span class="token comment" spellcheck="true">// ä»ç±»è·¯å¾„åŠ è½½é…ç½®æ–‡ä»¶ï¼ˆåˆ›å»ºé…ç½®æ–‡ä»¶ä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼‰</span>    ApplicationContext applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 3ã€ä»å®¹å™¨ä¸­è·å–å¯¹è±¡</span>    SomeService someService <span class="token operator">=</span> <span class="token punctuation">(</span>SomeService<span class="token punctuation">)</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"someService"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// é€šè¿‡id</span>    someService<span class="token punctuation">.</span><span class="token function">doSome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="diä¾èµ–æ³¨å…¥"><a href="#diä¾èµ–æ³¨å…¥" class="headerlink" title="diä¾èµ–æ³¨å…¥"></a>diä¾èµ–æ³¨å…¥</h2><p>å¸¸ç”¨çš„æ³¨å…¥æ–¹å¼ä¸»è¦æœ‰ä¸‰ç§ï¼šæ„é€ æ–¹æ³•æ³¨å…¥ï¼Œsetteræ³¨å…¥ï¼ŒåŸºäºæ³¨è§£çš„æ³¨å…¥ã€‚</p><h3 id="åŸºäºxmlæ–‡ä»¶"><a href="#åŸºäºxmlæ–‡ä»¶" class="headerlink" title="åŸºäºxmlæ–‡ä»¶"></a>åŸºäºxmlæ–‡ä»¶</h3><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--æ™®é€šç±»å‹  setæ³¨å…¥--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myPerson<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.bean.Person<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>10001<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Tony<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!-- å¼•ç”¨ç±»å‹  setæ³¨å…¥--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>school<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mySchool<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mySchool<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.bean.School<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1001<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>schoolName<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>é•¿æ±Ÿå¤§å­¦<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--  æ„é€ æ³¨å…¥ constructor-arg  å½¢å‚å±æ€§        name   æ„é€ æ–¹æ³•å½¢å‚å        index  è¡¨ç¤ºæ„é€ æ–¹æ³•çš„å‚æ•°ä½ç½®  ä»å·¦åˆ°å³0,1,2 ...        æ™®é€šç±»å‹   value        å¼•ç”¨ç±»å‹   ref--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myPersonConstructor<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.bean.Person<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>10002<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>zyz<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>school<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mySchool<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mySchool<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.bean.School<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1001<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>schoolName<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>é•¿æ±Ÿå¤§å­¦<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myPersonConstructor2<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.bean.Person<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>10003<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wd<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mySchool2<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mySchool2<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.bean.School<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1002<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>schoolName<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>æ¸…åå¤§å­¦<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></code></pre><p><img src="/2020/06/01/Spring-01/3.jpg" alt></p><p>å¼•ç”¨ç±»å‹è‡ªåŠ¨æ³¨å…¥ï¼š</p><ul><li><p>byNameï¼šjavaç±»ä¸­å¼•ç”¨ç±»å‹å±æ€§å ä¸springé…ç½®æ–‡ä»¶ä¸­çš„beanæ ‡ç­¾ä¸­çš„idå€¼ç›¸åŒ</p><p>  <img src="/2020/06/01/Spring-01/4.jpg" alt></p><pre class=" language-xml"><code class="language-xml">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myPersonConstructor2<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.bean.Person<span class="token punctuation">"</span></span> <span class="token attr-name">autowire</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>byName<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>10003<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wd<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>school<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.bean.School<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1002<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>schoolName<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>æ¸…åå¤§å­¦<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></code></pre></li><li><p>byTypeï¼šä½¿ç”¨byType æ–¹å¼è‡ªåŠ¨æ³¨å…¥ï¼Œè¦æ±‚ï¼šé…ç½®æ–‡ä»¶ä¸­è¢«è°ƒç”¨è€…bean çš„class å±æ€§æŒ‡å®šçš„ç±»ï¼Œè¦ä¸ä»£ç ä¸­è°ƒç”¨è€…bean ç±»çš„æŸå¼•ç”¨ç±»å‹å±æ€§ç±»å‹åŒæºã€‚å³è¦ä¹ˆç›¸åŒï¼Œè¦ä¹ˆæœ‰is-a å…³ç³»ï¼ˆå­ç±»ï¼Œæˆ–æ˜¯å®ç°ç±»ï¼‰ã€‚<strong>ä½†è¿™æ ·çš„åŒæºçš„è¢«è°ƒç”¨bean åªèƒ½æœ‰ä¸€ä¸ªã€‚</strong></p><pre class=" language-java"><code class="language-java">  <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"person"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"com.zyz.bean.Person"</span> autowire<span class="token operator">=</span><span class="token string">"byType"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"id"</span> value<span class="token operator">=</span><span class="token string">"10004"</span><span class="token operator">/</span><span class="token operator">></span>          <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"name"</span> value<span class="token operator">=</span><span class="token string">"wd788"</span><span class="token operator">/</span><span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span>  <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"school"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"com.zyz.bean.School"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"id"</span> value<span class="token operator">=</span><span class="token string">"1001"</span><span class="token operator">/</span><span class="token operator">></span>          <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"schoolName"</span> value<span class="token operator">=</span><span class="token string">"åŒ—äº¬å¤§å­¦"</span><span class="token operator">/</span><span class="token operator">></span>   <span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span></code></pre></li></ul><h3 id="åŸºäºæ³¨è§£"><a href="#åŸºäºæ³¨è§£" class="headerlink" title="åŸºäºæ³¨è§£"></a>åŸºäºæ³¨è§£</h3><p><img src="/2020/06/01/Spring-01/5.jpg" alt></p><p>â€‹    valueå¯çœç•¥</p><p>åœ¨é…ç½®æ–‡ä»¶ä¸­å£°æ˜ç»„ä»¶æ‰«æå™¨</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--   å£°æ˜ç»„ä»¶æ‰«æå™¨  ç»„ä»¶å°±æ˜¯javaå¯¹è±¡--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zyz.component<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></code></pre><p>å¦å¤–ï¼ŒSpring è¿˜æä¾›äº†3 ä¸ªåˆ›å»ºå¯¹è±¡çš„æ³¨è§£ï¼š<br>@Repository ç”¨äºå¯¹DAO å®ç°ç±»è¿›è¡Œæ³¨è§£<br>@Service ç”¨äºå¯¹Service å®ç°ç±»è¿›è¡Œæ³¨è§£<br>@Controller ç”¨äºå¯¹Controller å®ç°ç±»è¿›è¡Œæ³¨è§£<br>è¿™ä¸‰ä¸ªæ³¨è§£ä¸@Component éƒ½å¯ä»¥åˆ›å»ºå¯¹è±¡ï¼Œä½†è¿™ä¸‰ä¸ªæ³¨è§£è¿˜æœ‰å…¶ä»–çš„å«ä¹‰ï¼Œ@Serviceåˆ›å»ºä¸šåŠ¡å±‚å¯¹è±¡ï¼Œä¸šåŠ¡å±‚å¯¹è±¡å¯ä»¥åŠ å…¥äº‹åŠ¡åŠŸèƒ½ï¼Œ@Controller æ³¨è§£åˆ›å»ºçš„å¯¹è±¡å¯ä»¥ä½œä¸ºå¤„ç†å™¨æ¥æ”¶ç”¨æˆ·çš„è¯·æ±‚ã€‚<br>@Repositoryï¼Œ@Serviceï¼Œ@Controller æ˜¯å¯¹@Component æ³¨è§£çš„ç»†åŒ–ï¼Œæ ‡æ³¨ä¸åŒå±‚çš„å¯¹è±¡ã€‚å³æŒä¹…å±‚å¯¹è±¡ï¼Œä¸šåŠ¡å±‚å¯¹è±¡ï¼Œæ§åˆ¶å±‚å¯¹è±¡ã€‚<br>æ™®é€šç±»å‹èµ‹å€¼ï¼š<br><img src="/2020/06/01/Spring-01/6.jpg" alt></p><p>byTypeè‡ªåŠ¨æ³¨å…¥ï¼ˆé»˜è®¤ï¼‰<br><img src="/2020/06/01/Spring-01/7.jpg" alt></p><p><img src="/2020/06/01/Spring-01/8.jpg" alt></p><p>byNameè‡ªåŠ¨æ³¨å…¥ï¼ˆå½“ä¸€ä¸ªæ¥å£æœ‰å¤šä¸ªå®ç°ç±»æ—¶ï¼Œéœ€è¦ä½¿ç”¨æ¬¡æ–¹å¼æ³¨å…¥ï¼‰<br><img src="/2020/06/01/Spring-01/9.jpg" alt></p><p><img src="/2020/06/01/Spring-01/8.jpg" alt></p><p><strong>JDKæ³¨è§£@Resourceè‡ªåŠ¨æ³¨å…¥</strong><br>byNameï¼ˆé»˜è®¤ï¼‰ï¼ŒæŒ‰Nameä¸èƒ½æ³¨å…¥æˆåŠŸåˆ™æŒ‰Type<br><img src="/2020/06/01/Spring-01/10.jpg" alt></p><h2 id="bean-ä½œç”¨åŸŸ"><a href="#bean-ä½œç”¨åŸŸ" class="headerlink" title="bean ä½œç”¨åŸŸ"></a>bean ä½œç”¨åŸŸ</h2><p>Springå®¹å™¨ä¸­çš„Beanæ˜¯å¦çº¿ç¨‹å®‰å…¨ï¼Œå®¹å™¨æœ¬èº«å¹¶æ²¡æœ‰æä¾›Beançš„çº¿ç¨‹å®‰å…¨ç­–ç•¥ï¼Œå› æ­¤å¯ä»¥è¯´<strong>Springå®¹å™¨ä¸­çš„Beanæœ¬èº«ä¸å…·å¤‡çº¿ç¨‹å®‰å…¨çš„ç‰¹æ€§</strong>ï¼Œä½†æ˜¯å…·ä½“è¿˜æ˜¯è¦ç»“åˆå…·ä½“scopeçš„Beanå»ç ”ç©¶ã€‚</p><p>1ã€singleton:å•ä¾‹ï¼Œé»˜è®¤ä½œç”¨åŸŸã€‚</p><p>2ã€prototype:åŸå‹ï¼Œæ¯æ¬¡åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚</p><p>3ã€request:è¯·æ±‚ï¼Œæ¯æ¬¡Httpè¯·æ±‚åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œé€‚ç”¨äºWebApplicationContextç¯å¢ƒä¸‹ã€‚</p><p>4ã€session:ä¼šè¯ï¼ŒåŒä¸€ä¸ªä¼šè¯å…±äº«ä¸€ä¸ªå®ä¾‹ï¼Œä¸åŒä¼šè¯ä½¿ç”¨ä¸ç”¨çš„å®ä¾‹ã€‚</p><p>5ã€global-session:å…¨å±€ä¼šè¯ï¼Œæ‰€æœ‰ä¼šè¯å…±äº«ä¸€ä¸ªå®ä¾‹ã€‚</p><p>å¯¹äºå•ä¾‹Bean,æ‰€æœ‰çº¿ç¨‹éƒ½å…±äº«ä¸€ä¸ªå•ä¾‹å®ä¾‹Bean,å› æ­¤æ˜¯å­˜åœ¨èµ„æºçš„ç«äº‰ã€‚</p><p>å¦‚æœå•ä¾‹Bean,æ˜¯ä¸€ä¸ªæ— çŠ¶æ€Beanï¼Œä¹Ÿå°±æ˜¯çº¿ç¨‹ä¸­çš„æ“ä½œä¸ä¼šå¯¹Beançš„æˆå‘˜æ‰§è¡ŒæŸ¥è¯¢ä»¥å¤–çš„æ“ä½œï¼Œé‚£ä¹ˆè¿™ä¸ªå•ä¾‹Beanæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚æ¯”å¦‚Spring mvc çš„ Controllerã€Serviceã€Daoç­‰ï¼Œè¿™äº›Beanå¤§å¤šæ˜¯æ— çŠ¶æ€çš„ï¼Œåªå…³æ³¨äºæ–¹æ³•æœ¬èº«ã€‚</p><p>å¯¹äºæœ‰çŠ¶æ€çš„beanï¼ŒSpringå®˜æ–¹æä¾›çš„beanï¼Œä¸€èˆ¬æä¾›äº†é€šè¿‡ThreadLocalå»è§£å†³çº¿ç¨‹å®‰å…¨çš„æ–¹æ³•ï¼Œæ¯”å¦‚RequestContextHolderã€TransactionSynchronizationManagerã€LocaleContextHolderç­‰ã€‚<br><strong>æ³¨ï¼š Springå®¹å™¨æœ¬èº«å¹¶æ²¡æœ‰æä¾›çº¿ç¨‹å®‰å…¨çš„ç­–ç•¥ï¼Œå› æ­¤æ˜¯å¦çº¿ç¨‹å®‰å…¨å®Œå…¨å–å†³äºBeanæœ¬èº«çš„ç‰¹æ€§ã€‚</strong></p><h3 id="ä½¿ç”¨ThreadLocalçš„å¥½å¤„"><a href="#ä½¿ç”¨ThreadLocalçš„å¥½å¤„" class="headerlink" title="ä½¿ç”¨ThreadLocalçš„å¥½å¤„"></a>ä½¿ç”¨ThreadLocalçš„å¥½å¤„</h3><p>ä½¿å¾—å¤šçº¿ç¨‹åœºæ™¯ä¸‹ï¼Œå¤šä¸ªçº¿ç¨‹å¯¹è¿™ä¸ªå•ä¾‹Beançš„æˆå‘˜å˜é‡å¹¶ä¸å­˜åœ¨èµ„æºçš„ç«äº‰ï¼Œå› ä¸ºThreadLocalä¸ºæ¯ä¸ªçº¿ç¨‹ä¿å­˜çº¿ç¨‹ç§æœ‰çš„æ•°æ®ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisç¼“å­˜æœºåˆ¶</title>
      <link href="2020/05/31/MyBatis-05/"/>
      <url>2020/05/31/MyBatis-05/</url>
      
        <content type="html"><![CDATA[<p>MyBatisç³»ç»Ÿä¸­é»˜è®¤å®šä¹‰äº†ä¸¤çº§ç¼“å­˜ã€‚<br>ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ï¼š<br>1ã€é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰ä¸€çº§ç¼“å­˜å¼€å¯ã€‚(SqlSessionçº§åˆ«çš„ç¼“å­˜ï¼Œä¹Ÿç§°æœ¬åœ°ç¼“å­˜)<br>2ã€äºŒçº§ç¼“å­˜éœ€è¦æ‰‹åŠ¨å¼€å¯å’Œé…ç½®ã€‚(namespaceçº§åˆ«å…¨å±€ç¼“å­˜)<br>3ã€MyBatiså®šä¹‰äº†ç¼“å­˜æ¥å£Cacheï¼Œå¯ä»¥é€šè¿‡å®ç°Cacheæ¥å£è‡ªå®šä¹‰äºŒçº§ç¼“å­˜</p><h2 id="ä¸€çº§ç¼“å­˜"><a href="#ä¸€çº§ç¼“å­˜" class="headerlink" title="ä¸€çº§ç¼“å­˜"></a>ä¸€çº§ç¼“å­˜</h2><p>ä¸æ•°æ®åº“<font color="red">åŒä¸€æ¬¡ä¼šè¯æœŸé—´</font>æŸ¥è¯¢åˆ°çš„æ•°æ®ä¼šå­˜æ”¾åœ¨æœ¬åœ°ç¼“å­˜ä¸­ï¼›<br>ä»¥åå¦‚æœéœ€è¦è·å–ç›¸åŒçš„æ•°æ®ï¼Œä¼šä»ç¼“å­˜ä¸­æŸ¥æ‰¾ï¼Œä¸ä¼šè®¿é—®æ•°æ®åº“ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFirstLevelCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> IOException<span class="token punctuation">{</span>    SqlSessionFactory sqlSessionFactory <span class="token operator">=</span> <span class="token function">getSqlSessionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    SqlSession sqlSession <span class="token operator">=</span> null<span class="token punctuation">;</span>    <span class="token keyword">try</span><span class="token punctuation">{</span>        sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        EmployeeMapper mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span>EmployeeMapper<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Employee empById1 <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getEmpById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>empById1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å†æ¬¡æŸ¥è¯¢ç›¸åŒçš„æ•°æ®</span>        Employee empById2 <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getEmpById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>empById2<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>empById1<span class="token operator">==</span>empById2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>    <span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sqlSession<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>            sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><img src="/2020/05/31/MyBatis-05/1.jpg" alt></p><p>å¯ä»¥çœ‹è§åœ¨ä¸¤æ¬¡æŸ¥è¯¢ä¸­ï¼Œsqlè¯­å¥åªå‘æ•°æ®åº“å‘é€äº†ä¸€æ¬¡ï¼Œå¹¶ä¸”ç¬¬äºŒæ¬¡æŸ¥è¯¢å¾—åˆ°çš„å¯¹è±¡ä¸ç¬¬ä¸€æ¬¡å®Œå…¨ç›¸åŒï¼Œè¯´æ˜ç¬¬äºŒæ¬¡æŸ¥è¯¢è®¿é—®çš„æ˜¯å†…å­˜ä¸­çš„ç¼“å­˜ã€‚</p><p><strong>ä¸€çº§ç¼“å­˜å¤±æ•ˆçš„æƒ…å†µï¼š</strong><br>1ã€ä¸åŒçš„SqlSessionå¯¹åº”ä¸åŒçš„ä¸€çº§ç¼“å­˜ï¼›<br>2ã€åŒä¸€ä¸ªSqlSessionä½†æ˜¯æŸ¥è¯¢æ¡ä»¶ä¸åŒï¼›<br>3ã€åŒä¸€ä¸ªSqlSessionä¸¤æ¬¡æŸ¥è¯¢æœŸé—´æ‰§è¡Œäº†ä»»ä½•ä¸€æ¬¡å¢åˆ æ”¹æ“ä½œï¼›<br>4ã€åŒä¸€ä¸ªSqlSessionä¸¤æ¬¡æŸ¥è¯¢æœŸé—´æ‰‹åŠ¨æ¸…ç©ºäº†ç¼“å­˜ã€‚sqlSession.clearCache()</p><h2 id="äºŒçº§ç¼“å­˜"><a href="#äºŒçº§ç¼“å­˜" class="headerlink" title="äºŒçº§ç¼“å­˜"></a>äºŒçº§ç¼“å­˜</h2><p>å·¥ä½œæœºåˆ¶ï¼š<br>1ã€ä¸€ä¸ªä¼šè¯ï¼ŒæŸ¥è¯¢ä¸€æ¡æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®å°±ä¼šè¢«ä¿å­˜åœ¨å½“å‰ä¼šè¯çš„ä¸€çº§ç¼“å­˜ä¸­ï¼›<br>2ã€<strong>å¦‚æœä¼šè¯å…³é—­</strong>ï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®å°±ä¼šä¿å­˜åˆ°äºŒçº§ç¼“å­˜ä¸­ã€‚æ–°çš„ä¼šè¯å°±ä¼šå‚ç…§äºŒçº§ç¼“å­˜ã€‚<br>3ã€ä¸åŒçš„namespaceæŸ¥å‡ºçš„æ•°æ®ä¼šæ”¾åœ¨è‡ªå·±å¯¹åº”çš„ç¼“å­˜ä¸­(map)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sqlSessionâ€”â€”â€“EmployeeMapperâ€”â€”-Employee<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â€”â€”â€“DepartmentMapperâ€”â€”-Department<br>ä½¿ç”¨ï¼š<br>1ã€å¼€å¯å…¨å±€äºŒçº§ç¼“å­˜</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--  å¼€å¯å…¨å±€ç¼“å­˜--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cacheEnabled<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></code></pre><p>2ã€åœ¨sqlæ˜ å°„æ–‡ä»¶mapper.xmlä¸­é…ç½®ä½¿ç”¨äºŒçº§ç¼“å­˜<br>åªéœ€åœ¨mapperæ ‡ç­¾çš„ç¬¬ä¸€è¡Œæ·»åŠ ï¼š</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- cacheå‚æ•°ï¼š          eviction ç¼“å­˜å›æ”¶ç­–ç•¥  é»˜è®¤LRU æœ€è¿‘æœ€å°‘ä½¿ç”¨          flushInterval ç¼“å­˜åˆ·æ–°é—´éš”  é»˜è®¤ä¸åˆ·æ–°          readOnly  æ˜¯å¦åªè¯» é»˜è®¤flase          size ç¼“å­˜å¤§å°          type è‡ªå®šä¹‰ç¼“å­˜å…¨ç±»å(å®ç°Cacheæ¥å£)--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cache</span><span class="token punctuation">></span></span></code></pre><p>3ã€JavaBeanå¯¹è±¡éœ€è¦å®ç°åºåˆ—åŒ–Serializableæ¥å£</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSecondLevelCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>    SqlSessionFactory sqlSessionFactory <span class="token operator">=</span> <span class="token function">getSqlSessionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    SqlSession sqlSession1 <span class="token operator">=</span> null<span class="token punctuation">;</span>    SqlSession sqlSession2 <span class="token operator">=</span> null<span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        sqlSession1 <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        sqlSession2 <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        EmployeeMapper mapper1 <span class="token operator">=</span> sqlSession1<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span>EmployeeMapper<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        EmployeeMapper mapper2 <span class="token operator">=</span> sqlSession2<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span>EmployeeMapper<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ä½¿ç”¨ä¸åŒçš„sqlSession æŸ¥è¯¢ç›¸åŒçš„æ•°æ®</span>        Employee empById1 <span class="token operator">=</span> mapper1<span class="token punctuation">.</span><span class="token function">getEmpById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>empById1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å…³é—­ä¼šè¯ï¼Œæ•°æ®æ‰ä¼šå­˜å…¥äºŒçº§ç¼“å­˜  ä»ä¸€çº§ç¼“å­˜è½¬ç§»åˆ°äºŒçº§ç¼“å­˜</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>sqlSession1 <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            sqlSession1<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        Employee empById2 <span class="token operator">=</span> mapper2<span class="token punctuation">.</span><span class="token function">getEmpById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>empById2<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>empById1 <span class="token operator">==</span> empById2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// false empById1æ˜¯ä¸€çº§ç¼“å­˜é‡Œé¢çš„ empById2æ˜¯ä»äºŒçº§ç¼“å­˜ä¸­è·å–çš„ æ•…åœ°å€å€¼ä¸ç›¸åŒ</span>    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>sqlSession2 <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            sqlSession2<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><img src="/2020/05/31/MyBatis-05/2.jpg" alt></p><h2 id="å…³é—­ç¼“å­˜"><a href="#å…³é—­ç¼“å­˜" class="headerlink" title="å…³é—­ç¼“å­˜"></a>å…³é—­ç¼“å­˜</h2><p>1ã€cacheEnabled=falseï¼šå…³é—­äºŒçº§ç¼“å­˜ï¼Œä¸€çº§ç¼“å­˜è¿˜å¯ä»¥ä½¿ç”¨<br>2ã€æ¯ä¸€ä¸ªselectæ ‡ç­¾éƒ½æœ‰useCache = â€œtrueâ€ï¼ˆé»˜è®¤ï¼‰<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;useCache = â€œfalseâ€ï¼šå…³é—­äºŒçº§ç¼“å­˜ï¼Œä¸€çº§ç¼“å­˜è¿˜å¯ä»¥ä½¿ç”¨<br>3ã€æ¯ä¸€ä¸ªå¢åˆ æ”¹æ ‡ç­¾é»˜è®¤flushCache=â€trueâ€ï¼ŒæŸ¥è¯¢æ ‡ç­¾é»˜è®¤flushCache=â€falseâ€<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¢åˆ æ”¹æ“ä½œæ‰§è¡Œå®Œåå°±ä¼šæ¸…ç©ºç¼“å­˜<br>4ã€sqlSession.clearCache()ï¼šåªæ˜¯æ¸…ç©ºå½“å‰sqlSessionçš„ä¸€çº§ç¼“å­˜</p><h2 id="ç¼“å­˜åŸç†å›¾"><a href="#ç¼“å­˜åŸç†å›¾" class="headerlink" title="ç¼“å­˜åŸç†å›¾"></a>ç¼“å­˜åŸç†å›¾</h2><p><img src="/2020/05/31/MyBatis-05/3.jpg" alt></p>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisåŠ¨æ€SQL</title>
      <link href="2020/05/30/MyBatis-04/"/>
      <url>2020/05/30/MyBatis-04/</url>
      
        <content type="html"><![CDATA[<p>åŠ¨æ€SQLå¯ä»¥æå¤§çš„ç®€åŒ–æ‹¼è£…SQLçš„æ“ä½œã€‚ç±»ä¼¼äºJSTLã€‚</p><h2 id="ifæ ‡ç­¾"><a href="#ifæ ‡ç­¾" class="headerlink" title="ifæ ‡ç­¾"></a>ifæ ‡ç­¾</h2><p>åŠ¨æ€ä¼ å…¥æŸ¥è¯¢æ‰€éœ€è¦çš„æ¡ä»¶ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmployeeMapperDynamicSQL</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Employee<span class="token operator">></span> <span class="token function">getEmpByConditionIf</span><span class="token punctuation">(</span>Employee emp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dao.EmployeeMapperDynamicSQL<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>   <span class="token comment" spellcheck="true">&lt;!-- æŸ¥è¯¢æŸäº›æ¡ä»¶æ²¡å¸¦ä¸Šå¯èƒ½ä¼šå‡ºç°sqlæ‹¼æ¥é—®é¢˜        1.ç»™whereåé¢åŠ ä¸Š1=1,ä»¥åçš„æ¡ä»¶éƒ½and xxx        2.å»æ‰where,ä½¿ç”¨&lt;where>&lt;/where>æ ‡ç­¾å°†æ‰€æœ‰æŸ¥è¯¢æ¡ä»¶åŒ…æ‹¬åœ¨å†…            åªä¼šå»æ‰å‰é¢çš„å¤šä½™çš„andæˆ–or--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getEmpByConditionIf<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bean.Employee<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select * from employee        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id!<span class="token punctuation">=</span>null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>id=#{id}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name!<span class="token punctuation">=</span>null and name.trim()!<span class="token punctuation">=</span><span class="token punctuation">'</span><span class="token punctuation">'</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>and name like #{name}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>email!<span class="token punctuation">=</span>null and email.trim()!<span class="token punctuation">=</span><span class="token punctuation">'</span><span class="token punctuation">'</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>and email=#{email}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>deptId!<span class="token punctuation">=</span>null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> and dept_id=#{deptId}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">=</span><span class="token punctuation">=</span>0 or gender<span class="token punctuation">=</span><span class="token punctuation">=</span>1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>gender=#{gender}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">></span></span></code></pre><h2 id="chooseæ ‡ç­¾"><a href="#chooseæ ‡ç­¾" class="headerlink" title="chooseæ ‡ç­¾"></a>chooseæ ‡ç­¾</h2><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getEmpByConditionChoose<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bean.Employee<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    select * from employee    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- å¦‚æœå¸¦äº†idå°±ç”¨idæŸ¥ï¼Œå¦‚æœå¸¦äº†nameå°±ç”¨nameæŸ¥ï¼›åªä¼šè¿›å…¥å…¶ä¸­ä¸€ä¸ª--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>choose</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id!<span class="token punctuation">=</span>null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>id=#{id}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name!<span class="token punctuation">=</span>null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>name like #{name}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>email!<span class="token punctuation">=</span>null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> emial=#{email}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>otherwise</span><span class="token punctuation">></span></span>gender=0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>otherwise</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>choose</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre><h2 id="setæ ‡ç­¾"><a href="#setæ ‡ç­¾" class="headerlink" title="setæ ‡ç­¾"></a>setæ ‡ç­¾</h2><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>updateEmp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    update employee    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name!<span class="token punctuation">=</span>null and name.trim()!<span class="token punctuation">=</span><span class="token punctuation">'</span><span class="token punctuation">'</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span> name=#{name},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>email!<span class="token punctuation">=</span>null and email.trim()!<span class="token punctuation">=</span><span class="token punctuation">'</span><span class="token punctuation">'</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>email=#{email},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>deptId!<span class="token punctuation">=</span>null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>dept_id=#{deptId},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">=</span><span class="token punctuation">=</span>0 or gender<span class="token punctuation">=</span><span class="token punctuation">=</span>1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>gender=#{gender}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">></span></span>    where id=#{id}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">></span></span></code></pre><h2 id="foreachæ ‡ç­¾"><a href="#foreachæ ‡ç­¾" class="headerlink" title="foreachæ ‡ç­¾"></a>foreachæ ‡ç­¾</h2><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// æŸ¥è¯¢å‘˜å·¥ idåœ¨ç»™å®šé›†åˆä¸­</span><span class="token keyword">public</span> List<span class="token operator">&lt;</span>Employee<span class="token operator">></span> <span class="token function">getEmpByConditionForeach</span><span class="token punctuation">(</span> <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"ids"</span><span class="token punctuation">)</span> List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> ids<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getEmpByConditionForeach<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bean.Employee<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    select  * from employee where id in    <span class="token comment" spellcheck="true">&lt;!-- collection æŒ‡å®šè¦éå†çš„é›†åˆ  listç±»å‹çš„å‚æ•°ä¼šè¢«å°è£…æˆmap                    item  å°†å½“å‰éå†å‡ºçš„å…ƒç´ èµ‹å€¼ç»™æŒ‡å®šå˜é‡                    separator  æ¯ä¸ªå…ƒç´ ä¹‹é—´çš„åˆ†å‰²ç¬¦                    #{å˜é‡å}  å–å‡ºéå†çš„å€¼                    open éå†å‡ºæ‰€æœ‰çš„ç»“æœæ‹¼æ¥ä¸€ä¸ªèµ·å§‹å­—ç¬¦                    close éå†å‡ºæ‰€æœ‰çš„ç»“æœæ‹¼æ¥ä¸€ä¸ªç»“æŸå­—ç¬¦                    index éå†listæ—¶æ˜¯ç´¢å¼•  éå†mapæ—¶æ˜¯key--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ids<span class="token punctuation">"</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item_id<span class="token punctuation">"</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>,<span class="token punctuation">"</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>(<span class="token punctuation">"</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        #{item_id}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre><pre class=" language-java"><code class="language-java">List<span class="token operator">&lt;</span>Employee<span class="token operator">></span> employeeList <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getEmpByConditionForeach</span><span class="token punctuation">(</span>Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>Employee emp<span class="token operator">:</span>employeeList<span class="token punctuation">)</span><span class="token punctuation">{</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="foreachæ‰¹é‡æ·»åŠ æ•°æ®"><a href="#foreachæ‰¹é‡æ·»åŠ æ•°æ®" class="headerlink" title="foreachæ‰¹é‡æ·»åŠ æ•°æ®"></a>foreachæ‰¹é‡æ·»åŠ æ•°æ®</h2><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// æ‰¹é‡æ·»åŠ </span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addEmps</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"emps"</span><span class="token punctuation">)</span> List<span class="token operator">&lt;</span>Employee<span class="token operator">></span> emps<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>addEmps<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    INSERT INTO employee(name,email,gender,dept_id)    VALUES    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>emps<span class="token punctuation">"</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>emp<span class="token punctuation">"</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>,<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        (#{emp.name},#{emp.email},#{emp.gender},#{emp.deptId})    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">></span></span></code></pre><pre class=" language-java"><code class="language-java">List<span class="token operator">&lt;</span>Employee<span class="token operator">></span> emps <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span>Employee<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>emps<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span><span class="token string">"wd123"</span><span class="token punctuation">,</span><span class="token string">"1"</span><span class="token punctuation">,</span><span class="token string">"wd123@qq.com"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Department</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>emps<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span><span class="token string">"lz123"</span><span class="token punctuation">,</span><span class="token string">"1"</span><span class="token punctuation">,</span><span class="token string">"lz123@qq.com"</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Department</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>mapper<span class="token punctuation">.</span><span class="token function">addEmps</span><span class="token punctuation">(</span>emps<span class="token punctuation">)</span><span class="token punctuation">;</span>sqlSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisæ˜ å°„æ–‡ä»¶</title>
      <link href="2020/05/25/MyBatis-03/"/>
      <url>2020/05/25/MyBatis-03/</url>
      
        <content type="html"><![CDATA[<h2 id="å®ç°å¢åˆ æ”¹æŸ¥åŠŸèƒ½"><a href="#å®ç°å¢åˆ æ”¹æŸ¥åŠŸèƒ½" class="headerlink" title="å®ç°å¢åˆ æ”¹æŸ¥åŠŸèƒ½"></a>å®ç°å¢åˆ æ”¹æŸ¥åŠŸèƒ½</h2><p>æ˜ å°„æ–‡ä»¶æŒ‡å¯¼ç€MyBatiså¦‚ä½•è¿›è¡Œæ•°æ®åº“å¢åˆ æ”¹æŸ¥<br>åœ¨EmployeeMapperæ¥å£ä¸­æ·»åŠ å¢åˆ æ”¹æŸ¥çš„æ–¹æ³•:</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> dao<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmployeeMapper</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> Employee <span class="token function">getEmpById</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addEmp</span><span class="token punctuation">(</span>Employee employee<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateEmp</span><span class="token punctuation">(</span>Employee employee<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteEmpById</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>åœ¨æ˜ å°„æ–‡ä»¶Employee.xmlæ·»åŠ ç›¸åº”çš„sqlæ˜ å°„ï¼š</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span><span class="token doctype">&lt;!DOCTYPE mapper        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"></span><span class="token comment" spellcheck="true">&lt;!-- namespace  åç§°ç©ºé—´  1.é€šè¿‡ namespace.id æ¥ç¡®å®šè¦æ‰§è¡Œçš„sqlè¯­å¥                         2.æŒ‡å®šä¸ºæ¥å£çš„å…¨ç±»åï¼Œç”¨äºç»‘å®šæ¥å£     id  å”¯ä¸€æ ‡è¯†   ç”¨äºå”¯ä¸€æ ‡è¯†ä¸€æ¡sqlè¯­å¥     result  è¿”å›å€¼ç±»å‹     #{id}  ä»ä¼ é€’è¿‡æ¥çš„å‚æ•°ä¸­å–å‡ºidå€¼--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dao.EmployeeMapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--public Employee getEmpById(Integer id);--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getEmpById<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bean.Employee<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select * from employee where id = #{id}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--public void addEmp(Employee employee);--></span> <span class="token comment" spellcheck="true">&lt;!-- parameterTypeï¼š å‚æ•°ç±»å‹  å¯ä»¥çœç•¥         mysqlæ”¯æŒè‡ªå¢ä¸»é”®ï¼Œè‡ªå¢ä¸»é”®çš„è·å–ï¼Œmybatisä¹Ÿæ˜¯åˆ©ç”¨statement.getGenerateKeys()         useGenerateKey="true":ä½¿ç”¨è‡ªå¢ä¸»é”®è·å–ä¸»é”®å€¼ç­–ç•¥         keyProperty:æŒ‡å®šå¯¹åº”çš„ä¸»é”®å€¼ç±»å‹ï¼Œä¹Ÿå°±æ˜¯mybatisè·å–åˆ°ä¸»é”®åå°è£…ç»™javaBeançš„å“ªä¸ªå±æ€§--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>addEmp<span class="token punctuation">"</span></span> <span class="token attr-name">useGeneratedKeys</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        insert into employee(name,gender,email) values(#{name},#{gender},#{email})    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--public void updateEmp(Employee employee);--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>updateEmp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        update employee set name=#{name},gender=#{gender},email=#{email} where id=#{id}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--public void deleteEmpById(Integer id);--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span>  <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>deleteEmpById<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        delete from employee where id=#{id}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>delete</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">></span></span></code></pre><p>æµ‹è¯•å¢åˆ æ”¹æ–¹æ³•ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>        SqlSessionFactory sqlSessionFactory <span class="token operator">=</span> <span class="token function">getSqlSessionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        SqlSession sqlSession <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä¸ä¼šè‡ªåŠ¨æäº¤</span>            EmployeeMapper mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span>EmployeeMapper<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// æ·»åŠ </span>            Employee employee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span> <span class="token string">"Tom"</span><span class="token punctuation">,</span> <span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token string">"tom@126.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            mapper<span class="token punctuation">.</span><span class="token function">addEmp</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// è·å–è‡ªå¢ä¸»é”®çš„å€¼</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>employee<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 5</span>            <span class="token comment" spellcheck="true">// ä¿®æ”¹</span>            <span class="token comment" spellcheck="true">//mapper.updateEmp(new Employee(2,"zyz001","1","zyz001@qq.com"));</span>            <span class="token comment" spellcheck="true">// åˆ é™¤</span>            <span class="token comment" spellcheck="true">//mapper.deleteEmpById(2);</span>            <span class="token comment" spellcheck="true">// æ‰‹åŠ¨æäº¤</span>            sqlSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>sqlSession <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h2 id="MyBatiså‚æ•°å¤„ç†"><a href="#MyBatiså‚æ•°å¤„ç†" class="headerlink" title="MyBatiså‚æ•°å¤„ç†"></a>MyBatiså‚æ•°å¤„ç†</h2><p>å•ä¸ªå‚æ•°ï¼šmybatisä¸ä¼šåšç‰¹æ®Šå¤„ç†ã€‚&nbsp;&nbsp;&nbsp;&nbsp;#{å‚æ•°å}ï¼šå–å‡ºå‚æ•°<br>å¤šä¸ªå‚æ•°ï¼šmybatisä¼šåšç‰¹æ®Šå¤„ç†ï¼Œå¤šä¸ªå‚æ•°å°è£…æˆä¸€ä¸ªmap<br>keyï¼šå‚æ•°param1,param2â€¦<br>valueï¼šä¼ å…¥çš„å‚æ•°å€¼<br>#{param1}æˆ–#{0}ï¼šå–å‡ºå‚æ•°å€¼1<br><strong>é€šè¿‡æ³¨è§£æ˜ç¡®æŒ‡å®šå°è£…ç±»å‹çš„keyï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> Employee <span class="token function">getEmpByIdAndName</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span>Integer id<span class="token punctuation">,</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>String name<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>#{æŒ‡å®šçš„key}ï¼šå–å‡ºå¯¹åº”çš„å‚æ•°å€¼<br><strong>#{}ä¸${}çš„åŒºåˆ«ï¼š</strong><br>#{}ï¼šæ˜¯ä»¥é¢„ç¼–è¯‘çš„å½¢å¼ï¼Œå°†å‚æ•°è®¾ç½®åˆ°sqlï¼›é˜²æ­¢sqlæ³¨å…¥<br>${}ï¼šç›´æ¥æ‹¼è£…åˆ°sqlä¸­ï¼›æœ‰å®‰å…¨é—®é¢˜</p><h2 id="selectå…ƒç´ "><a href="#selectå…ƒç´ " class="headerlink" title="selectå…ƒç´ "></a>selectå…ƒç´ </h2><p>1ã€è¿”å›listå¯¹è±¡</p><pre class=" language-java"><code class="language-java"> <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Employee<span class="token operator">></span> <span class="token function">getEmpsByNameLike</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getEmpsByNameLike<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bean.Employee<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    select * from employee where name like #{name}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre><pre class=" language-java"><code class="language-java">List<span class="token operator">&lt;</span>Employee<span class="token operator">></span> employeeList <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getEmpsByNameLike</span><span class="token punctuation">(</span><span class="token string">"%o%"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æŸ¥è¯¢nameå«æœ‰oçš„æ‰€æœ‰è®°å½•</span></code></pre><p>2ã€è¿”å›mapå¯¹è±¡(å•æ¡è®°å½•)</p><pre class=" language-java"><code class="language-java"> <span class="token comment" spellcheck="true">// è¿”å›ä¸€æ¡è®°å½•çš„map key:åˆ—å   value:å¯¹åº”çš„å€¼</span>    <span class="token keyword">public</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Object<span class="token operator">></span> <span class="token function">getEmpByIdReturnMap</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-xml"><code class="language-xml">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getEmpByIdReturnMap<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>map<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select * from employee where id=#{id}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre><pre class=" language-java"><code class="language-java"> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Object<span class="token operator">></span> map <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getEmpByIdReturnMap</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// {gender=1, name=zyz001, id=1, email=zyz001@qq.com}</span></code></pre><p>2ã€è¿”å›mapå¯¹è±¡(å¤šæ¡è®°å½•)</p><pre class=" language-java"><code class="language-java">  <span class="token comment" spellcheck="true">// è¿”å›å¤šæ¡è®°å½•å‘map key:ä¸»é”®  value:å°è£…åçš„beanå¯¹è±¡</span>    <span class="token comment" spellcheck="true">// å‘Šè¯‰mybatiså°è£…è¿™ä¸ªmapçš„æ—¶å€™ä½¿ç”¨å“ªä¸ªå±æ€§ä½œä¸ºmapçš„ä¸»é”®</span>    <span class="token annotation punctuation">@MapKey</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> Map<span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span>Employee<span class="token operator">></span> <span class="token function">getEmpsByNameLikeReturnMap</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-xml"><code class="language-xml"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getEmpsByNameLikeReturnMap<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bean.Employee<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select * from employee where name like #{name}; <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre><pre class=" language-java"><code class="language-java"> Map<span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span>Employee<span class="token operator">></span> employeeMap <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getEmpsByNameLikeReturnMap</span><span class="token punctuation">(</span><span class="token string">"%o%"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="resultMap-è‡ªå®šä¹‰ç»“æœé›†å°è£…è§„åˆ™"><a href="#resultMap-è‡ªå®šä¹‰ç»“æœé›†å°è£…è§„åˆ™" class="headerlink" title="resultMap è‡ªå®šä¹‰ç»“æœé›†å°è£…è§„åˆ™"></a>resultMap è‡ªå®šä¹‰ç»“æœé›†å°è£…è§„åˆ™</h2><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- resultMap  è‡ªå®šä¹‰ç»“æœé›†è§„åˆ™            id  æ–¹ä¾¿å¼•ç”¨            type è‡ªå®šä¹‰è§„åˆ™çš„javaç±»å‹            --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>MyEmp<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bean.Employee<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--  id æŒ‡å®šä¸»é”®å°è£…è§„åˆ™             column  æŒ‡å®šå“ªä¸€åˆ—             property  æŒ‡å®šå¯¹åº”Javabeançš„å“ªä¸€ä¸ªå±æ€§--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!-- å®šä¹‰æ™®é€šåˆ—å°è£…è§„åˆ™ ä¸æŒ‡å®šåˆ™è‡ªåŠ¨å°è£…       --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getEmpById<span class="token punctuation">"</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>MyEmp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    select * from employee where id=#{id}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre><p>è”åˆæŸ¥è¯¢ï¼šçº§è”å±æ€§å°è£…ç»“æœé›† </p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>MyEmpAndDept<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bean.Employee<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dept_id<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>deptId<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>d_id<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dept.id<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dept_name<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dept.departmentName<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getEmpAndDept<span class="token punctuation">"</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>MyEmpAndDept<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        SELECT e.id id,e.name name,e.gender gender,e.email email,        e.dept_id dept_id,d.id d_id,d.dept_name dept_name        from employee e,dept d WHERE e.dept_id=d.id AND e.id=#{id};<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre><p> è”åˆæŸ¥è¯¢ï¼šé€šè¿‡associationæ ‡ç­¾å°è£…ç»“æœé›†   </p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>MyEmpAndDept2<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bean.Employee<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dept_id<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>deptId<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- association å¯ä»¥æŒ‡å®šè”åˆçš„javabeanå¯¹è±¡                    property="dept"  æŒ‡å®šjavabeanä¸­çš„å“ªä¸ªå±æ€§æ˜¯è”åˆçš„å¯¹è±¡                    javaType  æŒ‡å®šè”åˆå¯¹è±¡çš„ç±»å‹--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dept<span class="token punctuation">"</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bean.Department<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>d_id<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dept_name<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>departmentName<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>association</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">></span></span></code></pre><p>åˆ†éƒ¨æŸ¥è¯¢ï¼šå…ˆæŸ¥è¯¢å‘˜å·¥ï¼Œå¾—åˆ°å‘˜å·¥ä¿¡æ¯åå†æ ¹æ®å‘˜å·¥çš„éƒ¨é—¨ç¼–å·ï¼ŒæŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DepartmentMapper</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> Department <span class="token function">getDeptById</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>DepartmentMapper.xml</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dao.DepartmentMapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getDeptById<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bean.Department<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select id,dept_name departmentName from dept where id=#{id}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">></span></span></code></pre><p>EmployeeMapper.xml</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--  åˆ†éƒ¨æŸ¥è¯¢  å¯ä»¥å¯åŠ¨å»¶è¿ŸåŠ è½½--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>MyEmpByStep<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bean.Employee<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dept_id<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>deptId<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- å®šä¹‰å…³è”å¯¹è±¡å°è£…è§„åˆ™        select è¡¨æ˜å½“å‰å±æ€§æ˜¯è°ƒç”¨æŒ‡å®šçš„æ–¹æ³•åæŸ¥è¯¢å‡ºæ¥çš„ç»“æœ        column  æŒ‡å®šå“ªä¸€åˆ—çš„å€¼ä¼ ç»™è¿™ä¸ªæ–¹æ³•--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dept<span class="token punctuation">"</span></span>                     <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dao.DepartmentMapper.getDeptById<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dept_id<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>association</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getEmpByIdStep<span class="token punctuation">"</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>MyEmpByStep<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select * from employee where id=#{id}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre><p>mybatis-config.xml</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--  å¼€å¯å»¶è¿ŸåŠ è½½ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>lazyLoadingEnabled<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!-- æŒ‰éœ€åŠ è½½--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>aggressiveLazyLoading<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>setting</span><span class="token punctuation">></span></span></code></pre><p>ä½¿ç”¨æ—¶æ‰è¿›è¡ŒåŠ è½½ï¼š</p><pre class=" language-java"><code class="language-java">Employee empByIdStep <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getEmpByIdStep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>empByIdStep<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><img src="/2020/05/25/MyBatis-03/1.jpg" alt></p><pre class=" language-java"><code class="language-java">Employee empByIdStep <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getEmpByIdStep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>empByIdStep<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><img src="/2020/05/25/MyBatis-03/2.jpg" alt></p><p><strong>Collectioné›†åˆç±»å‹&amp;åµŒå¥—ç»“æœé›†ï¼š</strong><br>é€šè¿‡éƒ¨é—¨ç¼–å·æŸ¥æ‰¾æ‰€æœ‰åœ¨è¯¥éƒ¨é—¨çš„å‘˜å·¥ï¼Œè¿”å›ä¸€ä¸ªListå‘˜å·¥é›†åˆ</p><pre class=" language-java"><code class="language-java"><span class="token keyword">private</span> Integer id<span class="token punctuation">;</span><span class="token keyword">private</span> String departmentName<span class="token punctuation">;</span><span class="token keyword">private</span> List<span class="token operator">&lt;</span>Employee<span class="token operator">></span> emps<span class="token punctuation">;</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DepartmentMapper</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> Department <span class="token function">getDeptByIdPlus</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>MyDept<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bean.Department<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>did<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dept_name<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>departmentName<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!-- collectionæ ‡ç­¾ç”¨æ¥å®šä¹‰å…³è”é›†åˆç±»å‹çš„å±æ€§çš„å°è£…è§„åˆ™                    ofType  æŒ‡å®šé›†åˆé‡Œé¢å…ƒç´ çš„ç±»å‹ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>emps<span class="token punctuation">"</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bean.Employee<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>eid<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dept_id<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>deptId<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collection</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getDeptByIdPlus<span class="token punctuation">"</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>MyDept<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    SELECT d.id did ,dept_name,e.id eid,e.`name`,e.gender,e.email,e.dept_id    FROM dept d LEFT JOIN employee e ON d.id=e.dept_id WHERE d.id=#{id}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre><pre class=" language-java"><code class="language-java">Department deptByIdPlus <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getDeptByIdPlus</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>deptByIdPlus<span class="token punctuation">)</span><span class="token punctuation">;</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>deptByIdPlus<span class="token punctuation">.</span><span class="token function">getEmps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><img src="/2020/05/25/MyBatis-03/3.jpg" alt></p>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatiså…¨å±€é…ç½®æ–‡ä»¶</title>
      <link href="2020/05/25/MyBatis-02/"/>
      <url>2020/05/25/MyBatis-02/</url>
      
        <content type="html"><![CDATA[<p>ä¾¿äºåœ¨ç¼–å†™xmlæ–‡ä»¶æ—¶æœ‰æç¤ºä¿¡æ¯<br><img src="/2020/05/25/MyBatis-02/1.jpg" alt></p><p><img src="/2020/05/25/MyBatis-02/2.jpg" alt></p><h2 id="propertieså±æ€§"><a href="#propertieså±æ€§" class="headerlink" title="propertieså±æ€§"></a>propertieså±æ€§</h2><pre class=" language-properties"><code class="language-properties"><span class="token attr-name">jdbc.driver</span><span class="token punctuation">=</span><span class="token attr-value">com.mysql.cj.jdbc.Driver</span><span class="token attr-name">jdbc.url</span><span class="token punctuation">=</span><span class="token attr-value">jdbc:mysql://localhost:3306/mybatis?serverTimezone=Asia/Shanghai</span><span class="token attr-name">jdbc.username</span><span class="token punctuation">=</span><span class="token attr-value">root</span><span class="token attr-name">jdbc.password</span><span class="token punctuation">=</span><span class="token attr-value">2824199842</span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- propertiesæ ‡ç­¾å¼•å…¥propertiesé…ç½®æ–‡ä»¶     resource å¼•å…¥ç±»è·¯å¾„ä¸‹çš„èµ„æº     url å¼•å…¥ç½‘ç»œæˆ–ç£ç›˜è·¯å¾„ä¸‹çš„æ–‡ä»¶--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dbConfig.properties<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">></span></span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>POOLED<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>driver<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${jdbc.driver}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${jdbc.url}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${jdbc.username}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${jdbc.password}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">></span></span></code></pre><h2 id="settingå±æ€§"><a href="#settingå±æ€§" class="headerlink" title="settingå±æ€§"></a>settingå±æ€§</h2><p>settingåŒ…å«ä¸€äº›é‡è¦çš„è®¾ç½®ï¼Œä¼šæ”¹å˜MyBatisè¿è¡Œæ—¶è¡Œä¸º</p><p><img src="/2020/05/25/MyBatis-02/3.jpg" alt></p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--  settingsæ ‡ç­¾åŒ…å«å¾ˆå¤šé‡è¦çš„è®¾ç½®é¡¹  --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mapUnderscoreToCamelCase<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">></span></span></code></pre><h2 id="typeAliasesåˆ«åå¤„ç†å™¨"><a href="#typeAliasesåˆ«åå¤„ç†å™¨" class="headerlink" title="typeAliasesåˆ«åå¤„ç†å™¨"></a>typeAliasesåˆ«åå¤„ç†å™¨</h2><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--typeAliases åˆ«åå¤„ç†å™¨--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!-- &lt;typeAlias type="bean.Employee" alias="emp"/>--></span><span class="token comment" spellcheck="true">&lt;!-- package ä¸ºæŸä¸ªåŒ…ä¸‹çš„æ‰€æœ‰ç±»æ‰¹é‡èµ·åˆ«å             name:æŒ‡å®šåŒ…å ä¸ºå½“å‰åŒ…ä¸‹çš„æ‰€æœ‰åä»£åŒ…çš„æ¯ä¸€ä¸ªç±»èµ·ä¸€ä¸ªé»˜è®¤åˆ«å--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bean<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">></span></span></code></pre><p><img src="/2020/05/25/MyBatis-02/4.jpg" alt></p><h2 id="typeHandlersç±»å‹å¤„ç†å™¨"><a href="#typeHandlersç±»å‹å¤„ç†å™¨" class="headerlink" title="typeHandlersç±»å‹å¤„ç†å™¨"></a>typeHandlersç±»å‹å¤„ç†å™¨</h2><p>æ— è®ºæ˜¯MyBatis åœ¨é¢„å¤„ç†è¯­å¥ï¼ˆPreparedStatementï¼‰ä¸­è®¾ç½®ä¸€ä¸ªå‚æ•°æ—¶ï¼Œè¿˜æ˜¯ä»ç»“æœé›†ä¸­å–å‡ºä¸€ä¸ªå€¼æ—¶ï¼Œéƒ½ä¼šç”¨ç±»å‹å¤„ç†å™¨å°†è·å–çš„å€¼ä»¥åˆé€‚çš„æ–¹å¼è½¬æ¢æˆJava ç±»å‹ã€‚<br><img src="/2020/05/25/MyBatis-02/5.jpg" alt></p><h2 id="pluginsæ’ä»¶"><a href="#pluginsæ’ä»¶" class="headerlink" title="pluginsæ’ä»¶"></a>pluginsæ’ä»¶</h2><p>æ’ä»¶æ˜¯MyBatisæä¾›çš„ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ’ä»¶æ¥ä¿®æ”¹MyBatisçš„ä¸€äº›æ ¸å¿ƒè¡Œä¸ºã€‚æ’ä»¶é€šè¿‡åŠ¨æ€ä»£ç†æœºåˆ¶ï¼Œå¯ä»¥ä»‹å…¥å››å¤§å¯¹è±¡çš„ä»»ä½•ä¸€ä¸ªæ–¹æ³•çš„æ‰§è¡Œã€‚<br><img src="/2020/05/25/MyBatis-02/6.jpg" alt></p><h2 id="environmentç¯å¢ƒé…ç½®"><a href="#environmentç¯å¢ƒé…ç½®" class="headerlink" title="environmentç¯å¢ƒé…ç½®"></a>environmentç¯å¢ƒé…ç½®</h2><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--  é…ç½®å¤šä¸ªç¯å¢ƒ  defaultå¿«é€ŸæŒ‡å®šç¯å¢ƒ      id  å”¯ä¸€æ ‡è¯†ç¯å¢ƒ      transactionManager  äº‹åŠ¡ç®¡ç†å™¨      dataSource  æ•°æ®æº                è‡ªå®šä¹‰æ•°æ®æºï¼šå®ç°DataSourceFactoryæ¥å£--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>development<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>development<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>JDBC<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>POOLED<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>driver<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${jdbc.driver}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${jdbc.url}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${jdbc.username}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${jdbc.password}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">></span></span></code></pre><p><strong>å®é™…å¼€å‘ä¸­æˆ‘ä»¬ä½¿ç”¨Springç®¡ç†æ•°æ®æºï¼Œå¹¶è¿›è¡Œäº‹åŠ¡æ§åˆ¶çš„é…ç½®æ¥è¦†ç›–ä¸Šè¿°é…ç½®</strong></p><h2 id="databaseIdProviderç¯å¢ƒ"><a href="#databaseIdProviderç¯å¢ƒ" class="headerlink" title="databaseIdProviderç¯å¢ƒ"></a>databaseIdProviderç¯å¢ƒ</h2><p>MyBatis å¯ä»¥æ ¹æ®ä¸åŒçš„æ•°æ®åº“å‚å•†æ‰§è¡Œä¸åŒçš„è¯­å¥ã€‚<br><img src="/2020/05/25/MyBatis-02/7.jpg" alt></p><p><img src="/2020/05/25/MyBatis-02/8.jpg" alt></p><h2 id="mapperæ˜ å°„"><a href="#mapperæ˜ å°„" class="headerlink" title="mapperæ˜ å°„"></a>mapperæ˜ å°„</h2><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- å°†å†™å¥½çš„sqlæ˜ å°„æ–‡ä»¶æ³¨å†Œåˆ°å…¨å±€é…ç½®æ–‡ä»¶ä¸­--></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">></span></span> <span class="token comment" spellcheck="true">&lt;!-- &lt;mapper resource="EmployeeMapper.xml"/>--></span><span class="token comment" spellcheck="true">&lt;!--  æ‰¹é‡æ³¨å†Œ    xmlæ–‡ä»¶å¿…é¡»ä¸æ¥å£æ–‡ä»¶åç›¸åŒä¸”åœ¨åŒä¸€ä¸ªåŒ…ä¸‹  --></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dao<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisç®€ä»‹åŠæµ‹è¯•</title>
      <link href="2020/05/24/MyBatis-01/"/>
      <url>2020/05/24/MyBatis-01/</url>
      
        <content type="html"><![CDATA[<h2 id="MyBatisç®€ä»‹"><a href="#MyBatisç®€ä»‹" class="headerlink" title="MyBatisç®€ä»‹"></a>MyBatisç®€ä»‹</h2><p>MyBatisæ˜¯ä¸€ä¸ªåŠè‡ªåŠ¨åŒ–çš„æŒä¹…å±‚æ¡†æ¶ã€‚<br>sqlä¸javaç¼–ç åˆ†å¼€ï¼ŒåŠŸèƒ½è¾¹ç•Œæ¸…æ™°ï¼Œä¸€ä¸ªä¸“æ³¨ä¸šåŠ¡ï¼Œä¸€ä¸ªä¸“æ³¨æ•°æ®ã€‚<br><img src="/2020/05/24/MyBatis-01/1.jpg" alt></p><h2 id="MyBatisçš„ä½¿ç”¨"><a href="#MyBatisçš„ä½¿ç”¨" class="headerlink" title="MyBatisçš„ä½¿ç”¨"></a>MyBatisçš„ä½¿ç”¨</h2><p><strong>åˆ›å»ºæµ‹è¯•çš„æ•°æ®åº“mybatisï¼Œå†åˆ›å»ºä¸€ä¸ªstudentè¡¨</strong></p><p><img src="/2020/05/24/MyBatis-01/1.png" alt></p><h3 id="1ã€å¯¼å…¥MyBatis-jarç­‰ç›¸åº”çš„æ•°æ®åº“è¿æ¥é©±åŠ¨ç­‰ç›¸åº”çš„åŒ…"><a href="#1ã€å¯¼å…¥MyBatis-jarç­‰ç›¸åº”çš„æ•°æ®åº“è¿æ¥é©±åŠ¨ç­‰ç›¸åº”çš„åŒ…" class="headerlink" title="1ã€å¯¼å…¥MyBatis.jarç­‰ç›¸åº”çš„æ•°æ®åº“è¿æ¥é©±åŠ¨ç­‰ç›¸åº”çš„åŒ…"></a>1ã€å¯¼å…¥MyBatis.jarç­‰ç›¸åº”çš„æ•°æ®åº“è¿æ¥é©±åŠ¨ç­‰ç›¸åº”çš„åŒ…</h3><p>log4j.jarç”¨äºæ‰“å°æ•°æ®åº“æ—¥å¿—ï¼ˆéœ€è¦ç¼–å†™ç›¸åº”çš„.xmlé…ç½®æ–‡ä»¶ï¼‰<br><img src="/2020/05/24/MyBatis-01/2.jpg" alt></p><h3 id="2ã€åˆ›å»ºå¯¹åº”äºæ•°æ®åº“ä¸­è¡¨çš„javaBeanå¯¹è±¡"><a href="#2ã€åˆ›å»ºå¯¹åº”äºæ•°æ®åº“ä¸­è¡¨çš„javaBeanå¯¹è±¡" class="headerlink" title="2ã€åˆ›å»ºå¯¹åº”äºæ•°æ®åº“ä¸­è¡¨çš„javaBeanå¯¹è±¡"></a>2ã€åˆ›å»ºå¯¹åº”äºæ•°æ®åº“ä¸­è¡¨çš„javaBeanå¯¹è±¡</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> bean<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> Integer id<span class="token punctuation">;</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> String gender<span class="token punctuation">;</span>    <span class="token keyword">private</span> String email<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Employee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">Employee</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">,</span> String name<span class="token punctuation">,</span> String gender<span class="token punctuation">,</span> String email<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">=</span> gender<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>email <span class="token operator">=</span> email<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Integer <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getGender</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> gender<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setGender</span><span class="token punctuation">(</span>String gender<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">=</span> gender<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> email<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEmail</span><span class="token punctuation">(</span>String email<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>email <span class="token operator">=</span> email<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"Employee{"</span> <span class="token operator">+</span>                <span class="token string">"id="</span> <span class="token operator">+</span> id <span class="token operator">+</span>                <span class="token string">", name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">", gender='"</span> <span class="token operator">+</span> gender <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">", email='"</span> <span class="token operator">+</span> email <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">'}'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="3ã€ç¼–å†™å…¨å±€é…ç½®æ–‡ä»¶"><a href="#3ã€ç¼–å†™å…¨å±€é…ç½®æ–‡ä»¶" class="headerlink" title="3ã€ç¼–å†™å…¨å±€é…ç½®æ–‡ä»¶"></a>3ã€ç¼–å†™å…¨å±€é…ç½®æ–‡ä»¶</h3><p>mybatis-config.xml</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span><span class="token doctype">&lt;!DOCTYPE configuration        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-config.dtd"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>development<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>development<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>JDBC<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>POOLED<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>driver<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.mysql.cj.jdbc.Driver<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>jdbc:mysql://localhost:3306/mybatis?serverTimezone<span class="token punctuation">=</span>Asia/Shanghai<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>2824199842<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">></span></span>   <span class="token comment" spellcheck="true">&lt;!-- å°†å†™å¥½çš„sqlæ˜ å°„æ–‡ä»¶æ³¨å†Œåˆ°å…¨å±€é…ç½®æ–‡ä»¶ä¸­--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>EmployeeMapper.xml<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span></code></pre><h3 id="4ã€ç¼–å†™sqlæ˜ å°„æ–‡ä»¶-é‡‡ç”¨é¢å‘æ¥å£çš„æ–¹å¼"><a href="#4ã€ç¼–å†™sqlæ˜ å°„æ–‡ä»¶-é‡‡ç”¨é¢å‘æ¥å£çš„æ–¹å¼" class="headerlink" title="4ã€ç¼–å†™sqlæ˜ å°„æ–‡ä»¶(é‡‡ç”¨é¢å‘æ¥å£çš„æ–¹å¼)"></a>4ã€ç¼–å†™sqlæ˜ å°„æ–‡ä»¶(é‡‡ç”¨é¢å‘æ¥å£çš„æ–¹å¼)</h3><p>åˆ›å»ºdaoå±‚ï¼Œå¹¶æ·»åŠ EmployeeDaoæ¥å£</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> dao<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmployeeDao</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> Employee <span class="token function">getEmpById</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>EmployeeMapper.xml</p><pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span> <span class="token operator">?</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE mapper        PUBLIC <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>        <span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> namespace  åç§°ç©ºé—´  <span class="token number">1</span><span class="token punctuation">.</span>é€šè¿‡ namespace<span class="token punctuation">.</span>id æ¥ç¡®å®šè¦æ‰§è¡Œçš„sqlè¯­å¥                         <span class="token number">2</span><span class="token punctuation">.</span>æŒ‡å®šä¸ºæ¥å£çš„å…¨ç±»åï¼Œç”¨äºç»‘å®šæ¥å£<span class="token punctuation">(</span>ä¸€èˆ¬ä½¿ç”¨è¿™ç§æ–¹å¼<span class="token punctuation">)</span>     id  å”¯ä¸€æ ‡è¯†   ç”¨äºå”¯ä¸€æ ‡è¯†ä¸€æ¡sqlè¯­å¥     result  è¿”å›å€¼ç±»å‹     #<span class="token punctuation">{</span>id<span class="token punctuation">}</span>  ä»ä¼ é€’è¿‡æ¥çš„å‚æ•°ä¸­å–å‡ºidå€¼<span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span>mapper namespace<span class="token operator">=</span><span class="token string">"dao.EmployeeDao"</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> å°†æ¥å£ä¸­çš„å‡½æ•°ä¸sqlè¯­å¥ç»‘å®š<span class="token operator">--</span><span class="token operator">></span>    <span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">"getEmpById"</span> resultType<span class="token operator">=</span><span class="token string">"bean.Employee"</span><span class="token operator">></span>        select <span class="token operator">*</span> from employee where id <span class="token operator">=</span> #<span class="token punctuation">{</span>id<span class="token punctuation">}</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>mapper<span class="token operator">></span></code></pre><h3 id="5ã€æµ‹è¯•æ˜¯å¦æˆåŠŸ"><a href="#5ã€æµ‹è¯•æ˜¯å¦æˆåŠŸ" class="headerlink" title="5ã€æµ‹è¯•æ˜¯å¦æˆåŠŸ"></a>5ã€æµ‹è¯•æ˜¯å¦æˆåŠŸ</h3><p>MybaitTest.java</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> test<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyBatisTest</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> SqlSessionFactory <span class="token function">getSqlSessionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>        String resource <span class="token operator">=</span> <span class="token string">"mybatis-config.xml"</span><span class="token punctuation">;</span>        InputStream inputStream <span class="token operator">=</span> Resources<span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ ¹æ® xml é…ç½®æ–‡ä»¶åˆ›å»ºä¸€ä¸ªSqlSessionFactoryå¯¹è±¡</span>        SqlSessionFactory sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> sqlSessionFactory<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>        SqlSession sqlSession <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 1.è·å–SqlSessionFactoryå¯¹è±¡</span>            SqlSessionFactory sqlSessionFactory <span class="token operator">=</span> <span class="token function">getSqlSessionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 2.è·å–sqlSessionå¯¹è±¡ ç”¨äºæ‰§è¡Œsqlè¯­å¥</span>            sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 3.è·å–æ¥å£å®ç°ç±»å¯¹è±¡</span>            <span class="token comment" spellcheck="true">// ä¼šä¸ºæ¥å£è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡  ä»£ç†å¯¹è±¡å»æ‰§è¡Œå¢åˆ æ”¹æŸ¥æ–¹æ³•</span>            EmployeeDao mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span>EmployeeDao<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mapper<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä»£ç†å¯¹è±¡</span>            <span class="token comment" spellcheck="true">// 4.ä½¿ç”¨æ¥å£å®ç°ç±»å¯¹è±¡è°ƒç”¨æ¥å£ä¸­çš„æ–¹æ³•</span>            Employee emp <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getEmpById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>sqlSession<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>                sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Json,AJAX</title>
      <link href="2020/05/15/javaweb-08/"/>
      <url>2020/05/15/javaweb-08/</url>
      
        <content type="html"><![CDATA[<h2 id="jsonæ¦‚å¿µ"><a href="#jsonæ¦‚å¿µ" class="headerlink" title="jsonæ¦‚å¿µ"></a>jsonæ¦‚å¿µ</h2><p>jsonæ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚<br>1ã€æ¯”xmlæ›´ä¸ºè½»é‡ï¼Œè§£æé€Ÿåº¦æ›´å¿«ã€‚<br>2ã€æ•°æ®äº¤æ¢æŒ‡çš„æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¸šåŠ¡æ•°æ®çš„ä¼ é€’æ ¼å¼ã€‚</p><h2 id="jsonåœ¨javaSciptä¸­çš„ä½¿ç”¨"><a href="#jsonåœ¨javaSciptä¸­çš„ä½¿ç”¨" class="headerlink" title="jsonåœ¨javaSciptä¸­çš„ä½¿ç”¨"></a>jsonåœ¨javaSciptä¸­çš„ä½¿ç”¨</h2><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// jsonçš„å®šä¹‰</span><span class="token keyword">var</span> jsonObj <span class="token operator">=</span> <span class="token punctuation">{</span>        <span class="token string">"key1"</span><span class="token punctuation">:</span><span class="token number">666</span><span class="token punctuation">,</span>        <span class="token string">"key2"</span><span class="token punctuation">:</span><span class="token string">"qwer"</span><span class="token punctuation">,</span>        <span class="token string">"key3"</span><span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>        <span class="token string">"key4"</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">111</span><span class="token punctuation">,</span><span class="token string">"abc"</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token string">"key5"</span><span class="token punctuation">:</span><span class="token punctuation">{</span>            <span class="token string">"key5_1"</span><span class="token punctuation">:</span><span class="token number">222</span><span class="token punctuation">,</span>            <span class="token string">"key5_2"</span><span class="token punctuation">:</span><span class="token string">"aaaa"</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token string">"key6"</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">"key6_1_1"</span><span class="token punctuation">:</span><span class="token number">333</span><span class="token punctuation">,</span><span class="token string">"key6_1_2"</span><span class="token punctuation">:</span><span class="token number">444</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">"key6_2_1"</span><span class="token punctuation">:</span><span class="token number">555</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token function">alert</span><span class="token punctuation">(</span>jsonObj<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//object  jsonå°±æ˜¯ä¸€ä¸ªå¯¹è±¡</span><span class="token function">alert</span><span class="token punctuation">(</span>jsonObj<span class="token punctuation">.</span>key1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 666</span><span class="token function">alert</span><span class="token punctuation">(</span>jsonObj<span class="token punctuation">.</span>key4<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// abc</span><span class="token comment" spellcheck="true">// jsonå¯¹è±¡è½¬å­—ç¬¦ä¸²</span><span class="token keyword">var</span> jsonString <span class="token operator">=</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>jsonObj<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">alert</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">)</span><span class="token punctuation">;</span>ç¬¦ä¸²<span class="token comment" spellcheck="true">// jsonå­—ç¬¦ä¸²è½¬jsonå¯¹è±¡</span><span class="token keyword">var</span> jsonObj2 <span class="token operator">=</span> JSON<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">alert</span><span class="token punctuation">(</span>jsonObj2<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p> <strong>jsonçš„å­˜åœ¨æœ‰ä¸¤ç§å½¢å¼ï¼š</strong><br>1ã€å¯¹è±¡çš„å½¢å¼ï¼šæ“ä½œjsonä¸­çš„æ•°æ®æ—¶ï¼Œä½¿ç”¨jsonå¯¹è±¡ï¼›<br>2ã€å­—ç¬¦ä¸²çš„å½¢å¼ï¼šå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä¹‹é—´è¿›è¡Œæ•°æ®äº¤æ¢æ—¶ï¼Œä½¿ç”¨jsonå­—ç¬¦ä¸²ã€‚<br>JSON.stringify()ï¼šæŠŠjsonå¯¹è±¡è½¬æ¢ä¸ºjsonå­—ç¬¦ä¸²<br>JSON.parse()ï¼šæŠŠjsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºjsonå¯¹è±¡</p><h2 id="jsonåœ¨javaä¸­çš„ä½¿ç”¨"><a href="#jsonåœ¨javaä¸­çš„ä½¿ç”¨" class="headerlink" title="jsonåœ¨javaä¸­çš„ä½¿ç”¨"></a>jsonåœ¨javaä¸­çš„ä½¿ç”¨</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JsonTest</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// javaBeanå’Œjsonçš„ç›¸äº’è½¬æ¢</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        Person p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">10001</span><span class="token punctuation">,</span><span class="token string">"Tom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Gson gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// javaBeanè½¬jsonå­—ç¬¦ä¸²</span>        String p1JsonString <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p1JsonString<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// jsonå­—ç¬¦ä¸²è½¬javaBean</span>        Person p2 <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>p1JsonString<span class="token punctuation">,</span> Person<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token comment" spellcheck="true">// List å’Œjsonçš„ç›¸äº’è½¬æ¢</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        List<span class="token operator">&lt;</span>Person<span class="token operator">></span> personList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span>Person<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        personList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">10001</span><span class="token punctuation">,</span><span class="token string">"Tom"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        personList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">10002</span><span class="token punctuation">,</span><span class="token string">"Tony"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        personList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">10003</span><span class="token punctuation">,</span><span class="token string">"Nick"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Gson gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// Listè½¬jsonå­—ç¬¦ä¸²æ•°ç»„</span>        String jsonStringArr <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>personList<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jsonStringArr<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// jsonå­—ç¬¦ä¸²æ•°ç»„è½¬List</span>        <span class="token comment" spellcheck="true">// List&lt;Person> personList1 = gson.fromJson(jsonStringArr, new PersonListType().getType());</span>        List<span class="token operator">&lt;</span>Person<span class="token operator">></span> personList1 <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>jsonStringArr<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">TypeToken</span><span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Person<span class="token operator">>></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>personList1<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>personList1<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token comment" spellcheck="true">// Map å’Œjsonçš„ç›¸äº’è½¬æ¢</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        Map<span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span>Person<span class="token operator">></span> personMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span> Person<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        personMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">10001</span><span class="token punctuation">,</span><span class="token string">"Tom1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        personMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">10002</span><span class="token punctuation">,</span><span class="token string">"Tom2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        personMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">10003</span><span class="token punctuation">,</span><span class="token string">"Tom3"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Gson gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// Mapè½¬jsonå­—ç¬¦ä¸²é›†åˆ</span>        String jsonStringMap <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>personMap<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jsonStringMap<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// jsonå­—ç¬¦ä¸²é›†åˆè½¬Map</span>        <span class="token comment" spellcheck="true">// Map&lt;Integer,Person> personMap1 = gson.fromJson(jsonStringMap, new PersonMapList().getType());</span>        Map<span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span>Person<span class="token operator">></span> personMap1 <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>jsonStringMap<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">TypeToken</span><span class="token operator">&lt;</span>Map<span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span>Person<span class="token operator">>></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>personMap1<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>personMap1<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="ajaxè¯·æ±‚"><a href="#ajaxè¯·æ±‚" class="headerlink" title="ajaxè¯·æ±‚"></a>ajaxè¯·æ±‚</h2><p>AJAXæ˜¯ä¸€ç§åˆ›å»ºäº¤äº’å¼ç½‘é¡µåº”ç”¨çš„å¼€å‘æŠ€æœ¯ã€‚<br>æµè§ˆå™¨é€šè¿‡javaScriptå¼‚æ­¥å‘èµ·è¯·æ±‚ï¼Œå±€éƒ¨æ›´æ–°é¡µé¢çš„æŠ€æœ¯ã€‚<br>æµè§ˆå™¨åœ°å€æ ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼›å±€éƒ¨æ›´æ–°ä¸ä¼šèˆå¼ƒåŸæ¥é¡µé¢çš„å†…å®¹ã€‚</p><h2 id="åŸç”ŸAJAXè¯·æ±‚"><a href="#åŸç”ŸAJAXè¯·æ±‚" class="headerlink" title="åŸç”ŸAJAXè¯·æ±‚"></a>åŸç”ŸAJAXè¯·æ±‚</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">javaScriptAjax</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"javaScriptAjaxè°ƒç”¨äº†~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Person person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"Tony"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å°†éœ€è¦è¿”å›ç»™å®¢æˆ·ç«¯çš„å¯¹è±¡è½¬æ¢ä¸ºjsonå­—ç¬¦ä¸²</span>    Gson gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    String personJsonString <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>    resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>personJsonString<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pragma<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>no-cache<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cache-control<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>no-cache<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Expires<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Content-Type<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/html; charset<span class="token punctuation">=</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Insert title here<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript">        <span class="token comment" spellcheck="true">// ä½¿ç”¨jså‘èµ·Ajaxè¯·æ±‚ï¼Œè®¿é—®æœåŠ¡å™¨AjaxServletä¸­çš„javascriptAjax()</span>        <span class="token keyword">function</span> <span class="token function">ajaxRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">//                 1ã€æˆ‘ä»¬é¦–å…ˆè¦åˆ›å»ºXMLHttpRequest </span>            <span class="token keyword">var</span> xmlHttpRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//                 2ã€è°ƒç”¨openæ–¹æ³•è®¾ç½®è¯·æ±‚å‚æ•° open(è¯·æ±‚æ–¹æ³•,è¯·æ±‚åœ°å€,å¼‚æ­¥(true))</span>            xmlHttpRequest<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span> <span class="token string">"http://localhost:8080/11_json/ajaxServlet?action=javaScriptAjax"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//                 3ã€åœ¨sendæ–¹æ³•å‰ç»‘å®šonreadystatechangeäº‹ä»¶ï¼Œå¤„ç†è¯·æ±‚å®Œæˆåçš„æ“ä½œã€‚</span>            xmlHttpRequest<span class="token punctuation">.</span>onreadystatechange <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>xmlHttpRequest<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xmlHttpRequest<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token comment" spellcheck="true">// å°†jsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºjsonå¯¹è±¡</span>                    <span class="token keyword">var</span> jsonObj <span class="token operator">=</span> JSON<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xmlHttpRequest<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment" spellcheck="true">// å°†å“åº”æ•°æ®æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š</span>                    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"div01"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">"ç¼–å·ï¼š"</span> <span class="token operator">+</span> jsonObj<span class="token punctuation">.</span>id <span class="token operator">+</span> <span class="token string">"&lt;br/>å§“åï¼š"</span> <span class="token operator">+</span> jsonObj<span class="token punctuation">.</span>name<span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">// 4ã€è°ƒç”¨sendæ–¹æ³•å‘é€è¯·æ±‚</span>            xmlHttpRequest<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ajaxRequest()<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ajax request<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>div01<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="jqueryä¸­çš„ajaxè¯·æ±‚"><a href="#jqueryä¸­çš„ajaxè¯·æ±‚" class="headerlink" title="jqueryä¸­çš„ajaxè¯·æ±‚"></a>jqueryä¸­çš„ajaxè¯·æ±‚</h2><p><strong>$.ajax æ–¹æ³•</strong><br>urlï¼šè¡¨ç¤ºè¯·æ±‚çš„åœ°å€<br>typeï¼šè¡¨ç¤ºè¯·æ±‚çš„ç±»å‹GET æˆ–POST è¯·æ±‚<br>dataï¼šè¡¨ç¤ºå‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®<br>dataçš„æ ¼å¼æœ‰ä¸¤ç§ï¼š<br>ä¸€ï¼šname=value&amp;name=value<br>äºŒï¼š{key:value}<br>successï¼šè¯·æ±‚æˆåŠŸï¼Œå“åº”çš„å›è°ƒå‡½æ•°<br>dataTypeï¼šå“åº”çš„æ•°æ®ç±»å‹<br>å¸¸ç”¨çš„å“åº”æ•°æ®ç±»å‹æœ‰ï¼štextã€xmlã€json</p><pre class=" language-javaScript"><code class="language-javaScript">// ajaxè¯·æ±‚$("#ajaxBtn").click(function () {    $.ajax({        url: "http://localhost:8080/11_json/ajaxServlet",        data: "action=jqueryAjax",        type: "GET",        success: function (data) {            alert("æœåŠ¡å™¨è¿”å›çš„æ•°æ®ï¼š" + data);            $("#msg").html("ç¼–å·ï¼š" + data.id + " å§“åï¼š" + data.name);        },        dataType: "json"    });});</code></pre><p><strong>$.get æ–¹æ³•å’Œ$.post æ–¹æ³•</strong><br>urlï¼š è¯·æ±‚çš„url åœ°å€<br>dataï¼š å‘é€çš„æ•°æ®<br>callbackï¼š æˆåŠŸçš„å›è°ƒå‡½æ•°<br>type ï¼šè¿”å›çš„æ•°æ®ç±»å‹</p><pre class=" language-javaScript"><code class="language-javaScript">// ajax--getè¯·æ±‚$("#getBtn").click(function () {    $.get(        "http://localhost:8080/11_json/ajaxServlet",        "action=jqueryAjax",        function (data) {            alert("æœåŠ¡å™¨è¿”å›çš„æ•°æ®ï¼š" + data);            $("#msg").html("ç¼–å·ï¼š" + data.id + " å§“åï¼š" + data.name);        },        "json"    );});// ajax--postè¯·æ±‚$("#postBtn").click(function () {    // postè¯·æ±‚    $.post(        "http://localhost:8080/11_json/ajaxServlet",        "action=jqueryAjax",        function (data) {            alert("æœåŠ¡å™¨è¿”å›çš„æ•°æ®ï¼š" + data);            $("#msg").html("ç¼–å·ï¼š" + data.id + " å§“åï¼š" + data.name);        },        "json"    );});</code></pre><p><strong>$.getJSON æ–¹æ³•</strong><br>urlï¼š è¯·æ±‚çš„url åœ°å€<br>dataï¼š å‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®<br>callbackï¼š æˆåŠŸçš„å›è°ƒå‡½æ•°</p><pre class=" language-javaScript"><code class="language-javaScript">// ajax--getJsonè¯·æ±‚$("#getJSONBtn").click(function () {    $.getJSON(        "http://localhost:8080/11_json/ajaxServlet",        "action=jqueryAjax",        function (data) {            alert("æœåŠ¡å™¨è¿”å›çš„æ•°æ®ï¼š" + data);            $("#msg").html("ç¼–å·ï¼š" + data.id + " å§“åï¼š" + data.name);       });});</code></pre><p><strong>è¡¨å•åºåˆ—åŒ–serialize()</strong><br>serialize()å¯ä»¥æŠŠè¡¨å•ä¸­æ‰€æœ‰çš„è¡¨å•é¡¹éƒ½è·å–åˆ°ï¼Œå¹¶ä»¥name1=value1&amp;name2=value2 çš„å½¢å¼æ‹¼æ¥ã€‚</p><pre class=" language-javaScript"><code class="language-javaScript">$("#submit").click(function () {     // æŠŠå‚æ•°åºåˆ—åŒ–     var params = $("#form01").serialize();     $.getJSON("http://localhost:8080/11_json/ajaxServlet",         "action=serializeAjax&"+params,          function (data) {          alert("æœåŠ¡å™¨è¿”å›çš„æ•°æ®ï¼š" + data);          $("#msg").html("ç¼–å·ï¼š" + data.id + " å§“åï¼š" + data.name);     });});</code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaWeb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Filter,ThreadLocal</title>
      <link href="2020/05/13/javaweb-07/"/>
      <url>2020/05/13/javaweb-07/</url>
      
        <content type="html"><![CDATA[<h2 id="Filterè¿‡æ»¤å™¨çš„ä½œç”¨"><a href="#Filterè¿‡æ»¤å™¨çš„ä½œç”¨" class="headerlink" title="Filterè¿‡æ»¤å™¨çš„ä½œç”¨"></a>Filterè¿‡æ»¤å™¨çš„ä½œç”¨</h2><p>ä½œç”¨ï¼šæ‹¦æˆªè¯·æ±‚ï¼Œè¿‡æ»¤å“åº”<br>æ‹¦æˆªè¯·æ±‚å¸¸è§çš„åº”ç”¨åœºæ™¯ï¼š1ã€æƒé™æ£€æŸ¥ ï¼›2ã€æ—¥å¿—æ“ä½œï¼›3ã€äº‹åŠ¡ç®¡ç† â€¦â€¦<br><img src="/2020/05/13/javaweb-07/1.png" alt></p><h3 id="Filterè¿‡æ»¤å™¨çš„ä½¿ç”¨"><a href="#Filterè¿‡æ»¤å™¨çš„ä½¿ç”¨" class="headerlink" title="Filterè¿‡æ»¤å™¨çš„ä½¿ç”¨"></a>Filterè¿‡æ»¤å™¨çš„ä½¿ç”¨</h3><p>1.ç¼–å†™ä¸€ä¸ªç±»å»å®ç°Filteræ¥å£<br>2.å®ç°è¿‡æ»¤  æ–¹æ³•doFilter()<br>3.åˆ°web.xmlä¸­é…ç½®Filterçš„æ‹¦æˆªè·¯å¾„</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span>ServletRequest request<span class="token punctuation">,</span> ServletResponse response<span class="token punctuation">,</span> FilterChain chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException<span class="token punctuation">,</span> ServletException <span class="token punctuation">{</span>    HttpServletRequest req <span class="token operator">=</span> <span class="token punctuation">(</span>HttpServletRequest<span class="token punctuation">)</span> request<span class="token punctuation">;</span>    HttpSession session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Object user <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>user<span class="token operator">==</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>        request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/login.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// è®©ç¨‹åºç»§ç»­å‘ä¸‹è®¿é—®ç”¨æˆ·çš„ç›®æ ‡èµ„æº</span>        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-xml"><code class="language-xml"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>AdminFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">></span></span>filter.AdminFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--  é…ç½®æ‹¦æˆªè·¯å¾„  --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>AdminFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/admin/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">></span></span></code></pre><h3 id="Filterçš„ç”Ÿå‘½å‘¨æœŸ"><a href="#Filterçš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Filterçš„ç”Ÿå‘½å‘¨æœŸ"></a>Filterçš„ç”Ÿå‘½å‘¨æœŸ</h3><p>Filterç”Ÿå‘½å‘¨æœŸåŒ…å«çš„æ–¹æ³•ï¼š<br>Webå·¥ç¨‹å¯åŠ¨æ—¶å°±åˆ›å»ºäº†ï¼š1ã€æ„é€ å™¨æ–¹æ³•ï¼›2ã€init åˆå§‹åŒ–æ–¹æ³•<br>æ¯æ¬¡æ‹¦æˆªåˆ°è¯·æ±‚å°±å¼€å§‹æ‰§è¡Œï¼š3ã€doFilter è¿‡æ»¤æ–¹æ³•<br>Webå·¥ç¨‹åœæ­¢æ—¶ï¼š4ã€destory  é”€æ¯æ–¹æ³•</p><h3 id="FilterConfigç±»"><a href="#FilterConfigç±»" class="headerlink" title="FilterConfigç±»"></a>FilterConfigç±»</h3><p>åŒ…å«äº†Filterè¿‡æ»¤å™¨çš„é…ç½®ä¿¡æ¯<br>FilterConfigç±»çš„ä½œç”¨æ˜¯è·å–filterè¿‡æ»¤å™¨çš„é…ç½®ä¿¡æ¯ï¼š<br>1ã€è·å–Filterçš„åç§°filter-nameçš„å†…å®¹<br>2ã€è·å–Filterä¸­é…ç½®çš„init-paramçš„åˆå§‹åŒ–å‚æ•°<br>3ã€è·å–ServletContextå¯¹è±¡</p><h3 id="FilterChainè¿‡æ»¤å™¨é“¾"><a href="#FilterChainè¿‡æ»¤å™¨é“¾" class="headerlink" title="FilterChainè¿‡æ»¤å™¨é“¾"></a>FilterChainè¿‡æ»¤å™¨é“¾</h3><p><img src="/2020/05/13/javaweb-07/2.png" alt></p><h3 id="Filterçš„æ‹¦æˆªè·¯å¾„"><a href="#Filterçš„æ‹¦æˆªè·¯å¾„" class="headerlink" title="Filterçš„æ‹¦æˆªè·¯å¾„"></a>Filterçš„æ‹¦æˆªè·¯å¾„</h3><p>1ã€ç²¾ç¡®åŒ¹é…ï¼Œæ‹¦æˆªçš„æ˜¯æŒ‡å®šè·¯å¾„çš„ä¸€ä¸ªèµ„æºï¼Œè¯·æ±‚åœ°å€å¿…é¡»æ˜¯ : <code>http://ip:port/å·¥ç¨‹è·¯å¾„/a.jsp</code></p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>AdminFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/admin/a.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">></span></span></code></pre><p>2ã€ç›®å½•åŒ¹é…ï¼Œæ‹¦æˆªçš„æ˜¯ç›®å½•ä¸‹çš„æ‰€æœ‰èµ„æº</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>AdminFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/admin/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">></span></span></code></pre><p>3ã€åç¼€ååŒ¹é…ï¼Œæ‹¦æˆªçš„æ˜¯æŒ‡å®šåç¼€åçš„èµ„æº</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>AdminFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>*.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">></span></span></code></pre><p>Filteråªå…³å¿ƒè¯·æ±‚åœ°å€æ˜¯å¦åŒ¹é…ï¼Œä¸å…³å¿ƒèµ„æºæ˜¯å¦å­˜åœ¨ã€‚</p><h2 id="ThreadLocalçš„ä½¿ç”¨"><a href="#ThreadLocalçš„ä½¿ç”¨" class="headerlink" title="ThreadLocalçš„ä½¿ç”¨"></a>ThreadLocalçš„ä½¿ç”¨</h2><p>ä½œç”¨ï¼šè§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚<br>ThreadLocalå¯ä»¥ç»™å½“å‰çº¿ç¨‹å…³è”ä¸€ä¸ªæ•°æ®(æ™®é€šå˜é‡ï¼Œå¯¹è±¡ï¼Œæ•°ç»„ï¼Œé›†åˆ)ã€‚<br>ThreadLocald ç‰¹ç‚¹ï¼š<br>1ã€ThreadLocalå¯ä»¥ä¸ºå½“å‰çº¿ç¨‹å…³è”ä¸€ä¸ªæ•°æ®ï¼›(å¯ä»¥åƒMapä¸€æ ·å­˜å–æ•°æ®ï¼Œkeyä¸ºå½“å‰çº¿ç¨‹)ï¼›<br>2ã€æ¯ä¸€ä¸ªThreadLoaclå¯¹è±¡ï¼Œåªèƒ½ä¸ºå½“å‰çº¿ç¨‹å…³è”ä¸€ä¸ªæ•°æ®ï¼›<br>3ã€æ¯ä¸ªThreadLocalå¯¹è±¡å®ä¾‹åŒ–æ—¶ï¼Œä¸€èˆ¬éƒ½æ˜¯staticç±»å‹ï¼›<br>4ã€ThreadLocalä¸­ä¿å­˜çš„æ•°æ®ï¼Œåœ¨çº¿ç¨‹é”€æ¯åï¼ŒJVMè‡ªåŠ¨é‡Šæ”¾ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> JavaWeb </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaWeb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸è§æ’åºç®—æ³•</title>
      <link href="2020/05/09/arithmetic/"/>
      <url>2020/05/09/arithmetic/</url>
      
        <content type="html"><![CDATA[<p>å¸¸è§æ’åºç®—æ³•çš„ç‰¹ç‚¹ï¼š<br><img src="/2020/05/09/arithmetic/1.png" style="zoom:80%;"></p><h2 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BubbleSort</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/**         *  ç®—æ³•æ€è·¯ï¼š         *  å‡è®¾ä»å°åˆ°å¤§æ’åˆ—ï¼š         *  å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªæ•°è¿›è¡Œä¸¤ä¸¤æ¯”è¾ƒï¼Œå°†å¦‚æœå‰ä¸€ä¸ªæ•°å¤§äºåä¸€ä¸ªæ•°ï¼Œåˆ™äº¤æ¢ä½ç½®ï¼Œ         *  è¿™æ ·ä¸€è¶Ÿæ¯”è¾ƒä¸‹æ¥ï¼Œæœ€å¤§çš„é‚£ä¸ªæ•°å°±æ’åˆ°äº†æœ€å         *  ä¹Ÿå°±æ˜¯è¯´ï¼Œiä¸ªæ•°æ®è¿›è¡Œ i-1 è¶Ÿæ¯”è¾ƒå°±å®Œæˆäº†æ’åº         */</span>        <span class="token comment" spellcheck="true">// ç¬¬1è¶Ÿ  5æ¬¡æ¯”è¾ƒ</span>       <span class="token comment" spellcheck="true">/* for (int i = 0; i &lt; 5; i++) {            if (arr[i] > arr[i + 1]) {                int temp = arr[i];                arr[i] = arr[i + 1];                arr[i + 1] = temp;            }        }        System.out.println(Arrays.toString(arr));// æœ€å¤§çš„æ•°æ’åˆ°äº†æœ€å[5, 4, 3, 2, 1, 6]*/</span>        <span class="token comment" spellcheck="true">// ç¬¬2è¶Ÿ  4æ¬¡æ¯”è¾ƒ</span>        <span class="token comment" spellcheck="true">// ç¬¬3è¶Ÿ  3æ¬¡æ¯”è¾ƒ</span>        <span class="token comment" spellcheck="true">// ......</span>        <span class="token comment" spellcheck="true">// ç¬¬n-1è¶Ÿ  6-(i-1)=5-næ¬¡æ¯”è¾ƒ  =>arr.length-1-iæ¬¡</span>        <span class="token comment" spellcheck="true">// å°†ä¸¤å±‚å¾ªç¯åµŒå¥—</span>        <span class="token comment" spellcheck="true">/**         * æ”¹è¿›ï¼š         * å‡å¦‚ä¸€è¶Ÿæ¯”è¾ƒä¸‹æ¥ï¼Œæ²¡æœ‰å‘ç”Ÿè¿‡ä¸€æ¬¡äº¤æ¢ï¼Œé‚£ä¹ˆå¯ä»¥è®¤ä¸ºæ•°ç»„å·²ç»æ’å¥½åºåˆ—äº†         * å¯ä»¥è®¾ç½®ä¸€ä¸ªæ ‡å¿—ä½ï¼Œå‘ç”Ÿäº†æ¯”è¾ƒå°±ä¿®æ”¹æ ‡å¿—ä½ï¼Œå¦‚æœåœ¨æŸè¶Ÿæ¯”è¾ƒä¸­æ²¡æœ‰å‘ç”Ÿäº¤æ¢ï¼Œåˆ™ç›´æ¥ç»“æŸå¾ªç¯         */</span>        <span class="token keyword">boolean</span> flag<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                    <span class="token keyword">int</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                    arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                    arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç¬¬"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"è¶Ÿæ¯”è¾ƒï¼š"</span> <span class="token operator">+</span> Arrays<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœ€ç»ˆç»“æœï¼š"</span> <span class="token operator">+</span> Arrays<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>ç›¸åŒçš„æ•°æ®åœ¨æ’åºå‰åï¼Œå¦‚æœé¡ºåºä¸å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆå°±æ˜¯ç¨³å®šçš„ã€‚</p><p>ç”±æ­¤å¯è§ï¼Œå†’æ³¡æ’åºæ˜¯ç¨³å®šçš„ã€‚</p><h2 id="é€‰æ‹©æ’åº"><a href="#é€‰æ‹©æ’åº" class="headerlink" title="é€‰æ‹©æ’åº"></a>é€‰æ‹©æ’åº</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SelectSort</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/**         *ç®—æ³•æ€è·¯ï¼š         * å‡è®¾ä»å¤§åˆ°å°æ’åˆ—ï¼š         * ç¬¬1è½®ä»æ•°ç»„çš„ç¬¬1ä¸ªæ•°åˆ°æœ€åä¸­é€‰æ‹©å‡ºä¸€ä¸ªæœ€å¤§çš„å€¼ï¼Œä¸ç¬¬1ä¸ªæ•°è¿›è¡Œäº¤æ¢ï¼Œ         * ç¬¬2è½®ä»æ•°ç»„çš„ç¬¬2ä¸ªæ•°åˆ°æœ€åä¸€ä¸ªæ•°é€‰æ‹©ä¸€ä¸ªæœ€å¤§çš„å€¼ï¼Œä¸ç¬¬2ä¸ªæ•°äº¤æ¢         * ...         * ç¬¬i-1è½®ä»æ•°ç»„çš„ç¬¬i-1ä¸ªæ•°åˆ°æœ€åä¸€ä¸ªæ•°é€‰æ‹©ä¸€ä¸ªæœ€å¤§çš„å€¼ï¼Œä¸ç¬¬i-1ä¸ªæ•°äº¤æ¢         */</span><span class="token comment" spellcheck="true">/*        // ç¬¬1è½®  ä»ç¬¬1ä¸ªæ•°å¼€å§‹åˆ°ç»“æŸ        int max = 0;        for (int i = 0; i &lt; 6; i++) {            if(max&lt;arr[i]){                max = arr[i];            }        }        // å°†æœ€å¤§çš„æ•°ä¸ç¬¬1ä¸ªæ•°äº¤æ¢        int temp = arr[5];        arr[5] = arr[0];        arr[0] = temp;        System.out.println("ç¬¬ä¸€è½®ï¼š"+ Arrays.toString(arr));        //ç¬¬2è½®  ä»ç¬¬2ä¸ªå¼€å§‹åˆ°ç»“æŸ        max = 0;        for (int i = 1; i &lt;6 ; i++) {            if(max&lt;arr[i]){                max = arr[i];            }        }        // å°†æœ€å¤§çš„æ•°ä¸ç¬¬2ä¸ªæ•°äº¤æ¢        temp = arr[4];        arr[4] = arr[1];        arr[1] = temp;        System.out.println("ç¬¬äºŒè½®ï¼š"+ Arrays.toString(arr));*/</span>        <span class="token comment" spellcheck="true">// å¾ªç¯åµŒå¥—</span>        <span class="token keyword">int</span> max <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æœ€å¤§æ•°</span>        <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æœ€å¤§æ•°çš„ä¸‹æ ‡</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            max <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å‡è®¾æœ€å¤§æ•°å°±æ˜¯ç¬¬ä¸€ä¸ªæ•°</span>            index <span class="token operator">=</span> i<span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length <span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">// ç¬¬iè½®ä»ç¬¬iä¸ªæ•°åˆ°ç»“æŸè¿›è¡Œæ¯”è¾ƒï¼ˆç”±äºå‡å®šæœ€å¤§æ•°å°±æ˜¯ç¬¬ä¸€ä¸ªæ•°ï¼Œæ‰€ä»¥ä»i+1ä¸ªæ•°å¼€å§‹ï¼‰</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>max<span class="token operator">&lt;</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    max <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                    index <span class="token operator">=</span> j<span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">/**             * æ”¹è¿›ï¼š             * å¦‚æœæœ€å¤§æ•°çš„ä¸‹æ ‡å°±æ˜¯å‡è®¾çš„ç¬¬ä¸€ä¸ªæ•°çš„ä¸‹æ ‡ï¼Œåˆ™ä¸ç”¨è¿›è¡Œäº¤æ¢äº†,ç›´æ¥é€€å‡ºå¾ªç¯             */</span>            <span class="token comment" spellcheck="true">// ç¬¬iè½®æœ€å¤§æ•°ä¸ç¬¬iä¸ªæ•°äº¤æ¢</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>index<span class="token operator">!=</span>i<span class="token punctuation">)</span><span class="token punctuation">{</span>                arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> max<span class="token punctuation">;</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç¬¬"</span><span class="token operator">+</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"è½®ï¼š"</span><span class="token operator">+</span>Arrays<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç»“æœï¼š"</span><span class="token operator">+</span> Arrays<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InsertSort</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/**         *å°†ä¸€ä¸ªæ•°æ’å…¥åˆ°æœ‰åºåºåˆ—ä¸­ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„æœ‰åºç³»åˆ—         * åœ¨æ•°ç»„ä¸­å°†ç¬¬ä¸€ä¸ªæ•°å½“ä½œæ˜¯ä¸€ä¸ªæœ‰åºåºåˆ—ï¼Œ         * å°†å…¶ä½™çš„æ‰€æœ‰æ•°ä¾æ¬¡æ’å…¥æœ‰åºåºåˆ—ä¸­ï¼Œæˆä¸ºä¸€ä¸ªæ–°çš„æœ‰åºåºåˆ—         */</span>     <span class="token comment" spellcheck="true">/*   // ç¬¬ä¸€è¶Ÿ {6}  &lt;- 5     =====  {5,6}        if (arr[0] &lt; arr[1]) {        } else {            int temp = arr[0];            arr[0] = arr[1];            arr[1] = temp;        }        System.out.println("ç¬¬ä¸€è¶Ÿ" + Arrays.toString(arr));// [5, 6, 4, 3, 2, 1]        // ç¬¬äºŒè¶Ÿ {5ï¼Œ6}  &lt;- 4   =====  {4,5,6}        if (arr[1] &lt; arr[2]) {        } else {    // å°†æ‰€æœ‰æ¯”arr[2]å¤§çš„å…ƒç´ åç§»ä¸€ä½             int temp = arr[2];            arr[2] = arr[1];//  {5,6,6}            if (temp > arr[0]) {                arr[1] = temp;            } else {                int swaptemp = arr[0];                arr[1] = swaptemp;      // {5,5,6}                arr[0] = temp;        // {4,5,6}            }        }        System.out.println("ç¬¬äºŒè¶Ÿ" + Arrays.toString(arr));// [4, 5, 6, 3, 2, 1]*/</span>        <span class="token comment" spellcheck="true">// å¾ªç¯åµŒå¥—</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">int</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è®°å½•å½“å‰å…ƒç´ </span>            <span class="token keyword">int</span> j <span class="token operator">=</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å½“å‰å…ƒç´ çš„å‰ä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>j <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> temp <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æ¯”tempå¤§çš„æ‰€æœ‰å…ƒç´ åç§»ä¸€ä½</span>                j<span class="token operator">--</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å°†å½“å‰æ•°æ®æ’å…¥åˆé€‚çš„ä½ç½®ä¸­</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Arrays<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Arrays<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QuickSort</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token function">quickSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Arrays<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Arrays<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * é€šè¿‡ä¸€è¶Ÿæ’åºå°†è¦æ’åºçš„æ•°æ®åˆ†å‰²æˆç‹¬ç«‹çš„ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æ•°æ®éƒ½æ¯”å¦å¤–ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æ•°æ®éƒ½è¦å°     * @param arr     * @param l æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡     * @param r æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">quickSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> l<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å·¦ä¸‹æ ‡</span>        <span class="token keyword">int</span> j <span class="token operator">=</span> r<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å³ä¸‹æ ‡</span>        <span class="token keyword">int</span> pivot <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token punctuation">(</span>l<span class="token operator">+</span>r<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä¸­é—´çš„å…ƒç´ ä½œä¸ºåŸºå‡†</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">&lt;=</span>j<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// åœ¨æ”¯ç‚¹å·¦è¾¹å¯»æ‰¾æ¯”åŸºå‡†å¤§çš„æ•°</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&lt;</span>pivot<span class="token punctuation">)</span><span class="token punctuation">{</span>                i<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">// åœ¨æ”¯ç‚¹å³è¾¹å¯»æ‰¾æ¯”åŸºå‡†å°çš„æ•°</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">></span>pivot<span class="token punctuation">)</span><span class="token punctuation">{</span>                j<span class="token operator">--</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">// æ­¤æ—¶å·²ç»åˆ†åˆ«æ‰¾åˆ°äº†æ¯”åŸºå‡†å°çš„æ•°(å³è¾¹)ã€æ¯”åŸºå‡†å¤§çš„æ•°(å·¦è¾¹)ï¼Œå°†å®ƒä»¬è¿›è¡Œäº¤æ¢</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">&lt;=</span>j<span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">int</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>                i<span class="token operator">++</span><span class="token punctuation">;</span>                j<span class="token operator">--</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// ä¸Šé¢ä¸€ä¸ªwhileä¿è¯äº†åŸºå‡†çš„å·¦è¾¹æ¯”æ”¯ç‚¹å°ï¼ŒåŸºå‡†çš„å³è¾¹æ¯”æ”¯ç‚¹å¤§</span>        <span class="token comment" spellcheck="true">// å·¦è¾¹å†åšæ’åºï¼Œç›´åˆ°å·¦è¾¹å‰©ä¸‹ä¸€ä¸ªæ•°(é€’å½’å‡ºå£)</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>l <span class="token operator">&lt;</span> j<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token function">quickSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> l<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// å³è¾¹å†åšæ’åºï¼Œç›´åˆ°å³è¾¹å‰©ä¸‹ä¸€ä¸ªæ•°(é€’å½’å‡ºå£)</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> r<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token function">quickSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="å¸Œå°”æ’åº"><a href="#å¸Œå°”æ’åº" class="headerlink" title="å¸Œå°”æ’åº"></a>å¸Œå°”æ’åº</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShellSort</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/**         * å°†åºåˆ—è¿›è¡Œåˆ†ç»„ï¼Œè®¾ç½®ä¸€ä¸ªæ­¥é•¿ï¼Œè¿™ä¸ªæ­¥é•¿å°±ç­‰äºåˆ†äº†å¤šå°‘ç»„ï¼Œç„¶åå°†åˆ†çš„è¿™äº›ç»„è¿›è¡Œç®€å•æ’å…¥æ’åº         * è¿™æ ·æ¯ä¸ªç»„ä¹‹é—´å°±æ˜¯æœ‰åºçš„äº†         * è¿›ä¸€æ­¥å¯¹åºåˆ—åˆ†ç»„ï¼Œç›´åˆ°åˆ†æˆä¸€ä¸ªç»„         * åˆ™æ•´ä¸ªåºåˆ—å°±æœ‰åºäº†         */</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> step <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span> step<span class="token operator">></span><span class="token number">0</span> <span class="token punctuation">;</span> step<span class="token operator">/=</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">// åˆ†ç»„</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> step<span class="token punctuation">;</span>i<span class="token operator">&lt;</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// å¯¹åˆ†ç»„è¿›è¡Œç®€å•æ’å…¥æ’åº</span>                <span class="token keyword">int</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è®°å½•å½“å‰å…ƒç´ </span>                <span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token operator">-</span>step<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è®°å½•ä¸æ¯”è¾ƒçš„å…ƒç´ çš„ä¸‹æ ‡</span>                <span class="token keyword">while</span><span class="token punctuation">(</span>j<span class="token operator">>=</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span>temp<span class="token operator">&lt;</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    arr<span class="token punctuation">[</span>j<span class="token operator">+</span>step<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                    j<span class="token operator">-=</span>step<span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token comment" spellcheck="true">// æ‰¾åˆ°æ’å…¥ä½ç½®</span>                arr<span class="token punctuation">[</span>j<span class="token operator">+</span>step<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Arrays<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="äºŒåˆ†æŸ¥æ‰¾"><a href="#äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾"></a>äºŒåˆ†æŸ¥æ‰¾</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BinarySearch</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// äºŒåˆ†æŸ¥æ‰¾åºåˆ—å¿…é¡»æœ‰åº</span>        <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token function">binarySearch</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     *     * @param arr     * @param left å·¦ç´¢å¼•     * @param right å³ç´¢å¼•     * @param val è¦æŸ¥æ‰¾çš„å€¼     * @return æŸ¥æ‰¾æˆåŠŸè¿”å›ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å›-1     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">binarySearch</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span><span class="token keyword">int</span> left<span class="token punctuation">,</span><span class="token keyword">int</span> right<span class="token punctuation">,</span><span class="token keyword">int</span> val<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>left<span class="token operator">></span>right<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>left<span class="token operator">+</span>right<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> midVal <span class="token operator">=</span> arr<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>val<span class="token operator">&lt;</span>midVal<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">// å‘å·¦é€’å½’</span>            <span class="token keyword">return</span> <span class="token function">binarySearch</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span>left<span class="token punctuation">,</span>mid<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>val<span class="token operator">></span>midVal<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">// å‘å³é€’å½’</span>            <span class="token keyword">return</span> <span class="token function">binarySearch</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span>mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>right<span class="token punctuation">,</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> mid<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äºŒå‰æ ‘</title>
      <link href="2020/05/09/dataStructure-06/"/>
      <url>2020/05/09/dataStructure-06/</url>
      
        <content type="html"><![CDATA[<p>æ ‘ç»“æ„æé«˜äº†æ•°æ®çš„å­˜å‚¨ã€è¯»å–é€Ÿåº¦ã€‚</p><h2 id="äºŒå‰æ ‘åŸºæœ¬æ¦‚å¿µ"><a href="#äºŒå‰æ ‘åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="äºŒå‰æ ‘åŸºæœ¬æ¦‚å¿µ"></a>äºŒå‰æ ‘åŸºæœ¬æ¦‚å¿µ</h2><p>æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šåªèƒ½æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œåˆ†åˆ«ä¸ºå·¦èŠ‚ç‚¹ï¼Œå³èŠ‚ç‚¹ã€‚</p><p>æ»¡äºŒå‰æ ‘ï¼šèŠ‚ç‚¹æ•°=2^n-1ï¼Œnä¸ºå±‚æ•°ã€‚</p><p>å®Œå…¨äºŒå‰æ ‘ï¼šå¦‚æœè¯¥äºŒå‰æ ‘çš„æ‰€æœ‰å¶å­èŠ‚ç‚¹éƒ½åœ¨æœ€åä¸€å±‚æˆ–è€…å€’æ•°ç¬¬äºŒå±‚ï¼Œè€Œä¸”<strong>æœ€åä¸€å±‚çš„å¶å­èŠ‚ç‚¹åœ¨å·¦è¾¹è¿ç»­</strong>ï¼Œ<strong>å€’æ•°ç¬¬äºŒå±‚çš„å¶å­èŠ‚ç‚¹åœ¨å³è¾¹è¿ç»­</strong>ã€‚</p><h2 id="äºŒå‰æ ‘çš„éå†"><a href="#äºŒå‰æ ‘çš„éå†" class="headerlink" title="äºŒå‰æ ‘çš„éå†"></a>äºŒå‰æ ‘çš„éå†</h2><p>å‰åºéå†: <strong>å…ˆè¾“å‡ºçˆ¶èŠ‚ç‚¹</strong>ï¼Œå†éå†å·¦å­æ ‘å’Œå³å­æ ‘</p><p>ä¸­åºéå†: å…ˆéå†å·¦å­æ ‘ï¼Œ<strong>å†è¾“å‡ºçˆ¶èŠ‚ç‚¹</strong>ï¼Œå†éå†å³å­æ ‘</p><p>ååºéå†: å…ˆéå†å·¦å­æ ‘ï¼Œå†éå†å³å­æ ‘ï¼Œ<strong>æœ€åè¾“å‡ºçˆ¶èŠ‚ç‚¹</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BinaryTreeDemo</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºäºŒå‰æ ‘</span>        BinaryTree tree <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BinaryTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºèŠ‚ç‚¹</span>        Node root <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Node node1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Node node2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Node node3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åœ¨æ ‘ä¸­æ·»åŠ èŠ‚ç‚¹</span>        tree<span class="token punctuation">.</span><span class="token function">setRoot</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>        root<span class="token punctuation">.</span><span class="token function">setLeft</span><span class="token punctuation">(</span>node1<span class="token punctuation">)</span><span class="token punctuation">;</span>        root<span class="token punctuation">.</span><span class="token function">setRight</span><span class="token punctuation">(</span>node2<span class="token punctuation">)</span><span class="token punctuation">;</span>        node1<span class="token punctuation">.</span><span class="token function">setLeft</span><span class="token punctuation">(</span>node3<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å‰åºéå†ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        tree<span class="token punctuation">.</span><span class="token function">preOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 1243</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¸­åºéå†ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        tree<span class="token punctuation">.</span><span class="token function">midOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 4213</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ååºéå†ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        tree<span class="token punctuation">.</span><span class="token function">lastOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 4231</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// åˆ›å»ºäºŒå‰æ ‘</span><span class="token keyword">class</span> <span class="token class-name">BinaryTree</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> Node root<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// æ ¹èŠ‚ç‚¹</span>    <span class="token keyword">public</span> <span class="token function">BinaryTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Node <span class="token function">getRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> root<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setRoot</span><span class="token punctuation">(</span>Node root<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">=</span> root<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// å‰åºéå†</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">preOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            root<span class="token punctuation">.</span><span class="token function">preOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å½“å‰äºŒå‰æ ‘ä¸ºç©ºï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// ä¸­åºéå†</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">midOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            root<span class="token punctuation">.</span><span class="token function">midOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å½“å‰äºŒå‰æ ‘ä¸ºç©ºï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// ååºéå†</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">lastOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            root<span class="token punctuation">.</span><span class="token function">lastOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å½“å‰äºŒå‰æ ‘ä¸ºç©ºï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// åˆ›å»ºèŠ‚ç‚¹</span><span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> no<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å­˜å‚¨çš„æ•°æ®</span>    <span class="token keyword">private</span> Node left<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å·¦èŠ‚ç‚¹</span>    <span class="token keyword">private</span> Node right<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å³èŠ‚ç‚¹</span>    <span class="token keyword">public</span> <span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">int</span> no<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>no <span class="token operator">=</span> no<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getNo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> no<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNo</span><span class="token punctuation">(</span><span class="token keyword">int</span> no<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>no <span class="token operator">=</span> no<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Node <span class="token function">getLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> left<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLeft</span><span class="token punctuation">(</span>Node left<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Node <span class="token function">getRight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> right<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setRight</span><span class="token punctuation">(</span>Node right<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> right<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"Node{"</span> <span class="token operator">+</span>                <span class="token string">"no="</span> <span class="token operator">+</span> no <span class="token operator">+</span>                <span class="token string">'}'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// å‰åºéå†</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">preOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// æ‰“å°æ ¹èŠ‚ç‚¹(å½“å‰èŠ‚ç‚¹)</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// é€’å½’éå†å·¦å­æ ‘</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>left<span class="token punctuation">.</span><span class="token function">preOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// é€’å½’éå†å³å­æ ‘</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>right<span class="token punctuation">.</span><span class="token function">preOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// ä¸­åºéå†</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">midOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// é€’å½’éå†å·¦å­æ ‘</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>left<span class="token punctuation">.</span><span class="token function">midOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// æ‰“å°æ ¹èŠ‚ç‚¹(å½“å‰èŠ‚ç‚¹)</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// é€’å½’éå†å³å­æ ‘</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>right<span class="token punctuation">.</span><span class="token function">midOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// åç»­éå†</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">lastOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// é€’å½’éå†å·¦å­æ ‘</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>left<span class="token punctuation">.</span><span class="token function">lastOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// é€’å½’éå†å³å­æ ‘</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>right<span class="token punctuation">.</span><span class="token function">lastOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// æ‰“å°æ ¹èŠ‚ç‚¹</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="äºŒå‰æ ‘æŸ¥æ‰¾æŒ‡å®šèŠ‚ç‚¹"><a href="#äºŒå‰æ ‘æŸ¥æ‰¾æŒ‡å®šèŠ‚ç‚¹" class="headerlink" title="äºŒå‰æ ‘æŸ¥æ‰¾æŒ‡å®šèŠ‚ç‚¹"></a>äºŒå‰æ ‘æŸ¥æ‰¾æŒ‡å®šèŠ‚ç‚¹</h2><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// å‰åºéå†æŸ¥æ‰¾èŠ‚ç‚¹</span><span class="token keyword">public</span> Node <span class="token function">preOrderSearch</span><span class="token punctuation">(</span><span class="token keyword">int</span> no<span class="token punctuation">)</span> <span class="token punctuation">{</span>    Node node <span class="token operator">=</span> null<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// åˆ¤æ–­æ˜¯å¦æ˜¯å½“å‰èŠ‚ç‚¹</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>no <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>no<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// åˆ¤æ–­å½“å‰èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹æ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºåˆ™é€’å½’æŸ¥æ‰¾</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>        node <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>left<span class="token punctuation">.</span><span class="token function">preOrderSearch</span><span class="token punctuation">(</span>no<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// æ‰¾åˆ°åç›´æ¥è¿”å›</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> node<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// åˆ¤æ–­å½“å‰èŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹æ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºåˆ™é€’å½’æŸ¥æ‰¾</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>right<span class="token punctuation">.</span><span class="token function">preOrderSearch</span><span class="token punctuation">(</span>no<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> node<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// å‰åºéå†æŸ¥æ‰¾èŠ‚ç‚¹</span><span class="token keyword">public</span> Node <span class="token function">preOrderSearch</span><span class="token punctuation">(</span><span class="token keyword">int</span> no<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> root<span class="token punctuation">.</span><span class="token function">preOrderSearch</span><span class="token punctuation">(</span>no<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å½“å‰äºŒå‰æ ‘ä¸ºç©ºï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> null<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="åˆ é™¤æŒ‡å®šèŠ‚ç‚¹"><a href="#åˆ é™¤æŒ‡å®šèŠ‚ç‚¹" class="headerlink" title="åˆ é™¤æŒ‡å®šèŠ‚ç‚¹"></a>åˆ é™¤æŒ‡å®šèŠ‚ç‚¹</h2><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// åˆ é™¤æŒ‡å®šèŠ‚ç‚¹</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token keyword">int</span> no<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// åˆ¤æ–­å·¦å­èŠ‚ç‚¹æ˜¯å¦ä¸ºè¯¥èŠ‚ç‚¹</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">!=</span> null <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>left<span class="token punctuation">.</span>no <span class="token operator">==</span> no<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// åˆ¤æ–­å³å­èŠ‚ç‚¹æ˜¯å¦ä¸ºè¯¥èŠ‚ç‚¹</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">!=</span> null <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>right<span class="token punctuation">.</span>no <span class="token operator">==</span> no<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> null<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// å¦‚æœå·¦å­èŠ‚ç‚¹ä¸æ˜¯è¯¥èŠ‚ç‚¹ï¼Œåˆ™å¯¹å·¦å­æ ‘è¿›è¡Œé€’å½’åˆ é™¤</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>left<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>left<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>no<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// å¦‚æœå³å­èŠ‚ç‚¹ä¸æ˜¯è¯¥èŠ‚ç‚¹ï¼Œåˆ™å¯¹å³å­æ ‘è¿›è¡Œé€’å½’åˆ é™¤</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>right<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>right<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>no<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// åˆ é™¤æŒ‡å®šèŠ‚ç‚¹</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token keyword">int</span> no<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">.</span><span class="token function">getNo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> no<span class="token punctuation">)</span> <span class="token punctuation">{</span>            root <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            root<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>no<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å½“å‰äºŒå‰æ ‘ä¸ºç©ºï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€’å½’</title>
      <link href="2020/05/08/dataStructure-05/"/>
      <url>2020/05/08/dataStructure-05/</url>
      
        <content type="html"><![CDATA[<p>é€’å½’å°±æ˜¯æ–¹æ³•è‡ªå·±è°ƒç”¨è‡ªå·±ï¼Œæ¯æ¬¡è°ƒç”¨æ—¶ä¼ å…¥ä¸åŒçš„å˜é‡ã€‚</p><p>é€’å½’è°ƒç”¨è§„åˆ™ï¼š<br>1ã€å½“ç¨‹åºæ‰§è¡Œåˆ°ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œå°±ä¼šå¼€è¾Ÿä¸€ä¸ªç‹¬ç«‹çš„ç©ºé—´(æ ˆ)<br>2ã€æ¯ä¸ªç©ºé—´çš„æ•°æ®(å±€éƒ¨å˜é‡)ï¼Œæ˜¯ç‹¬ç«‹çš„ã€‚<br>3ã€å¦‚æœæ–¹æ³•ä¸­ä½¿ç”¨çš„æ˜¯å¼•ç”¨æ•°æ®ç±»å‹çš„å˜é‡ï¼Œå°±ä¼šå…±äº«è¯¥å˜é‡ã€‚<br>4ã€é€’å½’å¿…é¡»å‘é€€å‡ºé€’å½’çš„æ¡ä»¶é€¼è¿‘<br>5ã€å½“ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œå®Œæ¯•ï¼Œæˆ–è€…é‡åˆ°returnï¼Œå°±ä¼šè¿”å›åˆ°è°ƒç”¨å®ƒçš„é‚£ä¸ªæ–¹æ³•ä¸­ï¼Œç»§ç»­æ‰§è¡Œè¯¥æ–¹æ³•ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RecursionTest</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">test</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// System.out.println(factorial(3));</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// æ‰“å°</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">></span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">test</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"n="</span> <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// é˜¶ä¹˜</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">factorial</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token function">factorial</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>n<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><img src="/2020/05/08/dataStructure-05/1.png" alt></p><p>è¾“å‡ºç»“æœï¼š</p><pre><code>n=2n=3n=4</code></pre><p>åŠ å…¥elseåè¾“å‡ºn=2</p><blockquote><p>æ–æ³¢é‚£å¥‘æ•°åˆ—å®ç°</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">getFeibo</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>num<span class="token operator">&lt;=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"å‚æ•°éæ³•ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>num<span class="token operator">==</span><span class="token number">1</span><span class="token operator">||</span>num<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token function">getFeibo</span><span class="token punctuation">(</span>num<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">getFeibo</span><span class="token punctuation">(</span>num<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ ˆ</title>
      <link href="2020/05/07/dataStructure-04/"/>
      <url>2020/05/07/dataStructure-04/</url>
      
        <content type="html"><![CDATA[<p>æ ˆæ˜¯ä¸€ä¸ª<strong>å…ˆè¿›åå‡º</strong>çš„æœ‰åºåˆ—è¡¨ï¼Œæ˜¯é™åˆ¶è¡¨ä¸­å…ƒç´ çš„æ’å…¥å’Œåˆ é™¤<strong>åªèƒ½åœ¨çº¿æ€§è¡¨çš„åŒä¸€ç«¯</strong>è¿›è¡Œçš„ä¸€ç§ç‰¹æ®Šçº¿æ€§è¡¨ã€‚</p><h2 id="æ ˆçš„å®ç°"><a href="#æ ˆçš„å®ç°" class="headerlink" title="æ ˆçš„å®ç°"></a>æ ˆçš„å®ç°</h2><p>æ•°ç»„æ¨¡æ‹Ÿæ ˆæ€è·¯åˆ†æå›¾ï¼š<br><img src="/2020/05/07/dataStructure-04/1.png" alt></p><p>1ã€å®šä¹‰ä¸€ä¸ªtopè¡¨ç¤ºæ ˆé¡¶ï¼Œåˆå§‹åŒ–top=-1;<br>2ã€å…¥æ ˆï¼Œtop++;stack[top]=data;<br>3ã€å‡ºæ ˆï¼Œint value=stack[top];topâ€“;return value;</p><pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Scanner<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayStackDemo</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        ArrayStack arrayStack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayStack</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String key <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è¾“å…¥å†…å®¹</span>        Boolean loop <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æ§åˆ¶æ˜¯å¦é€€å‡ºèœå•</span>        Scanner scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>loop<span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"éå†æ ˆï¼šshow  å…¥æ ˆï¼špush   å‡ºæ ˆï¼špop  é€€å‡ºï¼šexit"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            key <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">switch</span> <span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">case</span> <span class="token string">"show"</span><span class="token operator">:</span>                    arrayStack<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token string">"push"</span><span class="token operator">:</span>                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥ä¸€ä¸ªæ•°ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">int</span> num <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    arrayStack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token string">"pop"</span><span class="token operator">:</span>                    <span class="token keyword">try</span> <span class="token punctuation">{</span>                        <span class="token keyword">int</span> value <span class="token operator">=</span> arrayStack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å‡ºæ ˆå…ƒç´ ï¼š"</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token keyword">break</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token keyword">case</span> <span class="token string">"exit"</span><span class="token operator">:</span>                    scanner<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    loop <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">default</span><span class="token operator">:</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">ArrayStack</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> maxSize<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æ ˆçš„å¤§å°</span>    <span class="token keyword">private</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> stack<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æ•°ç»„ï¼Œç”¨äºå­˜æ”¾æ ˆä¸­çš„æ•°æ®</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> top <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// æ„é€ å™¨ åˆå§‹åŒ–æ ˆ</span>    <span class="token keyword">public</span> <span class="token function">ArrayStack</span><span class="token punctuation">(</span><span class="token keyword">int</span> maxSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>maxSize <span class="token operator">=</span> maxSize<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>maxSize<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// æ ˆæ»¡</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isFull</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> top <span class="token operator">==</span> maxSize <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// æ ˆç©º</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> top <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// å…¥æ ˆ</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// æ ˆæ»¡ï¼Ÿ</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ ˆæ»¡ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        top<span class="token operator">++</span><span class="token punctuation">;</span>        stack<span class="token punctuation">[</span>top<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// å‡ºæ ˆ</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// æ ˆç©ºï¼Ÿ</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// æŠ›å‡ºå¼‚å¸¸</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"æ ˆç©ºï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">int</span> value <span class="token operator">=</span> stack<span class="token punctuation">[</span>top<span class="token punctuation">]</span><span class="token punctuation">;</span>        top<span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> value<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// éå†æ ˆ</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// ä»æ ˆé¡¶å¼€å§‹</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ ˆç©º"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> top<span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stack<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŒå‘é“¾è¡¨</title>
      <link href="2020/05/05/dataStructure-03/"/>
      <url>2020/05/05/dataStructure-03/</url>
      
        <content type="html"><![CDATA[<h2 id="1-å•å‘é“¾è¡¨ä¸åŒå‘é“¾è¡¨çš„åŒºåˆ«"><a href="#1-å•å‘é“¾è¡¨ä¸åŒå‘é“¾è¡¨çš„åŒºåˆ«" class="headerlink" title="1.å•å‘é“¾è¡¨ä¸åŒå‘é“¾è¡¨çš„åŒºåˆ«"></a>1.å•å‘é“¾è¡¨ä¸åŒå‘é“¾è¡¨çš„åŒºåˆ«</h2><p>1ã€å•å‘é“¾è¡¨æŸ¥æ‰¾æ–¹å‘åªèƒ½æ˜¯ä¸€ä¸ªæ–¹å‘ï¼Œè€ŒåŒå‘é“¾è¡¨å¯ä»¥å‘å‰æˆ–å‘åæŸ¥æ‰¾ã€‚<br>2ã€å•å‘é“¾è¡¨ä¸èƒ½è‡ªæˆ‘åˆ é™¤ï¼Œéœ€è¦é èµ‹è¾…åŠ©èŠ‚ç‚¹ï¼Œè€ŒåŒå‘é“¾è¡¨åˆ™å¯ä»¥è‡ªæˆ‘åˆ é™¤ã€‚<br><img src="/2020/05/05/dataStructure-03/1.png" alt></p><h2 id="2-åŒå‘é“¾è¡¨çš„åˆ›å»ºã€æ’å…¥ã€åˆ é™¤å’Œæ˜¾ç¤º"><a href="#2-åŒå‘é“¾è¡¨çš„åˆ›å»ºã€æ’å…¥ã€åˆ é™¤å’Œæ˜¾ç¤º" class="headerlink" title="2.åŒå‘é“¾è¡¨çš„åˆ›å»ºã€æ’å…¥ã€åˆ é™¤å’Œæ˜¾ç¤º"></a>2.åŒå‘é“¾è¡¨çš„åˆ›å»ºã€æ’å…¥ã€åˆ é™¤å’Œæ˜¾ç¤º</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> linkedlist<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DoubleLinkedListDemo</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºèŠ‚ç‚¹</span>        HeroNode2 hero1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HeroNode2</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">"wd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        HeroNode2 hero2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HeroNode2</span><span class="token punctuation">(</span><span class="token number">1001</span><span class="token punctuation">,</span> <span class="token string">"lz"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        HeroNode2 hero3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HeroNode2</span><span class="token punctuation">(</span><span class="token number">1002</span><span class="token punctuation">,</span> <span class="token string">"lp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºé“¾è¡¨</span>        DoubleLinkedList heroList2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DoubleLinkedList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ·»åŠ èŠ‚ç‚¹åˆ° é“¾è¡¨</span>        heroList2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>hero1<span class="token punctuation">)</span><span class="token punctuation">;</span>        heroList2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>hero2<span class="token punctuation">)</span><span class="token punctuation">;</span>        heroList2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>hero3<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// éå†é“¾è¡¨</span>        heroList2<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span>heroList2<span class="token punctuation">.</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ä¿®æ”¹èŠ‚ç‚¹</span>        heroList2<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HeroNode2</span><span class="token punctuation">(</span><span class="token number">1002</span><span class="token punctuation">,</span> <span class="token string">"gf"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å†æ¬¡éå†</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¿®æ”¹åï¼š "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        heroList2<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span>heroList2<span class="token punctuation">.</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ é™¤id=1001çš„èŠ‚ç‚¹</span>        heroList2<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å†æ¬¡éå†</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åˆ é™¤id=1000çš„èŠ‚ç‚¹åï¼š "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        heroList2<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span>heroList2<span class="token punctuation">.</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//å®šä¹‰HeroNode2 ,æ¯ä¸€ä¸ªHeroNode å¯¹è±¡å°±æ˜¯ä¸€ä¸ªèŠ‚ç‚¹</span><span class="token keyword">class</span> <span class="token class-name">HeroNode2</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>    <span class="token keyword">public</span> String name<span class="token punctuation">;</span>    <span class="token keyword">public</span> HeroNode2 pre<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹</span>    <span class="token keyword">public</span> HeroNode2 next<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span>    <span class="token keyword">public</span> <span class="token function">HeroNode2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">HeroNode2</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">,</span> String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"HeroNode2 [id="</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">", name="</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// åˆ›å»ºä¸€ä¸ªåŒå‘é“¾è¡¨çš„ç±»</span><span class="token keyword">class</span> <span class="token class-name">DoubleLinkedList</span> <span class="token punctuation">{</span>    HeroNode2 head <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HeroNode2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// ä»é“¾è¡¨å°¾æ·»åŠ èŠ‚ç‚¹</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>HeroNode2 newNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>        HeroNode2 cur <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ‰¾åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token punctuation">.</span>next <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">// å¾ªç¯ç»“æŸåcuræŒ‡å‘æœ€åä¸€ä¸ªèŠ‚ç‚¹</span>            <span class="token comment" spellcheck="true">// å°†æ–°èŠ‚ç‚¹æ·»åŠ åˆ°é“¾è¡¨ä¸­</span>        cur<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode<span class="token punctuation">;</span>        newNode<span class="token punctuation">.</span>pre <span class="token operator">=</span> cur<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// éå†åŒå‘é“¾è¡¨</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">list</span><span class="token punctuation">(</span>HeroNode2 head<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>next <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"é“¾è¡¨ä¸ºç©ºï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        HeroNode2 cur <span class="token operator">=</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>cur <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">return</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>            cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// æ ¹æ®idä¿®æ”¹èŠ‚ç‚¹</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span>HeroNode2 newNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>next <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"é“¾è¡¨ä¸ºç©ºï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        HeroNode2 cur <span class="token operator">=</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>cur <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// éå†å®Œæˆæ²¡æœ‰æ‰¾åˆ°</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ²¡æœ‰idç›¸åŒçš„èŠ‚ç‚¹~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token punctuation">.</span>id <span class="token operator">==</span> newNode<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// æ‰¾åˆ°è¯¥èŠ‚ç‚¹</span>                cur<span class="token punctuation">.</span>name <span class="token operator">=</span> newNode<span class="token punctuation">.</span>name<span class="token punctuation">;</span>                <span class="token keyword">return</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// åˆ é™¤æŒ‡å®šidçš„èŠ‚ç‚¹</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>next <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"é“¾è¡¨ä½ç©ºï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        HeroNode2 cur <span class="token operator">=</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>cur <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ²¡æœ‰æ‰¾åˆ°æŒ‡å®šidçš„èŠ‚ç‚¹~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token punctuation">.</span>id <span class="token operator">==</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// æ‰¾åˆ°è¯¥èŠ‚ç‚¹ å°†å¾…åˆ é™¤èŠ‚ç‚¹å‰åçš„èŠ‚ç‚¹é“¾æ¥åˆ°ä¸€èµ·</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token punctuation">.</span>next <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">// å¾…åˆ é™¤çš„èŠ‚ç‚¹æ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹</span>                    cur<span class="token punctuation">.</span>pre<span class="token punctuation">.</span>next <span class="token operator">=</span> null<span class="token punctuation">;</span>                    <span class="token keyword">return</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                    cur<span class="token punctuation">.</span>pre<span class="token punctuation">.</span>next <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span>                    cur<span class="token punctuation">.</span>next<span class="token punctuation">.</span>pre <span class="token operator">=</span> cur<span class="token punctuation">.</span>pre<span class="token punctuation">;</span>                    <span class="token keyword">return</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å•é“¾è¡¨</title>
      <link href="2020/04/30/dataStructure-02/"/>
      <url>2020/04/30/dataStructure-02/</url>
      
        <content type="html"><![CDATA[<h2 id="1ã€é“¾è¡¨ä»‹ç»"><a href="#1ã€é“¾è¡¨ä»‹ç»" class="headerlink" title="1ã€é“¾è¡¨ä»‹ç»"></a>1ã€é“¾è¡¨ä»‹ç»</h2><p>é“¾è¡¨æ˜¯æœ‰åºçš„åˆ—è¡¨ï¼Œåœ¨å†…å­˜ä¸­çš„å­˜å‚¨ç»“æ„ï¼š<br><img src="/2020/04/30/dataStructure-02/1.png" alt></p><p>å°ç»“:<br>1)é“¾è¡¨æ˜¯ä»¥èŠ‚ç‚¹çš„æ–¹å¼æ¥å­˜å‚¨,æ˜¯é“¾å¼å­˜å‚¨<br>2)æ¯ä¸ªèŠ‚ç‚¹åŒ…å« data åŸŸï¼Œ next åŸŸï¼šæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹<br>3)å¦‚å›¾ï¼šå‘ç°é“¾è¡¨çš„<strong>å„ä¸ªèŠ‚ç‚¹ä¸ä¸€å®šæ˜¯è¿ç»­å­˜å‚¨</strong>.<br>4)é“¾è¡¨åˆ†å¸¦å¤´èŠ‚ç‚¹çš„é“¾è¡¨å’Œæ²¡æœ‰å¤´èŠ‚ç‚¹çš„é“¾è¡¨ï¼Œæ ¹æ®å®é™…çš„éœ€æ±‚æ¥ç¡®å®šé€»è¾‘ç»“æ„å›¾ï¼š<br><img src="/2020/04/30/dataStructure-02/2.png" alt></p><h2 id="2ã€å•é“¾è¡¨çš„åˆ›å»ºï¼Œæ’å…¥ï¼Œåˆ é™¤ï¼Œæ˜¾ç¤º"><a href="#2ã€å•é“¾è¡¨çš„åˆ›å»ºï¼Œæ’å…¥ï¼Œåˆ é™¤ï¼Œæ˜¾ç¤º" class="headerlink" title="2ã€å•é“¾è¡¨çš„åˆ›å»ºï¼Œæ’å…¥ï¼Œåˆ é™¤ï¼Œæ˜¾ç¤º"></a>2ã€å•é“¾è¡¨çš„åˆ›å»ºï¼Œæ’å…¥ï¼Œåˆ é™¤ï¼Œæ˜¾ç¤º</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> linkedlist<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SingleLinkedListDemo</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºèŠ‚ç‚¹</span>        HeroNode hero1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HeroNode</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">"wd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        HeroNode hero2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HeroNode</span><span class="token punctuation">(</span><span class="token number">1001</span><span class="token punctuation">,</span> <span class="token string">"lz"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        HeroNode hero3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HeroNode</span><span class="token punctuation">(</span><span class="token number">1002</span><span class="token punctuation">,</span> <span class="token string">"lp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºé“¾è¡¨</span>        SingleLinkedList heroList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SingleLinkedList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ·»åŠ èŠ‚ç‚¹</span><span class="token comment" spellcheck="true">//        heroList.add(hero1);</span><span class="token comment" spellcheck="true">//        heroList.add(hero3);</span><span class="token comment" spellcheck="true">//        heroList.add(hero2);</span>        heroList<span class="token punctuation">.</span><span class="token function">addByOrder</span><span class="token punctuation">(</span>hero3<span class="token punctuation">)</span><span class="token punctuation">;</span>        heroList<span class="token punctuation">.</span><span class="token function">addByOrder</span><span class="token punctuation">(</span>hero2<span class="token punctuation">)</span><span class="token punctuation">;</span>        heroList<span class="token punctuation">.</span><span class="token function">addByOrder</span><span class="token punctuation">(</span>hero1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ä¿®æ”¹</span>        HeroNode hero4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HeroNode</span><span class="token punctuation">(</span><span class="token number">1002</span><span class="token punctuation">,</span> <span class="token string">"ljb"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        heroList<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>hero4<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ é™¤</span>        heroList<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ˜¾ç¤º</span>        heroList<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// å®šä¹‰HeroNode ,æ¯ä¸€ä¸ªHeroNode å¯¹è±¡å°±æ˜¯ä¸€ä¸ªèŠ‚ç‚¹</span><span class="token keyword">class</span> <span class="token class-name">HeroNode</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>    <span class="token keyword">public</span> String name<span class="token punctuation">;</span>    <span class="token keyword">public</span> HeroNode next<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span>    <span class="token keyword">public</span> <span class="token function">HeroNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">HeroNode</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">,</span> String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"HeroNode [id="</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">", name="</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// å®šä¹‰SingleLinkedList</span><span class="token keyword">class</span> <span class="token class-name">SingleLinkedList</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// åˆå§‹åŒ–å¤´èŠ‚ç‚¹ ä¸å­˜æ”¾å…·ä½“çš„æ•°æ® è¡¨ç¤ºå•é“¾è¡¨çš„å¤´</span>    <span class="token keyword">private</span> HeroNode head <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HeroNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// æ·»åŠ èŠ‚ç‚¹åˆ°å•é“¾è¡¨</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>HeroNode heroNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// headèŠ‚ç‚¹ä¸èƒ½åŠ¨ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªä¸´æ—¶èŠ‚ç‚¹</span>        HeroNode temp <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 1.æ‰¾åˆ°å½“å‰é“¾è¡¨çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>temp<span class="token punctuation">.</span>next <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">// å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°†tempåç§»</span>            temp <span class="token operator">=</span> temp<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// å½“é€€å‡ºwhileå¾ªç¯æ—¶ï¼Œtempå°±æŒ‡å‘äº†é“¾è¡¨çš„æœ€å</span>        <span class="token comment" spellcheck="true">// 2.å°†æœ€åçš„è¿™ä¸ªèŠ‚ç‚¹æŒ‡å‘æ–°çš„èŠ‚ç‚¹</span>        temp<span class="token punctuation">.</span>next <span class="token operator">=</span> heroNode<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// æ˜¾ç¤ºå½“å‰é“¾è¡¨</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆ¤æ–­é“¾è¡¨æ˜¯å¦ä¸ºç©º</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>next <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"é“¾è¡¨ä¸ºç©ºï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// éå†è¾“å‡º</span>        HeroNode temp <span class="token operator">=</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>temp <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">// è¾“å‡ºèŠ‚ç‚¹ä¿¡æ¯</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// å°†temp åç§»</span>            temp <span class="token operator">=</span> temp<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// æ ¹æ®æ’åæ·»åŠ èŠ‚ç‚¹åˆ°æŒ‡å®šä½ç½®</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addByOrder</span><span class="token punctuation">(</span>HeroNode heroNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 1.æ‰¾åˆ°è¦æ·»åŠ èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹</span>        HeroNode temp <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token keyword">boolean</span> flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// æ ‡è¯†æ·»åŠ çš„ç¼–å·æ˜¯å¦ å­˜åœ¨</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>temp<span class="token punctuation">.</span>next <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>temp<span class="token punctuation">.</span>next<span class="token punctuation">.</span>id <span class="token operator">></span> heroNode<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// ä½ç½®æ‰¾åˆ° å°±åœ¨temp ä¸ temp.next ä¹‹é—´</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>temp<span class="token punctuation">.</span>next<span class="token punctuation">.</span>id <span class="token operator">==</span> heroNode<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// è¦æ’å…¥çš„èŠ‚ç‚¹çš„ç¼–å·å·²ç»å­˜åœ¨</span>                flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">// åç§»</span>            temp <span class="token operator">=</span> temp<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// åˆ¤æ–­flagçš„å€¼</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"å‡†å¤‡æ’å…¥çš„è‹±é›„çš„ç¼–å·%då·²ç»å­˜åœ¨ï¼Œä¸èƒ½æ·»åŠ ï¼"</span><span class="token punctuation">,</span> heroNode<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 2.æ’å…¥åˆ°é“¾è¡¨ä¸­ </span>            heroNode<span class="token punctuation">.</span>next <span class="token operator">=</span> temp<span class="token punctuation">.</span>next<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æ’å…¥èŠ‚ç‚¹çš„nextæŒ‡å‘åŸæœ‰èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span>            temp<span class="token punctuation">.</span>next <span class="token operator">=</span> heroNode<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// åŸæœ‰èŠ‚ç‚¹çš„nextæŒ‡å‘æ’å…¥èŠ‚ç‚¹</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// æ ¹æ®ç¼–å·ä¿®æ”¹èŠ‚ç‚¹ä¿¡æ¯</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span>HeroNode heroNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆ¤é“¾è¡¨æ˜¯å¦ä¸ºç©º</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>next <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"é“¾è¡¨ä¸ºç©ºï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        HeroNode temp <span class="token operator">=</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token keyword">boolean</span> flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// åˆ¤æ–­æ˜¯å¦æ‰¾åˆ°</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>temp <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>temp<span class="token punctuation">.</span>id <span class="token operator">==</span> heroNode<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>                flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            temp <span class="token operator">=</span> temp<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>            temp<span class="token punctuation">.</span>name <span class="token operator">=</span> heroNode<span class="token punctuation">.</span>name<span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"æ²¡æœ‰æ‰¾åˆ°ç¼–å·ä¸º%dçš„èŠ‚ç‚¹ï¼"</span><span class="token punctuation">,</span> heroNode<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// æ ¹æ®ç¼–å·åˆ é™¤èŠ‚ç‚¹ä¿¡æ¯</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>next <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"é“¾è¡¨ä¸ºç©ºï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        HeroNode temp <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token keyword">boolean</span> flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 1.æ‰¾åˆ°å¾…åˆ é™¤èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>temp<span class="token punctuation">.</span>next <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>temp<span class="token punctuation">.</span>next<span class="token punctuation">.</span>id <span class="token operator">==</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>                flag <span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            temp <span class="token operator">=</span> temp<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 2.ä½¿åŸæœ‰èŠ‚ç‚¹çš„nextæŒ‡å‘  å¾…åˆ é™¤èŠ‚ç‚¹(temp.next)  çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span>            temp<span class="token punctuation">.</span>next <span class="token operator">=</span> temp<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"æ²¡æœ‰æ‰¾åˆ°ç¼–å·ä¸º%dçš„èŠ‚ç‚¹"</span><span class="token punctuation">,</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="3ã€æ±‚å•é“¾è¡¨æœ‰æ•ˆèŠ‚ç‚¹ä¸ªæ•°"><a href="#3ã€æ±‚å•é“¾è¡¨æœ‰æ•ˆèŠ‚ç‚¹ä¸ªæ•°" class="headerlink" title="3ã€æ±‚å•é“¾è¡¨æœ‰æ•ˆèŠ‚ç‚¹ä¸ªæ•°"></a>3ã€æ±‚å•é“¾è¡¨æœ‰æ•ˆèŠ‚ç‚¹ä¸ªæ•°</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getLength</span><span class="token punctuation">(</span>HeroNode head<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>next <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    HeroNode cur <span class="token operator">=</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>cur <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>        length<span class="token operator">++</span><span class="token punctuation">;</span>        cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> length<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="4ã€æŸ¥æ‰¾å€’æ•°ç¬¬-k-ä¸ªèŠ‚ç‚¹"><a href="#4ã€æŸ¥æ‰¾å€’æ•°ç¬¬-k-ä¸ªèŠ‚ç‚¹" class="headerlink" title="4ã€æŸ¥æ‰¾å€’æ•°ç¬¬ k ä¸ªèŠ‚ç‚¹"></a>4ã€æŸ¥æ‰¾å€’æ•°ç¬¬ k ä¸ªèŠ‚ç‚¹</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> HeroNode <span class="token function">findLastIndexNode</span><span class="token punctuation">(</span>HeroNode head<span class="token punctuation">,</span> <span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// åˆ¤æ–­é“¾è¡¨æ˜¯å¦ä¸ºç©º</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>next <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> null<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// è·å–é“¾è¡¨é•¿åº¦</span>    <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// éªŒè¯ index æ˜¯å¦åˆæ³•</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>index<span class="token operator">&lt;=</span><span class="token number">0</span><span class="token operator">||</span>index<span class="token operator">></span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> null<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// forå¾ªç¯å®šä½åˆ°å€’æ•°ç¬¬ index ä¸ªèŠ‚ç‚¹</span>    HeroNode cur <span class="token operator">=</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token operator">-</span>index<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> cur<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="5ã€å•é“¾è¡¨çš„åè½¬"><a href="#5ã€å•é“¾è¡¨çš„åè½¬" class="headerlink" title="5ã€å•é“¾è¡¨çš„åè½¬"></a>5ã€å•é“¾è¡¨çš„åè½¬</h2><p><img src="/2020/04/30/dataStructure-02/3.png" alt></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">reverseList</span><span class="token punctuation">(</span>HeroNode head<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>next <span class="token operator">==</span> null <span class="token operator">||</span> head<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"é“¾è¡¨ä¸ºç©ºæˆ–é•¿åº¦ä¸º 1ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        HeroNode cur <span class="token operator">=</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        HeroNode next <span class="token operator">=</span> null<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æŒ‡å‘å½“å‰èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span>        HeroNode reverseHead <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HeroNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// éå†åŸæ¥çš„é“¾è¡¨</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>cur <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            next <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å…ˆæš‚æ—¶ä¿å­˜å½“å‰èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span>            cur<span class="token punctuation">.</span>next <span class="token operator">=</span> reverseHead<span class="token punctuation">.</span>next<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä½¿å½“å‰èŠ‚ç‚¹æŒ‡å‘æ–°é“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</span>            reverseHead<span class="token punctuation">.</span>next <span class="token operator">=</span> cur<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä½¿ æ–°é“¾è¡¨çš„å¤´èŠ‚ç‚¹æŒ‡å‘å½“å‰èŠ‚ç‚¹</span>            cur <span class="token operator">=</span> next<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å½“å‰èŠ‚ç‚¹åç§»</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// å°†æ–°é“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹è¿æ¥åˆ°åŸæ¥é“¾è¡¨çš„å¤´èŠ‚ç‚¹ä¸Š</span>        head<span class="token punctuation">.</span>next <span class="token operator">=</span> reverseHead<span class="token punctuation">.</span>next<span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><h2 id="6ã€é€†åºæ‰“å°å•é“¾è¡¨"><a href="#6ã€é€†åºæ‰“å°å•é“¾è¡¨" class="headerlink" title="6ã€é€†åºæ‰“å°å•é“¾è¡¨"></a>6ã€é€†åºæ‰“å°å•é“¾è¡¨</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">reversePrint</span><span class="token punctuation">(</span>HeroNode head<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>next <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"é“¾è¡¨ä¸ºç©ºï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºä¸€ä¸ªæ ˆ</span>        Stack<span class="token operator">&lt;</span>HeroNode<span class="token operator">></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token operator">&lt;</span>HeroNode<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆç”¨äºéå†</span>        HeroNode cur <span class="token operator">=</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// éå†å•é“¾è¡¨</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>cur <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å°†éå†çš„èŠ‚ç‚¹å…¥æ ˆ</span>            cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// åç§»</span>        <span class="token punctuation">}</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é˜Ÿåˆ—</title>
      <link href="2020/04/28/dataStructure-01-2/"/>
      <url>2020/04/28/dataStructure-01-2/</url>
      
        <content type="html"><![CDATA[<h2 id="é˜Ÿåˆ—"><a href="#é˜Ÿåˆ—" class="headerlink" title="é˜Ÿåˆ—"></a>é˜Ÿåˆ—</h2><p>é˜Ÿåˆ—æ˜¯ä¸€ä¸ªæœ‰åºåˆ—è¡¨ï¼Œå¯ä»¥ç”¨æ•°ç»„å’Œé“¾è¡¨æ¥å®ç°ã€‚<br>éµå¾ª<strong>å…ˆè¿›å…ˆå‡º</strong>åŸåˆ™ã€‚<br><img src="/2020/04/28/dataStructure-01-2/3.png" alt></p><h3 id="1ã€æ•°ç»„æ¨¡æ‹Ÿé˜Ÿåˆ—"><a href="#1ã€æ•°ç»„æ¨¡æ‹Ÿé˜Ÿåˆ—" class="headerlink" title="1ã€æ•°ç»„æ¨¡æ‹Ÿé˜Ÿåˆ—"></a>1ã€æ•°ç»„æ¨¡æ‹Ÿé˜Ÿåˆ—</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayQueueDemo</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        ArrayQueue queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayQueue</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">char</span> key <span class="token operator">=</span> <span class="token string">' '</span><span class="token punctuation">;</span>        Scanner in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">boolean</span> loop <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>loop<span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"s:æ˜¾ç¤ºé˜Ÿåˆ—   a:æ·»åŠ æ•°æ®åˆ°é˜Ÿåˆ—   g:å–å‡ºæ•°æ®  h:æŸ¥çœ‹é˜Ÿåˆ—å¤´  e:é€€å‡º"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥è¦æ‰§è¡Œçš„æ“ä½œï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            key <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">switch</span> <span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">case</span> <span class="token string">'s'</span><span class="token operator">:</span>                queue<span class="token punctuation">.</span><span class="token function">showQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token string">'a'</span><span class="token operator">:</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥ä¸€ä¸ªæ•°å­—ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> num <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                queue<span class="token punctuation">.</span><span class="token function">addQueue</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token string">'g'</span><span class="token operator">:</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    <span class="token keyword">int</span> num1 <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">getQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å–å‡ºçš„æ•°æ®ä¸ºï¼š"</span><span class="token operator">+</span> num1<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token comment" spellcheck="true">// TODO Auto-generated catch block</span>                    e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token string">'h'</span><span class="token operator">:</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    <span class="token keyword">int</span> head <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">headQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"é˜Ÿåˆ—å¤´ä¸ºï¼š"</span><span class="token operator">+</span> head<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token comment" spellcheck="true">// TODO Auto-generated catch block</span>                    e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token string">'e'</span><span class="token operator">:</span>                loop <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç¨‹åºé€€å‡º"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">default</span><span class="token operator">:</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>                <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// ä½¿ç”¨æ•°ç»„æ¨¡æ‹Ÿé˜Ÿåˆ—---ç¼–å†™ä¸€ä¸ªArrayQueueç±»</span><span class="token keyword">class</span> <span class="token class-name">ArrayQueue</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> maxSize<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è¡¨ç¤ºæ•°ç»„çš„æœ€å¤§å®¹é‡</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> front<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// é˜Ÿåˆ—å¤´</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> rear<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// é˜Ÿåˆ—å°¾</span>    <span class="token keyword">private</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç”¨äºå­˜æ”¾æ•°æ®ï¼Œæ¨¡æ‹Ÿé˜Ÿåˆ—</span>    <span class="token comment" spellcheck="true">// åˆ›å»ºé˜Ÿåˆ—çš„æ„é€ å™¨</span>    <span class="token keyword">public</span> <span class="token function">ArrayQueue</span><span class="token punctuation">(</span><span class="token keyword">int</span> maxSize<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>maxSize <span class="token operator">=</span> maxSize<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span> <span class="token punctuation">[</span>maxSize<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>front <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æŒ‡å‘é˜Ÿåˆ—å¤´éƒ¨çš„å‰ä¸€ä¸ªä½ç½®</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>rear <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æŒ‡å‘é˜Ÿåˆ—å°¾éƒ¨</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦æ»¡</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isFull</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> rear <span class="token operator">==</span> maxSize<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> front <span class="token operator">==</span> rear<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// æ·»åŠ æ•°æ®åˆ°é˜Ÿåˆ—ï¼Œå…¥é˜Ÿåˆ—</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addQueue</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦å·²æ»¡</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isFull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"é˜Ÿåˆ—å·²æ»¡ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>            rear<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// è®©rearåç§»</span>            arr<span class="token punctuation">[</span>rear<span class="token punctuation">]</span><span class="token operator">=</span>num<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// è·å–é˜Ÿåˆ—æ•°æ®ï¼Œå‡ºé˜Ÿåˆ—</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"é˜Ÿåˆ—ä¸ºç©ºï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æŠ›å‡ºå¼‚å¸¸</span>        <span class="token punctuation">}</span>        front<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> arr<span class="token punctuation">[</span>front<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// æ˜¾ç¤ºé˜Ÿåˆ—æ‰€æœ‰æ•°æ®</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">showQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// éå†</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"é˜Ÿåˆ—ä¸ºç©º"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// æ˜¾ç¤ºé˜Ÿåˆ—çš„å¤´æ•°æ®</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">headQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"é˜Ÿåˆ—ä¸ºç©ºï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> arr<span class="token punctuation">[</span>front<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h3 id="2ã€ç¯å½¢é˜Ÿåˆ—"><a href="#2ã€ç¯å½¢é˜Ÿåˆ—" class="headerlink" title="2ã€ç¯å½¢é˜Ÿåˆ—"></a>2ã€ç¯å½¢é˜Ÿåˆ—</h3><p>1.ç›®å‰æ•°ç»„ä½¿ç”¨ä¸€æ¬¡ä¹‹åå°±ä¸èƒ½å†ä½¿ç”¨äº†ï¼Œæ²¡æœ‰è¾¾åˆ°å¤ç”¨çš„æ•ˆæœã€‚<br>2.å°†æ•°ç»„ä½¿ç”¨ç®—æ³•ï¼Œæ”¹è¿›æˆä¸ºä¸€ä¸ªç¯å½¢é˜Ÿåˆ—&nbsp;&nbsp;&nbsp;å–æ¨¡%<br><img src="/2020/04/28/dataStructure-01-2/4.png" alt></p><blockquote><p>å¾ªç¯é˜Ÿåˆ—ä¸­ï¼Œç”±äºå…¥é˜Ÿæ—¶å°¾æŒ‡é’ˆå‘å‰è¿½èµ¶å¤´æŒ‡é’ˆï¼›å‡ºé˜Ÿæ—¶å¤´æŒ‡é’ˆå‘å‰è¿½èµ¶å°¾æŒ‡é’ˆï¼Œé€ æˆé˜Ÿç©ºå’Œé˜Ÿæ»¡æ—¶å¤´å°¾æŒ‡é’ˆå‡ç›¸ç­‰ã€‚å› æ­¤ï¼Œæ— æ³•é€šè¿‡æ¡ä»¶front==rearæ¥åˆ¤åˆ«é˜Ÿåˆ—æ˜¯â€ç©ºâ€è¿˜æ˜¯â€æ»¡â€ã€‚<br>è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•è‡³å°‘æœ‰ä¸‰ç§ï¼š<br>â‘  å¦è®¾ä¸€å¸ƒå°”å˜é‡ä»¥åŒºåˆ«é˜Ÿåˆ—çš„ç©ºå’Œæ»¡ï¼›<br>â‘¡ å°‘ç”¨ä¸€ä¸ªå…ƒç´ çš„ç©ºé—´ã€‚çº¦å®šå…¥é˜Ÿå‰ï¼Œæµ‹è¯•å°¾æŒ‡é’ˆåœ¨å¾ªç¯æ„ä¹‰ä¸‹åŠ 1åæ˜¯å¦ç­‰äºå¤´æŒ‡é’ˆï¼Œè‹¥ç›¸ç­‰åˆ™è®¤ä¸ºé˜Ÿæ»¡</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">CircleQueue</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> maxSize<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è¡¨ç¤ºæ•°ç»„çš„æœ€å¤§å®¹é‡</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> front<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// é˜Ÿåˆ—å¤´</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> rear<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// é˜Ÿåˆ—å°¾</span>    <span class="token keyword">private</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç”¨äºå­˜æ”¾æ•°æ®ï¼Œæ¨¡æ‹Ÿé˜Ÿåˆ—</span>    <span class="token keyword">public</span> <span class="token function">CircleQueue</span><span class="token punctuation">(</span><span class="token keyword">int</span> maxSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>maxSize <span class="token operator">=</span> maxSize<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>maxSize<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// this.front = 0;// æŒ‡å‘é˜Ÿåˆ—å¤´éƒ¨</span>        <span class="token comment" spellcheck="true">// this.rear = 0;// æŒ‡å‘é˜Ÿåˆ—å°¾éƒ¨çš„åä¸€ä¸ªä½ç½®</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isFull</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>rear <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> maxSize <span class="token operator">==</span> front<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> rear <span class="token operator">==</span> front<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// æ·»åŠ æ•°æ®åˆ°é˜Ÿåˆ—ï¼Œå…¥é˜Ÿåˆ—</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addQueue</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦å·²æ»¡</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"é˜Ÿåˆ—å·²æ»¡ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            arr<span class="token punctuation">[</span>rear<span class="token punctuation">]</span> <span class="token operator">=</span> num<span class="token punctuation">;</span>            rear <span class="token operator">=</span> <span class="token punctuation">(</span>rear <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> maxSize<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// è®©rearåç§»</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// è·å–é˜Ÿåˆ—æ•°æ®ï¼Œå‡ºé˜Ÿåˆ—</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"é˜Ÿåˆ—ä¸ºç©ºï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æŠ›å‡ºå¼‚å¸¸</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// 1.å°†frontå¯¹åº”çš„å€¼ä¿å­˜</span>        <span class="token keyword">int</span> value <span class="token operator">=</span> arr<span class="token punctuation">[</span>front<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 2.frontåç§»</span>        front <span class="token operator">=</span> <span class="token punctuation">(</span>front <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> maxSize<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 3.è¿”å›ä¿å­˜çš„frontå¯¹åº”çš„å€¼</span>        <span class="token keyword">return</span> value<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// å½“å‰é˜Ÿåˆ—çš„æœ‰æ•ˆæ•°æ®ä¸ªæ•°</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>rear <span class="token operator">-</span> front <span class="token operator">+</span> maxSize<span class="token punctuation">)</span> <span class="token operator">%</span> maxSize<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// æ˜¾ç¤ºé˜Ÿåˆ—æ‰€æœ‰æ•°æ®</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">showQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// éå†</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"é˜Ÿåˆ—ä¸ºç©º"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">// ä»frontå¼€å§‹éå†</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> front<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> front <span class="token operator">+</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i <span class="token operator">%</span> maxSize<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// æ˜¾ç¤ºé˜Ÿåˆ—çš„å¤´æ•°æ®</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">headQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"é˜Ÿåˆ—ä¸ºç©ºï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> arr<span class="token punctuation">[</span>front<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¨€ç–æ•°ç»„</title>
      <link href="2020/04/25/dataStructure-01/"/>
      <url>2020/04/25/dataStructure-01/</url>
      
        <content type="html"><![CDATA[<h2 id="æ•°æ®ç»“æ„æ¦‚è¿°"><a href="#æ•°æ®ç»“æ„æ¦‚è¿°" class="headerlink" title="æ•°æ®ç»“æ„æ¦‚è¿°"></a>æ•°æ®ç»“æ„æ¦‚è¿°</h2><p>æ•°æ®ç»“æ„åŒ…æ‹¬ï¼šçº¿æ€§ç»“æ„å’Œéçº¿æ€§ç»“æ„<br><strong>çº¿æ€§ç»“æ„ï¼š</strong><br>1.æ•°æ®å…ƒç´ ä¹‹é—´å­˜åœ¨<strong>ä¸€å¯¹ä¸€</strong>çš„çº¿æ€§å…³ç³»ã€‚<br>2.çº¿æ€§ç»“æ„æœ‰ä¸¤ç§ä¸åŒçš„å­˜å‚¨ç»“æ„ï¼Œå³<strong>é¡ºåºå­˜å‚¨ç»“æ„(æ•°ç»„)</strong>å’Œ<strong>é“¾å¼å­˜å‚¨ç»“æ„(é“¾è¡¨)</strong>ã€‚<br>3.é¡ºåºå­˜å‚¨çš„çº¿æ€§è¡¨ç§°ä¸ºé¡ºåºè¡¨ï¼Œå­˜å‚¨çš„å…ƒç´ æ˜¯<strong>è¿ç»­çš„</strong>ï¼›<br>&nbsp;&nbsp;&nbsp;é“¾å¼å­˜å‚¨çš„çº¿æ€§è¡¨ç§°ä¸ºé“¾è¡¨ï¼Œå­˜å‚¨çš„å…ƒç´ <strong>ä¸ä¸€å®šæ˜¯è¿ç»­çš„</strong>ï¼Œå…ƒç´ èŠ‚ç‚¹ä¸­å­˜æ”¾ç€æ•°æ®å…ƒç´ å’Œç›¸é‚»å…ƒç´ çš„åœ°å€ä¿¡æ¯ã€‚<br>4.çº¿æ€§ç»“æ„å¸¸è§çš„æœ‰ï¼šæ•°ç»„ï¼Œé˜Ÿåˆ—ï¼Œé“¾è¡¨å’Œæ ˆã€‚<br><strong>éçº¿æ€§ç»“æ„ï¼š</strong><br>éçº¿æ€§ç»“æ„åŒ…æ‹¬ï¼šäºŒç»´æ•°ç»„ï¼Œå¤šç»´æ•°ç»„ï¼Œå¹¿ä¹‰è¡¨ï¼Œæ ‘ï¼Œå›¾ã€‚</p><h2 id="ç¨€ç–æ•°ç»„"><a href="#ç¨€ç–æ•°ç»„" class="headerlink" title="ç¨€ç–æ•°ç»„"></a>ç¨€ç–æ•°ç»„</h2><p>å½“ä¸€ä¸ªæ•°ç»„ä¸­å¤§éƒ¨åˆ†å…ƒç´ ä¸ºï¼ï¼Œæˆ–è€…ä¸ºåŒä¸€ä¸ªå€¼çš„æ•°ç»„æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç¨€ç–æ•°ç»„æ¥ä¿å­˜è¯¥æ•°ç»„ã€‚<br>ç¨€ç–æ•°ç»„çš„å¤„ç†æ–¹æ³•æ˜¯:<br>1)è®°å½•æ•°ç»„ä¸€å…±æœ‰å‡ è¡Œå‡ åˆ—ï¼Œæœ‰å¤šå°‘ä¸ªä¸åŒçš„éé›¶å€¼ã€‚<br>2)æŠŠå…·æœ‰ä¸åŒå€¼çš„å…ƒç´ çš„è¡Œåˆ—åŠå€¼è®°å½•åœ¨ä¸€ä¸ªå°è§„æ¨¡çš„æ•°ç»„ä¸­ï¼Œä»è€Œç¼©å°ç¨‹åºçš„è§„æ¨¡ã€‚</p><h3 id="1ã€åŸºæœ¬ä»‹ç»ï¼š"><a href="#1ã€åŸºæœ¬ä»‹ç»ï¼š" class="headerlink" title="1ã€åŸºæœ¬ä»‹ç»ï¼š"></a>1ã€åŸºæœ¬ä»‹ç»ï¼š</h3><p><img src="/2020/04/25/dataStructure-01/1.png" alt></p><h3 id="2ã€åº”ç”¨å®ä¾‹ï¼š"><a href="#2ã€åº”ç”¨å®ä¾‹ï¼š" class="headerlink" title="2ã€åº”ç”¨å®ä¾‹ï¼š"></a>2ã€åº”ç”¨å®ä¾‹ï¼š</h3><p><img src="/2020/04/25/dataStructure-01/2.png" alt></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SparseArray</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºåŸå§‹çš„äºŒç»´æ•°ç»„11*11</span>        <span class="token comment" spellcheck="true">// 0ï¼šè¡¨ç¤ºæ²¡æœ‰æ£‹å­ 1:è¡¨ç¤ºé»‘è‰²æ£‹å­ 2ï¼šè¡¨ç¤ºè“è‰²æ£‹å­</span>        <span class="token keyword">int</span> chessArr1<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        chessArr1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        chessArr1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åŸå§‹çš„äºŒç»´æ•°ç»„ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> row <span class="token operator">:</span> chessArr1<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> data <span class="token operator">:</span> row<span class="token punctuation">)</span> <span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>data <span class="token operator">+</span> <span class="token string">"  "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// å°†äºŒç»´æ•°ç»„è½¬æ¢ä¸ºç¨€ç–æ•°ç»„</span>        <span class="token comment" spellcheck="true">// 1.å…ˆéå†äºŒç»´æ•°ç»„ å¾—åˆ°éé›¶æ•°æ®çš„ä¸ªæ•°</span>        <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> chessArr1<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> chessArr1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>chessArr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    sum<span class="token operator">++</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// System.out.println(sum);</span>        <span class="token comment" spellcheck="true">// 2.åˆ›å»ºå¯¹åº”çš„ç¨€ç–æ•°ç»„</span>        <span class="token keyword">int</span> sparseArr<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>sum <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 3.ç»™ç¨€ç–æ•°ç»„èµ‹å€¼</span>        sparseArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> chessArr1<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        sparseArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> chessArr1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>        sparseArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> sum<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// éå†äºŒç»´æ•°ç»„å°†éé›¶å€¼å­˜æ”¾åˆ°ç¨€ç–æ•°ç»„ä¸­</span>        <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ç”¨äºè®°å½•æ˜¯ç¬¬å‡ ä¸ªéé›¶æ•°æ®</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> chessArr1<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> chessArr1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>chessArr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    count<span class="token operator">++</span><span class="token punctuation">;</span>                    sparseArr<span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>                    sparseArr<span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> j<span class="token punctuation">;</span>                    sparseArr<span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> chessArr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç¨€ç–æ•°ç»„ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> row <span class="token operator">:</span> sparseArr<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> data <span class="token operator">:</span> row<span class="token punctuation">)</span> <span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\t"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// ç¨€ç–æ•°ç»„è½¬æ¢ä¸ºäºŒç»´æ•°ç»„</span>        <span class="token comment" spellcheck="true">// 1.è¯»å–ç¨€ç–æ•°ç»„çš„ç¬¬ä¸€è¡Œï¼Œæ ¹æ®ç¬¬ä¸€è¡Œçš„æ•°æ®åˆ›å»ºåŸå§‹çš„äºŒç»´æ•°ç»„</span>        <span class="token keyword">int</span> chessArr2<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>sparseArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>sparseArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 2.è¯»å–å…¶ä½™çš„å‡ è¡Œæ•°æ®ï¼Œå¹¶èµ‹å€¼ç»™åŸå§‹çš„ äºŒç»´æ•°ç»„</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sparseArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">int</span> row <span class="token operator">=</span> sparseArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> col <span class="token operator">=</span> sparseArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> value <span class="token operator">=</span> sparseArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            chessArr2<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ¢å¤åçš„äºŒç»´æ•°ç»„ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> row <span class="token operator">:</span> chessArr2<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> data <span class="token operator">:</span> row<span class="token punctuation">)</span> <span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>data <span class="token operator">+</span> <span class="token string">"  "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cookie,session</title>
      <link href="2020/04/23/javaweb-06/"/>
      <url>2020/04/23/javaweb-06/</url>
      
        <content type="html"><![CDATA[<h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><p>Cookieæ˜¯æœåŠ¡å™¨é€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜é”®å€¼å¯¹çš„ä¸€ç§æŠ€æœ¯ã€‚<br>å®¢æˆ·ç«¯æœ‰äº†Cookieåï¼Œæ¯æ¬¡è¯·æ±‚éƒ½ä¼šå‘é€ç»™æœåŠ¡å™¨ã€‚<br>Cookie çš„å€¼å¯ä»¥å”¯ä¸€åœ°æ ‡è¯†å®¢æˆ·ç«¯ï¼Œå› æ­¤ Cookie å¸¸ç”¨äºä¼šè¯ç®¡ç†ã€‚<br>æ¯ä¸ªCookieçš„ å¤§å°ä¸èƒ½è¶…è¿‡4kbã€‚</p><h3 id="1-åˆ›å»ºCookie"><a href="#1-åˆ›å»ºCookie" class="headerlink" title="1.åˆ›å»ºCookie"></a>1.åˆ›å»ºCookie</h3><p><img src="/2020/04/23/javaweb-06/1.png" alt></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CookieServlet</span> <span class="token keyword">extends</span> <span class="token class-name">BaseServlet</span> <span class="token punctuation">{</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">createCookie</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 1.åˆ›å»ºCookieå¯¹è±¡</span>        Cookie cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">,</span> <span class="token string">"value"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 2.é€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜Cookie</span>        resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>        resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"Cookieåˆ›å»ºæˆåŠŸ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="2-æœåŠ¡å™¨è·å–Cookie"><a href="#2-æœåŠ¡å™¨è·å–Cookie" class="headerlink" title="2.æœåŠ¡å™¨è·å–Cookie"></a>2.æœåŠ¡å™¨è·å–Cookie</h3><p><img src="/2020/04/23/javaweb-06/2.png" alt></p><pre class=" language-java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">getCookie</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>    Cookie<span class="token punctuation">[</span><span class="token punctuation">]</span> cookies <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span>Cookie cookie<span class="token operator">:</span>cookies<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// getName()è¿”å›cookieçš„key</span>        <span class="token comment" spellcheck="true">// getValue()è¿”å›cookieçš„value</span>        resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"Cookie["</span><span class="token operator">+</span>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"="</span><span class="token operator">+</span>cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"]&lt;br/>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Cookie iwantCookie <span class="token operator">=</span> null<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/*for(Cookie cookie:cookies){            // ç»™åˆ°æƒ³è¦çš„cookie            if("key1".equals(cookie.getName())){                iwantCookie = cookie;                break;            }        }*/</span>    iwantCookie <span class="token operator">=</span> CookieUtils<span class="token punctuation">.</span><span class="token function">findCookie</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">,</span>req<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>iwantCookie<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>    resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"æ‰¾åˆ°äº†æŒ‡å®šçš„cookie"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>å°†æŸ¥æ‰¾æŒ‡å®šCookieå°è£…æˆå·¥å…·ç±»ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> Utils<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CookieUtils</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * æŸ¥æ‰¾æŒ‡å®šåç§°çš„cookie     * @param name     * @param cookies     * @return cookie     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Cookie <span class="token function">findCookie</span><span class="token punctuation">(</span>String name<span class="token punctuation">,</span>Cookie<span class="token punctuation">[</span><span class="token punctuation">]</span> cookies<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>name<span class="token operator">==</span>null<span class="token operator">||</span>cookies<span class="token operator">==</span>null<span class="token operator">||</span>cookies<span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> null<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span>Cookie cookie<span class="token operator">:</span>cookies<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// ç»™åˆ°æƒ³è¦çš„cookie</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">return</span> cookie<span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> null<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="3-Cookieå€¼çš„ä¿®æ”¹"><a href="#3-Cookieå€¼çš„ä¿®æ”¹" class="headerlink" title="3.Cookieå€¼çš„ä¿®æ”¹"></a>3.Cookieå€¼çš„ä¿®æ”¹</h3><p><strong>æ–¹æ¡ˆä¸€ï¼š</strong><br>1ã€å…ˆåˆ›å»ºä¸€ä¸ªè¦ä¿®æ”¹çš„åŒåï¼ˆæŒ‡çš„å°±æ˜¯keyï¼‰çš„Cookie å¯¹è±¡<br>2ã€åœ¨æ„é€ å™¨ï¼ŒåŒæ—¶èµ‹äºæ–°çš„Cookie å€¼ã€‚<br>3ã€è°ƒç”¨response.addCookie( Cookie );</p><p><strong>æ–¹æ¡ˆäºŒï¼š</strong><br>1ã€å…ˆæŸ¥æ‰¾åˆ°éœ€è¦ä¿®æ”¹çš„Cookie å¯¹è±¡<br>2ã€è°ƒç”¨setValue()æ–¹æ³•èµ‹äºæ–°çš„Cookie å€¼ã€‚<br>3ã€è°ƒç”¨response.addCookie()é€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜ä¿®æ”¹</p><pre class=" language-java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">updateCookie</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>   <span class="token comment" spellcheck="true">/* // æ–¹å¼ä¸€ï¼š    // 1ã€å…ˆåˆ›å»ºä¸€ä¸ªè¦ä¿®æ”¹çš„åŒåï¼ˆæŒ‡çš„å°±æ˜¯keyï¼‰çš„Cookie å¯¹è±¡    // 2ã€åœ¨æ„é€ å™¨ï¼ŒåŒæ—¶èµ‹äºæ–°çš„Cookie å€¼ã€‚    Cookie cookie = new Cookie("key1", "value2");    // 3ã€è°ƒç”¨response.addCookie( Cookie );é€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜cookie    resp.addCookie(cookie);   */</span>    <span class="token comment" spellcheck="true">// æ–¹å¼äºŒï¼š</span>    <span class="token comment" spellcheck="true">// 1ã€å…ˆæŸ¥æ‰¾åˆ°éœ€è¦ä¿®æ”¹çš„Cookie å¯¹è±¡</span>    Cookie cookie <span class="token operator">=</span> CookieUtils<span class="token punctuation">.</span><span class="token function">findCookie</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">,</span>req<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 2ã€è°ƒç”¨setValue()æ–¹æ³•èµ‹äºæ–°çš„Cookie å€¼ã€‚</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>cookie<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>    cookie<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">"value3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// 3ã€è°ƒç”¨response.addCookie()é€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜ä¿®æ”¹</span>    resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="4-Cookieçš„ç”Ÿå‘½æ§åˆ¶"><a href="#4-Cookieçš„ç”Ÿå‘½æ§åˆ¶" class="headerlink" title="4.Cookieçš„ç”Ÿå‘½æ§åˆ¶"></a>4.Cookieçš„ç”Ÿå‘½æ§åˆ¶</h3><p>ç®¡ç†cookieä»€ä¹ˆæ—¶å€™è¢«é”€æ¯(åˆ é™¤)<br>setAge()ï¼š<br>æ­£æ•°è¡¨ç¤ºåœ¨æŒ‡å®šçš„ç§’æ•°åè¿‡æœŸï¼›<br>è´Ÿæ•°è¡¨ç¤ºæµè§ˆå™¨å…³é—­åï¼Œcookieå°±ä¼šé”€æ¯ï¼›ï¼ˆï¼‰é»˜è®¤å€¼ä¸º-1<br>0è¡¨ç¤ºé©¬ä¸Šåˆ é™¤cookieã€‚</p><pre class=" language-java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">defaultLife</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>    Cookie cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"defaultLife"</span><span class="token punctuation">,</span><span class="token string">"defaultLife"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// è®¾ç½®å­˜æ´»æ—¶é—´</span>    resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">deleteCookie</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>    Cookie cookie <span class="token operator">=</span> CookieUtils<span class="token punctuation">.</span><span class="token function">findCookie</span><span class="token punctuation">(</span><span class="token string">"defaultLife"</span><span class="token punctuation">,</span>req<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>cookie<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>    cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// é©¬ä¸Šåˆ é™¤cookie</span>    resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>    resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"cookie[defaultLife=defaultValue]å·²åˆ é™¤"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="5-Cookieæœ‰æ•ˆè·¯å¾„Pathçš„è®¾ç½®"><a href="#5-Cookieæœ‰æ•ˆè·¯å¾„Pathçš„è®¾ç½®" class="headerlink" title="5.Cookieæœ‰æ•ˆè·¯å¾„Pathçš„è®¾ç½®"></a>5.Cookieæœ‰æ•ˆè·¯å¾„Pathçš„è®¾ç½®</h3><p>Cookieçš„pathå±æ€§å¯ä»¥æœ‰æ•ˆçš„è¿‡æ»¤å“ªäº›Cookieå¯ä»¥å‘é€ ä¸ªæœåŠ¡å™¨ã€‚<br>pathå±æ€§æ˜¯é€šè¿‡è¯·æ±‚çš„åœ°å€æ¥è¿›è¡Œæœ‰æ•ˆçš„è¿‡æ»¤ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">testPath</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>    Cookie cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"key2"</span><span class="token punctuation">,</span><span class="token string">"value2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cookie<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"/a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// è®¾ç½®Pathå€¼ä¸º  /å·¥ç¨‹è·¯å¾„/a</span>    resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="6-å…è¾“å…¥ç”¨æˆ·åç™»å½•"><a href="#6-å…è¾“å…¥ç”¨æˆ·åç™»å½•" class="headerlink" title="6.å…è¾“å…¥ç”¨æˆ·åç™»å½•"></a>6.å…è¾“å…¥ç”¨æˆ·åç™»å½•</h3><p><img src="/2020/04/23/javaweb-06/3.png" alt></p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">page</span> <span class="token attr-name">contentType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/html;charset<span class="token punctuation">=</span>UTF-8<span class="token punctuation">"</span></span> <span class="token attr-name">language</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>java<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>login<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://localhost:8080/08_cookie/loginServlet<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        ç”¨æˆ·åï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${cookie.username.value}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>        å¯†ç ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ç™»å½•<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String password <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"zyz"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token string">"123456"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            Cookie cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>            cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">24</span><span class="token operator">*</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// cookieä¸€å‘¨å†…æœ‰æ•ˆ</span>            resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç™»å½•æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç™»å½•å¤±è´¥ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h2><p>1ã€Session æ˜¯ä¸€ä¸ªæ¥å£ï¼ˆHttpSessionï¼‰ã€‚<br>2ã€Session å°±æ˜¯ä¼šè¯ã€‚å®ƒæ˜¯ç”¨æ¥ç»´æŠ¤ä¸€ä¸ªå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å…³è”çš„ä¸€ç§æŠ€æœ¯ã€‚<br>3ã€æ¯ä¸ªå®¢æˆ·ç«¯éƒ½æœ‰è‡ªå·±çš„ä¸€ä¸ªSession ä¼šè¯ã€‚<br>4ã€Session ä¼šè¯ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ç”¨æ¥ä¿å­˜ç”¨æˆ·ç™»å½•ä¹‹åçš„ä¿¡æ¯ã€‚</p><h3 id="1-åˆ›å»ºå’Œè·å–session"><a href="#1-åˆ›å»ºå’Œè·å–session" class="headerlink" title="1.åˆ›å»ºå’Œè·å–session"></a>1.åˆ›å»ºå’Œè·å–session</h3><p>request.getSeesion()ï¼š<br>ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼šåˆ›å»ºSessionä¼šè¯ã€‚<br>ä¹‹åçš„è°ƒç”¨ï¼šè·å–å‰é¢åˆ›å»ºå¥½çš„Sessionä¼šè¯å¯¹è±¡ã€‚<br>isNew()ï¼šåˆ¤æ–­Sessionæ˜¯å¦æ˜¯åˆšåˆ›å»ºçš„<br>&nbsp;&nbsp;&nbsp;&nbsp;trueï¼šè¡¨ç¤ºåˆšåˆ›å»º<br>&nbsp;&nbsp;&nbsp;&nbsp;falseï¼šè¡¨ç¤ºè·å–ä¹‹å‰åˆ›å»º<br>getId()ï¼šå¾—åˆ°Sessionçš„ä¼šè¯idå€¼</p><pre class=" language-java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">createOrGetSession</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// åˆ›å»ºæˆ–è·å–Sessionä¼šè¯å¯¹è±¡</span>    HttpSession session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// åˆ¤æ–­Sessionæ˜¯å¦æ˜¯åˆšåˆšåˆ›å»ºçš„</span>    <span class="token keyword">boolean</span> isNew <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">isNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è·å–Sessionä¼šè¯çš„å”¯ä¸€æ ‡è¯†id</span>    String id <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"å¾—åˆ°Session,idä¸ºï¼š"</span><span class="token operator">+</span>id<span class="token operator">+</span><span class="token string">"&lt;br/>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"æ˜¯å¦æ˜¯åˆšåˆšåˆ›å»ºçš„ï¼š"</span><span class="token operator">+</span>isNew<span class="token operator">+</span><span class="token string">"&lt;br/>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="2-SessionåŸŸæ•°æ®çš„å­˜å–"><a href="#2-SessionåŸŸæ•°æ®çš„å­˜å–" class="headerlink" title="2.SessionåŸŸæ•°æ®çš„å­˜å–"></a>2.SessionåŸŸæ•°æ®çš„å­˜å–</h3><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * å¾€SessionåŸŸä¸­ä¿å­˜æ•°æ® * @param req * @param resp * @throws ServletException * @throws IOException */</span><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">setAttribute</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>    req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">,</span><span class="token string">"value1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/** * è·å–Sessionä¸­çš„æ•°æ® * @param req * @param resp * @throws ServletException * @throws IOException */</span><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">getAttribute</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>    Object key1 <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"ä»Sessionä¸­è·å–çš„key1çš„æ•°æ®ä¸ºï¼š"</span><span class="token operator">+</span> key1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="3-Sessionç”Ÿå‘½å‘¨æœŸæ§åˆ¶"><a href="#3-Sessionç”Ÿå‘½å‘¨æœŸæ§åˆ¶" class="headerlink" title="3.Sessionç”Ÿå‘½å‘¨æœŸæ§åˆ¶"></a>3.Sessionç”Ÿå‘½å‘¨æœŸæ§åˆ¶</h3><p>setMaxInactiveInterval(int  interval)ï¼šè®¾ç½®Sessionè¶…æ—¶æ—¶é—´ï¼Œè¶…è¿‡æŒ‡å®šçš„æ—¶é•¿å°±ä¼šè¢«é”€æ¯ã€‚<br>è´Ÿæ•°è¡¨ç¤ºæ°¸ä¸è¶…æ—¶ã€‚<br>getMaxInactiveInterval()ï¼šè·å–Sessionè¶…æ—¶æ—¶é•¿ã€‚<br>invalidate()ï¼šä½¿å½“å‰ä¼šè¯é©¬ä¸Šè¶…æ—¶ã€‚</p><p>è·å–é»˜è®¤è¶…æ—¶æ—¶é•¿ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">defaultLife</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>    <span class="token keyword">int</span> maxInactiveInterval <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMaxInactiveInterval</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"Sessionçš„é»˜è®¤è¶…æ—¶æ—¶é•¿ä¸ºï¼š"</span><span class="token operator">+</span>maxInactiveInterval<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 1800</span><span class="token punctuation">}</span></code></pre><p> è®¾ç½®webå·¥ç¨‹ä¸‹æ‰€æœ‰çš„ Session é»˜è®¤è¶…æ—¶æ—¶é•¿ï¼š</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-config</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-timeout</span><span class="token punctuation">></span></span>20<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-timeout</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-config</span><span class="token punctuation">></span></span></code></pre><p>è®¾ç½®ä¸ªåˆ«Sessionçš„è¶…æ—¶æ—¶é•¿ï¼š                                                                                                                                                                                                                                                                                                                                                                                                                                            </p><pre class=" language-java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">setLife</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>    req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setMaxInactiveInterval</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"è®¾ç½®Session 3ç§’åå¤±æ•ˆ~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>ä½¿Sessioné©¬ä¸Šå¤±æ•ˆï¼š</p><pre class=" language-java"><code class="language-java"> <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">deleteNow</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"è®¾ç½®Session é©¬ä¸Šå¤±æ•ˆ~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaWeb </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaWeb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½</title>
      <link href="2020/04/13/javaweb-05/"/>
      <url>2020/04/13/javaweb-05/</url>
      
        <content type="html"><![CDATA[<h2 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h2><p>æ–‡ä»¶ä¸Šä¼ çš„è¦æ±‚ï¼š<br>1ã€è¦æœ‰ä¸€ä¸ªformæ ‡ç­¾ï¼Œmethod=post<br>2ã€formæ ‡ç­¾çš„encTypeå±æ€§å€¼å¿…é¡»ä¸ºmultipart/form-data(è¡¨ç¤ºæäº¤çš„æ•°æ®ä»¥å¤šæ®µè¿›è¡Œæ‹¼æ¥(æ¯ä¸ªè¡¨å•é¡¹åˆ†ä¸ºä¸€æ®µ)ï¼Œç„¶åä»¥äºŒè¿›åˆ¶æµçš„å½¢å¼æäº¤ç»™æœåŠ¡å™¨)<br>3ã€åœ¨formæ ‡ç­¾ä¸­ä½¿ç”¨ input type=file æ·»åŠ ä¸Šä¼ çš„æ–‡ä»¶<br>4ã€ç¼–å†™æœåŠ¡å™¨ä»£ç æ¥æ”¶ï¼Œå¤„ç†ä¸Šä¼ çš„æ•°æ®<br><img src="/2020/04/13/javaweb-05/1.png" alt></p><p>å¯¼å…¥ä¸¤ä¸ªç¬¬ä¸‰æ–¹çš„jaråŒ…ï¼š<br><img src="/2020/04/13/javaweb-05/2.png" alt></p><p>å¤„ç†æ–‡ä»¶ä¸Šä¼ çš„servletç¨‹åºï¼š</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> servlet<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UploadServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// System.out.println("æ–‡ä»¶ä¸Šä¼ è¿‡æ¥äº†");</span>        <span class="token comment" spellcheck="true">// 1.å…ˆåˆ¤æ–­ä¸Šä¼ çš„æ•°æ®æ˜¯å¦ä¸ºå¤šæ®µæ•°æ®(æ–‡ä»¶ä¸Šä¼ )</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>ServletFileUpload<span class="token punctuation">.</span><span class="token function">isMultipartContent</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 2.åˆ›å»ºFileItemFactoryå·¥å‚å®ç°ç±»</span>            FileItemFactory fileItemFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DiskFileItemFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 3.åˆ›å»ºç”¨äºè§£æä¸Šä¼ æ•°æ®çš„å·¥å…·ç±»ServletFileUploadç±»</span>            ServletFileUpload servletFileUpload <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServletFileUpload</span><span class="token punctuation">(</span>fileItemFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// 4.è§£æä¸Šä¼ æ•°æ®ï¼Œå¾—åˆ°æ¯ä¸€ä¸ªè¡¨å•é¡¹FileItem</span>                List<span class="token operator">&lt;</span>FileItem<span class="token operator">></span> list <span class="token operator">=</span> servletFileUpload<span class="token punctuation">.</span><span class="token function">parseRequest</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// 5.å¾ªç¯åˆ¤æ–­æ¯ä¸€ä¸ªè¡¨å•é¡¹æ˜¯æ™®é€šç±»å‹ï¼Œè¿˜æ˜¯æ–‡ä»¶ç±»å‹</span>                <span class="token keyword">for</span><span class="token punctuation">(</span>FileItem fileItem <span class="token operator">:</span> list<span class="token punctuation">)</span><span class="token punctuation">{</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>fileItem<span class="token punctuation">.</span><span class="token function">isFormField</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                        <span class="token comment" spellcheck="true">// æ™®é€šè¡¨å•é¡¹</span>                        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¡¨å•é¡¹çš„nameå±æ€§å€¼ï¼š"</span><span class="token operator">+</span>fileItem<span class="token punctuation">.</span><span class="token function">getFieldName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¡¨å•é¡¹çš„valueå±æ€§å€¼"</span><span class="token operator">+</span>fileItem<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                        <span class="token comment" spellcheck="true">// æ–‡ä»¶è¡¨å•é¡¹</span>                        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¡¨å•é¡¹çš„nameå±æ€§å€¼ï¼š"</span><span class="token operator">+</span>fileItem<span class="token punctuation">.</span><span class="token function">getFieldName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¸Šä¼ çš„æ–‡ä»¶åï¼š"</span><span class="token operator">+</span>fileItem<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        fileItem<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"d://"</span><span class="token operator">+</span>fileItem<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">page</span> <span class="token attr-name">contentType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/html;charset<span class="token punctuation">=</span>UTF-8<span class="token punctuation">"</span></span> <span class="token attr-name">language</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>java<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://localhost:8080/07_jsp/uploadServlet<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        ç”¨æˆ·åï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>        å¤´åƒï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>photo<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ä¸Šä¼ <span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="æ–‡ä»¶ä¸‹è½½"><a href="#æ–‡ä»¶ä¸‹è½½" class="headerlink" title="æ–‡ä»¶ä¸‹è½½"></a>æ–‡ä»¶ä¸‹è½½</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> servlet<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DownloadServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 1.è·å–è¦ä¸‹è½½çš„æ–‡ä»¶å</span>        String downloadFileName <span class="token operator">=</span> <span class="token string">"cat.jpg"</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 2.é€šè¿‡servletContextå¯¹è±¡ è¯»å–è¦ä¸‹è½½çš„æ–‡ä»¶å†…å®¹</span>        ServletContext servletContext <span class="token operator">=</span> <span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        InputStream resourceAsStream <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"/file/"</span> <span class="token operator">+</span> downloadFileName<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è·å–å“åº”è¾“å‡ºæµ</span>        OutputStream outputStream <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 3.åœ¨å›ä¼ å‰é€šè¿‡å“åº”å¤´å‘Šè¯‰å®¢æˆ·ç«¯è¿”å›çš„æ•°æ®ç±»å‹</span>        String mimeType <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">getMimeType</span><span class="token punctuation">(</span><span class="token string">"/file/"</span> <span class="token operator">+</span> downloadFileName<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¸‹è½½çš„æ–‡ä»¶ç±»å‹ï¼š"</span> <span class="token operator">+</span> mimeType<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 4.ä»¥åŠå‘Šè¯‰å®¢æˆ·ç«¯æ”¶åˆ°çš„æ•°æ®æ˜¯ç”¨äºä¸‹è½½ä½¿ç”¨çš„</span>        <span class="token comment" spellcheck="true">// åˆ¤æ–­æµè§ˆå™¨ç±»å‹</span>        String ua <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"User-Agent"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String str<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ¤æ–­æ˜¯å¦æ˜¯ç«ç‹æµè§ˆå™¨</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>ua<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"Firefox"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// ä½¿ç”¨ä¸‹é¢çš„æ ¼å¼è¿›è¡ŒBASE64 ç¼–ç å</span>            str <span class="token operator">=</span> <span class="token string">"=?utf-8?B?"</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">BASE64Encoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">"ä¸­æ–‡.jpg"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"?="</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// æŠŠä¸­æ–‡åè¿›è¡ŒUTF-8 ç¼–ç æ“ä½œ</span>            str <span class="token operator">=</span> URLEncoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">"ä¸­æ–‡.jpg"</span><span class="token punctuation">,</span> <span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// Content-Dispositionå“åº”å¤´ï¼Œè¡¨ç¤ºæ”¶åˆ°çš„æ•°æ®è¯¥æ€ä¹ˆå¤„ç†</span>        <span class="token comment" spellcheck="true">// attachment é™„ä»¶ï¼Œè¡¨ç¤ºä¸‹è½½ä½¿ç”¨</span>        <span class="token comment" spellcheck="true">// filename è¡¨ç¤ºæŒ‡å®šä¸‹è½½çš„æ–‡ä»¶å</span>        resp<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Disposition"</span><span class="token punctuation">,</span> <span class="token string">"attachment;fileName="</span> <span class="token operator">+</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 5.æŠŠè¦ä¸‹è½½çš„æ–‡ä»¶å†…å®¹å›ä¼ ç»™å®¢æˆ·ç«¯</span>        <span class="token comment" spellcheck="true">//  è¯»å–è¾“å…¥æµä¸­çš„å…¨éƒ¨æ•°æ®ï¼Œå¤åˆ¶ç»™è¾“å‡ºæµï¼Œè¾“å‡ºç»™å®¢æˆ·ç«¯</span>        IOUtils<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>resourceAsStream<span class="token punctuation">,</span> outputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaWeb </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaWeb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ELè¡¨è¾¾å¼ï¼ŒJSTLæ ‡ç­¾åº“</title>
      <link href="2020/04/12/javaweb-04/"/>
      <url>2020/04/12/javaweb-04/</url>
      
        <content type="html"><![CDATA[<h2 id="ELè¡¨è¾¾å¼"><a href="#ELè¡¨è¾¾å¼" class="headerlink" title="ELè¡¨è¾¾å¼"></a>ELè¡¨è¾¾å¼</h2><p>Express Languageï¼šè¡¨è¾¾å¼è¯­è¨€ã€‚<br>ä½œç”¨ï¼šä»£æ›¿jspé¡µé¢ä¸­çš„è¡¨è¾¾å¼è„šæœ¬åœ¨jspé¡µé¢ä¸­è¿›è¡Œæ•°æ®çš„è¾“å‡ºã€‚</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%</span>        <span class="token attr-name">request.setAttribute("key","value");</span>    <span class="token attr-name">%</span><span class="token punctuation">></span></span>    jspè¡¨è¾¾å¼è¾“å‡ºkeyçš„å€¼ï¼š&lt;%=    request.getAttribute("key")==null?"":request.getAttribute("key")    %><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>    ELè¡¨è¾¾å¼è¾“å‡ºkeyçš„å€¼ï¼š${key}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></code></pre><p>æ ¼å¼ï¼š<code>${è¡¨è¾¾å¼}</code><br>ELè¡¨è¾¾å¼åœ¨è¾“å‡ºç©ºå€¼çš„æ—¶å€™ï¼Œè¾“å‡ºçš„æ˜¯ç©ºä¸²ï¼Œè€Œjspè¡¨è¾¾å¼è¾“å‡ºçš„æ˜¯nullå­—ç¬¦ä¸²ã€‚</p><h2 id="è¿ç®—"><a href="#è¿ç®—" class="headerlink" title="è¿ç®—"></a>è¿ç®—</h2><p>å…³ç³»è¿ç®—</p><p>é€»è¾‘è¿ç®—</p><p>ç®—æ•°è¿ç®—<br>emptyè¿ç®—ï¼šåˆ¤æ–­ä¸€ä¸ªæ•°æ®æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºè¾“å‡ºtruemï¼Œå¦åˆ™è¾“å‡ºfalse<br>ä¸‰å…ƒè¿ç®—<br>â€œ.â€ç‚¹è¿ç®—å’Œ[] ä¸­æ‹¬å·è¿ç®—ç¬¦</p><h2 id="ELè¡¨è¾¾å¼ä¸­çš„11ä¸ªéšå«å¯¹è±¡"><a href="#ELè¡¨è¾¾å¼ä¸­çš„11ä¸ªéšå«å¯¹è±¡" class="headerlink" title="ELè¡¨è¾¾å¼ä¸­çš„11ä¸ªéšå«å¯¹è±¡"></a>ELè¡¨è¾¾å¼ä¸­çš„11ä¸ªéšå«å¯¹è±¡</h2><p><img src="/2020/04/12/javaweb-04/1.png" alt></p><p>pageContextå¯¹è±¡çš„ä½¿ç”¨ï¼š</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">page</span> <span class="token attr-name">contentType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/html;charset<span class="token punctuation">=</span>UTF-8<span class="token punctuation">"</span></span> <span class="token attr-name">language</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>java<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">jspè¡¨è¾¾å¼</span><span class="token attr-name">request.getScheme()</span> <span class="token attr-name">å®ƒå¯ä»¥è·å–è¯·æ±‚çš„åè®®</span><span class="token attr-name">request.getServerName()</span> <span class="token attr-name">è·å–è¯·æ±‚çš„æœåŠ¡å™¨ip</span> <span class="token attr-name">æˆ–åŸŸå</span><span class="token attr-name">request.getServerPort()</span> <span class="token attr-name">è·å–è¯·æ±‚çš„æœåŠ¡å™¨ç«¯å£å·</span><span class="token attr-name">request.getContextPath()</span> <span class="token attr-name">è·å–å½“å‰å·¥ç¨‹è·¯å¾„</span><span class="token attr-name">request.getMethod()</span> <span class="token attr-name">è·å–è¯·æ±‚çš„æ–¹å¼ï¼ˆGET</span> <span class="token attr-name">æˆ–POSTï¼‰</span><span class="token attr-name">request.getRemoteHost()</span> <span class="token attr-name">è·å–å®¢æˆ·ç«¯çš„ip</span> <span class="token attr-name">åœ°å€</span><span class="token attr-name">session.getId()</span> <span class="token attr-name">è·å–ä¼šè¯çš„å”¯ä¸€æ ‡è¯†</span><span class="token attr-name">--%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">ELè¡¨è¾¾å¼--%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%</span>    <span class="token attr-name">pageContext.setAttribute("req",</span> <span class="token attr-name">request);</span><span class="token attr-name">%</span><span class="token punctuation">></span></span>1. åè®®ï¼š${req.scheme}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>2. æœåŠ¡å™¨ipï¼š${pageContext.request.serverName}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>3. æœåŠ¡å™¨ç«¯å£ï¼š${pageContext.request.serverPort}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>4. è·å–å·¥ç¨‹è·¯å¾„ï¼š${pageContext.request.contextPath}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>5. è·å–è¯·æ±‚æ–¹æ³•ï¼š${pageContext.request.method}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>6. è·å–å®¢æˆ·ç«¯ip åœ°å€ï¼š${pageContext.request.remoteHost}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>7. è·å–ä¼šè¯çš„id ç¼–å·ï¼š${pageContext.session.id}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="JSTLæ ‡ç­¾åº“"><a href="#JSTLæ ‡ç­¾åº“" class="headerlink" title="JSTLæ ‡ç­¾åº“"></a>JSTLæ ‡ç­¾åº“</h2><p>ELè¡¨è¾¾å¼æ˜¯ä¸ºäº†æ›¿æ¢jspä¸­çš„è¡¨è¾¾å¼ï¼Œè€Œæ ‡ç­¾åº“æ˜¯ä¸ºäº†æ›¿æ¢jspä¸­çš„ä»£ç è„šæœ¬ã€‚<br><img src="/2020/04/12/javaweb-04/2.png" alt></p><p>åœ¨jsp æ ‡ç­¾åº“ä¸­ä½¿ç”¨taglib æŒ‡ä»¤å¼•å…¥æ ‡ç­¾åº“</p><pre class=" language-html"><code class="language-html">CORE æ ‡ç­¾åº“<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">taglib</span> <span class="token attr-name">prefix</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>c<span class="token punctuation">"</span></span> <span class="token attr-name">uri</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://java.sun.com/jsp/jstl/core<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span>FMT æ ‡ç­¾åº“<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">taglib</span> <span class="token attr-name">prefix</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fmt<span class="token punctuation">"</span></span> <span class="token attr-name">uri</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://java.sun.com/jsp/jstl/fmt<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span>FUNCTIONS æ ‡ç­¾åº“<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">taglib</span> <span class="token attr-name">prefix</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fn<span class="token punctuation">"</span></span> <span class="token attr-name">uri</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://java.sun.com/jsp/jstl/functions<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span></code></pre><h3 id="coreæ ¸å¿ƒåº“ä½¿ç”¨"><a href="#coreæ ¸å¿ƒåº“ä½¿ç”¨" class="headerlink" title="coreæ ¸å¿ƒåº“ä½¿ç”¨"></a>coreæ ¸å¿ƒåº“ä½¿ç”¨</h3><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">page</span> <span class="token attr-name">import</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>java.util.HashMap<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">page</span> <span class="token attr-name">import</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>java.util.Map<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">page</span> <span class="token attr-name">import</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bean.Student<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">page</span> <span class="token attr-name">import</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>java.util.List<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">page</span> <span class="token attr-name">import</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>java.lang.reflect.Array<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">page</span> <span class="token attr-name">import</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>java.util.ArrayList<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">taglib</span> <span class="token attr-name">prefix</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>c<span class="token punctuation">"</span></span> <span class="token attr-name">uri</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://java.sun.com/jsp/jstl/core<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">page</span> <span class="token attr-name">contentType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/html;charset<span class="token punctuation">=</span>UTF-8<span class="token punctuation">"</span></span> <span class="token attr-name">language</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>java<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">ifåˆ¤æ–­</span> <span class="token attr-name">--%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${1<span class="token punctuation">=</span><span class="token punctuation">=</span>1}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>1==1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">å¤šè·¯åˆ¤æ–­--%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>choose</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>when</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>when</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>otherwise</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>otherwise</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>choose</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">foreachéå†è¾“å‡º--%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">begin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">end</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>i<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    ${i}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--éå†æ•°ç»„--%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%</span>    <span class="token attr-name">request.setAttribute("arr",new</span> <span class="token attr-name">String[]{"Tom","Taylor","Troye"});</span><span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">items</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.arr}<span class="token punctuation">"</span></span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    ${item}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">éå†Map--%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%</span>    <span class="token attr-name">Map&lt;String,String</span><span class="token punctuation">></span></span> map = new HashMap<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>String,String</span><span class="token punctuation">></span></span>();    map.put("key1","value1");    map.put("key2","value2");    map.put("key3","value3");//    for(Map.Entry<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>String,String</span><span class="token punctuation">></span></span> entry:map.entrySet()){////    }    request.setAttribute("map",map);%><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">items</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.map}<span class="token punctuation">"</span></span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>entry<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    é”®ï¼š${entry.key}    å€¼ï¼š${entry.value}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">éå†List--%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%</span>    <span class="token attr-name">List&lt;Student</span><span class="token punctuation">></span></span> stuList = new ArrayList<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Student</span><span class="token punctuation">></span></span>();    for (int i = 0; i &lt; 5; i++) {        stuList.add(new Student(i,"username"+i,"password"+i, 18+i));    }    request.setAttribute("students",stuList);%><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>500px<span class="token punctuation">"</span></span> <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1px solid black<span class="token punctuation">"</span></span> <span class="token attr-name">cellspacing</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>ç¼–å·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>ç”¨æˆ·å<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>å¯†ç <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>å¹´é¾„<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>çŠ¶æ€ä¿¡æ¯<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">items</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.students}<span class="token punctuation">"</span></span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stu<span class="token punctuation">"</span></span> <span class="token attr-name">varStatus</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>status<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${stu.id}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${stu.username}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${stu.password}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${stu.age}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${status.count}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaWeb </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaWeb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jsp,Listenerç›‘å¬å™¨</title>
      <link href="2020/04/11/javaweb-03/"/>
      <url>2020/04/11/javaweb-03/</url>
      
        <content type="html"><![CDATA[<h2 id="jspå®šä¹‰"><a href="#jspå®šä¹‰" class="headerlink" title="jspå®šä¹‰"></a>jspå®šä¹‰</h2><p>jspå…¨ç§°ä¸º java server pageï¼Œç”¨æ¥ä»£æ›¿servletç¨‹åºå›ä¼ htmlé¡µé¢çš„æ•°æ®ã€‚</p><p><strong>jspé¡µé¢çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªServletç¨‹åº</strong>ï¼Œåœ¨ç¬¬ä¸€æ¬¡è®¿é—®jspé¡µé¢æ—¶ï¼ŒTomcatæœåŠ¡å™¨å°±ä¼šæŠŠjspé¡µé¢ç¿»è¯‘æˆä¸€ä¸ªjavaæºç¨‹åºï¼Œå¹¶å¯¹å®ƒè¿›è¡Œç¼–è¯‘æˆ.classå­—èŠ‚ç æ–‡ä»¶ã€‚</p><h2 id="jspè¯­æ³•"><a href="#jspè¯­æ³•" class="headerlink" title="jspè¯­æ³•"></a>jspè¯­æ³•</h2><h3 id="jspå¤´éƒ¨çš„pageæŒ‡ä»¤"><a href="#jspå¤´éƒ¨çš„pageæŒ‡ä»¤" class="headerlink" title="jspå¤´éƒ¨çš„pageæŒ‡ä»¤"></a>jspå¤´éƒ¨çš„pageæŒ‡ä»¤</h3><p>jsp çš„page æŒ‡ä»¤å¯ä»¥ä¿®æ”¹jsp é¡µé¢ä¸­ä¸€äº›é‡è¦çš„å±æ€§ï¼Œæˆ–è€…è¡Œä¸ºã€‚</p><pre class=" language-jsp"><code class="language-jsp"><%@ page contentType="text/html;charset=UTF-8" language="java" %></code></pre><p>i. language å±æ€§è¡¨ç¤ºjsp ç¿»è¯‘åæ˜¯ä»€ä¹ˆè¯­è¨€æ–‡ä»¶ã€‚æš‚æ—¶åªæ”¯æŒjavaã€‚<br>ii. contentType å±æ€§è¡¨ç¤ºjsp è¿”å›çš„æ•°æ®ç±»å‹æ˜¯ä»€ä¹ˆã€‚ä¹Ÿæ˜¯æºç ä¸­response.setContentType()å‚æ•°å€¼<br>iii. pageEncoding å±æ€§è¡¨ç¤ºå½“å‰jsp é¡µé¢æ–‡ä»¶æœ¬èº«çš„å­—ç¬¦é›†ã€‚<br>iv. import å±æ€§è·Ÿjava æºä»£ç ä¸­ä¸€æ ·ã€‚ç”¨äºå¯¼åŒ…ï¼Œå¯¼ç±»ã€‚<br>v. autoFlush å±æ€§è®¾ç½®å½“out è¾“å‡ºæµç¼“å†²åŒºæ»¡äº†ä¹‹åï¼Œæ˜¯å¦è‡ªåŠ¨åˆ·æ–°å†²çº§åŒºã€‚é»˜è®¤å€¼æ˜¯trueã€‚<br>vi. buffer å±æ€§è®¾ç½®out ç¼“å†²åŒºçš„å¤§å°ã€‚é»˜è®¤æ˜¯8kb<br>vii. errorPage å±æ€§è®¾ç½®å½“jsp é¡µé¢è¿è¡Œæ—¶å‡ºé”™ï¼Œè‡ªåŠ¨è·³è½¬å»çš„é”™è¯¯é¡µé¢è·¯å¾„ã€‚</p><h3 id="jspä¸­çš„å¸¸ç”¨è„šæœ¬"><a href="#jspä¸­çš„å¸¸ç”¨è„šæœ¬" class="headerlink" title="jspä¸­çš„å¸¸ç”¨è„šæœ¬"></a>jspä¸­çš„å¸¸ç”¨è„šæœ¬</h3><p>1ã€å£°æ˜è„šæœ¬<br>ä½œç”¨ï¼šå¯ä»¥ç»™jsp ç¿»è¯‘å‡ºæ¥çš„java ç±»å®šä¹‰å±æ€§å’Œæ–¹æ³•ç”šè‡³æ˜¯é™æ€ä»£ç å—ï¼Œå†…éƒ¨ç±»ç­‰ã€‚<br>æ ¼å¼ï¼š<code>&lt;%!  javaä»£ç %&gt;</code></p><p>2ã€è¡¨è¾¾å¼è„šæœ¬<br>ä½œç”¨ï¼šåœ¨jspé¡µé¢ä¸Šè¾“å‡ºæ•°æ®<br>æ ¼å¼ï¼š<code>&lt;%= è¡¨è¾¾å¼ %&gt;</code></p><p>3ã€ä»£ç è„šæœ¬<br>ä½œç”¨ï¼šå¯ä»¥åœ¨jspé¡µé¢ä¸­ï¼Œç¼–å†™æˆ‘ä»¬éœ€è¦çš„åŠŸèƒ½(javaä»£ç )<br>æ ¼å¼ï¼š<code>&lt;% javaä»£ç  %&gt;</code></p><h2 id="jspä¹å¤§å†…ç½®å¯¹è±¡"><a href="#jspä¹å¤§å†…ç½®å¯¹è±¡" class="headerlink" title="jspä¹å¤§å†…ç½®å¯¹è±¡"></a>jspä¹å¤§å†…ç½®å¯¹è±¡</h2><p>jspåœ¨ç¿»è¯‘æˆservletä»£ç åå†…éƒ¨æä¾›çš„ä¹ä¸ªå¯¹è±¡ã€‚<br>request&nbsp;&nbsp;&nbsp;è¯·æ±‚å¯¹è±¡<br>response&nbsp;&nbsp;&nbsp;å“åº”å¯¹è±¡<br>pageContext&nbsp;&nbsp;&nbsp;jspä¸Šä¸‹æ–‡å¯¹è±¡<br>session&nbsp;&nbsp;&nbsp;ä¼šè¯å¯¹è±¡<br>application&nbsp;&nbsp;&nbsp;ServletContextå¯¹è±¡<br>config&nbsp;&nbsp;&nbsp;ServletConfigå¯¹è±¡<br>page&nbsp;&nbsp;&nbsp;å½“å‰çš„jspå¯¹è±¡<br>exception&nbsp;&nbsp;&nbsp;å¼‚å¸¸å¯¹è±¡<br>out å‘å®¢æˆ·ç«¯è¾“å‡ºå†…å®¹å¸¸ç”¨çš„å¯¹è±¡</p><p><strong>å››ä¸ªåŸŸå¯¹è±¡ï¼š</strong><br>page&nbsp;&nbsp;&nbsp;&nbsp;(PageContextImplç±»)&nbsp;&nbsp;&nbsp;&nbsp;å½“å‰çš„jspé¡µé¢æœ‰æ•ˆ<br>request&nbsp;&nbsp;&nbsp;&nbsp;(HttpServletRequestç±»)&nbsp;&nbsp;&nbsp;&nbsp;ä¸€æ¬¡è¯·æ±‚æœ‰æ•ˆ<br>session&nbsp;&nbsp;&nbsp;&nbsp;(HttpSessionç±»)&nbsp;&nbsp;&nbsp;&nbsp;ä¸€æ¬¡ä¼šè¯èŒƒå›´å†…æœ‰æ•ˆ(æ‰“å¼€æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨ï¼Œç›´åˆ°å…³é—­æµè§ˆå™¨)<br>application&nbsp;&nbsp;&nbsp;&nbsp;(ServletContextç±»)&nbsp;&nbsp;&nbsp;&nbsp;æ•´ä¸ªwebå·¥ç¨‹èŒƒå›´å†…éƒ½æœ‰æ•ˆ(åªè¦webå·¥ç¨‹ä¸åœæ­¢ï¼Œæ•°æ®ä¸€ç›´éƒ½åœ¨)<br>åŸŸå¯¹è±¡æ˜¯å¯ä»¥åƒMapä¸€æ ·å­˜å–æ•°æ®çš„å¯¹è±¡ã€‚å››ä¸ªåŸŸå¯¹è±¡çš„åŠŸèƒ½ä¸€æ ·ï¼Œä¸åŒçš„æ˜¯å®ƒä»¬å¯¹æ•°æ®çš„å­˜å–èŒƒå›´ã€‚</p><p><strong>jspä¸­çš„outè¾“å‡ºä¸response.getWriter()è¾“å‡ºçš„åŒºåˆ«ï¼š</strong><br><img src="/2020/04/11/javaweb-03/1.png" alt></p><p><font color="red">ç»Ÿä¸€ä½¿ç”¨out.print()è¾“å‡º</font></p><h2 id="jspå¸¸ç”¨æ ‡ç­¾"><a href="#jspå¸¸ç”¨æ ‡ç­¾" class="headerlink" title="jspå¸¸ç”¨æ ‡ç­¾"></a>jspå¸¸ç”¨æ ‡ç­¾</h2><h3 id="é™æ€åŒ…å«"><a href="#é™æ€åŒ…å«" class="headerlink" title="é™æ€åŒ…å«"></a>é™æ€åŒ…å«</h3><p>æ ¼å¼ï¼š<code>&lt;%@ include file=&quot;/&quot;%&gt;</code><br>fileå±æ€§æŒ‡å®šè¦åŒ…å«çš„é¡µé¢è·¯å¾„<br>é™æ€åŒ…å«çš„ç‰¹ç‚¹ï¼š<br>1ã€é™æ€åŒ…å«ä¸ä¼šç¿»è¯‘è¢«åŒ…å«çš„jsp é¡µé¢ã€‚<br>2ã€é™æ€åŒ…å«å…¶å®æ˜¯æŠŠè¢«åŒ…å«çš„jsp é¡µé¢çš„ä»£ç æ‹·è´åˆ°åŒ…å«çš„ä½ç½®æ‰§è¡Œè¾“å‡ºã€‚</p><h3 id="åŠ¨æ€åŒ…å«"><a href="#åŠ¨æ€åŒ…å«" class="headerlink" title="åŠ¨æ€åŒ…å«"></a>åŠ¨æ€åŒ…å«</h3><p>æ ¼å¼ï¼š<code>&lt;jsp:include page=&quot;/&quot;&gt;&lt;/jsp:include&gt;</code><br>åŠ¨æ€åŒ…å«ç‰¹ç‚¹ï¼š<br>1ã€åŠ¨æ€åŒ…å«ä¼šæŠŠåŒ…å«çš„jspé¡µé¢ä¹Ÿç¿»è¯‘æˆjavaä»£ç ã€‚<br>2ã€é€šè¿‡è°ƒç”¨è¢«åŒ…å«çš„jspé¡µé¢è¿›è¡Œè¾“å‡ºã€‚<br>3ã€åŠ¨æ€åŒ…å«å¯ä»¥ä¼ é€’å‚æ•°ã€‚</p><h3 id="è½¬å‘"><a href="#è½¬å‘" class="headerlink" title="è½¬å‘"></a>è½¬å‘</h3><p>æ ¼å¼ï¼š<code>&lt;jsp:forward page=&quot;/&quot;&gt;&lt;/jsp:forward&gt;</code></p><h2 id="Listenerç›‘å¬å™¨"><a href="#Listenerç›‘å¬å™¨" class="headerlink" title="Listenerç›‘å¬å™¨"></a>Listenerç›‘å¬å™¨</h2><p>1ã€Listener ç›‘å¬å™¨æ˜¯javawebä¸‰å¤§ç»„ä»¶ä¹‹ä¸€(Servletç¨‹åºï¼ŒFilterè¿‡æ»¤å™¨ï¼ŒListenerç›‘å¬å™¨)ã€‚<br>2ã€Listeneræ˜¯javaEEæ¥å£è§„èŒƒï¼Œå°±æ˜¯æ¥å£ã€‚<br>3ã€ç›‘å¬å™¨çš„ä½œç”¨æ˜¯ï¼Œç›‘å¬æŸç§äº‹ç‰©çš„å˜åŒ–ã€‚ç„¶åé€šè¿‡å›è°ƒå‡½æ•°ï¼Œåé¦ˆç»™å®¢æˆ·ï¼ˆç¨‹åºï¼‰å»åšä¸€äº›ç›¸åº”çš„å¤„ç†ã€‚ServletContextListener å®ƒå¯ä»¥ç›‘å¬ServletContext å¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯ã€‚<br>ServletContext å¯¹è±¡åœ¨web å·¥ç¨‹å¯åŠ¨çš„æ—¶å€™åˆ›å»ºï¼Œåœ¨web å·¥ç¨‹åœæ­¢çš„æ—¶å€™é”€æ¯ã€‚<br>ç›‘å¬åˆ°åˆ›å»ºå’Œé”€æ¯ä¹‹åéƒ½ä¼šåˆ†åˆ«è°ƒç”¨ServletContextListener ç›‘å¬å™¨çš„æ–¹æ³•åé¦ˆã€‚</p><p>ä½¿ç”¨ServletContextListener ç›‘å¬å™¨ç›‘å¬ServletContext å¯¹è±¡æ­¥éª¤å¦‚ä¸‹ï¼š<br>1ã€ç¼–å†™ä¸€ä¸ªç±»å»å®ç°ServletContextListener<br>2ã€å®ç°å…¶ä¸¤ä¸ªå›è°ƒæ–¹æ³•<br>3ã€åˆ°web.xml ä¸­å»é…ç½®ç›‘å¬å™¨</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> listener<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServletContextListenerImpl</span> <span class="token keyword">implements</span> <span class="token class-name">ServletContextListener</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">contextInitialized</span><span class="token punctuation">(</span>ServletContextEvent sce<span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åˆ›å»ºServletContext"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">contextDestroyed</span><span class="token punctuation">(</span>ServletContextEvent sce<span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"é”€æ¯ServletContext"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://xmlns.jcp.org/xml/ns/javaee<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd<span class="token punctuation">"</span></span>         <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>4.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener-class</span><span class="token punctuation">></span></span>listener.ServletContextListenerImpl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener-class</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaWeb </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaWeb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¹¦åŸé¡¹ç›®</title>
      <link href="2020/04/08/javaweb-02/"/>
      <url>2020/04/08/javaweb-02/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€åˆ›å»ºé¡¹ç›®æ‰€éœ€è¦çš„åŒ…"><a href="#ä¸€ã€åˆ›å»ºé¡¹ç›®æ‰€éœ€è¦çš„åŒ…" class="headerlink" title="ä¸€ã€åˆ›å»ºé¡¹ç›®æ‰€éœ€è¦çš„åŒ…"></a>ä¸€ã€åˆ›å»ºé¡¹ç›®æ‰€éœ€è¦çš„åŒ…</h2><p>å„ä¸ªå±‚æ‰€å¯¹åº”çš„åŒ…åï¼š<br>webå±‚ï¼š<br>com.bookmall.web/servlet/controller<br>serviceå±‚ï¼š<br>com.bookmall.service&nbsp;&nbsp;&nbsp;Serviceæ¥å£åŒ…<br>com.bookmall.service.impl&nbsp;&nbsp;&nbsp;Serviceæ¥å£å®ç°ç±»<br>daoå±‚ï¼š<br>com.bookmall.dao&nbsp;&nbsp;&nbsp;Daoæ¥å£åŒ…<br>com.bookmall.dao.impl&nbsp;&nbsp;&nbsp;Daoæ¥å£å®ç°ç±»<br>å®ä½“beanå¯¹è±¡ï¼š<br>com.bookmall.pojo/entity/domain/bean&nbsp;&nbsp;&nbsp;JavaBeanç±»<br>æµ‹è¯•åŒ…ï¼š<br>com.bookmall.test/junit<br>å·¥å…·åŒ…ï¼š<br>com.bookmall.utils<br><img src="/2020/04/08/javaweb-02/1.png" alt></p><h2 id="äºŒã€åˆ›å»ºéœ€è¦çš„æ•°æ®åº“å’Œè¡¨"><a href="#äºŒã€åˆ›å»ºéœ€è¦çš„æ•°æ®åº“å’Œè¡¨" class="headerlink" title="äºŒã€åˆ›å»ºéœ€è¦çš„æ•°æ®åº“å’Œè¡¨"></a>äºŒã€åˆ›å»ºéœ€è¦çš„æ•°æ®åº“å’Œè¡¨</h2><pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> bookmall<span class="token punctuation">;</span><span class="token keyword">USE</span> bookmall<span class="token punctuation">;</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> userinfo<span class="token punctuation">(</span>     <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>     <span class="token punctuation">`</span>username<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>     <span class="token punctuation">`</span>password<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    <span class="token punctuation">`</span>email<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">INSERT</span>  <span class="token keyword">INTO</span> userinfo<span class="token punctuation">(</span><span class="token punctuation">`</span>username<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>password<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>email<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'admin'</span><span class="token punctuation">,</span><span class="token string">'123456'</span><span class="token punctuation">,</span><span class="token string">'admin@qq.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> userinfo<span class="token punctuation">;</span></code></pre><h2 id="ä¸‰ã€ç¼–å†™æ•°æ®åº“è¡¨å¯¹åº”çš„-JavaBean-å¯¹è±¡"><a href="#ä¸‰ã€ç¼–å†™æ•°æ®åº“è¡¨å¯¹åº”çš„-JavaBean-å¯¹è±¡" class="headerlink" title="ä¸‰ã€ç¼–å†™æ•°æ®åº“è¡¨å¯¹åº”çš„ JavaBean å¯¹è±¡"></a>ä¸‰ã€ç¼–å†™æ•°æ®åº“è¡¨å¯¹åº”çš„ JavaBean å¯¹è±¡</h2><p>åœ¨com.bookmall.beanåŒ…ä¸‹åˆ›å»ºUserç±»</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>bookmall<span class="token punctuation">.</span>bean<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> Integer id<span class="token punctuation">;</span>    <span class="token keyword">private</span> String username<span class="token punctuation">;</span>    <span class="token keyword">private</span> String password<span class="token punctuation">;</span>    <span class="token keyword">private</span> String email<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">User</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">,</span> String username<span class="token punctuation">,</span> String password<span class="token punctuation">,</span> String email<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>username <span class="token operator">=</span> username<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>password <span class="token operator">=</span> password<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>email <span class="token operator">=</span> email<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Integer <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> username<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUsername</span><span class="token punctuation">(</span>String username<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>username <span class="token operator">=</span> username<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> password<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPassword</span><span class="token punctuation">(</span>String password<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>password <span class="token operator">=</span> password<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> email<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEmail</span><span class="token punctuation">(</span>String email<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>email <span class="token operator">=</span> email<span class="token punctuation">;</span>    <span class="token punctuation">}</span>     <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"User{"</span> <span class="token operator">+</span>                <span class="token string">"id="</span> <span class="token operator">+</span> id <span class="token operator">+</span>                <span class="token string">", username='"</span> <span class="token operator">+</span> username <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">", password='"</span> <span class="token operator">+</span> password <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">", email='"</span> <span class="token operator">+</span> email <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">'}'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="å››ã€ç¼–å†™å·¥å…·ç±»JdbcUtilså¹¶æµ‹è¯•"><a href="#å››ã€ç¼–å†™å·¥å…·ç±»JdbcUtilså¹¶æµ‹è¯•" class="headerlink" title="å››ã€ç¼–å†™å·¥å…·ç±»JdbcUtilså¹¶æµ‹è¯•"></a>å››ã€ç¼–å†™å·¥å…·ç±»JdbcUtilså¹¶æµ‹è¯•</h2><p>1.é¦–å…ˆå¯¼å…¥æ‰€éœ€è¦çš„jaråŒ…ï¼š<br><img src="/2020/04/08/javaweb-02/2.png" alt></p><p>2.åœ¨srcç›®å½•ä¸‹åˆ›å»ºjdbc.properties é…ç½®æ–‡ä»¶ï¼š</p><pre class=" language-properties"><code class="language-properties"><span class="token attr-name">username</span><span class="token punctuation">=</span><span class="token attr-value">root</span><span class="token attr-name">password</span><span class="token punctuation">=</span><span class="token attr-value">2824199842</span><span class="token attr-name">url</span><span class="token punctuation">=</span><span class="token attr-value">jdbc:mysql://localhost:3306/bookmall?serverTimezone=Asia/Shanghai</span><span class="token attr-name">driverClassName</span><span class="token punctuation">=</span><span class="token attr-value">com.mysql.cj.jdbc.Driver</span><span class="token attr-name">initialSize</span><span class="token punctuation">=</span><span class="token attr-value">10</span><span class="token attr-name">maxActive</span><span class="token punctuation">=</span><span class="token attr-value">10</span></code></pre><p>3.åœ¨com.bookmall.utilsä¸‹åˆ›å»º JdbcUtils ç±»ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>bookmall<span class="token punctuation">.</span>utils<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JdbcUtils</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> DruidDataSource dataSource<span class="token punctuation">;</span>    <span class="token keyword">static</span><span class="token punctuation">{</span>        Properties properties <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// åˆ›å»ºè¾“å…¥æµ è¯»å–jdbc.propertieså±æ€§é…ç½®æ–‡ä»¶</span>            InputStream inputStream <span class="token operator">=</span> JdbcUtils<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"jdbc.properties"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// ä»æµä¸­åŠ è½½æ•°æ®</span>            properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// åˆ›å»ºæ•°æ®åº“è¿æ¥æ± </span>            dataSource <span class="token operator">=</span> <span class="token punctuation">(</span>DruidDataSource<span class="token punctuation">)</span> DruidDataSourceFactory<span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * è·å–æ•°æ®åº“è¿æ¥æ± ä¸­çš„è¿æ¥     * @return è¿”å›è¿æ¥  å¦åˆ™è¿”å›null     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Connection <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        Connection conn <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            conn <span class="token operator">=</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> conn<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * å…³é—­è¿æ¥ï¼Œæ”¾å›æ•°æ®åº“è¿æ¥æ±      * @param conn     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span>Connection conn<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>conn<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>4.åœ¨com.bookmall.teståŒ…ä¸‹åˆ›å»ºJdbcUtilsTestç±»ï¼Œæµ‹è¯•æ˜¯å¦è¿æ¥æˆåŠŸï¼š</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>bookmall<span class="token punctuation">.</span>test<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JdbcUtilsTest</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testJdbcUtils</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        Connection conn <span class="token operator">=</span> JdbcUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>conn<span class="token punctuation">)</span><span class="token punctuation">;</span>        JdbcUtils<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>conn<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="äº”ã€ç¼–å†™BaseDao"><a href="#äº”ã€ç¼–å†™BaseDao" class="headerlink" title="äº”ã€ç¼–å†™BaseDao"></a>äº”ã€ç¼–å†™BaseDao</h2><p>1.å¯¼å…¥DBUtils çš„jaråŒ…ï¼š<br><img src="/2020/04/08/javaweb-02/4.png" alt></p><p>2.åœ¨com.bookmall.dao.implåŒ…ä¸‹åˆ›å»ºBaseDaoæŠ½è±¡ç±»ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>bookmall<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">BaseDao</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// ä½¿ç”¨dbutilsæ“ä½œæ•°æ®åº“</span>    <span class="token keyword">private</span> QueryRunner queryRunner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryRunner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * æ‰§è¡Œå¢åˆ æ”¹æ–¹æ³•     * @param sql è¦æ‰§è¡Œçš„sqlè¯­å¥     * @param args è¦å¡«å……çš„å ä½ç¬¦     * @return æ‰§è¡ŒæˆåŠŸï¼Œè¿”å›å—å½±å“çš„è¡Œæ•°ï¼Œå¦åˆ™æ‰§è¡Œå¤±è´¥ï¼Œè¿”å›-1     */</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">update</span><span class="token punctuation">(</span>String sql<span class="token punctuation">,</span>Object <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>        Connection conn <span class="token operator">=</span> JdbcUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> queryRunner<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span>sql<span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{</span>            JdbcUtils<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>conn<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * æ‰§è¡Œè¿”å›ä¸€æ¡ç»“æœçš„æŸ¥è¯¢è¯­å¥     * @param type è¿”å›çš„å¯¹è±¡ç±»å‹     * @param sql è¦æ‰§è¡Œçš„sqlè¯­å¥     * @param args è¦å¡«å……çš„å ä½ç¬¦     * @param &lt;T> è¿”å›çš„ç±»å‹çš„æ³›å‹     * @return æ‰§è¡ŒæˆåŠŸï¼Œè¿”å›ä¸€ä¸ªæŒ‡å®šç±»å‹çš„å¯¹è±¡ï¼Œå¦åˆ™æ‰§è¡Œå¤±è´¥ï¼Œè¿”å›null     */</span>    <span class="token keyword">public</span> <span class="token operator">&lt;</span>T<span class="token operator">></span> T <span class="token function">queryForOne</span><span class="token punctuation">(</span>Class<span class="token operator">&lt;</span>T<span class="token operator">></span> type<span class="token punctuation">,</span>String sql<span class="token punctuation">,</span>Object <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>        Connection conn <span class="token operator">=</span> JdbcUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// BeanHandleræ˜¯ResultSetHandleræ¥å£çš„ä¸€ä¸ªå®ç°ç±»ï¼Œç”¨äºå°è£…è¡¨ä¸­çš„ä¸€æ¡è®°å½•</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> queryRunner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span>sql<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">BeanHandler</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{</span>            JdbcUtils<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>conn<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> null<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * æ‰§è¡Œè¿”å›å¤šæ¡ç»“æœçš„æŸ¥è¯¢è¯­å¥     * @param type è¿”å›çš„å¯¹è±¡ç±»å‹     * @param sql è¦æ‰§è¡Œçš„sqlè¯­å¥     * @param args è¦å¡«å……çš„å ä½ç¬¦     * @param &lt;T> è¿”å›çš„ç±»å‹çš„æ³›å‹     * @return æ‰§è¡ŒæˆåŠŸï¼Œè¿”å›ä¸€ä¸ªæŒ‡å®šç±»å‹çš„å¯¹è±¡çš„åˆ—è¡¨ï¼Œå¦åˆ™æ‰§è¡Œå¤±è´¥ï¼Œè¿”å›null     */</span>    <span class="token keyword">public</span> <span class="token operator">&lt;</span>T<span class="token operator">></span> List<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">queryForList</span><span class="token punctuation">(</span>Class<span class="token operator">&lt;</span>T<span class="token operator">></span> type<span class="token punctuation">,</span> String sql<span class="token punctuation">,</span> Object <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>        Connection conn <span class="token operator">=</span> JdbcUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> queryRunner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span>sql<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">BeanListHandler</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{</span>            JdbcUtils<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>conn<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> null<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * æ‰§è¡Œè¿”å›ç‰¹æ®Šå€¼ï¼ˆä¸€è¡Œä¸€åˆ—ï¼‰çš„æŸ¥è¯¢     * @param sql è¦æ‰§è¡Œçš„sqlè¯­å¥     * @param args è¦å¡«å……çš„å ä½ç¬¦     * @return æ‰§è¡ŒæˆåŠŸï¼Œè¿”å›ä¸€ä¸ªå€¼ï¼Œå¦åˆ™æ‰§è¡Œå¤±è´¥ï¼Œè¿”å›null     */</span>    <span class="token keyword">public</span> Object <span class="token function">queryForSingleValue</span><span class="token punctuation">(</span>String sql<span class="token punctuation">,</span> Object <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>        Connection conn <span class="token operator">=</span> JdbcUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ScalarHandlerå°†å•ä¸ªå€¼å°è£…</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> queryRunner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span>sql<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">ScalarHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">finally</span><span class="token punctuation">{</span>            JdbcUtils<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>conn<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> null<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="å…­ã€ç¼–å†™UserDaoæ¥å£å¹¶æµ‹è¯•"><a href="#å…­ã€ç¼–å†™UserDaoæ¥å£å¹¶æµ‹è¯•" class="headerlink" title="å…­ã€ç¼–å†™UserDaoæ¥å£å¹¶æµ‹è¯•"></a>å…­ã€ç¼–å†™UserDaoæ¥å£å¹¶æµ‹è¯•</h2><p>1.åœ¨com.bookmall.daoåŒ…ä¸‹ç¼–å†™UserDao æ¥å£</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>bookmall<span class="token punctuation">.</span>dao<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯     * @param username ç”¨æˆ·å     * @return æ‰§è¡ŒæˆåŠŸï¼Œè¿”å›Userå¯¹è±¡ï¼Œå¦åˆ™è¿”å›null     */</span>    <span class="token keyword">public</span> User <span class="token function">queryUserByUsername</span><span class="token punctuation">(</span>String username<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * ä¿å­˜ç”¨æˆ·ä¿¡æ¯     * @param user Userå¯¹è±¡     * @return æ‰§è¡ŒæˆåŠŸï¼Œè¿”å›å—å½±å“çš„è¡Œæ•°ï¼Œå¦åˆ™è¿”å›-1     */</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">saveUser</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     *æ ¹æ®ç”¨æˆ·åå’Œå¯†ç æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯     * @param username     * @param password     * @return æ‰§è¡ŒæˆåŠŸè¿”å›Userå¯¹è±¡ï¼Œå¦åˆ™è¿”å›nullè¯´æ˜ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯     */</span>    <span class="token keyword">public</span> User <span class="token function">queryUserByUsernameAndPassword</span><span class="token punctuation">(</span>String username<span class="token punctuation">,</span>String password<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>2.åœ¨com.bookmall.daoåŒ…ä¸‹ç¼–å†™UserDaoæ¥å£å®ç°ç±»UserDaoImpl</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>book<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDaoImpl</span> <span class="token keyword">extends</span> <span class="token class-name">BaseDao</span> <span class="token keyword">implements</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> User <span class="token function">queryUserByUsername</span><span class="token punctuation">(</span>String username<span class="token punctuation">)</span> <span class="token punctuation">{</span>        String sql <span class="token operator">=</span> <span class="token string">"select `id`,`username`,`password`,`email` from userinfo where username = ?"</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">queryForOne</span><span class="token punctuation">(</span>User<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> sql<span class="token punctuation">,</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">saveUser</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span> <span class="token punctuation">{</span>        String sql <span class="token operator">=</span> <span class="token string">"insert into userinfo(`username`,`password`,`email`)value(?,?,?)"</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> User <span class="token function">queryUserByUsernameAndPassword</span><span class="token punctuation">(</span>String username<span class="token punctuation">,</span> String password<span class="token punctuation">)</span> <span class="token punctuation">{</span>        String sql <span class="token operator">=</span> <span class="token string">"select `id`,`username`,`password`,`email` from userInfo where username = ? and password = ?"</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">queryForOne</span><span class="token punctuation">(</span>User<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> sql<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>3.åœ¨com.bookmall.teståŒ…ä¸‹åˆ›å»ºUserDaoImplTestæµ‹è¯•ç±»(UserDaoImplç±»ä¸‹æŒ‰ctrl+shift+tå¿«é€Ÿåˆ›å»ºæµ‹è¯•ç±»)ï¼Œæµ‹è¯•UserDaoImplç±»ä¸­çš„æ–¹æ³•ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>bookmall<span class="token punctuation">.</span>test<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDaoImplTest</span> <span class="token punctuation">{</span>    UserDao userDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserDaoImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">queryUserByUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>userDao<span class="token punctuation">.</span><span class="token function">queryUserByUsername</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·åå¯ç”¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·åå·²å­˜åœ¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">saveUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userDao<span class="token punctuation">.</span><span class="token function">saveUser</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span><span class="token string">"å¤§å¸é©¬"</span><span class="token punctuation">,</span><span class="token string">"123456"</span><span class="token punctuation">,</span><span class="token string">"dsm@qq.com"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">queryUserByUsernameAndPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>userDao<span class="token punctuation">.</span><span class="token function">queryUserByUsernameAndPassword</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span><span class="token string">"123456"</span><span class="token punctuation">)</span> <span class="token operator">==</span> null<span class="token punctuation">)</span><span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼Œç™»å½•å¤±è´¥ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç™»å½•æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="ä¸ƒã€ç¼–å†™UserServiceå¹¶æµ‹è¯•"><a href="#ä¸ƒã€ç¼–å†™UserServiceå¹¶æµ‹è¯•" class="headerlink" title="ä¸ƒã€ç¼–å†™UserServiceå¹¶æµ‹è¯•"></a>ä¸ƒã€ç¼–å†™UserServiceå¹¶æµ‹è¯•</h2><p>1.åœ¨com.bookmall.serviceåŒ…ä¸‹åˆ›å»ºUserServiceæ¥å£</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>bookmall<span class="token punctuation">.</span>service<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * ç”¨æˆ·æ³¨å†Œ     * @param user     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registUser</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * ç”¨æˆ·ç™»å½•     * @param user     * @return     */</span>    <span class="token keyword">public</span> User <span class="token function">login</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å¯ç”¨     * @param username     * @return è¿”å›trueï¼Œè¡¨ç¤ºç”¨æˆ·å·²å­˜åœ¨ï¼Œå¦åˆ™è¿”å›false     */</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">existUsername</span><span class="token punctuation">(</span>String username<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>2.åœ¨com.bookmall.service.implåˆ›å»ºUserServiceæ¥å£å®ç°ç±»UserServiceImpl</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>bookmall<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> UserDao userDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserDaoImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registUser</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span> <span class="token punctuation">{</span>        userDao<span class="token punctuation">.</span><span class="token function">saveUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> User <span class="token function">login</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> userDao<span class="token punctuation">.</span><span class="token function">queryUserByUsernameAndPassword</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">existUsername</span><span class="token punctuation">(</span>String username<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>userDao<span class="token punctuation">.</span><span class="token function">queryUserByUsername</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token operator">==</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// ä¸ºnullè¡¨ç¤ºä¸å­˜åœ¨ï¼Œè¡¨ç¤ºå¯ä»¥ä½¿ç”¨</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>3.åœ¨com.bookmall.teståŒ…ä¸‹åˆ›å»ºæµ‹è¯•ç±»UserServiceImplTestï¼Œæµ‹è¯•UserServiceImplä¸­çš„æ–¹æ³•</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>bookmall<span class="token punctuation">.</span>test<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImplTest</span> <span class="token punctuation">{</span>    UserService userService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        userService<span class="token punctuation">.</span><span class="token function">registUser</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span><span class="token string">"å¼ ä¼Ÿ"</span><span class="token punctuation">,</span><span class="token string">"123456"</span><span class="token punctuation">,</span><span class="token string">"zw@126.com"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userService<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span><span class="token string">"zyz"</span><span class="token punctuation">,</span><span class="token string">"123456"</span><span class="token punctuation">,</span>null<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">existUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userService<span class="token punctuation">.</span><span class="token function">existUsername</span><span class="token punctuation">(</span><span class="token string">"zyz"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ture</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="å…«ã€ç¼–å†™Webå±‚"><a href="#å…«ã€ç¼–å†™Webå±‚" class="headerlink" title="å…«ã€ç¼–å†™Webå±‚"></a>å…«ã€ç¼–å†™Webå±‚</h2><h3 id="1-å®ç°æ³¨å†ŒåŠŸèƒ½"><a href="#1-å®ç°æ³¨å†ŒåŠŸèƒ½" class="headerlink" title="1.å®ç°æ³¨å†ŒåŠŸèƒ½"></a>1.å®ç°æ³¨å†ŒåŠŸèƒ½</h3><p>åœ¨com.bookmall.webä¸­åˆ›å»ºRegistServletç±»<br>åœ¨web.xmlæ–‡ä»¶ä¸­é…ç½®æ–‡ä»¶è·¯å¾„</p><pre class=" language-xml"><code class="language-xml"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>RegistServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>com.bookmall.web.RegistServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>RegistServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/registServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>bookmall<span class="token punctuation">.</span>web<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RegistServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> UserService userService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 1.è·å–è¯·æ±‚å‚æ•°</span>        String username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String password <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String email <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String code <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"code"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 2.æ£€æŸ¥éªŒè¯ç æ˜¯å¦æ­£ç¡®====å…ˆå†™æ­»ä¸ºqwer</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"qwer"</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// éªŒè¯ç æ­£ç¡®</span>            <span class="token comment" spellcheck="true">// 3.æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å¯ç”¨</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>userService<span class="token punctuation">.</span><span class="token function">existUsername</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// true ç”¨æˆ·åå·²å­˜åœ¨</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·å["</span><span class="token operator">+</span>username<span class="token operator">+</span><span class="token string">"]å·²å­˜åœ¨ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// è·³è½¬åˆ°é¦–é¡µ</span>                req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/pages/user/regist.html"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// false ç”¨æˆ·åä¸å­˜åœ¨  å¯ä»¥æ³¨å†Œ</span>                userService<span class="token punctuation">.</span><span class="token function">registUser</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span>username<span class="token punctuation">,</span>password<span class="token punctuation">,</span>email<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// è·³è½¬åˆ°æ³¨å†ŒæˆåŠŸé¡µé¢</span>                req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/pages/user/regist_success.html"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">// éªŒè¯ç é”™è¯¯</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"éªŒè¯ç ["</span><span class="token operator">+</span>code<span class="token operator">+</span><span class="token string">"]é”™è¯¯ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// è·³è½¬åˆ°é¦–é¡µ</span>            req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/pages/user/regist.html"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="2-å®ç°ç™»å½•åŠŸèƒ½"><a href="#2-å®ç°ç™»å½•åŠŸèƒ½" class="headerlink" title="2.å®ç°ç™»å½•åŠŸèƒ½"></a>2.å®ç°ç™»å½•åŠŸèƒ½</h3><p>åœ¨com.bookmall.webä¸­åˆ›å»ºLogintServletç±»<br>åœ¨web.xmlæ–‡ä»¶ä¸­é…ç½®æ–‡ä»¶è·¯å¾„</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>LoginServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>com.bookmall.web.LoginServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>LoginServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/loginServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>bookmall<span class="token punctuation">.</span>web<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> UserService userService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 1.è·å–è¯·æ±‚å‚æ•°</span>        String username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String password <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        User loginUser <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span>username<span class="token punctuation">,</span> password<span class="token punctuation">,</span> null<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>loginUser<span class="token operator">==</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç™»å½•å¤±è´¥ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// è·³è½¬åˆ°é¦–é¡µ</span>                req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/pages/user/login.html"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç™»å½•æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// è·³è½¬åˆ°ç™»å½•æˆåŠŸé¡µé¢</span>                req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/pages/user/login_success.html"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="ä¹ã€ä¼˜åŒ–ä»£ç "><a href="#ä¹ã€ä¼˜åŒ–ä»£ç " class="headerlink" title="ä¹ã€ä¼˜åŒ–ä»£ç "></a>ä¹ã€ä¼˜åŒ–ä»£ç </h2><h3 id="1-å°†å¤šä¸ªé¡µé¢ä¸­é‡å¤çš„ä»£ç æŠ½å–å‡ºæ¥ï¼š"><a href="#1-å°†å¤šä¸ªé¡µé¢ä¸­é‡å¤çš„ä»£ç æŠ½å–å‡ºæ¥ï¼š" class="headerlink" title="1.å°†å¤šä¸ªé¡µé¢ä¸­é‡å¤çš„ä»£ç æŠ½å–å‡ºæ¥ï¼š"></a>1.å°†å¤šä¸ªé¡µé¢ä¸­é‡å¤çš„ä»£ç æŠ½å–å‡ºæ¥ï¼š</h3><p><strong>å†™å…¥å•ç‹¬çš„jspæ–‡ä»¶ä¸­</strong><br><img src="/2020/04/08/javaweb-02/5.png" alt></p><p>footer.jsp</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">page</span> <span class="token attr-name">contentType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/html;charset<span class="token punctuation">=</span>UTF-8<span class="token punctuation">"</span></span> <span class="token attr-name">language</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>java<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bottom<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>         å°šç¡…è°·ä¹¦åŸ.Copyright <span class="token entity" title="&copy;">&amp;copy;</span>2015      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><p>header.jsp</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">page</span> <span class="token attr-name">contentType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/html;charset<span class="token punctuation">=</span>UTF-8<span class="token punctuation">"</span></span> <span class="token attr-name">language</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>java<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span>&lt;% String basePath = request.getContextPath()+"/";%><span class="token comment" spellcheck="true">&lt;!-- baseæ ‡ç­¾æ°¸è¿œå›ºå®šç›¸å¯¹è·¯å¾„è·³è½¬  --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>&lt;%<span class="token punctuation">=</span>basePath%<span class="token punctuation">></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>static/css/style.css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>static/script/jquery-3.4.1.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>login_success_menu.jsp</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">page</span> <span class="token attr-name">contentType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/html;charset<span class="token punctuation">=</span>UTF-8<span class="token punctuation">"</span></span> <span class="token attr-name">language</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>java<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>æ¬¢è¿<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>um_span<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å¼ æ€»<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>å…‰ä¸´å°šç¡…è°·ä¹¦åŸ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pages/order/order.jsp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æˆ‘çš„è®¢å•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>index.jsp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ³¨é”€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token entity" title="&nbsp;">&amp;nbsp;</span><span class="token entity" title="&nbsp;">&amp;nbsp;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>index.jsp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¿”å›<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><p>manage_menu.jsp</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">page</span> <span class="token attr-name">contentType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/html;charset<span class="token punctuation">=</span>UTF-8<span class="token punctuation">"</span></span> <span class="token attr-name">language</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>java<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>book_manager<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å›¾ä¹¦ç®¡ç†<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>order_manager<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è®¢å•ç®¡ç†<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>index.jsp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¿”å›å•†åŸ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><p><strong>é‡‡ç”¨é™æ€åŒ…å«çš„æ–¹å¼æ›¿æ¢é‡å¤çš„ä»£ç ï¼š</strong></p><pre class=" language-html"><code class="language-html"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">é™æ€åŒ…å«</span> <span class="token attr-name">é¡µè„šå†…å®¹--%</span><span class="token punctuation">></span></span>&lt;%@include file="/pages/common/footer.jsp"%></code></pre><pre class=" language-html"><code class="language-html"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">é™æ€åŒ…å«</span> <span class="token attr-name">baseæ ‡ç­¾ã€cssæ ·å¼ã€jqueryæ–‡ä»¶--%</span><span class="token punctuation">></span></span>    &lt;%@include file="/pages/common/head.jsp"%></code></pre><pre class=" language-html"><code class="language-html"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">é™æ€åŒ…å«</span> <span class="token attr-name">æˆåŠŸä¹‹åçš„èœå•--%</span><span class="token punctuation">></span></span>&lt;%@include file="/pages/common/login_sucess_menu.jsp"%</code></pre><pre class=" language-html"><code class="language-html"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">é™æ€åŒ…å«</span> <span class="token attr-name">ç®¡ç†èœå•--%</span><span class="token punctuation">></span></span>&lt;%@include file="/pages/common/manage_menu.jsp"%></code></pre><h3 id="2-ç™»å½•ã€æ³¨å†Œé”™è¯¯æç¤ºä»¥åŠè¡¨å•å›æ˜¾"><a href="#2-ç™»å½•ã€æ³¨å†Œé”™è¯¯æç¤ºä»¥åŠè¡¨å•å›æ˜¾" class="headerlink" title="2.ç™»å½•ã€æ³¨å†Œé”™è¯¯æç¤ºä»¥åŠè¡¨å•å›æ˜¾"></a>2.ç™»å½•ã€æ³¨å†Œé”™è¯¯æç¤ºä»¥åŠè¡¨å•å›æ˜¾</h3><p>LoginServlet.java</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> UserService userService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 1.è·å–è¯·æ±‚å‚æ•°</span>        String username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String password <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        User loginUser <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">,</span> null<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>loginUser <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// System.out.println("ç™»å½•å¤±è´¥ï¼");</span>            <span class="token comment" spellcheck="true">// å°†è¦å›æ˜¾çš„é”™è¯¯ä¿¡æ¯ä¿å­˜åˆ°requeståŸŸä¸­</span>            req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// è·³è½¬åˆ°é¦–é¡µ</span>            req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/pages/user/login.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç™»å½•æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// è·³è½¬åˆ°ç™»å½•æˆåŠŸé¡µé¢</span>            req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/pages/user/login_success.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>login.jsp</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>msg_cont<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>errorMsg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      &lt;%=         request.getAttribute("msg")==null?"è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ":request.getAttribute("msg")      %>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><pre class=" language-html"><code class="language-html">&lt;input class="itxt" type="text" placeholder="è¯·è¾“å…¥ç”¨æˆ·å"      autocomplete="off" tabindex="1" name="username"      value="&lt;%=request.getAttribute("username")==null?"":request.getAttribute("username")%>"/></code></pre><p>RegistServlet.java</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RegistServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> UserService userService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 1.è·å–è¯·æ±‚å‚æ•°</span>        String username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String password <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String email <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String code <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"code"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 2.æ£€æŸ¥éªŒè¯ç æ˜¯å¦æ­£ç¡®====å…ˆå†™æ­»ä¸ºqwer</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"qwer"</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// éªŒè¯ç æ­£ç¡®</span>            <span class="token comment" spellcheck="true">// 3.æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å¯ç”¨</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>userService<span class="token punctuation">.</span><span class="token function">existUsername</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// true ç”¨æˆ·åå·²å­˜åœ¨</span>                <span class="token comment" spellcheck="true">// System.out.println("ç”¨æˆ·å["+username+"]å·²å­˜åœ¨ï¼");</span>                <span class="token comment" spellcheck="true">// æŠŠå›æ˜¾ä¿¡æ¯ä¿å­˜åˆ°requeståŸŸä¸­</span>                req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"ç”¨æˆ·åå·²å­˜åœ¨ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>                req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">,</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// è·³è½¬åˆ°é¦–é¡µ</span>                req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/pages/user/regist.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// false ç”¨æˆ·åä¸å­˜åœ¨  å¯ä»¥æ³¨å†Œ</span>                userService<span class="token punctuation">.</span><span class="token function">registUser</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span>username<span class="token punctuation">,</span>password<span class="token punctuation">,</span>email<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// è·³è½¬åˆ°æ³¨å†ŒæˆåŠŸé¡µé¢</span>                req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/pages/user/regist_success.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">// éªŒè¯ç é”™è¯¯</span>            <span class="token comment" spellcheck="true">// System.out.println("éªŒè¯ç ["+code+"]é”™è¯¯ï¼");</span>            <span class="token comment" spellcheck="true">// æŠŠé”™è¯¯ä¿¡æ¯å’Œå›æ˜¾ä¿¡æ¯ä¿å­˜åˆ°requeståŸŸä¸­</span>            req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"éªŒè¯ç é”™è¯¯ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>            req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">,</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// è·³è½¬åˆ°é¦–é¡µ</span>            req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/pages/user/regist.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>regist.jsp</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>errorMsg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    &lt;%=request.getAttribute("msg")==null?"":request.getAttribute("msg")%><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></code></pre><pre class=" language-html"><code class="language-html">&lt;input class="itxt" type="text" placeholder="è¯·è¾“å…¥ç”¨æˆ·å"       autocomplete="off" tabindex="1"       name="username" id="username"       value="&lt;%=request.getAttribute("username")==null?"":request.getAttribute("username")%>"/></code></pre><pre class=" language-html"><code class="language-html">&lt;input class="itxt" type="text" placeholder="è¯·è¾“å…¥é‚®ç®±åœ°å€" autocomplete="off" tabindex="1"       name="email" id="email"       value="&lt;%=request.getAttribute("email")==null?"":request.getAttribute("email")%>"/></code></pre><h3 id="3-å°†LoginServletå’ŒRegistServletåˆå¹¶ä¸ºUserServlet"><a href="#3-å°†LoginServletå’ŒRegistServletåˆå¹¶ä¸ºUserServlet" class="headerlink" title="3.å°†LoginServletå’ŒRegistServletåˆå¹¶ä¸ºUserServlet"></a>3.å°†LoginServletå’ŒRegistServletåˆå¹¶ä¸ºUserServlet</h3><p><img src="/2020/04/08/javaweb-02/6.png" alt></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> UserService userService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// è·å–è¯·æ±‚ç±»å‹</span>        String action <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"action"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"login"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">login</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"regist"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">regist</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * å¤„ç†ç™»å½•çš„åŠŸèƒ½     *     * @param req     * @param resp     * @throws ServletException     * @throws IOException     */</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">login</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 1.è·å–è¯·æ±‚å‚æ•°</span>        String username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String password <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        User loginUser <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">,</span> null<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>loginUser <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// System.out.println("ç™»å½•å¤±è´¥ï¼");</span>            <span class="token comment" spellcheck="true">// å°†è¦å›æ˜¾çš„é”™è¯¯ä¿¡æ¯ä¿å­˜åˆ°requeståŸŸä¸­</span>            req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// è·³è½¬åˆ°é¦–é¡µ</span>            req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/pages/user/login.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// System.out.println("ç™»å½•æˆåŠŸï¼");</span>            <span class="token comment" spellcheck="true">// è·³è½¬åˆ°ç™»å½•æˆåŠŸé¡µé¢</span>            req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/pages/user/login_success.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * å¤„ç†æ³¨å†Œçš„åŠŸèƒ½     * @param req     * @param resp     * @throws ServletException     * @throws IOException     */</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">regist</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 1.è·å–è¯·æ±‚å‚æ•°</span>        String username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String password <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String email <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String code <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"code"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 2.æ£€æŸ¥éªŒè¯ç æ˜¯å¦æ­£ç¡®====å…ˆå†™æ­»ä¸ºqwer</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"qwer"</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// éªŒè¯ç æ­£ç¡®</span>            <span class="token comment" spellcheck="true">// 3.æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å¯ç”¨</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>userService<span class="token punctuation">.</span><span class="token function">existUsername</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// true ç”¨æˆ·åå·²å­˜åœ¨</span>                <span class="token comment" spellcheck="true">// System.out.println("ç”¨æˆ·å["+username+"]å·²å­˜åœ¨ï¼");</span>                <span class="token comment" spellcheck="true">// æŠŠå›æ˜¾ä¿¡æ¯ä¿å­˜åˆ°requeståŸŸä¸­</span>                req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"ç”¨æˆ·åå·²å­˜åœ¨ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>                req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">,</span> email<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// è·³è½¬åˆ°é¦–é¡µ</span>                req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/pages/user/regist.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// false ç”¨æˆ·åä¸å­˜åœ¨  å¯ä»¥æ³¨å†Œ</span>                userService<span class="token punctuation">.</span><span class="token function">registUser</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">,</span> email<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// è·³è½¬åˆ°æ³¨å†ŒæˆåŠŸé¡µé¢</span>                req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/pages/user/regist_success.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">// éªŒè¯ç é”™è¯¯</span>            <span class="token comment" spellcheck="true">// System.out.println("éªŒè¯ç ["+code+"]é”™è¯¯ï¼");</span>            <span class="token comment" spellcheck="true">// æŠŠé”™è¯¯ä¿¡æ¯å’Œå›æ˜¾ä¿¡æ¯ä¿å­˜åˆ°requeståŸŸä¸­</span>            req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"éªŒè¯ç é”™è¯¯ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>            req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">,</span> email<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// è·³è½¬åˆ°é¦–é¡µ</span>            req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/pages/user/regist.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>login.jsp<br><img src="/2020/04/08/javaweb-02/7.png" alt></p><p>regist.jsp<br><img src="/2020/04/08/javaweb-02/8.png" alt></p><h3 id="4-ä½¿ç”¨åå°„ä¼˜åŒ–å¤§é‡else-if-ä»£ç "><a href="#4-ä½¿ç”¨åå°„ä¼˜åŒ–å¤§é‡else-if-ä»£ç " class="headerlink" title="4.ä½¿ç”¨åå°„ä¼˜åŒ–å¤§é‡else if ä»£ç "></a>4.ä½¿ç”¨åå°„ä¼˜åŒ–å¤§é‡else if ä»£ç </h3><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// é€šè¿‡åå°„æ ¹æ®actionå±æ€§å€¼è°ƒç”¨ç›¸åº”çš„æ–¹æ³•</span>    String action <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"action"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        Method method <span class="token operator">=</span> UserServlet<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span>action<span class="token punctuation">,</span> HttpServletRequest<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> HttpServletResponse<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="5-æŠ½å–BaseServlet"><a href="#5-æŠ½å–BaseServlet" class="headerlink" title="5.æŠ½å–BaseServlet"></a>5.æŠ½å–BaseServlet</h3><p><img src="/2020/04/08/javaweb-02/10.png" alt></p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>bookmall<span class="token punctuation">.</span>web<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">BaseServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">doPost</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è·å–è¯·æ±‚ç±»å‹</span>        String action <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"action"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// System.out.println(action);</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">// é€šè¿‡åå°„æ ¹æ®actionå±æ€§å€¼è°ƒç”¨ç›¸åº”çš„æ–¹æ³•</span>            Method method <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span>action<span class="token punctuation">,</span> HttpServletRequest<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> HttpServletResponse<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>bookmall<span class="token punctuation">.</span>web<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServlet</span> <span class="token keyword">extends</span> <span class="token class-name">BaseServlet</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> UserService userService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">login</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// ......</span>    <span class="token punctuation">}</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">regist</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// ......</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="6-æ•°æ®çš„å°è£…å’ŒæŠ½å–-BeanUtilsçš„ä½¿ç”¨"><a href="#6-æ•°æ®çš„å°è£…å’ŒæŠ½å–-BeanUtilsçš„ä½¿ç”¨" class="headerlink" title="6.æ•°æ®çš„å°è£…å’ŒæŠ½å– BeanUtilsçš„ä½¿ç”¨"></a>6.æ•°æ®çš„å°è£…å’ŒæŠ½å– BeanUtilsçš„ä½¿ç”¨</h3><p>BeanUtilså·¥å…·ç±»ï¼Œå¯ä»¥ä¸€æ¬¡æ€§çš„æŠŠæ‰€æœ‰è¯·æ±‚çš„å‚æ•°æ³¨å…¥å¯¼JavaBeanä¸­<br>1ã€å¯¼å…¥éœ€è¦çš„jar åŒ…ï¼š<br>commons-beanutils-1.8.0.jar<br>commons-logging-1.1.1jar<br>2ã€ä½¿ç”¨BeanUtilsç±»æ–¹æ³•å®ç°æ³¨å…¥</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>bookmall<span class="token punctuation">.</span>utils<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebUtils</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token operator">&lt;</span>T<span class="token operator">></span> T <span class="token function">copyParamToBean</span><span class="token punctuation">(</span>Map map<span class="token punctuation">,</span> T bean<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// å°†æ‰€æœ‰è¯·æ±‚çš„å‚æ•°å°è£…åˆ°beanä¸­</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            BeanUtils<span class="token punctuation">.</span><span class="token function">populate</span><span class="token punctuation">(</span>bean<span class="token punctuation">,</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> bean<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>UserServlet.java</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// å°†è¯·æ±‚å‚æ•°ä¸€æ¬¡æ€§å°è£…åˆ°userå¯¹è±¡ä¸­</span>User user <span class="token operator">=</span> WebUtils<span class="token punctuation">.</span><span class="token function">copyParamToBean</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getParameterMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="7-ä½¿ç”¨ELè¡¨è¾¾å¼ä¿®æ”¹è¡¨å•å›æ˜¾"><a href="#7-ä½¿ç”¨ELè¡¨è¾¾å¼ä¿®æ”¹è¡¨å•å›æ˜¾" class="headerlink" title="7.ä½¿ç”¨ELè¡¨è¾¾å¼ä¿®æ”¹è¡¨å•å›æ˜¾"></a>7.ä½¿ç”¨ELè¡¨è¾¾å¼ä¿®æ”¹è¡¨å•å›æ˜¾</h3><p>login.jsp</p><pre class=" language-html"><code class="language-html">&lt;%--    &lt;%= request.getAttribute("msg")==null?"è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ":request.getAttribute("msg")%>--%>${empty requestScope.msg ? "è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ":requestScope.msg}</code></pre><pre class=" language-html"><code class="language-html">&lt;%--    value="&lt;%=request.getAttribute("username")==null?"":request.getAttribute("username")%>"--%>value="${requestScope.username}"</code></pre><p>regist.jsp</p><pre class=" language-html"><code class="language-html">&lt;%--    &lt;%=request.getAttribute("msg")==null?"":request.getAttribute("msg")%>--%>${requestScope.msg}</code></pre><pre class=" language-html"><code class="language-html">&lt;%--    value="&lt;%=request.getAttribute("username")==null?"":request.getAttribute("username")%>"--%>${requestScope.username}</code></pre><pre class=" language-html"><code class="language-html">&lt;%--    value="&lt;%=request.getAttribute("email")==null?"":request.getAttribute("email")%>"--%>${requestScope.email}</code></pre><h2 id="åã€å›¾ä¹¦æ¨¡å—"><a href="#åã€å›¾ä¹¦æ¨¡å—" class="headerlink" title="åã€å›¾ä¹¦æ¨¡å—"></a>åã€å›¾ä¹¦æ¨¡å—</h2><h3 id="1-åˆ›å»ºå›¾ä¹¦æ¨¡å—çš„æ•°æ®åº“è¡¨"><a href="#1-åˆ›å»ºå›¾ä¹¦æ¨¡å—çš„æ•°æ®åº“è¡¨" class="headerlink" title="1.åˆ›å»ºå›¾ä¹¦æ¨¡å—çš„æ•°æ®åº“è¡¨"></a>1.åˆ›å»ºå›¾ä¹¦æ¨¡å—çš„æ•°æ®åº“è¡¨</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">USE</span> bookmall<span class="token punctuation">;</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> book<span class="token punctuation">(</span>    <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>    <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    <span class="token punctuation">`</span>price<span class="token punctuation">`</span> <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    <span class="token punctuation">`</span>author<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    <span class="token punctuation">`</span>sales<span class="token punctuation">`</span> <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    <span class="token punctuation">`</span>stock<span class="token punctuation">`</span> <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    <span class="token punctuation">`</span>img_path<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># drop table book;</span><span class="token comment" spellcheck="true">## æ’å…¥åˆå§‹åŒ–æµ‹è¯•æ•°æ®</span><span class="token keyword">insert</span> <span class="token keyword">into</span> book<span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>author<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>price<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>sales<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>stock<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>img_path<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span> <span class="token punctuation">,</span> <span class="token string">'javaä»å…¥é—¨åˆ°æ”¾å¼ƒ'</span> <span class="token punctuation">,</span> <span class="token string">'å›½å“¥'</span> <span class="token punctuation">,</span> <span class="token number">80</span> <span class="token punctuation">,</span> <span class="token number">9999</span> <span class="token punctuation">,</span> <span class="token number">9</span> <span class="token punctuation">,</span> <span class="token string">'static/img/default.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">insert</span> <span class="token keyword">into</span> book<span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>author<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>price<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>sales<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>stock<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>img_path<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span> <span class="token punctuation">,</span> <span class="token string">'æ•°æ®ç»“æ„ä¸ç®—æ³•'</span> <span class="token punctuation">,</span> <span class="token string">'ä¸¥æ•å›'</span> <span class="token punctuation">,</span> <span class="token number">78.5</span> <span class="token punctuation">,</span> <span class="token number">6</span> <span class="token punctuation">,</span> <span class="token number">13</span> <span class="token punctuation">,</span> <span class="token string">'static/img/default.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">insert</span> <span class="token keyword">into</span> book<span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>author<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>price<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>sales<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>stock<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>img_path<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span> <span class="token punctuation">,</span> <span class="token string">'ç¼–ç¨‹ç ç‘'</span> <span class="token punctuation">,</span> <span class="token string">'Tom'</span> <span class="token punctuation">,</span> <span class="token number">68</span><span class="token punctuation">,</span> <span class="token number">99999</span> <span class="token punctuation">,</span> <span class="token number">52</span> <span class="token punctuation">,</span> <span class="token string">'static/img/default.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">insert</span> <span class="token keyword">into</span> book<span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>author<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>price<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>sales<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>stock<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>img_path<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span> <span class="token punctuation">,</span> <span class="token string">'ä»ä½ çš„å…¨ä¸–ç•Œè·¯è¿‡'</span> <span class="token punctuation">,</span> <span class="token string">'å¼ å˜‰åŠ '</span> <span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">1000</span> <span class="token punctuation">,</span> <span class="token number">50</span> <span class="token punctuation">,</span> <span class="token string">'static/img/cover.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">insert</span> <span class="token keyword">into</span> book<span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>author<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>price<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>sales<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>stock<span class="token punctuation">`</span> <span class="token punctuation">,</span> <span class="token punctuation">`</span>img_path<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span> <span class="token punctuation">,</span> <span class="token string">'Cè¯­è¨€ç¨‹åºè®¾è®¡'</span> <span class="token punctuation">,</span> <span class="token string">'è°­æµ©å¼º'</span> <span class="token punctuation">,</span> <span class="token number">28</span> <span class="token punctuation">,</span> <span class="token number">52</span> <span class="token punctuation">,</span> <span class="token number">74</span> <span class="token punctuation">,</span> <span class="token string">'static/img/default.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="2-ç¼–å†™å›¾ä¹¦æ¨¡å—çš„JavaBeanå¯¹è±¡"><a href="#2-ç¼–å†™å›¾ä¹¦æ¨¡å—çš„JavaBeanå¯¹è±¡" class="headerlink" title="2.ç¼–å†™å›¾ä¹¦æ¨¡å—çš„JavaBeanå¯¹è±¡"></a>2.ç¼–å†™å›¾ä¹¦æ¨¡å—çš„JavaBeanå¯¹è±¡</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>bookmall<span class="token punctuation">.</span>bean<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> Integer id<span class="token punctuation">;</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> String author<span class="token punctuation">;</span>    <span class="token keyword">private</span> BigDecimal price<span class="token punctuation">;</span>    <span class="token keyword">private</span> Integer sales<span class="token punctuation">;</span>    <span class="token keyword">private</span> Integer stock<span class="token punctuation">;</span>    <span class="token keyword">private</span> String imgPath<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Book</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">Book</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">,</span> String name<span class="token punctuation">,</span> String author<span class="token punctuation">,</span> BigDecimal price<span class="token punctuation">,</span> Integer sales<span class="token punctuation">,</span> Integer stock<span class="token punctuation">,</span> String imgPath<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>author <span class="token operator">=</span> author<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>sales <span class="token operator">=</span> sales<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>stock <span class="token operator">=</span> stock<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>imgPath <span class="token operator">!=</span> null <span class="token operator">&amp;&amp;</span> <span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>imgPath<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>imgPath <span class="token operator">=</span> imgPath<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Integer <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getAuthor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> author<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAuthor</span><span class="token punctuation">(</span>String author<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>author <span class="token operator">=</span> author<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> BigDecimal <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> price<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPrice</span><span class="token punctuation">(</span>BigDecimal price<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Integer <span class="token function">getSales</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> sales<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSales</span><span class="token punctuation">(</span>Integer sales<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>sales <span class="token operator">=</span> sales<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Integer <span class="token function">getStock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> stock<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStock</span><span class="token punctuation">(</span>Integer stock<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>stock <span class="token operator">=</span> stock<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getImgPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> imgPath<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setImgPath</span><span class="token punctuation">(</span>String imgPath<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>imgPath <span class="token operator">!=</span> null <span class="token operator">&amp;&amp;</span> <span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>imgPath<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>imgPath <span class="token operator">=</span> imgPath<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"Book{"</span> <span class="token operator">+</span>                <span class="token string">"id="</span> <span class="token operator">+</span> id <span class="token operator">+</span>                <span class="token string">", name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">", author='"</span> <span class="token operator">+</span> author <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">", price="</span> <span class="token operator">+</span> price <span class="token operator">+</span>                <span class="token string">", sales="</span> <span class="token operator">+</span> sales <span class="token operator">+</span>                <span class="token string">", stock="</span> <span class="token operator">+</span> stock <span class="token operator">+</span>                <span class="token string">", imgPath='"</span> <span class="token operator">+</span> imgPath <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">'}'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="3-ç¼–å†™å›¾ä¹¦æ¨¡å—çš„DAOå¹¶æµ‹è¯•"><a href="#3-ç¼–å†™å›¾ä¹¦æ¨¡å—çš„DAOå¹¶æµ‹è¯•" class="headerlink" title="3.ç¼–å†™å›¾ä¹¦æ¨¡å—çš„DAOå¹¶æµ‹è¯•"></a>3.ç¼–å†™å›¾ä¹¦æ¨¡å—çš„DAOå¹¶æµ‹è¯•</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>bookmall<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookDaoImpl</span> <span class="token keyword">extends</span> <span class="token class-name">BaseDao</span> <span class="token keyword">implements</span> <span class="token class-name">BookDao</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">addBook</span><span class="token punctuation">(</span>Book book<span class="token punctuation">)</span> <span class="token punctuation">{</span>        String sql <span class="token operator">=</span> <span class="token string">"insert into book(`name`,`author`,`price`,`sales`,`stock`,`img_path`) values(?,?,?,?,?,?)"</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> book<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>book<span class="token punctuation">.</span><span class="token function">getAuthor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>book<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>book<span class="token punctuation">.</span><span class="token function">getSales</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>book<span class="token punctuation">.</span><span class="token function">getStock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>book<span class="token punctuation">.</span><span class="token function">getImgPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">deleteBook</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        String sql <span class="token operator">=</span> <span class="token string">"delete from book where id = ?"</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">updateBook</span><span class="token punctuation">(</span>Book book<span class="token punctuation">)</span> <span class="token punctuation">{</span>        String sql <span class="token operator">=</span> <span class="token string">"update book set `name`=?,`author`=?,`price`=?,`sales`=?,`stock`=?,`img_path`= ? where id = ?"</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>book<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>book<span class="token punctuation">.</span><span class="token function">getAuthor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>book<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>book<span class="token punctuation">.</span><span class="token function">getSales</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>book<span class="token punctuation">.</span><span class="token function">getStock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>book<span class="token punctuation">.</span><span class="token function">getImgPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>book<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> Book <span class="token function">queryBookById</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        String sql <span class="token operator">=</span> <span class="token string">"select `id`,`name`,`author`,`price`,`sales`,`stock`,`img_path` imgPath from book where id = ?"</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">queryForOne</span><span class="token punctuation">(</span>Book<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>sql<span class="token punctuation">,</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Book<span class="token operator">></span> <span class="token function">queryBooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        String sql <span class="token operator">=</span> <span class="token string">"select `id`,`name`,`author`,`price`,`sales`,`stock`,`img_path` imgPath from book"</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">queryForList</span><span class="token punctuation">(</span>Book<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>bookmall<span class="token punctuation">.</span>test<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookDaoImplTest</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> BookDao bookDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BookDaoImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        bookDao<span class="token punctuation">.</span><span class="token function">addBook</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span><span class="token string">"ç®—æ³•ä¸æ•°æ®ç»“æ„(javaç‰ˆ)"</span><span class="token punctuation">,</span><span class="token string">"å¼ ä¸‰ä¸‰"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token number">58.80</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token string">"static/img/default.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        bookDao<span class="token punctuation">.</span><span class="token function">deleteBook</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        bookDao<span class="token punctuation">.</span><span class="token function">updateBook</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token string">"ç®—æ³•ä¸æ•°æ®ç»“æ„(C++ç‰ˆ)"</span><span class="token punctuation">,</span><span class="token string">"å¼ ä¸‰ä¸‰"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token number">58.80</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token string">"static/img/default.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">queryBookById</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bookDao<span class="token punctuation">.</span><span class="token function">queryBookById</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">queryBooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span>Book book<span class="token operator">:</span>bookDao<span class="token punctuation">.</span><span class="token function">queryBooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="4-ç¼–å†™å›¾ä¹¦æ¨¡å—çš„Serviceå¹¶æµ‹è¯•"><a href="#4-ç¼–å†™å›¾ä¹¦æ¨¡å—çš„Serviceå¹¶æµ‹è¯•" class="headerlink" title="4.ç¼–å†™å›¾ä¹¦æ¨¡å—çš„Serviceå¹¶æµ‹è¯•"></a>4.ç¼–å†™å›¾ä¹¦æ¨¡å—çš„Serviceå¹¶æµ‹è¯•</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>bookmall<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">BookService</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> BookDao bookDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BookDaoImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addBook</span><span class="token punctuation">(</span>Book book<span class="token punctuation">)</span> <span class="token punctuation">{</span>        bookDao<span class="token punctuation">.</span><span class="token function">addBook</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteBook</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        bookDao<span class="token punctuation">.</span><span class="token function">deleteBook</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateBook</span><span class="token punctuation">(</span>Book book<span class="token punctuation">)</span> <span class="token punctuation">{</span>        bookDao<span class="token punctuation">.</span><span class="token function">updateBook</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> Book <span class="token function">queryBookById</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> bookDao<span class="token punctuation">.</span><span class="token function">queryBookById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Book<span class="token operator">></span> <span class="token function">queryBooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> bookDao<span class="token punctuation">.</span><span class="token function">queryBooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>bookmall<span class="token punctuation">.</span>test<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookServiceImplTest</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> BookService bookService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BookServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        bookService<span class="token punctuation">.</span><span class="token function">addBook</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span><span class="token string">"è‚‰è›‹è‘±é¸¡"</span><span class="token punctuation">,</span><span class="token string">"é©¬è€å¸ˆ"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token number">66.66</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">666</span><span class="token punctuation">,</span><span class="token number">66</span><span class="token punctuation">,</span><span class="token string">"static/img/cover.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        bookService<span class="token punctuation">.</span><span class="token function">deleteBook</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        bookService<span class="token punctuation">.</span><span class="token function">updateBook</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token string">"çº¢çš®çƒ¤é¸­"</span><span class="token punctuation">,</span><span class="token string">"é©¬è€å¸ˆ"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token number">99.8</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"static/img/cover.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">queryBookById</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bookService<span class="token punctuation">.</span><span class="token function">queryBookById</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">queryBooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span>Book book <span class="token operator">:</span>bookService<span class="token punctuation">.</span><span class="token function">queryBooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="5-ç¼–å†™å›¾ä¹¦æ¨¡å—çš„Webå±‚ï¼Œå’Œé¡µé¢è”è°ƒæµ‹è¯•"><a href="#5-ç¼–å†™å›¾ä¹¦æ¨¡å—çš„Webå±‚ï¼Œå’Œé¡µé¢è”è°ƒæµ‹è¯•" class="headerlink" title="5.ç¼–å†™å›¾ä¹¦æ¨¡å—çš„Webå±‚ï¼Œå’Œé¡µé¢è”è°ƒæµ‹è¯•"></a>5.ç¼–å†™å›¾ä¹¦æ¨¡å—çš„Webå±‚ï¼Œå’Œé¡µé¢è”è°ƒæµ‹è¯•</h3><h4 id="1ã€å®ç°å±•ç¤ºå…¨éƒ¨å›¾ä¹¦"><a href="#1ã€å®ç°å±•ç¤ºå…¨éƒ¨å›¾ä¹¦" class="headerlink" title="1ã€å®ç°å±•ç¤ºå…¨éƒ¨å›¾ä¹¦"></a>1ã€å®ç°å±•ç¤ºå…¨éƒ¨å›¾ä¹¦</h4><p><img src="/2020/04/08/javaweb-02/11.png" alt></p><p><strong>åœ¨BookServlet.javaä¸­æ·»åŠ list()æ–¹æ³•ç”¨äºå±•ç¤ºå…¨éƒ¨å›¾ä¹¦ä¿¡æ¯ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">private</span> BookService bookService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BookServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">list</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 1.é€šè¿‡BookServiceæŸ¥è¯¢å…¨éƒ¨å›¾ä¹¦</span>    List<span class="token operator">&lt;</span>Book<span class="token operator">></span> books <span class="token operator">=</span> bookService<span class="token punctuation">.</span><span class="token function">queryBooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 2.å°†å…¨éƒ¨çš„å›¾ä¹¦ä¿¡æ¯ä¿å­˜åˆ°requeståŸŸä¸­</span>    req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"books"</span><span class="token punctuation">,</span>books<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 3.è¯·æ±‚è½¬å‘</span>    req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/pages/manager/book_manager.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><strong>ä¿®æ”¹å›¾ä¹¦ç®¡ç†é¡µé¢çš„è·³è½¬åœ°å€ï¼š</strong><br><img src="/2020/04/08/javaweb-02/12.png" alt></p><p><strong>åˆ©ç”¨JSTLæ ‡ç­¾åº“éå†å›¾ä¹¦ä¿¡æ¯åœ¨jspé¡µé¢ä¸­è¾“å‡ºï¼š</strong><br>1ã€å¯¼å…¥JSTLæ ‡ç­¾åº“çš„jaråŒ…<br>taglibs-standard-impl-1.2.1.jar<br>taglibs-standard-spec-1.2.1.jar<br>2ã€åœ¨book_manager.jspä¸­ç¼–å†™éå†å›¾ä¹¦ä¿¡æ¯çš„ä»£ç </p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">items</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.books}<span class="token punctuation">"</span></span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>book<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${book.name}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${book.price}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${book.author}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${book.sales}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${book.stock}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>book_edit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¿®æ”¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>åˆ é™¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">></span></span></code></pre><h4 id="2ã€å®ç°æ·»åŠ å›¾ä¹¦"><a href="#2ã€å®ç°æ·»åŠ å›¾ä¹¦" class="headerlink" title="2ã€å®ç°æ·»åŠ å›¾ä¹¦"></a>2ã€å®ç°æ·»åŠ å›¾ä¹¦</h4><p><img src="/2020/04/08/javaweb-02/17.png" alt></p><p><strong>åœ¨BookServletä¸­æ·»åŠ add()æ–¹æ³•ç”¨äºæ·»åŠ å›¾ä¹¦ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//  1ã€è·å–è¯·æ±‚çš„å‚æ•°==å°è£…æˆä¸ºBookå¯¹è±¡</span>        Book book <span class="token operator">=</span> WebUtils<span class="token punctuation">.</span><span class="token function">copyParamToBean</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getParameterMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//  2ã€è°ƒç”¨BookService.addBook()ä¿å­˜å›¾ä¹¦</span>        bookService<span class="token punctuation">.</span><span class="token function">addBook</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 3ã€è·³åˆ°å›¾ä¹¦åˆ—è¡¨é¡µé¢ /manager/bookServlet?action=list</span>        <span class="token comment" spellcheck="true">// è¯·æ±‚è½¬å‘ä¼šé€ æˆè¡¨å•çš„å¤šæ¬¡æäº¤</span>        <span class="token comment" spellcheck="true">// req.getRequestDispatcher("/manager/bookServlet?action=list").forward(req, resp);</span>        <span class="token comment" spellcheck="true">// è¯·æ±‚é‡å®šå‘</span>        resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span> <span class="token string">"/manager/bookServlet?action=list"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><p><strong>ä¿®æ”¹book_edit.jspï¼š</strong><br><img src="/2020/04/08/javaweb-02/13.png" alt></p><p><img src="/2020/04/08/javaweb-02/14.png" alt></p><h4 id="3ã€å®ç°åˆ é™¤å›¾ä¹¦"><a href="#3ã€å®ç°åˆ é™¤å›¾ä¹¦" class="headerlink" title="3ã€å®ç°åˆ é™¤å›¾ä¹¦"></a>3ã€å®ç°åˆ é™¤å›¾ä¹¦</h4><p><img src="/2020/04/08/javaweb-02/18.png" alt></p><p><strong>åœ¨BookServletä¸­æ·»åŠ delete()æ–¹æ³•ï¼š</strong></p><pre class=" language-java"><code class="language-java"> <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 1ã€è·å–å›¾ä¹¦id</span>        <span class="token keyword">int</span> id <span class="token operator">=</span> WebUtils<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 2ã€è°ƒç”¨BookService.deleteById() åˆ é™¤å›¾ä¹¦</span>        bookService<span class="token punctuation">.</span><span class="token function">deleteBook</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 3ã€é‡å®šå‘ /manager/bookServlet?action=list</span>        resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getScheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"://"</span><span class="token operator">+</span> req<span class="token punctuation">.</span><span class="token function">getServerName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">":"</span><span class="token operator">+</span>                req<span class="token punctuation">.</span><span class="token function">getServerPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>req<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span> <span class="token string">"/manager/bookServlet?action=list"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><p><strong>ä¿®æ”¹book_manager.jspï¼š</strong><br><img src="/2020/04/08/javaweb-02/15.png" alt></p><p><strong>æ·»åŠ ç¡®è®¤åˆ é™¤æç¤ºï¼š</strong><br>ç»™aæ ‡ç­¾æ·»åŠ classå±æ€§ç”¨äºå¯¹æ ‡ç­¾é€‰æ‹©<br><img src="/2020/04/08/javaweb-02/16.png" alt>ç»™aæ ‡ç­¾ç»‘å®šå•å‡»äº‹ä»¶ï¼š</p><pre class=" language-js"><code class="language-js"> <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">--</span> ç»™åˆ é™¤æŒ‰é’®ç»‘å®šå•å‡»äº‹ä»¶ ç”¨äºåˆ é™¤æ“ä½œçš„ç¡®è®¤    <span class="token operator">--</span><span class="token operator">%</span><span class="token operator">></span><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span><span class="token operator">></span>    <span class="token comment" spellcheck="true">// åœ¨äº‹ä»¶çš„functionå‡½æ•°ä¸­ï¼Œæœ‰ä¸€ä¸ªthiså¯¹è±¡ï¼Œè¡¨ç¤ºå½“å‰æ­£åœ¨å“åº”äº‹ä»¶çš„domå¯¹è±¡</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"a.deleteClass"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// ç¡®è®¤è¿”å›true  å–æ¶ˆè¿”å›false</span>            <span class="token keyword">return</span> <span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">"ä½ ç¡®å®šåˆ é™¤ã€Š"</span> <span class="token operator">+</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"td:first"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token string">"ã€‹å—ï¼Ÿ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// return false; é˜»æ­¢å…ƒç´ çš„é»˜è®¤è¡Œä¸º  ä¸æäº¤</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre><h4 id="4ã€å®ç°ä¿®æ”¹å›¾ä¹¦"><a href="#4ã€å®ç°ä¿®æ”¹å›¾ä¹¦" class="headerlink" title="4ã€å®ç°ä¿®æ”¹å›¾ä¹¦"></a>4ã€å®ç°ä¿®æ”¹å›¾ä¹¦</h4><p><img src="/2020/04/08/javaweb-02/19.png" alt></p><p><strong>åœ¨bookServletä¸­æ·»åŠ getBook()ç”¨äºè·å–è¦ä¿®æ”¹å›¾ä¹¦çš„ä¿¡æ¯ï¼š</strong></p><pre class=" language-java"><code class="language-java"> <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">getBook</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 1.è·å–id</span>        <span class="token keyword">int</span> id <span class="token operator">=</span> WebUtils<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 2.è°ƒç”¨BookService.queryBookById() è·å–å›¾ä¹¦ä¿¡æ¯</span>        Book book <span class="token operator">=</span> bookService<span class="token punctuation">.</span><span class="token function">queryBookById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 3.å°†å›¾ä¹¦ä¿¡æ¯ä¿å­˜è‡³requeståŸŸä¸­</span>        req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"book"</span><span class="token punctuation">,</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 4.è¯·æ±‚è½¬å‘åˆ° /pages/manager/book_edit.jsp</span>        req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/pages/manager/book_edit.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><p><strong>ä¿®æ”¹book_edit.jspè®©æ•°æ®å›æ˜¾ï¼š</strong><br><img src="/2020/04/08/javaweb-02/20.png" alt></p><p><strong>åœ¨BookServletä¸­æ·»åŠ update()æ–¹æ³•ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 1.è·å–ä»book_edit.jspæäº¤çš„è¡¨å•æ•°æ®  å°†æ•°æ®å°è£…åˆ°bookå¯¹è±¡ä¸­</span>    Book book <span class="token operator">=</span> WebUtils<span class="token punctuation">.</span><span class="token function">copyParamToBean</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getParameterMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 2.è°ƒç”¨BookService.update()æ›´æ–°å›¾ä¹¦</span>    bookService<span class="token punctuation">.</span><span class="token function">updateBook</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 3.é‡å®šå‘ manager/bookServlet?action=list åˆ·æ–°å›¾ä¹¦åˆ—è¡¨</span>    resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span> <span class="token string">"/manager/bookServlet?action=list"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><strong>åœ¨book_edit.jspä¸­æ·»åŠ éšè—åŸŸç”¨äºå›ä¼ ä¿®æ”¹å›¾ä¹¦æ‰€éœ€è¦çš„idå€¼ï¼š</strong><br><img src="/2020/04/08/javaweb-02/21.png" alt></p><p><strong>å›¾ä¹¦ä¿¡æ¯å¹¶æ²¡æœ‰å‘ç”Ÿä¿®æ”¹çš„åŸå› ï¼š</strong><br>book_edit.jspé¡µé¢ä¸­æ—¢è¦è¿›è¡Œæ·»åŠ addæ“ä½œï¼Œåˆè¦è¿›è¡Œä¿®æ”¹updateæ“ä½œï¼Œæœ€ç»ˆè¿›è¡Œä½•ç§æ“ä½œæ˜¯æ ¹æ®ä¸€ä¸ªéšè—åŸŸå†³å®šçš„ï¼Œå› æ­¤éœ€è¦åŠ¨æ€ä¿®æ”¹éšè—åŸŸï¼šåœ¨è¯·æ±‚å‘èµ·æ—¶é™„å¸¦ä¸Šè¦æ‰§è¡Œæ“ä½œçš„å€¼ï¼Œå¹¶æ³¨å…¥éšè—åŸŸä¸­ã€‚<br>ä¼ å…¥updateå‚æ•°ï¼š<img src="/2020/04/08/javaweb-02/22.png" style="zoom:100%;"><br>ä¼ å…¥addå‚æ•°ï¼š<img src="/2020/04/08/javaweb-02/23.png" alt><br>æ³¨å…¥éšè—åŸŸï¼š<img src="/2020/04/08/javaweb-02/24.png" alt></p><h4 id="5ã€å®ç°å›¾ä¹¦çš„åˆ†é¡µ"><a href="#5ã€å®ç°å›¾ä¹¦çš„åˆ†é¡µ" class="headerlink" title="5ã€å®ç°å›¾ä¹¦çš„åˆ†é¡µ"></a>5ã€å®ç°å›¾ä¹¦çš„åˆ†é¡µ</h4><p><img src="/2020/04/08/javaweb-02/25.png" alt><br><strong>åˆ›å»ºPageå¯¹è±¡ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>bookmall<span class="token punctuation">.</span>bean<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>List<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * Pageä¸ºåˆ†é¡µçš„æ¨¡å‹ * @param &lt;T> æ˜¯å…·ä½“çš„æ¨¡å—çš„ JavaBean å¯¹è±¡ */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Page</span><span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> Integer PAGE_SIZE <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å½“å‰é¡µç </span>    <span class="token keyword">private</span> Integer pageNo<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// æ€»é¡µç </span>    <span class="token keyword">private</span> Integer pageTotal<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// æ€»è®°å½•æ•°</span>    <span class="token keyword">private</span> Integer pageTotalCount<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// æ¯é¡µæ˜¾ç¤ºçš„æ•°é‡</span>    <span class="token keyword">private</span> Integer pageSize <span class="token operator">=</span> PAGE_SIZE<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å½“å‰é¡µçš„æ•°æ®</span>    <span class="token keyword">private</span> List<span class="token operator">&lt;</span>T<span class="token operator">></span> items<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">Page</span><span class="token punctuation">(</span>Integer pageNo<span class="token punctuation">,</span> Integer pageTotal<span class="token punctuation">,</span> Integer pageTotalCount<span class="token punctuation">,</span> Integer pageSize<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>T<span class="token operator">></span> items<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>pageNo <span class="token operator">=</span> pageNo<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>pageTotal <span class="token operator">=</span> pageTotal<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>pageTotalCount <span class="token operator">=</span> pageTotalCount<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>pageSize <span class="token operator">=</span> pageSize<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>items <span class="token operator">=</span> items<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Integer <span class="token function">getPageSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> PAGE_SIZE<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPageSize</span><span class="token punctuation">(</span>Integer pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>pageSize <span class="token operator">=</span> pageSize<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">getItems</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> items<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setItems</span><span class="token punctuation">(</span>List<span class="token operator">&lt;</span>T<span class="token operator">></span> items<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>items <span class="token operator">=</span> items<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Integer <span class="token function">getPageNo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> pageNo<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPageNo</span><span class="token punctuation">(</span>Integer pageNo<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// å¯¹é¡µç è¿›è¡Œæ£€æŸ¥</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>pageNo<span class="token operator">&lt;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            pageNo <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>pageNo<span class="token operator">></span>pageTotal<span class="token punctuation">)</span><span class="token punctuation">{</span>            pageNo <span class="token operator">=</span> pageTotal<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>pageNo <span class="token operator">=</span> pageNo<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Integer <span class="token function">getPageTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> pageTotal<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPageTotal</span><span class="token punctuation">(</span>Integer pageTotal<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>pageTotal <span class="token operator">=</span> pageTotal<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Integer <span class="token function">getPageTotalCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> pageTotalCount<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPageTotalCount</span><span class="token punctuation">(</span>Integer pageTotalCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>pageTotalCount <span class="token operator">=</span> pageTotalCount<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"Page{"</span> <span class="token operator">+</span>                <span class="token string">"pageNo="</span> <span class="token operator">+</span> pageNo <span class="token operator">+</span>                <span class="token string">", pageTotal="</span> <span class="token operator">+</span> pageTotal <span class="token operator">+</span>                <span class="token string">", pageTotalCount="</span> <span class="token operator">+</span> pageTotalCount <span class="token operator">+</span>                <span class="token string">", pageSize="</span> <span class="token operator">+</span> pageSize <span class="token operator">+</span>                <span class="token string">", items="</span> <span class="token operator">+</span> items <span class="token operator">+</span>                <span class="token string">'}'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>åœ¨BookServletä¸­æ·»page()ç”¨äºå¤„ç†åˆ†é¡µï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">page</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 1.è·å–jsé¡µé¢ä¼ æ¥çš„è¯·æ±‚å‚æ•° pageNo å’Œ pageSize</span>        <span class="token keyword">int</span> pageNo <span class="token operator">=</span> WebUtils<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"pageNo"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> pageSize <span class="token operator">=</span> WebUtils<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"pageSize"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Page<span class="token punctuation">.</span>PAGE_SIZE<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 2.è°ƒç”¨BookService.page(pageNo,pageSize) å¾—åˆ°Pageå¯¹è±¡</span>        Page<span class="token operator">&lt;</span>Book<span class="token operator">></span> page <span class="token operator">=</span> bookService<span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span>pageNo<span class="token punctuation">,</span> pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 3.å°†Pageå¯¹è±¡ä¿å­˜åˆ°RequeståŸŸä¸­</span>        req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"page"</span><span class="token punctuation">,</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 4.è¯·æ±‚è½¬å‘åˆ° /pages/manager/book_manager.jsp</span>        req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/pages/manager/book_manager.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><p><strong>åœ¨BookServiceä¸­æ·»åŠ page(pageNo,pageSize) è·å–pageå¯¹è±¡ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/**     * æŸ¥è¯¢åˆ†é¡µ     * @param pageNo     * @param pageSize     * @return è¿”å›ä¸€ä¸ªPageå¯¹è±¡     */</span>    <span class="token keyword">public</span> Page<span class="token operator">&lt;</span>Book<span class="token operator">></span> <span class="token function">page</span><span class="token punctuation">(</span><span class="token keyword">int</span> pageNo<span class="token punctuation">,</span> <span class="token keyword">int</span> pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>åœ¨BookServiceImplä¸­å®ç°page(pageNo,pageSize)ï¼š</strong></p><pre class=" language-java"><code class="language-java"> <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> Page<span class="token operator">&lt;</span>Book<span class="token operator">></span> <span class="token function">page</span><span class="token punctuation">(</span><span class="token keyword">int</span> pageNo<span class="token punctuation">,</span> <span class="token keyword">int</span> pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Page<span class="token operator">&lt;</span>Book<span class="token operator">></span> bookPage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Page</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//è®¾ç½®æ¯é¡µæ˜¾ç¤ºçš„æ•°é‡</span>        bookPage<span class="token punctuation">.</span><span class="token function">setPageSize</span><span class="token punctuation">(</span>pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è®¾ç½®æ€»è®°å½•æ•°</span>        Integer pageTotalCount <span class="token operator">=</span> bookDao<span class="token punctuation">.</span><span class="token function">queryForPageTotalCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        bookPage<span class="token punctuation">.</span><span class="token function">setPageTotalCount</span><span class="token punctuation">(</span>pageTotalCount<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è®¾ç½®æ€»é¡µç </span>        Integer pageTotal <span class="token operator">=</span> pageTotalCount<span class="token operator">/</span>pageSize<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>pageTotalCount <span class="token operator">%</span> pageSize<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            pageTotal<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        bookPage<span class="token punctuation">.</span><span class="token function">setPageTotal</span><span class="token punctuation">(</span>pageTotal<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è®¾ç½®å½“å‰é¡µç </span>        bookPage<span class="token punctuation">.</span><span class="token function">setPageNo</span><span class="token punctuation">(</span>pageNo<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è®¾ç½®å½“é¡µæ•°æ®</span>        <span class="token keyword">int</span> begin <span class="token operator">=</span> <span class="token punctuation">(</span>bookPage<span class="token punctuation">.</span><span class="token function">getPageNo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>pageSize<span class="token punctuation">;</span>        bookPage<span class="token punctuation">.</span><span class="token function">setItems</span><span class="token punctuation">(</span>bookDao<span class="token punctuation">.</span><span class="token function">queryForItems</span><span class="token punctuation">(</span>begin<span class="token punctuation">,</span>pageSize<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> bookPage<span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><p><strong>åœ¨BookDaoä¸­æ·»åŠ queryForPageTotal()å’ŒqueryForItems()æ–¹æ³•ï¼š</strong></p><pre class=" language-java"><code class="language-java">    <span class="token comment" spellcheck="true">/**     * æŸ¥è¯¢å›¾ä¹¦çš„æ€»è®°å½•æ•°     * @return     */</span>    <span class="token keyword">public</span> Integer <span class="token function">queryForPageTotalCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * æŸ¥è¯¢å½“å‰é¡µé¢çš„å›¾ä¹¦è®°å½•     * @param begin     * @param pageSize     * @return     */</span>    List<span class="token operator">&lt;</span>Book<span class="token operator">></span> <span class="token function">queryForItems</span><span class="token punctuation">(</span><span class="token keyword">int</span> begin<span class="token punctuation">,</span> <span class="token keyword">int</span> pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>åœ¨BookDaoImplä¸­å®ç°queryForPageTotal()å’ŒqueryForItems()æ–¹æ³•ï¼š</strong></p><pre class=" language-java"><code class="language-java">    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> Integer <span class="token function">queryForPageTotalCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        String sql <span class="token operator">=</span> <span class="token string">"select count(*) from book"</span><span class="token punctuation">;</span>        Number count <span class="token operator">=</span> <span class="token punctuation">(</span>Number<span class="token punctuation">)</span> <span class="token function">queryForSingleValue</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span>  count<span class="token punctuation">.</span><span class="token function">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Book<span class="token operator">></span> <span class="token function">queryForItems</span><span class="token punctuation">(</span><span class="token keyword">int</span> begin<span class="token punctuation">,</span> <span class="token keyword">int</span> pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>        String sql <span class="token operator">=</span> <span class="token string">" select `id`, `name`,`author`,`price`,`sales`,`stock`,`img_path` imgPath from book limit ?,?"</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">queryForList</span><span class="token punctuation">(</span>Book<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>sql<span class="token punctuation">,</span>begin<span class="token punctuation">,</span>pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><p><strong>ä¿®æ”¹manage_menu.jspé¡µé¢æ˜¾ç¤ºåˆ†é¡µåçš„å†…å®¹ï¼š</strong><br><img src="/2020/04/08/javaweb-02/26.png" alt></p><p><strong>ä¿®æ”¹book_manage.jspé¡µé¢ï¼Œè®©ä¸‹æ–¹æ˜¾ç¤ºé¡µé¢è·³è½¬çš„åŠŸèƒ½æŒ‰é”®ï¼š</strong></p><pre class=" language-js"><code class="language-js"> <span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span><span class="token operator">></span>        <span class="token comment" spellcheck="true">// åœ¨äº‹ä»¶çš„functionå‡½æ•°ä¸­ï¼Œæœ‰ä¸€ä¸ªthiså¯¹è±¡ï¼Œè¡¨ç¤ºå½“å‰æ­£åœ¨å“åº”äº‹ä»¶çš„domå¯¹è±¡</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">--</span> ç»™åˆ é™¤æŒ‰é’®ç»‘å®šå•å‡»äº‹ä»¶ ç”¨äºåˆ é™¤æ“ä½œçš„ç¡®è®¤    <span class="token operator">--</span><span class="token operator">%</span><span class="token operator">></span>            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"a.deleteClass"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// ç¡®è®¤è¿”å›true  å–æ¶ˆè¿”å›false</span>                <span class="token keyword">return</span> <span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">"ä½ ç¡®å®šåˆ é™¤ã€Š"</span> <span class="token operator">+</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"td:first"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"ã€‹å—ï¼Ÿ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// return false; é˜»æ­¢å…ƒç´ çš„é»˜è®¤è¡Œä¸º  ä¸æäº¤</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#searchPageBtn"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">var</span> pageNo <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#pn_input"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">"${pageScope.basePath}manager/bookServlet?action=page&amp;pageNo="</span> <span class="token operator">+</span> pageNo<span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre><p>ä¿®æ”¹hesd.jsp å°†basePathä¿å­˜è‡³pageContextåŸŸä¸­ï¼šä¾›æŒ‡å®šé¡µé¢è·³è½¬æ—¶ä½¿ç”¨<br><img src="/2020/04/08/javaweb-02/27.png" alt></p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>page_nav<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">å¤§äºé¦–é¡µæ‰æ˜¾ç¤º--%</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo<span class="token punctuation">></span>1}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>manager/bookServlet?action<span class="token punctuation">=</span>page&amp;pageNo<span class="token punctuation">=</span>1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>é¦–é¡µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>manager/bookServlet?action<span class="token punctuation">=</span>page&amp;pageNo<span class="token punctuation">=</span>${requestScope.page.pageNo-1}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¸Šä¸€é¡µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span>  <span class="token attr-name">é¡µç è¾“å‡ºçš„å¼€å§‹--%</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>choose</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">æƒ…å†µ1ï¼šå¦‚æœæ€»é¡µç &lt;</span><span class="token attr-value"><span class="token punctuation">=</span>5,é¡µç çš„èŒƒå›´æ˜¯1~æ€»é¡µç </span> <span class="token attr-name">--%</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageTotal&lt;<span class="token punctuation">=</span>5}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">begin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">end</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageTotal}<span class="token punctuation">"</span></span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>i<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo<span class="token punctuation">=</span><span class="token punctuation">=</span>i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    ã€${i}ã€‘                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo!<span class="token punctuation">=</span>i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>manager/bookServlet?action<span class="token punctuation">=</span>page&amp;pageNo<span class="token punctuation">=</span>${i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>${i}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>when</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--æƒ…å†µ2ï¼šæ€»é¡µç </span><span class="token punctuation">></span></span>5 --%>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageTotal<span class="token punctuation">></span>5}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>choose</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">å½“å‰é¡µç ä¸ºå‰é¢3ä¸ªï¼šé¡µç èŒƒå›´æ˜¯ï¼š1~5--%</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo&lt;<span class="token punctuation">=</span>3}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">begin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">end</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>i<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo<span class="token punctuation">=</span><span class="token punctuation">=</span>i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            ã€${i}ã€‘                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo!<span class="token punctuation">=</span>i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>manager/bookServlet?action<span class="token punctuation">=</span>page&amp;pageNo<span class="token punctuation">=</span>${i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>${i}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>when</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">å½“å‰é¡µç ä¸ºåé¢3ä¸ªï¼šé¡µç èŒƒå›´æ˜¯ï¼šå½“å‰é¡µç -2~æœ«é¡µ--%</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo<span class="token punctuation">></span><span class="token punctuation">=</span>requestScope.page.pageTotal-2}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">begin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo-4}<span class="token punctuation">"</span></span> <span class="token attr-name">end</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageTotal}<span class="token punctuation">"</span></span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>i<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo<span class="token punctuation">=</span><span class="token punctuation">=</span>i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            ã€${i}ã€‘                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo!<span class="token punctuation">=</span>i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>manager/bookServlet?action<span class="token punctuation">=</span>page&amp;pageNo<span class="token punctuation">=</span>${i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>${i}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>when</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">å½“å‰é¡µç ä¸ºä¸­é—´3ä¸ªï¼šé¡µç èŒƒå›´æ˜¯ï¼šå½“å‰é¡µç -2~å½“å‰é¡µç +2--%</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>otherwise</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">begin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo-2}<span class="token punctuation">"</span></span> <span class="token attr-name">end</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo+2}<span class="token punctuation">"</span></span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>i<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo<span class="token punctuation">=</span><span class="token punctuation">=</span>i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            ã€${i}ã€‘                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo!<span class="token punctuation">=</span>i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>manager/bookServlet?action<span class="token punctuation">=</span>page&amp;pageNo<span class="token punctuation">=</span>${i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>${i}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>otherwise</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>choose</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>when</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>choose</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span>  <span class="token attr-name">é¡µç è¾“å‡ºçš„ç»“æŸ--%</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span>  <span class="token attr-name">å°äºæœ«é¡µæ‰æ˜¾ç¤º--%</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo&lt;requestScope.page.pageTotal}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>manager/bookServlet?action<span class="token punctuation">=</span>page&amp;pageNo<span class="token punctuation">=</span>${requestScope.page.pageNo+1}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¸‹ä¸€é¡µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>manager/bookServlet?action<span class="token punctuation">=</span>page&amp;pageNo<span class="token punctuation">=</span>${requestScope.page.pageTotal}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æœ«é¡µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>    å…±${requestScope.page.pageTotal}é¡µï¼Œ${requestScope.page.pageTotalCount}æ¡è®°å½•    åˆ°ç¬¬<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${param.pageNo}<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pn<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pn_input<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>é¡µ    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>searchPageBtn<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ç¡®å®š<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><p><strong>ä¿®æ”¹å¢åˆ æ”¹æ“ä½œçš„é‡å®šå‘åœ°å€å¹¶ä¼ å…¥pageNoå‚æ•°ï¼š</strong><br><img src="/2020/04/08/javaweb-02/28.png" alt></p><p><strong>åœ¨book_manager.jspä¼ å…¥é¡µç pageNoï¼š</strong><br><img src="/2020/04/08/javaweb-02/29.png" alt></p><p><strong>åœ¨book_edit.jspä¸­æ·»åŠ éšè—åŸŸç”¨äºä¼ é€’pageNoç»™BookServletï¼š</strong><br><img src="/2020/04/08/javaweb-02/30.png" alt></p><p><strong>å‰å°å›¾ä¹¦çš„åˆ†é¡µå±•ç¤ºï¼š</strong>|<br><img src="/2020/04/08/javaweb-02/31.png" alt></p><p>webç›®å½•ä¸‹çš„index.jspåªè´Ÿè´£è½¬å‘ï¼š</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">page</span> <span class="token attr-name">contentType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/html;charset<span class="token punctuation">=</span>UTF-8<span class="token punctuation">"</span></span> <span class="token attr-name">language</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>java<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--åªè´Ÿè´£è¯·æ±‚è½¬å‘--%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">jsp:</span>forward</span> <span class="token attr-name">page</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/client/clientBookServlet?action<span class="token punctuation">=</span>page<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">jsp:</span>forward</span><span class="token punctuation">></span></span></code></pre><p>åˆ›å»ºClientBookServletç”¨äºå¤„ç†å‰å°çš„åˆ†é¡µè¯·æ±‚ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>bookmall<span class="token punctuation">.</span>web<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClientBookServlet</span> <span class="token keyword">extends</span> <span class="token class-name">BaseServlet</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> BookService bookService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BookServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * å¤„ç†å›¾ä¹¦åˆ†é¡µ     * @param req     * @param resp     * @throws ServletException     * @throws IOException     */</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">page</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç»è¿‡äº†å‰å°çš„ClientBookServlet"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 1.è·å–jsé¡µé¢ä¼ æ¥çš„è¯·æ±‚å‚æ•° pageNo å’Œ pageSize</span>        <span class="token keyword">int</span> pageNo <span class="token operator">=</span> WebUtils<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"pageNo"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> pageSize <span class="token operator">=</span> WebUtils<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"pageSize"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Page<span class="token punctuation">.</span>PAGE_SIZE<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 2.è°ƒç”¨BookService.page(pageNo,pageSize) å¾—åˆ°Pageå¯¹è±¡</span>        Page<span class="token operator">&lt;</span>Book<span class="token operator">></span> page <span class="token operator">=</span> bookService<span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span>pageNo<span class="token punctuation">,</span> pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 3.å°†Pageå¯¹è±¡ä¿å­˜åˆ°RequeståŸŸä¸­</span>        req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"page"</span><span class="token punctuation">,</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 4.è¯·æ±‚è½¬å‘åˆ° /pages/client/index.jsp</span>        req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/pages/client/index.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>åœ¨webç›®å½•çš„/page/client/è·¯å¾„ä¸‹åˆ›å»ºindex.jspç”¨äºæ˜¾ç¤ºå‰å°å›¾ä¹¦ä¿¡æ¯ï¼š</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">taglib</span> <span class="token attr-name">prefix</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>c<span class="token punctuation">"</span></span> <span class="token attr-name">uri</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://java.sun.com/jsp/jstl/core<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">page</span> <span class="token attr-name">contentType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/html;charset<span class="token punctuation">=</span>UTF-8<span class="token punctuation">"</span></span> <span class="token attr-name">language</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>java<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token doctype">&lt;!DOCTYPE html></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>ä¹¦åŸé¦–é¡µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">é™æ€åŒ…å«</span> <span class="token attr-name">baseæ ‡ç­¾ã€cssæ ·å¼ã€jqueryæ–‡ä»¶</span>   <span class="token attr-name">--%</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@include</span> <span class="token attr-name">file</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/pages/common/head.jsp<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript">        <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#searchPageBtn"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">var</span> pageNo <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#pn_input"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">"${pageScope.basePath}client/clientBookServlet?action=page&amp;pageNo="</span><span class="token operator">+</span>pageNo<span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wel_word<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç½‘ä¸Šä¹¦åŸ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pages/user/login.jsp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç™»å½•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span> |        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pages/user/regist.jsp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ³¨å†Œ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span> <span class="token entity" title="&nbsp;">&amp;nbsp;</span><span class="token entity" title="&nbsp;">&amp;nbsp;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pages/cart/cart.jsp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è´­ç‰©è½¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pages/manager/manager.jsp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>åå°ç®¡ç†<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>main<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>book<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>book_cond<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>get<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                ä»·æ ¼ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>min<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>min<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span> å…ƒ -                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>max<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>max<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span> å…ƒ                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>æŸ¥è¯¢<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">text-align</span><span class="token punctuation">:</span> center</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>æ‚¨çš„è´­ç‰©è½¦ä¸­æœ‰3ä»¶å•†å“<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>                æ‚¨åˆšåˆšå°†<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">color</span><span class="token punctuation">:</span> red</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ—¶é—´ç®€å²<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>åŠ å…¥åˆ°äº†è´­ç‰©è½¦ä¸­            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">items</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.items}<span class="token punctuation">"</span></span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>book<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>b_list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>img_div<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>book_img<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${book.imgPath}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>book_info<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>book_name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sp1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¹¦å:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sp2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>${book.name}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>book_author<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sp1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä½œè€…:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sp2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>${book.author}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>book_price<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sp1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä»·æ ¼:ï¿¥<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sp2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>${book.price}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>book_sales<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sp1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>é”€é‡:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sp2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>${book.sales}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>book_amount<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sp1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>åº“å­˜:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sp2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>${book.stock}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>book_add<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>åŠ å…¥è´­ç‰©è½¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>page_nav<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">å¤§äºé¦–é¡µæ‰æ˜¾ç¤º--%</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo<span class="token punctuation">></span>1}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>client/clientBookServlet?action<span class="token punctuation">=</span>page&amp;pageNo<span class="token punctuation">=</span>1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>é¦–é¡µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>client/clientBookServlet?action<span class="token punctuation">=</span>page&amp;pageNo<span class="token punctuation">=</span>${requestScope.page.pageNo-1}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¸Šä¸€é¡µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span>  <span class="token attr-name">é¡µç è¾“å‡ºçš„å¼€å§‹--%</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>choose</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">æƒ…å†µ1ï¼šå¦‚æœæ€»é¡µç &lt;</span><span class="token attr-value"><span class="token punctuation">=</span>5,é¡µç çš„èŒƒå›´æ˜¯1~æ€»é¡µç </span> <span class="token attr-name">--%</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageTotal&lt;<span class="token punctuation">=</span>5}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">begin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">end</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageTotal}<span class="token punctuation">"</span></span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>i<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo<span class="token punctuation">=</span><span class="token punctuation">=</span>i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        ã€${i}ã€‘                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo!<span class="token punctuation">=</span>i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>client/clientBookServlet?action<span class="token punctuation">=</span>page&amp;pageNo<span class="token punctuation">=</span>${i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>${i}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>when</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--æƒ…å†µ2ï¼šæ€»é¡µç </span><span class="token punctuation">></span></span>5 --%>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageTotal<span class="token punctuation">></span>5}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>choose</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">å½“å‰é¡µç ä¸ºå‰é¢3ä¸ªï¼šé¡µç èŒƒå›´æ˜¯ï¼š1~5--%</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo&lt;<span class="token punctuation">=</span>3}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">begin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">end</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>i<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo<span class="token punctuation">=</span><span class="token punctuation">=</span>i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                ã€${i}ã€‘                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo!<span class="token punctuation">=</span>i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>client/clientBookServlet?action<span class="token punctuation">=</span>page&amp;pageNo<span class="token punctuation">=</span>${i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>${i}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>when</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">å½“å‰é¡µç ä¸ºåé¢3ä¸ªï¼šé¡µç èŒƒå›´æ˜¯ï¼šå½“å‰é¡µç -2~æœ«é¡µ--%</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo<span class="token punctuation">></span><span class="token punctuation">=</span>requestScope.page.pageTotal-2}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">begin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo-4}<span class="token punctuation">"</span></span> <span class="token attr-name">end</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageTotal}<span class="token punctuation">"</span></span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>i<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo<span class="token punctuation">=</span><span class="token punctuation">=</span>i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                ã€${i}ã€‘                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo!<span class="token punctuation">=</span>i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>client/clientBookServlet?action<span class="token punctuation">=</span>page&amp;pageNo<span class="token punctuation">=</span>${i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>${i}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>when</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">å½“å‰é¡µç ä¸ºä¸­é—´3ä¸ªï¼šé¡µç èŒƒå›´æ˜¯ï¼šå½“å‰é¡µç -2~å½“å‰é¡µç +2--%</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>otherwise</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">begin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo-2}<span class="token punctuation">"</span></span> <span class="token attr-name">end</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo+2}<span class="token punctuation">"</span></span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>i<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo<span class="token punctuation">=</span><span class="token punctuation">=</span>i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                ã€${i}ã€‘                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo!<span class="token punctuation">=</span>i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>client/clientBookServlet?action<span class="token punctuation">=</span>page&amp;pageNo<span class="token punctuation">=</span>${i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>${i}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>otherwise</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>choose</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>when</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>choose</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span>  <span class="token attr-name">é¡µç è¾“å‡ºçš„ç»“æŸ--%</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span>  <span class="token attr-name">å°äºæœ«é¡µæ‰æ˜¾ç¤º--%</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo&lt;requestScope.page.pageTotal}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>client/clientBookServlet?action<span class="token punctuation">=</span>page&amp;pageNo<span class="token punctuation">=</span>${requestScope.page.pageNo+1}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¸‹ä¸€é¡µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>client/clientBookServlet?action<span class="token punctuation">=</span>page&amp;pageNo<span class="token punctuation">=</span>${requestScope.page.pageTotal}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æœ«é¡µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>        å…±${requestScope.page.pageTotal}é¡µï¼Œ${requestScope.page.pageTotalCount}æ¡è®°å½•        åˆ°ç¬¬<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${param.pageNo}<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pn<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pn_input<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>é¡µ        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>searchPageBtn<span class="token punctuation">"</span></span>  <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ç¡®å®š<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@include</span> <span class="token attr-name">file</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/pages/common/footer.jsp<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p><strong>æŠ½å–åˆ†é¡µï¼š</strong><br>åœ¨Pageå¯¹è±¡ä¸­æ·»åŠ urlå±æ€§ä»¥åŠç›¸åº”çš„get å’Œsetæ–¹æ³•ï¼š<br><img src="/2020/04/08/javaweb-02/32.png" alt><br>åˆ†åˆ«åœ¨BookServletå’ŒClientBookServletä¸­è®¾ç½®urlå±æ€§å€¼ï¼š<br><img src="/2020/04/08/javaweb-02/33.png" alt></p><p><img src="/2020/04/08/javaweb-02/34.png" alt></p><p>åˆ†åˆ«å°†index.jspå’Œbook_manager.jspä¸­å‡ºç°çš„ç›¸åº”çš„åœ°å€å€¼æ›¿æ¢ä¸º<code>${requestScope.page.url}</code></p><p>åœ¨/pages/common/ä¸‹åˆ›å»ºpage_nav.jspç”¨äºæå–åˆ†é¡µä»£ç ï¼š</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">taglib</span> <span class="token attr-name">prefix</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>c<span class="token punctuation">"</span></span> <span class="token attr-name">uri</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://java.sun.com/jsp/jstl/core<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">page</span> <span class="token attr-name">contentType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/html;charset<span class="token punctuation">=</span>UTF-8<span class="token punctuation">"</span></span> <span class="token attr-name">language</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>java<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>page_nav<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">å¤§äºé¦–é¡µæ‰æ˜¾ç¤º--%</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo<span class="token punctuation">></span>1}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.url}&amp;pageNo<span class="token punctuation">=</span>1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>é¦–é¡µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.url}&amp;pageNo<span class="token punctuation">=</span>${requestScope.page.pageNo-1}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¸Šä¸€é¡µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span>  <span class="token attr-name">é¡µç è¾“å‡ºçš„å¼€å§‹--%</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>choose</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">æƒ…å†µ1ï¼šå¦‚æœæ€»é¡µç &lt;</span><span class="token attr-value"><span class="token punctuation">=</span>5,é¡µç çš„èŒƒå›´æ˜¯1~æ€»é¡µç </span> <span class="token attr-name">--%</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageTotal&lt;<span class="token punctuation">=</span>5}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">begin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">end</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageTotal}<span class="token punctuation">"</span></span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>i<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo<span class="token punctuation">=</span><span class="token punctuation">=</span>i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    ã€${i}ã€‘                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo!<span class="token punctuation">=</span>i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.url}&amp;pageNo<span class="token punctuation">=</span>${i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>${i}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>when</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--æƒ…å†µ2ï¼šæ€»é¡µç </span><span class="token punctuation">></span></span>5 --%>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageTotal<span class="token punctuation">></span>5}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>choose</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">å½“å‰é¡µç ä¸ºå‰é¢3ä¸ªï¼šé¡µç èŒƒå›´æ˜¯ï¼š1~5--%</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo&lt;<span class="token punctuation">=</span>3}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">begin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">end</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>i<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo<span class="token punctuation">=</span><span class="token punctuation">=</span>i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            ã€${i}ã€‘                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo!<span class="token punctuation">=</span>i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.url}&amp;pageNo<span class="token punctuation">=</span>${i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>${i}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>when</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">å½“å‰é¡µç ä¸ºåé¢3ä¸ªï¼šé¡µç èŒƒå›´æ˜¯ï¼šå½“å‰é¡µç -2~æœ«é¡µ--%</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo<span class="token punctuation">></span><span class="token punctuation">=</span>requestScope.page.pageTotal-2}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">begin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo-4}<span class="token punctuation">"</span></span> <span class="token attr-name">end</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageTotal}<span class="token punctuation">"</span></span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>i<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo<span class="token punctuation">=</span><span class="token punctuation">=</span>i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            ã€${i}ã€‘                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo!<span class="token punctuation">=</span>i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.url}&amp;pageNo<span class="token punctuation">=</span>${i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>${i}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>when</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">å½“å‰é¡µç ä¸ºä¸­é—´3ä¸ªï¼šé¡µç èŒƒå›´æ˜¯ï¼šå½“å‰é¡µç -2~å½“å‰é¡µç +2--%</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>otherwise</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">begin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo-2}<span class="token punctuation">"</span></span> <span class="token attr-name">end</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo+2}<span class="token punctuation">"</span></span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>i<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo<span class="token punctuation">=</span><span class="token punctuation">=</span>i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            ã€${i}ã€‘                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo!<span class="token punctuation">=</span>i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.url}&amp;pageNo<span class="token punctuation">=</span>${i}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>${i}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>otherwise</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>choose</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>when</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>choose</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span>  <span class="token attr-name">é¡µç è¾“å‡ºçš„ç»“æŸ--%</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span>  <span class="token attr-name">å°äºæœ«é¡µæ‰æ˜¾ç¤º--%</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.pageNo&lt;requestScope.page.pageTotal}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.url}&amp;pageNo<span class="token punctuation">=</span>${requestScope.page.pageNo+1}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¸‹ä¸€é¡µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.page.url}&amp;pageNo<span class="token punctuation">=</span>${requestScope.page.pageTotal}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æœ«é¡µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>    å…±${requestScope.page.pageTotal}é¡µï¼Œ${requestScope.page.pageTotalCount}æ¡è®°å½•    åˆ°ç¬¬<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${param.pageNo}<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pn<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pn_input<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>é¡µ    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>searchPageBtn<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ç¡®å®š<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><p>åœ¨index.jspå’Œbook_mansger.jspä¸­çš„åˆ†é¡µä»£ç æ›¿æ¢æˆé™æ€åŒ…å«ä»£ç ï¼š</p><pre class=" language-html"><code class="language-html"> &lt;%@include file="/pages/common/page_nav.jsp"%></code></pre><h4 id="6ã€å®ç°ä»·æ ¼åŒºé—´çš„æœç´¢åŠŸèƒ½ï¼š"><a href="#6ã€å®ç°ä»·æ ¼åŒºé—´çš„æœç´¢åŠŸèƒ½ï¼š" class="headerlink" title="6ã€å®ç°ä»·æ ¼åŒºé—´çš„æœç´¢åŠŸèƒ½ï¼š"></a>6ã€å®ç°ä»·æ ¼åŒºé—´çš„æœç´¢åŠŸèƒ½ï¼š</h4><p><img src="/2020/04/08/javaweb-02/35.png" alt></p><p><strong>åœ¨ClientBookClientä¸­æ·»åŠ pageByPrice()æ–¹æ³•ç”¨äºå¤„ç†æœç´¢è¯·æ±‚ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">pageByPrice</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 1.è·å–è¯·æ±‚å‚æ•° pageNo,pageSize,min,max</span>    <span class="token keyword">int</span> pageNo <span class="token operator">=</span> WebUtils<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"pageNo"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> pageSize <span class="token operator">=</span> WebUtils<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"pageSize"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>Page<span class="token punctuation">.</span>PAGE_SIZE<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> min <span class="token operator">=</span> WebUtils<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"min"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> max <span class="token operator">=</span> WebUtils<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"max"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>Integer<span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 2.è°ƒç”¨bookService.pageByPrice(pageNo,pageSize,min,max) è¿”å›pageå¯¹è±¡</span>    Page<span class="token operator">&lt;</span>Book<span class="token operator">></span> page <span class="token operator">=</span> bookService<span class="token punctuation">.</span><span class="token function">pageByPrice</span><span class="token punctuation">(</span>pageNo<span class="token punctuation">,</span>pageSize<span class="token punctuation">,</span>min<span class="token punctuation">,</span>max<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//è®¾ç½®è¯·æ±‚åœ°å€ åˆ†é¡µæ—¶éœ€è¦ä¼ é€’ä»·æ ¼åŒºé—´</span>    StringBuilder stringBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token string">"client/clientBookServlet?action=pageByPrice"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å¯¹ä»·æ ¼åŒºé—´è¿›è¡Œæ£€æŸ¥</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"min"</span><span class="token punctuation">)</span><span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>        stringBuilder<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"&amp;min="</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"min"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"max"</span><span class="token punctuation">)</span><span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>        stringBuilder<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"&amp;max="</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"max"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    page<span class="token punctuation">.</span><span class="token function">setUrl</span><span class="token punctuation">(</span>stringBuilder<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 3.å°†Pageå¯¹è±¡ä¿å­˜åˆ°RequeståŸŸä¸­</span>    req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"page"</span><span class="token punctuation">,</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 4.è¯·æ±‚è½¬å‘åˆ°</span>    req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/pages/client/index.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><strong>åœ¨BookServiceä¸­æ·»åŠ pageByPrice(pageNo,pageSize,min,max)æ–¹æ³•ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * æ ¹æ®ä»·æ ¼åŒºé—´è·å–pageå¯¹è±¡ * @param pageNo * @param pageSize * @param min * @param max * @return */</span>Page<span class="token operator">&lt;</span>Book<span class="token operator">></span> <span class="token function">pageByPrice</span><span class="token punctuation">(</span><span class="token keyword">int</span> pageNo<span class="token punctuation">,</span> <span class="token keyword">int</span> pageSize<span class="token punctuation">,</span> <span class="token keyword">int</span> min<span class="token punctuation">,</span> <span class="token keyword">int</span> max<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>åœ¨BookServiceImplä¸­å®ç°pageByPrice(pageNo,pageSize,min,max)æ–¹æ³•ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> Page<span class="token operator">&lt;</span>Book<span class="token operator">></span> <span class="token function">pageByPrice</span><span class="token punctuation">(</span><span class="token keyword">int</span> pageNo<span class="token punctuation">,</span> <span class="token keyword">int</span> pageSize<span class="token punctuation">,</span> <span class="token keyword">int</span> min<span class="token punctuation">,</span> <span class="token keyword">int</span> max<span class="token punctuation">)</span> <span class="token punctuation">{</span>    Page<span class="token operator">&lt;</span>Book<span class="token operator">></span> bookPage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Page</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//è®¾ç½®æ¯é¡µæ˜¾ç¤ºçš„æ•°é‡</span>    bookPage<span class="token punctuation">.</span><span class="token function">setPageSize</span><span class="token punctuation">(</span>pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è®¾ç½®æ€»è®°å½•æ•°</span>    Integer pageTotalCount <span class="token operator">=</span> bookDao<span class="token punctuation">.</span><span class="token function">queryForPageTotalCountByPrice</span><span class="token punctuation">(</span>min<span class="token punctuation">,</span>max<span class="token punctuation">)</span><span class="token punctuation">;</span>    bookPage<span class="token punctuation">.</span><span class="token function">setPageTotalCount</span><span class="token punctuation">(</span>pageTotalCount<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è®¾ç½®æ€»é¡µç </span>    Integer pageTotal <span class="token operator">=</span> pageTotalCount<span class="token operator">/</span>pageSize<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>pageTotalCount <span class="token operator">%</span> pageSize<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        pageTotal<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    bookPage<span class="token punctuation">.</span><span class="token function">setPageTotal</span><span class="token punctuation">(</span>pageTotal<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è®¾ç½®å½“å‰é¡µç </span>    bookPage<span class="token punctuation">.</span><span class="token function">setPageNo</span><span class="token punctuation">(</span>pageNo<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è®¾ç½®å½“é¡µæ•°æ®</span>    <span class="token keyword">int</span> begin <span class="token operator">=</span> <span class="token punctuation">(</span>bookPage<span class="token punctuation">.</span><span class="token function">getPageNo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>pageSize<span class="token punctuation">;</span>    bookPage<span class="token punctuation">.</span><span class="token function">setItems</span><span class="token punctuation">(</span>bookDao<span class="token punctuation">.</span><span class="token function">queryForItemsByPrice</span><span class="token punctuation">(</span>begin<span class="token punctuation">,</span>pageSize<span class="token punctuation">,</span>min<span class="token punctuation">,</span>max<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> bookPage<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><strong>åœ¨BookDaoä¸­æ·»åŠ queryForPageTotalCountByPrice(int min, int max)å’ŒqueryForItemsByPrice(int begin, int pageSize, int min, int max)æ–¹æ³•ï¼š</strong></p><pre class=" language-java"><code class="language-java"> <span class="token comment" spellcheck="true">/**     * æ ¹æ®ä»·æ ¼åŒºé—´æŸ¥è¯¢æ€»è®°å½•æ•°     * @param min     * @param max     * @return     */</span>    Integer <span class="token function">queryForPageTotalCountByPrice</span><span class="token punctuation">(</span><span class="token keyword">int</span> min<span class="token punctuation">,</span> <span class="token keyword">int</span> max<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * æ ¹æ®ä»·æ ¼åŒºé—´æŸ¥è¯¢æ‰€æœ‰è®°å½•     * @param begin     * @param pageSize     * @param min     * @param max     * @return     */</span>    List<span class="token operator">&lt;</span>Book<span class="token operator">></span> <span class="token function">queryForItemsByPrice</span><span class="token punctuation">(</span><span class="token keyword">int</span> begin<span class="token punctuation">,</span> <span class="token keyword">int</span> pageSize<span class="token punctuation">,</span> <span class="token keyword">int</span> min<span class="token punctuation">,</span> <span class="token keyword">int</span> max<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><strong>åœ¨BookDaoImplä¸­å®ç°è¿™ä¸¤ç§æ–¹æ³•ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> Integer <span class="token function">queryForPageTotalCountByPrice</span><span class="token punctuation">(</span><span class="token keyword">int</span> min<span class="token punctuation">,</span> <span class="token keyword">int</span> max<span class="token punctuation">)</span> <span class="token punctuation">{</span>    String sql <span class="token operator">=</span> <span class="token string">"select count(*) from book where price between ? and ?"</span><span class="token punctuation">;</span>    Number count <span class="token operator">=</span> <span class="token punctuation">(</span>Number<span class="token punctuation">)</span> <span class="token function">queryForSingleValue</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>min<span class="token punctuation">,</span>max<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span>  count<span class="token punctuation">.</span><span class="token function">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> List<span class="token operator">&lt;</span>Book<span class="token operator">></span> <span class="token function">queryForItemsByPrice</span><span class="token punctuation">(</span><span class="token keyword">int</span> begin<span class="token punctuation">,</span> <span class="token keyword">int</span> pageSize<span class="token punctuation">,</span> <span class="token keyword">int</span> min<span class="token punctuation">,</span> <span class="token keyword">int</span> max<span class="token punctuation">)</span> <span class="token punctuation">{</span>    String sql <span class="token operator">=</span> <span class="token string">" select `id`, `name`,`author`,`price`,`sales`,`stock`,`img_path` imgPath from book"</span> <span class="token operator">+</span>            <span class="token string">" where price between ? and ? order by price limit ?,?"</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">queryForList</span><span class="token punctuation">(</span>Book<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>sql<span class="token punctuation">,</span>min<span class="token punctuation">,</span>max<span class="token punctuation">,</span>begin<span class="token punctuation">,</span>pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><strong>ä¿®æ”¹index.jspå‘æœåŠ¡å™¨æäº¤æœç´¢è¯·æ±‚ï¼š</strong></p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>book_cond<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>client/clientBookServlet<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>get<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hidden<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>action<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pageByPrice<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            ä»·æ ¼ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>min<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>min<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${param.min}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> å…ƒ -            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>max<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>max<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${param.max}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> å…ƒ            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>æŸ¥è¯¢<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><h2 id="åä¸€ã€ä¿å­˜ç”¨æˆ·ç™»å½•ä¹‹åçš„ä¿¡æ¯"><a href="#åä¸€ã€ä¿å­˜ç”¨æˆ·ç™»å½•ä¹‹åçš„ä¿¡æ¯" class="headerlink" title="åä¸€ã€ä¿å­˜ç”¨æˆ·ç™»å½•ä¹‹åçš„ä¿¡æ¯"></a>åä¸€ã€ä¿å­˜ç”¨æˆ·ç™»å½•ä¹‹åçš„ä¿¡æ¯</h2><p>åœ¨UserServletæ·»åŠ ä¿å­˜ç”¨æˆ·ç™»å½•ä¿¡æ¯åˆ°SessionåŸŸä¸­çš„ä»£ç ï¼š<br><img src="/2020/04/08/javaweb-02/36.png" alt></p><p>åœ¨login_success_menu.jspä¸­ æ˜¾ç¤ºç”¨æˆ·å§“åï¼š<br><img src="/2020/04/08/javaweb-02/37.png" alt></p><p>ä¿®æ”¹index.jspçš„èœå•æ˜¾ç¤ºï¼š</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span>  <span class="token attr-name">å¦‚æœç”¨æˆ·è¿˜æ²¡æœ‰ç™»å½•ï¼Œæ˜¾ç¤ºç™»å½•å’Œæ³¨å†Œèœå•</span> <span class="token attr-name">--%</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${empty sessionScope.user}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pages/user/login.jsp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç™»å½•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>/         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pages/user/regist.jsp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ³¨å†Œ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span>  <span class="token attr-name">å¦‚æœç”¨æˆ·å·²ç»ç™»å½•ï¼Œåˆ™æ˜¾ç¤ºç™»å½•æˆåŠŸä¹‹åç”¨æˆ·çš„ä¿¡æ¯</span> <span class="token attr-name">--%</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${not empty sessionScope.user}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>æ¬¢è¿<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>um_span<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>${sessionScope.user.username}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>å…‰ä¸´ä¹¦åŸ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pages/order/order.jsp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æˆ‘çš„è®¢å•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pages/cart/cart.jsp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è´­ç‰©è½¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pages/manager/manager.jsp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>åå°ç®¡ç†<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>index.jsp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ³¨é”€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token entity" title="&nbsp;">&amp;nbsp;</span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><p><strong><font color="red">æ³¨æ„ï¼š</font></strong><br>å›ºå®šç›¸å¯¹è·¯å¾„è·³è½¬ä½¿ç”¨çš„åœ°å€å¿…é¡»æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œå¦åˆ™åœ¨è¿›è¡Œè·³è½¬æ—¶Tomcatä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Sessionï¼Œé€ æˆSessionä¼šè¯ä¿¡æ¯ä¸¢å¤±ï¼<br><img src="/2020/04/08/javaweb-02/38.png" alt></p><h2 id="åäºŒã€æ³¨é”€ç™»å½•"><a href="#åäºŒã€æ³¨é”€ç™»å½•" class="headerlink" title="åäºŒã€æ³¨é”€ç™»å½•"></a>åäºŒã€æ³¨é”€ç™»å½•</h2><p>åœ¨userServletä¸­æ·»åŠ logout()æ–¹æ³•ç”¨äºå¤„ç†æ³¨é”€è¯·æ±‚ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">logout</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 1.é”€æ¯ Session</span>    req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 2.é‡å®šå‘åˆ°é¦–é¡µ</span>    resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>ä¿®æ”¹jspé¡µé¢çš„è·³è½¬åœ°å€ï¼š<br><img src="/2020/04/08/javaweb-02/39.png" alt></p><h2 id="åä¸‰ã€ä½¿ç”¨éªŒè¯ç è§£å†³è¡¨å•çš„é‡å¤æäº¤"><a href="#åä¸‰ã€ä½¿ç”¨éªŒè¯ç è§£å†³è¡¨å•çš„é‡å¤æäº¤" class="headerlink" title="åä¸‰ã€ä½¿ç”¨éªŒè¯ç è§£å†³è¡¨å•çš„é‡å¤æäº¤"></a>åä¸‰ã€ä½¿ç”¨éªŒè¯ç è§£å†³è¡¨å•çš„é‡å¤æäº¤</h2><p>è¡¨å•é‡å¤æäº¤æœ‰ä¸‰ç§å¸¸è§çš„æƒ…å†µï¼š<br>ä¸€ï¼šæäº¤å®Œè¡¨å•ã€‚æœåŠ¡å™¨ä½¿ç”¨è¯·æ±‚è½¬æ¥è¿›è¡Œé¡µé¢è·³è½¬ã€‚è¿™ä¸ªæ—¶å€™ï¼Œç”¨æˆ·æŒ‰ä¸‹åŠŸèƒ½é”®F5ï¼Œå°±ä¼šå‘èµ·æœ€åä¸€æ¬¡çš„è¯·æ±‚ã€‚é€ æˆè¡¨å•é‡å¤æäº¤é—®é¢˜ã€‚è§£å†³æ–¹æ³•ï¼šä½¿ç”¨é‡å®šå‘æ¥è¿›è¡Œè·³è½¬ã€‚<br>äºŒï¼šç”¨æˆ·æ­£å¸¸æäº¤æœåŠ¡å™¨ï¼Œä½†æ˜¯ç”±äºç½‘ç»œå»¶è¿Ÿç­‰åŸå› ï¼Œè¿Ÿè¿Ÿæœªæ”¶åˆ°æœåŠ¡å™¨çš„å“åº”ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œç”¨æˆ·ä»¥ä¸ºæäº¤å¤±è´¥ï¼Œ<br>å°±ä¼šç€æ€¥ï¼Œç„¶åå¤šç‚¹äº†å‡ æ¬¡æäº¤æ“ä½œï¼Œä¹Ÿä¼šé€ æˆè¡¨å•é‡å¤æäº¤ã€‚<br>ä¸‰ï¼šç”¨æˆ·æ­£å¸¸æäº¤æœåŠ¡å™¨ã€‚æœåŠ¡å™¨ä¹Ÿæ²¡æœ‰å»¶è¿Ÿï¼Œä½†æ˜¯æäº¤å®Œæˆåï¼Œç”¨æˆ·å›é€€æµè§ˆå™¨ã€‚é‡æ–°æäº¤ã€‚ä¹Ÿä¼šé€ æˆè¡¨å•é‡å¤<br>æäº¤ã€‚<br><img src="/2020/04/08/javaweb-02/40.png" alt></p><p>1.å¯¼å…¥è°·æ­ŒéªŒè¯ç çš„jaråŒ…ï¼škaptcha-2.3.2.jar<br>2.åœ¨web.xmlä¸­é…ç½®ç”¨äºè®¿é—®ç”ŸæˆéªŒè¯ç çš„Servletç¨‹åºçš„åœ°å€</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>KaptchaServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>com.google.code.kaptcha.servlet.KaptchaServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>KaptchaServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/kaptcha.jpg<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span></code></pre><p>3.åœ¨è¡¨å•ä¸­ä½¿ç”¨imgæ ‡ç­¾æ˜¾ç¤ºéªŒè¯ç å›¾ç‰‡</p><pre class=" language-html"><code class="language-html"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">></span></span>éªŒè¯ç ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>itxt<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">150</span>px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>code<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>code<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>code_img<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>kaptcha.jpg<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">40</span>px<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span><span class="token number">120</span>px</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span><span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">80%</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>çœ‹ä¸æ¸…ï¼Ÿç‚¹å‡»å›¾ç‰‡åˆ·æ–°<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span></code></pre><p>4.åœ¨æœåŠ¡ç«¯ä¸­è·å–ç”Ÿæˆçš„éªŒè¯ç å¹¶äºä¸å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„éªŒè¯ç æ¯”è¾ƒ<br><img src="/2020/04/08/javaweb-02/41.png" alt></p><p>5.ç»™éªŒè¯ç å›¾ç‰‡ç»‘å®šå•å‡»äº‹ä»¶ç”¨äºåˆ·æ–°éªŒè¯ç ï¼š</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// ç»™éªŒè¯ç å›¾ç‰‡ç»‘å®šå•å‡»äº‹ä»¶</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#code_img"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// æ·»åŠ ä¸€ä¸ªéšæœºæ•°é¿å…è¯·æ±‚åœ°å€ç›¸åŒï¼Œå› ä¸ºæµè§ˆå™¨ç¼“å­˜é€ æˆä¸åˆ·æ–°</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">"${basePath}kaptcha.jpg?n="</span><span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="åå››ã€è´­ç‰©è½¦æ¨¡å—"><a href="#åå››ã€è´­ç‰©è½¦æ¨¡å—" class="headerlink" title="åå››ã€è´­ç‰©è½¦æ¨¡å—"></a>åå››ã€è´­ç‰©è½¦æ¨¡å—</h2><p><img src="/2020/04/08/javaweb-02/42.png" alt></p><h3 id="1ã€åˆ›å»ºè´­ç‰©è½¦å¯¹è±¡"><a href="#1ã€åˆ›å»ºè´­ç‰©è½¦å¯¹è±¡" class="headerlink" title="1ã€åˆ›å»ºè´­ç‰©è½¦å¯¹è±¡"></a>1ã€åˆ›å»ºè´­ç‰©è½¦å¯¹è±¡</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cart</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// private Integer totalCount;// å•†å“æ€»æ•°</span>    <span class="token comment" spellcheck="true">// private BigDecimal totalPrice;// æ€»å•†å“é‡‘é¢</span>    <span class="token keyword">private</span> Map<span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span> CartItem<span class="token operator">></span> items <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashMap</span><span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span> CartItem<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> Integer <span class="token function">getTotalCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        Integer totalCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>Map<span class="token punctuation">.</span>Entry<span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span> CartItem<span class="token operator">></span> entry <span class="token operator">:</span> items<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            totalCount <span class="token operator">+=</span> entry<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> totalCount<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> BigDecimal <span class="token function">getTotalPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        BigDecimal totalPrice <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>Map<span class="token punctuation">.</span>Entry<span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span> CartItem<span class="token operator">></span> entry <span class="token operator">:</span> items<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            totalPrice <span class="token operator">=</span> totalPrice<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTotalPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> totalPrice<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Map<span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span> CartItem<span class="token operator">></span> <span class="token function">getItems</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> items<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setItems</span><span class="token punctuation">(</span>Map<span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span> CartItem<span class="token operator">></span> items<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>items <span class="token operator">=</span> items<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"Cart{"</span> <span class="token operator">+</span>                <span class="token string">"totalCount="</span> <span class="token operator">+</span> <span class="token function">getTotalCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span>                <span class="token string">", totalPrice="</span> <span class="token operator">+</span> <span class="token function">getTotalPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span>                <span class="token string">", items="</span> <span class="token operator">+</span> items <span class="token operator">+</span>                <span class="token string">'}'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// æ·»åŠ å•†å“é¡¹</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addItem</span><span class="token punctuation">(</span>CartItem cartItem<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆ¤æ–­å•†å“æ˜¯å¦å·²ç»æ·»åŠ </span>        CartItem item <span class="token operator">=</span> items<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cartItem<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            items<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>cartItem<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cartItem<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            item<span class="token punctuation">.</span><span class="token function">setCount</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            item<span class="token punctuation">.</span><span class="token function">setTotalPrice</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// åˆ é™¤å•†å“é¡¹</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteItem</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        items<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// æ¸…ç©ºè´­ç‰©è½¦</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">clean</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        items<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// ä¿®æ”¹å•†å“æ•°é‡</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateCount</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">,</span> Integer count<span class="token punctuation">)</span> <span class="token punctuation">{</span>        CartItem item <span class="token operator">=</span> items<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            item<span class="token punctuation">.</span><span class="token function">setCount</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>            item<span class="token punctuation">.</span><span class="token function">setTotalPrice</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="2ã€åˆ›å»ºè´­ç‰©è½¦å•†å“é¡¹"><a href="#2ã€åˆ›å»ºè´­ç‰©è½¦å•†å“é¡¹" class="headerlink" title="2ã€åˆ›å»ºè´­ç‰©è½¦å•†å“é¡¹"></a>2ã€åˆ›å»ºè´­ç‰©è½¦å•†å“é¡¹</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CartItem</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> Integer id<span class="token punctuation">;</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> Integer count<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// æ•°é‡</span>    <span class="token keyword">private</span> BigDecimal price<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å•ä»·</span>    <span class="token keyword">private</span> BigDecimal totalPrice<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å•†å“æ€»ä»·</span>    <span class="token keyword">public</span> <span class="token function">CartItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">CartItem</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">,</span> String name<span class="token punctuation">,</span> Integer count<span class="token punctuation">,</span> BigDecimal price<span class="token punctuation">,</span> BigDecimal totalPrice<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> count<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>totalPrice <span class="token operator">=</span> totalPrice<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Integer <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Integer <span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> count<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCount</span><span class="token punctuation">(</span>Integer count<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> count<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> BigDecimal <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> price<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPrice</span><span class="token punctuation">(</span>BigDecimal price<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> BigDecimal <span class="token function">getTotalPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> totalPrice<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTotalPrice</span><span class="token punctuation">(</span>BigDecimal totalPrice<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>totalPrice <span class="token operator">=</span> totalPrice<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"CartItem{"</span> <span class="token operator">+</span>                <span class="token string">"id="</span> <span class="token operator">+</span> id <span class="token operator">+</span>                <span class="token string">", name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">", count="</span> <span class="token operator">+</span> count <span class="token operator">+</span>                <span class="token string">", price="</span> <span class="token operator">+</span> price <span class="token operator">+</span>                <span class="token string">", totalPrice="</span> <span class="token operator">+</span> totalPrice <span class="token operator">+</span>                <span class="token string">'}'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="3ã€CartServletç”¨äºå¤„ç†å•†å“çš„æ·»åŠ ã€åˆ é™¤ã€æ¸…ç©ºå’Œä¿®æ”¹æ•°é‡"><a href="#3ã€CartServletç”¨äºå¤„ç†å•†å“çš„æ·»åŠ ã€åˆ é™¤ã€æ¸…ç©ºå’Œä¿®æ”¹æ•°é‡" class="headerlink" title="3ã€CartServletç”¨äºå¤„ç†å•†å“çš„æ·»åŠ ã€åˆ é™¤ã€æ¸…ç©ºå’Œä¿®æ”¹æ•°é‡"></a>3ã€CartServletç”¨äºå¤„ç†å•†å“çš„æ·»åŠ ã€åˆ é™¤ã€æ¸…ç©ºå’Œä¿®æ”¹æ•°é‡</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CartServlet</span> <span class="token keyword">extends</span> <span class="token class-name">BaseServlet</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> BookService bookService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BookServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">addItem</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// System.out.println("åŠ å…¥è´­ç‰©è½¦");</span>        <span class="token comment" spellcheck="true">// è·å–è¯·æ±‚å‚æ•°  å•†å“ç¼–å·</span>        <span class="token keyword">int</span> id <span class="token operator">=</span> WebUtils<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è°ƒç”¨bookService.queryBookById(id) å¾—åˆ°å›¾ä¹¦ä¿¡æ¯</span>        Book book <span class="token operator">=</span> bookService<span class="token punctuation">.</span><span class="token function">queryBookById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å°†å›¾ä¹¦ä¿¡æ¯è½¬æ¢ä½CartItemå•†å“é¡¹</span>        CartItem cartItem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CartItem</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>book<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>book<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>book<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è°ƒç”¨cart.add(CartItem)æ·»åŠ è‡³è´­ç‰©è½¦</span>        Cart cart <span class="token operator">=</span> <span class="token punctuation">(</span>Cart<span class="token punctuation">)</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"cart"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>cart <span class="token operator">==</span> null<span class="token punctuation">)</span><span class="token punctuation">{</span>            cart <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"cart"</span><span class="token punctuation">,</span>cart<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        cart<span class="token punctuation">.</span><span class="token function">addItem</span><span class="token punctuation">(</span>cartItem<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// System.out.println(cart);</span>        <span class="token comment" spellcheck="true">// é‡å®šå‘åˆ°åŸæ¥å•†å“æ‰€åœ¨çš„é¡µé¢</span>        resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"Referer"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">deleteItem</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// è·å–è¯·æ±‚å‚æ•° id</span>        <span class="token keyword">int</span> id <span class="token operator">=</span> WebUtils<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è°ƒç”¨cart.deleteItem(id)</span>        Cart cart <span class="token operator">=</span> <span class="token punctuation">(</span>Cart<span class="token punctuation">)</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"cart"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>cart <span class="token operator">!=</span> null<span class="token punctuation">)</span><span class="token punctuation">{</span>            cart<span class="token punctuation">.</span><span class="token function">deleteItem</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>       resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"Referer"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// è·å–è´­ç‰©è½¦å¯¹è±¡</span>        Cart cart <span class="token operator">=</span> <span class="token punctuation">(</span>Cart<span class="token punctuation">)</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"cart"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è°ƒç”¨cart.clear()</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>cart<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>            cart<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"Referer"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">updateCount</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// è·å–è¯·æ±‚çš„å‚æ•°  å•†å“ç¼–å·  å•†å“æ•°é‡</span>        <span class="token keyword">int</span> id <span class="token operator">=</span> WebUtils<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> count <span class="token operator">=</span> WebUtils<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"count"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è·å–Cartå¯¹è±¡</span>        Cart cart <span class="token operator">=</span> <span class="token punctuation">(</span>Cart<span class="token punctuation">)</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"cart"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>cart<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// è°ƒç”¨updateCountæ–¹æ³•</span>            cart<span class="token punctuation">.</span><span class="token function">updateCount</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"Referer"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="4ã€è´­ç‰©è½¦é¡µé¢çš„å±•ç¤º"><a href="#4ã€è´­ç‰©è½¦é¡µé¢çš„å±•ç¤º" class="headerlink" title="4ã€è´­ç‰©è½¦é¡µé¢çš„å±•ç¤º"></a>4ã€è´­ç‰©è½¦é¡µé¢çš„å±•ç¤º</h3><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript">    <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// ç»™åˆ é™¤å•†å“ç»‘å®šå•å‡»äº‹ä»¶</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"a.deleteItem"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">"ç¡®å®šä»è´­ç‰©è½¦ä¸­åˆ é™¤ã€Š"</span><span class="token operator">+</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"td:first"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"ã€‹å—ï¼Ÿ"</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ç»™æ¸…ç©ºè´­ç‰©è½¦ç»‘å®šå•å‡»äº‹ä»¶</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#clearCart"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>           <span class="token keyword">return</span>  <span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">"ç¡®å®šæ¸…ç©ºè´­ç‰©è½¦ï¼Ÿ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ç»™ä¿®æ”¹å•†å“æ•°é‡ç»‘å®šå¤±å»ç„¦ç‚¹äº‹ä»¶  --- onchangeäº‹ä»¶åˆ¤æ–­å†…å®¹æ˜¯å¦æ”¹å˜</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".updateCount"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">change</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">var</span> id <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"bookId"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">"ç¡®å®šä¿®æ”¹å•†å“çš„æ•°é‡ä¸º "</span><span class="token operator">+</span>count<span class="token operator">+</span><span class="token string">" å—ï¼Ÿ"</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>count<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                location<span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token string">"${PageScope.basePath}cartServlet?action=updateCount&amp;count="</span><span class="token operator">+</span>count<span class="token operator">+</span><span class="token string">"&amp;id="</span><span class="token operator">+</span>id<span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>defaultValue<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æ¢å¤åˆ°åŸæ¥çš„æ•°æ®</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wel_word<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è´­ç‰©è½¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span>   <span class="token attr-name">é™æ€åŒ…å«ï¼Œç™»å½•æˆåŠŸä¹‹åçš„èœå•</span>    <span class="token attr-name">--%</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@include</span> <span class="token attr-name">file</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/pages/common/login_sucess_menu.jsp<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>main<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>å•†å“åç§°<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>æ•°é‡<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>å•ä»·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>é‡‘é¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>æ“ä½œ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${empty sessionScope.cart.items}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">colspan</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>index.jsp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å½“å‰è´­ç‰©è½¦ä¸ºç©ºï¼ç‚¹å‡»æµè§ˆå•†å“<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${not empty sessionScope.cart.items}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span> <span class="token attr-name">è´­ç‰©è½¦éç©ºæ‰è¾“å‡º--%</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">items</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${sessionScope.cart.items}<span class="token punctuation">"</span></span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>entry<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${entry.value.name}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>                         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>updateCount<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name">                                <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">80</span>px<span class="token punctuation">;</span><span class="token property">text-align</span><span class="token punctuation">:</span> center</span><span class="token punctuation">"</span></span>                                <span class="token attr-name">bookId</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${entry.value.id}<span class="token punctuation">"</span></span>                                <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>number<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${entry.value.count}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${entry.value.price}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${entry.value.totalPrice}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>deleteItem<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cartServlet?action<span class="token punctuation">=</span>deleteItem&amp;id<span class="token punctuation">=</span>${entry.value.id}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>åˆ é™¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${not empty sessionScope.cart.items}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cart_info<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cart_span<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è´­ç‰©è½¦ä¸­å…±æœ‰<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>b_count<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>${sessionScope.cart.totalCount}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>ä»¶å•†å“<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cart_span<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ€»é‡‘é¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>b_price<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>${sessionScope.cart.totalPrice}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>å…ƒ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cart_span<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>clearCart<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cartServlet?action<span class="token punctuation">=</span>clear<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ¸…ç©ºè´­ç‰©è½¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cart_span<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pages/cart/checkout<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å»ç»“è´¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><h3 id="5ã€ä¿®æ”¹é¦–é¡µ"><a href="#5ã€ä¿®æ”¹é¦–é¡µ" class="headerlink" title="5ã€ä¿®æ”¹é¦–é¡µ"></a>5ã€ä¿®æ”¹é¦–é¡µ</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// æ·»åŠ åˆ°è´­ç‰©è½¦</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"button.addToCart"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * åœ¨äº‹ä»¶å“åº”çš„functionå‡½æ•°ä¸­  thisè¡¨ç¤ºæ­£åœ¨å“åº”çš„domå¯¹è±¡  $(this)è¡¨ç¤ºç»è¿‡jqueryå°è£…åçš„domå¯¹è±¡     * @type {jQuery}     */</span>    <span class="token comment" spellcheck="true">// åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>$<span class="token punctuation">{</span>sessionScope<span class="token punctuation">.</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"æ‚¨è¿˜æ²¡æœ‰ç™»å½•ï¼Œè¯·å…ˆç™»å½•æˆ–æ³¨å†Œï¼"</span><span class="token punctuation">)</span>        location<span class="token punctuation">.</span>href <span class="token operator">=</span><span class="token string">"${pageScope.basePath}pages/user/login.jsp"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span><span class="token punctuation">{</span>        <span class="token keyword">var</span> bookid <span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"bookid"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è·å–é€‰ä¸­å…ƒç´ çš„å±æ€§å€¼</span>        location<span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token string">"${pageScope.basePath}cartServlet?action=addItem&amp;id="</span><span class="token operator">+</span>bookid<span class="token punctuation">;</span>    <span class="token punctuation">}</span>   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-jsp"><code class="language-jsp"><div class="book_add">    <button bookid="${book.id}" class="addToCart">åŠ å…¥è´­ç‰©è½¦</button></div></code></pre><h3 id="6ã€é¦–é¡µè´­ç‰©è½¦æ•°æ®å›æ˜¾"><a href="#6ã€é¦–é¡µè´­ç‰©è½¦æ•°æ®å›æ˜¾" class="headerlink" title="6ã€é¦–é¡µè´­ç‰©è½¦æ•°æ®å›æ˜¾"></a>6ã€é¦–é¡µè´­ç‰©è½¦æ•°æ®å›æ˜¾</h3><p>åœ¨addItem()ä¸­å°†æ·»åŠ çš„å›¾ä¹¦ä¿¡æ¯ä¿å­˜åˆ°sessionåŸŸä¸­ï¼š<br><img src="/2020/04/08/javaweb-02/43.png" alt></p><p>åœ¨é¦–é¡µæ˜¾ç¤ºéœ€è¦çš„ä¿¡æ¯ï¼š</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>æ‚¨çš„è´­ç‰©è½¦ä¸­æœ‰<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">color</span><span class="token punctuation">:</span> blue</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>${sessionScope.cart.totalCount}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>ä»¶å•†å“<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--</span>  <span class="token attr-name">è´­ç‰©è½¦ä¸ºç©º--%</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${empty sessionScope.cart.items}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">color</span><span class="token punctuation">:</span> red</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å½“å‰è´­ç‰©è½¦ä¸ºç©º~<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${not empty sessionScope.cart.items}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>           æ‚¨åˆšåˆšå°†<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">color</span><span class="token punctuation">:</span> red</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>${sessionScope.itemName}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>åŠ å…¥åˆ°äº†è´­ç‰©è½¦ä¸­     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></code></pre><h2 id="åäº”ã€è®¢å•æ¨¡å—"><a href="#åäº”ã€è®¢å•æ¨¡å—" class="headerlink" title="åäº”ã€è®¢å•æ¨¡å—"></a>åäº”ã€è®¢å•æ¨¡å—</h2><p><img src="/2020/04/08/javaweb-02/44.png" alt></p><h3 id="1ã€åˆ›å»ºOrder-ä¸OrderItemå¯¹è±¡"><a href="#1ã€åˆ›å»ºOrder-ä¸OrderItemå¯¹è±¡" class="headerlink" title="1ã€åˆ›å»ºOrder ä¸OrderItemå¯¹è±¡"></a>1ã€åˆ›å»ºOrder ä¸OrderItemå¯¹è±¡</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> String orderId<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è®¢å•å·</span>    <span class="token keyword">private</span> Date createTime<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä¸‹å•æ—¶é—´</span>    <span class="token keyword">private</span> BigDecimal price<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è®¢å•ä»·æ ¼</span>    <span class="token keyword">private</span> Integer status <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 0 æœªå‘è´§  1 å·²å‘è´§ 2 å·²ç­¾æ”¶</span>    <span class="token keyword">private</span> Integer userId<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">Order</span><span class="token punctuation">(</span>String orderId<span class="token punctuation">,</span> Date createTime<span class="token punctuation">,</span> BigDecimal price<span class="token punctuation">,</span> Integer status<span class="token punctuation">,</span> Integer userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>orderId <span class="token operator">=</span> orderId<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>createTime <span class="token operator">=</span> createTime<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> status<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>userId <span class="token operator">=</span> userId<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getOrderId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> orderId<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setOrderId</span><span class="token punctuation">(</span>String orderId<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>orderId <span class="token operator">=</span> orderId<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Date <span class="token function">getCreateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> createTime<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCreateTime</span><span class="token punctuation">(</span>Date createTime<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>createTime <span class="token operator">=</span> createTime<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> BigDecimal <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> price<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPrice</span><span class="token punctuation">(</span>BigDecimal price<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Integer <span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> status<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStatus</span><span class="token punctuation">(</span>Integer status<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> status<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Integer <span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> userId<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUserId</span><span class="token punctuation">(</span>Integer userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>userId <span class="token operator">=</span> userId<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"Order{"</span> <span class="token operator">+</span>                <span class="token string">"orderId="</span> <span class="token operator">+</span> orderId <span class="token operator">+</span>                <span class="token string">", createTime="</span> <span class="token operator">+</span> createTime <span class="token operator">+</span>                <span class="token string">", price="</span> <span class="token operator">+</span> price <span class="token operator">+</span>                <span class="token string">", status="</span> <span class="token operator">+</span> status <span class="token operator">+</span>                <span class="token string">", userId="</span> <span class="token operator">+</span> userId <span class="token operator">+</span>                <span class="token string">'}'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderItem</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> Integer id<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å•†å“ç¼–å·</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å•†å“åç§°</span>    <span class="token keyword">private</span> Integer count<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å•†å“æ•°é‡</span>    <span class="token keyword">private</span> BigDecimal price<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å•†å“æ€»ä»·æ ¼</span>    <span class="token keyword">private</span> BigDecimal totalPrice<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å•†å“æ€»ä»·æ ¼</span>    <span class="token keyword">private</span> String orderId<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è®¢å•å·</span>    <span class="token keyword">public</span> <span class="token function">OrderItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">OrderItem</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">,</span> String name<span class="token punctuation">,</span> Integer count<span class="token punctuation">,</span> BigDecimal price<span class="token punctuation">,</span> BigDecimal totalPrice<span class="token punctuation">,</span> String orderId<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> count<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>totalPrice <span class="token operator">=</span> totalPrice<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>orderId <span class="token operator">=</span> orderId<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Integer <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Integer <span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> count<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCount</span><span class="token punctuation">(</span>Integer count<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> count<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> BigDecimal <span class="token function">getTotalPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> totalPrice<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTotalPrice</span><span class="token punctuation">(</span>BigDecimal totalPrice<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>totalPrice <span class="token operator">=</span> totalPrice<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getOrderId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> orderId<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setOrderId</span><span class="token punctuation">(</span>String orderId<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>orderId <span class="token operator">=</span> orderId<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> BigDecimal <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> price<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPrice</span><span class="token punctuation">(</span>BigDecimal price<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"OrderItem{"</span> <span class="token operator">+</span>                <span class="token string">"id="</span> <span class="token operator">+</span> id <span class="token operator">+</span>                <span class="token string">", name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">", count="</span> <span class="token operator">+</span> count <span class="token operator">+</span>                <span class="token string">", price="</span> <span class="token operator">+</span> price <span class="token operator">+</span>                <span class="token string">", totalPrice="</span> <span class="token operator">+</span> totalPrice <span class="token operator">+</span>                <span class="token string">", orderId="</span> <span class="token operator">+</span> orderId <span class="token operator">+</span>                <span class="token string">'}'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="2ã€åˆ›å»ºOrderDaoæ¥å£å¹¶å®ç°æ¥å£ä¸­çš„æ–¹æ³•"><a href="#2ã€åˆ›å»ºOrderDaoæ¥å£å¹¶å®ç°æ¥å£ä¸­çš„æ–¹æ³•" class="headerlink" title="2ã€åˆ›å»ºOrderDaoæ¥å£å¹¶å®ç°æ¥å£ä¸­çš„æ–¹æ³•"></a>2ã€åˆ›å»ºOrderDaoæ¥å£å¹¶å®ç°æ¥å£ä¸­çš„æ–¹æ³•</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">OrderDao</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * ä¿å­˜è®¢å•     * @param order     * @return     */</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">saveOrder</span><span class="token punctuation">(</span>Order order<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * æŸ¥è¯¢å…¨éƒ¨è®¢å•     * @return     */</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Order<span class="token operator">></span> <span class="token function">queryOrders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * ä¿®æ”¹è®¢å•çŠ¶æ€     * @param orderId     * @param Status     * @return     */</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">changeOrderStatus</span><span class="token punctuation">(</span>String orderId<span class="token punctuation">,</span>Integer status<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * æ ¹æ®ç”¨æˆ·ç¼–å·æŸ¥çœ‹è®¢å•ä¿¡æ¯     * @param UserId     * @return     */</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Order<span class="token operator">></span> <span class="token function">queryOrderByUserId</span><span class="token punctuation">(</span>Integer userId<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderDaoImpl</span> <span class="token keyword">extends</span> <span class="token class-name">BaseDao</span> <span class="token keyword">implements</span> <span class="token class-name">OrderDao</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">saveOrder</span><span class="token punctuation">(</span>Order order<span class="token punctuation">)</span> <span class="token punctuation">{</span>        String sql <span class="token operator">=</span> <span class="token string">"insert into bookorder(`order_id`,`create_time`,`price`,`status`,`user_id`)values(?,?,?,?,?)"</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>order<span class="token punctuation">.</span><span class="token function">getOrderId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>order<span class="token punctuation">.</span><span class="token function">getCreateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>order<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>order<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>order<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Order<span class="token operator">></span> <span class="token function">queryOrders</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        String sql <span class="token operator">=</span> <span class="token string">"select `order_id` orderId ,`create_time` createTime,`price` ,`status`,`user_id` userId from bookorder"</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">queryForList</span><span class="token punctuation">(</span>Order<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">changeOrderStatus</span><span class="token punctuation">(</span>String orderId<span class="token punctuation">,</span> Integer status<span class="token punctuation">)</span> <span class="token punctuation">{</span>        String sql <span class="token operator">=</span> <span class="token string">"update bookorder set status = ? where order_id = ?"</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>status<span class="token punctuation">,</span>orderId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Order<span class="token operator">></span> <span class="token function">queryOrderByUserId</span><span class="token punctuation">(</span>Integer userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>        String sql <span class="token operator">=</span> <span class="token string">"select `order_id` orderId ,`create_time` createTime,`price` ,`status`,`user_id` userId from bookorder where user_id=?"</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">queryForList</span><span class="token punctuation">(</span>Order<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>sql<span class="token punctuation">,</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="3ã€åˆ›å»º-OrderItemDaoæ¥å£å¹¶å®ç°å…¶æ–¹æ³•"><a href="#3ã€åˆ›å»º-OrderItemDaoæ¥å£å¹¶å®ç°å…¶æ–¹æ³•" class="headerlink" title="3ã€åˆ›å»º OrderItemDaoæ¥å£å¹¶å®ç°å…¶æ–¹æ³•"></a>3ã€åˆ›å»º OrderItemDaoæ¥å£å¹¶å®ç°å…¶æ–¹æ³•</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">OrderItemDao</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * ä¿å­˜è®¢å•é¡¹     * @param item     * @return     */</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">saveOrderItem</span><span class="token punctuation">(</span>OrderItem item<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * æ›´å…·è®¢å•å·æŸ¥è¯¢è®¢å•è¯¦æƒ…     * @param orderId     * @return     */</span>    <span class="token keyword">public</span> OrderItem <span class="token function">queryOrderItemsByOrderId</span><span class="token punctuation">(</span>String orderId<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderItemDaoImpl</span> <span class="token keyword">extends</span> <span class="token class-name">BaseDao</span> <span class="token keyword">implements</span> <span class="token class-name">OrderItemDao</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">saveOrderItem</span><span class="token punctuation">(</span>OrderItem item<span class="token punctuation">)</span> <span class="token punctuation">{</span>        String sql <span class="token operator">=</span> <span class="token string">"insert into bookorder_item(`name`,`count`,`price`,`totalprice`,`order_id`)values(?,?,?,?,?)"</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>item<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>item<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>item<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>item<span class="token punctuation">.</span><span class="token function">getTotalPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>item<span class="token punctuation">.</span><span class="token function">getOrderId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> OrderItem <span class="token function">queryOrderItemsByOrderId</span><span class="token punctuation">(</span>String orderId<span class="token punctuation">)</span> <span class="token punctuation">{</span>        String sql <span class="token operator">=</span> <span class="token string">"select `name`,`count`,`price`,`totalprice` totalPrice,`order_id` orderId from bookorder_item where order_id = ?"</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">queryForOne</span><span class="token punctuation">(</span>OrderItem<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>sql<span class="token punctuation">,</span>orderId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="4ã€åˆ›å»ºOrderServiceå¹¶å®ç°å…¶ä¸­çš„æ–¹æ³•"><a href="#4ã€åˆ›å»ºOrderServiceå¹¶å®ç°å…¶ä¸­çš„æ–¹æ³•" class="headerlink" title="4ã€åˆ›å»ºOrderServiceå¹¶å®ç°å…¶ä¸­çš„æ–¹æ³•"></a>4ã€åˆ›å»ºOrderServiceå¹¶å®ç°å…¶ä¸­çš„æ–¹æ³•</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">OrderService</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * ç”Ÿæˆè®¢å•     * @param cart     * @param userId     * @return è®¢å•å·     */</span>    <span class="token keyword">public</span> String <span class="token function">createOrder</span><span class="token punctuation">(</span>Cart cart<span class="token punctuation">,</span>Integer userId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * æŸ¥è¯¢å…¨éƒ¨è®¢å•     * @return     */</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Order<span class="token operator">></span> <span class="token function">showAllOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * å‘è´§     * @param orderId     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendOrder</span><span class="token punctuation">(</span>String orderId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * æŸ¥çœ‹è®¢å•è¯¦æƒ…     * @param orderId     * @return     */</span>    <span class="token keyword">public</span> OrderItem <span class="token function">showOrderDetailById</span><span class="token punctuation">(</span>String orderId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * ç”¨æˆ·æŸ¥çœ‹è®¢å•     * @param userId     * @return     */</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Order<span class="token operator">></span> <span class="token function">showMyOrder</span><span class="token punctuation">(</span>Integer userId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * ç­¾æ”¶è®¢å•     * @param orderId     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">receiverOrder</span><span class="token punctuation">(</span>String orderId<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">OrderService</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> OrderDao orderDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderDaoImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> OrderItemDao orderItemDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderItemDaoImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> BookDao bookDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BookDaoImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">createOrder</span><span class="token punctuation">(</span>Cart cart<span class="token punctuation">,</span> Integer userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// è®¢å•å·å”¯ä¸€</span>        String orderId <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">""</span> <span class="token operator">+</span> userId<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºä¸€ä¸ªè®¢å•å¯¹è±¡</span>        Order order <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span>orderId<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cart<span class="token punctuation">.</span><span class="token function">getTotalPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ä¿å­˜ è®¢å•åˆ°æ•°æ®åº“</span>        orderDao<span class="token punctuation">.</span><span class="token function">saveOrder</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ä¿å­˜è®¢å•é¡¹</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºè®¢å•é¡¹</span>        <span class="token comment" spellcheck="true">// éå†è´­ç‰©è½¦ä¸­çš„æ¯ä¸€ä¸ªå•†å“é¡¹è½¬æ¢ä¸ºè®¢å•å•†å“é¡¹</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>Map<span class="token punctuation">.</span>Entry<span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span> CartItem<span class="token operator">></span> entry <span class="token operator">:</span> cart<span class="token punctuation">.</span><span class="token function">getItems</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            CartItem cartItem <span class="token operator">=</span> entry<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            OrderItem orderItem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderItem</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span> cartItem<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cartItem<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cartItem<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cartItem<span class="token punctuation">.</span><span class="token function">getTotalPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> orderId<span class="token punctuation">)</span><span class="token punctuation">;</span>            orderItemDao<span class="token punctuation">.</span><span class="token function">saveOrderItem</span><span class="token punctuation">(</span>orderItem<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// ä¿®æ”¹å›¾ä¹¦åº“å­˜å’Œé”€é‡</span>            <span class="token comment" spellcheck="true">// è·å–bookå¯¹è±¡</span>            Book book <span class="token operator">=</span> bookDao<span class="token punctuation">.</span><span class="token function">queryBookById</span><span class="token punctuation">(</span>cartItem<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            book<span class="token punctuation">.</span><span class="token function">setSales</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span><span class="token function">getSales</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> cartItem<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            book<span class="token punctuation">.</span><span class="token function">setStock</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span><span class="token function">getStock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> cartItem<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            bookDao<span class="token punctuation">.</span><span class="token function">updateBook</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// æ¸…ç©ºè´­ç‰©è½¦</span>        cart<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> orderId<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Order<span class="token operator">></span> <span class="token function">showAllOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> orderDao<span class="token punctuation">.</span><span class="token function">queryOrders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendOrder</span><span class="token punctuation">(</span>String orderId<span class="token punctuation">)</span> <span class="token punctuation">{</span>        orderDao<span class="token punctuation">.</span><span class="token function">changeOrderStatus</span><span class="token punctuation">(</span>orderId<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> OrderItem <span class="token function">showOrderDetailById</span><span class="token punctuation">(</span>String orderId<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> orderItemDao<span class="token punctuation">.</span><span class="token function">queryOrderItemsByOrderId</span><span class="token punctuation">(</span>orderId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Order<span class="token operator">></span> <span class="token function">showMyOrder</span><span class="token punctuation">(</span>Integer userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> orderDao<span class="token punctuation">.</span><span class="token function">queryOrderByUserId</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">receiverOrder</span><span class="token punctuation">(</span>String orderId<span class="token punctuation">)</span> <span class="token punctuation">{</span>        orderDao<span class="token punctuation">.</span><span class="token function">changeOrderStatus</span><span class="token punctuation">(</span>orderId<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="5ã€åˆ›å»ºOrderServletå¹¶æ·»åŠ ç›¸åº”çš„åŠŸèƒ½"><a href="#5ã€åˆ›å»ºOrderServletå¹¶æ·»åŠ ç›¸åº”çš„åŠŸèƒ½" class="headerlink" title="5ã€åˆ›å»ºOrderServletå¹¶æ·»åŠ ç›¸åº”çš„åŠŸèƒ½"></a>5ã€åˆ›å»ºOrderServletå¹¶æ·»åŠ ç›¸åº”çš„åŠŸèƒ½</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderServlet</span> <span class="token keyword">extends</span> <span class="token class-name">BaseServlet</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> OrderService orderService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * ç”Ÿæˆè®¢å•     * @param req     * @param resp     * @throws ServletException     * @throws IOException     */</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">createOrder</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// è·å–Cartå¯¹è±¡</span>        Cart cart <span class="token operator">=</span> <span class="token punctuation">(</span>Cart<span class="token punctuation">)</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"cart"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è·å–userId</span>        User user <span class="token operator">=</span> <span class="token punctuation">(</span>User<span class="token punctuation">)</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Integer userId <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è°ƒç”¨orderService</span>        String orderId <span class="token operator">=</span> orderService<span class="token punctuation">.</span><span class="token function">createOrder</span><span class="token punctuation">(</span>cart<span class="token punctuation">,</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>        req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"orderId"</span><span class="token punctuation">,</span>orderId<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// é‡å®šå‘ç»“ç®—æˆåŠŸé¡µé¢</span>        resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"/pages/cart/checkout.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * æŸ¥è¯¢æˆ‘çš„è®¢å•     * @param req     * @param resp     * @throws ServletException     * @throws IOException     */</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">showMyOrders</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// è·å–userId</span>        User user <span class="token operator">=</span> <span class="token punctuation">(</span>User<span class="token punctuation">)</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Integer userId <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å¾—åˆ°orderå¯¹è±¡</span>        List<span class="token operator">&lt;</span>Order<span class="token operator">></span> orders<span class="token operator">=</span> orderService<span class="token punctuation">.</span><span class="token function">showMyOrder</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ä¿å­˜è‡³requestä¸­</span>        req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"orders"</span><span class="token punctuation">,</span>orders<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è¯·æ±‚è½¬å‘åˆ°æˆ‘çš„è®¢å•é¡µé¢</span>        req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/pages/order/order.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * æŸ¥çœ‹å•†å“è¯¦æƒ…     * @param req     * @param resp     * @throws ServletException     * @throws IOException     */</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">showOrderDetail</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// è·å–orderId</span>        String orderId <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"orderId"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// System.out.println(orderId);</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºOrderItemå¯¹è±¡</span>        <span class="token comment" spellcheck="true">// è°ƒç”¨oderService.showOrderDetailById()</span>        OrderItem orderItem <span class="token operator">=</span> orderService<span class="token punctuation">.</span><span class="token function">showOrderDetailById</span><span class="token punctuation">(</span>orderId<span class="token punctuation">)</span><span class="token punctuation">;</span>        req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"orderItem"</span><span class="token punctuation">,</span>orderItem<span class="token punctuation">)</span><span class="token punctuation">;</span>        req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/pages/order/order_detail.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * æ˜¾ç¤ºæ‰€æœ‰è®¢å•     * @param req     * @param resp     * @throws ServletException     * @throws IOException     */</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">showAllOrders</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        List<span class="token operator">&lt;</span>Order<span class="token operator">></span> allOrders <span class="token operator">=</span>  orderService<span class="token punctuation">.</span><span class="token function">showAllOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"allOrders"</span><span class="token punctuation">,</span>allOrders<span class="token punctuation">)</span><span class="token punctuation">;</span>        req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/pages/manager/order_manager.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * å‘è´§     * @param req     * @param resp     * @throws ServletException     * @throws IOException     */</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">sendOrder</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// è·å–orderId</span>        String orderId <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"orderId"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        orderService<span class="token punctuation">.</span><span class="token function">sendOrder</span><span class="token punctuation">(</span>orderId<span class="token punctuation">)</span><span class="token punctuation">;</span>        resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"/orderServlet?action=showAllOrders"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * ç¡®è®¤æ”¶è´§     * @param req     * @param resp     * @throws ServletException     * @throws IOException     */</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">receiverOrder</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// è·å–orderId</span>        String orderId <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"orderId"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        orderService<span class="token punctuation">.</span><span class="token function">receiverOrder</span><span class="token punctuation">(</span>orderId<span class="token punctuation">)</span><span class="token punctuation">;</span>        resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"/orderServlet?action=showMyOrders"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="5ã€è°ƒæ•´jspé¡µé¢"><a href="#5ã€è°ƒæ•´jspé¡µé¢" class="headerlink" title="5ã€è°ƒæ•´jspé¡µé¢"></a>5ã€è°ƒæ•´jspé¡µé¢</h3><p>1.ä¿®æ”¹è´­ç‰©è½¦é¡µé¢ä¸­å»ç»“ç®—çš„è·³è½¬åœ°å€<img src="/2020/04/08/javaweb-02/45.png" alt></p><p>2.åœ¨order.jspä¸­æ˜¾ç¤ºå½“å‰ç”¨æˆ·çš„è®¢å•ä¿¡æ¯</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>æ—¥æœŸ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>é‡‘é¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>çŠ¶æ€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>è¯¦æƒ…<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>ç¡®è®¤æ”¶è´§<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${not empty requestScope.orders}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">items</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.orders}<span class="token punctuation">"</span></span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>order<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${order.createTime}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${order.price}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>choose</span><span class="token punctuation">></span></span>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${order.status<span class="token punctuation">=</span><span class="token punctuation">=</span>0}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æœªå‘è´§<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>when</span><span class="token punctuation">></span></span>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${order.status<span class="token punctuation">=</span><span class="token punctuation">=</span>1}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å·²å‘è´§<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>when</span><span class="token punctuation">></span></span>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>otherwise</span><span class="token punctuation">></span></span>å·²ç­¾æ”¶<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>otherwise</span><span class="token punctuation">></span></span>               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>choose</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>orderServlet?action<span class="token punctuation">=</span>showOrderDetail&amp;orderId<span class="token punctuation">=</span>${order.orderId}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æŸ¥çœ‹è¯¦æƒ…<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>choose</span><span class="token punctuation">></span></span>               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${order.status<span class="token punctuation">=</span><span class="token punctuation">=</span>0}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">color</span><span class="token punctuation">:</span> red</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¿˜æ²¡æœ‰å‘è´§å“¦~<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>when</span><span class="token punctuation">></span></span>               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${order.status<span class="token punctuation">=</span><span class="token punctuation">=</span>1}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>orderServlet?action<span class="token punctuation">=</span>receiverOrder&amp;orderId<span class="token punctuation">=</span>${order.orderId}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç¡®è®¤æ”¶è´§<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>when</span><span class="token punctuation">></span></span>               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>otherwise</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">color</span><span class="token punctuation">:</span> red</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å·²ç»ç­¾æ”¶äº†~<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>otherwise</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>choose</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${empty requestScope.orders}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">colspan</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pages/cart/cart.jsp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ‚¨æš‚æ—¶æ²¡æœ‰è®¢å•ï¼Œå¿«å»è´­ç‰©è½¦ä¸‹å•å§~<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span></code></pre><p>4.åœ¨order_detail.jspä¸­æ˜¾ç¤ºè®¢å•çš„è¯¦ç»†ä¿¡æ¯</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>å•†å“åç§°<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>æ•°é‡<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>å•ä»·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>æ€»ä»·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>è®¢å•å·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${requestScope.orderItem.name}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${requestScope.orderItem.count}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${requestScope.orderItem.price}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${requestScope.orderItem.totalPrice}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${requestScope.orderItem.orderId}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span></code></pre><p>5.ä¿®æ”¹é¦–é¡µçš„åå°ç®¡ç†ä¸­è®¢å•ç®¡ç†çš„è·³è½¬åœ°å€<br><img src="/2020/04/08/javaweb-02/46.png" alt></p><p>6.åœ¨è®¢å•ç®¡ç†ä¸­æ˜¾ç¤ºæ‰€æœ‰çš„è®¢å•ä¿¡æ¯</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>æ—¥æœŸ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>é‡‘é¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>è¯¦æƒ…<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>çŠ¶æ€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>å‘è´§<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${not empty requestScope.allOrders}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">items</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.allOrders}<span class="token punctuation">"</span></span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>order<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${order.createTime}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>${order.price}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>orderServlet?action<span class="token punctuation">=</span>showOrderDetail&amp;orderId<span class="token punctuation">=</span>${order.orderId}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æŸ¥çœ‹è¯¦æƒ…<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>choose</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${order.status<span class="token punctuation">=</span><span class="token punctuation">=</span>0}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æœªå‘è´§<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>when</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${order.status<span class="token punctuation">=</span><span class="token punctuation">=</span>1}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å·²å‘è´§<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>when</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>otherwise</span><span class="token punctuation">></span></span>å·²ç­¾æ”¶<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>otherwise</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>choose</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>choose</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${order.status<span class="token punctuation">=</span><span class="token punctuation">=</span>0}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>orderServlet?action<span class="token punctuation">=</span>sendOrder&amp;orderId<span class="token punctuation">=</span>${order.orderId}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å‘è´§<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>when</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${order.status<span class="token punctuation">=</span><span class="token punctuation">=</span>1}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">color</span><span class="token punctuation">:</span> red</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å·²ç»å‘è´§äº†~<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>when</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>otherwise</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">color</span><span class="token punctuation">:</span> red</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å·²ç»ç­¾æ”¶äº†~<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>otherwise</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>choose</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${empty requestScope.allOrders}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">colspan</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æš‚æ—¶æ²¡æœ‰è®¢å•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span></code></pre><h2 id="åå…­ã€ä½¿ç”¨Filterå®ç°æƒé™æ£€æŸ¥"><a href="#åå…­ã€ä½¿ç”¨Filterå®ç°æƒé™æ£€æŸ¥" class="headerlink" title="åå…­ã€ä½¿ç”¨Filterå®ç°æƒé™æ£€æŸ¥"></a>åå…­ã€ä½¿ç”¨Filterå®ç°æƒé™æ£€æŸ¥</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>bookmall<span class="token punctuation">.</span>filter<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ManagerFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span>FilterConfig filterConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span>ServletRequest request<span class="token punctuation">,</span> ServletResponse response<span class="token punctuation">,</span> FilterChain chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException<span class="token punctuation">,</span> ServletException <span class="token punctuation">{</span>        HttpServletRequest httpServletRequest <span class="token operator">=</span> <span class="token punctuation">(</span>HttpServletRequest<span class="token punctuation">)</span> request<span class="token punctuation">;</span>        User user <span class="token operator">=</span> <span class="token punctuation">(</span>User<span class="token punctuation">)</span> httpServletRequest<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            httpServletRequest<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/pages/user/login.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>ManagerFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">></span></span>com.bookmall.filter.ManagerFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>ManagerFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/pages/manager/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/manager/bookServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">></span></span></code></pre><h2 id="åä¸ƒã€ä½¿ç”¨Filterå’ŒTheadLocalç»„åˆç®¡ç†äº‹åŠ¡"><a href="#åä¸ƒã€ä½¿ç”¨Filterå’ŒTheadLocalç»„åˆç®¡ç†äº‹åŠ¡" class="headerlink" title="åä¸ƒã€ä½¿ç”¨Filterå’ŒTheadLocalç»„åˆç®¡ç†äº‹åŠ¡"></a>åä¸ƒã€ä½¿ç”¨Filterå’ŒTheadLocalç»„åˆç®¡ç†äº‹åŠ¡</h2><p><img src="/2020/04/08/javaweb-02/49.png" alt></p><p><strong>ä¿®æ”¹JdbcUtilsï¼š</strong><br>åˆ›å»ºä¸€ä¸ªThreadLocalå¯¹è±¡ï¼Œç”¨äºå°†è·å–çš„è¿æ¥ä¸å½“å‰çº¿ç¨‹å…³è”ï¼š<br><img src="/2020/04/08/javaweb-02/47.png" alt><br>ä¿®æ”¹getConnection()ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> Connection <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    Connection conn <span class="token operator">=</span> conns<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>conn <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            conn <span class="token operator">=</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä»æ•°æ®åº“è¿æ¥æ± ä¸­è·å–è¿æ¥</span>            conns<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>conn<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å°†è¿æ¥ä¿å­˜åˆ°ThreadLocalå¯¹è±¡ä¸­ï¼Œä¾›åé¢çš„jdbcæ“ä½œä½¿ç”¨ï¼Œä¿è¯æ‰§è¡Œäº‹åŠ¡æ—¶æ˜¯åŒä¸€ä¸ªè¿æ¥</span>            conn<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è®¾ç½®ä¸ºä¸è‡ªåŠ¨æäº¤äº‹åŠ¡</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> conn<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>æ·»åŠ æäº¤å¹¶å…³é—­è¿æ¥çš„æ–¹æ³•ä»¥åŠå›æ»šå¹¶å…³é—­è¿æ¥çš„æ–¹æ³•ï¼š</p><pre class=" language-java"><code class="language-java"> <span class="token comment" spellcheck="true">/** * æäº¤äº‹åŠ¡å¹¶å…³é—­è¿æ¥ */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">commitAndClose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    Connection conn <span class="token operator">=</span> conns<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>conn<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            conn<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æäº¤äº‹åŠ¡</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> throwables<span class="token punctuation">)</span> <span class="token punctuation">{</span>            throwables<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å…³é—­è¿æ¥</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> throwables<span class="token punctuation">)</span> <span class="token punctuation">{</span>                throwables<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// ç§»é™¤çº¿ç¨‹</span>    conns<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token comment" spellcheck="true">/** * å›æ»šäº‹åŠ¡å¹¶å…³é—­è¿æ¥ */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">rollbackAndClose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    Connection conn <span class="token operator">=</span> conns<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>conn <span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            conn<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> throwables<span class="token punctuation">)</span> <span class="token punctuation">{</span>            throwables<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> throwables<span class="token punctuation">)</span> <span class="token punctuation">{</span>                throwables<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>ä¿®æ”¹BaseDao,BaseServletï¼š</strong><br>1ã€å°†æ‰€æœ‰æ–¹æ³•ä¸­çš„å…³é—­è¿æ¥æ“ä½œåˆ é™¤ï¼Œç”¨äºä¿è¯æ‰€ç”¨æ“ä½œéƒ½ä½¿ç”¨åŒä¸€ä¸ªè¿æ¥ï¼›<br>2ã€åœ¨æ¯ä¸ªæ–¹æ³•ä¸­éƒ½æ·»åŠ æŠ›å‡ºå¼‚å¸¸çš„è¯­å¥ï¼Œæä¾›ç»™æ‰§è¡Œç›¸åº”æ“ä½œçš„Servletç¨‹åºæ•è·ï¼Œç”¨äºå›æ»šã€‚<br> <strong>ä½¿ç”¨Filterè¿‡æ»¤å™¨ä¸ºæ‰€ç”¨çš„Serviceæ–¹æ³•æ·»åŠ try-catch:</strong><br><img src="/2020/04/08/javaweb-02/48.png" alt></p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>bookmall<span class="token punctuation">.</span>filter<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TransactionFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span>FilterConfig filterConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span>ServletRequest request<span class="token punctuation">,</span> ServletResponse response<span class="token punctuation">,</span> FilterChain chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException<span class="token punctuation">,</span> ServletException <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// æäº¤äº‹åŠ¡</span>            JdbcUtils<span class="token punctuation">.</span><span class="token function">commitAndClose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// å›æ»šäº‹åŠ¡</span>            JdbcUtils<span class="token punctuation">.</span><span class="token function">rollbackAndClose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// å°†å¼‚å¸¸æŠ›ç»™æœåŠ¡å™¨</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>TransactionFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">></span></span>com.bookmall.filter.TransactionFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>TransactionFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--  å½“å‰å·¥ç¨‹ä¸‹çš„æ‰€æœ‰è¯·æ±‚ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">></span></span></code></pre><p><strong>å°†æ‰€æœ‰å¼‚å¸¸åŒä¸€äº¤ç»™Tomcatï¼Œè®©Tomcatå±•ç¤ºå‹å¥½çš„é”™è¯¯ä¿¡æ¯é¡µé¢ï¼š</strong><br>é…ç½®web.xml</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- é…ç½®æœåŠ¡å™¨å‡ºé”™åï¼Œè‡ªåŠ¨è·³è½¬çš„é¡µé¢--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-page</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--   é”™è¯¯ç±»å‹--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-code</span><span class="token punctuation">></span></span>404<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-code</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--  è¦è·³è½¬å»çš„é¡µé¢è·¯å¾„--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>location</span><span class="token punctuation">></span></span>/pages/error/error404.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>location</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-page</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-page</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-code</span><span class="token punctuation">></span></span>500<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-code</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>location</span><span class="token punctuation">></span></span>/pages/error/error500.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>location</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-page</span><span class="token punctuation">></span></span></code></pre><h2 id="åå…«ã€ä½¿ç”¨Ajaxåˆ¤æ–­ç”¨æˆ·åæ˜¯å¦å¯ç”¨"><a href="#åå…«ã€ä½¿ç”¨Ajaxåˆ¤æ–­ç”¨æˆ·åæ˜¯å¦å¯ç”¨" class="headerlink" title="åå…«ã€ä½¿ç”¨Ajaxåˆ¤æ–­ç”¨æˆ·åæ˜¯å¦å¯ç”¨"></a>åå…«ã€ä½¿ç”¨Ajaxåˆ¤æ–­ç”¨æˆ·åæ˜¯å¦å¯ç”¨</h2><p><img src="/2020/04/08/javaweb-02/50.jpg" alt></p><pre class=" language-javaScript"><code class="language-javaScript">// ç»™ç”¨æˆ·åè¾“å…¥æ¡†ç»‘å®šå¤±å»ç„¦ç‚¹äº‹ä»¶$("#username").blur(function () {    // è·å–ç”¨æˆ·å    var username = this.value;    $.getJSON(        "${pageScope.basePath}userServlet",        "action=ajaxExistUsername&username=" + username,        function (data) {            if (data.existUsername) {                $("span.errorMsg").css({color:"#dd0000"});                $("span.errorMsg").text("ç”¨æˆ·åå·²å­˜åœ¨ï¼");            } else {                $("span.errorMsg").css({color:"#00dd00"});                $("span.errorMsg").text("ç”¨æˆ·åå¯ç”¨~");            }        });});</code></pre><p>åœ¨UserServletä¸­æ·»åŠ ajaxExisUsername()</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * éªŒè¯ç”¨æˆ·åæ˜¯å¦å·²ç»æ³¨å†Œ * @param req * @param resp * @throws ServletException * @throws IOException */</span><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">ajaxExistUsername</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException<span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// è·å–è¯·æ±‚å‚æ•°</span>    String username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è°ƒç”¨userService</span>    <span class="token keyword">boolean</span> existUsername <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">existUsername</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// æŠŠè¿”å›çš„ç»“æœå°è£…æˆMapå¯¹è±¡</span>    Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Object<span class="token operator">></span> resultMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    resultMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"existUsername"</span><span class="token punctuation">,</span>existUsername<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å°†Mapå¯¹è±¡è½¬æ¢ä¸ºjsonå­—ç¬¦ä¸²</span>    Gson gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    String json <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>resultMap<span class="token punctuation">)</span><span class="token punctuation">;</span>    resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="åä¹ã€ä½¿ç”¨Ajaxä¿®æ”¹æŠŠå•†å“æ·»åŠ åˆ°è´­ç‰©è½¦"><a href="#åä¹ã€ä½¿ç”¨Ajaxä¿®æ”¹æŠŠå•†å“æ·»åŠ åˆ°è´­ç‰©è½¦" class="headerlink" title="åä¹ã€ä½¿ç”¨Ajaxä¿®æ”¹æŠŠå•†å“æ·»åŠ åˆ°è´­ç‰©è½¦"></a>åä¹ã€ä½¿ç”¨Ajaxä¿®æ”¹æŠŠå•†å“æ·»åŠ åˆ°è´­ç‰©è½¦</h2><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * ä½¿ç”¨Ajaxæ·»åŠ å›¾ä¹¦åˆ°è´­ç‰©è½¦ * @param req * @param resp * @throws ServletException * @throws IOException */</span><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">ajaxAddItem</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// System.out.println("åŠ å…¥è´­ç‰©è½¦");</span>    <span class="token comment" spellcheck="true">// è·å–è¯·æ±‚å‚æ•°  å•†å“ç¼–å·</span>    <span class="token keyword">int</span> id <span class="token operator">=</span> WebUtils<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è°ƒç”¨bookService.queryBookById(id) å¾—åˆ°å›¾ä¹¦ä¿¡æ¯</span>    Book book <span class="token operator">=</span> bookService<span class="token punctuation">.</span><span class="token function">queryBookById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å°†å›¾ä¹¦ä¿¡æ¯è½¬æ¢ä¸ºCartItemå•†å“é¡¹</span>    CartItem cartItem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CartItem</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>book<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>book<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>book<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è°ƒç”¨cart.add(CartItem)æ·»åŠ è‡³è´­ç‰©è½¦</span>    Cart cart <span class="token operator">=</span> <span class="token punctuation">(</span>Cart<span class="token punctuation">)</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"cart"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>cart <span class="token operator">==</span> null<span class="token punctuation">)</span><span class="token punctuation">{</span>        cart <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"cart"</span><span class="token punctuation">,</span>cart<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    cart<span class="token punctuation">.</span><span class="token function">addItem</span><span class="token punctuation">(</span>cartItem<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å°†æ·»åŠ çš„å•†å“æ·»åŠ åˆ°sessionåŸŸä¸­</span>    req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"itemName"</span><span class="token punctuation">,</span>cartItem<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å°†éœ€è¦åœ¨é¡µé¢åˆ·æ–°çš„ä¿¡æ¯å°è£…åˆ°Mapä¸­</span>    Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Object<span class="token operator">></span> resultMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è´­ç‰©è½¦ä¸­æ€»çš„å•†å“æ•°é‡</span>    resultMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"totalCount"</span><span class="token punctuation">,</span>cart<span class="token punctuation">.</span><span class="token function">getTotalCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// æœ€åä¸€ä¸ªæ·»åŠ åˆ°è´­ç‰©è½¦çš„å•†å“åç§°</span>    resultMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"lastName"</span><span class="token punctuation">,</span>cartItem<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å°†Mapè½¬æ¢ä¸ºjsonå­—ç¬¦ä¸²</span>    Gson gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    String json <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>resultMap<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å›ä¼ ç»™å®¢æˆ·ç«¯</span>    resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-javaScript"><code class="language-javaScript">var bookid = $(this).attr("bookid");// è·å–é€‰ä¸­å…ƒç´ çš„å±æ€§å€¼// location.href="${pageScope.basePath}cartServlet?action=addItem&id="+bookid;// ä½¿ç”¨ajaxå‘é€è¯·æ±‚$.getJSON(    "${pageScope.basePath}cartServlet",    "action=ajaxAddItem&id=" + bookid,    function (data) {        $("#cartTotalCount").text(data.totalCount);        $("#cartlastName").text(data.lastName);    })</code></pre><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>æ‚¨çš„è´­ç‰©è½¦ä¸­æœ‰<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cartTotalCount<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">color</span><span class="token punctuation">:</span>red</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>${sessionScope.cart.totalCount}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>ä»¶å•†å“<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>    æ‚¨åˆšåˆšå°†&lt;span id="cartlastName"style="color:red">${sessionScope.itemName}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>åŠ å…¥åˆ°äº†è´­ç‰©è½¦ä¸­<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å°é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaWeb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Servlet</title>
      <link href="2020/04/05/javaweb-01/"/>
      <url>2020/04/05/javaweb-01/</url>
      
        <content type="html"><![CDATA[<h2 id="JavaWebæ¦‚å¿µ"><a href="#JavaWebæ¦‚å¿µ" class="headerlink" title="JavaWebæ¦‚å¿µ"></a>JavaWebæ¦‚å¿µ</h2><p><strong>javawebï¼š</strong>æ‰€æœ‰ç”±javaç¼–å†™çš„å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®çš„ç¨‹åºçš„æ€»ç§°ã€‚<br>javawebæ˜¯åŸºäºè¯·æ±‚å’Œå“åº”æ¥å¼€å‘çš„ã€‚</p><p><strong>è¯·æ±‚ï¼š</strong>Requestï¼Œæ˜¯æŒ‡å®¢æˆ·ç«¯(æµè§ˆå™¨)ç»™æœåŠ¡å™¨(Tomcat)å‘é€æ•°æ®ã€‚<br><strong>å“åº”ï¼š</strong>Responseï¼ŒæœåŠ¡å™¨ç»™å®¢æˆ·ç«¯å›ä¼ æ•°æ®ã€‚</p><p><strong>è¯·æ±‚ä¸å“åº”çš„å…³ç³»ï¼š</strong>è¯·æ±‚å’Œå“åº”æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œæœ‰è¯·æ±‚å°±æœ‰å“åº”ã€‚</p><h2 id="Webèµ„æºçš„åˆ†ç±»"><a href="#Webèµ„æºçš„åˆ†ç±»" class="headerlink" title="Webèµ„æºçš„åˆ†ç±»"></a>Webèµ„æºçš„åˆ†ç±»</h2><p>webèµ„æºæŒ‰å®ç°çš„æŠ€æœ¯å’Œå‘ˆç°çš„æ•ˆæœçš„ä¸åŒï¼Œåˆ†ä¸ºé™æ€èµ„æºå’ŒåŠ¨æ€èµ„æºã€‚<br>é™æ€èµ„æºï¼šhtmlã€cssã€jsã€txtæ–‡æœ¬ã€mp4è§†é¢‘ã€jpgå›¾ç‰‡ç­‰ç­‰<br>åŠ¨æ€èµ„æºï¼šjspé¡µé¢ã€Servletç¨‹åº</p><h2 id="Tomcatç«¯å£å·"><a href="#Tomcatç«¯å£å·" class="headerlink" title="Tomcatç«¯å£å·"></a>Tomcatç«¯å£å·</h2><p>tomcaté»˜è®¤ç«¯å£å·ï¼š8080<br>apache-tomcat-8.0.50\conf\server.xmlæ–‡ä»¶å¯ä¿®æ”¹é»˜è®¤ç«¯å£å·</p><p>httpé»˜è®¤ç«¯å£å·ï¼š80<br>httpsé»˜è®¤ç«¯å£å·ï¼š443(æµè§ˆå™¨ä¼šè‡ªåŠ¨è¡¥å…¨)</p><p>webå®¹å™¨æ˜¯ä¸€ç§æœåŠ¡ç¨‹åºï¼Œåœ¨æœåŠ¡å™¨ä¸€ä¸ªç«¯å£å°±æœ‰ä¸€ä¸ªæä¾›ç›¸åº”æœåŠ¡çš„ç¨‹åºï¼Œè€Œè¿™ä¸ªç¨‹åºå°±æ˜¯å¤„ç†ä»å®¢æˆ·ç«¯å‘å‡ºçš„è¯·æ±‚ï¼Œå¦‚JAVAä¸­çš„Tomcatå®¹å™¨ï¼ŒASPçš„IISæˆ–PWSéƒ½æ˜¯è¿™æ ·çš„å®¹å™¨ã€‚ä¸€ä¸ªæœåŠ¡å™¨å¯ä»¥å¤šä¸ªå®¹å™¨ã€‚Webå®¹å™¨è´Ÿè´£å°†HTTPè¯·æ±‚è½¬æ¢ä¸ºHttpServletRequestå¯¹è±¡ã€‚</p><h2 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h2><p>1ã€Servletæ˜¯JavaEEè§„èŒƒä¹‹ä¸€ï¼Œè§„èŒƒå°±æ˜¯æ¥å£ã€‚<br>2ã€Servletæ˜¯JavaWebä¸‰å¤§ç»„ä»¶ä¹‹ä¸€ï¼Œä¸‰å¤§ç»„ä»¶ä¸ºï¼šServletç¨‹åºã€Filterè¿‡æ»¤å™¨ã€Listenerç›‘å¬å™¨ã€‚<br>3ã€Servletæ˜¯è¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šçš„ä¸€ä¸ªjavaå°ç¨‹åºï¼Œå¯ä»¥æ¥å—å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„è¯·æ±‚å¹¶å‘é€å“åº”æ•°æ®ç»™å®¢æˆ·ç«¯ã€‚<br><strong>æ‰‹åŠ¨å®ç°Servletç¨‹åº:</strong><br>1ã€ç¼–å†™ä¸€ä¸ªç±»å»å®ç°Servlet æ¥å£<br>2ã€å®ç°service æ–¹æ³•ï¼Œå¤„ç†è¯·æ±‚ï¼Œå¹¶å“åº”æ•°æ®<br>3ã€åˆ°web.xml ä¸­å»é…ç½®servlet ç¨‹åºçš„è®¿é—®åœ°å€</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://xmlns.jcp.org/xml/ns/javaee<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd<span class="token punctuation">"</span></span>         <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>4.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- servletæ ‡ç­¾ç»™TomcatæœåŠ¡å™¨é…ç½®Servletç¨‹åº --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- servlet-nameæ ‡ç­¾ç”¨äºç»™ Servletç¨‹åºèµ·ä¸€ä¸ªåˆ«å(ä¸€èˆ¬æ˜¯ç±»å)--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>HelloServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- servlet-class æ˜¯Servletç¨‹åºçš„å…¨ç±»å--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>servlet.HelloServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- servlet-mappingæ ‡ç­¾ç”¨äºç»™servletç¨‹åºé…ç½®è®¿é—®åœ°å€--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- servlet-nameå‘Šè¯‰æœåŠ¡å™¨å½“å‰çš„é…ç½®åœ°å€æ˜¯ç»™å“ªä¸€ä¸ªservletç¨‹åºä½¿ç”¨çš„--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>HelloServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- url-patternæ ‡ç­¾é…ç½®è®¿é—®åœ°å€             / æ–œæ åœ¨æœåŠ¡å™¨è§£æçš„æ—¶å€™ï¼Œè¡¨ç¤ºåœ°å€ä¸ºï¼šhttp://ip:port/å·¥ç¨‹è·¯å¾„        --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">></span></span></code></pre><p><strong>Servletçš„ç”Ÿå‘½å‘¨æœŸï¼š</strong></p><p>1ã€åŠ è½½ï¼šå®¹å™¨é€šè¿‡ç±»åŠ è½½å™¨ä½¿ç”¨Servletç±»å¯¹åº”çš„æ–‡ä»¶æ¥åŠ è½½Servlet</p><p>2ã€åˆ›å»ºï¼šé€šè¿‡<strong>è°ƒç”¨Servletçš„æ„é€ å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªServletå®ä¾‹</strong></p><p>3ã€åˆå§‹åŒ–ï¼šé€šè¿‡è°ƒç”¨Servletçš„init()æ–¹æ³•æ¥å®Œæˆåˆå§‹åŒ–å·¥ä½œï¼ŒServletConfigå¯¹è±¡è¯»å–web.xmlè·å–åˆå§‹åŒ–å‚æ•°ï¼Œå¯¹Servletè¿›è¡Œåˆå§‹åŒ–</p><p>4ã€å¤„ç†å®¢æˆ·è¯·æ±‚ï¼šServletåˆ›å»ºåå°±å¯ä»¥å¤„ç†è¯·æ±‚ï¼Œå½“æœ‰æ–°çš„å®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼ŒWebå®¹å™¨éƒ½ä¼š<strong>åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹</strong>æ¥å¤„ç†è¯¥è¯·æ±‚ã€‚æ¥ç€è°ƒç”¨Servletçš„Service()æ–¹æ³•æ¥å“åº”å®¢æˆ·ç«¯è¯·æ±‚ï¼ˆServiceæ–¹æ³•æ ¹æ®è¯·æ±‚çš„methodå±æ€§æ¥è°ƒç”¨doGet()å’ŒdoPost()ï¼‰</p><p>5ã€å¸è½½ï¼š<strong>å®¹å™¨åœ¨å¸è½½Servletä¹‹å‰</strong>éœ€è¦è°ƒç”¨destroy()æ–¹æ³•ï¼Œè®©Servleté‡Šæ”¾å…¶å ç”¨çš„èµ„æºã€‚</p><p><strong>é€šè¿‡ç»§æ‰¿HttpServletå®ç°Servletç¨‹åºï¼š</strong>ä¸€èˆ¬åœ¨å®é™…å¼€å‘ä¸­ä½¿ç”¨æ­¤æ–¹å¼<br>1ã€ç¼–å†™ä¸€ä¸ªç±»å»ç»§æ‰¿HttpServletç±»<br>2ã€æ ¹æ®ä¸šåŠ¡éœ€æ±‚é‡å†™doGet æˆ– doPost æ–¹æ³•<br>3ã€åœ¨web.xmlä¸­é…ç½®servletç¨‹åºçš„è®¿é—®åœ°å€<br><img src="/2020/04/05/javaweb-01/1.png" alt></p><p>ServletConfigç±»çš„ä½œç”¨ï¼š<br>1ã€è·å– Servlet ç¨‹åºçš„åˆ«å servlet-nameçš„å€¼ï¼›<br>2ã€è·å–åˆå§‹åŒ–å‚æ•° init-paramï¼›<br>3ã€è·å–ServletContext å¯¹è±¡ï¼›</p><p>ServletContextï¼š<br>1ã€ServletContext æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒè¡¨ç¤ºServlet ä¸Šä¸‹æ–‡å¯¹è±¡<br>2ã€ä¸€ä¸ªweb å·¥ç¨‹ï¼Œåªæœ‰ä¸€ä¸ªServletContext å¯¹è±¡å®ä¾‹ã€‚<br>3ã€ServletContext å¯¹è±¡æ˜¯ä¸€ä¸ªåŸŸå¯¹è±¡ã€‚<br>4ã€ServletContext æ˜¯åœ¨web å·¥ç¨‹éƒ¨ç½²å¯åŠ¨çš„æ—¶å€™åˆ›å»ºã€‚åœ¨web å·¥ç¨‹åœæ­¢çš„æ—¶å€™é”€æ¯ã€‚</p><blockquote><p>ä»€ä¹ˆæ˜¯åŸŸå¯¹è±¡?<br>åŸŸå¯¹è±¡ï¼Œæ˜¯å¯ä»¥åƒMap ä¸€æ ·å­˜å–æ•°æ®çš„å¯¹è±¡ï¼Œå«åŸŸå¯¹è±¡ã€‚<br>è¿™é‡Œçš„åŸŸæŒ‡çš„æ˜¯å­˜å–æ•°æ®çš„æ“ä½œèŒƒå›´ï¼Œæ•´ä¸ªweb å·¥ç¨‹ã€‚<br>&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;å­˜æ•°æ®&nbsp;  &nbsp; &nbsp; &nbsp; å–æ•°æ®&nbsp;  &nbsp; &nbsp;&nbsp;åˆ é™¤æ•°æ®<br>Map &nbsp; &nbsp; &nbsp;put() &nbsp; &nbsp; &nbsp;&nbsp;get()  &nbsp; &nbsp; &nbsp;&nbsp;remove()<br>åŸŸå¯¹è±¡ &nbsp; setAttribute() &nbsp;getAttribute()&nbsp; removeAttribute()</p></blockquote><p>ServletContext ç±»çš„å››ä¸ªä½œç”¨<br>1ã€è·å–web.xml ä¸­é…ç½®çš„ä¸Šä¸‹æ–‡å‚æ•°context-param<br>2ã€è·å–å½“å‰çš„å·¥ç¨‹è·¯å¾„ï¼Œæ ¼å¼: /å·¥ç¨‹è·¯å¾„<br>3ã€è·å–å·¥ç¨‹éƒ¨ç½²ååœ¨æœåŠ¡å™¨ç¡¬ç›˜ä¸Šçš„ç»å¯¹è·¯å¾„<br>4ã€åƒMap ä¸€æ ·å­˜å–æ•°æ®</p><h2 id="è¯·æ±‚çš„HTTPåè®®æ ¼å¼"><a href="#è¯·æ±‚çš„HTTPåè®®æ ¼å¼" class="headerlink" title="è¯·æ±‚çš„HTTPåè®®æ ¼å¼"></a>è¯·æ±‚çš„HTTPåè®®æ ¼å¼</h2><h3 id="GETè¯·æ±‚"><a href="#GETè¯·æ±‚" class="headerlink" title="GETè¯·æ±‚"></a>GETè¯·æ±‚</h3><p>1ã€è¯·æ±‚è¡Œ<br>(1) è¯·æ±‚çš„æ–¹å¼GET<br>(2) è¯·æ±‚çš„èµ„æºè·¯å¾„[+?+è¯·æ±‚å‚æ•°]<br>(3) è¯·æ±‚çš„åè®®çš„ç‰ˆæœ¬å·HTTP/1.1<br>2ã€è¯·æ±‚å¤´<br>key : value ç»„æˆä¸åŒçš„é”®å€¼å¯¹ï¼Œè¡¨ç¤ºä¸åŒçš„å«ä¹‰ã€‚<br><img src="/2020/04/05/javaweb-01/2.png" alt></p><h3 id="POSTè¯·æ±‚"><a href="#POSTè¯·æ±‚" class="headerlink" title="POSTè¯·æ±‚"></a>POSTè¯·æ±‚</h3><p>1ã€è¯·æ±‚è¡Œ<br>(1) è¯·æ±‚çš„æ–¹å¼POST<br>(2) è¯·æ±‚çš„èµ„æºè·¯å¾„[+?+è¯·æ±‚å‚æ•°]<br>(3) è¯·æ±‚çš„åè®®çš„ç‰ˆæœ¬å·HTTP/1.1<br>2ã€è¯·æ±‚å¤´</p><p>1) key : value ä¸åŒçš„è¯·æ±‚å¤´ï¼Œæœ‰ä¸åŒçš„å«ä¹‰<br>ç©ºè¡Œ<br>3ã€è¯·æ±‚ä½“===&gt;&gt;&gt; å°±æ˜¯å‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®<br><img src="/2020/04/05/javaweb-01/3.png" alt><br>GET è¯·æ±‚æœ‰å“ªäº›ï¼š<br>1ã€form æ ‡ç­¾method=get<br>2ã€a æ ‡ç­¾<br>3ã€link æ ‡ç­¾å¼•å…¥css<br>4ã€Script æ ‡ç­¾å¼•å…¥js æ–‡ä»¶<br>5ã€img æ ‡ç­¾å¼•å…¥å›¾ç‰‡<br>6ã€iframe å¼•å…¥html é¡µé¢<br>7ã€åœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥åœ°å€åæ•²å›è½¦<br>POST è¯·æ±‚æœ‰å“ªäº›ï¼š<br>8ã€form æ ‡ç­¾method=post</p><h2 id="å“åº”çš„HTTPåè®®æ ¼å¼"><a href="#å“åº”çš„HTTPåè®®æ ¼å¼" class="headerlink" title="å“åº”çš„HTTPåè®®æ ¼å¼"></a>å“åº”çš„HTTPåè®®æ ¼å¼</h2><p>1ã€å“åº”è¡Œ<br>(1) å“åº”çš„åè®®å’Œç‰ˆæœ¬å·<br>(2) å“åº”çŠ¶æ€ç <br>(3) å“åº”çŠ¶æ€æè¿°ç¬¦<br>2ã€å“åº”å¤´<br>(1) key : value ä¸åŒçš„å“åº”å¤´ï¼Œæœ‰å…¶ä¸åŒå«ä¹‰<br>ç©ºè¡Œ<br>3ã€å“åº”ä½“â€”-&gt;&gt;&gt; å°±æ˜¯å›ä¼ ç»™å®¢æˆ·ç«¯çš„æ•°æ®<br><img src="/2020/04/05/javaweb-01/4.png" alt></p><p>å¸¸è§çš„å“åº”ç ï¼š<br>200&nbsp;&nbsp;&nbsp;&nbsp;è¯·æ±‚æˆåŠŸ<br>302&nbsp;&nbsp;&nbsp;&nbsp;è¡¨ç¤ºè¯·æ±‚é‡å®šå‘<br>404&nbsp;&nbsp;&nbsp;&nbsp;è¡¨ç¤ºæœåŠ¡å™¨å·²ç»æ”¶åˆ°ï¼Œä½†æ˜¯è¯·æ±‚çš„æ•°æ®ä¸å­˜åœ¨<br>500&nbsp;&nbsp;&nbsp;&nbsp;è¡¨ç¤ºæœåŠ¡å™¨å·²ç»æ”¶åˆ°ï¼Œä½†æ˜¯æœåŠ¡å™¨å†…éƒ¨é”™è¯¯</p><h2 id="MMIEç±»å‹è¯´æ˜"><a href="#MMIEç±»å‹è¯´æ˜" class="headerlink" title="MMIEç±»å‹è¯´æ˜"></a>MMIEç±»å‹è¯´æ˜</h2><p>MIMEæ˜¯HTTPåè®®ä¸­çš„æ•°æ®ç±»å‹<br><img src="/2020/04/05/javaweb-01/5.png" alt></p><h2 id="HttpServletRequestç±»"><a href="#HttpServletRequestç±»" class="headerlink" title="HttpServletRequestç±»"></a>HttpServletRequestç±»</h2><p>æ¯æ¬¡åªè¦æœ‰è¯·æ±‚è¿›å…¥Tomcat æœåŠ¡å™¨ï¼ŒTomcat æœåŠ¡å™¨å°±ä¼šæŠŠè¯·æ±‚è¿‡æ¥çš„HTTP åè®®ä¿¡æ¯è§£æå¥½å°è£…åˆ°Request å¯¹è±¡ä¸­ã€‚ç„¶åä¼ é€’åˆ°service æ–¹æ³•ï¼ˆdoGet å’ŒdoPostï¼‰ä¸­ç»™æˆ‘ä»¬ä½¿ç”¨ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡HttpServletRequest å¯¹è±¡ï¼Œè·å–åˆ°æœ‰è¯·æ±‚çš„ä¿¡æ¯ã€‚</p><p><strong>HttpServletRequestå¸¸ç”¨æ–¹æ³•ï¼š</strong><br>i. getRequestURI() è·å–è¯·æ±‚çš„èµ„æºè·¯å¾„<br>ii. getRequestURL() è·å–è¯·æ±‚çš„ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼ˆç»å¯¹è·¯å¾„ï¼‰<br>iii. getRemoteHost() è·å–å®¢æˆ·ç«¯çš„ip åœ°å€<br>iv. getHeader() è·å–è¯·æ±‚å¤´<br>v. getParameter() è·å–è¯·æ±‚çš„å‚æ•°<br>vi. getParameterValues() è·å–è¯·æ±‚çš„å‚æ•°ï¼ˆå¤šä¸ªå€¼çš„æ—¶å€™ä½¿ç”¨ï¼‰<br>vii. getMethod() è·å–è¯·æ±‚çš„æ–¹å¼GET æˆ–POST<br>viii. setAttribute(key, value); è®¾ç½®åŸŸæ•°æ®<br>ix. getAttribute(key); è·å–åŸŸæ•°æ®<br>x. getRequestDispatcher() è·å–è¯·æ±‚è½¬å‘å¯¹è±¡</p><pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://localhost:8080/06.servlet/test3<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        ç”¨æˆ·åï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>        å¯†ç ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pwd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>        å…´è¶£çˆ±å¥½ï¼š        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hobby<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cpp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>C++        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hobby<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>java<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Java        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hobby<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>JavaScript        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloServlet3</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"postè¯·æ±‚"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è®¾ç½®è¯·æ±‚ä½“çš„å­—ç¬¦é›†ä¸ºUTF-8ï¼Œä»è€Œè§£å†³post è¯·æ±‚çš„ä¸­æ–‡ä¹±ç é—®é¢˜</span>        request<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è·å–è¯·æ±‚å‚æ•°</span>        String username <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String pwd <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"pwd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String<span class="token punctuation">[</span><span class="token punctuation">]</span> hobbies <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameterValues</span><span class="token punctuation">(</span><span class="token string">"hobby"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>pwd<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>hobbies<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="è¯·æ±‚çš„è½¬å‘"><a href="#è¯·æ±‚çš„è½¬å‘" class="headerlink" title="è¯·æ±‚çš„è½¬å‘"></a>è¯·æ±‚çš„è½¬å‘</h2><p>æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œä»ä¸€ä¸ªèµ„æºè·³è½¬åˆ°å¦ä¸€ä¸ªèµ„æºçš„æ“ä½œã€‚<br>ç‰¹ç‚¹ï¼š1ã€æµè§ˆå™¨åœ°å€æ æ²¡æœ‰å˜åŒ–<br>            2ã€æ˜¯ä¸€æ¬¡è¯·æ±‚<br>            3ã€å…±äº«RequeståŸŸä¸­çš„æ•°æ®<br>            4ã€å¯ä»¥è½¬å‘åˆ°WEB-INFç›®å½•ä¸‹<br>            5ã€ä¸å¯ä»¥è®¿é—®å·¥ç¨‹å¤–çš„èµ„æº<br>å¯èƒ½ä¼šé€ æˆè¡¨å•çš„å¤šæ¬¡æäº¤ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Servlet1</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span><span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span>IOException <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// è·å–è¯·æ±‚çš„å‚æ•°ï¼ˆåŠäº‹çš„ææ–™ï¼‰æŸ¥çœ‹</span>    String username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åœ¨Servlet1ï¼ˆæŸœå°1ï¼‰ä¸­æŸ¥çœ‹å‚æ•°ï¼ˆææ–™ï¼‰ï¼š"</span> <span class="token operator">+</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// ç»™ææ–™ç›–ä¸€ä¸ªç« ï¼Œå¹¶ä¼ é€’åˆ°Servlet2ï¼ˆæŸœå°2ï¼‰å»æŸ¥çœ‹</span>    req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">,</span><span class="token string">"æŸœå°1 çš„ç« "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// é—®è·¯ï¼šServlet2ï¼ˆæŸœå°2ï¼‰æ€ä¹ˆèµ°</span>    <span class="token comment" spellcheck="true">/**    * è¯·æ±‚è½¬å‘å¿…é¡»è¦ä»¥æ–œæ æ‰“å¤´ï¼Œæ–œæ è¡¨ç¤ºåœ°å€ä¸ºï¼šhttp://ip:port/å·¥ç¨‹å/ , æ˜ å°„åˆ°IDEA ä»£ç çš„webç›®å½•    */</span>    RequestDispatcher requestDispatcher <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/servlet2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// RequestDispatcher requestDispatcher = req.getRequestDispatcher("http://www.baidu.com");</span>    <span class="token comment" spellcheck="true">// èµ°å‘Sevlet2ï¼ˆæŸœå°2ï¼‰</span>    requestDispatcher<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="baseæ ‡ç­¾"><a href="#baseæ ‡ç­¾" class="headerlink" title="baseæ ‡ç­¾"></a>baseæ ‡ç­¾</h2><p>è®¾ç½®é¡µé¢ç›¸å¯¹è·¯å¾„å·¥ä½œæ—¶å‚ç…§çš„è·¯å¾„</p><pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>c.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--base æ ‡ç­¾è®¾ç½®é¡µé¢ç›¸å¯¹è·¯å¾„å·¥ä½œæ—¶å‚ç…§çš„åœ°å€        href å±æ€§å°±æ˜¯å‚æ•°çš„åœ°å€å€¼     --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://localhost:8080/06.servlet/a/b/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    è¿™æ˜¯a/b/c.html    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../../index.html<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¿”å›é¦–é¡µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="HttpServletResponseç±»"><a href="#HttpServletResponseç±»" class="headerlink" title="HttpServletResponseç±»"></a>HttpServletResponseç±»</h2><p>HttpServletResponse ç±»å’ŒHttpServletRequest ç±»ä¸€æ ·ã€‚<br>æ¯æ¬¡è¯·æ±‚è¿›æ¥ï¼ŒTomcat æœåŠ¡å™¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªResponse å¯¹è±¡ä¼ é€’ç»™Servlet ç¨‹åºå»ä½¿ç”¨ã€‚<br>HttpServletRequest è¡¨ç¤ºè¯·æ±‚è¿‡æ¥çš„ä¿¡æ¯ï¼ŒHttpServletResponse è¡¨ç¤ºæ‰€æœ‰å“åº”çš„ä¿¡æ¯ã€‚<br><strong>ä¸¤ä¸ªè¾“å‡ºæµï¼š(åŒæ—¶åªèƒ½ä½¿ç”¨ä¸€ä¸ª)</strong><br>å­—èŠ‚æµï¼šgetOutputStream();  &nbsp;&nbsp;&nbsp;å¸¸ç”¨äºä¸‹è½½ï¼Œä¼ é€’äºŒè¿›åˆ¶æ•°æ®<br>å­—ç¬¦æµï¼šgetWriter();&nbsp;&nbsp;&nbsp;å¸¸ç”¨äºå›ä¼ å­—ç¬¦ä¸²</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResponseIOServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span><span class="token comment" spellcheck="true">//        // è®¾ç½®æœåŠ¡å™¨å­—ç¬¦é›†</span><span class="token comment" spellcheck="true">//        response.setCharacterEncoding("utf-8");</span><span class="token comment" spellcheck="true">//        // é€šè¿‡å“åº”å¤´ï¼Œè®¾ç½®å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰å­—ç¬¦é›†</span><span class="token comment" spellcheck="true">//        response.setHeader("Content-Type","text/html;charset=UTF-8");</span>        <span class="token comment" spellcheck="true">// åŒæ—¶è®¾ç½®æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„ç¼–ç é›†</span>        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å¿…é¡»åœ¨è·å–æµå¯¹è±¡ä¹‹å‰ä½¿ç”¨</span>        <span class="token comment" spellcheck="true">// å‘å®¢æˆ·ç«¯å›ä¼ å­—ç¬¦ä¸²æ•°æ®</span>        PrintWriter writer <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"å“ˆå“ˆ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="è¯·æ±‚çš„é‡å®šå‘"><a href="#è¯·æ±‚çš„é‡å®šå‘" class="headerlink" title="è¯·æ±‚çš„é‡å®šå‘"></a>è¯·æ±‚çš„é‡å®šå‘</h2><p>è¯·æ±‚é‡å®šå‘ï¼Œæ˜¯æŒ‡å®¢æˆ·ç«¯ç»™æœåŠ¡å™¨å‘è¯·æ±‚ï¼Œç„¶åæœåŠ¡å™¨é€šè¿‡å“åº”å¤´å‘Šè¯‰å®¢æˆ·ç«¯ï¼Œå¹¶æä¾›ä¸€ä¸ªæ–°çš„åœ°å€ï¼Œç„¶åå®¢æˆ·ç«¯å»æ–°åœ°å€è®¿é—®ï¼Œå«è¯·æ±‚é‡å®šå‘ï¼ˆå› ä¸ºä¹‹å‰çš„åœ°å€å¯èƒ½å·²ç»è¢«åºŸå¼ƒï¼‰ã€‚å¯ä»¥è§£å†³è¡¨å•çš„å¤šæ¬¡æäº¤é—®é¢˜ã€‚<br><img src="/2020/04/05/javaweb-01/6.png" alt></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResponseIOServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span><span class="token comment" spellcheck="true">//        // æ–¹å¼ä¸€ï¼š</span><span class="token comment" spellcheck="true">//        // è®¾ç½®å“åº”ç </span><span class="token comment" spellcheck="true">//        response.setStatus(302);</span><span class="token comment" spellcheck="true">//        // è®¾ç½®å“åº”å¤´ï¼ŒæŒ‡æ˜æ–°çš„åœ°å€</span><span class="token comment" spellcheck="true">//        response.setHeader("Location","http://localhost:8080/06.servlet/ResponseServlet2");</span>        <span class="token comment" spellcheck="true">// æ–¹å¼äºŒï¼š</span>        response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/06.servlet/ResponseServlet2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResponseServlet2</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        PrintWriter writer <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"å“ˆå“ˆå“ˆ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="JavaEEé¡¹ç›®çš„ä¸‰å±‚æ¶æ„"><a href="#JavaEEé¡¹ç›®çš„ä¸‰å±‚æ¶æ„" class="headerlink" title="JavaEEé¡¹ç›®çš„ä¸‰å±‚æ¶æ„"></a>JavaEEé¡¹ç›®çš„ä¸‰å±‚æ¶æ„</h2><p><img src="/2020/04/05/javaweb-01/7.png" alt></p><p>åˆ†å±‚çš„ç›®çš„æ˜¯ä¸ºäº†è§£è€¦ã€‚è§£è€¦æ˜¯ä¸ºäº†é™ä½ä»£ç çš„è€¦åˆåº¦ï¼Œæ–¹ä¾¿é¡¹ç›®åæœŸçš„ç»´æŠ¤å’Œå‡çº§ã€‚</p><h3 id="1ã€MVC-æ¦‚å¿µ"><a href="#1ã€MVC-æ¦‚å¿µ" class="headerlink" title="1ã€MVC æ¦‚å¿µ"></a>1ã€MVC æ¦‚å¿µ</h3><p>MVC å…¨ç§°ï¼šModel æ¨¡å‹ã€View è§†å›¾ã€Controller æ§åˆ¶å™¨ã€‚<br>MVC æœ€æ—©å‡ºç°åœ¨JavaEE ä¸‰å±‚ä¸­çš„Web å±‚ï¼Œå®ƒå¯ä»¥æœ‰æ•ˆçš„æŒ‡å¯¼Web å±‚çš„ä»£ç å¦‚ä½•æœ‰æ•ˆåˆ†ç¦»ï¼Œå•ç‹¬å·¥ä½œã€‚<br>Model æ¨¡å‹ï¼šå°†ä¸ä¸šåŠ¡é€»è¾‘ç›¸å…³çš„æ•°æ®å°è£…ä¸ºå…·ä½“çš„JavaBean ç±»ï¼Œå…¶ä¸­ä¸æºæ‚ä»»ä½•ä¸æ•°æ®å¤„ç†ç›¸å…³çš„ä»£ç â€”â€”JavaBean/domain/entity/pojoã€‚<br>View è§†å›¾ï¼šåªè´Ÿè´£æ•°æ®å’Œç•Œé¢çš„æ˜¾ç¤ºï¼Œä¸æ¥å—ä»»ä½•ä¸æ˜¾ç¤ºæ•°æ®æ— å…³çš„ä»£ç ï¼Œä¾¿äºç¨‹åºå‘˜å’Œç¾å·¥çš„åˆ†å·¥åˆä½œâ€”â€”JSP/HTMLã€‚<br>Controller æ§åˆ¶å™¨ï¼šåªè´Ÿè´£æ¥æ”¶è¯·æ±‚ï¼Œè°ƒç”¨ä¸šåŠ¡å±‚çš„ä»£ç å¤„ç†è¯·æ±‚ï¼Œç„¶åæ´¾å‘é¡µé¢ï¼Œæ˜¯ä¸€ä¸ªâ€œè°ƒåº¦è€…â€çš„è§’è‰²â€”â€”Servletã€‚è½¬åˆ°æŸä¸ªé¡µé¢ã€‚æˆ–è€…æ˜¯é‡å®šå‘åˆ°æŸä¸ªé¡µé¢ã€‚<br>MVC æ˜¯ä¸€ç§æ€æƒ³ï¼ŒMVC çš„ç†å¿µæ˜¯å°†è½¯ä»¶ä»£ç æ‹†åˆ†æˆä¸ºç»„ä»¶ï¼Œå•ç‹¬å¼€å‘ï¼Œç»„åˆä½¿ç”¨ï¼ˆç›®çš„è¿˜æ˜¯ä¸ºäº†é™ä½è€¦åˆåº¦ï¼‰ã€‚<br><img src="/2020/04/05/javaweb-01/8.png"></p>]]></content>
      
      
      <categories>
          
          <category> JavaWeb </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaWeb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDK8æ–°ç‰¹æ€§</title>
      <link href="2020/03/24/java-11/"/>
      <url>2020/03/24/java-11/</url>
      
        <content type="html"><![CDATA[<h2 id="Lambdaè¡¨è¾¾å¼"><a href="#Lambdaè¡¨è¾¾å¼" class="headerlink" title="Lambdaè¡¨è¾¾å¼"></a>Lambdaè¡¨è¾¾å¼</h2><p>Lambdaæ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€æ®µå¯ä¼ é€’çš„ä»£ç ï¼Œå°†ä»£ç å°†æ•°æ®ä¸€æ ·è¿›è¡Œä¼ é€’ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * @author zyz * @description lambdaè¡¨è¾¾å¼çš„å†™æ³• * æ ¼å¼ï¼šlambdaå‚æ•°åˆ—è¡¨(æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•çš„å½¢å‚åˆ—è¡¨)->lambdaä½“(é‡å†™çš„æŠ½è±¡æ–¹æ³•çš„æ–¹æ³•ä½“) * lambdaè¡¨è¾¾å¼çš„æœ¬è´¨ï¼šä½œä¸ºå‡½æ•°å¼æ¥å£çš„ä¸€ä¸ªå®ä¾‹ * å‡½æ•°å¼æ¥å£ï¼š@FunctionalInterface åªå£°æ˜äº†ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ * @create 2020-03-24 11:09 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LambdaTest1</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// æ–¹å¼ä¸€ï¼šæ— å‚ï¼Œæ— è¿”å›å€¼ï¼Œä¸€æ¡æ‰§è¡Œè¯­å¥ (å¯ä»¥çœç•¥return)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        Runnable r1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span> System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ­ªæ¯”å·´åœ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        r1<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// æ–¹å¼äºŒï¼šä¸€ä¸ªå‚æ•°ï¼Œæ— è¿”å›å€¼   å‚æ•°æ•°æ®ç±»å‹å¯ä»¥çœç•¥(ç¼–è¯‘å™¨ç±»å‹æ¨æ–­)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        Consumer<span class="token operator">&lt;</span>String<span class="token operator">></span> c1 <span class="token operator">=</span> <span class="token punctuation">(</span>String s<span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>        c1<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">"èŒ‰è‰~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// æ–¹å¼ä¸‰ï¼šä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°çš„å°æ‹¬å·å¯ä»¥çœç•¥</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        Consumer<span class="token operator">&lt;</span>String<span class="token operator">></span> c1 <span class="token operator">=</span> s <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//æ–¹æ³•å¼•ç”¨   ä½¿ç”¨æ“ä½œç¬¦â€œ::â€ å°†ç±»(æˆ–å¯¹è±¡) ä¸æ–¹æ³•ååˆ†éš”å¼€æ¥ã€‚</span>        <span class="token comment" spellcheck="true">// Consumer&lt;String> c1 = System.out::println;</span>        c1<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">"èµ·   é£"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// æ–¹å¼å››ï¼šä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„å‚æ•°ï¼Œå¤šæ¡æ‰§è¡Œè¯­å¥</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        Comparator<span class="token operator">&lt;</span>Integer<span class="token operator">></span> com1 <span class="token operator">=</span> <span class="token punctuation">(</span>o1<span class="token punctuation">,</span>o2<span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>o1<span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>o2<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> o1<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>o2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>com1<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="Lambdaè¡¨è¾¾å¼çš„åº”ç”¨"><a href="#Lambdaè¡¨è¾¾å¼çš„åº”ç”¨" class="headerlink" title="Lambdaè¡¨è¾¾å¼çš„åº”ç”¨"></a>Lambdaè¡¨è¾¾å¼çš„åº”ç”¨</h2><h3 id="forEach-éå†Map"><a href="#forEach-éå†Map" class="headerlink" title="forEach éå†Map"></a>forEach éå†Map</h3><pre class=" language-java"><code class="language-java">Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Object<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Object<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"key2"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"key3"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"key4"</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>map<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>value<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"key:"</span> <span class="token operator">+</span> key <span class="token operator">+</span> <span class="token string">",value:"</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h3 id="forEach-éå†List"><a href="#forEach-éå†List" class="headerlink" title="forEach éå†List"></a>forEach éå†List</h3><pre class=" language-java"><code class="language-java">List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span>Integer<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>value <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"value:"</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h3 id="åˆ›å»ºå¹¶å¼€å¯çº¿ç¨‹"><a href="#åˆ›å»ºå¹¶å¼€å¯çº¿ç¨‹" class="headerlink" title="åˆ›å»ºå¹¶å¼€å¯çº¿ç¨‹"></a>åˆ›å»ºå¹¶å¼€å¯çº¿ç¨‹</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"new Thread start"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </code></pre><h2 id="Stream-æµ"><a href="#Stream-æµ" class="headerlink" title="Stream æµ"></a>Stream æµ</h2><p>ä»¥é›†åˆä¸ºä¾‹ï¼Œä¸€ä¸ªæµå¼å¤„ç†çš„æ“ä½œæˆ‘ä»¬é¦–å…ˆéœ€è¦è°ƒç”¨<code>stream()</code>å‡½æ•°å°†å…¶<strong>è½¬æ¢æˆæµ</strong>ï¼Œç„¶åå†è°ƒç”¨ç›¸åº”çš„<strong>ä¸­é—´æ“ä½œ</strong>è¾¾åˆ°æˆ‘ä»¬éœ€è¦å¯¹é›†åˆè¿›è¡Œçš„æ“ä½œï¼Œæ¯”å¦‚ç­›é€‰ã€è½¬æ¢ç­‰ï¼Œæœ€åé€šè¿‡<strong>ç»ˆç«¯æ“ä½œ</strong>å¯¹å‰é¢çš„ç»“æœè¿›è¡Œå°è£…ï¼Œè¿”å›æˆ‘ä»¬éœ€è¦çš„å½¢å¼ã€‚<br><img src="/2020/03/24/java-11/1.jpg" style="zoom:80%;"></p><h3 id="å¸¸ç”¨apiçš„ä½¿ç”¨"><a href="#å¸¸ç”¨apiçš„ä½¿ç”¨" class="headerlink" title="å¸¸ç”¨apiçš„ä½¿ç”¨"></a>å¸¸ç”¨apiçš„ä½¿ç”¨</h3><p>åˆ›å»ºå®ä½“ç±»</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@NoArgsConstructor</span><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">{</span><span class="token keyword">private</span> Long id<span class="token punctuation">;</span>       <span class="token keyword">private</span> String name<span class="token punctuation">;</span>   <span class="token keyword">private</span> Integer age<span class="token punctuation">;</span>   <span class="token keyword">private</span> String school<span class="token punctuation">;</span> </code></pre><p>åˆå§‹åŒ–</p><pre class=" language-java"><code class="language-java">List<span class="token operator">&lt;</span>User<span class="token operator">></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span>User<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token punctuation">{</span>                <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>1L<span class="token punctuation">,</span><span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"æ¸…åå¤§å­¦"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>2L<span class="token punctuation">,</span><span class="token string">"æå››"</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">"æ¸…åå¤§å­¦"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>3L<span class="token punctuation">,</span><span class="token string">"ç‹äº”"</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token string">"æ¸…åå¤§å­¦"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>4L<span class="token punctuation">,</span><span class="token string">"èµµå…­"</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">"æ¸…åå¤§å­¦"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>5L<span class="token punctuation">,</span><span class="token string">"ç”°ä¸ƒ"</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">"åŒ—äº¬å¤§å­¦"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>6L<span class="token punctuation">,</span><span class="token string">"å°æ˜"</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token string">"åŒ—äº¬å¤§å­¦"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>7L<span class="token punctuation">,</span><span class="token string">"å°çº¢"</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token string">"åŒ—äº¬å¤§å­¦"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>8L<span class="token punctuation">,</span><span class="token string">"å°å"</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token string">"æµ™æ±Ÿå¤§å­¦"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>9L<span class="token punctuation">,</span><span class="token string">"å°ä¸½"</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span> <span class="token string">"æµ™æ±Ÿå¤§å­¦"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>10L<span class="token punctuation">,</span><span class="token string">"å°ä½•"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"æµ™æ±Ÿå¤§å­¦"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><blockquote><p>filter è¿‡æ»¤</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// ç­›é€‰å‡ºå­¦æ ¡æ˜¯æ¸…åå¤§å­¦çš„æ‰€æœ‰ç”¨æˆ·å¹¶æ‰“å°è¾“å‡ºä»–ä»¬çš„å§“å</span>List<span class="token operator">&lt;</span>User<span class="token operator">></span> userList <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>user <span class="token operator">-</span><span class="token operator">></span> <span class="token string">"æ¸…åå¤§å­¦"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getSchool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        userList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>user <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre class=" language-shell"><code class="language-shell">å¼ ä¸‰ æå›› ç‹äº” èµµå…­</code></pre><blockquote><p>distinct</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// distinct è·å–æ‰€æœ‰userçš„å¹´é¾„ï¼ˆå¹´é¾„ä¸é‡å¤ï¼‰</span><span class="token comment" spellcheck="true">// map æ–¹æ³•ç”¨äºæ˜ å°„æ¯ä¸ªå…ƒç´ åˆ°å¯¹åº”çš„ç»“æœ</span><span class="token comment" spellcheck="true">// List&lt;Integer> userAgeList = list.stream().map(User::getAge)</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> userAgeList <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>user <span class="token operator">-</span><span class="token operator">></span> user<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>userAgeList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>age <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>age <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre class=" language-shell"><code class="language-shell">18 20 16 19 25 22 21 </code></pre><blockquote><p>limit  è¿”å›å‰nä¸ªå…ƒç´ çš„æµï¼Œå½“é›†åˆé•¿åº¦å°äºnæ—¶ï¼Œåˆ™è¿”å›æ‰€æœ‰é›†åˆ</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// è·å–å¹´é¾„æ˜¯å¶æ•°çš„å‰2åuser</span>List<span class="token operator">&lt;</span>User<span class="token operator">></span> userList2 <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>user <span class="token operator">-</span><span class="token operator">></span> user<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>userList2<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>user <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-shell"><code class="language-shell">å¼ ä¸‰ æå››</code></pre><blockquote><p>sorted</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// å°†æ‰€æœ‰useræŒ‰å¹´é¾„ä»å¤§åˆ°å°æ’åº</span>List<span class="token operator">&lt;</span>User<span class="token operator">></span> userList3 <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">(</span>user1<span class="token punctuation">,</span> user2<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> user2<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> user1<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userList3<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre class=" language-shell"><code class="language-shell">[User{id=5, name='ç”°ä¸ƒ', age=25, school='åŒ—äº¬å¤§å­¦'}, User{id=8, name='å°å', age=22, school='æµ™æ±Ÿå¤§å­¦'}, User{id=9, name='å°ä¸½', age=21, school='æµ™æ±Ÿå¤§å­¦'}, User{id=2, name='æå››', age=20, school='æ¸…åå¤§å­¦'}, User{id=7, name='å°çº¢', age=20, school='åŒ—äº¬å¤§å­¦'}, User{id=4, name='èµµå…­', age=19, school='æ¸…åå¤§å­¦'}, User{id=1, name='å¼ ä¸‰', age=18, school='æ¸…åå¤§å­¦'}, User{id=10, name='å°ä½•', age=18, school='æµ™æ±Ÿå¤§å­¦'}, User{id=3, name='ç‹äº”', age=16, school='æ¸…åå¤§å­¦'}, User{id=6, name='å°æ˜', age=16, school='åŒ—äº¬å¤§å­¦'}]</code></pre><blockquote><p>skip  è·³è¿‡å‡ ä¸ªå…ƒç´ å†è¾“å‡º</p></blockquote><pre class=" language-java"><code class="language-java">    <span class="token comment" spellcheck="true">// è·³è¿‡å‰ä¸¤ä¸ªuser,è¾“å‡ºä¹‹åçš„user</span>        List<span class="token operator">&lt;</span>User<span class="token operator">></span> userList4 <span class="token operator">=</span> list            <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userList4<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre class=" language-shell"><code class="language-shell">[User{id=3, name='ç‹äº”', age=16, school='æ¸…åå¤§å­¦'}, User{id=4, name='èµµå…­', age=19, school='æ¸…åå¤§å­¦'}, User{id=5, name='ç”°ä¸ƒ', age=25, school='åŒ—äº¬å¤§å­¦'}, User{id=6, name='å°æ˜', age=16, school='åŒ—äº¬å¤§å­¦'}, User{id=7, name='å°çº¢', age=20, school='åŒ—äº¬å¤§å­¦'}, User{id=8, name='å°å', age=22, school='æµ™æ±Ÿå¤§å­¦'}, User{id=9, name='å°ä¸½', age=21, school='æµ™æ±Ÿå¤§å­¦'}, User{id=10, name='å°ä½•', age=18, school='æµ™æ±Ÿå¤§å­¦'}]</code></pre><blockquote><p>map æ˜ å°„å…ƒç´ ç»“æœ</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// ç­›é€‰å‡ºå­¦æ ¡æ˜¯æ¸…åå¤§å­¦çš„æ‰€æœ‰å­¦ç”Ÿ</span>List<span class="token operator">&lt;</span>String<span class="token operator">></span> nameList <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>user <span class="token operator">-</span><span class="token operator">></span> <span class="token string">"æ¸…åå¤§å­¦"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getSchool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>user <span class="token operator">-</span><span class="token operator">></span> user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>nameList<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * é™¤äº†ä¸Šé¢è¿™ç±»åŸºç¡€çš„mapï¼Œjava8è¿˜æä¾›äº†mapToDouble(ToDoubleFunction&lt;? super T> mapper)ï¼Œ * mapToInt(ToIntFunction&lt;? super T> mapper)ï¼Œ * mapToLong(ToLongFunction&lt;? super T> mapper)ï¼Œ * java8ä¸ºè¿™äº›æµè®¾å®šäº†ä¸€äº›ç‰¹æ®Šçš„æ“ä½œ */</span><span class="token comment" spellcheck="true">// ç»Ÿè®¡å­¦æ ¡ä¸ºåŒ—äº¬å¤§å­¦çš„æ‰€æœ‰ç”¨æˆ·çš„äººæ•°</span><span class="token keyword">long</span> count <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>user <span class="token operator">-</span><span class="token operator">></span> <span class="token string">"åŒ—äº¬å¤§å­¦"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getSchool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">mapToInt</span><span class="token punctuation">(</span>user <span class="token operator">-</span><span class="token operator">></span> user<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åŒ—äº¬å¤§å­¦ç”¨æˆ·çš„äººæ•°ï¼š"</span> <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre class=" language-shell"><code class="language-shell">[å¼ ä¸‰, æå››, ç‹äº”, èµµå…­]åŒ—äº¬å¤§å­¦ç”¨æˆ·çš„äººæ•°ï¼š3</code></pre><blockquote><p>åŒ¹é…</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// allMatch</span><span class="token comment" spellcheck="true">// ç”¨äºæ£€æµ‹æ˜¯å¦å…¨éƒ¨éƒ½æ»¡è¶³æŒ‡å®šçš„å‚æ•°è¡Œä¸ºï¼Œå¦‚æœå…¨éƒ¨æ»¡è¶³åˆ™è¿”å›true</span><span class="token comment" spellcheck="true">// åˆ¤æ–­æ‰€æœ‰ç”¨æˆ·çš„å¹´é¾„æ˜¯å¦éƒ½å¤§äº18å²</span><span class="token keyword">boolean</span> isAllAdult <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">allMatch</span><span class="token punctuation">(</span>user <span class="token operator">-</span><span class="token operator">></span> user<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>isAllAdult<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// anyMatch</span><span class="token comment" spellcheck="true">// æ£€æµ‹æ˜¯å¦å­˜åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªæ»¡è¶³æŒ‡å®šçš„å‚æ•°è¡Œä¸ºï¼Œå¦‚æœæ»¡è¶³åˆ™è¿”å›true</span><span class="token comment" spellcheck="true">// åˆ¤æ–­æ˜¯å¦æœ‰å¤§äº18å²çš„ç”¨æˆ·</span><span class="token keyword">boolean</span> isAnyAdult <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">anyMatch</span><span class="token punctuation">(</span>user <span class="token operator">-</span><span class="token operator">></span> user<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>isAnyAdult<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// noneMatchã€€ã€€</span><span class="token comment" spellcheck="true">// æ£€æµ‹æ˜¯å¦ä¸å­˜åœ¨æ»¡è¶³æŒ‡å®šè¡Œä¸ºçš„å…ƒç´ ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›true</span></code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre class=" language-shell"><code class="language-shell">falsetrue</code></pre><blockquote><p>findFirst  ç”¨äºè¿”å›æ»¡è¶³æ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ </p></blockquote><pre class=" language-java"><code class="language-java">Optional<span class="token operator">&lt;</span>User<span class="token operator">></span> first <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>user <span class="token operator">-</span><span class="token operator">></span> user<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">18</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>User user <span class="token operator">=</span> first<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre class=" language-shell"><code class="language-shell">User{id=1, name='å¼ ä¸‰', age=18, school='æ¸…åå¤§å­¦'}</code></pre><blockquote><p>counting  è®¡ç®—ä¸ªæ•°</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// Long counting = list.stream().collect(Collectors.counting());</span><span class="token keyword">long</span> counting <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ€»äººæ•°ï¼š"</span><span class="token operator">+</span>counting<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre class=" language-shell"><code class="language-shell">æ€»äººæ•°ï¼š10</code></pre><blockquote><p>maxBy  minBy  è®¡ç®—æœ€å¤§å€¼ æœ€å°å€¼</p></blockquote><pre class=" language-java"><code class="language-java">Integer maxAge <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">maxBy</span><span class="token punctuation">(</span><span class="token punctuation">(</span>user1<span class="token punctuation">,</span> user2<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> user1<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> user2<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Integer minAge <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">minBy</span><span class="token punctuation">(</span><span class="token punctuation">(</span>user1<span class="token punctuation">,</span> user2<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> user1<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> user2<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœ€å¤§å¹´é¾„ï¼š"</span> <span class="token operator">+</span> maxAge<span class="token punctuation">)</span><span class="token punctuation">;</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœ€å°å¹´é¾„ï¼š"</span> <span class="token operator">+</span> minAge<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æ–¹å¼äºŒï¼š ä½¿ç”¨æ¯”è¾ƒå™¨</span>Integer maxAge2 <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">maxBy</span><span class="token punctuation">(</span>Comparator<span class="token punctuation">.</span><span class="token function">comparing</span><span class="token punctuation">(</span>User<span class="token operator">:</span><span class="token operator">:</span>getAge<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Integer minAge2 <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">minBy</span><span class="token punctuation">(</span>Comparator<span class="token punctuation">.</span><span class="token function">comparing</span><span class="token punctuation">(</span>User<span class="token operator">:</span><span class="token operator">:</span>getAge<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœ€å¤§å¹´é¾„ï¼š"</span> <span class="token operator">+</span> maxAge2<span class="token punctuation">)</span><span class="token punctuation">;</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœ€å°å¹´é¾„ï¼š"</span> <span class="token operator">+</span> minAge2<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre class=" language-shell"><code class="language-shell">æœ€å¤§å¹´é¾„ï¼š25æœ€å°å¹´é¾„ï¼š16æœ€å¤§å¹´é¾„ï¼š25æœ€å°å¹´é¾„ï¼š16</code></pre><blockquote><p>summingIntã€summingLongã€summingDouble è®¡ç®—æ€»å’Œ</p></blockquote><pre class=" language-java"><code class="language-java">Integer ageSum <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">summingInt</span><span class="token punctuation">(</span>User<span class="token operator">:</span><span class="token operator">:</span>getAge<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å¹´é¾„æ€»åˆä¸ºï¼š"</span> <span class="token operator">+</span> ageSum<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre class=" language-shell"><code class="language-shell">å¹´é¾„æ€»åˆä¸ºï¼š195</code></pre><blockquote><p>averageIntã€averageLongã€averageDouble è®¡ç®—å¹³å‡å€¼</p></blockquote><pre class=" language-java"><code class="language-java">Double ageAverage <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">averagingInt</span><span class="token punctuation">(</span>User<span class="token operator">:</span><span class="token operator">:</span>getAge<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å¹´é¾„å¹³å‡å€¼ï¼š"</span> <span class="token operator">+</span> ageAverage<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre class=" language-shell"><code class="language-shell">å¹´é¾„å¹³å‡å€¼ï¼š19.5</code></pre><blockquote><p>summarizingIntã€summarizingLongã€summarizingDouble  </p><p>ä¸€æ¬¡æ€§æŸ¥è¯¢å…ƒç´ ä¸ªæ•°ã€æ€»å’Œã€æœ€å¤§å€¼ã€æœ€å°å€¼å’Œå¹³å‡å€¼</p></blockquote><pre class=" language-java"><code class="language-java">IntSummaryStatistics collect <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">summarizingInt</span><span class="token punctuation">(</span>User<span class="token operator">:</span><span class="token operator">:</span>getAge<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>collect<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre class=" language-shell"><code class="language-shell">IntSummaryStatistics{count=10, sum=195, min=16, average=19.500000, max=25}</code></pre><blockquote><p>joining å­—ç¬¦ä¸²æ‹¼æ¥</p></blockquote><pre class=" language-java"><code class="language-java">String names <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>User<span class="token operator">:</span><span class="token operator">:</span>getName<span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">joining</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>names<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre class=" language-shell"><code class="language-shell">å¼ ä¸‰,æå››,ç‹äº”,èµµå…­,ç”°ä¸ƒ,å°æ˜,å°çº¢,å°å,å°ä¸½,å°ä½•</code></pre><blockquote><p>groupingBy åˆ†ç»„</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// æ ¹æ®å¤§å­¦åˆ’åˆ†ç”¨æˆ·</span>Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>User<span class="token operator">>></span> userBySchool <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">groupingBy</span><span class="token punctuation">(</span>User<span class="token operator">:</span><span class="token operator">:</span>getSchool<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userBySchool<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre class=" language-shell"><code class="language-shell">{æµ™æ±Ÿå¤§å­¦=[User{id=8, name='å°å', age=22, school='æµ™æ±Ÿå¤§å­¦'}, User{id=9, name='å°ä¸½', age=21, school='æµ™æ±Ÿå¤§å­¦'}, User{id=10, name='å°ä½•', age=18, school='æµ™æ±Ÿå¤§å­¦'}], åŒ—äº¬å¤§å­¦=[User{id=5, name='ç”°ä¸ƒ', age=25, school='åŒ—äº¬å¤§å­¦'}, User{id=6, name='å°æ˜', age=16, school='åŒ—äº¬å¤§å­¦'}, User{id=7, name='å°çº¢', age=20, school='åŒ—äº¬å¤§å­¦'}], æ¸…åå¤§å­¦=[User{id=1, name='å¼ ä¸‰', age=18, school='æ¸…åå¤§å­¦'}, User{id=2, name='æå››', age=20, school=</code></pre><blockquote><p>partitioningBy  åˆ†åŒº</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// æŒ‰ç…§æ˜¯å¦æ˜¯æ¸…åå¤§å­¦çš„userå°†æ‰€æœ‰useråˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†</span>Map<span class="token operator">&lt;</span>Boolean<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>User<span class="token operator">>></span> userByQinghua <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">partitioningBy</span><span class="token punctuation">(</span>user1 <span class="token operator">-</span><span class="token operator">></span> <span class="token string">"æ¸…åå¤§å­¦"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>user1<span class="token punctuation">.</span><span class="token function">getSchool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userByQinghua<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre class=" language-shell"><code class="language-shell">{false=[User{id=5, name='ç”°ä¸ƒ', age=25, school='åŒ—äº¬å¤§å­¦'}, User{id=6, name='å°æ˜', age=16, school='åŒ—äº¬å¤§å­¦'}, User{id=7, name='å°çº¢', age=20, school='åŒ—äº¬å¤§å­¦'}, User{id=8, name='å°å', age=22, school='æµ™æ±Ÿå¤§å­¦'}, User{id=9, name='å°ä¸½', age=21, school='æµ™æ±Ÿå¤§å­¦'}, User{id=10, name='å°ä½•', age=18, school='æµ™æ±Ÿå¤§å­¦'}], true=[User{id=1, name='å¼ ä¸‰', age=18, school='æ¸…åå¤§å­¦'}, User{id=2, name='æå››', age=20, school='æ¸…åå¤§å­¦'}, User{id=3, name='ç‹äº”', age=16, school='æ¸…åå¤§å­¦'}, User{id=4, name='èµµå…­', age=19, school='æ¸…åå¤§å­¦'}]}</code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jdbcæ ¸å¿ƒæŠ€æœ¯</title>
      <link href="2020/03/23/jdbc/"/>
      <url>2020/03/23/jdbc/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€JDBCæ¦‚è¿°"><a href="#ä¸€ã€JDBCæ¦‚è¿°" class="headerlink" title="ä¸€ã€JDBCæ¦‚è¿°"></a>ä¸€ã€JDBCæ¦‚è¿°</h2><p>JDBC(Java Database Connectivity)æ˜¯ä¸€ä¸ª<strong>ç‹¬ç«‹äºç‰¹å®šæ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€é€šç”¨çš„SQLæ•°æ®åº“å­˜å–å’Œæ“ä½œçš„å…¬å…±æ¥å£</strong>(ä¸€ç»„API)ã€‚<br>                  <img src="/2020/03/23/jdbc/1.png" alt></p><p><strong>JDBCæ¥å£(API)åŒ…æ‹¬ä¸¤ä¸ªå±‚æ¬¡ï¼š</strong><br><em>é¢å‘åº”ç”¨çš„API</em>ï¼šJava APIï¼ŒæŠ½è±¡æ¥å£ï¼Œä¾›ç¨‹åºå¼€å‘äººå‘˜ä½¿ç”¨(è¿æ¥æ•°æ®åº“ï¼Œæ‰§è¡ŒSQLè¯­å¥ï¼Œè·å¾—ç»“æœ)ã€‚<br><em>é¢å‘æ•°æ®åº“çš„APIï¼š</em>Java Driver APIï¼Œä¾›å¼€å‘å•†æ•°æ®åº“é©±åŠ¨ç¨‹åºç”¨ã€‚</p><blockquote><p>JDBCæ˜¯sunå…¬å¸æä¾›çš„ä¸€å¥—ç”¨äºæ•°æ®åº“æ“ä½œçš„æ¥å£ï¼Œjavaç¨‹åºå‘˜åªéœ€è¦é¢å‘è¿™å¥—æ¥å£ç¼–ç¨‹å³å¯ã€‚</p><p>ä¸åŒçš„æ•°æ®åº“å‚å•†ï¼Œéœ€è¦é’ˆå¯¹è¿™å¥—æ¥å£ã€‚æä¾›ä¸åŒå®ç°ã€‚ä¸åŒçš„å®ç°çš„é›†åˆï¼Œå³ä¸ºä¸åŒæ•°æ®åº“çš„é©±åŠ¨ã€‚</p><p>â€‹                                                                                                                                          â€”â€”é¢å‘æ¥å£ç¼–ç¨‹</p></blockquote><p><strong>JDBCç¨‹åºç¼–å†™æ­¥éª¤ï¼š</strong></p><p><img src="/2020/03/23/jdbc/2.png" alt></p><h2 id="äºŒã€è·å–æ•°æ®åº“è¿æ¥"><a href="#äºŒã€è·å–æ•°æ®åº“è¿æ¥" class="headerlink" title="äºŒã€è·å–æ•°æ®åº“è¿æ¥"></a>äºŒã€è·å–æ•°æ®åº“è¿æ¥</h2><p><strong>æ¡ä»¶1ã€Driveræ¥å£</strong><br>java.sql.Driver æ¥å£æ˜¯æ‰€æœ‰JDBCé©±åŠ¨ç¨‹åºéœ€è¦å®ç°çš„æ¥å£ ã€‚è¿™ä¸ªæ¥å£æ˜¯æä¾›ç»™æ•°æ®åº“å‚å•†ä½¿ç”¨çš„ï¼Œä¸åŒæ•°æ®åº“å‚å•†æä¾›ä¸åŒçš„å®ç°ã€‚<br>åœ¨ç¨‹åºä¸­ä¸éœ€è¦ç›´æ¥å–è®¿é—®å®ç°äº†Driver æ¥å£çš„ç±»ï¼Œè€Œæ˜¯ç”±ç¨‹åºé©±åŠ¨ç®¡ç†å™¨ç±»(java.sql.DriverManager)å»è°ƒç”¨è¿™äº›Driverå®ç°ã€‚<br>mysqlçš„é©±åŠ¨ï¼šcom.mysql.jdbc.Driver(mysql6.0åŠä»¥å‰)<br><strong>mysql6.0ä¹‹åæ”¹ç”¨ï¼šcom.mysql.cj.jdbc.Driver</strong></p><p><strong>æ¡ä»¶2ã€URL</strong><br>jdbc URLç”¨äºæ ‡è¯†ä¸€ä¸ªè¢«æ³¨å†Œçš„é©±åŠ¨ç¨‹åºï¼Œé©±åŠ¨ç¨‹åºç®¡ç†å™¨é€šè¿‡è¿™ä¸ªURLé€‰æ‹©æ­£ç¡®çš„é©±åŠ¨ç¨‹åºï¼Œä»è€Œå»ºç«‹åˆ°æ•°æ®åº“çš„è¿æ¥ã€‚</p><p>æ ¼å¼(mysql6.0åŠä»¥å‰)ï¼š<img src="/2020/03/23/jdbc/3.png" alt></p><p><strong>mysql6.0ä»¥åéœ€è¦åœ¨åé¢åŠ ä¸Šæ—¶åŒºï¼š</strong><br><strong>â€jdbc:mysql://localhost:3306/test?serverTimezone=Asia/Shanghaiâ€œ</strong></p><p><strong>æ¡ä»¶3ã€ç”¨æˆ·åå’Œå¯†ç </strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConnectionTest</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">connectionTest1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> SQLException <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// è·å–Driverå®ç°ç±»å¯¹è±¡</span>            Driver driver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>Driver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            String url <span class="token operator">=</span> <span class="token string">"jdbc:mysql://localhost:3306/test?serverTimezone=Asia/Shanghai"</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// å°†ç”¨æˆ·åå¯†ç å°è£…åœ¨Propertiesä¸­</span>            Properties info <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            info<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string">"root"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            info<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">,</span> <span class="token string">"2824199842"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Connection conn <span class="token operator">=</span> driver<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> info<span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>conn<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>  <span class="token comment" spellcheck="true">// æ²¡æœ‰ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„API,ä½¿å¾—ç¨‹åºå…·æœ‰æ›´å¥½çš„ç§»æ¤æ€§</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">connectionTest2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception<span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 1.ä½¿ç”¨åå°„è·å–Driverå®ç°ç±»å¯¹è±¡</span>        Class<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> class1 <span class="token operator">=</span> Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.mysql.cj.jdbc.Driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Driver driver <span class="token operator">=</span> <span class="token punctuation">(</span>Driver<span class="token punctuation">)</span> class1<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 2.æä¾›è¦è¿æ¥çš„æ•°æ®åº“</span>        String url <span class="token operator">=</span> <span class="token string">"jdbc:mysql://localhost:3306/test?serverTimezone=Asia/Shanghai"</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 3.æä¾›è¦è¿æ¥çš„ç”¨æˆ·åã€å¯†ç </span>        Properties info <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        info<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string">"root"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        info<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">,</span> <span class="token string">"2824199842"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 4.å»ºç«‹è¿æ¥</span>        Connection conn <span class="token operator">=</span> driver<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> info<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>conn<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// ä½¿ç”¨DriverManageræ›¿æ¢Driver</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">connectionTest3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 1.è·å–Driverå®ç°ç±»å¯¹è±¡</span>        Class<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> class1 <span class="token operator">=</span> Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.mysql.cj.jdbc.Driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Driver driver <span class="token operator">=</span> <span class="token punctuation">(</span>Driver<span class="token punctuation">)</span> class1<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 2.æä¾›URLï¼Œç”¨æˆ·ååŠå¯†ç </span>        String url <span class="token operator">=</span> <span class="token string">"jdbc:mysql://localhost:3306/test?serverTimezone=Asia/Shanghai"</span><span class="token punctuation">;</span>        String user <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>        String pwd <span class="token operator">=</span> <span class="token string">"2824199842"</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 3.æ³¨å†Œé©±åŠ¨</span>        DriverManager<span class="token punctuation">.</span><span class="token function">registerDriver</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 4.è·å–è¿æ¥</span>        Connection conn <span class="token operator">=</span> DriverManager<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>user<span class="token punctuation">,</span>pwd<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>conn<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// çœç•¥æ˜¾å¼åŠ è½½é©±åŠ¨</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">connectionTest4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// æä¾›URLï¼Œç”¨æˆ·ååŠå¯†ç </span>        String url <span class="token operator">=</span> <span class="token string">"jdbc:mysql://localhost:3306/test?serverTimezone=Asia/Shanghai"</span><span class="token punctuation">;</span>        String user <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>        String pwd <span class="token operator">=</span> <span class="token string">"2824199842"</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åŠ è½½Driver  mysqlçš„Driverä¸­é™æ€ä»£ç å—ä¸­å·²ç»æ³¨å†Œäº†driver</span>        Class<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> class1 <span class="token operator">=</span> Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.mysql.cj.jdbc.Driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Driver driver <span class="token operator">=</span> <span class="token punctuation">(</span>Driver<span class="token punctuation">)</span> class1<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//        </span><span class="token comment" spellcheck="true">//        // æ³¨å†Œé©±åŠ¨</span><span class="token comment" spellcheck="true">//        DriverManager.registerDriver(driver);</span>        <span class="token comment" spellcheck="true">// è·å–è¿æ¥</span>        Connection conn <span class="token operator">=</span> DriverManager<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>user<span class="token punctuation">,</span>pwd<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>conn<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// å°†ä¿¡æ¯æ”¾å…¥é…ç½®æ–‡ä»¶jdbc.propertiesä¸­,é€šè¿‡è¯»å–é…ç½®æ–‡ä»¶è·å–è¿æ¥æ¡ä»¶(url,user,password,driverclass)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">connectionTest5</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 1.è¯»å–é…ç½®æ–‡ä»¶ä¿¡æ¯</span>        InputStream inputStream <span class="token operator">=</span> ClassLoader<span class="token punctuation">.</span><span class="token function">getSystemClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"jdbc.properties"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Properties pros <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        pros<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>        String user <span class="token operator">=</span> pros<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String pwd <span class="token operator">=</span> pros<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String url <span class="token operator">=</span> pros<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String driverClass <span class="token operator">=</span> pros<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"driverclass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 2.åŠ è½½é©±åŠ¨</span>        Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>driverClass<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 3.è·å–è¿æ¥</span>        Connection conn <span class="token operator">=</span> DriverManager<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>user<span class="token punctuation">,</span>pwd<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>conn<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><img src="/2020/03/23/jdbc/7.png" alt></p><h2 id="ä¸‰ã€ä½¿ç”¨PreparedStatementå®ç°CRUD"><a href="#ä¸‰ã€ä½¿ç”¨PreparedStatementå®ç°CRUD" class="headerlink" title="ä¸‰ã€ä½¿ç”¨PreparedStatementå®ç°CRUD"></a>ä¸‰ã€ä½¿ç”¨PreparedStatementå®ç°CRUD</h2><p><strong>æ“ä½œå’Œè®¿é—®æ•°æ®åº“ï¼š</strong><br>æ•°æ®åº“è¿æ¥è¢«ç”¨äºå‘æ•°æ®åº“å‘é€å‘½ä»¤å’ŒSQLè¯­å¥ï¼Œå¹¶æ¥å—æ•°æ®åº“æœåŠ¡å™¨è¿”å›çš„ç»“æœã€‚å…¶å®ä¸€ä¸ªæ•°æ®åº“è¿æ¥å°±æ˜¯ä¸€ä¸ªSocketè¿æ¥ã€‚<br>åœ¨java.sqlåŒ…ä¸­æœ‰ä¸‰ä¸ªæ¥å£åˆ†åˆ«å®šä¹‰äº†å¯¹æ•°æ®åº“çš„ä¸åŒè°ƒç”¨æ–¹å¼ï¼š<br>1ã€Statementï¼šç”¨äºæ‰§è¡Œé™æ€SQLè¯­å¥å¹¶è¿”å›å®ƒæ‰€ç”Ÿæˆç»“æœçš„å¯¹è±¡ã€‚<br>2ã€PreparedStatementï¼šSQLè¯­å¥è¢«é¢„ç¼–è¯‘å¹¶å­˜å‚¨åœ¨æ­¤å¯¹è±¡ä¸­ï¼Œå¯ä»¥ç”¨æ­¤å¯¹è±¡å¤šæ¬¡é«˜æ•ˆåœ°æ‰§è¡Œè¯¥è¯­å¥ã€‚<br>3ã€CallableStatementï¼šç”¨äºæ‰§è¡ŒSQLå­˜å‚¨è¿‡ç¨‹ã€‚</p><p><strong>Statementçš„å¼Šç«¯ï¼š</strong>å­˜åœ¨æ‹¼ä¸²æ“ä½œï¼Œå¹¶ä¸”å­˜åœ¨SQLæ³¨å…¥é—®é¢˜<br>        <strong>PreparedStatementï¼š</strong>æ˜¯Statementçš„å­æ¥å£ï¼›èƒ½æœ€å¤§å¯èƒ½æé«˜æ€§èƒ½ï¼›æ“ä½œBlobç±»å‹æ•°æ®ï¼›å¯ä»¥é˜²æ­¢sqlæ³¨å…¥</p><h3 id="å¢åˆ æ”¹æ“ä½œ"><a href="#å¢åˆ æ”¹æ“ä½œ" class="headerlink" title="å¢åˆ æ”¹æ“ä½œ"></a>å¢åˆ æ”¹æ“ä½œ</h3><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// å¢åŠ è®°å½•</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testInsert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        Connection conn <span class="token operator">=</span> null<span class="token punctuation">;</span>        PreparedStatement ps <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 1.è¯»å–é…ç½®æ–‡ä»¶ä¿¡æ¯</span>            InputStream inputStream <span class="token operator">=</span> ClassLoader<span class="token punctuation">.</span><span class="token function">getSystemClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"jdbc.properties"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Properties pros <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            pros<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>            String user <span class="token operator">=</span> pros<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            String pwd <span class="token operator">=</span> pros<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            String url <span class="token operator">=</span> pros<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            String driverClass <span class="token operator">=</span> pros<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"driverclass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 2.åŠ è½½é©±åŠ¨</span>            Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>driverClass<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 3.è·å–è¿æ¥</span>            conn <span class="token operator">=</span> DriverManager<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> pwd<span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>conn<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 4.é¢„ç¼–è¯‘sqlè¯­å¥ï¼Œè¿”å›PreparedStatementå®ä¾‹</span>            String sql <span class="token operator">=</span> <span class="token string">"insert into customers(name,email,birth)values(?,?,?)"</span><span class="token punctuation">;</span>            ps <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 5.å¡«å……å ä½ç¬¦</span>            ps<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"Taylor"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç´¢å¼•ä»1å¼€å§‹</span>            ps<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"12324@qq.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            SimpleDateFormat sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Date date <span class="token operator">=</span> sdf<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">"1989-2-22"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            ps<span class="token punctuation">.</span><span class="token function">setDate</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 6.æ‰§è¡Œæ“ä½œ</span>            ps<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// TODO: handle exception</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// 7.å…³é—­èµ„æº</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>ps <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    ps<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e2<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// TODO: handle exception</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>conn <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e2<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// TODO: handle exception</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p>1ã€å¯å°†å¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹ã€æŸ¥è¯¢ä¸­çš„å…±åŒæ“ä½œï¼ˆ1.è·å–è¿æ¥ï¼Œ2.é‡Šæ”¾èµ„æºï¼‰å°è£…æˆä¸€ä¸ªå·¥å…·ç±»ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCUtils</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     *      * @Description è·å–æ•°æ®åº“è¿æ¥     * @author zyz     * @date 2020å¹´3æœˆ25æ—¥ä¸‹åˆ5:38:23     * @return     * @throws Exception     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Connection <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 1.è¯»å–é…ç½®æ–‡ä»¶ä¿¡æ¯</span>        InputStream inputStream <span class="token operator">=</span> ClassLoader<span class="token punctuation">.</span><span class="token function">getSystemClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"jdbc.properties"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Properties pros <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        pros<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>        String user <span class="token operator">=</span> pros<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String pwd <span class="token operator">=</span> pros<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String url <span class="token operator">=</span> pros<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String driverClass <span class="token operator">=</span> pros<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"driverclass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 2.åŠ è½½é©±åŠ¨</span>        Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>driverClass<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 3.è·å–è¿æ¥</span>        Connection conn <span class="token operator">=</span> DriverManager<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> pwd<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> conn<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     *      * @Description // å…³é—­èµ„æº     * @author zyz     * @date 2020å¹´3æœˆ25æ—¥ä¸‹åˆ5:40:43     * @param conn     * @param ps     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">closeResource</span><span class="token punctuation">(</span>Connection conn<span class="token punctuation">,</span> Statement ps<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>ps <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                ps<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e2<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// TODO: handle exception</span>        <span class="token punctuation">}</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>conn <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e2<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// TODO: handle exception</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>2ã€è¿›ä¸€æ­¥å¯å°†å¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹ä¸­çš„å…±åŒæ“ä½œï¼ˆ1.è·å–è¿æ¥ï¼Œ2.é¢„ç¼–è¯‘sqlï¼Œ3.å¡«å……sqlï¼Œ4.æ‰§è¡Œæ“ä½œï¼Œ5.å…³é—­èµ„æºï¼‰å°è£…åˆ°ä¸€ä¸ªæ–¹æ³•ä¸­ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// å°†å¢åˆ æ”¹æ“ä½œå†™æˆä¸€ä¸ªé€šç”¨çš„æ–¹æ³•</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span>String sql<span class="token punctuation">,</span> Object <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 1.å»ºç«‹è¿æ¥</span>        Connection conn <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 2.é¢„ç¼–è¯‘sql</span>        PreparedStatement ps <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            conn <span class="token operator">=</span> JDBCUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            ps <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 3.å¡«å……å ä½ç¬¦</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                ps<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">// 4.æ‰§è¡Œæ“ä½œ</span>            ps<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// TODO: handle exception</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 5.å…³é—­èµ„æº</span>            JDBCUtils<span class="token punctuation">.</span><span class="token function">closeResource</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span> ps<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// æµ‹è¯•é€šç”¨çš„æ–¹æ³•</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        String sql <span class="token operator">=</span> <span class="token string">"delete from customers where id =?"</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// TODO Auto-generated catch block</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h3 id="æŸ¥è¯¢æ“ä½œ"><a href="#æŸ¥è¯¢æ“ä½œ" class="headerlink" title="æŸ¥è¯¢æ“ä½œ"></a>æŸ¥è¯¢æ“ä½œ</h3><p>Javaä¸SQLå¯¹åº”æ•°æ®ç±»å‹è½¬æ¢è¡¨ï¼š<br>       <img src="/2020/03/23/jdbc/4.png" alt></p><pre class=" language-java"><code class="language-java">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQuery1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        Connection conn <span class="token operator">=</span> null<span class="token punctuation">;</span>        PreparedStatement ps <span class="token operator">=</span> null<span class="token punctuation">;</span>        ResultSet resultset <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// è¿æ¥</span>            conn <span class="token operator">=</span> JDBCUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// é¢„ç¼–è¯‘sql</span>            String sql <span class="token operator">=</span> <span class="token string">"select id,name,email,birth from customers where id = ?"</span><span class="token punctuation">;</span>            ps <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// å¡«å……å ä½ç¬¦</span>            ps<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// æ‰§è¡Œæ“ä½œå¹¶è¿”å›ç»“æœé›†</span>            resultset <span class="token operator">=</span> ps<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>resultset<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">// åˆ¤æ–­ç»“æœé›†çš„ä¸‹ä¸€æ¡æ˜¯å¦æœ‰æ•°æ®</span>                <span class="token keyword">int</span> id <span class="token operator">=</span> resultset<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                String name <span class="token operator">=</span> resultset<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                String email <span class="token operator">=</span> resultset<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                Date birth <span class="token operator">=</span> resultset<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// å°†æ•°æ®å°è£…åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­</span>                Customer customer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Customer</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> email<span class="token punctuation">,</span> birth<span class="token punctuation">)</span><span class="token punctuation">;</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>customer<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// TODO: handle exception</span>          e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            JDBCUtils<span class="token punctuation">.</span><span class="token function">closeResource</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span> ps<span class="token punctuation">,</span> resultset<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p><strong>é’ˆå¯¹Customerè¡¨åˆ›å»ºé€šç”¨çš„æŸ¥è¯¢æ–¹æ³•ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> Customer <span class="token function">queryCustomers</span><span class="token punctuation">(</span>String sql<span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>    Connection conn <span class="token operator">=</span> null<span class="token punctuation">;</span>    PreparedStatement ps <span class="token operator">=</span> null<span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        conn <span class="token operator">=</span> JDBCUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ps <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            ps<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        ResultSet resultset <span class="token operator">=</span> ps<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è·å–ç»“æœé›†ä¸­çš„å…ƒæ•°æ®:ResultSetMetaData</span>        ResultSetMetaData rsmd <span class="token operator">=</span> resultset<span class="token punctuation">.</span><span class="token function">getMetaData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// é€šè¿‡ResultSetData è·å–ç»“æœé›†ä¸­çš„åˆ—æ•°</span>        <span class="token keyword">int</span> column <span class="token operator">=</span> rsmd<span class="token punctuation">.</span><span class="token function">getColumnCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è·å–æ•°æ®å¹¶å°è£…åˆ°å¯¹è±¡ä¸­</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>resultset<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            Customer customer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Customer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> column<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// è·å–åˆ—å€¼</span>                Object columnValue <span class="token operator">=</span> resultset<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// è·å–æ¯ä¸ªåˆ—çš„åˆ—å-----å±æ€§</span>                String columnName <span class="token operator">=</span> rsmd<span class="token punctuation">.</span><span class="token function">getColumnName</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// é€šè¿‡åå°„ç»™å±æ€§èµ‹å€¼</span>                <span class="token comment" spellcheck="true">// é€šè¿‡åˆ—åè·å–å±æ€§</span>                Field field <span class="token operator">=</span> Customer<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span>columnName<span class="token punctuation">)</span><span class="token punctuation">;</span>                field<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// ç»™å±æ€§èµ‹å€¼</span>                field<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>customer<span class="token punctuation">,</span> columnValue<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> customer<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// TODO: handle exception</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{</span>        JDBCUtils<span class="token punctuation">.</span><span class="token function">closeResource</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span> ps<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> null<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// æµ‹è¯•é€šç”¨æ–¹æ³•</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQueryCustomers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        String sql <span class="token operator">=</span> <span class="token string">"select id,name,email,birth from Customers where id = ? "</span><span class="token punctuation">;</span>        Customer customer <span class="token operator">=</span> <span class="token function">queryCustomers</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>customer<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// TODO: handle exception</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>é’ˆå¯¹Orderè¡¨åˆ›å»ºé€šç”¨çš„æŸ¥è¯¢æ–¹æ³•ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderQuery</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> Order <span class="token function">orderQuery</span><span class="token punctuation">(</span>String sql<span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Connection conn <span class="token operator">=</span> null<span class="token punctuation">;</span>        PreparedStatement ps <span class="token operator">=</span> null<span class="token punctuation">;</span>        ResultSet rs <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            conn <span class="token operator">=</span> JDBCUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            ps <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// å¡«å……å ä½ç¬¦</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                ps<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">// è¿”å›ç»“æœé›†</span>            rs <span class="token operator">=</span> ps<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// è·å–ç»“æœé›†å…ƒæ•°æ®(ç”¨æ¥ä¿®é¥°ç»“æœé›†çš„ç±»ï¼Œæä¾›äº†ç»“æœé›†çš„å„ç§å±æ€§å€¼)</span>            ResultSetMetaData metaData <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getMetaData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// è·å–åˆ—æ•°</span>            <span class="token keyword">int</span> columnCount <span class="token operator">=</span> metaData<span class="token punctuation">.</span><span class="token function">getColumnCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// å°†è·å–åˆ°çš„ç»“æœå°è£…åˆ°Orderå¯¹è±¡ä¸­</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                Order order <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// è·å–æ¯ä¸€åˆ—çš„åˆ—å€¼ é€šè¿‡ç»“æœé›†</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> columnCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    Object columnValue <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment" spellcheck="true">// è·å–æ¯ä¸€åˆ—çš„åˆ—å   é€šè¿‡å…ƒæ•°æ®</span>                    <span class="token comment" spellcheck="true">//String columnName = metaData.getColumnName(i + 1);</span>                    <span class="token comment" spellcheck="true">// è·å–åˆ«å</span>                    String columnName <span class="token operator">=</span> metaData<span class="token punctuation">.</span><span class="token function">getColumnLabel</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment" spellcheck="true">// é€šè¿‡åå°„ï¼Œå°†å¯¹è±¡æŒ‡å®šåcolumnNameçš„å±æ€§èµ‹å€¼ä¸ºæŒ‡å®šçš„å±æ€§columnValue</span>                    Field field <span class="token operator">=</span> Order<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span>columnName<span class="token punctuation">)</span><span class="token punctuation">;</span>                    field<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    field<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>order<span class="token punctuation">,</span> columnValue<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">return</span> order<span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// TODO: handle exception</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            JDBCUtils<span class="token punctuation">.</span><span class="token function">closeResource</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span> ps<span class="token punctuation">,</span>rs<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> null<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testOrderQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            String sql <span class="token operator">=</span> <span class="token string">"select order_id orderId,order_name orderName,order_date orderDate from `order` where order_id = ?"</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">orderQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// TODO Auto-generated catch block</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><img src="/2020/03/23/jdbc/5.png" alt></p><p><strong>é€šç”¨çš„æŸ¥è¯¢æ–¹æ³•(é’ˆå¯¹æ‰€æœ‰çš„ è¡¨)ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// è¿”å›ä¸€æ¡ç»“æœ</span>    <span class="token keyword">public</span> <span class="token operator">&lt;</span>T<span class="token operator">></span> T <span class="token function">query</span><span class="token punctuation">(</span>Class<span class="token operator">&lt;</span>T<span class="token operator">></span> clazz<span class="token punctuation">,</span> String sql<span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Connection conn <span class="token operator">=</span> null<span class="token punctuation">;</span>        PreparedStatement ps <span class="token operator">=</span> null<span class="token punctuation">;</span>        ResultSet rs <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            conn <span class="token operator">=</span> JDBCUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            ps <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// å¡«å……å ä½ç¬¦</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                ps<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">// è¿”å›ç»“æœé›†</span>            rs <span class="token operator">=</span> ps<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// è·å–ç»“æœé›†å…ƒæ•°æ®(ç”¨æ¥ä¿®é¥°ç»“æœé›†çš„ç±»ï¼Œæä¾›äº†ç»“æœé›†çš„å„ç§å±æ€§å€¼)</span>            ResultSetMetaData metaData <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getMetaData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// è·å–åˆ—æ•°</span>            <span class="token keyword">int</span> columnCount <span class="token operator">=</span> metaData<span class="token punctuation">.</span><span class="token function">getColumnCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// å°†è·å–åˆ°çš„ç»“æœå°è£…åˆ°Orderå¯¹è±¡ä¸­</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                T t <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// è·å–æ¯ä¸€åˆ—çš„åˆ—å€¼ é€šè¿‡ç»“æœé›†</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> columnCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    Object columnValue <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment" spellcheck="true">// è·å–æ¯ä¸€åˆ—çš„åˆ—å é€šè¿‡å…ƒæ•°æ®(è¡¨ä¸­çš„åˆ—åä¸ç±»ä¸­çš„å±æ€§åä¸ä¸€è‡´æ—¶ä¼šæŠ¥é”™)</span>                    <span class="token comment" spellcheck="true">// String columnName = metaData.getColumnName(i + 1);</span>                    <span class="token comment" spellcheck="true">// è§£å†³æ–¹å¼ï¼šè·å–åˆ«å(æ²¡æœ‰åˆ«åæ—¶å³ä¸ºåˆ—å)</span>                    String columnName <span class="token operator">=</span> metaData<span class="token punctuation">.</span><span class="token function">getColumnLabel</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment" spellcheck="true">// é€šè¿‡åå°„ï¼Œå°†å¯¹è±¡æŒ‡å®šåcolumnNameçš„å±æ€§èµ‹å€¼ä¸ºæŒ‡å®šçš„å±æ€§columnValue</span>                    Field field <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span>columnName<span class="token punctuation">)</span><span class="token punctuation">;</span>                    field<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    field<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> columnValue<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">return</span> t<span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span>             e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            JDBCUtils<span class="token punctuation">.</span><span class="token function">closeResource</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span> ps<span class="token punctuation">,</span> rs<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> null<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            String sql <span class="token operator">=</span> <span class="token string">"select id,name,email from customers where id = ?"</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">query</span><span class="token punctuation">(</span>Customer<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> sql<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            String sql1 <span class="token operator">=</span> <span class="token string">"select order_id orderId,order_name orderName,order_date orderDate from `order` where order_id = ?"</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">query</span><span class="token punctuation">(</span>Order<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> sql1<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// è¿”å›å¤šæ¡ç»“æœ</span>    <span class="token keyword">public</span> <span class="token operator">&lt;</span>T<span class="token operator">></span> List<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">queries</span><span class="token punctuation">(</span>Class<span class="token operator">&lt;</span>T<span class="token operator">></span> clazz<span class="token punctuation">,</span> String sql<span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Connection conn <span class="token operator">=</span> null<span class="token punctuation">;</span>        PreparedStatement ps <span class="token operator">=</span> null<span class="token punctuation">;</span>        ResultSet rs <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            conn <span class="token operator">=</span> JDBCUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            ps <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                ps<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">int</span> columnCount <span class="token operator">=</span> metaData<span class="token punctuation">.</span><span class="token function">getColumnCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// å°†è·å–åˆ°çš„ç»“æœå°è£…åˆ°åˆ—è¡¨ä¸­</span>            List<span class="token operator">&lt;</span>T<span class="token operator">></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                T t <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// è·å–æ¯ä¸€åˆ—çš„åˆ—å€¼ é€šè¿‡ç»“æœé›†</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> columnCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    Object columnValue <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment" spellcheck="true">// è·å–æ¯ä¸€åˆ—çš„åˆ«å  é€šè¿‡å…ƒæ•°æ®</span>                    String columnName <span class="token operator">=</span> metaData<span class="token punctuation">.</span><span class="token function">getColumnLabel</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment" spellcheck="true">// é€šè¿‡åå°„ï¼Œå°†å¯¹è±¡æŒ‡å®šåcolumnNameçš„å±æ€§èµ‹å€¼ä¸ºæŒ‡å®šçš„å±æ€§columnValue</span>                    Field field <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span>columnName<span class="token punctuation">)</span><span class="token punctuation">;</span>                    field<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    field<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> columnValue<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>             <span class="token keyword">return</span> list<span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            JDBCUtils<span class="token punctuation">.</span><span class="token function">closeResource</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span> ps<span class="token punctuation">,</span> rs<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> null<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testOrderQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            String sql <span class="token operator">=</span> <span class="token string">"select order_id orderId,order_name orderName,order_date orderDate from `order` where order_id &lt; ?"</span><span class="token punctuation">;</span>            List<span class="token operator">&lt;</span>Order<span class="token operator">></span> orders <span class="token operator">=</span> <span class="token function">queries</span><span class="token punctuation">(</span>Order<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>sql<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            orders<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span>println<span class="token punctuation">)</span><span class="token punctuation">;</span>            String sql1 <span class="token operator">=</span> <span class="token string">"select id,name,email from customers where id &lt; ?"</span><span class="token punctuation">;</span>            List<span class="token operator">&lt;</span>Customer<span class="token operator">></span> customers <span class="token operator">=</span> <span class="token function">queries</span><span class="token punctuation">(</span>Customer<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> sql1<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            customers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span>println<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="å››ã€æ“ä½œBLOBç±»å‹å­—æ®µ"><a href="#å››ã€æ“ä½œBLOBç±»å‹å­—æ®µ" class="headerlink" title="å››ã€æ“ä½œBLOBç±»å‹å­—æ®µ"></a>å››ã€æ“ä½œBLOBç±»å‹å­—æ®µ</h2><p>TinyBlobï¼š255å­—èŠ‚<br>        Blobï¼š65K<br>        MediumBlobï¼š16M<br>        LongBlobï¼š4G</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// å‘Customersè¡¨ä¸­æ·»åŠ ä¸€æ¡Blobç±»å‹æ•°æ®</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testInsert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        Connection conn <span class="token operator">=</span> JDBCUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String sql <span class="token operator">=</span> <span class="token string">"insert into customers(name,email,birth,photo) value(?,?,?,?)"</span><span class="token punctuation">;</span>        PreparedStatement ps <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>        ps<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"wd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ps<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"wd@qq.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ps<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"1999-7-20"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        FileInputStream in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"./src/wd1.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ps<span class="token punctuation">.</span><span class="token function">setBlob</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> in<span class="token punctuation">)</span><span class="token punctuation">;</span>        ps<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        JDBCUtils<span class="token punctuation">.</span><span class="token function">closeResource</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span> ps<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// æŸ¥è¯¢customersè¡¨ä¸­çš„Blobç±»å‹çš„æ•°æ®</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        Connection conn <span class="token operator">=</span> null<span class="token punctuation">;</span>        PreparedStatement ps <span class="token operator">=</span> null<span class="token punctuation">;</span>        ResultSet rs <span class="token operator">=</span> null<span class="token punctuation">;</span>        InputStream in <span class="token operator">=</span> null<span class="token punctuation">;</span>        FileOutputStream out <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            conn <span class="token operator">=</span> JDBCUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            String sql <span class="token operator">=</span> <span class="token string">"select id,name,email,birth,photo from Customers where id=? "</span><span class="token punctuation">;</span>            ps <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>            ps<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            rs <span class="token operator">=</span> ps<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">int</span> id <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æ—¢å¯ä»¥å†™ç´¢å¼•ï¼Œåˆå¯ä»¥å†™åˆ«åæˆ–å­—æ®µå</span>                String name <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                String email <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                Date birth <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token string">"birth"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                Customer customer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Customer</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> email<span class="token punctuation">,</span> birth<span class="token punctuation">)</span><span class="token punctuation">;</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>customer<span class="token punctuation">)</span><span class="token punctuation">;</span>                Blob photo <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getBlob</span><span class="token punctuation">(</span><span class="token string">"photo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                in <span class="token operator">=</span> photo<span class="token punctuation">.</span><span class="token function">getBinaryStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"./src/wd.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> len<span class="token punctuation">;</span>                <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// TODO: handle exception</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>in <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    in<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token comment" spellcheck="true">// TODO Auto-generated catch block</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>out <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token comment" spellcheck="true">// TODO Auto-generated catch block</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            JDBCUtils<span class="token punctuation">.</span><span class="token function">closeResource</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span> ps<span class="token punctuation">,</span> rs<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h2 id="äº”ã€æ•°æ®åº“äº‹åŠ¡"><a href="#äº”ã€æ•°æ®åº“äº‹åŠ¡" class="headerlink" title="äº”ã€æ•°æ®åº“äº‹åŠ¡"></a>äº”ã€æ•°æ®åº“äº‹åŠ¡</h2><p><strong>äº‹åŠ¡ï¼š</strong>ä¸€ç»„é€»è¾‘æ“ä½œå•å…ƒï¼Œä½¿æ•°æ®ç”±ä¸€ç§çŠ¶æ€å˜æ¢åˆ°å¦ä¸€ç§çŠ¶æ€ã€‚</p><p><strong>äº‹åŠ¡å¤„ç†ï¼š</strong>è¦ä¹ˆæ‰€æœ‰çš„äº‹åŠ¡éƒ½è¢«æäº¤(commit)ï¼Œé‚£ä¹ˆè¿™äº›ä¿®æ”¹å°±è¢«æ°¸ä¹…çš„ä¿å­˜ä¸‹æ¥ï¼›è¦ä¹ˆæ”¾å¼ƒæ‰€ä½œçš„å…¨éƒ¨ä¿®æ”¹ï¼Œæ•´ä¸ªäº‹åŠ¡å›æ»š(rollback)åˆ°æœ€åˆçš„çŠ¶æ€ã€‚</p><p><strong>JDBCäº‹åŠ¡å¤„ç†ï¼š</strong><br>1.æ•°æ®ä¸€æ—¦æäº¤ï¼Œå°±ä¸å¯å›æ»šã€‚<br>2.DDLæ“ä½œä¸€æ—¦æ‰§è¡Œï¼Œéƒ½ä¼šè‡ªåŠ¨æäº¤ã€‚<br>    DMLé»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€æ—¦æ‰§è¡Œï¼Œå°±ä¼šæäº¤ã€‚å¯é€šè¿‡set autocommit=false å–æ¶ˆDMLæ“ä½œçš„è‡ªåŠ¨æäº¤ã€‚<br>3.é»˜è®¤å…³é—­è¿æ¥çš„æ—¶å€™ï¼Œè‡ªåŠ¨æäº¤ã€‚</p><p><strong>JDBCç¨‹åºä¸­ä¸ºäº†è®©å¤šä¸ªSQL è¯­å¥ä½œä¸ºä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œï¼š</strong><br>è°ƒç”¨Connection å¯¹è±¡çš„setAutoCommit(false); ä»¥å–æ¶ˆè‡ªåŠ¨æäº¤äº‹åŠ¡<br>åœ¨æ‰€æœ‰çš„SQL è¯­å¥éƒ½æˆåŠŸæ‰§è¡Œåï¼Œè°ƒç”¨commit(); æ–¹æ³•æäº¤äº‹åŠ¡<br>åœ¨å‡ºç°å¼‚å¸¸æ—¶ï¼Œè°ƒç”¨rollback(); æ–¹æ³•å›æ»šäº‹åŠ¡</p><blockquote><p>è‹¥æ­¤æ—¶Connection æ²¡æœ‰è¢«å…³é—­ï¼Œè¿˜å¯èƒ½è¢«é‡å¤ä½¿ç”¨ï¼Œåˆ™éœ€è¦æ¢å¤å…¶è‡ªåŠ¨æäº¤çŠ¶setAutoCommit(true)ã€‚å°¤å…¶æ˜¯åœ¨ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± æŠ€æœ¯æ—¶ï¼Œæ‰§è¡Œclose()æ–¹æ³•å‰ï¼Œå»ºè®®æ¢å¤è‡ªåŠ¨æäº¤çŠ¶æ€ã€‚</p></blockquote><p><strong>äº‹åŠ¡çš„ACIDå±æ€§ï¼š</strong><br>1.<strong>åŸå­æ€§(Atomicity)ï¼š</strong>äº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œäº‹åŠ¡çš„æ“ä½œè¦ä¹ˆéƒ½å‘ç”Ÿï¼Œè¦ä¹ˆéƒ½ä¸å‘ç”Ÿã€‚<br>2.<strong>ä¸€è‡´æ€§(Consistency)ï¼š</strong>äº‹åŠ¡å¿…é¡»ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´çŠ¶æ€å˜æ¢åˆ°å¦å¤–ä¸€è‡´çŠ¶æ€ã€‚<br>3.<strong>éš”ç¦»æ€§(Isolation)ï¼š</strong>ä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡å¹²æ‰°ã€‚<br>4.<strong>æŒä¹…æ€§(Durability)ï¼š</strong>ä¸€ä¸ªæ•°æ®ä¸€æ—¦è¢«æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…æ€§çš„ã€‚</p><p><strong>æ•°æ®åº“å¹¶å‘é—®é¢˜ï¼š</strong><br><strong>è„è¯»ï¼š</strong>å¯¹äºä¸¤ä¸ªäº‹åŠ¡T1ã€T2ï¼ŒT1è¯»å–äº†å·²ç»è¢«T2æ›´æ–°ä½†è¿˜æ²¡è¢«æäº¤çš„æ•°æ®ã€‚ä¹‹åï¼Œè‹¥T2å›æ»šï¼ŒT1è¯»å–çš„æ•°æ®å°±æ˜¯æ— æ•ˆçš„ã€‚<br><strong>ä¸å¯é‡å¤è¯»ï¼š</strong>å¯¹äºä¸¤ä¸ªäº‹åŠ¡T1ã€T2ï¼ŒT1è¯»å–äº†ä¸€ä¸ªå­—æ®µï¼Œç„¶åT2æ›´æ–°äº†è¯¥å­—æ®µã€‚ä¹‹åï¼ŒT1å†æ¬¡è¯»å–åŒä¸€ä¸ªå­—æ®µï¼Œå€¼å°±ä¸åŒäº†ã€‚<br><strong>å¹»è¯»ï¼š</strong>å¯¹äºä¸¤ä¸ªäº‹åŠ¡T1ã€T2ï¼ŒT1ä»ä¸€ä¸ªè¡¨ä¸­è¯»äº†ä¸€ä¸ªå­—æ®µï¼Œç„¶åT2å†è¯¥è¡¨ä¸­æ’å…¥äº†ä¸€äº›æ–°çš„è¡Œã€‚ä¹‹åï¼Œå¦‚æœå¦‚æœT1å†æ¬¡è¯»å–åŒä¸€ä¸ªè¡¨ï¼Œå°±ä¼šå¤šå‡ºå‡ è¡Œã€‚</p><p><strong>å››ç§éš”ç¦»çº§åˆ«ï¼š</strong>éš”ç¦»çº§åˆ«è¶Šé«˜ï¼Œä¸€è‡´æ€§è¶Šå¥½ï¼Œå¹¶å‘æ€§è¶Šå¼±ã€‚<br><img src="/2020/03/23/jdbc/6.png" alt></p><h2 id="å…­ã€DAOåŠç›¸å…³å®ç°ç±»"><a href="#å…­ã€DAOåŠç›¸å…³å®ç°ç±»" class="headerlink" title="å…­ã€DAOåŠç›¸å…³å®ç°ç±»"></a>å…­ã€DAOåŠç›¸å…³å®ç°ç±»</h2><p>DAOï¼šData Access Objectè®¿é—®æ•°æ®ä¿¡æ¯çš„ç±»å’Œæ¥å£ï¼ŒåŒ…æ‹¬äº†å¯¹æ•°æ®CRUDï¼ˆCreateã€Retrivalã€Updateã€Deleteï¼‰ï¼Œè€Œä¸åŒ…å«ä»»ä½•ä¸šåŠ¡ç›¸å…³çš„ä¿¡æ¯ã€‚<br>æœ‰æ—¶ä¹Ÿç§°ä½œï¼šBaseDAO(å°è£…é€šç”¨æ–¹æ³•)<br>ä½œç”¨ï¼šä¸ºäº†å®ç°åŠŸèƒ½çš„æ¨¡å—åŒ–ï¼Œæ›´æœ‰åˆ©äºä»£ç çš„ç»´æŠ¤å’Œå‡çº§ã€‚</p><h2 id="ä¸ƒã€æ•°æ®åº“è¿æ¥æ± "><a href="#ä¸ƒã€æ•°æ®åº“è¿æ¥æ± " class="headerlink" title="ä¸ƒã€æ•°æ®åº“è¿æ¥æ± "></a>ä¸ƒã€æ•°æ®åº“è¿æ¥æ± </h2><p><strong>æ•°æ®åº“è¿æ¥æ± åŸºæœ¬æ€æƒ³ï¼š</strong>ä¸ºæ•°æ®åº“è¿æ¥å»ºç«‹ä¸€ä¸ªâ€œç¼“å†²æ± â€ï¼Œé¢„å…ˆåœ¨ç¼“å†²æ± ä¸­æ”¾å…¥ä¸€å®šæ•°é‡çš„è¿æ¥ï¼Œå½“éœ€è¦å»ºç«‹æ•°æ®åº“è¿æ¥æ—¶ï¼Œåªéœ€ä»â€œç¼“å†²æ± â€ä¸­å–å‡ºä¸€ä¸ªï¼Œä½¿ç”¨å®Œæ¯•åå†æ”¾å›å»ã€‚</p><p>JDBCçš„æ•°æ®åº“è¿æ¥æ± ä½¿ç”¨javax.sql.DataSource æ¥è¡¨ç¤ºï¼ŒDataSourceåªæ˜¯ä¸€ä¸ªæ¥å£ï¼Œè¯¥æ¥å£é€šå¸¸ç”±æœåŠ¡å™¨(Weblogic,WebSphere,Tomcat)æä¾›å®ç°ï¼Œä¹Ÿæœ‰ä¸€äº›å¼€æºç»„ç»‡æä¾›å®ç°ã€‚<br><img src="/2020/03/23/jdbc/9.png" alt></p><p>Druidæ•°æ®åº“è¿æ¥æ± </p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        Properties pros <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        InputStream is <span class="token operator">=</span> ClassLoader<span class="token punctuation">.</span><span class="token function">getSystemClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"druid.properties"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        pros<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>        DataSource dataSource <span class="token operator">=</span> DruidDataSourceFactory<span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>pros<span class="token punctuation">)</span><span class="token punctuation">;</span>        Connection conn <span class="token operator">=</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>conn<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><p><img src="/2020/03/23/jdbc/8.png" alt></p><p>é…ç½®å±æ€§ï¼š<br><img src="/2020/03/23/jdbc/10.png" alt></p><h2 id="å…«ã€Apache-DBUtilså®ç°CRUDæ“ä½œ"><a href="#å…«ã€Apache-DBUtilså®ç°CRUDæ“ä½œ" class="headerlink" title="å…«ã€Apache-DBUtilså®ç°CRUDæ“ä½œ"></a>å…«ã€Apache-DBUtilså®ç°CRUDæ“ä½œ</h2><p>commons-dbutils æ˜¯Apache ç»„ç»‡æä¾›çš„ä¸€ä¸ªå¼€æºJDBCå·¥å…·ç±»åº“ï¼Œå°è£…äº†å¢åˆ æ”¹æŸ¥æ“ä½œã€‚</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QueryRunnerTest</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testInsert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        Connection conn <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            QueryRunner runner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryRunner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            conn <span class="token operator">=</span> JDBCUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            String sql <span class="token operator">=</span> <span class="token string">"insert into customers(name,email,birth) value(?,?,?)"</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> insertCount <span class="token operator">=</span> runner<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span> sql<span class="token punctuation">,</span> <span class="token string">"zyz"</span><span class="token punctuation">,</span> <span class="token string">"zyz@qq.com"</span><span class="token punctuation">,</span> <span class="token string">"1999-1-1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>insertCount<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// TODO Auto-generated catch block</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// TODO Auto-generated catch block</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            JDBCUtils<span class="token punctuation">.</span><span class="token function">closeResource</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span> null<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// BeanHandleræ˜¯ResultSetHandleræ¥å£çš„ä¸€ä¸ªå®ç°ç±»ï¼Œç”¨äºå°è£…è¡¨ä¸­çš„ä¸€æ¡è®°å½•</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQuery1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        Connection conn <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            QueryRunner runner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryRunner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            conn <span class="token operator">=</span> JDBCUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            String sql <span class="token operator">=</span> <span class="token string">"select id,name,email,birth from customers where id = ?"</span><span class="token punctuation">;</span>            BeanHandler<span class="token operator">&lt;</span>Customer<span class="token operator">></span> handler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BeanHandler</span><span class="token operator">&lt;</span>Customer<span class="token operator">></span><span class="token punctuation">(</span>Customer<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Customer customer <span class="token operator">=</span> runner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span> sql<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>customer<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// TODO Auto-generated catch block</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            JDBCUtils<span class="token punctuation">.</span><span class="token function">closeResource</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span> null<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// BeanListhandleræ˜¯ResultSetHandleræ¥å£çš„ä¸€ä¸ªå®ç°ç±»ï¼Œç”¨äºå°è£…è¡¨ä¸­çš„å¤šæ¡è®°å½•æ„æˆçš„é›†åˆ</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQuery2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        Connection conn <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            QueryRunner runner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryRunner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            conn <span class="token operator">=</span> JDBCUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            String sql <span class="token operator">=</span> <span class="token string">"select id,name,email,birth from customers where id > ?"</span><span class="token punctuation">;</span>            BeanListHandler<span class="token operator">&lt;</span>Customer<span class="token operator">></span> handler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BeanListHandler</span><span class="token operator">&lt;</span>Customer<span class="token operator">></span><span class="token punctuation">(</span>Customer<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            List<span class="token operator">&lt;</span>Customer<span class="token operator">></span> customers <span class="token operator">=</span> runner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span> sql<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            customers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span>println<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// TODO Auto-generated catch block</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            JDBCUtils<span class="token punctuation">.</span><span class="token function">closeResource</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span> null<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// æŸ¥è¯¢ç‰¹æ®Šå€¼</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQuery3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        Connection conn <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            QueryRunner runner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryRunner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            conn <span class="token operator">=</span> JDBCUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            String sql <span class="token operator">=</span> <span class="token string">"select count(*) from customers"</span><span class="token punctuation">;</span>            ScalarHandler handler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ScalarHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Long count <span class="token operator">=</span> <span class="token punctuation">(</span>Long<span class="token punctuation">)</span> runner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span> sql<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// TODO Auto-generated catch block</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            JDBCUtils<span class="token punctuation">.</span><span class="token function">closeResource</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span> null<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLå˜é‡,å­˜å‚¨è¿‡ç¨‹,æµç¨‹ç»“æ„</title>
      <link href="2020/03/22/mysql-06/"/>
      <url>2020/03/22/mysql-06/</url>
      
        <content type="html"><![CDATA[<h2 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h2><p><strong>ç³»ç»Ÿå˜é‡ï¼š</strong>ç”±ç³»ç»Ÿæä¾›ï¼Œå±äºæœåŠ¡å±‚é¢<br>_å…¨å±€å˜é‡ï¼š_æœåŠ¡å™¨æ¯æ¬¡å¯åŠ¨å°†ä¸ºæ‰€æœ‰å…¨å±€å˜é‡èµ‹åˆå€¼ã€‚é’ˆå¯¹æ‰€æœ‰ä¼šè¯(è¿æ¥)æœ‰æ•ˆï¼Œä½†ä¸èƒ½è·¨é‡å¯ã€‚<br>_ä¼šè¯å˜é‡ï¼š_ä»…ä»…é’ˆå¯¹äºå½“å‰çš„ä¼šè¯(è¿æ¥)æœ‰æ•ˆã€‚<a id="more"></a><br>æŸ¥çœ‹æ‰€æœ‰çš„ç³»ç»Ÿå˜é‡ï¼šshow global | [ session] variable;<br>æŸ¥çœ‹æ»¡è¶³æ¡ä»¶çš„ç³»ç»Ÿå˜é‡ï¼šshow global | [session] variable  like â€˜%char%â€™;<br>æŸ¥çœ‹æŒ‡å®šç³»ç»Ÿå˜é‡ï¼šselect @@global | [session].ç³»ç»Ÿå˜é‡å;<br>ä¸ºæŸä¸ªç³»ç»Ÿå˜é‡èµ‹å€¼ï¼š<br>set global | [session] ç³»ç»Ÿå˜é‡å=å€¼;<br>set @@global \ [session].ç³»ç»Ÿå˜é‡å=å€¼;</p><p><strong>è‡ªå®šä¹‰å˜é‡ï¼š</strong>ç”¨æˆ·è‡ªå®šä¹‰<br>_ç”¨æˆ·å˜é‡ï¼š_é’ˆå¯¹äºå½“å‰ä¼šè¯(è¿æ¥)æœ‰æ•ˆ<br>1.å£°æ˜å¹¶åˆå§‹åŒ–<br>set @ç”¨æˆ·å˜é‡å=å€¼;<br>set @ç”¨æˆ·å˜é‡å:=å€¼;<br>select @ç”¨æˆ·å˜é‡å:=å€¼;<br>2.èµ‹å€¼<br>set @ç”¨æˆ·å˜é‡å=å€¼;<br>set @ç”¨æˆ·å˜é‡å:=å€¼;<br>select @ç”¨æˆ·å˜é‡å:=å€¼;<br>select into select å­—æ®µ  into å˜é‡å from è¡¨;<br>_å±€éƒ¨å˜é‡ï¼š_ä»…ä»…åœ¨å®šä¹‰å®ƒçš„begin endä¸­æœ‰æ•ˆ<br>1.å£°æ˜<br>declare å˜é‡ ç±»å‹ [default å€¼];<br>2.èµ‹å€¼<br>ä¸ç”¨æˆ·å˜é‡ç›¸åŒ</p><h2 id="å­˜å‚¨è¿‡ç¨‹"><a href="#å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹"></a>å­˜å‚¨è¿‡ç¨‹</h2><p>äº‹å…ˆç»è¿‡ç¼–è¯‘å¹¶å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ä¸€ç»„å®Œæˆç‰¹å®šåŠŸèƒ½çš„sqlè¯­å¥çš„é›†åˆã€‚å°±æ˜¯æ•°æ®åº“ SQL è¯­è¨€å±‚é¢çš„ä»£ç å°è£…ä¸é‡ç”¨ã€‚<br>å¥½å¤„ï¼š<br>1.æé«˜äº†ä»£ç çš„é‡ç”¨æ€§ï¼›<br>2.ç®€åŒ–æ“ä½œï¼›<br>3.å‡å°‘äº†ç¼–è¯‘æ¬¡æ•°å¹¶ä¸”å‡å°‘äº†å’Œæ•°æ®åº“æœåŠ¡å™¨çš„è¿æ¥æ¬¡æ•°ï¼Œæé«˜äº†æ•ˆç‡ã€‚</p><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">/*ä¸€ã€åˆ›å»ºå­˜å‚¨è¿‡ç¨‹è¯­æ³•ï¼šcreate procedure å­˜å‚¨è¿‡ç¨‹å(å‚æ•°åˆ—è¡¨)begin    å­˜å‚¨è¿‡ç¨‹ä½“end1ã€å‚æ•°åˆ—è¡¨åˆ†ä¸ºï¼šå‚æ•°æ¨¡å¼  å‚æ•°å å‚æ•°ç±»å‹å‚æ•°æ¨¡å¼ï¼šinï¼šè¯¥å‚æ•°å¯ä»¥ä½œä¸ºè¾“å…¥ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥å‚æ•°éœ€è¦è°ƒç”¨æ–¹ä¼ å…¥å€¼outï¼šè¯¥å‚æ•°å¯ä»¥ä½œä¸ºè¾“å‡ºï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥å‚æ•°å¯ä»¥ä½œä¸ºè¿”å›å€¼inoutï¼šè¯¥å‚æ•°æ—¢å¯ä»¥ä½œä¸ºè¾“å…¥ä¹Ÿå¯ä»¥ä½œä¸ºè¾“å…¥äºŒã€è°ƒç”¨å­˜å‚¨è¿‡ç¨‹è¯­æ³•ï¼šcall  å‚¨å­˜è¿‡ç¨‹å(å®å‚åˆ—è¡¨);*/</span><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> myp1<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">BEGIN</span><span class="token keyword">INSERT</span>  <span class="token keyword">INTO</span> admin<span class="token punctuation">(</span>username<span class="token punctuation">,</span><span class="token punctuation">`</span>password<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">"Taylor"</span><span class="token punctuation">,</span><span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">"Tom"</span><span class="token punctuation">,</span><span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">"Jerry"</span><span class="token punctuation">,</span><span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">END</span> <span class="token keyword">CALL</span> myp1<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># åˆ›å»ºå¸¦inæ¨¡å¼å‚æ•°çš„å‚¨å­˜è¿‡ç¨‹</span><span class="token comment" spellcheck="true"># åˆ›å»ºå­˜å‚¨è¿‡ç¨‹åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•æˆåŠŸ</span><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> myp2<span class="token punctuation">(</span><span class="token operator">IN</span> username <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">IN</span> <span class="token punctuation">`</span>password<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">BEGIN</span>        <span class="token keyword">DECLARE</span> result <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">INTO</span> result        <span class="token keyword">FROM</span> admin <span class="token keyword">WHERE</span> admin<span class="token punctuation">.</span>username<span class="token operator">=</span>username <span class="token operator">AND</span> admin<span class="token punctuation">.</span><span class="token punctuation">`</span>password<span class="token punctuation">`</span><span class="token operator">=</span><span class="token punctuation">`</span>password<span class="token punctuation">`</span><span class="token punctuation">;</span>        <span class="token keyword">SELECT</span> <span class="token keyword">IF</span><span class="token punctuation">(</span>result<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"æˆåŠŸ"</span><span class="token punctuation">,</span><span class="token string">"å¤±è´¥"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">END</span><span class="token keyword">CALL</span> myp2<span class="token punctuation">(</span><span class="token string">"Taylor"</span><span class="token punctuation">,</span><span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># åˆ›å»ºå¸¦outæ¨¡å¼å‚æ•°çš„å‚¨å­˜è¿‡ç¨‹</span><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> myp3<span class="token punctuation">(</span><span class="token operator">IN</span> username <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">IN</span> <span class="token punctuation">`</span>password<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">OUT</span> result char<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">BEGIN</span>        <span class="token keyword">DECLARE</span> result1 <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">INTO</span> result1        <span class="token keyword">FROM</span> admin <span class="token keyword">WHERE</span> admin<span class="token punctuation">.</span>username<span class="token operator">=</span>username <span class="token operator">AND</span> admin<span class="token punctuation">.</span><span class="token punctuation">`</span>password<span class="token punctuation">`</span><span class="token operator">=</span><span class="token punctuation">`</span>password<span class="token punctuation">`</span><span class="token punctuation">;</span>        <span class="token keyword">SET</span> result <span class="token operator">=</span> <span class="token keyword">IF</span><span class="token punctuation">(</span>result1<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"true"</span><span class="token punctuation">,</span><span class="token string">"false"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">END</span><span class="token keyword">CALL</span> myp3<span class="token punctuation">(</span><span class="token string">"Taylor"</span><span class="token punctuation">,</span><span class="token string">"123456"</span><span class="token punctuation">,</span><span class="token variable">@result</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">SELECT</span> <span class="token variable">@result</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># ä¸‰ã€åˆ é™¤å‚¨å­˜è¿‡ç¨‹</span><span class="token keyword">DROP</span> <span class="token keyword">PROCEDURE</span> myp3<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># å››ã€æŸ¥çœ‹å‚¨å­˜è¿‡ç¨‹</span><span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> myp2<span class="token punctuation">;</span></code></pre><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><p>ä¸å‚¨å­˜è¿‡ç¨‹çš„åŒºåˆ«ï¼š<br>å‚¨å­˜è¿‡ç¨‹ï¼šå¯ä»¥æœ‰0ä¸ªæˆ–å¤šä¸ªè¿”å›å€¼ï¼Œé€‚åˆæ‰¹é‡æ’å…¥ã€æ‰¹é‡æ›´æ–°<br>å‡½æ•°ï¼šæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªè¿”å›å€¼ï¼Œé€‚åˆå¤„ç†æ•°æ®åè¿”å›ä¸€ä¸ªç»“æœã€‚</p><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true"># åˆ›å»ºå‡½æ•°</span><span class="token comment" spellcheck="true">/*è¯­æ³•ï¼šcreate function å‡½æ•°å(å‚æ•°åˆ—è¡¨) returns  è¿”å›ç±»å‹begin    å‡½æ•°ä½“  end*/</span></code></pre><h2 id="æµç¨‹æ§åˆ¶ç»“æ„"><a href="#æµç¨‹æ§åˆ¶ç»“æ„" class="headerlink" title="æµç¨‹æ§åˆ¶ç»“æ„"></a>æµç¨‹æ§åˆ¶ç»“æ„</h2><p><strong>ifå‡½æ•°ï¼š</strong><br>if(è¡¨è¾¾å¼1ï¼Œè¡¨è¾¾å¼2ï¼Œè¡¨è¾¾å¼3)ï¼šå¦‚æœè¡¨è¾¾å¼1æˆç«‹ï¼Œè¿”å›è¡¨è¾¾å¼2çš„å€¼ï¼Œå¦åˆ™è¿”å›è¡¨è¾¾å¼3çš„å€¼ã€‚</p><p><strong>caseç»“æ„ï¼š</strong><br>case å˜é‡|è¡¨è¾¾å¼|å­—æ®µ<br>whenæ¡ä»¶1æˆ–å€¼ then è¦è¿”å›çš„å€¼æˆ–è¦æ‰§è¡Œçš„è¯­å¥;<br>whenæ¡ä»¶2æˆ–å€¼ then è¦è¿”å›çš„å€¼æˆ–è¦æ‰§è¡Œçš„è¯­å¥;<br>whenæ¡ä»¶3æˆ–å€¼ then è¦è¿”å›çš„å€¼æˆ–è¦æ‰§è¡Œçš„è¯­å¥;<br>â€¦â€¦<br>else  è¦è¿”å›çš„å€¼æˆ–è¦æ‰§è¡Œçš„è¯­å¥;<br> end case;</p><p><strong>ifç»“æ„ï¼š</strong><br>if æ¡ä»¶1 then è¯­å¥1ï¼›<br>elif æ¡ä»¶2 then è¯­å¥2ï¼›<br>â€¦â€¦<br>else then è¯­å¥nï¼›<br>end if;</p><p><strong>å¾ªç¯ç»“æ„ï¼š</strong><br>åˆ†ç±»ï¼šwhile , loop  , repeat<br>å¾ªç¯æ§åˆ¶ï¼š<br>iterate  ç±»ä¼¼äº  continue  ,ç»§ç»­ï¼Œç»“æŸæœ¬æ¬¡å¾ªç¯ç»§ç»­ä¸‹ä¸€æ¬¡<br>leavele  ç±»ä¼¼äº break   ,è·³å‡º  ï¼Œç»“æŸå½“å‰æ‰€åœ¨å¾ªç¯<br>1.while</p><pre class=" language-sql"><code class="language-sql"><span class="token punctuation">[</span>æ ‡ç­¾:<span class="token punctuation">]</span><span class="token keyword">while</span> å¾ªç¯æ¡ä»¶ <span class="token keyword">do</span>    å¾ªç¯ä½“<span class="token punctuation">;</span><span class="token keyword">end</span> <span class="token keyword">while</span> <span class="token punctuation">[</span>æ ‡ç­¾<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><p>2.loop</p><pre class=" language-sql"><code class="language-sql"><span class="token punctuation">[</span>æ ‡ç­¾:<span class="token punctuation">]</span>loop     å¾ªç¯ä½“<span class="token punctuation">;</span><span class="token keyword">end</span> loop <span class="token punctuation">[</span>æ ‡ç­¾<span class="token punctuation">]</span></code></pre><p>3.repeat</p><pre class=" language-sql"><code class="language-sql"><span class="token punctuation">[</span>æ ‡ç­¾:<span class="token punctuation">]</span>repeat    å¾ªç¯ä½“<span class="token punctuation">;</span>until ç»“æŸå¾ªç¯çš„æ¡ä»¶ <span class="token keyword">end</span> repeat <span class="token punctuation">[</span>æ ‡ç­¾<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äº‹åŠ¡,è§†å›¾ï¼Œç´¢å¼•</title>
      <link href="2020/03/21/mysql-05/"/>
      <url>2020/03/21/mysql-05/</url>
      
        <content type="html"><![CDATA[<p><strong>äº‹åŠ¡ï¼š</strong>ä¸€ä¸ªæˆ–ä¸€ç»„sqlè¯­å¥ç»„æˆä¸€ä¸ªæ‰§è¡Œå•å…ƒï¼Œè¿™ä¸ªæ‰§è¡Œå•å…ƒè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œã€‚<br><strong>äº‹åŠ¡çš„å±æ€§ï¼š</strong><br>åŸå­æ€§ï¼šäº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œäº‹åŠ¡ä¸­çš„æ“ä½œè¦ä¹ˆéƒ½å‘ç”Ÿï¼Œè¦ä¹ˆéƒ½ä¸å‘ç”Ÿï¼›<br>ä¸€è‡´æ€§ï¼šäº‹åŠ¡å¿…é¡»ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´çŠ¶æ€å˜æ¢åˆ°å¦å¤–ä¸€ä¸ªä¸€è‡´çŠ¶æ€ï¼›<br>éš”ç¦»æ€§ï¼šä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸å—å…¶ä»–äº‹åŠ¡çš„å¹²æ‰°ï¼›<br>æŒä¹…æ€§ï¼šä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦è¢«æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…çš„ã€‚</p><h2 id="äº‹åŠ¡çš„åˆ›å»º"><a href="#äº‹åŠ¡çš„åˆ›å»º" class="headerlink" title="äº‹åŠ¡çš„åˆ›å»º"></a>äº‹åŠ¡çš„åˆ›å»º</h2><p>éšå¼äº‹åŠ¡ï¼šäº‹åŠ¡æ²¡æœ‰æ˜æ˜¾çš„å¼€å¯å’Œç»“æŸã€‚<br>æ˜¾å¼äº‹åŠ¡ï¼šè®¾ç½®æäº¤åŠŸèƒ½ä¸ºç¦ç”¨ï¼Œäº‹åŠ¡å…·æœ‰æ˜æ˜¾çš„å¼€å¯å’Œç»“æŸçš„æ ‡è®°<br>æ­¥éª¤1ï¼šå¼€å¯äº‹åŠ¡<br>set autocommit=0;<br>start transaction;# å¯ä»¥çœç•¥<br>æ­¥éª¤2ï¼šç¼–å†™äº‹åŠ¡ä¸­çš„sqlè¯­å¥<br>è¯­å¥1;<br>è¯­å¥2;<br>æ­¥éª¤3ï¼šç»“æŸäº‹åŠ¡<br>commit;æˆ–è€…rollback;</p><h2 id="æ•°æ®åº“çš„éš”ç¦»çº§åˆ«"><a href="#æ•°æ®åº“çš„éš”ç¦»çº§åˆ«" class="headerlink" title="æ•°æ®åº“çš„éš”ç¦»çº§åˆ«"></a>æ•°æ®åº“çš„éš”ç¦»çº§åˆ«</h2><p>å¯¹äºåŒæ—¶è¿è¡Œçš„å¤šä¸ªäº‹åŠ¡ï¼Œå½“è¿™äº›äº‹åŠ¡è®¿é—®æ•°æ®åº“ä¸­ç›¸åŒçš„æ•°æ®æ—¶ï¼Œå¦‚æœæ²¡æœ‰é‡‡ç”¨å¿…è¦çš„éš”ç¦»æœºåˆ¶ï¼Œå°±ä¼šå¯¼è‡´å„ç§å¹¶å‘é—®é¢˜ï¼š<br><strong>è„è¯»ï¼š</strong>å¯¹äºä¸¤ä¸ªäº‹åŠ¡T1ã€T2ï¼ŒT1è¯»å–äº†å·²ç»è¢«T2æ›´æ–°ä½†è¿˜æ²¡æœ‰è¢«æäº¤çš„å­—æ®µã€‚ä¹‹åï¼Œè‹¥T2å›æ»šï¼ŒT1è¯»å–çš„å†…å®¹å°±æ˜¯ä¸´æ—¶ä¸”æ— æ•ˆçš„ã€‚<br><strong>ä¸å¯é‡å¤è¯»ï¼š</strong>å¯¹äºä¸¤ä¸ªäº‹åŠ¡T1ã€T2ï¼ŒT1è¯»å–äº†ä¸€ä¸ªå­—æ®µï¼Œç„¶åT2æ›´æ–°äº†è¯¥å­—æ®µã€‚ä¹‹åï¼ŒT1å†æ¬¡è¯»å–åŒä¸€ä¸ªå­—æ®µï¼Œå€¼å°±ä¸åŒäº†ã€‚<br><strong>å¹»è¯»ï¼š</strong>å¯¹äºä¸¤ä¸ªäº‹åŠ¡T1ã€T2ï¼ŒT1ä»ä¸€ä¸ªè¡¨ä¸­è¯»å–äº†ä¸€ä¸ªå­—æ®µï¼Œç„¶åT2åœ¨è¯¥è¡¨ä¸­æ’å…¥äº†ä¸€äº›æ–°çš„è¡Œã€‚ä¹‹åï¼Œè‹¥T1å†æ¬¡è¯»å–åŒä¸€ä¸ªè¡¨ï¼Œå°±ä¼šå¤šå‡ºå‡ è¡Œã€‚<br><img src="/2020/03/21/mysql-05/1.png" alt></p><h2 id="è§†å›¾"><a href="#è§†å›¾" class="headerlink" title="è§†å›¾"></a>è§†å›¾</h2><p>ä»mysql5.0.1ç‰ˆæœ¬å¼€å§‹æä¾›è§†å›¾åŠŸèƒ½ã€‚ä¸€ç§è™šæ‹Ÿå­˜åœ¨çš„è¡¨ï¼Œè¡Œå’Œåˆ—çš„æ•°æ®æ¥è‡ªè‡ªå®šä¹‰è§†å›¾çš„æŸ¥è¯¢ä¸­ä½¿ç”¨çš„è¡¨ï¼Œå¹¶ä¸”æ˜¯åœ¨ä½¿ç”¨è§†å›¾æ—¶åŠ¨æ€ç”Ÿæˆçš„ï¼Œåªä¿å­˜äº†sqlé€»è¾‘ï¼Œä¸ä¿å­˜æŸ¥è¯¢ç»“æœã€‚</p><p><strong>åˆ›å»ºè§†å›¾ï¼š</strong></p><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">/*è¯­æ³•ï¼šcreate view è§†å›¾åasæŸ¥è¯¢è¯­å¥;*/</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢é‚®ç®±ä¸­åŒ…å«aå­—ç¬¦çš„å‘˜å·¥åã€éƒ¨é—¨åå’Œå·¥ç§ä¿¡æ¯</span><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> myview1 <span class="token keyword">AS</span><span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>department_name<span class="token punctuation">,</span>job_title <span class="token keyword">FROM</span> employees <span class="token number">e</span><span class="token keyword">JOIN</span> departments <span class="token number">d</span> <span class="token keyword">ON</span> <span class="token number">e</span><span class="token punctuation">.</span>department_id<span class="token operator">=</span><span class="token number">d</span><span class="token punctuation">.</span>department_id<span class="token keyword">JOIN</span> jobs j <span class="token keyword">ON</span> <span class="token number">e</span><span class="token punctuation">.</span>job_id<span class="token operator">=</span>j<span class="token punctuation">.</span>job_id<span class="token punctuation">;</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> myview1 <span class="token keyword">WHERE</span> last_name <span class="token operator">LIKE</span> <span class="token string">"%a%"</span><span class="token punctuation">;</span></code></pre><p><strong>å¥½å¤„ï¼š</strong><br>1.é‡ç”¨sqlè¯­å¥<br>2.ç®€åŒ–å¤æ‚çš„sqlæ“ä½œï¼Œä¸å¿…çŸ¥é“å®ƒçš„æŸ¥è¯¢ç»†èŠ‚<br>3.ä¿æŠ¤æ•°æ®ï¼Œæé«˜å®‰å…¨æ€§</p><p><strong>åˆ é™¤è§†å›¾ï¼š</strong>drop view è§†å›¾å1,è§†å›¾å2,â€¦<br>è§†å›¾ä¸è¡¨çš„åŒºåˆ«ï¼š<br>è§†å›¾åªæ˜¯ä¿ç•™äº†sqlé€»è¾‘ï¼Œæ²¡æœ‰ä¿å­˜æ•°æ®ï¼Œè™½ç„¶å¯ä»¥å¢åˆ æ”¹æŸ¥ï¼Œä½†æ˜¯ä¸€èˆ¬åªä½œæŸ¥è¯¢ä½¿ç”¨ã€‚</p><h2 id="ç´¢å¼•çš„åˆ†ç±»"><a href="#ç´¢å¼•çš„åˆ†ç±»" class="headerlink" title="ç´¢å¼•çš„åˆ†ç±»"></a>ç´¢å¼•çš„åˆ†ç±»</h2><p>ç´¢å¼•æ˜¯å¸®åŠ©æ•°æ®åº“é«˜æ•ˆè·å–æ•°æ®çš„æ•°æ®ç»“æ„ã€‚å»ºç«‹ç´¢å¼•æ—¶ä¼šå°†æ•°æ®æ’åºï¼Œç±»ä¼¼äºå›¾ä¹¦çš„ç›®å½•ï¼Œæ ¹æ®ç›®å½•ä¸­çš„ç´¢å¼•æŸ¥æ‰¾åˆ°å¯¹åº”çš„é¡µç ã€‚<br>åˆ†ä¸ºï¼š</p><ul><li>ä¸»é”®ç´¢å¼•ï¼ˆprimary keyï¼‰<ul><li>å”¯ä¸€çš„æ ‡è¯†ï¼Œä¸»é”®ä¸å¯é‡å¤ï¼Œåªèƒ½ç”±ä¸€ä¸ªåˆ—ä½œä¸ºä¸»é”®</li></ul></li><li>å”¯ä¸€ç´¢å¼•ï¼ˆunique keyï¼‰<ul><li>é¿å…é‡å¤åˆ—çš„å‡ºç°ï¼Œå”¯ä¸€ç´¢å¼•å¯ä»¥é‡å¤ï¼Œå¤šä¸ªåˆ—éƒ½å¯ä»¥æ ‡è¯†ä¸ºå”¯ä¸€ç´¢å¼•</li></ul></li><li>å¸¸è§„ç´¢å¼• (key/index)<ul><li>é»˜è®¤çš„</li></ul></li><li>å…¨æ–‡ç´¢å¼•(fulltext)<ul><li>ç‰¹å®šçš„æ•°æ®åº“å¼•æ“æ‰æœ‰</li></ul></li></ul><blockquote><p>åˆ›å»ºç´¢å¼•çš„ä¸‰ç§æ–¹å¼</p></blockquote><p>æ–¹å¼ä¸€ï¼šåˆ›å»ºè¡¨çš„æ—¶å€™</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">user</span><span class="token punctuation">(</span>    id <span class="token keyword">INT</span><span class="token punctuation">,</span>    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    age <span class="token keyword">TINYINT</span><span class="token punctuation">,</span>    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token keyword">UNiQUE</span> <span class="token keyword">KEY</span> <span class="token punctuation">`</span>UX_name<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>æ–¹å¼äºŒï¼šä½¿ç”¨alter tableå‘½ä»¤ï¼Œåˆ›å»ºæ™®é€šç´¢å¼•ã€UNIQUEç´¢å¼•æˆ–PRIMARY KEYç´¢å¼•ã€‚</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">ADD</span> <span class="token keyword">INDEX</span> index_name <span class="token punctuation">(</span>column_list<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>æ–¹å¼ä¸‰ï¼šä½¿ç”¨create indexå‘½ä»¤ï¼Œå¢åŠ æ™®é€šç´¢å¼•æˆ–uniqueç´¢å¼•</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> index_name <span class="token keyword">ON</span> table_name <span class="token punctuation">(</span>column_list<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ç´¢å¼•åœ¨æ•°æ®å°çš„æ—¶å€™ï¼Œä½œç”¨ä¸å¤§ï¼Œä½†æ˜¯åœ¨æ•°æ®å¤§æ—¶ï¼ŒåŒºåˆ«ååˆ†æ˜æ˜¾</p><h2 id="ç´¢å¼•åŸåˆ™"><a href="#ç´¢å¼•åŸåˆ™" class="headerlink" title="ç´¢å¼•åŸåˆ™"></a>ç´¢å¼•åŸåˆ™</h2><ul><li>ç´¢å¼•ä¸æ˜¯è¶Šå¤šè¶Šå¥½</li><li>ä¸è¦å¯¹ç»å¸¸å˜åŠ¨çš„æ•°æ®æ·»åŠ ç´¢å¼•</li><li>å°æ•°æ®ä¸éœ€è¦æ·»åŠ ç´¢å¼•</li><li>ç´¢å¼•ä¸€èˆ¬åŠ åœ¨å¸¸ç”¨æ¥æŸ¥è¯¢çš„å­—æ®µä¸Š</li></ul>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLæ•°æ®ç±»å‹ï¼Œçº¦æŸï¼Œæ ‡è¯†åˆ—</title>
      <link href="2020/03/21/mysql-04/"/>
      <url>2020/03/21/mysql-04/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€æ•°å€¼å‹"><a href="#ä¸€ã€æ•°å€¼å‹" class="headerlink" title="ä¸€ã€æ•°å€¼å‹"></a>ä¸€ã€æ•°å€¼å‹</h2><p><strong>æ•´å‹ï¼š</strong><br>Tinyintï¼š1ä¸ªå­—èŠ‚ï¼Œæœ‰ç¬¦å·ï¼š-128åˆ°127 ï¼Œæ— ç¬¦å·(unsigned)ï¼š0åˆ°255<br>Smallintï¼š2ä¸ªå­—èŠ‚ï¼Œæœ‰ç¬¦å·ï¼š-32768åˆ°32767ï¼Œæ— ç¬¦å·æ•°ï¼š0åˆ°65535<br>Mediumintï¼š3ä¸ªå­—èŠ‚<br>int/Integerï¼š4ä¸ªå­—èŠ‚<br>Bigintï¼š8ä¸ªå­—èŠ‚<br><strong>å°æ•°ï¼š</strong>Mï¼šæ•´æ•°ä½+å°æ•°ä½ï¼ŒDï¼šå°æ•°ä½<br>å®šç‚¹æ•°ï¼šï¼ˆç²¾åº¦è¾ƒé«˜ï¼‰<br>dec(M,D)<br>decimal(M,D)<br>æµ®ç‚¹æ•°ï¼š<br>float(M,D)ï¼š4ä¸ªå­—èŠ‚<br>double(M,D)ï¼š8ä¸ªå­—èŠ‚</p><h2 id="äºŒã€å­—ç¬¦å‹"><a href="#äºŒã€å­—ç¬¦å‹" class="headerlink" title="äºŒã€å­—ç¬¦å‹"></a>äºŒã€å­—ç¬¦å‹</h2><p><strong>è¾ƒçŸ­çš„æ–‡æœ¬ï¼š</strong>æœ€å¤šçš„å­—ç¬¦æ•°M<br>char(M)ï¼šå›ºå®šé•¿åº¦ï¼ŒMä¸º0åˆ°255  å¯ä»¥çœç•¥  é»˜è®¤ä¸º1ï¼Œæ¯”è¾ƒè€—è´¹ç©ºé—´ï¼Œæ•ˆç‡è¾ƒé«˜<br>varchar(M)ï¼šå¯å˜é•¿åº¦ï¼ŒMä¸º0åˆ°65535  ä¸å¯ä»¥çœç•¥ï¼ŒèŠ‚çœç©ºé—´ï¼Œæ•ˆç‡ä½</p><h2 id="ä¸‰ã€æ—¥æœŸå‹"><a href="#ä¸‰ã€æ—¥æœŸå‹" class="headerlink" title="ä¸‰ã€æ—¥æœŸå‹"></a>ä¸‰ã€æ—¥æœŸå‹</h2><p>dateï¼š4å­—èŠ‚<br>datetimeï¼š8å­—èŠ‚<br>timestampï¼š4å­—èŠ‚<br>timeï¼š3å­—èŠ‚<br>yearï¼š1å­—èŠ‚</p><h2 id="å¸¸è§çº¦æŸ"><a href="#å¸¸è§çº¦æŸ" class="headerlink" title="å¸¸è§çº¦æŸ"></a>å¸¸è§çº¦æŸ</h2><p>NOT NULLï¼šéç©ºï¼Œä¿è¯è¯¥å­—æ®µçš„å€¼ä¸èƒ½ä¸ºç©ºã€‚æ¯”å¦‚å§“åï¼Œå­¦å·ç­‰<br>DEFAULTï¼šé»˜è®¤ï¼Œä¿è¯è¯¥å­—æ®µæœ‰é»˜è®¤å€¼ã€‚æ¯”å¦‚æ€§åˆ«<br>PRIMARITYï¼šä¸»é”®ï¼Œä¿è¯è¯¥å­—æ®µå…·æœ‰å”¯ä¸€æ€§ï¼Œä¸”ä¸ä¸ºç©ºã€‚æ¯”å¦‚å­¦å·ï¼Œå‘˜å·¥ç¼–å·<br>UNIQUEï¼šå”¯ä¸€ï¼Œä¿è¯è¯¥å­—æ®µå…·æœ‰å”¯ä¸€æ€§ã€‚æ¯”å¦‚åº§ä½å·<br>CHECKï¼šæ£€æŸ¥çº¦æŸï¼ˆmysqlä¸æ”¯æŒï¼‰ã€‚æ¯”å¦‚æ€§åˆ«<br>FOREIGN KEYï¼šå¤–é”®ï¼Œç”¨äºé™åˆ¶ä¸¤ä¸ªè¡¨çš„å…³ç³»ï¼Œä¿è¯è¯¥å­—æ®µçš„å€¼å¿…é¡»æ¥è‡ªä¸»è¡¨çš„å…³è”çš„å€¼ã€‚åœ¨ä»è¡¨æ·»åŠ å¤–é”®çº¦æŸï¼Œç”¨äºå¼•ç”¨ä¸»è¡¨ä¸­æŸä¸€åˆ—çš„å€¼ã€‚æ¯”å¦‚å­¦ç”Ÿè¡¨çš„ä¸“ä¸šç¼–å·ï¼Œå‘˜å·¥è¡¨çš„éƒ¨é—¨ç¼–å·ï¼Œå‘˜å·¥è¡¨çš„å·¥ç§ç¼–å·    </p><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true"># æ·»åŠ åˆ—çº§çº¦æŸ</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> stuinfo<span class="token punctuation">(</span>        id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true"># ä¸»é”®</span>        stuname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true"># éç©º</span>        gender char<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">CHECK</span> <span class="token punctuation">(</span>gender<span class="token operator">=</span><span class="token string">'ç”·'</span> <span class="token operator">OR</span> gender<span class="token operator">=</span><span class="token string">'å¥³'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true"># æ£€æŸ¥   ä¸æ”¯æŒ</span>        seatid <span class="token keyword">INT</span>  <span class="token keyword">UNIQUE</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true"># å”¯ä¸€</span>        age <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token number">18</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true"># é»˜è®¤çº¦æŸ</span>        majorid <span class="token keyword">INT</span> <span class="token keyword">REFERENCES</span> major<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># å¤–é”® ä¸æ”¯æŒ</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> major<span class="token punctuation">(</span>    id <span class="token keyword">int</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>    majorname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">SHOW</span> <span class="token keyword">INDEX</span> <span class="token keyword">FROM</span> stuinfo<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŸ¥çœ‹æ‰€æœ‰çš„ç´¢å¼•</span><span class="token comment" spellcheck="true"># 2.æ·»åŠ è¡¨çº§çº¦æŸ</span><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> stuinfo<span class="token punctuation">;</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> stuinfo<span class="token punctuation">(</span>id <span class="token keyword">INT</span><span class="token punctuation">,</span>stuname char<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>gender char<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>age <span class="token keyword">INT</span><span class="token punctuation">,</span>seatid <span class="token keyword">INT</span><span class="token punctuation">,</span>majorid <span class="token keyword">INT</span><span class="token punctuation">,</span><span class="token keyword">CONSTRAINT</span> pk <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true"># ä¸»é”®</span><span class="token keyword">CONSTRAINT</span> ck <span class="token keyword">CHECK</span><span class="token punctuation">(</span>gender<span class="token operator">=</span><span class="token string">'ç”·'</span><span class="token operator">or</span><span class="token string">'å¥³'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true"># æ£€æŸ¥  ä¸æ”¯æŒ</span><span class="token keyword">CONSTRAINT</span> uq <span class="token keyword">UNIQUE</span><span class="token punctuation">(</span>seatid<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true"># å”¯ä¸€</span><span class="token keyword">CONSTRAINT</span> fk_stuinfo_major <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>majorid<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> major<span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># å¤–é”®</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># ä¿®æ”¹è¡¨æ—¶æ·»åŠ çº¦æŸ</span><span class="token comment" spellcheck="true">/*1.æ·»åŠ åˆ—çº§çº¦æŸalter table è¡¨å modify column å­—æ®µå å­—æ®µç±»å‹ æ–°çº¦æŸ;2.æ·»åŠ è¡¨çº§çº¦æŸalter table è¡¨å add [constraint çº¦æŸå] çº¦æŸç±»å‹(å­—æ®µå) [å¤–é”®çš„å¼•ç”¨]*/</span></code></pre><h2 id="æ ‡è¯†åˆ—"><a href="#æ ‡è¯†åˆ—" class="headerlink" title="æ ‡è¯†åˆ—"></a>æ ‡è¯†åˆ—</h2><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">/*1.æ ‡è¯†åˆ—å¿…é¡»ä¸keyï¼ˆä¸»é”®ï¼Œå¤–é”®ï¼Œuniqueï¼‰æ­é…2.ä¸€ä¸ªè¡¨è‡³å¤šæœ‰ä¸€ä¸ªæ ‡è¯†åˆ—3.æ ‡è¯†åˆ—çš„ç±»å‹åªèƒ½æ˜¯æ•°å€¼å‹4.å¯é€šè¿‡set auto_increment_increment=æ•°å­—;è®¾ç½®æ­¥é•¿*/</span><span class="token comment" spellcheck="true"># åˆ›å»ºè¡¨æ—¶è®¾ç½®æ ‡è¯†åˆ—</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> stuinfo<span class="token punctuation">(</span>id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>stuname char<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>gender char<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>age <span class="token keyword">INT</span><span class="token punctuation">,</span>seatid <span class="token keyword">INT</span><span class="token punctuation">,</span>majorid <span class="token keyword">INT</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># ä¿®æ”¹è¡¨æ—¶è®¾ç½®æ ‡è¯†åˆ—</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">MODIFY</span>  <span class="token keyword">COLUMN</span> id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DML,DDL</title>
      <link href="2020/03/19/mysql-03/"/>
      <url>2020/03/19/mysql-03/</url>
      
        <content type="html"><![CDATA[<h1 id="æ•°æ®åº“æ“ä½œè¯­è¨€DML"><a href="#æ•°æ®åº“æ“ä½œè¯­è¨€DML" class="headerlink" title="æ•°æ®åº“æ“ä½œè¯­è¨€DML"></a>æ•°æ®åº“æ“ä½œè¯­è¨€DML</h1><h2 id="ä¸€ã€æ’å…¥è¯­å¥"><a href="#ä¸€ã€æ’å…¥è¯­å¥" class="headerlink" title="ä¸€ã€æ’å…¥è¯­å¥"></a>ä¸€ã€æ’å…¥è¯­å¥</h2><p>è¯­æ³•ï¼š<br>æ–¹å¼ä¸€ï¼šinsert into è¡¨å(åˆ—å,â€¦) value(å€¼1,â€¦);<br>æ–¹å¼äºŒï¼šinsert into è¡¨å set åˆ—å=å€¼,åˆ—å=å€¼,â€¦</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> beauty<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>borndate<span class="token punctuation">,</span>phone<span class="token punctuation">,</span>photo<span class="token punctuation">,</span>boyfriend_id<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token string">'Taylor'</span><span class="token punctuation">,</span><span class="token string">'å¥³'</span><span class="token punctuation">,</span><span class="token string">'1990-1-1'</span><span class="token punctuation">,</span><span class="token string">'123456789'</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> beauty <span class="token keyword">SET</span> id <span class="token operator">=</span><span class="token number">14</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'åˆ˜æ¶›'</span><span class="token punctuation">,</span>phone<span class="token operator">=</span><span class="token string">'987654321'</span><span class="token punctuation">;</span></code></pre><h2 id="äºŒã€ä¿®æ”¹è¯­å¥"><a href="#äºŒã€ä¿®æ”¹è¯­å¥" class="headerlink" title="äºŒã€ä¿®æ”¹è¯­å¥"></a>äºŒã€ä¿®æ”¹è¯­å¥</h2><p>ä¿®æ”¹å•è¡¨ï¼š<br>è¯­æ³•ï¼šupdate è¡¨å set åˆ—=æ–°å€¼,â€¦.where ç­›é€‰æ¡ä»¶;<br>ä¿®æ”¹å¤šè¡¨ï¼š<br>è¯­æ³•ï¼šupdate è¡¨1 åˆ«å,è¡¨2 åˆ«å set åˆ—=å€¼,â€¦where è¿æ¥æ¡ä»¶;<br>update è¡¨1 åˆ«åinner joinè¡¨2 åˆ«å on è¿æ¥æ¡ä»¶ set åˆ—=å€¼,â€¦where ç­›é€‰æ¡ä»¶;</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">UPDATE</span> beauty <span class="token keyword">SET</span> phone<span class="token operator">=</span><span class="token string">'123456'</span> <span class="token keyword">WHERE</span> name <span class="token operator">LIKE</span><span class="token string">"å‘¨%"</span><span class="token punctuation">;</span></code></pre><h2 id="ä¸‰ã€åˆ é™¤è¯­å¥"><a href="#ä¸‰ã€åˆ é™¤è¯­å¥" class="headerlink" title="ä¸‰ã€åˆ é™¤è¯­å¥"></a>ä¸‰ã€åˆ é™¤è¯­å¥</h2><p>åˆ é™¤å•è¡¨ï¼š<br>è¯­æ³•ï¼šdelete from è¡¨å where æ¡ä»¶;<br>åˆ é™¤å¤šè¡¨ï¼š<br>è¯­æ³•ï¼šdelete è¡¨1çš„åˆ«å,è¡¨2çš„åˆ«å from è¡¨1 åˆ«åï¼Œè¡¨2 åˆ«åwhere è¿æ¥æ¡ä»¶ and ç­›é€‰æ¡ä»¶;<br>            delete è¡¨1çš„åˆ«å,è¡¨2çš„åˆ«å from è¡¨1 åˆ«å inner joinè¡¨2 åˆ«å on è¿æ¥æ¡ä»¶    where ç­›é€‰æ¡ä»¶;</p><p>åˆ é™¤æ•´è¡¨ï¼štruncate table è¡¨å;<br>1ã€å¦‚æœè¦åˆ é™¤çš„è¡¨æœ‰è‡ªå¢é•¿åˆ—ï¼Œ<br>ç”¨deleteåˆ é™¤åå†æ’å…¥æ•°æ®è‡ªå¢é•¿å€¼ä»æ–­ç‚¹å¼€å§‹<br>ç”¨truncateåˆ é™¤åå†æ’å…¥æ•°æ®è‡ªå¢é•¿çš„å€¼ä»1å¼€å§‹<br>2ã€truncateæ²¡æœ‰è¿”å›å€¼<br>3ã€truncateåˆ é™¤ä¸èƒ½å›æ»šï¼Œdeleteåˆ é™¤å¯ä»¥å›æ»š</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> beauty <span class="token keyword">WHERE</span> phone <span class="token operator">LIKE</span> <span class="token string">"%9"</span><span class="token punctuation">;</span></code></pre><h1 id="æ•°æ®å®šä¹‰è¯­è¨€DDL"><a href="#æ•°æ®å®šä¹‰è¯­è¨€DDL" class="headerlink" title="æ•°æ®å®šä¹‰è¯­è¨€DDL"></a>æ•°æ®å®šä¹‰è¯­è¨€DDL</h1><h2 id="åº“çš„ç®¡ç†"><a href="#åº“çš„ç®¡ç†" class="headerlink" title="åº“çš„ç®¡ç†"></a>åº“çš„ç®¡ç†</h2><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true"># 1.åº“çš„åˆ›å»º</span><span class="token comment" spellcheck="true">/*è¯­æ³•ï¼šcreate database [if not exists]åº“å;*/</span><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> book<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># 2.åº“çš„ä¿®æ”¹</span><span class="token comment" spellcheck="true">/*ä¸€èˆ¬ä¸ä½œä¿®æ”¹æ›´æ”¹å­—ç¬¦é›†ï¼šalter database åº“å  character set å­—ç¬¦é›†;*/</span><span class="token comment" spellcheck="true"># 3.åº“çš„åˆ é™¤</span><span class="token comment" spellcheck="true">/*è¯­æ³•ï¼šdrop [if exists]database åº“å;*/</span><span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> book<span class="token punctuation">;</span></code></pre><h2 id="è¡¨çš„ç®¡ç†"><a href="#è¡¨çš„ç®¡ç†" class="headerlink" title="è¡¨çš„ç®¡ç†"></a>è¡¨çš„ç®¡ç†</h2><h3 id="åˆ›å»ºï¼šcreate"><a href="#åˆ›å»ºï¼šcreate" class="headerlink" title="åˆ›å»ºï¼šcreate"></a>åˆ›å»ºï¼šcreate</h3><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">/*è¯­æ³•ï¼šcreate table è¡¨å(    åˆ—å åˆ—çš„ç±»å‹[(é•¿åº¦)çº¦æŸ],    åˆ—å åˆ—çš„ç±»å‹[(é•¿åº¦)çº¦æŸ],    ....    åˆ—å åˆ—çš„ç±»å‹[(é•¿åº¦)çº¦æŸ],);*/</span><span class="token keyword">USE</span> book<span class="token punctuation">;</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> book<span class="token punctuation">(</span>    id <span class="token keyword">INT</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true"># ç¼–å·</span>    bname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true"># ä¹¦å</span>    price <span class="token keyword">DOUBLE</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true"># ä»·æ ¼</span>    author <span class="token keyword">INT</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true"># ä½œè€…id</span>    publishDate <span class="token keyword">DATETIME</span> <span class="token comment" spellcheck="true"># å‡ºç‰ˆæ—¥æœŸ</span>    <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">DESC</span> book<span class="token punctuation">;</span> <span class="token comment" spellcheck="true"># æŸ¥çœ‹è¡¨</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> author<span class="token punctuation">(</span>    id <span class="token keyword">INT</span><span class="token punctuation">,</span>    au_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    nation <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">DESC</span> author<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># è¡¨çš„å¤åˆ¶</span><span class="token comment" spellcheck="true"># ä»…ä»…å¤åˆ¶è¡¨çš„ç»“æ„</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> copy <span class="token operator">LIKE</span> book<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># å¤åˆ¶è¡¨çš„ç»“æ„å’Œæ•°æ®</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> copy1 <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> book<span class="token punctuation">;</span></code></pre><h3 id="ä¿®æ”¹ï¼šalter"><a href="#ä¿®æ”¹ï¼šalter" class="headerlink" title="ä¿®æ”¹ï¼šalter"></a>ä¿®æ”¹ï¼šalter</h3><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true"># ä¿®æ”¹åˆ—å</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span>    book CHANGE <span class="token keyword">COLUMN</span> publishDate pubdate <span class="token keyword">DATETIME</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># ä¿®æ”¹åˆ—çš„ç±»å‹å’Œçº¦æŸ</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> book <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> pubDate <span class="token keyword">TIMESTAMP</span><span class="token comment" spellcheck="true"># æ·»åŠ æ–°åˆ—</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> author <span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> annual <span class="token keyword">DOUBLE</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># åˆ é™¤åˆ—</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> author <span class="token keyword">DROP</span> <span class="token keyword">COLUMN</span> annual<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># ä¿®æ”¹è¡¨å</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> author <span class="token keyword">RENAME</span> book_author<span class="token punctuation">;</span></code></pre><h3 id="åˆ é™¤ï¼šdrop"><a href="#åˆ é™¤ï¼šdrop" class="headerlink" title="åˆ é™¤ï¼šdrop"></a>åˆ é™¤ï¼šdrop</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> book_author<span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åå°„</title>
      <link href="2020/03/15/java-10/"/>
      <url>2020/03/15/java-10/</url>
      
        <content type="html"><![CDATA[<h2 id="åå°„"><a href="#åå°„" class="headerlink" title="åå°„"></a>åå°„</h2><p>åå°„æœºåˆ¶å…è®¸ç¨‹åºåœ¨æ‰§è¡ŒæœŸå€ŸåŠ©äºReflection APIå–å¾—ä»»ä½•ç±»çš„å†…éƒ¨ä¿¡æ¯ï¼Œå¹¶èƒ½ç›´æ¥æ“ä½œä»»æ„å¯¹è±¡çš„å†…éƒ¨å±æ€§åŠæ–¹æ³•ã€‚<br><strong>ç±»çš„åŠ è½½è¿‡ç¨‹ï¼š</strong><br>ç¨‹åºç»è¿‡javac.exeå‘½ä»¤åï¼Œä¼šç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ªå­—èŠ‚ç æ–‡ä»¶(.class)ï¼Œæ¥ç€ä½¿ç”¨java.exeå‘½ä»¤å¯¹æŸä¸ªå­—èŠ‚ç æ–‡ä»¶è¿›è¡Œè§£é‡Šè¿è¡Œã€‚ç›¸å½“äºå°†æŸä¸ªå­—èŠ‚ç æ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå³ç±»çš„åŠ è½½ã€‚åŠ è½½åˆ°å†…å­˜ä¸­çš„ç±»ï¼Œæˆ‘ä»¬å°±æˆä¸ºè¿è¡Œæ—¶ç±»ï¼Œæ­¤è¿è¡Œæ—¶ç±»å°±ä½œä¸ºClassçš„ä¸€ä¸ªå®ä¾‹ã€‚<br>åŠ è½½åˆ°å†…å­˜ä¸­çš„è¿è¡Œæ—¶ç±»ï¼Œä¼šç¼“å­˜ä¸€æ®µæ—¶é—´ã€‚åœ¨æ­¤æ—¶é—´å†…ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸åŒçš„æ–¹å¼æ¥è·å–æ­¤è¿è¡Œæ—¶ç±»ã€‚</p><h2 id="è·å–Classå®ä¾‹"><a href="#è·å–Classå®ä¾‹" class="headerlink" title="è·å–Classå®ä¾‹"></a>è·å–Classå®ä¾‹</h2><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// è·å–Classå®ä¾‹</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> ClassNotFoundException <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// æ–¹å¼ä¸€:è°ƒç”¨è¿è¡Œç±»å±æ€§ï¼š.class</span>    Class <span class="token class-name">class0</span> <span class="token operator">=</span> Person<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>class0<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// æ–¹å¼äºŒï¼šè°ƒç”¨è¿è¡Œæ—¶ç±»çš„å¯¹è±¡ï¼Œè°ƒç”¨getClass()</span>    Person p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Class <span class="token class-name">class1</span> <span class="token operator">=</span> p1<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>class1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// æ–¹å¼ä¸‰ï¼šè°ƒç”¨Classçš„é™æ€æ–¹æ³•ï¼šforName(String classPath)</span>    Class <span class="token class-name">class2</span> <span class="token operator">=</span> Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"reflection.Person"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>class2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// æ–¹å¼å››ï¼šä½¿ç”¨ç±»åŠ è½½å™¨ï¼šClassloader</span>    ClassLoader classLoader <span class="token operator">=</span> ClassTest<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Class <span class="token class-name">class3</span> <span class="token operator">=</span> classLoader<span class="token punctuation">.</span><span class="token function">loadClass</span><span class="token punctuation">(</span><span class="token string">"reflection.Person"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>class3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="è°ƒç”¨è¿è¡Œæ—¶ç±»æŒ‡å®šç»“æ„"><a href="#è°ƒç”¨è¿è¡Œæ—¶ç±»æŒ‡å®šç»“æ„" class="headerlink" title="è°ƒç”¨è¿è¡Œæ—¶ç±»æŒ‡å®šç»“æ„"></a>è°ƒç”¨è¿è¡Œæ—¶ç±»æŒ‡å®šç»“æ„</h2><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// é€šè¿‡åå°„åˆ›å»ºå¯¹åº”çš„è¿è¡Œæ—¶ç±»</span>    Class<span class="token operator">&lt;</span>Person<span class="token operator">></span> class1 <span class="token operator">=</span> Person<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// åˆ›å»ºè¿è¡Œæ—¶ç±»çš„å¯¹è±¡</span>    Person p1 <span class="token operator">=</span> class1<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è·å–è¿è¡Œæ—¶ç±»çš„å±æ€§getField(String fieldName),åªèƒ½è·å–æƒé™ä¸ºpublicçš„å±æ€§</span>    Field id <span class="token operator">=</span> class1<span class="token punctuation">.</span><span class="token function">getField</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// é€šå¸¸ä½¿ç”¨getDeclaredField(String FieldName)è·å–è¿è¡Œæ—¶ç±»çš„å±æ€§</span>    Field name <span class="token operator">=</span> class1<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    name<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è¡¨ç¤ºå½“å‰å±æ€§æ—¶å¯è®¿é—®çš„</span>    <span class="token comment" spellcheck="true">// è®¾ç½®å±æ€§å€¼ set(å®ä¾‹å¯¹è±¡,å±æ€§å€¼)</span>    id<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span><span class="token number">10001</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    name<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span><span class="token string">"Tony"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è·å–å±æ€§å€¼</span>    <span class="token keyword">int</span> p1_id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> id<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p1_id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 10001</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// Tony</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// Person{id=10001, name='Tony', age=0}</span>    <span class="token comment" spellcheck="true">// è·å–è¿è¡Œæ—¶ç±»æ–¹æ³• getDeclaredMethod(æ–¹æ³•å,æŒ‡å®šæ–¹æ³•çš„å½¢å‚åˆ—è¡¨)</span>    Method setAge <span class="token operator">=</span> class1<span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">"setAge"</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    setAge<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æŒ‡æ˜è¯¥æ–¹æ³•å¯è®¿é—®</span>    <span class="token comment" spellcheck="true">// æ‰§è¡Œè¿è¡Œæ—¶ç±»æ–¹æ³• invoke(å¯¹è±¡å®ä¾‹,å®å‚åˆ—è¡¨)</span>    <span class="token comment" spellcheck="true">// invoke()çš„è¿”å›å€¼å³ä¸ºå¯¹åº”ç±»ä¸­è°ƒç”¨æ–¹æ³•çš„è¿”å›å€¼</span>    setAge<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// Person{id=10001, name='Tony', age=24}</span>    <span class="token comment" spellcheck="true">// è·å–æŒ‡å®šæ„é€ å™¨</span>    Constructor con <span class="token operator">=</span> class1<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>String<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    con<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Person p2 <span class="token operator">=</span> <span class="token punctuation">(</span>Person<span class="token punctuation">)</span> con<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token number">1002</span><span class="token punctuation">,</span><span class="token string">"Taylor"</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// Person{id=1002, name='Taylor', age=18}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œç¼–ç¨‹</title>
      <link href="2020/03/13/java-09/"/>
      <url>2020/03/13/java-09/</url>
      
        <content type="html"><![CDATA[<h2 id="TCPç½‘ç»œç¼–ç¨‹"><a href="#TCPç½‘ç»œç¼–ç¨‹" class="headerlink" title="TCPç½‘ç»œç¼–ç¨‹"></a>TCPç½‘ç»œç¼–ç¨‹</h2><p>ä½¿ç”¨TCPè¿æ¥è¿›è¡Œé€šä¿¡çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯</p><pre class=" language-java"><code class="language-java">    <span class="token annotation punctuation">@Test</span>  <span class="token comment" spellcheck="true">// å®¢æˆ·ç«¯</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">client</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 1.åˆ›å»ºSocketå¯¹è±¡ï¼ŒæŒ‡æ˜æœåŠ¡å™¨ç«¯çš„IPå’Œç«¯å£å·</span>        Socket socket <span class="token operator">=</span> null<span class="token punctuation">;</span>        OutputStream os <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            InetAddress inet <span class="token operator">=</span> InetAddress<span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Socket</span><span class="token punctuation">(</span>inet<span class="token punctuation">,</span> <span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 2.åˆ›å»ºè¾“å‡ºæµ</span>            os <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 3.å‘å¤–å†™æ•°æ®</span>            os<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"hello? hello? hello?"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>os <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token comment" spellcheck="true">// 4.å…³é—­è¾“å…¥æµ</span>                    os<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>socket <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token comment" spellcheck="true">// 5.å…³é—­Socket</span>                    socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span>  <span class="token comment" spellcheck="true">// æœåŠ¡ç«¯</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">server</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        Socket socket <span class="token operator">=</span> null<span class="token punctuation">;</span>        InputStream is <span class="token operator">=</span> null<span class="token punctuation">;</span>        ByteOutputStream byteOutputStream <span class="token operator">=</span> null<span class="token punctuation">;</span>        ServerSocket serverSocket <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 1.åˆ›å»ºæœåŠ¡å™¨ç«¯çš„ServerSocketï¼ŒæŒ‡æ˜ç«¯å£å·</span>            serverSocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span><span class="token punctuation">(</span><span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 2.æ¥å—æ¥è‡ªå®¢æˆ·ç«¯çš„Socket</span>            socket <span class="token operator">=</span> serverSocket<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 3.åˆ›å»ºè¾“å…¥æµ</span>            is <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            byteOutputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> len<span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 4.è¯»å–æ•°æ®</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// å°†bufferæ•°ç»„ä¸­çš„æ•°æ®å†™åˆ°ByteOutputStreamç±»çš„ä¸€ä¸ªæ•°ç»„ä¸­</span>                byteOutputStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ”¶åˆ°æ¶ˆæ¯ï¼Œæ¥è‡ªï¼š"</span><span class="token operator">+</span>socket<span class="token punctuation">.</span><span class="token function">getInetAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>byteOutputStream<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">// 5.å…³é—­æµå’Œsocket</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>byteOutputStream <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    byteOutputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>is <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>socket <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>serverSocket <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    serverSocket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h2 id="ä½¿ç”¨TCPå®ç°æ–‡ä»¶ä¼ è¾“"><a href="#ä½¿ç”¨TCPå®ç°æ–‡ä»¶ä¼ è¾“" class="headerlink" title="ä½¿ç”¨TCPå®ç°æ–‡ä»¶ä¼ è¾“"></a>ä½¿ç”¨TCPå®ç°æ–‡ä»¶ä¼ è¾“</h2><pre class=" language-java"><code class="language-java">  <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">client</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºsocketå¹¶ç»‘å®šIPå’Œç«¯å£å·</span>        Socket socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Socket</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span><span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºè¾“å‡ºæµï¼Œå‘é€æ•°æ®</span>        OutputStream outputStream <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºæ–‡ä»¶è¾“å…¥æµï¼Œå¤–éƒ¨è¯»å–æ–‡ä»¶å†…å®¹</span>        FileInputStream fi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"../java_08/pic2.png"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> len<span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> fi<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            outputStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// å…³é—­æ•°æ®è¾“å‡º</span>        socket<span class="token punctuation">.</span><span class="token function">shutdownOutput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å®¢æˆ·ç«¯æ¥æ”¶æœåŠ¡ç«¯çš„åé¦ˆä¿¡æ¯</span>        InputStream inputStream <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ByteOutputStream byteOutputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> len1<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>len<span class="token operator">=</span>inputStream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            byteOutputStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer1<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>byteOutputStream<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        byteOutputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        inputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        outputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        fi<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">server</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºæœåŠ¡ç«¯ServerSocketå¹¶ç»‘å®šç«¯å£</span>        ServerSocket serverSocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span><span class="token punctuation">(</span><span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ¥æ”¶å®¢æˆ·ç«¯socket</span>        Socket socket <span class="token operator">=</span> serverSocket<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºè¾“å…¥æµï¼Œæ¥æ”¶æ•°æ®</span>        InputStream inputStream <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºæ–‡ä»¶è¾“å‡ºæµï¼Œç”¨äºä¿å­˜æ¥æ”¶åˆ°çš„æ–‡ä»¶</span>        FileOutputStream fo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"rec1.png"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> len<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> inputStream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            fo<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// æœåŠ¡å™¨åé¦ˆæ¶ˆæ¯ç»™å®¢æˆ·ç«¯</span>        OutputStream outputStream <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        outputStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"å›¾ç‰‡å·²æ¥æ”¶åˆ°ï¼"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        outputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        fo<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        inputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        serverSocket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="UDPç½‘ç»œç¼–ç¨‹"><a href="#UDPç½‘ç»œç¼–ç¨‹" class="headerlink" title="UDPç½‘ç»œç¼–ç¨‹"></a>UDPç½‘ç»œç¼–ç¨‹</h2><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sender</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 1.åˆ›å»ºå¥—æ¥å­—</span>    DatagramSocket socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramSocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    InetAddress inet <span class="token operator">=</span> InetAddress<span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    String str <span class="token operator">=</span> <span class="token string">"å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ~"</span><span class="token punctuation">;</span>    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 2.åˆå§‹åŒ–æ•°æ®åŒ…ï¼Œç»‘å®šIP,å’Œç«¯å£å·ï¼Œç¡®å®šæ•°æ®çš„å­—èŠ‚é•¿åº¦</span>    DatagramPacket packet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>data<span class="token punctuation">.</span>length<span class="token punctuation">,</span>inet<span class="token punctuation">,</span><span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 3.å‘é€æ•°æ®åŒ…</span>    socket<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>packet<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 4.å…³é—­Socket</span>    socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">receiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 1.åˆ›å»ºå¥—æ¥å­—</span>    DatagramSocket socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramSocket</span><span class="token punctuation">(</span><span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 2.åˆ›å»ºç”¨äºæ¥æ”¶æ•°æ®çš„å­—èŠ‚æ•°ç»„</span>    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 3.åˆ›å»ºæ•°æ®åŒ…</span>    DatagramPacket packet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>buffer<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 4.æ¥æ”¶æ•°æ®</span>    socket<span class="token punctuation">.</span><span class="token function">receive</span><span class="token punctuation">(</span>packet<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 5.å°†æ¥æ”¶çš„æ•°æ®æ‰“å°åˆ°æ§åˆ¶å°</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>packet<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>packet<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 6.å…³é—­socket</span>    socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="URLç¼–ç¨‹"><a href="#URLç¼–ç¨‹" class="headerlink" title="URLç¼–ç¨‹"></a>URLç¼–ç¨‹</h2><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        HttpURLConnection con <span class="token operator">=</span> null<span class="token punctuation">;</span>        InputStream is <span class="token operator">=</span> null<span class="token punctuation">;</span>        FileOutputStream fo <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// åˆ›å»ºURLå¯¹è±¡</span>            URL url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8888/index.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// åˆ›å»ºè¿æ¥å¯¹è±¡</span>            con <span class="token operator">=</span> <span class="token punctuation">(</span>HttpURLConnection<span class="token punctuation">)</span> url<span class="token punctuation">.</span><span class="token function">openConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// åˆ›å»ºè¿æ¥</span>            con<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// åˆ›å»ºè¾“å…¥æµï¼Œç”¨äºè¯»å–æ•°æ®</span>            is <span class="token operator">=</span> con<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// åˆ›å»ºæ–‡ä»¶è¾“å‡ºæµï¼Œå°†è¯»å–çš„æ•°æ®å†™åˆ°æœ¬åœ°</span>            fo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"index.html"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> len<span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                fo<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>fo <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                fo<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>is <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>con <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    con<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>I/Oæµ</title>
      <link href="2020/03/11/java-08/"/>
      <url>2020/03/11/java-08/</url>
      
        <content type="html"><![CDATA[<h2 id="Fileç±»çš„ä½¿ç”¨"><a href="#Fileç±»çš„ä½¿ç”¨" class="headerlink" title="Fileç±»çš„ä½¿ç”¨"></a>Fileç±»çš„ä½¿ç”¨</h2><p>1ã€Fileç±»çš„ä¸€ä¸ªå¯¹è±¡ï¼Œä»£è¡¨ä¸€ä¸ªæ–‡ä»¶æˆ–ä¸€ä¸ªæ–‡ä»¶ç›®å½•<br>2ã€Fileç±»å£°æ˜åœ¨java.ioåŒ…ä¸‹<br><strong>Fileç±»å¯¹è±¡å¸¸ç”¨æ–¹æ³•ï¼š</strong></p><pre class=" language-java"><code class="language-java">  <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>        File file1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"src/IO/hello.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// public String getAbsolutePath()ï¼šè·å–ç»å¯¹è·¯å¾„</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>file1<span class="token punctuation">.</span><span class="token function">getAbsoluteFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// public String getPath() ï¼šè·å–è·¯å¾„</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>file1<span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// public String getName() ï¼šè·å–åç§°</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>file1<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// public String getParent()ï¼šè·å–ä¸Šå±‚æ–‡ä»¶ç›®å½•è·¯å¾„ã€‚è‹¥æ— ï¼Œè¿”å›null</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>file1<span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// public long length() ï¼šè·å–æ–‡ä»¶é•¿åº¦ï¼ˆå³ï¼šå­—èŠ‚æ•°ï¼‰ã€‚ä¸èƒ½è·å–ç›®å½•çš„é•¿åº¦ã€‚</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>file1<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// public long lastModified() ï¼šè·å–æœ€åä¸€æ¬¡çš„ä¿®æ”¹æ—¶é—´ï¼Œæ¯«ç§’å€¼</span><span class="token comment" spellcheck="true">// public String[] list() ï¼šè·å–æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶æˆ–è€…æ–‡ä»¶ç›®å½•çš„åç§°æ•°ç»„</span><span class="token comment" spellcheck="true">// public File[] listFiles() ï¼šè·å–æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶æˆ–è€…æ–‡ä»¶ç›®å½•çš„Fileæ•°ç»„</span><span class="token comment" spellcheck="true">//public boolean renameTo(File dest):æŠŠæ–‡ä»¶é‡å‘½åä¸ºæŒ‡å®šçš„æ–‡ä»¶è·¯å¾„</span>        File file2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"test.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        file1<span class="token punctuation">.</span><span class="token function">renameTo</span><span class="token punctuation">(</span>file2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// public boolean isDirectory()ï¼šåˆ¤æ–­æ˜¯å¦æ˜¯æ–‡ä»¶ç›®å½•</span><span class="token comment" spellcheck="true">// public boolean isFile() ï¼šåˆ¤æ–­æ˜¯å¦æ˜¯æ–‡ä»¶</span><span class="token comment" spellcheck="true">// public boolean exists() ï¼šåˆ¤æ–­æ˜¯å¦å­˜åœ¨</span><span class="token comment" spellcheck="true">// public boolean canRead() ï¼šåˆ¤æ–­æ˜¯å¦å¯è¯»</span><span class="token comment" spellcheck="true">// public boolean canWrite() ï¼šåˆ¤æ–­æ˜¯å¦å¯å†™</span><span class="token comment" spellcheck="true">// public boolean isHidden() ï¼šåˆ¤æ–­æ˜¯å¦éšè—</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>file2<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>file1<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// false</span><span class="token comment" spellcheck="true">// public boolean createNewFile() ï¼šåˆ›å»ºæ–‡ä»¶ã€‚è‹¥æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™ä¸åˆ›å»ºï¼Œè¿”å›false</span><span class="token comment" spellcheck="true">// public boolean mkdir() ï¼šåˆ›å»ºæ–‡ä»¶ç›®å½•ã€‚å¦‚æœæ­¤æ–‡ä»¶ç›®å½•å­˜åœ¨ï¼Œå°±ä¸åˆ›å»ºäº†ã€‚å¦‚æœæ­¤æ–‡ä»¶ç›®å½•çš„ä¸Šå±‚ç›®å½•ä¸å­˜åœ¨ï¼Œä¹Ÿä¸åˆ›å»ºã€‚</span><span class="token comment" spellcheck="true">// public boolean mkdirs() ï¼šåˆ›å»ºæ–‡ä»¶ç›®å½•ã€‚å¦‚æœä¸Šå±‚æ–‡ä»¶ç›®å½•ä¸å­˜åœ¨ï¼Œä¸€å¹¶åˆ›å»º</span><span class="token comment" spellcheck="true">// public boolean delete()ï¼šåˆ é™¤æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹</span>        File file3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"test1.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        file3<span class="token punctuation">.</span><span class="token function">createNewFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        file3<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><h2 id="I-OæµåŸç†åŠæµçš„åˆ†ç±»"><a href="#I-OæµåŸç†åŠæµçš„åˆ†ç±»" class="headerlink" title="I/OæµåŸç†åŠæµçš„åˆ†ç±»"></a>I/OæµåŸç†åŠæµçš„åˆ†ç±»</h2><p>æŒ‰æ•°æ®æµå‘åˆ†ä¸ºï¼šè¾“å…¥æµï¼Œè¾“å‡ºæµ<br>æŒ‰æ“ä½œçš„æ•°æ®å•ä½åˆ†ä¸ºï¼šå­—èŠ‚æµï¼Œå­—ç¬¦æµ<br>æŒ‰æµçš„è§’è‰²åˆ†ä¸ºï¼šèŠ‚ç‚¹æµï¼Œå¤„ç†æµ<br>å››ä¸ªæŠ½è±¡åŸºç±»ï¼š<br>å­—èŠ‚æµï¼šInputStreamï¼ŒOutputStream<br>å­—ç¬¦æµï¼šReaderï¼ŒWriter<br>èŠ‚ç‚¹æµï¼š<br>æ“ä½œå­—èŠ‚ï¼šFileInputStreamï¼ŒFileOutputStream<br>æ“ä½œå­—ç¬¦ï¼šFileReaderï¼ŒFileWiter<br>ç¼“å†²æµï¼ˆå¤„ç†æµçš„ä¸€ç§ï¼‰ï¼š<br>æ“ä½œå­—èŠ‚ï¼šBufferedInputStreamï¼ŒBufferedOutput<br>æ“ä½œå­—ç¬¦ï¼šBufferedReaderï¼ŒBufferedWriter</p><h2 id="ä½¿ç”¨FileReaderä»ç¡¬ç›˜ä¸­è¯»å–å­—ç¬¦æ•°æ®"><a href="#ä½¿ç”¨FileReaderä»ç¡¬ç›˜ä¸­è¯»å–å­—ç¬¦æ•°æ®" class="headerlink" title="ä½¿ç”¨FileReaderä»ç¡¬ç›˜ä¸­è¯»å–å­—ç¬¦æ•°æ®"></a>ä½¿ç”¨FileReaderä»ç¡¬ç›˜ä¸­è¯»å–å­—ç¬¦æ•°æ®</h2><pre class=" language-java"><code class="language-java"> <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        FileReader fileReader <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 1.å®ä¾‹åŒ–Fileç±»å¯¹è±¡</span>            File file1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"test.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç›¸å¯¹äºå½“å‰Modul</span>            <span class="token comment" spellcheck="true">// 2.æä¾›å…·ä½“çš„æµ</span>            fileReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>file1<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 3.è¯»æ•°æ®</span>            <span class="token comment" spellcheck="true">// read()è¿”å›è¯»å…¥çš„ä¸€ä¸ªå­—ç¬¦çš„ASCIIç ï¼Œå¦‚æœåˆ°è¾¾æœ«å°¾åˆ™è¿”å›-1</span>            <span class="token keyword">int</span> data<span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>data <span class="token operator">=</span> fileReader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">// é˜²æ­¢å†…å­˜æ³„æ¼ï¼Œå¿…é¡»å…³é—­æµ</span>            <span class="token comment" spellcheck="true">// 4.å…³é—­æµ</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>fileReader <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    fileReader<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// è°ƒç”¨read(char[] cbuf) è¿”å›æ¯æ¬¡è¯»å…¥cbufæ•°ç»„ä¸­çš„å­—ç¬¦ä¸ªæ•°ï¼Œåˆ°è¾¾æ–‡ä»¶æœ«å°¾è¿”å›-1</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>        FileReader fr <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            File file1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"test.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            fr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>file1<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cbuf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">char</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> len<span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> fr<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>cbuf<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">//                for (int i = 0; i &lt; cbuf.length; i++) {</span><span class="token comment" spellcheck="true">//                    System.out.print(cbuf[i]);</span><span class="token comment" spellcheck="true">//                }</span>             <span class="token comment" spellcheck="true">/*æ–¹å¼ä¸€ï¼š               for(int i=0;i&lt;len;i++){                    System.out.print(cbuf[i]);                }*/</span>             <span class="token comment" spellcheck="true">// æ–¹å¼äºŒï¼š</span>                String str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>cbuf<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>fr <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                fr<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>   <span class="token punctuation">}</span></code></pre><h2 id="ä½¿ç”¨FileWriterå‘ç¡¬ç›˜ä¸­å†™å…¥å­—ç¬¦æ•°æ®"><a href="#ä½¿ç”¨FileWriterå‘ç¡¬ç›˜ä¸­å†™å…¥å­—ç¬¦æ•°æ®" class="headerlink" title="ä½¿ç”¨FileWriterå‘ç¡¬ç›˜ä¸­å†™å…¥å­—ç¬¦æ•°æ®"></a>ä½¿ç”¨FileWriterå‘ç¡¬ç›˜ä¸­å†™å…¥å­—ç¬¦æ•°æ®</h2><pre class=" language-java"><code class="language-java"> <span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// åˆ©ç”¨è¾“å…¥æµå‘ç¡¬ç›˜ä¸­å†™å…¥æ•°æ®</span>    <span class="token comment" spellcheck="true">/*    æ–‡ä»¶ä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»ºï¼›    new FileWriter(file1,false);    å†™å…¥æ—¶å°†åŸæ¥æ–‡ä»¶çš„å†…å®¹è¦†ç›–(é»˜è®¤ä¸ºfalse)    new FileWriter(file1,true);     å†™å…¥æ—¶è¿½åŠ åˆ°åŸæ–‡ä»¶å†…å®¹åé¢     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>        FileWriter fw <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 1.æä¾›Fileç±»çš„å¯¹è±¡ï¼ŒæŒ‡æ˜è¦å†™å…¥çš„æ–‡ä»¶</span>            File file1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"test.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// æä¾›FileWriterå¯¹è±¡ï¼Œç”¨äºæ•°æ®å†™å…¥</span>            fw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span>file1<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            fw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"å“ˆå“ˆå“ˆå“ˆå“ˆ,"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            fw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"æ­ªæ¯”å·´åœ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>fw<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>                fw<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="ä½¿ç”¨FileInputStream-FileOutputStreamå¯¹å­—èŠ‚æ–‡ä»¶çš„å¤„ç†"><a href="#ä½¿ç”¨FileInputStream-FileOutputStreamå¯¹å­—èŠ‚æ–‡ä»¶çš„å¤„ç†" class="headerlink" title="ä½¿ç”¨FileInputStream,FileOutputStreamå¯¹å­—èŠ‚æ–‡ä»¶çš„å¤„ç†"></a>ä½¿ç”¨FileInputStream,FileOutputStreamå¯¹å­—èŠ‚æ–‡ä»¶çš„å¤„ç†</h2><p><img src="/2020/03/11/java-08/1.png" alt></p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>        FileInputStream fi <span class="token operator">=</span> null<span class="token punctuation">;</span>        FileOutputStream fo <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            File file1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"pic.png"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            File file2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"pic1.png"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            fi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>file1<span class="token punctuation">)</span><span class="token punctuation">;</span>            fo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>file2<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> pic <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> len<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è·å–è¯»å–çš„å­—ç¬¦é•¿åº¦</span>            <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> fi<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>pic<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                fo<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>pic<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>fo<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>                    fo<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>fi<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>                    fi<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h2 id="ç¼“å†²æµçš„ä½¿ç”¨"><a href="#ç¼“å†²æµçš„ä½¿ç”¨" class="headerlink" title="ç¼“å†²æµçš„ä½¿ç”¨"></a>ç¼“å†²æµçš„ä½¿ç”¨</h2><pre class=" language-java"><code class="language-java">  <span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// å†…éƒ¨é€šè¿‡æä¾›ä¸€ä¸ªç¼“å†²åŒºï¼Œæé«˜æ–‡ä»¶çš„è¯»å–ï¼Œå†™å…¥é€Ÿåº¦</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        BufferedInputStream bis <span class="token operator">=</span> null<span class="token punctuation">;</span>        BufferedOutputStream bos <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 1.é€ æ–‡ä»¶</span>            File file1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"pic.png"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            File file2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"pic2.png"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 2.é€ æµ</span>            FileInputStream fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>file1<span class="token punctuation">)</span><span class="token punctuation">;</span>            FileOutputStream fos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>file2<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 3.é€ ç¼“å†²æµ</span>            bis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedInputStream</span><span class="token punctuation">(</span>fis<span class="token punctuation">)</span><span class="token punctuation">;</span>            bos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedOutputStream</span><span class="token punctuation">(</span>fos<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 4.è¯»å–å’Œå†™å…¥</span>            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buff <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> len<span class="token punctuation">;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> bis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buff<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                bos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buff<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>bis<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>                    bis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>bos<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>                    bos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h2 id="è½¬æ¢æµ"><a href="#è½¬æ¢æµ" class="headerlink" title="è½¬æ¢æµ"></a>è½¬æ¢æµ</h2><p>InputStreamReaderï¼šå°†IntputStreamè½¬æ¢ä¸ºReader</p><p>OutputStreamWriterï¼šå°†Writerè½¬åŒ–ä¸ºOutputStream</p><h2 id="å¯¹è±¡æµ"><a href="#å¯¹è±¡æµ" class="headerlink" title="å¯¹è±¡æµ"></a>å¯¹è±¡æµ</h2><p>åºåˆ—åŒ–ï¼šä½¿ç”¨ObjectOutputStreamç±»ä¿å­˜åŸºæœ¬æ•°æ®ç±»å‹æ•°æ®æˆ–å¯¹è±¡<br>ååºåˆ—åŒ–ï¼šä½¿ç”¨ObjectInputStreamç±»è¯»å–åŸºæœ¬æ•°æ®ç±»å‹æ•°æ®æˆ–å¯¹è±¡<br><strong>å¯¹è±¡çš„åºåˆ—åŒ–ï¼š</strong>å…è®¸æŠŠå†…å­˜ä¸­çš„javaå¯¹è±¡è½¬åŒ–ä¸ºä¸å¹³å°æ— å…³çš„äºŒè¿›åˆ¶æµï¼Œä»è€Œå…è®¸æŠŠè¿™ç§äºŒè¿›åˆ¶æµæŒä¹…åœ°ä¿å­˜åœ¨ç£ç›˜ä¸Šï¼Œæˆ–æ˜¯é€šè¿‡ç½‘ç»œèŠ‚ç‚¹å°†è¿™ç§äºŒè¿›åˆ¶æµä¼ è¾“åˆ°å¦ä¸€ä¸ªç½‘ç»œèŠ‚ç‚¹ã€‚å½“ç¨‹åºè·å–åˆ°è¿™ç§äºŒè¿›åˆ¶æµåï¼Œå¯ä»¥æ¢å¤æˆåŸæ¥çš„javaå¯¹è±¡ã€‚<br><strong>å¯¹è±¡çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼š</strong></p><pre class=" language-java"><code class="language-java"> <span class="token annotation punctuation">@Test</span>  <span class="token comment" spellcheck="true">//åºåˆ—åŒ–</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        ObjectOutputStream oos <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"test.dat"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">"å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            oos<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"é©¬è€å¸ˆ"</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            oos<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>oos<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>                    oos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        ObjectInputStream ois <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"test.dat"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Object o <span class="token operator">=</span> ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            String str <span class="token operator">=</span> <span class="token punctuation">(</span>String<span class="token punctuation">)</span> o<span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ</span>            Person p <span class="token operator">=</span> <span class="token punctuation">(</span>Person<span class="token punctuation">)</span> ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// Person{name='é©¬è€å¸ˆ', age=40}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>ois<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    ois<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * @author zyz * @description 1ã€åºåˆ—åŒ–å¯¹è±¡éœ€è¦å®ç°Serializableæ¥å£ *              2ã€éœ€è¦æä¾›ä¸€ä¸ªé™æ€çš„å…¨å±€å¸¸é‡serialVersionUID *              3ã€ä¿è¯å½“å‰ç±»çš„æ‰€æœ‰å±æ€§æ˜¯å¯åºåˆ—åŒ–çš„ * @create 2020-03-12 15:47 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> 42256165416L<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">Person</span><span class="token punctuation">(</span>String name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"Person{"</span> <span class="token operator">+</span>                <span class="token string">"name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">", age="</span> <span class="token operator">+</span> age <span class="token operator">+</span>                <span class="token string">'}'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ³›å‹</title>
      <link href="2020/03/11/java-07/"/>
      <url>2020/03/11/java-07/</url>
      
        <content type="html"><![CDATA[<h2 id="æ³›å‹çš„æ¦‚å¿µ"><a href="#æ³›å‹çš„æ¦‚å¿µ" class="headerlink" title="æ³›å‹çš„æ¦‚å¿µ"></a>æ³›å‹çš„æ¦‚å¿µ</h2><p>å…è®¸åœ¨å®šä¹‰ç±»ã€æ¥å£æ—¶é€šè¿‡ä¸€ä¸ªæ ‡è¯†è¡¨ç¤ºç±»ä¸­æŸä¸ªå±æ€§çš„ç±»å‹æˆ–è€…æ˜¯æŸä¸ªæ–¹æ³•çš„è¿”å›å€¼åŠå‚æ•°ç±»å‹ã€‚</p><ul><li>ç±»å‹çš„å‚æ•°åŒ–ï¼Œå°±æ˜¯å¯ä»¥æŠŠç±»å‹åƒæ–¹æ³•çš„å‚æ•°é‚£æ ·ä¼ é€’ã€‚</li><li>æ³›å‹ä½¿ç¼–è¯‘å™¨å¯ä»¥åœ¨ç¼–è¯‘æœŸé—´å¯¹ç±»å‹è¿›è¡Œæ£€æŸ¥ä»¥æé«˜ç±»å‹å®‰å…¨ï¼Œå‡å°‘è¿è¡Œæ—¶ç”±äºå¯¹è±¡ç±»å‹ä¸åŒ¹é…å¼•å‘çš„å¼‚å¸¸ã€‚</li></ul><pre class=" language-java"><code class="language-java">    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        ArrayList<span class="token operator">&lt;</span>Integer<span class="token operator">></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span>Integer<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">222</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">333</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//        for (Integer num:list){</span><span class="token comment" spellcheck="true">//            System.out.println(num);</span><span class="token comment" spellcheck="true">//        }</span>        Iterator<span class="token operator">&lt;</span>Integer<span class="token operator">></span> iterator <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Integer<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Integer<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"Tony"</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"Troye"</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"Taylor"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Set<span class="token operator">&lt;</span>Map<span class="token punctuation">.</span>Entry<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Integer<span class="token operator">>></span> entries <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Iterator<span class="token operator">&lt;</span>Map<span class="token punctuation">.</span>Entry<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Integer<span class="token operator">>></span> iterator <span class="token operator">=</span> entries<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            Map<span class="token punctuation">.</span>Entry<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Integer<span class="token operator">></span> entry <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>entry <span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"-----"</span><span class="token operator">+</span>entry <span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h2 id="List-lt-gt-ã€List-lt-extends-T-gt-ä¸-List-lt-super-T-gt"><a href="#List-lt-gt-ã€List-lt-extends-T-gt-ä¸-List-lt-super-T-gt" class="headerlink" title="List&lt;?&gt;ã€List&lt;? extends T&gt; ä¸ List&lt;? super T&gt;"></a>List&lt;?&gt;ã€List&lt;? extends T&gt; ä¸ List&lt;? super T&gt;</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test3</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        List list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">"aaa"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Object o <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// List&lt;?> å…è®¸getå…ƒç´ ï¼Œä¸å…è®¸æ·»åŠ å…ƒç´ </span>        List<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> list1 <span class="token operator">=</span> list<span class="token punctuation">;</span>        list1<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list1<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// list1.add(new String("bbb"));</span>        Object o1 <span class="token operator">=</span> list1<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list1<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span>println<span class="token punctuation">)</span><span class="token punctuation">;</span>        ArrayList<span class="token operator">&lt;</span>Person<span class="token operator">></span> persons <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        persons<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        persons<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Male</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        persons<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Female</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// List&lt;? extends Person> å…è®¸getå…ƒç´ ï¼Œä¸å…è®¸æ·»åŠ å…ƒç´ </span>        List<span class="token operator">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span><span class="token operator">></span> persons1 <span class="token operator">=</span> persons<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// persons1.add(new Person());</span>        <span class="token comment" spellcheck="true">// persons1.add(new Male());</span>        <span class="token comment" spellcheck="true">// persons1.add(new Female());</span>        Person person <span class="token operator">=</span> persons1<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// List&lt;? super Person> å…è®¸æ·»åŠ å…ƒç´ ï¼Œä¸å…è®¸getå…ƒç´ </span>        List<span class="token operator">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> Person<span class="token operator">></span> persons2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span>Person<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        persons2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Male</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        persons2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Female</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        persons2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// Person person = persons2.get(0);</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é›†åˆ</title>
      <link href="2020/03/02/java-06/"/>
      <url>2020/03/02/java-06/</url>
      
        <content type="html"><![CDATA[<h1 id="é›†åˆä¸æ•°ç»„"><a href="#é›†åˆä¸æ•°ç»„" class="headerlink" title="é›†åˆä¸æ•°ç»„"></a>é›†åˆä¸æ•°ç»„</h1><p><strong>æ•°ç»„ï¼š</strong><br>1.ä¸€æ—¦åˆå§‹åŒ–ï¼Œé•¿åº¦å°±ä¸å¯ä¿®æ”¹äº†ï¼›<br>2.ä¸€æ—¦å®šä¹‰åï¼Œå°±åªèƒ½æ“ä½œæŒ‡å®šç±»å‹çš„æ•°æ®äº†ï¼›<br>3.æ•°ç»„æä¾›çš„æ–¹æ³•éå¸¸æœ‰é™ï¼Œä¸”æ•ˆç‡ä¸é«˜ï¼›<br>4.è·å–æ•°ç»„ä¸­å®é™…å…ƒç´ çš„ä¸ªæ•°ï¼Œæ²¡æœ‰ç°æˆçš„å±æ€§å’Œæ–¹æ³•å¯è°ƒç”¨ï¼›<br>5.å­˜å‚¨ç‰¹ç‚¹ï¼šæœ‰åºï¼Œå¯é‡å¤ã€‚<br><strong>é›†åˆï¼š</strong>Javaé›†åˆåˆ†ä¸ºCollectionå’ŒMapä¸¤ç§ä½“ç³»<br><img src="/2020/03/02/java-06/1.jpg" alt><br><strong>Collectionæ¥å£ï¼š</strong>å•åˆ—æ•°æ®ï¼Œå­˜å‚¨ä¸€ä¸ªä¸€ä¸ªçš„å¯¹è±¡<br>&lt;1&gt; Listæ¥å£ï¼šå…ƒç´ æœ‰åºï¼Œå¯é‡å¤<br>å®ç°ç±»ï¼š<br>ArrayListï¼Œä½œä¸ºListæ¥å£çš„ä¸»è¦å®ç°ç±»ï¼›çº¿ç¨‹ä¸å®‰å…¨ï¼Œæ•ˆç‡é«˜ï¼›åº•å±‚ä½¿ç”¨Object[] elementDataå­˜å‚¨<br>LinkedListï¼Œå¯¹äºé¢‘ç¹æ’å…¥ï¼Œåˆ é™¤æ•ˆç‡è¾ƒé«˜ï¼›åº•å±‚ä½¿ç”¨åŒå‘é“¾è¡¨å‚¨å­˜<br>Vectorï¼Œä½œä¸ºListæ¥å£çš„å¤è€å®ç°ç±»ï¼›çº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡ä½ï¼›åº•å±‚ä½¿ç”¨Object[] elementDataå­˜å‚¨<br>&lt;2&gt; Setæ¥å£ï¼šå…ƒç´ æ— åºï¼Œä¸å¯é‡å¤<br>å®ç°ç±»ï¼š<br>HashSetï¼Œä½œä¸ºSetæ¥å£çš„ä¸»è¦å®ç°ç±»ï¼›çº¿ç¨‹ä¸å®‰å…¨ï¼›å¯ä»¥å­˜å‚¨null<br>LinkedHashSetï¼ŒHashSetçš„å­ç±»ï¼›éå†æ—¶å¯ä»¥æŒ‰ç…§æ·»åŠ çš„é¡ºåºéå†ï¼›å¯¹äºé¢‘ç¹éå†æ•ˆç‡è¾ƒé«˜<br>TreeSetï¼Œè¦æ±‚æ•°æ®æ˜¯åŒä¸€ä¸ªç±»å‹ï¼Œå¯æŒ‰ç…§å¯¹è±¡çš„æŒ‡å®šå±æ€§è¿›è¡Œæ’åº<br><strong>Mapæ¥å£ï¼š</strong>åŒåˆ—æ•°æ®ï¼Œå­˜å‚¨å…·æœ‰æ˜ å°„å…³ç³»â€key - valueå¯¹â€œ<br>å®ç°ç±»ï¼š<br>HashMapï¼Œä½œä¸ºMapçš„ä¸»è¦å®ç°ç±»ï¼›çº¿ç¨‹ä¸å®‰å…¨ï¼Œæ•ˆç‡é«˜ï¼›èƒ½å­˜å‚¨nullçš„é”®å€¼å¯¹<br>        -&gt; LinkedHashMapï¼Œä¿è¯åœ¨éå†å…ƒç´ æ—¶ï¼Œå¯ä»¥æŒ‰ç…§æ·»åŠ é¡ºåºè¿›è¡Œéå†ï¼›å¯¹äºé¢‘ç¹éå†æ•ˆç‡è¾ƒé«˜<br>        -&gt;åŸå› ï¼šåœ¨åŸæœ‰çš„HashMapåº•å±‚ç»“æ„åŸºç¡€ä¸Šï¼Œæ·»åŠ äº†ä¸€å¯¹æŒ‡é’ˆï¼ŒæŒ‡å‘å‰ã€åçš„å…ƒç´ ã€‚<br>TreeMapï¼ŒæŒ‰ç…§æ·»åŠ çš„key-valueè¿›è¡Œæ’åºï¼›åº•å±‚é‡‡ç”¨çº¢é»‘æ ‘<br>Hashtableï¼Œä½œä¸ºMapçš„å¤è€å®ç°ç±»ï¼›çº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡ä½ï¼›ä¸èƒ½å­˜å­˜å‚¨nullçš„é”®å€¼å¯¹<br>       -&gt; Propertiesï¼Œå¸¸ç”¨æ¥å¤„ç†é…ç½®æ–‡ä»¶ã€‚keyå’Œvalueéƒ½æ˜¯Stringç±»å‹</p><h2 id="Collectionæ¥å£ä¸­çš„æ–¹æ³•"><a href="#Collectionæ¥å£ä¸­çš„æ–¹æ³•" class="headerlink" title="Collectionæ¥å£ä¸­çš„æ–¹æ³•"></a>Collectionæ¥å£ä¸­çš„æ–¹æ³•</h2><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        Collection coll1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// add(Object e) å°†å…ƒç´ eæ·»åŠ åˆ°é›†åˆä¸­</span>        coll1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"aaa"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        coll1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//è‡ªåŠ¨è£…ç®±</span>        coll1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// size() è·å–æ·»åŠ å…ƒç´ çš„ä¸ªæ•°</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>coll1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 3</span>        <span class="token comment" spellcheck="true">// addAll(Collection coll) å°†collçš„æ‰€æœ‰å…ƒç´ æ·»åŠ åˆ°å½“å‰é›†åˆä¸­</span>        Collection coll2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        coll2<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>coll1<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>coll2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è‡ªåŠ¨è°ƒç”¨toString() [aaa, 123, Wed Mar 04 15:58:00 CST 2020]</span>        <span class="token comment" spellcheck="true">// isEmpty() åˆ¤æ–­å½“å‰é›†åˆæ˜¯å¦ä¸ºç©º</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>coll1<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// false</span>        <span class="token comment" spellcheck="true">// clear() æ¸…ç©ºé›†åˆå…ƒç´ </span>        coll1<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>coll1<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>        <span class="token comment" spellcheck="true">// contains(Object e) æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ </span>        <span class="token comment" spellcheck="true">// ä¼šè°ƒç”¨objç±»å¯¹è±¡çš„equals()</span>        Collection coll3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        coll3<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        coll3<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        coll3<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>coll3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// [1, abc, hello]</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>coll3<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>        <span class="token comment" spellcheck="true">// containAll(Collection coll) åˆ¤æ–­å½¢å‚collä¸­æ‰€æœ‰çš„å…ƒç´ æ˜¯å¦åœ¨å½“å‰é›†åˆä¸­</span>        Collection coll4 <span class="token operator">=</span> Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>coll3<span class="token punctuation">.</span><span class="token function">containsAll</span><span class="token punctuation">(</span>coll4<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        Collection coll1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        coll1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        coll1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        coll1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        coll1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>coll1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// [1, 2, 3, abc]</span>        <span class="token comment" spellcheck="true">// remove(Object e)</span>        coll1<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>coll1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// [1, 2, 3]</span>        <span class="token comment" spellcheck="true">// removeAll(Collection coll) ä»å½“å‰é›†åˆä¸­ç§»é™¤collä¸­æ‰€æœ‰çš„å…ƒç´ </span>        Collection coll2 <span class="token operator">=</span> Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        coll1<span class="token punctuation">.</span><span class="token function">removeAll</span><span class="token punctuation">(</span>coll2<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>coll1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// [3]</span>        <span class="token comment" spellcheck="true">// retainAll(Collection coll) è¿”å›äº¤é›†</span>        Collection coll3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        coll3<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        coll3<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Collection coll4 <span class="token operator">=</span> Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        coll3<span class="token punctuation">.</span><span class="token function">retainAll</span><span class="token punctuation">(</span>coll4<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>coll3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// [1, 2]</span>        <span class="token comment" spellcheck="true">// toArray() é›†åˆ->æ•°ç»„</span>        <span class="token comment" spellcheck="true">// æ•°ç»„->é›†åˆ Arrays.asList()</span>    <span class="token punctuation">}</span></code></pre><h3 id="è¿­ä»£å™¨Iteratoræ¥å£"><a href="#è¿­ä»£å™¨Iteratoræ¥å£" class="headerlink" title="è¿­ä»£å™¨Iteratoræ¥å£"></a>è¿­ä»£å™¨Iteratoræ¥å£</h3><pre class=" language-java"><code class="language-java"> <span class="token annotation punctuation">@Test</span>  <span class="token comment" spellcheck="true">//é›†åˆå…ƒç´ çš„éå†ï¼Œè°ƒç”¨è¿­ä»£å™¨Iteratoræ¥å£</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        Collection coll1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        coll1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        coll1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        coll1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å®ä¾‹åŒ–è¿­ä»£å™¨å¯¹è±¡</span>        Iterator iterator <span class="token operator">=</span> coll1<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//        for (int i = 0; i &lt; coll1.size(); i++) {</span><span class="token comment" spellcheck="true">//            System.out.println( iterator.next());</span><span class="token comment" spellcheck="true">//        }</span>        <span class="token comment" spellcheck="true">// èµ·å§‹æŒ‡é’ˆä½äºç¬¬ä¸€ä¸ªå…ƒç´ ä¹‹å‰</span>        <span class="token comment" spellcheck="true">// hasNext() åˆ¤æ–­æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ </span>        <span class="token comment" spellcheck="true">// next() æŒ‡é’ˆä¸‹ç§»ï¼Œå°†ä¸‹ç§»ä»¥åçš„é›†åˆä½ç½®ä¸Šçš„å…ƒç´ è¿”å›</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            Object obj <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                iterator<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        iterator <span class="token operator">=</span> coll1<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="foreachå¾ªç¯"><a href="#foreachå¾ªç¯" class="headerlink" title="foreachå¾ªç¯"></a>foreachå¾ªç¯</h3><pre class=" language-java"><code class="language-java">   <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        Collection coll1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        coll1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        coll1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        coll1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        coll1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ä½¿ç”¨foreachè¿›è¡Œéå†  for(é›†åˆå…ƒç´ ç±»å‹ å±€éƒ¨å˜é‡ : é›†åˆå¯¹è±¡)</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>Object obj<span class="token operator">:</span>coll1<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">//å°†coll1çš„å…ƒç´ ä¾æ¬¡å–å‡ºå¹¶èµ‹ç»™obj</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token operator">:</span>arr1<span class="token punctuation">)</span> <span class="token punctuation">{</span>            a <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token comment" spellcheck="true">// å¯¹åŸæ•°ç»„æ²¡æœ‰å½±å“</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr1<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            arr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token comment" spellcheck="true">// å¯¹åŸæ•°ç»„çš„å€¼è¿›è¡Œä¿®æ”¹</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr1<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>arr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h3 id="Listå¸¸ç”¨æ–¹æ³•"><a href="#Listå¸¸ç”¨æ–¹æ³•" class="headerlink" title="Listå¸¸ç”¨æ–¹æ³•"></a>Listå¸¸ç”¨æ–¹æ³•</h3><pre class=" language-java"><code class="language-java"> <span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">//Listå¸¸ç”¨æ–¹æ³•</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// void add(int index, Object ele):åœ¨indexä½ç½®æ’å…¥eleå…ƒç´ </span>    <span class="token comment" spellcheck="true">// boolean addAll(int index, Collection eles):ä»indexä½ç½®å¼€å§‹å°†elesä¸­ çš„æ‰€æœ‰å…ƒç´ æ·»åŠ è¿›æ¥</span>    <span class="token comment" spellcheck="true">// Object get(int index):è·å–æŒ‡å®šindexä½ç½®çš„å…ƒç´ </span>        ArrayList list1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          list1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list1<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 2</span>    <span class="token comment" spellcheck="true">// int indexOf(Object obj):è¿”å›objåœ¨é›†åˆä¸­é¦–æ¬¡å‡ºç°çš„ä½ç½®</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list1<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 3</span>    <span class="token comment" spellcheck="true">// int lastIndexOf(Object obj):è¿”å›objåœ¨å½“å‰é›†åˆä¸­æœ«æ¬¡å‡ºç°çš„ä½ç½®</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list1<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 4</span>    <span class="token comment" spellcheck="true">// Object remove(int index):ç§»é™¤æŒ‡å®šindexä½ç½®çš„å…ƒç´ ï¼Œå¹¶è¿”å›æ­¤å…ƒç´ </span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åˆ é™¤ç´¢å¼•ä¸º2çš„å…ƒç´ :"</span><span class="token operator">+</span>list1<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// åˆ é™¤ç´¢å¼•ä¸º2çš„å…ƒç´ :3</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// [1, 2, 4, 3]</span>    <span class="token comment" spellcheck="true">// Object set(int index, Object ele):è®¾ç½®æŒ‡å®šindexä½ç½®çš„å…ƒç´ ä¸ºele</span>        list1<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//[1, 5, 4, 3]</span>    <span class="token comment" spellcheck="true">// List subList(int fromIndex, int toIndex):è¿”å›ä»fromIndexåˆ°toIndex ä½ç½®çš„å­é›†åˆ</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list1<span class="token punctuation">.</span><span class="token function">subList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// [5, 4, 3]</span>    <span class="token punctuation">}</span></code></pre><h3 id="LinkedListçš„å¯é¡ºåºéå†æ€§"><a href="#LinkedListçš„å¯é¡ºåºéå†æ€§" class="headerlink" title="LinkedListçš„å¯é¡ºåºéå†æ€§"></a>LinkedListçš„å¯é¡ºåºéå†æ€§</h3><pre class=" language-java"><code class="language-java">  <span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// LinkedListå¯æŒ‰é¡ºåºè¿›è¡Œéå†  ä½¿ç”¨foreachéå†</span>    <span class="token comment" spellcheck="true">// LinkedListå¯¹æ•°æ®è¿›è¡Œå‚¨å­˜æ—¶æ·»åŠ äº†ä¸¤ä¸ªå¼•ç”¨ï¼Œç”¨äºè®°å½•å‰ä¸€ä¸ªå…ƒç´ å’Œåä¸€ä¸ªå…ƒç´ çš„ä½ç½®ï¼Œ</span>    <span class="token comment" spellcheck="true">// å› æ­¤å¯æŒ‰å…ƒç´ çš„æ·»åŠ é¡ºåºè¿›è¡Œéå†ï¼Œå¹¶ä¸”å¯¹é¢‘ç¹çš„éå†æ•ˆç‡è¾ƒé«˜</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        LinkedList linkedList1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        linkedList1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1111</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        linkedList1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2222</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        linkedList1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3333</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span>Object obj <span class="token operator">:</span> linkedList1<span class="token punctuation">)</span><span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 1111 2222 3333</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="Setå¸¸ç”¨æ–¹æ³•"><a href="#Setå¸¸ç”¨æ–¹æ³•" class="headerlink" title="Setå¸¸ç”¨æ–¹æ³•"></a>Setå¸¸ç”¨æ–¹æ³•</h3><p>HashSetå¹¶æ²¡æœ‰æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œæ²¿ç”¨Collectionçš„æ–¹æ³•</p><h3 id="HashSetçš„æ·»åŠ "><a href="#HashSetçš„æ·»åŠ " class="headerlink" title="HashSetçš„æ·»åŠ "></a>HashSetçš„æ·»åŠ </h3><p>å‘Setä¸­æ·»åŠ æ•°æ®ä¸€å®šè¦é‡å†™hashCode()å’Œequals()æ–¹æ³•ï¼Œç›¸ç­‰çš„å¯¹è±¡å¿…é¡»å…·æœ‰ç›¸åŒçš„æ•£åˆ—ç </p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// HashSet æ— åºæ€§  ä½¿ç”¨è¿­ä»£å™¨éå†</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// æ— åºæ€§ï¼šä¸ç­‰äºéšæœºæ€§ï¼Œå­˜å‚¨çš„æ•°æ®åœ¨åº•å±‚æ•°ç»„ä¸­å¹¶éæŒ‰ç…§æ•°ç»„ç´¢å¼•çš„é¡ºåºæ·»åŠ ï¼Œè€Œæ˜¯æ ¹æ®æ•°æ®çš„å“ˆå¸Œå€¼</span>        <span class="token comment" spellcheck="true">// ä¸å¯é‡å¤æ€§ï¼šä¿è¯æ·»åŠ çš„å…ƒç´ æŒ‰equals()è¿›è¡Œåˆ¤æ–­æ—¶ï¼Œä¸èƒ½è¿”å›true</span>        <span class="token comment" spellcheck="true">/*        æ·»åŠ å…ƒç´ çš„è¿‡ç¨‹ï¼š        å‘HashSetä¸­æ·»åŠ å…ƒç´ a,é¦–å…ˆè°ƒç”¨å…ƒç´ aæ‰€åœ¨ç±»çš„hashCode(),è®¡ç®—å…ƒç´ açš„å“ˆå¸Œå€¼,        æ­¤å“ˆå¸Œå€¼ä¸æ•°ç»„é•¿åº¦-1åšä¸è¿ç®—ï¼Œè®¡ç®—å‡ºåœ¨HashSetåº•å±‚æ•°ç»„ä¸­çš„å­˜æ”¾ä½ç½®,åˆ¤æ–­æ­¤ä½ç½®ä¸Šæ˜¯å¦æœ‰å…¶ä»–å…ƒç´ ï¼š            å¦‚æœæ­¤ä½ç½®æ²¡æœ‰å…¶ä»–å…ƒç´ ï¼Œåˆ™å…ƒç´ aæ·»åŠ æˆåŠŸ            å¦‚æœæ­¤ä½ç½®ä¸Šæœ‰å…ƒç´ b(æˆ–ä»¥é“¾è¡¨å½¢å¼å­˜åœ¨çš„å¤šä¸ªå…ƒç´ ),åˆ™æ¯”è¾ƒa,bçš„å“ˆå¸Œå€¼ï¼š                å¦‚æœå“ˆå¸Œå€¼ä¸ç›¸åŒï¼Œåˆ™å…ƒç´ aæ·»åŠ æˆåŠŸ(ä»¥é“¾è¡¨å½¢å¼,å…ƒç´ aæŒ‡å‘åŸæ¥çš„å…ƒç´ ï¼Œå¹¶å–ä»£åŸæ¥å…ƒç´ çš„ä½ç½®;jdk8:é‡‡ç”¨çº¢é»‘æ ‘ï¼ˆæŸ¥æ‰¾é€Ÿåº¦å¿«ï¼‰)                å¦‚æœå“ˆå¸Œå€¼ç›¸åŒï¼Œè¿›è€Œè°ƒç”¨å…ƒç´ aæ‰€åœ¨ç±»çš„equals()ï¼š                    equals()è¿”å›true,åˆ™å…ƒç´ aæ·»åŠ å¤±è´¥                    equals()è¿”å›false,åˆ™æ·»åŠ æˆåŠŸ         */</span>        HashSet set1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        set1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        set1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">222</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        set1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">333</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Iterator iterator <span class="token operator">=</span> set1<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 333 222 111</span>    <span class="token punctuation">}</span></code></pre><h3 id="TreeSetæŒ‰æŒ‡å®šå±æ€§è¿›è¡Œæ’åº"><a href="#TreeSetæŒ‰æŒ‡å®šå±æ€§è¿›è¡Œæ’åº" class="headerlink" title="TreeSetæŒ‰æŒ‡å®šå±æ€§è¿›è¡Œæ’åº"></a>TreeSetæŒ‰æŒ‡å®šå±æ€§è¿›è¡Œæ’åº</h3><pre class=" language-java"><code class="language-java"> <span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">//TreeSetæŒ‰æŒ‡å®šå±æ€§éå†</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        TreeSet treeSet1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æŒ‰å¤§å°æ’åºè¾“å‡º</span>        treeSet1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        treeSet1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        treeSet1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Iterator iterator <span class="token operator">=</span> treeSet1<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token comment" spellcheck="true">// -1 0 1</span>        TreeSet treeSet2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        treeSet2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"Tom"</span><span class="token punctuation">,</span><span class="token string">"male"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        treeSet2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"Taylor"</span><span class="token punctuation">,</span><span class="token string">"female"</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        treeSet2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"Troye"</span><span class="token punctuation">,</span><span class="token string">"male"</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        treeSet2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"Justin"</span><span class="token punctuation">,</span><span class="token string">"male"</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Iterator iterator2 <span class="token operator">=</span> treeSet2<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>iterator2<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>iterator2<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p>Personç±»å®ç°Comparableæ¥å£å¹¶é‡å†™toCompare()æ–¹æ³•</p><pre class=" language-java"><code class="language-java"> <span class="token annotation punctuation">@Override</span> <span class="token comment" spellcheck="true">// æŒ‰ç…§å¹´é¾„æ’åº</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compareTo</span><span class="token punctuation">(</span>Object o<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            Person person <span class="token operator">=</span> <span class="token punctuation">(</span>Person<span class="token punctuation">)</span>o<span class="token punctuation">;</span>            <span class="token keyword">int</span> compare <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">-</span>person<span class="token punctuation">.</span>age<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä»å°åˆ°å¤§</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>compare<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">// å¹´é¾„ç›¸åŒåˆ™æŒ‰å§“åè¿›è¡Œæ’åº</span>               <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span><span class="token punctuation">{</span>                <span class="token keyword">return</span> compare<span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">else</span><span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¾“å…¥ç±»å‹ä¸åŒ¹é…"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p>è¾“å‡ºç»“æœï¼š<br>                        <img src="/2020/03/02/java-06/result.png" alt></p><hr><p>ä½¿ç”¨å®šåˆ¶æ’åº</p><pre class=" language-java"><code class="language-java">    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//å®šåˆ¶æ’åº</span>        <span class="token comment" spellcheck="true">// å®ä¾‹åŒ–Comparatorç±»</span>        Comparator comparator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Comparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span>Object o1<span class="token punctuation">,</span> Object o2<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>o1 <span class="token keyword">instanceof</span> <span class="token class-name">Person</span> <span class="token operator">&amp;&amp;</span> o1 <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>Person<span class="token punctuation">)</span> o1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Person<span class="token punctuation">)</span>o2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">else</span><span class="token punctuation">{</span>                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"ä¼ å…¥å‚æ•°é”™è¯¯"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>        TreeSet treeSet2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token punctuation">(</span>comparator<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä¼ å…¥comparatorå‚æ•°</span>        treeSet2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"Tom"</span><span class="token punctuation">,</span><span class="token string">"male"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        treeSet2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"Taylor"</span><span class="token punctuation">,</span><span class="token string">"female"</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        treeSet2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"Troye"</span><span class="token punctuation">,</span><span class="token string">"male"</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        treeSet2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"Justin"</span><span class="token punctuation">,</span><span class="token string">"male"</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Iterator iterator2 <span class="token operator">=</span> treeSet2<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>iterator2<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>iterator2<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h2 id="Listä¸æ•°ç»„ä¹‹é—´çš„ç›¸äº’è½¬æ¢å’Œéå†"><a href="#Listä¸æ•°ç»„ä¹‹é—´çš„ç›¸äº’è½¬æ¢å’Œéå†" class="headerlink" title="Listä¸æ•°ç»„ä¹‹é—´çš„ç›¸äº’è½¬æ¢å’Œéå†"></a>Listä¸æ•°ç»„ä¹‹é—´çš„ç›¸äº’è½¬æ¢å’Œéå†</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test1</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Integer<span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ•°ç»„è½¬é›†åˆ</span>        <span class="token comment" spellcheck="true">/**         * Arrays.asList(arr) è¿”å›çš„ä¸æ˜¯çœŸæ­£çš„ ArrayList è€Œæ˜¯ Arraysä¸­çš„ä¸€ä¸ªå†…éƒ¨ç±»         */</span>        ArrayList<span class="token operator">&lt;</span>Integer<span class="token operator">></span> arrToList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span>Integer<span class="token operator">></span><span class="token punctuation">(</span>Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>arrToList<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// [1, 2, 3, 4, 5]</span>        <span class="token comment" spellcheck="true">/**         * éå†æ–¹å¼         */</span>        <span class="token comment" spellcheck="true">// forEach éå†</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> num <span class="token operator">:</span> arrToList<span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// java8å‡½æ•°å¼æ¥å£éå†</span>        arrToList<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span>println<span class="token punctuation">)</span><span class="token punctuation">;</span>        arrToList<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>num <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// é›†åˆè½¬æ•°ç»„</span>        ArrayList<span class="token operator">&lt;</span>Integer<span class="token operator">></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// åˆå§‹åŒ–æ•°ç»„ï¼ŒæŒ‡å®šç±»å‹ï¼Œé˜²æ­¢æ³›å‹ä¸¢å¤±</span>        Integer<span class="token punctuation">[</span><span class="token punctuation">]</span> listToArr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">[</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ä½¿ç”¨æœ‰å‚æ•°çš„toArray(T[] a)</span>        arrToList<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span>listToArr<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Arrays<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>listToArr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// [1, 2, 3, 4, 5]</span>        <span class="token comment" spellcheck="true">// éå†</span>        Arrays<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>listToArr<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span>println<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="Mapæ¥å£"><a href="#Mapæ¥å£" class="headerlink" title="Mapæ¥å£"></a>Mapæ¥å£</h2><p><strong>Mapçš„ç»“æ„ï¼š</strong><br>Mapä¸­çš„keyï¼šæ— åºï¼Œä¸å¯é‡å¤ï¼Œä½¿ç”¨Setå‚¨å­˜æ‰€æœ‰çš„keyï¼Œkeyæ‰€åœ¨çš„ç±»è¦é‡å†™equals()å’Œ hashCode()<br>Mapä¸­çš„valueï¼šæ— åºï¼Œå¯é‡å¤ï¼Œä½¿ç”¨Listå­˜å‚¨æ‰€æœ‰çš„valueï¼Œvalueæ‰€åœ¨ç±»è¦é‡å†™equals()<br>ä¸€ä¸ªé”®å€¼å¯¹æ„æˆä¸€ä¸ªentryå¯¹è±¡<br>Mapä¸­çš„entryï¼šæ— åºï¼Œä¸å¯é‡å¤ï¼Œä½¿ç”¨Setå‚¨å­˜æ‰€æœ‰çš„entry<br><strong>HashMapçš„åº•å±‚å®ç°åŸç†ï¼š</strong><br>HashMap map = new HashMap();<br>å®ä¾‹åŒ–åï¼Œåº•å±‚åˆ›å»ºäº†ä¸€ä¸ªé•¿åº¦ä¸º16çš„ä¸€ç»´æ•°ç»„Entry[] table<br>map.put(key1,value1);<br>åœ¨jdk7ä¸­ï¼Œé¦–å…ˆè°ƒç”¨key1æ‰€åœ¨ç±»çš„hashCode()è®¡ç®—keyçš„å“ˆå¸Œå€¼ï¼Œæ­¤å“ˆå¸Œå€¼é€šè¿‡æŸç§ç®—æ³•åï¼Œå¾—åˆ°åœ¨Entryæ•°ç»„ä¸­çš„å­˜æ”¾ä½ç½®ï¼›<br>å¦‚æœæ­¤ä½ç½®ä¸ºç©ºï¼Œåˆ™æ·»åŠ æˆåŠŸï¼Œ<br>å¦åˆ™å°†key1çš„å“ˆå¸Œå€¼ä¸æ­¤ä½ç½®ä¸Šçš„ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ (key2,value2)çš„å“ˆå¸Œå€¼æ¯”è¾ƒï¼Œ<br>å¦‚æœå“ˆå¸Œå€¼ä¸åŒï¼Œåˆ™æ·»åŠ æˆåŠŸ,<br>å¦åˆ™è°ƒç”¨key1æ‰€åœ¨ç±»çš„equals()ï¼Œå¦‚æœè¿”å›falseï¼Œåˆ™æ·»åŠ æˆåŠŸï¼Œå¦åˆ™ä½¿ç”¨value1æ›¿æ¢value2ã€‚<br>æ¶‰åŠåˆ°æ‰©å®¹æ—¶ï¼Œå®¹é‡æ‰©å¤§ä¸ºåŸæ¥çš„2å€ï¼ŒåŸæœ‰çš„æ•°æ®å…¨éƒ¨è¢«å¤åˆ¶è¿‡æ¥ã€‚</p><p>åœ¨jdk8ä¸­ï¼Œæ²¡æœ‰é©¬ä¸Šå°±åˆ›å»ºæ•°ç»„ï¼Œè€Œæ˜¯åœ¨put()æ—¶åˆ›å»ºNode[]æ•°ç»„</p><h3 id="Mapæ¥å£ä¸­çš„æ–¹æ³•"><a href="#Mapæ¥å£ä¸­çš„æ–¹æ³•" class="headerlink" title="Mapæ¥å£ä¸­çš„æ–¹æ³•"></a>Mapæ¥å£ä¸­çš„æ–¹æ³•</h3><pre class=" language-java"><code class="language-java">  <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">//  æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹æ“ä½œï¼š</span><span class="token comment" spellcheck="true">// Object put(Object key,Object value)ï¼šå°†æŒ‡å®škey-valueæ·»åŠ åˆ°(æˆ–ä¿®æ”¹)å½“å‰mapå¯¹è±¡ä¸­</span>        HashMap map1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map1<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map1<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"B"</span><span class="token punctuation">,</span><span class="token number">222</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map1<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"C"</span><span class="token punctuation">,</span><span class="token number">333</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// {A=111, B=222, C=333}</span><span class="token comment" spellcheck="true">// void putAll(Map m):å°†mä¸­çš„æ‰€æœ‰key-valueå¯¹å­˜æ”¾åˆ°å½“å‰mapä¸­</span>        HashMap map2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map2<span class="token punctuation">.</span><span class="token function">putAll</span><span class="token punctuation">(</span>map1<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// {A=111, B=222, C=333}</span><span class="token comment" spellcheck="true">// Object remove(Object key)ï¼šç§»é™¤æŒ‡å®škeyçš„key-valueå¯¹ï¼Œå¹¶è¿”å›value</span>        Object a <span class="token operator">=</span> map2<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 111</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// {B=222, C=333}</span><span class="token comment" spellcheck="true">// void clear()ï¼šæ¸…ç©ºå½“å‰mapä¸­çš„æ‰€æœ‰æ•°æ®</span>        map2<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// {}</span><span class="token comment" spellcheck="true">// å…ƒç´ æŸ¥è¯¢çš„æ“ä½œï¼š</span><span class="token comment" spellcheck="true">// Object get(Object key)ï¼šè·å–æŒ‡å®škeyå¯¹åº”çš„value</span>        Object b <span class="token operator">=</span> map1<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 222</span><span class="token comment" spellcheck="true">// boolean containsKey(Object key)ï¼šæ˜¯å¦åŒ…å«æŒ‡å®šçš„key</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map1<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span><span class="token string">"D"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// false</span><span class="token comment" spellcheck="true">// boolean containsValue(Object value)ï¼šæ˜¯å¦åŒ…å«æŒ‡å®šçš„value</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map1<span class="token punctuation">.</span><span class="token function">containsValue</span><span class="token punctuation">(</span><span class="token number">222</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span><span class="token comment" spellcheck="true">// int size()ï¼šè¿”å›mapä¸­key-valueå¯¹çš„ä¸ªæ•°</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map2<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 0</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 4</span><span class="token comment" spellcheck="true">// boolean isEmpty()ï¼šåˆ¤æ–­å½“å‰mapæ˜¯å¦ä¸ºç©º</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map2<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span><span class="token comment" spellcheck="true">// boolean equals(Object obj)ï¼šåˆ¤æ–­å½“å‰mapå’Œå‚æ•°å¯¹è±¡objæ˜¯å¦ç›¸ç­‰</span><span class="token comment" spellcheck="true">// å…ƒè§†å›¾æ“ä½œçš„æ–¹æ³•ï¼š</span><span class="token comment" spellcheck="true">// Set keySet()ï¼šè¿”å›æ‰€æœ‰keyæ„æˆçš„Seté›†åˆ</span>        Set set1 <span class="token operator">=</span> map1<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Iterator iterator <span class="token operator">=</span> set1<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token comment" spellcheck="true">// A B C</span><span class="token comment" spellcheck="true">// Collection values()ï¼šè¿”å›æ‰€æœ‰valueæ„æˆçš„Collectioné›†åˆ</span>        Collection coll1 <span class="token operator">=</span> map1<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Iterator iterator1 <span class="token operator">=</span> coll1<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>iterator1<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>iterator1<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 111 222 333</span><span class="token comment" spellcheck="true">// Set entrySet()ï¼šè¿”å›æ‰€æœ‰key-valueå¯¹æ„æˆçš„Seté›†åˆ</span>        Set set2 <span class="token operator">=</span> map1<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>set2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// [A=111, B=222, C=333]</span>        Iterator iterator2 <span class="token operator">=</span> set2<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>iterator2<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            Object obj <span class="token operator">=</span> iterator2<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Map<span class="token punctuation">.</span>Entry entry <span class="token operator">=</span> <span class="token punctuation">(</span>Map<span class="token punctuation">.</span>Entry<span class="token punctuation">)</span> obj<span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token string">"==="</span><span class="token operator">+</span>entry<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><blockquote><p>é›†åˆåˆå§‹åŒ–æ—¶ï¼ŒæŒ‡å®šé›†åˆåˆå§‹å€¼å¤§å°ã€‚å¦‚æœæš‚æ—¶æ— æ³•ç¡®å®šé›†åˆå¤§å°ï¼Œé‚£ä¹ˆæŒ‡å®šç›¸åº”çš„é»˜è®¤å€¼ï¼Œè¿™ä¹Ÿè¦æ±‚æˆ‘ä»¬è®°å¾—å„ç§é›†åˆçš„é»˜è®¤å€¼å¤§å°ï¼Œ ArrayList å¤§å°ä¸º10 HashMap é»˜è®¤å€¼ä¸º 16 ã€‚</p><p>åœ¨HashMapä¸­initialCapacity = (éœ€è¦å­˜å‚¨çš„å…ƒç´ ä¸ªæ•° / è´Ÿè½½å› å­) + 1ã€‚æ³¨æ„è´Ÿè½½å› å­ï¼ˆå³ loader factorï¼‰é»˜è®¤ä¸º 0.75ã€‚</p><p>â€‹                                                                                                            â€”â€“æ¥è‡ªã€Šé˜¿é‡Œjavaå¼€å‘æ‰‹å†Œã€‹</p></blockquote><h1 id="é›†åˆå·¥å…·ç±»"><a href="#é›†åˆå·¥å…·ç±»" class="headerlink" title="é›†åˆå·¥å…·ç±»"></a>é›†åˆå·¥å…·ç±»</h1><pre class=" language-java"><code class="language-java">    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">// æ’åºæ“ä½œï¼šï¼ˆå‡ä¸ºstaticæ–¹æ³•ï¼‰</span><span class="token comment" spellcheck="true">// reverse(List)ï¼šåè½¬List ä¸­å…ƒç´ çš„é¡ºåº</span>        List list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">222</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">333</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">444</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// [111, 222, 333, 444]</span>        Collections<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// [444, 333, 222, 111]</span><span class="token comment" spellcheck="true">// shuffle(List)ï¼šå¯¹List é›†åˆå…ƒç´ è¿›è¡Œéšæœºæ’åº</span>        Collections<span class="token punctuation">.</span><span class="token function">shuffle</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// sort(List)ï¼šæ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºå¯¹æŒ‡å®šList é›†åˆå…ƒç´ æŒ‰å‡åºæ’åº</span>        Collections<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// [111, 222, 333, 444]</span><span class="token comment" spellcheck="true">// sort(Listï¼ŒComparator)ï¼šæ ¹æ®æŒ‡å®šçš„Comparator äº§ç”Ÿçš„é¡ºåºå¯¹List é›†åˆå…ƒç´ è¿›è¡Œæ’åº</span><span class="token comment" spellcheck="true">// swap(Listï¼Œintï¼Œint)ï¼šå°†æŒ‡å®šlist é›†åˆä¸­çš„i å¤„å…ƒç´ å’Œj å¤„å…ƒç´ è¿›è¡Œäº¤æ¢</span><span class="token comment" spellcheck="true">// æŸ¥æ‰¾ã€æ›¿æ¢</span><span class="token comment" spellcheck="true">// Object max(Collection)ï¼šæ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºï¼Œè¿”å›ç»™å®šé›†åˆä¸­çš„æœ€å¤§å…ƒç´ </span><span class="token comment" spellcheck="true">// Object max(Collectionï¼ŒComparator)ï¼šæ ¹æ®Comparator æŒ‡å®šçš„é¡ºåºï¼Œè¿”å›ç»™å®šé›†åˆä¸­çš„æœ€å¤§å…ƒç´ </span><span class="token comment" spellcheck="true">// Object min(Collection)</span><span class="token comment" spellcheck="true">// Object min(Collectionï¼ŒComparator)</span><span class="token comment" spellcheck="true">// int frequency(Collectionï¼ŒObject)ï¼šè¿”å›æŒ‡å®šé›†åˆä¸­æŒ‡å®šå…ƒç´ çš„å‡ºç°æ¬¡æ•°</span><span class="token comment" spellcheck="true">// void copy(List dest,List src)ï¼šå°†srcä¸­çš„å†…å®¹å¤åˆ¶åˆ°destä¸­</span><span class="token comment" spellcheck="true">// boolean replaceAll(List listï¼ŒObject oldValï¼ŒObject newVal)ï¼šä½¿ç”¨æ–°å€¼æ›¿æ¢List å¯¹è±¡çš„æ‰€æœ‰æ—§å€¼</span>    <span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaå¸¸ç”¨ç±»</title>
      <link href="2020/02/26/java-05/"/>
      <url>2020/02/26/java-05/</url>
      
        <content type="html"><![CDATA[<h2 id="å­—ç¬¦ä¸²ç›¸å…³ç±»ï¼šString"><a href="#å­—ç¬¦ä¸²ç›¸å…³ç±»ï¼šString" class="headerlink" title="å­—ç¬¦ä¸²ç›¸å…³ç±»ï¼šString"></a>å­—ç¬¦ä¸²ç›¸å…³ç±»ï¼šString</h2><p>1.Stringå£°æ˜ä¸ºfinalï¼Œä¸å¯è¢«ç»§æ‰¿ã€‚<br>2.å®ç°äº†Serializableæ¥å£ï¼šè¡¨ç¤ºå­—ç¬¦ä¸²æ˜¯æ”¯æŒåºåˆ—åŒ–çš„;<br>   å®ç°äº†Comparableæ¥å£ï¼šè¡¨ç¤ºStringæ˜¯å¯ä»¥æ¯”è¾ƒå¤§å°çš„ï¼›<br>3.Stringå†…éƒ¨å®šä¹‰äº†final char[]    value[]ç”¨äºå­˜å‚¨å­—ç¬¦ä¸²æ•°æ®ï¼›<br>4.Stringä»£è¡¨ä¸å¯å˜çš„å­—ç¬¦åºåˆ—ã€‚</p><ul><li><p>å½“å¯¹å­—ç¬¦ä¸²é‡æ–°èµ‹å€¼ï¼›</p></li><li><p>å¯¹ç°æœ‰å­—ç¬¦ä¸²è¿›è¡Œè¿æ¥æ“ä½œï¼›</p></li><li><p>å½“è°ƒç”¨replace()ä¿®æ”¹æŒ‡å®šå­—ç¬¦æˆ–å­—ç¬¦ä¸²æ—¶ï¼›<br>  <strong>éƒ½ä¼šé‡æ–°æŒ‡å®šå†…å­˜åŒºåŸŸè¿›è¡Œèµ‹å€¼ã€‚</strong></p></li></ul><p>5.é€šè¿‡å­—é¢é‡çš„æ–¹å¼ç»™ä¸€ä¸ªå­—ç¬¦ä¸²èµ‹å€¼ï¼Œæ­¤æ—¶å­—ç¬¦ä¸²çš„å€¼å£°æ˜åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ã€‚</p><p>åœ¨jdk1.6ä¹‹å‰ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± åœ¨JVMçš„æ–¹æ³•åŒºä¸­ï¼Œjdk1.7ä¹‹åç§»åˆ°äº†å †ä¸­çš„æ°¸ä¹…ä»£ï¼ˆjdk1.8æ”¹ä¸ºå…ƒç©ºé—´ï¼‰</p><p><img src="/2020/02/26/java-05/String_1.png" alt="å­—é¢é‡èµ‹å€¼æ–¹å¼"><br>    6.å­—ç¬¦ä¸²å¸¸é‡æ± æ˜¯ä¸ä¼šå­˜å‚¨ç›¸åŒå†…å®¹çš„å­—ç¬¦ä¸²çš„ã€‚</p><h3 id="Stringå®ä¾‹åŒ–çš„ä¸¤ç§æ–¹å¼ï¼š"><a href="#Stringå®ä¾‹åŒ–çš„ä¸¤ç§æ–¹å¼ï¼š" class="headerlink" title="Stringå®ä¾‹åŒ–çš„ä¸¤ç§æ–¹å¼ï¼š"></a>Stringå®ä¾‹åŒ–çš„ä¸¤ç§æ–¹å¼ï¼š</h3><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// Stringå®ä¾‹åŒ–æ–¹å¼ä¸€ï¼šå­—é¢é‡èµ‹å€¼ </span><span class="token comment" spellcheck="true">// é¦–å…ˆä¼šä»å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœè¯¥å­—ç¬¦ä¸²å·²ç»å­˜åœ¨ï¼Œåœ¨è¿”å›å¼•ç”¨ï¼Œå¦åˆ™åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­åˆ›å»º</span>String st1 <span class="token operator">=</span> <span class="token string">"abc"</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// Stringå®ä¾‹åŒ–æ–¹å¼äºŒï¼šnew + æ„é€ å™¨ åœ¨å †ç©ºé—´ä¸­åˆ›å»º</span>String st2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å†…å­˜è§£æï¼š<br><img src="/2020/02/26/java-05/String_2.png" alt></p><p><img src="/2020/02/26/java-05/String_3.png" alt></p><blockquote><p>intern æ–¹æ³•æ˜¯ä¸€ä¸ªnativeæ–¹æ³•ï¼Œinternæ–¹æ³•ä¼šä»å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æŸ¥è¯¢å½“å‰å­—ç¬¦ä¸²æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ï¼Œå°±ç›´æ¥è¿”å›å½“å‰å­—ç¬¦ä¸²ï¼›å¦‚æœä¸å­˜åœ¨å°±ä¼šå°†å½“å‰å­—ç¬¦ä¸²æ”¾å…¥å¸¸é‡æ± ä¸­ï¼Œä¹‹åå†è¿”å›ã€‚</p></blockquote><h3 id="Stringå¸¸ç”¨æ–¹æ³•"><a href="#Stringå¸¸ç”¨æ–¹æ³•" class="headerlink" title="Stringå¸¸ç”¨æ–¹æ³•"></a>Stringå¸¸ç”¨æ–¹æ³•</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StringMethodTest</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        String st1 <span class="token operator">=</span> <span class="token string">"Taylor Swift"</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// int length()ï¼šè¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ï¼šreturn value.length</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st1<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 12</span>        <span class="token comment" spellcheck="true">// char charAt(int index)ï¼šè¿”å›æŸç´¢å¼•å¤„çš„å­—ç¬¦return value[index]</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st1<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// T</span>        <span class="token comment" spellcheck="true">// boolean isEmpty()ï¼šåˆ¤æ–­æ˜¯å¦æ˜¯ç©ºå­—ç¬¦ä¸²ï¼šreturn value.length == 0</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st1<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// false</span>        <span class="token comment" spellcheck="true">// String toLowerCase()ï¼šä½¿ç”¨é»˜è®¤è¯­è¨€ç¯å¢ƒï¼Œå°†String ä¸­çš„æ‰€æœ‰å­—ç¬¦è½¬æ¢ä¸ºå°å†™</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st1<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// taylor swift</span>        <span class="token comment" spellcheck="true">// String toUpperCase()ï¼šä½¿ç”¨é»˜è®¤è¯­è¨€ç¯å¢ƒï¼Œå°†String ä¸­çš„æ‰€æœ‰å­—ç¬¦è½¬æ¢ä¸ºå¤§å†™</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st1<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// TAYLOR SWIFT</span>        <span class="token comment" spellcheck="true">// String trim()ï¼šè¿”å›å­—ç¬¦ä¸²çš„å‰¯æœ¬ï¼Œå¿½ç•¥å‰å¯¼ç©ºç™½å’Œå°¾éƒ¨ç©ºç™½</span>        String st2 <span class="token operator">=</span> <span class="token string">" hello world "</span><span class="token punctuation">;</span>        String st3 <span class="token operator">=</span> st2<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// " hello world "</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st2<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// "hello world"</span>        <span class="token comment" spellcheck="true">// boolean equals(Object obj)ï¼šæ¯”è¾ƒå­—ç¬¦ä¸²çš„å†…å®¹æ˜¯å¦ç›¸åŒ</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st2<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">" hello world "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st2<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>st3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// false</span>        <span class="token comment" spellcheck="true">//boolean equalsIgnoreCase(String anotherString)ï¼šä¸equalsæ–¹æ³•ç±»ä¼¼ï¼Œå¿½ç•¥å¤§å°å†™</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st2<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span><span class="token string">" HELLO world "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>        <span class="token comment" spellcheck="true">//String concat(String str)ï¼šå°†æŒ‡å®šå­—ç¬¦ä¸²è¿æ¥åˆ°æ­¤å­—ç¬¦ä¸²çš„ç»“å°¾ã€‚ç­‰ä»·äºç”¨â€œ+â€</span>        String st4 <span class="token operator">=</span> <span class="token string">"Justin "</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">"Bieber"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st4<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// Justin Bieber</span>        <span class="token comment" spellcheck="true">//int compareTo(String anotherString)ï¼šæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²çš„å¤§å°</span>        String st5 <span class="token operator">=</span> <span class="token string">"abc"</span><span class="token punctuation">;</span>        String st6 <span class="token operator">=</span> <span class="token string">"abd"</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st5<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>st6<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// -1  (c-d=>99-100)</span>        <span class="token comment" spellcheck="true">//String substring(int beginIndex)ï¼šè¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œå®ƒæ˜¯æ­¤å­—ç¬¦ä¸²çš„ä»beginIndexå¼€å§‹æˆªå–åˆ°æœ€åçš„ä¸€ä¸ªå­å­—ç¬¦ä¸²ã€‚</span>        String st7 <span class="token operator">=</span> <span class="token string">"å­¦ä¹ JAVAé«˜çº§è¯­æ³•"</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st7<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// JAVAé«˜çº§è¯­æ³•</span>        <span class="token comment" spellcheck="true">//String substring(int beginIndex, int endIndex) ï¼šè¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œå®ƒæ˜¯æ­¤å­—ç¬¦ä¸²ä»beginIndexå¼€å§‹æˆªå–åˆ°endIndex(ä¸åŒ…å«)çš„ä¸€ä¸ªå­å­—ç¬¦ä¸²ã€‚</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st7<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å­¦ä¹ JAVA</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// boolean endsWith(String suffix)ï¼šæµ‹è¯•æ­¤å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„åç¼€ç»“æŸ</span>        String st1 <span class="token operator">=</span> <span class="token string">"Jim Smith"</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st1<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">"aaa"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// false</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st1<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">"Smith"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>        <span class="token comment" spellcheck="true">// boolean startsWith(String prefix)ï¼šæµ‹è¯•æ­¤å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„å‰ç¼€å¼€å§‹</span>        String st2 <span class="token operator">=</span> <span class="token string">"å¼ ä¼Ÿ"</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st2<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"å¼ "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>        <span class="token comment" spellcheck="true">// boolean startsWith(String prefix, int toffset)ï¼šæµ‹è¯•æ­¤å­—ç¬¦ä¸²ä»æŒ‡å®šç´¢å¼•å¼€å§‹çš„å­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šå‰ç¼€å¼€å§‹</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st2<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"å¼ "</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st2<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"å¼ ä¼Ÿdsg"</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// false</span>        <span class="token comment" spellcheck="true">// boolean contains(CharSequence s)ï¼šå½“ä¸”ä»…å½“æ­¤å­—ç¬¦ä¸²åŒ…å«æŒ‡å®šçš„charå€¼åºåˆ—æ—¶ï¼Œè¿”å›true</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"o"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>        <span class="token comment" spellcheck="true">// int indexOf(String str)ï¼šè¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Runnable"</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"n"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 2</span>        <span class="token comment" spellcheck="true">// int indexOf(String str, int fromIndex)ï¼šè¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•ï¼Œä»æŒ‡å®šçš„ç´¢å¼•å¼€å§‹(åŒ…å«æ­¤ç´¢å¼•)</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hellohello"</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"l"</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 7</span>        <span class="token comment" spellcheck="true">// int lastIndexOf(String str)ï¼šè¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­æœ€å³è¾¹å‡ºç°å¤„çš„ç´¢å¼•</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">"l"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 3</span>        <span class="token comment" spellcheck="true">// int lastIndexOf(String str, int fromIndex)ï¼šè¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­æœ€åä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•ï¼Œä»æŒ‡å®šçš„ç´¢å¼•å¼€å§‹åå‘æœç´¢</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"helloworld"</span><span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">"o"</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 6</span>        <span class="token comment" spellcheck="true">// æ³¨ï¼šindexOfå’ŒlastIndexOfæ–¹æ³•å¦‚æœæœªæ‰¾åˆ°éƒ½æ˜¯è¿”å›-1</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// String replace(char oldChar, char newChar)ï¼šè¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œå®ƒæ˜¯é€šè¿‡ç”¨newChar æ›¿æ¢æ­¤å­—ç¬¦ä¸²ä¸­å‡ºç°çš„æ‰€æœ‰oldCharå¾—åˆ°çš„ã€‚</span>        String st1 <span class="token operator">=</span> <span class="token string">"aabbccaa"</span><span class="token punctuation">;</span>        String st2 <span class="token operator">=</span> st1<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'A'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// String replace(CharSequence target, CharSequence replacement)ï¼šä½¿ç”¨æŒ‡å®šçš„å­—é¢å€¼æ›¿æ¢åºåˆ—æ›¿æ¢æ­¤å­—ç¬¦ä¸²æ‰€æœ‰åŒ¹é…å­—é¢å€¼ç›®æ ‡åºåˆ—çš„å­å­—ç¬¦ä¸²ã€‚</span>        <span class="token comment" spellcheck="true">// String replaceAll(String regex, String replacement) ï¼šä½¿ç”¨ç»™å®šçš„ replacement æ›¿æ¢æ­¤å­—ç¬¦ä¸²æ‰€æœ‰åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼çš„å­å­—ç¬¦ä¸²ã€‚</span>        <span class="token comment" spellcheck="true">// String replaceFirst(String regex, String replacement) ï¼šä½¿ç”¨ç»™å®šçš„ replacement æ›¿æ¢æ­¤å­—ç¬¦ä¸²åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼çš„ç¬¬ä¸€ä¸ªå­å­—ç¬¦ä¸²ã€‚</span>        <span class="token comment" spellcheck="true">// boolean matches(String regex)ï¼šå‘ŠçŸ¥æ­¤å­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼ã€‚</span>        <span class="token comment" spellcheck="true">// String[] split(String regex)ï¼šæ ¹æ®ç»™å®šæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…æ‹†åˆ†æ­¤å­—ç¬¦ä¸²ã€‚</span>        <span class="token comment" spellcheck="true">// String[] split(String regex, int limit)ï¼šæ ¹æ®åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼æ¥æ‹†åˆ†æ­¤ å­—ç¬¦ä¸²ï¼Œæœ€å¤šä¸è¶…è¿‡limitä¸ªï¼Œå¦‚æœè¶…è¿‡äº†ï¼Œå‰©ä¸‹çš„å…¨éƒ¨éƒ½æ”¾åˆ°æœ€åä¸€ä¸ªå…ƒç´ ä¸­ã€‚</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="String-ä¸char-è½¬æ¢"><a href="#String-ä¸char-è½¬æ¢" class="headerlink" title="String ä¸char[]è½¬æ¢"></a>String ä¸char[]è½¬æ¢</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// String -> char[]  è°ƒç”¨Stringçš„toCharArray()</span>        String st1 <span class="token operator">=</span> <span class="token string">"qwerasdf"</span><span class="token punctuation">;</span>        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> charArray1 <span class="token operator">=</span> st1<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> charArray1<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>charArray1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// char[] -> String  è°ƒç”¨String()æ„é€ å™¨</span>        String st2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>charArray1<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><h3 id="Stringä¸byte-è½¬æ¢"><a href="#Stringä¸byte-è½¬æ¢" class="headerlink" title="Stringä¸byte[] è½¬æ¢"></a>Stringä¸byte[] è½¬æ¢</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> UnsupportedEncodingException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// String -> byte[]  è°ƒç”¨Stringçš„getBytes()</span>        String st1 <span class="token operator">=</span> <span class="token string">"abc123å“ˆå“ˆ"</span><span class="token punctuation">;</span>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> byteArray1 <span class="token operator">=</span> st1<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä½¿ç”¨é»˜è®¤ç¼–ç </span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Arrays<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>byteArray1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// [97, 98, 99, 49, 50, 51, -27, -109, -120, -27, -109, -120]</span>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> byteArray2 <span class="token operator">=</span> st1<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">"gbk"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Arrays<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>byteArray2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// [97, 98, 99, 49, 50, 51, -71, -2, -71, -2]</span>        <span class="token comment" spellcheck="true">// byte[] ->String    è°ƒç”¨String()æ„é€ å™¨</span>        String st2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>byteArray1<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// abc123å“ˆå“ˆ</span>        String st3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>byteArray2<span class="token punctuation">,</span><span class="token string">"gbk"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// abc123å“ˆå“ˆ</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="StringBuffer-ä¸-StringBuilder"><a href="#StringBuffer-ä¸-StringBuilder" class="headerlink" title="StringBuffer ä¸ StringBuilder"></a>StringBuffer ä¸ StringBuilder</h2><p>Stringï¼šä¸å¯å˜çš„å­—ç¬¦åºåˆ—<br>StringBufferï¼šå¯å˜çš„å­—ç¬¦åºåˆ—ï¼›çº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡ä½<br>StringBuilderï¼šå¯å˜çš„å­—ç¬¦ç³»åˆ—ï¼›çº¿ç¨‹ä¸å®‰å…¨ï¼Œæ•ˆç‡é«˜<br>åº•å±‚éƒ½æ˜¯ä½¿ç”¨char[]å­˜å‚¨<br>StringBuffer(StringBuilder)å¸¸ç”¨æ–¹æ³•ï¼š</p><pre class=" language-java"><code class="language-java"> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// StringBuffer append(xxx)ï¼šæä¾›äº†å¾ˆå¤šçš„append()æ–¹æ³•ï¼Œç”¨äºè¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥</span>        StringBuffer st1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        st1<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"!!!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// abc!!!</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// StringBuffer delete(int start,int end)ï¼šåˆ é™¤æŒ‡å®šä½ç½®çš„å†…å®¹</span>        st1<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å–å¤´ä¸å–å°¾</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// bc!!!</span>        <span class="token comment" spellcheck="true">// StringBuffer replace(int start, int end, String str)ï¼šæŠŠ[start,end)ä½ç½®æ›¿æ¢ä¸ºstr</span>        st1<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"de"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// bcde!</span>        <span class="token comment" spellcheck="true">// StringBuffer insert(int offset, xxx)ï¼šåœ¨æŒ‡å®šä½ç½®æ’å…¥xxx</span>        st1<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"f"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// bcdef!</span>        <span class="token comment" spellcheck="true">// StringBuffer reverse() ï¼šæŠŠå½“å‰å­—ç¬¦åºåˆ—é€†è½¬</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st1<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// !fedcb</span>        <span class="token comment" spellcheck="true">// public int indexOf(String str) è¿”å›æŒ‡å®šå­—ç¬¦ä¸²çš„ç´¢å¼•ä½ç½®</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st1<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 5</span>        <span class="token comment" spellcheck="true">// public String substring(int start,int end) æˆªå–æŒ‡å®šèµ·å§‹ä½ç½®çš„å­—ç¬¦ä¸²</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>st1<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// fedc</span>        <span class="token comment" spellcheck="true">// public int length()</span>        <span class="token comment" spellcheck="true">// public char charAt(int n )</span>        <span class="token comment" spellcheck="true">// public void setCharAt(int n ,char ch)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="æ—¥æœŸæ—¶é—´API"><a href="#æ—¥æœŸæ—¶é—´API" class="headerlink" title="æ—¥æœŸæ—¶é—´API"></a>æ—¥æœŸæ—¶é—´API</h2><p>Dateç±»</p><pre class=" language-java"><code class="language-java">  <span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// Systemç±»ä¸­çš„currentTimeMillis()</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// æ—¶é—´æˆ³ï¼šè¿”å›å½“å‰æ—¶é—´ä¸1970å¹´1æœˆ1æ—¥0æ—¶0åˆ†0ç§’ä¹‹é—´ä»¥æ¯«ç§’ä¸ºå•ä½çš„æ—¶é—´å·®</span>        <span class="token keyword">long</span> time <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// util.Dateç±»</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// æ„é€ å™¨ä¸€ï¼šDate(),åˆ›å»ºä¸€ä¸ªå½“å‰æ—¶é—´çš„Dateå¯¹è±¡</span>        Date date1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>date1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// é»˜è®¤è°ƒç”¨é‡å†™çš„toString()</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>date1<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// getTime()è·å–å½“å‰æ—¶é—´å¯¹åº”çš„æ¯«ç§’æ•°</span>        <span class="token comment" spellcheck="true">// æ„é€ å™¨äºŒï¼šDate(long time)</span>    <span class="token punctuation">}</span></code></pre><p>SimpleDateFormatç±»</p><pre class=" language-java"><code class="language-java"> <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> ParseException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// å®ä¾‹åŒ–SimpleDateFormat,ä½¿ç”¨é»˜è®¤æ„é€ å™¨</span>        SimpleDateFormat sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Date date1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ ¼å¼åŒ–æ—¥æœŸ æ—¥æœŸ->String</span>        String date2 <span class="token operator">=</span> sdf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date1<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>date1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// Mon Mar 02 14:15:11 CST 2020</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>date2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 20-3-2 ä¸‹åˆ2:15</span>        <span class="token comment" spellcheck="true">// è§£æ String->æ—¥æœŸ</span>        String date3 <span class="token operator">=</span> <span class="token string">"20-3-2 ä¸‹åˆ2:15"</span><span class="token punctuation">;</span>        Date date4 <span class="token operator">=</span> sdf<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>date3<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>date4<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// Mon Mar 02 14:15:00 CST 2020</span>        <span class="token comment" spellcheck="true">// ä½¿ç”¨å¸¦å‚æ„é€ å™¨</span>        SimpleDateFormat sdf2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd hh-mm-ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sdf2<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 2020-03-02 02-24-05</span>    <span class="token punctuation">}</span></code></pre><h2 id="æ¯”è¾ƒå™¨"><a href="#æ¯”è¾ƒå™¨" class="headerlink" title="æ¯”è¾ƒå™¨"></a>æ¯”è¾ƒå™¨</h2><p><strong>è‡ªç„¶æ’åºï¼š</strong>java.lang.Comparable<br>éœ€è¦è¿›è¡Œæ¯”è¾ƒçš„ç±»éœ€è¦å®ç°Comparableæ¥å£ä¸­çš„toCompare()æ–¹æ³•ï¼Œåœ¨å®ç°Comperableæ¥å£æ—¶å¯ä½¿ç”¨è¯¥ç±»ä½œä¸ºæ³›å‹é™å®šï¼Œåœ¨ç¼–è¯‘æœŸé—´å³å¯å‘ç°ä¼ å…¥å‚æ•°æ˜¯å¦ä¸ºéœ€è¦è¿›è¡Œæ¯”è¾ƒçš„å®ä½“å¯¹è±¡ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span> <span class="token comment" spellcheck="true">// æŒ‰ç…§å¹´é¾„æ’åº</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compareTo</span><span class="token punctuation">(</span>Object o<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            Person person <span class="token operator">=</span> <span class="token punctuation">(</span>Person<span class="token punctuation">)</span>o<span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// return Integer.compare(this.age,preson.age);</span>            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">-</span>person<span class="token punctuation">.</span>age<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä»å°åˆ°å¤§</span>        <span class="token punctuation">}</span>        <span class="token keyword">else</span><span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"è¾“å…¥ç±»å‹ä¸åŒ¹é…"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>å®šåˆ¶æ’åºï¼š</strong>java.util.Comparator<br>éœ€è¦é‡å†™Comparatorç±»ä¸­çš„compare()æ–¹æ³•</p><pre class=" language-java"><code class="language-java">Comparator comparator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Comparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span>Object o1<span class="token punctuation">,</span> Object o2<span class="token punctuation">)</span> <span class="token punctuation">{</span>         <span class="token keyword">if</span><span class="token punctuation">(</span>o1 <span class="token keyword">instanceof</span> <span class="token class-name">Person</span> <span class="token operator">&amp;&amp;</span> o1 <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">)</span><span class="token punctuation">{</span>              <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>Person<span class="token punctuation">)</span> o1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Person<span class="token punctuation">)</span>o2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token punctuation">}</span>         <span class="token keyword">else</span><span class="token punctuation">{</span>               <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"ä¼ å…¥å‚æ•°é”™è¯¯"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id="æšä¸¾ç±»"><a href="#æšä¸¾ç±»" class="headerlink" title="æšä¸¾ç±»"></a>æšä¸¾ç±»</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EnumTest1</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        StudentGrade stu <span class="token operator">=</span> StudentGrade<span class="token punctuation">.</span>ONE<span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è‡ªåŠ¨è°ƒç”¨Enumä¸­çš„toString()</span>        <span class="token comment" spellcheck="true">// values()è¿”å›æšä¸¾ç±»å‹çš„å¯¹è±¡æ•°ç»„</span>        StudentGrade<span class="token punctuation">[</span><span class="token punctuation">]</span> values <span class="token operator">=</span> StudentGrade<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> values<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>values<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// valueOf()æŠŠä¸€ä¸ªå­—ç¬¦ä¸²è½¬ä¸ºå¯¹åº”çš„æšä¸¾ç±»å¯¹è±¡</span>        StudentGrade stu2 <span class="token operator">=</span> StudentGrade<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token string">"TWO"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stu2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// TWO</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">enum</span> StudentGrade<span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// æä¾›å½“å‰æšä¸¾ç±»çš„å¯¹è±¡</span>    <span class="token function">ONE</span><span class="token punctuation">(</span><span class="token string">"å¤§ä¸€"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">TWO</span><span class="token punctuation">(</span><span class="token string">"å¤§äºŒ"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">THREE</span><span class="token punctuation">(</span><span class="token string">"å¤§ä¸‰"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">FOUR</span><span class="token punctuation">(</span><span class="token string">"å¤§å››"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å£°æ˜StudentGradeå¯¹è±¡çš„å±æ€§</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> String grade<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// ç§æœ‰åŒ–æ„é€ å™¨</span>    <span class="token keyword">private</span> <span class="token function">StudentGrade</span><span class="token punctuation">(</span>String grade<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>grade <span class="token operator">=</span> grade<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getGrade</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>grade<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux å¸¸ç”¨å‘½ä»¤</title>
      <link href="2020/02/25/linux-02/"/>
      <url>2020/02/25/linux-02/</url>
      
        <content type="html"><![CDATA[<h2 id="å…³æœº-amp-é‡å¯å‘½ä»¤"><a href="#å…³æœº-amp-é‡å¯å‘½ä»¤" class="headerlink" title="å…³æœº&amp;é‡å¯å‘½ä»¤"></a>å…³æœº&amp;é‡å¯å‘½ä»¤</h2><p><strong>shutdown</strong>(é»˜è®¤1åˆ†é’Ÿåå…³æœº)<br>        shutdown -h now : ç«‹å³å…³æœº<br>        shutdown -h 1 : 1åˆ†é’Ÿåå…³æœº<br>        shutdown -r now : ç«‹å³é‡å¯<br><strong>halt:</strong>ç¦ç”¨cpuï¼Œç›¸å½“äºç›´æ¥å…³æœº<br><strong>reboot:</strong>ç«‹å³é‡å¯<br><strong>sync:</strong>æŠŠå†…å­˜ä¸Šçš„æ•°æ®åŒæ­¥åˆ°ç£ç›˜ä¸Š(å…³æœºæˆ–é‡å¯å‰åº”è¯¥å…ˆæ‰§è¡Œæ­¤æŒ‡ä»¤ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±)</p><h2 id="ç”¨æˆ·ç™»å½•å’Œæ³¨é”€"><a href="#ç”¨æˆ·ç™»å½•å’Œæ³¨é”€" class="headerlink" title="ç”¨æˆ·ç™»å½•å’Œæ³¨é”€"></a>ç”¨æˆ·ç™»å½•å’Œæ³¨é”€</h2><p><strong>su ç”¨æˆ·åï¼š</strong>åˆ‡æ¢ç”¨æˆ·<br><strong>logoutï¼š</strong>æ³¨é”€ç”¨æˆ·ï¼Œåœ¨å›¾å½¢è¿è¡Œçº§åˆ«æ— æ•ˆ</p><h2 id="ç”¨æˆ·ç®¡ç†"><a href="#ç”¨æˆ·ç®¡ç†" class="headerlink" title="ç”¨æˆ·ç®¡ç†"></a>ç”¨æˆ·ç®¡ç†</h2><p>Linuxæ˜¯ä¸€ä¸ªå¤šç”¨æˆ·å¤šä»»åŠ¡çš„æ“ä½œç³»ç»Ÿï¼Œä»»ä½•ä¸€ä¸ªè¦ä½¿ç”¨ç³»ç»Ÿèµ„æºçš„ç”¨æˆ·ï¼Œéƒ½å¿…é¡»å‘ç³»ç»Ÿç®¡ç†å‘˜ç”³è¯·ä¸€ä¸ªè´¦å·ï¼Œç„¶åä»¥è¿™ä¸ªè´¦å·çš„èº«ä»½è¿›å…¥ç³»ç»Ÿã€‚<br>æ¯ä¸ªç”¨æˆ·è‡³å°‘å±äºä¸€ä¸ªç»„ã€‚<br><strong>æ·»åŠ ç”¨æˆ·ï¼š</strong> useradd -r -m -s /bin/bash ç”¨æˆ·å<br>-rï¼šå»ºç«‹ç³»ç»Ÿè´¦å·<br>-mï¼šè‡ªåŠ¨å»ºç«‹ç”¨æˆ·çš„ç™»å…¥ç›®å½•<br>-sï¼šæŒ‡å®šç”¨æˆ·ç™»å…¥åæ‰€ä½¿ç”¨çš„shell<br><strong>æŒ‡å®šå¯†ç ï¼š</strong>passwd ç”¨æˆ·å<br><strong>åˆ é™¤ç”¨æˆ·ï¼š</strong><br>userdel ç”¨æˆ·å(åˆ é™¤ç”¨æˆ·ä¿ç•™å®¶ç›®å½•)<br>userdel -r ç”¨æˆ·å (åˆ é™¤ç”¨æˆ·åŠç”¨æˆ·ä¸»ç›®å½•)<br><strong>æŸ¥è¯¢ç”¨æˆ·ï¼š</strong>id ç”¨æˆ·å<br><strong>æŸ¥çœ‹å½“å‰ç”¨æˆ·ï¼š</strong>whoami  /who am I<br><strong>ç”¨æˆ·ç»„ï¼š</strong>ç³»ç»Ÿå¯¹æœ‰å…±æ€§çš„å¤šä¸ªç”¨æˆ·è¿›è¡Œç»Ÿä¸€çš„ç®¡ç†<br>æ·»åŠ ç»„ï¼šgroupadd  ç»„å<br>æŸ¥çœ‹ç»„idï¼šgrep ç»„å /etc/group<br>ä¿®æ”¹ç»„è´¦æˆ·ï¼šgroupmod -g[æ–°id] -n[æ–°ç»„å] ç»„å<br>åˆ é™¤ç»„ï¼šgroupdel ç»„å<br>å¢åŠ ç”¨æˆ·æ—¶ç›´æ¥åŠ ä¸Šç»„ï¼šuseradd -g ç”¨æˆ·ç»„ ç”¨æˆ·<br>ä¿®æ”¹ç”¨æˆ·ç»„ï¼šusermod -g ç”¨æˆ·ç»„ ç”¨æˆ·<br>ç›¸å…³æ–‡ä»¶ï¼š<br>/etc/passwdï¼šç”¨æˆ·çš„é…ç½®æ–‡ä»¶ï¼Œè®°å½•ç”¨æˆ·çš„å„ç§ä¿¡æ¯<br>ç”¨æˆ·åï¼šå£ä»¤ï¼šç”¨æˆ·æ ‡è¯†å·ï¼šç»„æ ‡è¯†å·ï¼šæ³¨é‡Šæ€§æè¿°ï¼šç™»å½•shell<br>/etc/shadowï¼šå£ä»¤é…ç½®æ–‡ä»¶<br>ç™»å½•åï¼šåŠ å¯†å£ä»¤ï¼šæœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´ï¼šæœ€å°æ—¶é—´é—´éš”ï¼šæœ€å¤§æ—¶é—´é—´éš”ï¼šä¸æ´»åŠ¨æ—¶é—´ï¼šå¤±æ•ˆæ—¶é—´ï¼šæ ‡å¿—<br>/etc/groupï¼šç»„é…ç½®æ–‡ä»¶<br>ç»„åï¼šå£ä»¤ï¼šç»„æ ‡è¯†ç¬¦</p><h2 id="è¿è¡Œçº§åˆ«"><a href="#è¿è¡Œçº§åˆ«" class="headerlink" title="è¿è¡Œçº§åˆ«"></a>è¿è¡Œçº§åˆ«</h2><p>0ï¼šå…³æœº<br>        1ï¼šå•ç”¨æˆ·ï¼ˆæ‰¾å›ä¸¢å¤±å¯†ç ï¼‰<br>        2ï¼šå¤šç”¨æˆ·çŠ¶æ€æ²¡æœ‰ç½‘ç»œæœåŠ¡<br>        3ï¼šå¤šç”¨æˆ·çŠ¶æ€æœ‰ç½‘ç»œ<br>        4ï¼šç³»ç»Ÿæœªä½¿ç”¨ä¿ç•™ç»™ç”¨æˆ·<br>        5ï¼šå›¾å½¢ç•Œé¢<br>        6ï¼šç³»ç»Ÿé‡å¯<br>                /etc/inittabæ–‡ä»¶æŸ¥çœ‹è¿è¡Œçº§åˆ«ï¼ˆubuntuæ²¡æœ‰æ­¤æ–‡ä»¶ï¼‰<br>                ä¿®æ”¹é»˜è®¤è¿è¡Œçº§åˆ«ï¼šinit [012356] (ç„¶åæŒ‰ctrl+alt+F1ï¼ŒUbuntuè¿›å…¥å‘½ä»¤ç•Œé¢ )<br><img src="/2020/02/25/linux-02/4.png" alt></p><h2 id="å¸®åŠ©æŒ‡ä»¤"><a href="#å¸®åŠ©æŒ‡ä»¤" class="headerlink" title="å¸®åŠ©æŒ‡ä»¤"></a>å¸®åŠ©æŒ‡ä»¤</h2><p>man æŒ‡ä»¤<br>help æŒ‡ä»¤</p><h2 id="æ–‡ä»¶ç®¡ç†"><a href="#æ–‡ä»¶ç®¡ç†" class="headerlink" title="æ–‡ä»¶ç®¡ç†"></a>æ–‡ä»¶ç®¡ç†</h2><p>â€‹    <strong>pwdï¼š</strong>æ˜¾ç¤ºå½“å‰ç›®å½•çš„ç»å¯¹è·¯å¾„</p><p>â€‹    <strong>ls [é€‰é¡¹] [ç›®å½•æˆ–æ˜¯æ–‡ä»¶]ï¼š</strong>æ˜¾ç¤ºæŒ‡å®šç›®å½•éœçš„æ–‡ä»¶ä¿¡æ¯<br>â€‹            å¸¸ç”¨é€‰é¡¹ï¼š<br>â€‹            -aï¼šæ˜¾ç¤ºå½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶æˆ–ç›®å½•ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶ï¼›<br>â€‹            -lï¼šä»¥åˆ—è¡¨çš„æ–¹å¼æ˜¾ç¤ºä¿¡æ¯ã€‚<br>â€‹            <em>ls -a -l ç­‰ä»·äº ll</em></p><p>â€‹    <strong>cd [ç›®å½•]ï¼š</strong>è¿›å…¥æŒ‡å®šç›®å½•<br>â€‹            ç»å¯¹è·¯å¾„ï¼šä»æ ¹ç›®å½•å‡ºå‘å®šä½  /home<br>â€‹            ç›¸å¯¹è·¯å¾„ï¼šä»å½“å‰è·¯å¾„å‡ºå‘å®šä½ ../home<br>â€‹            cd ~  è¿›å…¥å½“å‰ç”¨æˆ·çš„å®¶ç›®å½•<br>â€‹            cd ..  è¿›å…¥å½“å‰ç›®å½•çš„ä¸Šä¸€çº§ç›®å½•</p><p>â€‹    <strong>mkdir [é€‰é¡¹] ç›®å½•ï¼š</strong>åˆ›å»ºç›®å½•<br>â€‹            -pï¼šåˆ›å»ºå¤šçº§ç›®å½•<br>â€‹            rmdir [] ç›®å½•ï¼šåˆ é™¤ç›®å½•<br>â€‹            redir ç›®å½•ï¼šåˆ é™¤çš„æ˜¯ç©ºç›®å½•ï¼›rm -rf ç›®å½•ï¼šåˆ é™¤éç©ºç›®å½•</p><p>â€‹    <strong>touch æ–‡ä»¶åï¼š</strong>åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶ï¼ˆå¯ä»¥ä¸€æ¬¡åˆ›å»ºå¤šä¸ªæ–‡ä»¶ï¼‰</p><p>â€‹    <strong>cp [é€‰é¡¹] åŸæ–‡ä»¶ æŒ‡å®šç›®å½•ï¼š</strong>æ‹·è´æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•<br>â€‹            -rï¼šé€’å½’å¤åˆ¶æ•´ä¸ªæ–‡ä»¶å¤¹    </p><p>â€‹    <strong>rm [é€‰é¡¹] è¦åˆ é™¤çš„æ–‡ä»¶å¤¹æˆ–ç›®å½•ï¼š</strong>åˆ é™¤æŒ‡å®šæ–‡ä»¶å¤¹<br>â€‹            -rï¼šé€’å½’åˆ é™¤æ•´ä¸ªæ–‡ä»¶å¤¹<br>â€‹            -fï¼šå¼ºåˆ¶åˆ é™¤ä¸æç¤º    </p><p>â€‹    <strong>mv åŸæ–‡ä»¶å æ–°æ–‡ä»¶åï¼š</strong>æ–‡ä»¶é‡å‘½å<br>â€‹            <strong>mv åŸæ–‡ä»¶è·¯å¾„ æ–°æ–‡ä»¶è·¯å¾„ï¼š</strong>ç§»åŠ¨æ–‡ä»¶    </p><p>â€‹    <strong>cat [é€‰é¡¹] æ–‡ä»¶è·¯å¾„ï¼š</strong>æŸ¥çœ‹æ–‡ä»¶å†…å®¹<br>â€‹            -nï¼šæ˜¾ç¤ºè¡Œå·<br>â€‹            ç®¡é“å‘½ä»¤ï¼š|ï¼Œå‰é¢æ¯ä¸€ä¸ªè¿›ç¨‹çš„è¾“å‡ºï¼ˆstdoutï¼‰ç›´æ¥ä½œä¸ºä¸‹ä¸€ä¸ªè¿›ç¨‹çš„è¾“å…¥ï¼ˆstdinï¼‰<br>â€‹            |moreï¼šåˆ†é¡µæ˜¾ç¤º<br>â€‹            |lessï¼šæ•ˆç‡æ¯”moreé«˜</p><p>â€‹    <strong>&gt;è¾“å‡ºé‡å®šå‘ï¼š</strong><br>â€‹            <strong>&gt;&gt;è¿½åŠ ï¼š</strong><br>â€‹            ls -l &gt;æ–‡ä»¶ï¼šå°†åˆ—è¡¨çš„å†…å®¹å†™å…¥æ–‡ä»¶ä¸­<br>â€‹            ls -l &gt;&gt;æ–‡ä»¶ï¼šå°†åˆ—è¡¨çš„å†…å®¹è¿½åŠ åˆ°æ–‡ä»¶çš„æœ«å°¾</p><p>â€‹    <strong>echo [é€‰é¡¹] [è¾“å‡ºå†…å®¹]ï¼š</strong>è¾“å‡ºå†…å®¹åˆ°æ§åˆ¶å°</p><p>â€‹    <strong>head æ–‡ä»¶åï¼š</strong>æŸ¥çœ‹æ–‡ä»¶å‰10è¡Œ<br>â€‹            head -n è¡Œæ•°ï¼šæŸ¥çœ‹æ–‡ä»¶çš„å‰ä»»æ„è¡Œ</p><p>â€‹    <strong>tail æ–‡ä»¶åï¼š</strong>æŸ¥çœ‹æ–‡ä»¶å°¾10è¡Œ<br>â€‹            tail -n è¡Œæ•°ï¼šæŸ¥çœ‹æ–‡ä»¶å°¾ä»»æ„è¡Œ<br>â€‹            tail -f æ–‡ä»¶åï¼šå®æ—¶ç›‘æ§æ–‡ä»¶çš„æ›´æ–°</p><p>â€‹    <strong>ln -s åŸæ–‡ä»¶æˆ–ç›®å½• è½¯é“¾æ¥ï¼š</strong>ç»™æ–‡ä»¶åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥ï¼Œç›¸å½“äºwindowsä¸­çš„å¿«æ·æ–¹å¼</p><p>â€‹    <strong>history ï¼š</strong>æŸ¥çœ‹æˆ–æ‰§è¡Œ(! ç¼–å·)å·²ç»æ‰§è¡Œè¿‡çš„æŒ‡ä»¤</p><h2 id="æ—¶é—´æ—¥æœŸç±»"><a href="#æ—¶é—´æ—¥æœŸç±»" class="headerlink" title="æ—¶é—´æ—¥æœŸç±»"></a>æ—¶é—´æ—¥æœŸç±»</h2><p><strong>dateï¼š</strong>æ˜¾ç¤ºå½“å‰æ—¶é—´æ—¥æœŸ<br>        date â€œ+%Y-%M-%d %H:%m:%Sâ€ï¼šæŒ‰æŒ‡å®šæ ¼å¼æ˜¾ç¤ºæ—¶é—´æ—¥æœŸ<br>        date -s å­—ç¬¦ä¸²æ—¶é—´æ—¥æœŸï¼šè®¾ç½®æ—¶é—´æ—¥æœŸ</p><p><strong>calï¼š</strong>æ˜¾ç¤ºå½“å‰æ—¥å†        </p><h2 id="æœç´¢æŸ¥æ‰¾ç±»"><a href="#æœç´¢æŸ¥æ‰¾ç±»" class="headerlink" title="æœç´¢æŸ¥æ‰¾ç±»"></a>æœç´¢æŸ¥æ‰¾ç±»</h2><p><strong>find [æœç´¢èŒƒå›´] [é€‰é¡¹] ï¼š</strong>ä»æŒ‡å®šç›®å½•å‘ä¸‹é€’å½’åœ°éå†å…¶å„ä¸ªå­ç›®å½•ï¼Œå°†æ»¡è¶³æ¡ä»¶çš„æ–‡ä»¶æˆ–è€…ç›®å½•æ˜¾ç¤ºåœ¨ç»ˆç«¯ã€‚<br>é€‰é¡¹ï¼š-name æ–‡ä»¶åï¼šæŒ‰æ–‡ä»¶åæŸ¥æ‰¾<br>            -user ç”¨æˆ·åï¼šæŒ‰ç”¨æˆ·åæŸ¥æ‰¾<br>            -size +/-æ–‡ä»¶å¤§å°ï¼šæŒ‰æ–‡ä»¶å¤§å°æŸ¥æ‰¾ï¼ˆ+è¡¨ç¤ºå¤§äº  -è¡¨ç¤ºå°äº  é»˜è®¤ä¸ºç­‰äºï¼‰</p><p><strong>locate æ–‡ä»¶åï¼š</strong>å®šä½æ–‡ä»¶è·¯å¾„</p><p><strong>grep [é€‰é¡¹] æŸ¥æ‰¾å†…å®¹ æºæ–‡ä»¶ï¼š</strong><br>    é€‰é¡¹ï¼š-nï¼šåŒ¹é…è¡Œå·<br>                -iï¼šå¿½ç•¥å¤§å°å†™</p><h2 id="å‹ç¼©å’Œè§£å‹ç±»"><a href="#å‹ç¼©å’Œè§£å‹ç±»" class="headerlink" title="å‹ç¼©å’Œè§£å‹ç±»"></a>å‹ç¼©å’Œè§£å‹ç±»</h2><p><strong>gzip æ–‡ä»¶åï¼š</strong>å‹ç¼©æ–‡ä»¶</p><p><strong>gunzip æ–‡ä»¶åï¼š</strong>è§£å‹æ–‡ä»¶</p><p><strong>zip [é€‰é¡¹] æ–‡ä»¶å.zip å°†è¦å‹ç¼©çš„å†…å®¹ï¼š</strong>å‹ç¼©æ–‡ä»¶<br>        é€‰é¡¹ï¼š-rï¼šé€’å½’å‹ç¼©ï¼Œå³å‹ç¼©ç›®å½•</p><p><strong>unzip [é€‰é¡¹] æ–‡ä»¶å.zipï¼š</strong>è§£å‹ç¼©æ–‡ä»¶<br>        é€‰é¡¹ï¼š-dï¼šæŒ‡å®šè§£å‹åæ–‡ä»¶çš„å­˜æ”¾ç›®å½•</p><p><strong>tar [é€‰é¡¹] æ–‡ä»¶å.tar.gz æ‰“åŒ…çš„å†…å®¹</strong><br>        é€‰é¡¹ï¼š<br>        -cï¼šäº§ç”Ÿ.taræ‰“åŒ…æ–‡ä»¶<br>        -vï¼šæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯<br>        -fï¼šæŒ‡å®šå‹ç¼©åçš„æ–‡ä»¶<br>        -zï¼šæ‰“åŒ…åŒæ—¶å‹ç¼©<br>        -xï¼šè§£åŒ….taræ–‡ä»¶<br>        tar -zcvf xxx.tar.gz è¦å‹ç¼©çš„æ–‡ä»¶æˆ–ç›®å½•ï¼šå‹ç¼©æ–‡ä»¶<br>        tar -zxvf xxx.tar.gz -C è·¯å¾„ï¼šè§£å‹åˆ°æŒ‡å®šè·¯å¾„</p><h2 id="ç”¨æˆ·ç»„ç®¡ç†"><a href="#ç”¨æˆ·ç»„ç®¡ç†" class="headerlink" title="ç”¨æˆ·ç»„ç®¡ç†"></a>ç”¨æˆ·ç»„ç®¡ç†</h2><p>åœ¨linuxä¸­çš„æ¯ä¸€ä¸ªç”¨æˆ·éƒ½å¿…é¡»å±äºä¸€ä¸ªç»„ä»¬ä¸èƒ½ç‹¬ç«‹äºç»„å¤–ã€‚<br>        åœ¨linuxä¸­æ¯ä¸ªæ–‡ä»¶æœ‰æ‰€æœ‰è€…ï¼Œæ‰€åœ¨ç»„ï¼Œå…¶ä»–ç»„ã€‚<br>        <strong>æ–‡ä»¶/ç›®å½•çš„æ‰€æœ‰è€…ï¼š</strong>ä¸€èˆ¬ä¸ºæ–‡ä»¶çš„åˆ›å»ºè€…<br>        æŸ¥çœ‹æ–‡ä»¶çš„æ‰€æœ‰è€…ï¼šls -ahl<br>        chown æ–‡ä»¶å ç”¨æˆ·ï¼šæ›´æ”¹æ–‡ä»¶æ‰€æœ‰è€…<br>        chgrp ç»„å æ–‡ä»¶åï¼šä¿®æ”¹æ–‡ä»¶æ‰€åœ¨ç»„<br>        chown æ–°çš„æ‰€æœ‰è€…:æ–°çš„æ‰€åœ¨ç»„ æ–‡ä»¶åï¼šåŒæ—¶æ”¹å˜æ–‡ä»¶æ‰€æœ‰è€…å’Œæ‰€åœ¨ç»„<br>        -Rï¼šå¦‚æœæ˜¯ç›®å½•åˆ™ä½¿å…¶ä¸‹æ‰€æœ‰å­æ–‡ä»¶æˆ–ç›®å½•é€’å½’ç”Ÿæ•ˆ</p><p><strong>åˆ›å»ºç»„ï¼šgroupadd ç»„å</strong><br>        åœ¨ç»„å†…æ·»åŠ ç”¨æˆ·ï¼šuseradd -g ç»„å ç”¨æˆ·å<br>        æ”¹å˜ç”¨æˆ·æ‰€åœ¨ç»„ï¼šusermod -g ç»„å ç”¨æˆ·å<br>        æ”¹å˜ç”¨æˆ·ç™»å½•çš„åˆå§‹ç›®å½•ï¼šusermod -d ç›®å½•å ç”¨æˆ· </p><p><strong>æ–‡ä»¶/ç›®å½•æƒé™ï¼š</strong><br><img src="/2020/02/25/linux-02/1.png" alt>        rï¼šå¯¹äºæ–‡ä»¶ä»£è¡¨å¯ä»¥è¯»å–ï¼ŒæŸ¥çœ‹<br>        wï¼šå¯¹äºæ–‡ä»¶ä»£è¡¨å¯ä»¥ä¿®æ”¹ï¼Œä½†æ˜¯ä¸ä»£è¡¨å¯ä»¥åˆ é™¤è¯¥æ–‡ä»¶ï¼Œåˆ é™¤ä¸€ä¸ªæ–‡ä»¶çš„å‰ææ¡ä»¶æ˜¯å¯¹è¯¥æ–‡ä»¶çš„ç›®å½•æœ‰å†™æƒé™ã€‚<br>        xï¼šå¯¹äºæ–‡ä»¶ä»£è¡¨å¯ä»¥æ‰§è¡Œ</p><p>rï¼šå¯¹äºç›®å½•ï¼Œå¯ä»¥è¯»å–ï¼ŒlsæŸ¥çœ‹ç›®å½•å†…å®¹<br>        wï¼šå¯¹äºç›®å½•ï¼Œå¯ä»¥ä¿®æ”¹ï¼Œç›®å½•å†…åˆ›å»ºï¼Œåˆ é™¤ï¼Œé‡å‘½å<br>        xï¼šå¯¹äºç›®å½•ï¼Œå¯ä»¥è¿›å…¥è¯¥ç›®å½•</p><h2 id="æ–‡ä»¶-ç›®å½•æƒé™ç®¡ç†"><a href="#æ–‡ä»¶-ç›®å½•æƒé™ç®¡ç†" class="headerlink" title="æ–‡ä»¶/ç›®å½•æƒé™ç®¡ç†"></a>æ–‡ä»¶/ç›®å½•æƒé™ç®¡ç†</h2><p>chmodï¼šä¿®æ”¹æ–‡ä»¶/ç›®å½•æƒé™<br>        ç¬¬ä¸€ç§æ–¹å¼ï¼š+ã€-ã€= å˜æ›´æƒé™<br>        uï¼šæ‰€æœ‰è€…  gï¼šæ‰€æœ‰ç»„   oï¼šå…¶ä»–äºº  aï¼šæ‰€æœ‰äºº<br>        chmod u=rwc,g=rx,o=x æ–‡ä»¶ç›®å½•å<br>        chmod o+w æ–‡ä»¶ç›®å½•å<br>        chmod a-x æ–‡ä»¶ç›®å½•å<br>        è§„å®šï¼šr=4  w=2  x=1</p><h2 id="ä»»åŠ¡è°ƒåº¦"><a href="#ä»»åŠ¡è°ƒåº¦" class="headerlink" title="ä»»åŠ¡è°ƒåº¦"></a>ä»»åŠ¡è°ƒåº¦</h2><p>crontab [é€‰é¡¹]<br>        -e   ç¼–è¾‘crontabå®šæ—¶ä»»åŠ¡<br>        -l     æŸ¥çœ‹crontabä»»åŠ¡<br>        -r     åˆ é™¤å½“å‰ç”¨æˆ·æ‰€æœ‰çš„crontabä»»åŠ¡<br><img src="/2020/02/25/linux-02/2.png" alt><br><img src="/2020/02/25/linux-02/3.png" alt></p><h2 id="ç£ç›˜åˆ†åŒºã€æŒ‚è½½"><a href="#ç£ç›˜åˆ†åŒºã€æŒ‚è½½" class="headerlink" title="ç£ç›˜åˆ†åŒºã€æŒ‚è½½"></a>ç£ç›˜åˆ†åŒºã€æŒ‚è½½</h2><p>åˆ†åŒºçš„æ–¹å¼ï¼š</p><p><strong>1) mbråˆ†åŒº:</strong><br>1.æœ€å¤šæ”¯æŒå››ä¸ªä¸»åˆ†åŒº<br>2.ç³»ç»Ÿåªèƒ½å®‰è£…åœ¨ä¸»åˆ†åŒº<br>3.æ‰©å±•åˆ†åŒºè¦å ä¸€ä¸ªä¸»åˆ†åŒº<br>4.MBRæœ€å¤§åªæ”¯æŒ2TBï¼Œä½†æ‹¥æœ‰æœ€å¥½çš„å…¼å®¹æ€§</p><p><strong>2) gtpåˆ†åŒº:</strong><br>1.æ”¯æŒæ— é™å¤šä¸ªä¸»åˆ†åŒºï¼ˆä½†æ“ä½œç³»ç»Ÿå¯èƒ½é™åˆ¶ï¼Œæ¯”å¦‚windowsä¸‹æœ€å¤š128ä¸ªåˆ†åŒºï¼‰<br>2.æœ€å¤§æ”¯æŒ18EBçš„å¤§å®¹é‡ï¼ˆ1EB=1024 PBï¼Œ1PB=1024 TB ï¼‰<br>3.windows7 64ä½ä»¥åæ”¯æŒgtp</p><p>linuxçš„ç£ç›˜åˆ†åŒºä½œä¸ºæ–‡ä»¶è¢«æŒ‚è½½(mount)åˆ°æ ¹ç›®å½•ä¸‹çš„æ–‡ä»¶å¤¹ä¸­ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å°†å…¶å¸è½½(umount)ã€‚<br>ç¡¬ç›˜è¯´æ˜ï¼š<br>1.linuxç¡¬ç›˜åˆ†IDEç¡¬ç›˜å’ŒSCSIç¡¬ç›˜ï¼Œç›®å‰ä½¿ç”¨çš„åŸºæœ¬ä¸Šæ˜¯SCSIç¡¬ç›˜ã€‚<br>2.å¯¹äºIDEç¡¬ç›˜ï¼Œé©±åŠ¨å™¨æ ‡è¯†ç¬¦ä¸º <code>hdx~</code>ã€‚<br>3.å¯¹äºSCSIç¡¬ç›˜åˆ™æ ‡è¯†ç¬¦ä¸º<code>sdx~</code>ã€‚</p><p>æŸ¥çœ‹æ‰€æœ‰è®¾å¤‡çš„æŒ‚è½½æƒ…å†µï¼šlsblk æˆ–lsblk -f</p><p>åˆ†åŒºå‘½ä»¤ï¼šfdisk /dev/sdb<br>        n æ–°å¢åˆ†åŒº    w  å†™å…¥é€€å‡º<br>        æ ¼å¼åŒ–ç£ç›˜ï¼šmkfs -t ext4 /dev/sdb1<br>        æŒ‚è½½ç£ç›˜ï¼šmount  è®¾å¤‡åç§°  æŒ‚è½½ç›®å½•<br>        å¸è½½ç£ç›˜ï¼šumount   è®¾å¤‡åç§°æˆ–æŒ‚è½½ç›®å½•<br>        æ°¸ä¹…æŒ‚è½½ï¼šé€šè¿‡ä¿®æ”¹  /etc/fstab   â€”â€“&gt;   æ‰§è¡Œmount -a<br>4.æŸ¥è¯¢ç£ç›˜ä½¿ç”¨æƒ…å†µï¼š<br>æŸ¥è¯¢ç£ç›˜æ•´ä½“ä½¿ç”¨æƒ…å†µï¼šdf -lh<br>æŸ¥è¯¢æŒ‡å®šç›®å½•çš„ç£ç›˜ä½¿ç”¨æƒ…å†µï¼šdu -h ç›®å½•<br><strong>å·¥ä½œå¸¸ç”¨æŒ‡ä»¤ï¼š</strong><br>1ã€ç»Ÿè®¡/homeæ–‡ä»¶å¤¹ä¸‹æ–‡ä»¶çš„ä¸ªæ•°<br>ls -l /home |grep â€œ^-â€œ|wc -l<br>2ã€ç»Ÿè®¡/homeæ–‡ä»¶å¤¹ä¸‹çš„ç›®å½•ä¸ªæ•°<br>ls -l /home | grep â€œ^dâ€ | wc -l<br>3ã€ç»Ÿè®¡/homæ–‡ä»¶å¤¹ä¸‹æ–‡ä»¶çš„ä¸ªæ•°ï¼ŒåŒ…æ‹¬å­æ–‡ä»¶å¤¹é‡Œé¢çš„<br>ls -lR /home |grep â€œ^-â€œ|wc -l<br>4ã€ç»Ÿè®¡/homeæ–‡ä»¶å¤¹ä¸‹ç›®å½•çš„ä¸ªæ•°ï¼ŒåŒ…æ‹¬å­æ–‡ä»¶å¤¹ä¸‹çš„<br>ls -lR /home | grep â€œ^dâ€ | wc -l<br>5ã€ä»¥æ ‘çŠ¶æ˜¾ç¤ºæ–‡ä»¶ç»“æ„<br>tree ç›®å½•</p><h2 id="è¿›ç¨‹ç®¡ç†"><a href="#è¿›ç¨‹ç®¡ç†" class="headerlink" title="è¿›ç¨‹ç®¡ç†"></a>è¿›ç¨‹ç®¡ç†</h2><p><strong>æŸ¥çœ‹è¿›ç¨‹ï¼š</strong></p><p>ps -aux [| grep è¿›ç¨‹å]ï¼šæ˜¾ç¤ºå½“å‰ç»ˆç«¯æ‰€æœ‰çš„è¿›ç¨‹ä¿¡æ¯</p><p>ps  -efï¼šæŸ¥çœ‹çˆ¶è¿›ç¨‹</p><p><strong>ç»ˆæ­¢è¿›ç¨‹ï¼š</strong></p><p>kill [é€‰é¡¹] è¿›ç¨‹å·</p><p>killall è¿›ç¨‹å<br>é€‰é¡¹ï¼š9  å¼ºåˆ¶ç»ˆæ­¢</p><p><strong>serviceæœåŠ¡ç®¡ç†ï¼š</strong></p><p>service   æœåŠ¡å [start | stop | restart | reload | status]</p><p>ls -l /etc/init.d/     åˆ—å‡ºç³»ç»ŸæœåŠ¡</p><p><strong>åŠ¨æ€ç›‘æ§è¿›ç¨‹ï¼š</strong></p><p>top -d ç§’æ•°  ï¼šæ¯éš”å‡ ç§’å°±åˆ·æ–°</p><p><strong>ç›‘æ§ç½‘ç»œæƒ…å†µï¼š</strong></p><p>netstat [é€‰é¡¹]</p><p>-n æŒ‰ä¸€å®šé¡ºåºæ’åˆ—è¾“å‡º<br>-p æ˜¾ç¤ºå“ªä¸ªè¿›ç¨‹åœ¨è°ƒç”¨</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxç›®å½•ç»“æ„,Xshell,Xftpï¼Œvim</title>
      <link href="2020/02/24/linux-01/"/>
      <url>2020/02/24/linux-01/</url>
      
        <content type="html"><![CDATA[<h2 id="Linuxç›®å½•ç»“æ„"><a href="#Linuxç›®å½•ç»“æ„" class="headerlink" title="Linuxç›®å½•ç»“æ„"></a>Linuxç›®å½•ç»“æ„</h2><p>linuxçš„æ–‡ä»¶ç³»ç»Ÿé‡‡ç”¨çº§å±‚å¼çš„æ ‘çŠ¶ç›®å½•ç»“æ„ï¼Œæœ€ä¸Šå±‚æ˜¯æ ¹ç›®å½•  /  ï¼Œç„¶ååœ¨æ­¤åŸºç¡€ä¸Šåˆ›å»ºå…¶ä»–ç›®å½•ã€‚<br>                  <img src="/2020/02/24/linux-01/root.png" alt="å±‚æ¬¡ç»“æ„å›¾"><br><strong>/binï¼š</strong>Binaryçš„ç¼©å†™ï¼Œç”¨äºå­˜æ”¾æœ€ç»å¸¸ä½¿ç”¨çš„å‘½ä»¤ã€‚<br><strong>/sbinï¼š</strong>så°±æ˜¯Super User çš„æ„æ€ï¼Œç”¨äºå­˜æ”¾ç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨çš„ç³»ç»Ÿç®¡ç†ç¨‹åºã€‚<br><strong>/homeï¼š</strong>å­˜æ”¾æ™®é€šç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œæ¯ä¸€ä¸ªç”¨æˆ·éƒ½ç”¨è‡ªå·±çš„ä¸€ä¸ªç›®å½•ã€‚<br><strong>/rootï¼š</strong>ç³»ç»Ÿç®¡ç†å‘˜çš„ä¸»ç›®å½•ï¼Œä¹Ÿç§°ä¸ºè¶…çº§æƒé™è€…çš„ç”¨æˆ·ä¸»ç›®å½•ã€‚<br><strong>/libï¼š</strong>ç³»ç»Ÿå¼€æœºæ—¶éœ€è¦æœ€åŸºæœ¬çš„åŠ¨æ€è¿æ¥å…±äº«åº“ï¼Œç±»ä¼¼äºWindowsçš„DLLæ–‡ä»¶ã€‚å‡ ä¹æ‰€æœ‰çš„ç¨‹åºéƒ½è¦ç”¨åˆ°è¿™äº›å…±äº«åº“ã€‚<br><strong>/etcï¼š</strong>æ‰€æœ‰çš„ç³»ç»Ÿç®¡ç†æ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶å’Œå­ç›®å½•ã€‚my.conf<br><strong>/usrï¼š</strong>ç”¨æˆ·çš„å¾ˆå¤šç¨‹åºå’Œæ–‡ä»¶éƒ½å­˜æ”¾åœ¨æ­¤ç›®å½•ä¸‹ã€‚ç±»ä¼¼äºWIndowsçš„Program Filesç›®å½•ã€‚<br><strong>/bootï¼š</strong>å¯åŠ¨Linuxæ—¶ä½¿ç”¨çš„ä¸€äº›æ ¸å¿ƒæ–‡ä»¶ï¼ŒåŒ…æ‹¬ä¸€äº›è¿æ¥æ–‡ä»¶ä»¥åŠé•œåƒæ–‡ä»¶ã€‚<br><strong>/procï¼š</strong>æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„ç›®å½•ï¼Œå®ƒæ˜¯ç³»ç»Ÿå†…å­˜çš„æ˜ å°„ï¼Œè®¿é—®è¿™ä¸ªç›®å½•ç”¨æ¥è·å–ç³»ç»Ÿä¿¡æ¯ã€‚<br><strong>/srvï¼š</strong>service çš„ç¼©å†™ï¼Œç”¨äºå­˜æ”¾ä¸€äº›æœåŠ¡å¯åŠ¨ä¹‹åéœ€è¦æå–çš„æ•°æ®ã€‚<br><strong>/sysï¼š</strong>å®‰è£…æ¥äº†æ–°å‡ºç°çš„æ–‡ä»¶ç³»ç»Ÿsysfsã€‚<br><strong>/tmpï¼š</strong>å­˜æ”¾ä¸€äº›ä¸´æ—¶æ–‡ä»¶ã€‚<br><strong>/devï¼š</strong>ç±»ä¼¼äºWindowsçš„è®¾å¤‡ç®¡ç†å™¨ï¼ŒæŠŠæ‰€æœ‰ç¡¬ä»¶ç”¨æ–‡ä»¶çš„å½¢å¼å­˜å‚¨ã€‚<br><strong>/mediaï¼š</strong>linuxç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«ä¸€äº›è®¾å¤‡ï¼Œè¯†åˆ«åæŠŠè®¾åˆ«çš„è®¾å¤‡æŒ‚è½½åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚<br><strong>/mntï¼š</strong>è®©ç”¨æˆ·ä¸´æ—¶æŒ‚è½½åˆ«çš„æ–‡ä»¶ç³»ç»Ÿã€‚<br><strong>/optï¼š</strong>å­˜æ”¾é¢å¤–çš„å®‰è£…ç¨‹åºã€‚<br><strong>/usr/localï¼š</strong>ç»™ä¸»æœºé¢å¤–å®‰è£…è½¯ä»¶æ‰€å®‰è£…çš„ç›®å½•ã€‚<br><strong>/varï¼š</strong>å°†ç»å¸¸è¢«ä¿®æ”¹çš„ç›®å½•æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚åŒ…æ‹¬å„ç§æ—¥å¿—æ–‡ä»¶ã€‚</p><h2 id="è¿œç¨‹ç™»å½•Linux-Xshell"><a href="#è¿œç¨‹ç™»å½•Linux-Xshell" class="headerlink" title="è¿œç¨‹ç™»å½•Linux-Xshell"></a>è¿œç¨‹ç™»å½•Linux-Xshell</h2><p>1.Linuxéœ€è¦æ‰“å¼€sshdæœåŠ¡(<em>opensshçš„æœåŠ¡ç«¯ï¼šsshd</em> ; <em>opensshçš„å®¢æˆ·ç«¯ï¼šssh</em> )ï¼›<br>        sudo service ssh start<br>        è‹¥å‡ºç°Unit ssh.service not foundï¼Œåˆ™éœ€è¦å®‰è£…opensshæœåŠ¡ï¼š<br>        sudo apt-get install openssh-server<br>        2.æ‰“å¼€Xshellï¼Œå¹¶æ–°å»ºä¼šè¯ï¼Œå¡«å…¥éœ€è¦è¿œç¨‹ç™»å½•çš„ä¸»æœºçš„ipåœ°å€ï¼Œä¿å­˜ä¼šè¯ï¼›<br>        3.åŒå‡»å»ºç«‹çš„ä¼šè¯ï¼Œè¾“å…¥ç”¨æˆ·åä»¥åŠå¯†ç ï¼Œå»ºç«‹è¿æ¥ã€‚</p><h2 id="è¿œç¨‹ä¸Šä¼ -ä¸‹è½½-Xftp"><a href="#è¿œç¨‹ä¸Šä¼ -ä¸‹è½½-Xftp" class="headerlink" title="è¿œç¨‹ä¸Šä¼ /ä¸‹è½½-Xftp"></a>è¿œç¨‹ä¸Šä¼ /ä¸‹è½½-Xftp</h2><p>1.æ‰“å¼€Xftp,æ–°å»ºä¼šè¯ï¼Œå¡«å…¥éœ€è¦è¿œç¨‹ç™»å½•çš„ä¸»æœºçš„ipåœ°å€ä»¥åŠå¯†ç ï¼Œä¿å­˜ä¼šè¯ï¼›<br>        2.åŒå‡»ä¼šè¯ï¼Œå»ºç«‹è¿æ¥ã€‚</p><h2 id="viå’Œvimç¼–è¾‘å™¨"><a href="#viå’Œvimç¼–è¾‘å™¨" class="headerlink" title="viå’Œvimç¼–è¾‘å™¨"></a>viå’Œvimç¼–è¾‘å™¨</h2><p>__vi : __æ‰€æœ‰çš„linuxç³»ç»Ÿéƒ½ä¼šå†…å»º viæ–‡æœ¬ç¼–è¾‘å™¨ï¼›<br>        __vim : __å…·æœ‰ç¨‹åºç¼–è¾‘åŠŸèƒ½çš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚</p><h3 id="viå’Œvimçš„ä¸‰ç§å¸¸è§æ¨¡å¼"><a href="#viå’Œvimçš„ä¸‰ç§å¸¸è§æ¨¡å¼" class="headerlink" title="viå’Œvimçš„ä¸‰ç§å¸¸è§æ¨¡å¼"></a>viå’Œvimçš„ä¸‰ç§å¸¸è§æ¨¡å¼</h3><p><strong>1.æ­£å¸¸æ¨¡å¼ï¼š</strong><br>        ä»¥vim æ‰“å¼€ä¸€ä¸ªæ¡£æ¡ˆå°±ç›´æ¥è¿›å…¥ä¸€èˆ¬æ¨¡å¼äº†(è¿™æ˜¯é»˜è®¤çš„æ¨¡å¼)ã€‚åœ¨è¿™ä¸ªæ¨¡å¼ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ã€ä¸Šä¸‹å·¦å³ã€æŒ‰é”®        æ¥ç§»åŠ¨å…‰æ ‡ï¼Œä½ å¯ä»¥ä½¿ç”¨ã€åˆ é™¤å­—ç¬¦ã€æˆ–ã€åˆ é™¤æ•´è¡Œã€æ¥å¤„ç†æ¡£æ¡ˆå†…å®¹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ã€å¤åˆ¶ã€è´´ä¸Šã€æ¥å¤„ç†        ä½ çš„æ–‡ä»¶æ•°æ®ã€‚<br>        <strong>2.æ’å…¥æ¨¡å¼:</strong><br>        æŒ‰ä¸‹i, I, o, O, a, A, r, Rç­‰ä»»ä½•ä¸€ä¸ªå­—æ¯ä¹‹åæ‰ä¼šè¿›å…¥ç¼–è¾‘æ¨¡å¼, ä¸€èˆ¬æ¥è¯´æŒ‰iå³å¯ã€‚<br>        <strong>3.å‘½ä»¤è¡Œæ¨¡å¼:</strong><br>        åœ¨è¿™ä¸ªæ¨¡å¼å½“ä¸­ï¼Œå¯ä»¥æä¾›ä½ ç›¸å…³æŒ‡ä»¤ï¼Œå®Œæˆè¯»å–ã€å­˜ç›˜ã€æ›¿æ¢ã€ç¦»å¼€vim ã€æ˜¾ç¤ºè¡Œå·ç­‰çš„åŠ¨ä½œã€‚<br><em>vimæ¨¡å¼çš„ä¸‰ç§è½¬æ¢ï¼š</em></p><p><img src="/2020/02/24/linux-01/vim.png" alt="vimæ¨¡å¼åˆ‡æ¢"></p><p>wq : ä¿å­˜é€€å‡º<br>        q! : å¼ºåˆ¶é€€å‡ºä¸ä¿å­˜</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DQL,å¸¸è§å‡½æ•°</title>
      <link href="2020/02/22/mysql-02/"/>
      <url>2020/02/22/mysql-02/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºç¡€æŸ¥è¯¢"><a href="#åŸºç¡€æŸ¥è¯¢" class="headerlink" title="åŸºç¡€æŸ¥è¯¢"></a>åŸºç¡€æŸ¥è¯¢</h2><p><strong>è¯­æ³•ï¼š</strong><br>        select æŸ¥è¯¢åˆ—è¡¨ from è¡¨å<br><strong>ç‰¹ç‚¹ï¼š</strong><br>        1.æŸ¥è¯¢åˆ—è¡¨å¯ä»¥æ˜¯ï¼šè¡¨ä¸­çš„å­—æ®µï¼Œå¸¸é‡å€¼ï¼Œè¡¨è¾¾å¼ï¼Œå‡½æ•°ï¼›<br>        2.æŸ¥è¯¢çš„ç»“æœæ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„è¡¨æ ¼ã€‚<a id="more"></a></p><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true"># 1.æŸ¥è¯¢è¡¨ä¸­çš„å•ä¸ªå­—æ®µ</span><span class="token keyword">SELECT</span> first_name <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># 2.æŸ¥è¯¢è¡¨ä¸­çš„å¤šä¸ªå­—æ®µ</span><span class="token keyword">SELECT</span> first_name<span class="token punctuation">,</span>last_name <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># 3.æŸ¥è¯¢è¡¨ä¸­çš„æ‰€æœ‰å­—æ®µ</span><span class="token keyword">SELECT</span>  <span class="token operator">*</span> <span class="token keyword">from</span> employees<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># 4.æŸ¥è¯¢å¸¸é‡å€¼</span><span class="token keyword">SELECT</span> <span class="token string">'qwer'</span><span class="token punctuation">;</span><span class="token keyword">SELECT</span> <span class="token number">666</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># 5.æŸ¥è¯¢è¡¨è¾¾å¼</span><span class="token keyword">SELECT</span> <span class="token number">1</span><span class="token operator">+</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">;</span><span class="token keyword">SELECT</span> <span class="token number">100</span><span class="token operator">%</span><span class="token number">3</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># 6.æŸ¥è¯¢å‡½æ•°</span><span class="token keyword">SELECT</span> VERSION<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># 7.èµ·åˆ«å</span><span class="token comment" spellcheck="true"># æ–¹å¼ä¸€ï¼šä½¿ç”¨AS</span><span class="token keyword">SELECT</span> <span class="token number">9</span><span class="token operator">/</span><span class="token number">2</span> <span class="token keyword">AS</span> ç»“æœ<span class="token punctuation">;</span><span class="token keyword">SELECT</span> first_name <span class="token keyword">AS</span> å<span class="token punctuation">,</span>last_name <span class="token keyword">AS</span> å§“ <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æ–¹å¼äºŒï¼šä½¿ç”¨ç©ºæ ¼</span><span class="token keyword">SELECT</span> salary è–ªæ°´ <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># 8.å»é‡:ä½¿ç”¨DISTINCT</span><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> department_id <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># 9.+å·çš„ä½œç”¨ï¼šåªèƒ½ä½œè¿ç®—ç¬¦</span><span class="token keyword">SELECT</span> <span class="token string">'22'</span><span class="token operator">+</span><span class="token number">33</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- 55</span><span class="token keyword">SELECT</span> <span class="token string">'qwer'</span><span class="token operator">+</span><span class="token number">333</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- 333</span><span class="token keyword">SELECT</span> <span class="token boolean">null</span><span class="token operator">+</span><span class="token number">333</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- NULL</span><span class="token comment" spellcheck="true"># å­—ç¬¦ä¸²è¿æ¥å‡½æ•°CONCAT(str1,str2,...)</span><span class="token keyword">SELECT</span>  CONCAT<span class="token punctuation">(</span>last_name<span class="token punctuation">,</span> first_name<span class="token punctuation">)</span> <span class="token keyword">AS</span> å…¨å <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># 10.ä½¿ç”¨IFNULL(expr,exprä¸ºnullæ—¶éœ€è¦è¿”å›çš„å€¼)å¯¹ç»“æœä¸ºnullçš„æ•°æ®è¿›è¡Œå¤„ç†</span><span class="token keyword">SELECT</span> CONCAT<span class="token punctuation">(</span>salary<span class="token punctuation">,</span><span class="token string">','</span><span class="token punctuation">,</span>IFNULL<span class="token punctuation">(</span>commission_pct<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">'æœˆè–ª,å¹´å¥–é‡‘ç‡'</span> <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># 11.ISNULL(expr) exprä¸ºnull è¿”å›0ï¼Œå¦åˆ™è¿”å›1</span></code></pre><h2 id="æ¡ä»¶æŸ¥è¯¢"><a href="#æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="æ¡ä»¶æŸ¥è¯¢"></a>æ¡ä»¶æŸ¥è¯¢</h2><p><strong>è¯­æ³•ï¼š</strong><br>        select æŸ¥è¯¢åˆ—è¡¨ from è¡¨å where ç­›é€‰æ¡ä»¶<br>        <strong>åˆ†ç±»ï¼š</strong><br>        1.æŒ‰æ¡ä»¶è¡¨è¾¾å¼è¿›è¡Œç­›é€‰<br>        æ¡ä»¶è¿ç®—ç¬¦ï¼š&gt; &lt; != &lt;&gt; &gt;= &lt;=<br>        2.æŒ‰é€»è¾‘è¡¨è¾¾å¼<br>        &amp;&amp; || ! and or not<br>        3.æ¨¡ç³ŠæŸ¥è¯¢<br>         <em>likeï¼š</em><br>                1.ä¸€èˆ¬ä¸é€šé…ç¬¦æ­é…ä½¿ç”¨<br>                2.é€šé…ç¬¦(ä½¿ç”¨\è½¬ä¹‰)ï¼š<br>                     %ï¼šè¡¨ç¤º0ä¸ªæˆ–ä»»æ„å¤šä¸ªå­—ç¬¦;<br>                     _ ï¼šè¡¨ç¤ºä»»æ„å•ä¸ªå­—ç¬¦;<br>         <em>(not) between andï¼š</em> åŒ…å«è¾¹ç•Œå€¼<br>        <em>inï¼š</em> åˆ¤æ–­æŸå­—æ®µçš„å€¼æ˜¯å¦å±äºinåˆ—è¡¨ä¸­çš„æŸä¸€é¡¹<br>        inåˆ—è¡¨ä¸­çš„å…ƒç´ ç±»å‹è¦ç›¸åŒæˆ–å…¼å®¹<br>        <em>is null / is not nullï¼š</em>åªèƒ½åˆ¤æ–­æ˜¯å¦ä¸ºnull;<br>        &lt;=&gt; : å®‰å…¨ç­‰äºï¼Œæ—¢èƒ½åˆ¤æ–­æ˜¯å¦ä¸ºnullä¹Ÿèƒ½åˆ¤æ–­æ•°å­—;<br>        = å’Œ &lt;&gt;ä¸èƒ½åˆ¤æ–­null</p><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true"># 1.æŒ‰æ¡ä»¶è¡¨è¾¾å¼ç­›é€‰</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> salary<span class="token operator">></span><span class="token number">15000</span><span class="token punctuation">;</span><span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>first_name<span class="token punctuation">,</span>salary <span class="token keyword">FROM</span>  employees <span class="token keyword">WHERE</span> department_id<span class="token operator">&lt;></span><span class="token number">90</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># 2.æŒ‰é€»è¾‘è¡¨è¾¾å¼ç­›é€‰</span><span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>salary<span class="token punctuation">,</span>commission_pct <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> salary<span class="token operator">>=</span><span class="token number">10000</span> <span class="token operator">and</span> salary<span class="token operator">&lt;=</span><span class="token number">15000</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢éƒ¨é—¨ç¼–å·ä¸æ˜¯åœ¨90åˆ°110ä¹‹é—´ï¼Œæˆ–è€…å·¥èµ„é«˜äº12000çš„å‘˜å·¥çš„ä¿¡æ¯</span><span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>first_name<span class="token punctuation">,</span>salary <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> <span class="token operator">NOT</span><span class="token punctuation">(</span>department_id<span class="token operator">>=</span><span class="token number">90</span> <span class="token operator">AND</span> department_id<span class="token operator">&lt;=</span><span class="token number">110</span><span class="token punctuation">)</span> <span class="token operator">OR</span> salary<span class="token operator">></span><span class="token number">12000</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># 3.æ¨¡ç³Šç­›é€‰</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢å‘˜å·¥åä¸­åŒ…å«å­—ç¬¦açš„å‘˜å·¥ä¿¡æ¯</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> first_name <span class="token operator">LIKE</span> <span class="token string">'%a%'</span> <span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢å‘˜å·¥åä¸­ç¬¬ä¸‰ä¸ªå­—ç¬¦ä¸ºa,ç¬¬å››ä¸ªå­—ç¬¦ä¸ºnçš„å‘˜å·¥ä¿¡æ¯</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> first_name <span class="token operator">LIKE</span> <span class="token string">'__an%'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢å‘˜å·¥ç¼–å·åœ¨100~200ä¹‹é—´çš„å‘˜å·¥ä¿¡æ¯</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> employee_id <span class="token operator">BETWEEN</span> <span class="token number">100</span> <span class="token operator">AND</span> <span class="token number">200</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢å‘˜å·¥çš„å·¥ç§ç¼–å·æ˜¯IT_PROG,IT_VP,AD_PRESä¸­çš„ä¸€ä¸ªå‘˜å·¥çš„å‘˜å·¥åå’Œå·¥ç§ç¼–å·</span><span class="token keyword">SELECT</span> first_name<span class="token punctuation">,</span>job_id <span class="token keyword">FROM</span> employees <span class="token keyword">where</span> job_id <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">'IT_PROG'</span><span class="token punctuation">,</span><span class="token string">'IT_VP'</span><span class="token punctuation">,</span><span class="token string">'AD_PRES'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢æ²¡æœ‰å¥–é‡‘çš„å‘˜å·¥ä¿¡æ¯</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">where</span> commission_pct <span class="token operator">=</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- æŸ¥è¯¢ä¸åˆ°ç»“æœ</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> commission_pct <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span></code></pre><h2 id="æ’åºæŸ¥è¯¢"><a href="#æ’åºæŸ¥è¯¢" class="headerlink" title="æ’åºæŸ¥è¯¢"></a>æ’åºæŸ¥è¯¢</h2><p>è¯­æ³•ï¼šselect æŸ¥è¯¢åˆ—è¡¨ from è¡¨ where æŸ¥è¯¢æ¡ä»¶  order by æ’åºåˆ—è¡¨ asc/desc;<br>ç‰¹ç‚¹ï¼š1.asc:å‡åºï¼›desc:é™åºï¼›å¦‚æœä¸å†™ï¼Œé»˜è®¤ä¸ºå‡åº<br>            2.order by å­å¥æ”¯æŒå•ä¸ªå­—æ®µï¼Œå¤šä¸ªå­—æ®µï¼Œè¡¨è¾¾å¼ï¼Œå‡½æ•°ï¼Œåˆ«å<br>            3.order by å­å¥ä¸€èˆ¬æ”¾åœ¨æŸ¥è¯¢è¯­å¥çš„æœ€åé¢ï¼Œlimitå­å¥é™¤å¤–</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> salary <span class="token keyword">ASC</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- å‡åº</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> salary<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- çœç•¥æ—¶é»˜è®¤ä¸ºå‡åºæ’åˆ—</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> salary <span class="token keyword">DESC</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- é™åº</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢éƒ¨é—¨ç¼–å·>=90çš„å‘˜å·¥ä¿¡æ¯ï¼ŒæŒ‰å…¥èŒæ—¶é—´çš„å…ˆåé¡ºåºè¿›è¡Œæ’åº</span><span class="token keyword">SELECT</span> <span class="token operator">*</span>  <span class="token keyword">FROM</span> employees  <span class="token keyword">WHERE</span> department_id<span class="token operator">>=</span><span class="token number">90</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> hiredate<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŒ‰å¹´è–ªçš„é«˜ä½æ˜¾ç¤ºå‘˜å·¥çš„ä¿¡æ¯å’Œå¹´è–ªï¼ˆæŒ‰è¡¨è¾¾å¼æ’åºï¼‰</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token punctuation">,</span>salary<span class="token operator">*</span><span class="token number">12</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span>IFNULL<span class="token punctuation">(</span>commission_pct<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> salary<span class="token operator">*</span><span class="token number">12</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span>IFNULL<span class="token punctuation">(</span>commission_pct<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">DESC</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŒ‰åˆ«åæ’åº</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token punctuation">,</span>salary<span class="token operator">*</span><span class="token number">12</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span>IFNULL<span class="token punctuation">(</span>commission_pct<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">'å¹´è–ª'</span> <span class="token keyword">FROM</span> employees <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token string">'å¹´è–ª'</span> <span class="token keyword">DESC</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŒ‰å§“åçš„é•¿åº¦æ˜¾ç¤ºå‘˜å·¥çš„å§“åå’Œå·¥èµ„ï¼ˆæŒ‰å‡½æ•°å€¼è¿›è¡Œæ’åºï¼‰</span><span class="token keyword">SELECT</span> CONCAT<span class="token punctuation">(</span>last_name<span class="token punctuation">,</span>first_name<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">'å§“å'</span> <span class="token punctuation">,</span>LENGTH<span class="token punctuation">(</span>CONCAT<span class="token punctuation">(</span>last_name<span class="token punctuation">,</span>first_name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>salary <span class="token keyword">AS</span> <span class="token string">'å·¥èµ„'</span> <span class="token keyword">FROM</span> employees <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> LENGTH<span class="token punctuation">(</span>å§“å<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯ï¼Œè¦æ±‚å…ˆæŒ‰å·¥èµ„çš„å‡åºï¼Œå†æŒ‰å‘˜å·¥ç¼–å·çš„é™åºï¼ˆæŒ‰å¤šä¸ªå­—æ®µæ’åºï¼‰</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> salary <span class="token keyword">ASC</span><span class="token punctuation">,</span>employee_id <span class="token keyword">DESC</span><span class="token punctuation">;</span></code></pre><h2 id="å¸¸è§å‡½æ•°"><a href="#å¸¸è§å‡½æ•°" class="headerlink" title="å¸¸è§å‡½æ•°"></a>å¸¸è§å‡½æ•°</h2><p>æ¦‚å¿µï¼šç±»ä¼¼äºjavaä¸­çš„æ–¹æ³•ï¼Œå°†ä¸€ç»„é€»è¾‘è¯­å¥å°è£…åœ¨æ–¹æ³•ä½“ä¸­ï¼Œå¯¹å¤–æš´éœ²æ–¹æ³•å<br>å¥½å¤„ï¼šéšè—äº†å®ç°ç»†èŠ‚ï¼›æé«˜äº†ä»£ç çš„å¤ç”¨æ€§<br>è°ƒç”¨ï¼šselect å‡½æ•°å() from è¡¨å;<br>åˆ†ç±»ï¼š 1.å•è¡Œå‡½æ•°ï¼šä½œç”¨äºå•è¡Œæ•°æ®ï¼Œè¿”å›ä¸€ä¸ªç»“æœ<br>            2.åˆ†ç»„å‡½æ•°ï¼šä½œç”¨äºä¸€ç»„æ•°æ®ï¼Œå¹¶å¯¹ä¸€ç»„æ•°æ®è¿”å›ä¸€ä¸ªå€¼</p><h3 id="å•è¡Œå‡½æ•°"><a href="#å•è¡Œå‡½æ•°" class="headerlink" title="å•è¡Œå‡½æ•°"></a>å•è¡Œå‡½æ•°</h3><h4 id="ä¸€ã€å­—ç¬¦å‡½æ•°"><a href="#ä¸€ã€å­—ç¬¦å‡½æ•°" class="headerlink" title="ä¸€ã€å­—ç¬¦å‡½æ•°"></a>ä¸€ã€å­—ç¬¦å‡½æ•°</h4><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true"># 1.LENGTH(str) è·å–å‚æ•°å€¼çš„å­—èŠ‚ä¸ªæ•°</span><span class="token keyword">SELECT</span> LENGTH<span class="token punctuation">(</span><span class="token string">'å“ˆå“ˆhh'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- 8</span><span class="token comment" spellcheck="true"># 2.CONCAT(str1,str2,...) æ‹¼æ¥å­—ç¬¦ä¸²</span><span class="token comment" spellcheck="true"># 3.UPPER(str),LOWER(str)</span><span class="token keyword">SELECT</span> CONCAT<span class="token punctuation">(</span>upper<span class="token punctuation">(</span>last_name<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">' '</span><span class="token punctuation">,</span>lower<span class="token punctuation">(</span>first_name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">'å§“å'</span><span class="token keyword">FROM</span> employees<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># 4.SUBSTR(str FROM pos FOR len),substring()æˆªå–å­—ç¬¦ä¸²(ç´¢å¼•ä»1å¼€å§‹)</span><span class="token keyword">SELECT</span> SUBSTR<span class="token punctuation">(</span>last_name<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># 5.INSTR(str,substr) è¿”å›å­ä¸²åœ¨æ¯ä¸²ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ä½ç½®ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±è¿”å›0</span><span class="token keyword">SELECT</span> INSTR<span class="token punctuation">(</span><span class="token string">'helloworld'</span><span class="token punctuation">,</span><span class="token string">'world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- 6</span><span class="token keyword">SELECT</span> INSTR<span class="token punctuation">(</span><span class="token string">'helloworld'</span><span class="token punctuation">,</span><span class="token string">'word'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- 0</span><span class="token comment" spellcheck="true"># 6.TRIM([remstr FROM] str) å»æ‰é¦–å°¾ç©ºæ ¼æˆ–æŒ‡å®šå­—ç¬¦ä¸²</span><span class="token comment" spellcheck="true"># 7.LPAD(str,len,padstr) /RPAD(str,len,padstr)ç”¨æŒ‡å®šçš„å­—ç¬¦å®ç°å·¦/å³å¡«å……æŒ‡å®šé•¿åº¦</span><span class="token comment" spellcheck="true"># REPLACE(str,from_str,to_str) æ›¿æ¢</span></code></pre><h4 id="äºŒã€æ•°å­¦å‡½æ•°"><a href="#äºŒã€æ•°å­¦å‡½æ•°" class="headerlink" title="äºŒã€æ•°å­¦å‡½æ•°"></a>äºŒã€æ•°å­¦å‡½æ•°</h4><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true"># 1.ROUND(X) å››èˆäº”å…¥</span><span class="token keyword">SELECT</span> <span class="token function">ROUND</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1.55</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- -2</span><span class="token keyword">SELECT</span> <span class="token function">ROUND</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1.566</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- -1.57</span><span class="token comment" spellcheck="true"># 2.CEIL(X) å‘ä¸Šå–æ•´ï¼Œè¿”å›>=è¯¥å‚æ•°çš„æœ€å°æ•´æ•°</span><span class="token comment" spellcheck="true"># 3.FLOOR(X) å‘ä¸‹å–æ•´ï¼Œè¿”å›&lt;=è¯¥å‚æ•°çš„æœ€å¤§æ•´æ•°</span><span class="token comment" spellcheck="true"># 4.TRUNCATE(X,D) ä»å°æ•°ç‚¹åDä½æˆªæ–­</span><span class="token keyword">SELECT</span> <span class="token keyword">TRUNCATE</span><span class="token punctuation">(</span><span class="token number">1.29</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- 1.2</span><span class="token comment" spellcheck="true"># 5.MOD(N,M) å–ä½™:ç¬¦å·ä¸è¢«é™¤æ•°ç›¸åŒ</span><span class="token keyword">SELECT</span> MOD<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- -1</span><span class="token keyword">SELECT</span> MOD<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- 1</span></code></pre><h4 id="ä¸‰ã€æ—¥æœŸå‡½æ•°"><a href="#ä¸‰ã€æ—¥æœŸå‡½æ•°" class="headerlink" title="ä¸‰ã€æ—¥æœŸå‡½æ•°"></a>ä¸‰ã€æ—¥æœŸå‡½æ•°</h4><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true"># NOW() è¿”å›å½“å‰ç³»ç»Ÿæ—¥æœŸ+æ—¶é—´</span><span class="token keyword">SELECT</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- 2020-02-23 11:27:48</span><span class="token comment" spellcheck="true"># CURDATE() è¿”å›å½“å‰ç³»ç»Ÿçš„æ—¥æœŸ</span><span class="token keyword">SELECT</span> CURDATE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- 2020-02-23</span><span class="token comment" spellcheck="true"># CURTIME() è¿”å›å½“å‰ç³»ç»Ÿçš„äº‹ä»¶</span><span class="token keyword">SELECT</span> CURTIME<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- 11:30:11</span><span class="token comment" spellcheck="true"># è·å–æŒ‡å®šçš„å¹´ï¼Œæœˆï¼Œæ—¥ï¼Œæ—¶ï¼Œåˆ†ï¼Œç§’</span><span class="token keyword">SELECT</span> YEAR<span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> å¹´ä»½<span class="token punctuation">;</span><span class="token keyword">SELECT</span> YEAR<span class="token punctuation">(</span><span class="token string">'1999-2-2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- 1999</span><span class="token keyword">SELECT</span> MONTH<span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> æœˆ<span class="token punctuation">;</span><span class="token keyword">SELECT</span> MONTHNAME<span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- February</span><span class="token keyword">SELECT</span> DAY<span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span>  æ—¥<span class="token punctuation">;</span><span class="token keyword">SELECT</span> HOUR<span class="token punctuation">(</span>CURTIME<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> æ—¶<span class="token punctuation">;</span> <span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>CURTIME<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> åˆ†<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># STR_TO_DATE(str,format) å°†å­—ç¬¦é€šè¿‡æŒ‡å®šçš„æ ¼å¼è½¬æ¢æˆæ—¥æœŸ</span><span class="token keyword">SELECT</span> STR_TO_DATE<span class="token punctuation">(</span><span class="token string">'1999-2-29'</span><span class="token punctuation">,</span><span class="token string">'%Y-%c-%d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- 1999-02-29</span><span class="token keyword">SELECT</span> STR_TO_DATE<span class="token punctuation">(</span><span class="token string">'99-02-29'</span><span class="token punctuation">,</span><span class="token string">'%y-%m-%d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">#  DATE_FORMAT(date,format) å°†æ—¥æœŸè½¬æ¢æˆå­—ç¬¦</span><span class="token keyword">SELECT</span> DATE_FORMAT<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'%Yå¹´%mæœˆ%dæ—¥'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">-- 2020å¹´02æœˆ23æ—¥</span><span class="token keyword">SELECT</span> DATE_FORMAT<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'%yå¹´%cæœˆ%dæ—¥'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- 20å¹´2æœˆ23æ—¥</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢æœ‰å¥–é‡‘çš„å‘˜å·¥åå’Œå…¥èŒæ—¥æœŸ(xxæœˆ/xxæ—¥ xxå¹´)</span><span class="token keyword">SELECT</span> last_name <span class="token keyword">AS</span> å§“å<span class="token punctuation">,</span>DATE_FORMAT<span class="token punctuation">(</span>hiredate<span class="token punctuation">,</span><span class="token string">'%mæœˆ/%dæ—¥ %yå¹´'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> å…¥èŒæ—¥æœŸ <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> commission_pct <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span></code></pre><h4 id="å››ã€å…¶ä»–å‡½æ•°"><a href="#å››ã€å…¶ä»–å‡½æ•°" class="headerlink" title="å››ã€å…¶ä»–å‡½æ•°"></a>å››ã€å…¶ä»–å‡½æ•°</h4><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> VERSION<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">SELECT</span> <span class="token keyword">DATABASE</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">SELECT</span> <span class="token keyword">USER</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="äº”ã€æµç¨‹æ§åˆ¶å‡½æ•°"><a href="#äº”ã€æµç¨‹æ§åˆ¶å‡½æ•°" class="headerlink" title="äº”ã€æµç¨‹æ§åˆ¶å‡½æ•°"></a>äº”ã€æµç¨‹æ§åˆ¶å‡½æ•°</h4><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true"># IF(expr1,expr2,expr3)</span><span class="token keyword">SELECT</span> <span class="token keyword">IF</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">></span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'true'</span><span class="token punctuation">,</span><span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># case ç”¨æ³•ä¸€ï¼šç›¸å½“äºjavaä¸­çš„switch()</span><span class="token comment" spellcheck="true">/*CASE è¦åˆ¤æ–­çš„å­—æ®µæˆ–è¡¨è¾¾å¼    WHEN å¸¸é‡1 THEN        è¦æ˜¾ç¤ºçš„å€¼1(æˆ–è¯­å¥1;)    ELSE        è¦æ˜¾ç¤ºçš„å€¼n(æˆ–è¯­å¥n;)    END;*/</span><span class="token comment" spellcheck="true">/*æŸ¥è¯¢å‘˜å·¥å·¥èµ„ï¼Œè¦æ±‚ï¼šéƒ¨é—¨å·=30ï¼Œæ˜¾ç¤ºå·¥èµ„ä¸º1.1å€ï¼›éƒ¨é—¨å·=40ï¼Œæ˜¾ç¤ºå·¥èµ„ä¸º1.2å€ï¼›éƒ¨é—¨å·=50ï¼Œæ˜¾ç¤ºå·¥èµ„ä¸º1.3å€ï¼›*/</span><span class="token keyword">SELECT</span> salary    <span class="token keyword">AS</span> åŸå§‹å·¥èµ„<span class="token punctuation">,</span>department_id <span class="token keyword">AS</span> éƒ¨é—¨å·<span class="token punctuation">,</span><span class="token keyword">CASE</span> department_id    <span class="token keyword">WHEN</span> <span class="token number">30</span> <span class="token keyword">THEN</span>        salary <span class="token operator">*</span><span class="token number">1.1</span>    <span class="token keyword">WHEN</span> <span class="token number">40</span> <span class="token keyword">THEN</span>        salary<span class="token operator">*</span><span class="token number">1.2</span>    <span class="token keyword">WHEN</span> <span class="token number">50</span> <span class="token keyword">THEN</span>        salary<span class="token operator">*</span><span class="token number">1.3</span>    <span class="token keyword">ELSE</span> salary<span class="token keyword">END</span> <span class="token keyword">AS</span> æœ€ç»ˆå·¥èµ„ <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># caseç”¨æ³•äºŒï¼šç›¸å½“äºjavaä¸­if()  else if() else </span><span class="token comment" spellcheck="true">/*CASE     WHEN æ¡ä»¶1 THEN        è¦æ˜¾ç¤ºçš„å€¼1(æˆ–è¯­å¥1;)    WHEN æ¡ä»¶2 THEN        è¦æ˜¾ç¤ºçš„å€¼2(æˆ–è¯­å¥2;)    ELSE        è¦æ˜¾ç¤ºçš„å€¼n(æˆ–è¯­å¥n;)END CASE;*/</span><span class="token comment" spellcheck="true">/*æŸ¥è¯¢å‘˜å·¥çš„å·¥èµ„æƒ…å†µå¦‚æœå·¥èµ„>20000,æ˜¾ç¤ºAçº§åˆ«ï¼›å¦‚æœå·¥èµ„>15000,æ˜¾ç¤ºBçº§åˆ«ï¼›å¦‚æœå·¥èµ„>10000,æ˜¾ç¤ºCçº§åˆ«ï¼›å…¶ä½™çš„æ˜¾ç¤ºDçº§åˆ«*/</span><span class="token keyword">SELECT</span> salary <span class="token keyword">AS</span> <span class="token string">'å·¥èµ„'</span><span class="token punctuation">,</span><span class="token keyword">CASE</span>     <span class="token keyword">WHEN</span> salary<span class="token operator">></span><span class="token number">20000</span> <span class="token keyword">THEN</span> <span class="token string">'A'</span>    <span class="token keyword">WHEN</span> salary<span class="token operator">></span><span class="token number">15000</span> <span class="token keyword">THEN</span> <span class="token string">'B'</span>    <span class="token keyword">WHEN</span> salary<span class="token operator">></span><span class="token number">10000</span> <span class="token keyword">THEN</span> <span class="token string">'C'</span>    <span class="token keyword">ELSE</span> <span class="token string">'D'</span><span class="token keyword">END</span> <span class="token keyword">AS</span> <span class="token string">'å·¥èµ„ç­‰çº§'</span> <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span></code></pre><h3 id="åˆ†ç»„å‡½æ•°"><a href="#åˆ†ç»„å‡½æ•°" class="headerlink" title="åˆ†ç»„å‡½æ•°"></a>åˆ†ç»„å‡½æ•°</h3><p><strong>ä½œç”¨ï¼š</strong>ç”¨ä½œç»Ÿè®¡ä½¿ç”¨ï¼Œåˆç§°èšåˆå‡½æ•°ï¼Œç»Ÿè®¡å‡½æ•°ï¼Œç»„å‡½æ•°<br>        <strong>ç‰¹ç‚¹ï¼š</strong><br>        1.sumï¼Œavgä¸€èˆ¬å¤„ç†æ•°å€¼å‹æ•°æ®ï¼›maxï¼Œminï¼Œcountå¯ä»¥å¤„ç†ä»»ä½•ç±»å‹<br>        2.ä»¥ä¸Šåˆ†ç»„å‡½æ•°éƒ½å¿½ç•¥nullå€¼<br>        3.å¯ä»¥å’Œdiscount()æ­é…ä½¿ç”¨å®ç°å»é‡<br>        4.ä¸€èˆ¬ä½¿ç”¨count(*)ç»Ÿè®¡è¡Œæ•°ï¼Œæ²¡æœ‰è®°å½•è¿”å›0<br>        5.å’Œåˆ†ç»„å‡½æ•°ä¸€èµ·æŸ¥è¯¢çš„å­—æ®µå¿…é¡»æ˜¯group byåé¢çš„å­—æ®µ</p><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true"># sum() æ±‚å’Œ</span><span class="token keyword">SELECT</span> <span class="token function">sum</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># avg() æ±‚å¹³å‡å€¼</span><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># max() æ±‚æœ€å¤§å€¼;min() æ±‚æœ€å°å€¼</span><span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span><span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># count() è®¡ç®—ä¸ªæ•°</span><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>employee_id<span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢å‘˜å·¥è¡¨ä¸­æœ€å¤§å…¥èŒæ—¶é—´å’Œæœ€å°å…¥èŒæ—¶é—´çš„ç›¸å·®å¤©æ•°</span><span class="token keyword">SELECT</span> DATEDIFF<span class="token punctuation">(</span><span class="token function">MAX</span><span class="token punctuation">(</span>hiredate<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">MIN</span><span class="token punctuation">(</span>hiredate<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢éƒ¨é—¨ç¼–å·ä¸º60çš„å‘˜å·¥ä¸ªæ•°</span><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> department_id <span class="token operator">=</span> <span class="token number">60</span><span class="token punctuation">;</span></code></pre><h2 id="åˆ†ç»„æŸ¥è¯¢"><a href="#åˆ†ç»„æŸ¥è¯¢" class="headerlink" title="åˆ†ç»„æŸ¥è¯¢"></a>åˆ†ç»„æŸ¥è¯¢</h2><p><strong>è¯­æ³•ï¼š</strong><br>        select åˆ†ç»„å‡½æ•°,åˆ—(è¦æ±‚å‡ºç°åœ¨group byçš„åé¢)<br>        from è¡¨<br>        where ç­›é€‰æ¡ä»¶<br>        group by åˆ†ç»„çš„åˆ—è¡¨<br>        order by å­å¥<br>        ç‰¹ç‚¹ï¼šåˆ†ç»„æŸ¥è¯¢ä¸­çš„ç­›é€‰æ¡ä»¶åˆ†ä¸ºä¸¤ç±»<br>            åˆ†ç»„å‰ç­›é€‰ï¼šæ•°æ®æºåœ¨åŸå§‹è¡¨ä¸­ï¼Œä½äºgroup byå­å¥å‰é¢ï¼Œä½¿ç”¨whereå…³é”®å­—ï¼›<br>            åˆ†ç»„åç­›é€‰ï¼šæ•°æ®æºåœ¨åˆ†ç»„åçš„ç»“æœé›†ä¸­ï¼Œä½äºgroup byå­å¥åé¢ï¼Œä½¿ç”¨havingå…³é”®å­—<br>            1.åˆ†ç»„å‡½æ•°ä½œæ¡ä»¶è‚¯å®šæ”¾åœ¨havingå<br>            2.èƒ½åˆ†ç»„å‰ç­›é€‰å°½é‡æ”¾åœ¨group byå‰é¢</p><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true"># æŸ¥è¯¢æ¯ä¸ªå·¥ç§çš„æœ€é«˜å·¥èµ„</span><span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span>job_id <span class="token keyword">FROM</span> employees <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> job_id<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢æ¯ä¸ªä½ç½®ä¸Šçš„éƒ¨é—¨ä¸ªæ•°</span><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span>location_id <span class="token keyword">FROM</span> departments <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> location_id<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢é‚®ç®±ä¸­åŒ…å«aå­—ç¬¦çš„ï¼Œæ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„</span><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span>department_id <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> email <span class="token operator">LIKE</span> <span class="token string">"%a%"</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> department_id<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢å‘˜å·¥æ•°>2çš„éƒ¨é—¨</span><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span>department_id <span class="token keyword">FROM</span> employees <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> department_id <span class="token keyword">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token number">2</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢æ¯ä¸ªå·¥ç§æœ‰å¥–é‡‘çš„å‘˜å·¥çš„æœ€é«˜å·¥èµ„>12000çš„å·¥ç§ç¼–å·å’Œæœ€é«˜å·¥èµ„</span><span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span>job_id <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> commission_pct <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">HAVING</span> <span class="token function">MAX</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token operator">></span><span class="token number">12000</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢é¢†å¯¼ç¼–å·>102çš„æ¯ä¸ªé¢†å¯¼æ‰‹ä¸‹çš„æœ€ä½å·¥èµ„>5000çš„é¢†å¯¼ç¼–å·æ˜¯å“ªä¸€ä¸ªï¼Œä»¥åŠæœ€ä½å·¥èµ„</span><span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span>manager_id <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> manager_id<span class="token operator">></span><span class="token number">102</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> manager_id <span class="token keyword">HAVING</span> <span class="token function">MIN</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token operator">></span><span class="token number">5000</span> <span class="token comment" spellcheck="true"># æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨æ¯ä¸ªå·¥ç§çš„å‘˜å·¥çš„å¹³å‡å·¥èµ„ï¼Œå¹¶æŒ‰å¹³å‡å·¥èµ„çš„é«˜ä½æ˜¾ç¤º </span><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span>job_id<span class="token punctuation">,</span>department_id <span class="token keyword">FROM</span> employees <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> job_id<span class="token punctuation">,</span>department_id <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">DESC</span><span class="token punctuation">;</span></code></pre><h2 id="è¿æ¥æŸ¥è¯¢"><a href="#è¿æ¥æŸ¥è¯¢" class="headerlink" title="è¿æ¥æŸ¥è¯¢"></a>è¿æ¥æŸ¥è¯¢</h2><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true"># ä¸€ã€å†…è¿æ¥</span><span class="token comment" spellcheck="true">/*è¯­æ³•ï¼šselect æŸ¥è¯¢åˆ—è¡¨from è¡¨1 åˆ«åinner join è¡¨2 åˆ«åon è¿æ¥æ¡ä»¶*/</span><span class="token comment" spellcheck="true"># 1.ç­‰å€¼</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢å‘˜å·¥åã€éƒ¨é—¨å</span><span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>department_name <span class="token keyword">FROM</span> departments <span class="token number">d</span> <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> employees <span class="token number">e</span><span class="token keyword">ON</span> <span class="token number">d</span><span class="token punctuation">.</span>department_id <span class="token operator">=</span> <span class="token number">e</span><span class="token punctuation">.</span>department_id<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢åå­—ä¸­åŒ…å«eçš„å‘˜å·¥åå’Œå·¥ç§å</span><span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>job_title <span class="token keyword">from</span> employees <span class="token number">e</span> <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> jobs j<span class="token keyword">ON</span> <span class="token number">e</span><span class="token punctuation">.</span>job_id<span class="token operator">=</span> j<span class="token punctuation">.</span>job_id <span class="token keyword">where</span> <span class="token number">e</span><span class="token punctuation">.</span>last_name <span class="token operator">LIKE</span> <span class="token string">"%e%"</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢éƒ¨é—¨ä¸ªæ•°>3çš„åŸå¸‚åå’Œéƒ¨é—¨ä¸ªæ•°</span><span class="token keyword">SELECT</span> city<span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> éƒ¨é—¨ä¸ªæ•° <span class="token keyword">FROM</span> locations l <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> departments <span class="token number">d</span> <span class="token keyword">ON</span> l<span class="token punctuation">.</span>location_id<span class="token operator">=</span><span class="token number">d</span><span class="token punctuation">.</span>location_id <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> city <span class="token keyword">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true"># æŸ¥è¯¢å“ªä¸ªéƒ¨é—¨çš„éƒ¨é—¨å‘˜å·¥ä¸ªæ•°>3çš„éƒ¨é—¨åå’Œå‘˜å·¥ä¸ªæ•°ï¼Œå¹¶æŒ‰ä¸ªæ•°é™åºæ’åº</span><span class="token keyword">SELECT</span> department_name<span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> éƒ¨é—¨å‘˜å·¥ä¸ªæ•° <span class="token keyword">FROM</span> departments <span class="token number">d</span> <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> employees <span class="token number">e</span><span class="token keyword">ON</span> <span class="token number">d</span><span class="token punctuation">.</span>department_id <span class="token operator">=</span> <span class="token number">e</span><span class="token punctuation">.</span>department_id <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> department_name <span class="token keyword">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token number">3</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">DESC</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># 2.éç­‰å€¼</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢å‘˜å·¥çš„å·¥èµ„ç­‰çº§</span><span class="token keyword">SELECT</span> salary<span class="token punctuation">,</span>grade_level <span class="token keyword">FROM</span> employees <span class="token number">e</span> <span class="token keyword">JOIN</span> job_grades j <span class="token keyword">ON</span> salary <span class="token operator">BETWEEN</span> j<span class="token punctuation">.</span>lowest_sal <span class="token operator">AND</span> j<span class="token punctuation">.</span>highest_sal<span class="token punctuation">;</span><span class="token comment" spellcheck="true">#3.è‡ªè¿æ¥</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢å‘˜å·¥åã€ä¸Šçº§çš„åå­—</span><span class="token keyword">SELECT</span> <span class="token number">e</span><span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>m<span class="token punctuation">.</span>last_name <span class="token keyword">FROM</span> employees <span class="token number">e</span> <span class="token keyword">JOIN</span> employees m<span class="token keyword">ON</span> <span class="token number">e</span><span class="token punctuation">.</span>manager_id <span class="token operator">=</span> m<span class="token punctuation">.</span>employee_id<span class="token punctuation">;</span></code></pre><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true"># äºŒã€å¤–è¿æ¥</span><span class="token comment" spellcheck="true">/*ç”¨äºæŸ¥è¯¢ä¸€ä¸ªè¡¨ä¸­æœ‰ï¼Œå¦ä¸€ä¸ªè¡¨ä¸­æ²¡æœ‰çš„å­—æ®µç‰¹ç‚¹ï¼š1.å¤–è¿æ¥çš„æŸ¥è¯¢ç»“æœä¸ºä¸»è¡¨ä¸­çš„æ‰€æœ‰è®°å½•        å¦‚æœä»è¡¨ä¸­æœ‰å’Œå®ƒåŒ¹é…çš„ï¼Œåˆ™æ˜¾ç¤ºåŒ¹é…çš„å€¼        å¦åˆ™æ˜¾ç¤ºnull        å¤–è¿æ¥çš„æŸ¥è¯¢ç»“æœ=å†…è¿æ¥çš„ç»“æœ+ä¸»è¡¨ä¸­æœ‰ è€Œ ä»è¡¨ä¸­æ²¡æœ‰çš„è®°å½•2.å·¦å¤–è¿æ¥ï¼Œleft [outer] join   å·¦è¾¹çš„æ˜¯ä¸»è¡¨  å³å¤–è¿æ¥ï¼Œright [outer] join  å³è¾¹çš„æ˜¯ä¸»è¡¨3.å…¨å¤–è¿æ¥=å†…è¿æ¥çš„ç»“æœ+è¡¨1ä¸­æœ‰å•è¡¨2ä¸­æ²¡æœ‰çš„+è¡¨2ä¸­æœ‰çš„è€Œè¡¨1ä¸­æ²¡æœ‰çš„*/</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢æ²¡æœ‰å‘˜å·¥çš„éƒ¨é—¨ä¿¡æ¯</span><span class="token keyword">SELECT</span> <span class="token number">d</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">FROM</span> departments <span class="token number">d</span> <span class="token keyword">LEFT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> employees <span class="token number">e</span><span class="token keyword">ON</span> <span class="token number">d</span><span class="token punctuation">.</span>department_id<span class="token operator">=</span><span class="token number">e</span><span class="token punctuation">.</span>department_id <span class="token keyword">WHERE</span> employee_id <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span></code></pre><h2 id="å­æŸ¥è¯¢"><a href="#å­æŸ¥è¯¢" class="headerlink" title="å­æŸ¥è¯¢"></a>å­æŸ¥è¯¢</h2><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true"># å­æŸ¥è¯¢</span><span class="token comment" spellcheck="true">/*å‡ºç°åœ¨å…¶ä»–è¯­å¥å†…éƒ¨çš„selectè¯­å¥ï¼Œç§°ä¸ºå­æŸ¥è¯¢*/</span><span class="token comment" spellcheck="true"># whereæˆ–havingåé¢</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢å·¥èµ„æ¯” Abelé«˜çš„å‘˜å·¥ä¿¡æ¯</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> salary<span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> salary <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> last_name<span class="token operator">=</span><span class="token string">"Abel"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢æœ€ä½å·¥èµ„å¤§äº50å·éƒ¨é—¨æœ€ä½å·¥èµ„çš„éƒ¨é—¨idå’Œå…¶æœ€ä½å·¥èµ„</span><span class="token keyword">SELECT</span> department_id<span class="token punctuation">,</span><span class="token function">MIN</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span>  employees <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> department_id <span class="token keyword">HAVING</span> <span class="token function">MIN</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> department_id<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢location_idåœ¨1400æˆ–1700çš„éƒ¨é—¨ä¸­çš„æ‰€æœ‰å‘˜å·¥çš„å§“å</span><span class="token keyword">SELECT</span> last_name <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> department_id <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> department_id <span class="token keyword">FROM</span>    departments  <span class="token keyword">WHERE</span> location_id <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token number">1400</span><span class="token punctuation">,</span><span class="token number">1700</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># selectåé¢</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„äººæ•°</span><span class="token keyword">SELECT</span> <span class="token number">d</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees <span class="token number">e</span> <span class="token keyword">WHERE</span> <span class="token number">e</span><span class="token punctuation">.</span>department_id <span class="token operator">=</span> <span class="token number">d</span><span class="token punctuation">.</span>department_id<span class="token punctuation">)</span> ä¸ªæ•°<span class="token keyword">FROM</span> departments <span class="token number">d</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># fromåé¢</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„çš„ç­‰çº§</span><span class="token keyword">SELECT</span> ag_dep<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>g<span class="token punctuation">.</span>grade_level <span class="token keyword">FROM</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> ag<span class="token punctuation">,</span>department_id <span class="token keyword">FROM</span> employees <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> department_id<span class="token punctuation">)</span> ag_dep <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> job_grades g <span class="token keyword">ON</span>  ag_dep<span class="token punctuation">.</span>ag <span class="token operator">BETWEEN</span> lowest_sal <span class="token operator">AND</span> highest_sal<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># å­æŸ¥è¯¢</span><span class="token comment" spellcheck="true">/*å‡ºç°åœ¨å…¶ä»–è¯­å¥å†…éƒ¨çš„selectè¯­å¥ï¼Œç§°ä¸ºå­æŸ¥è¯¢*/</span><span class="token comment" spellcheck="true"># whereæˆ–havingåé¢</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢å·¥èµ„æ¯” Abelé«˜çš„å‘˜å·¥ä¿¡æ¯</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> salary<span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> salary <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> last_name<span class="token operator">=</span><span class="token string">"Abel"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢æœ€ä½å·¥èµ„å¤§äº50å·éƒ¨é—¨æœ€ä½å·¥èµ„çš„éƒ¨é—¨idå’Œå…¶æœ€ä½å·¥èµ„</span><span class="token keyword">SELECT</span> department_id<span class="token punctuation">,</span><span class="token function">MIN</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span>  employees <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> department_id <span class="token keyword">HAVING</span> <span class="token function">MIN</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> department_id<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢location_idåœ¨1400æˆ–1700çš„éƒ¨é—¨ä¸­çš„æ‰€æœ‰å‘˜å·¥çš„å§“å</span><span class="token keyword">SELECT</span> last_name <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> department_id <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> department_id <span class="token keyword">FROM</span>    departments  <span class="token keyword">WHERE</span> location_id <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token number">1400</span><span class="token punctuation">,</span><span class="token number">1700</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># selectåé¢</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„äººæ•°</span><span class="token keyword">SELECT</span> <span class="token number">d</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees <span class="token number">e</span> <span class="token keyword">WHERE</span> <span class="token number">e</span><span class="token punctuation">.</span>department_id <span class="token operator">=</span> <span class="token number">d</span><span class="token punctuation">.</span>department_id<span class="token punctuation">)</span> ä¸ªæ•°<span class="token keyword">FROM</span> departments <span class="token number">d</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># fromåé¢</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„çš„ç­‰çº§</span><span class="token keyword">SELECT</span> ag_dep<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>g<span class="token punctuation">.</span>grade_level <span class="token keyword">FROM</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> ag<span class="token punctuation">,</span>department_id <span class="token keyword">FROM</span> employees <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> department_id<span class="token punctuation">)</span> ag_dep <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> job_grades g <span class="token keyword">ON</span>  ag_dep<span class="token punctuation">.</span>ag <span class="token operator">BETWEEN</span> lowest_sal <span class="token operator">AND</span> highest_sal<span class="token punctuation">;</span></code></pre><h2 id="åˆ†é¡µæŸ¥è¯¢"><a href="#åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="åˆ†é¡µæŸ¥è¯¢"></a>åˆ†é¡µæŸ¥è¯¢</h2><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true"># åˆ†é¡µæŸ¥è¯¢</span><span class="token comment" spellcheck="true">/*åˆ†é¡µæäº¤sqlè¯·æ±‚select æŸ¥è¯¢åˆ—è¡¨ from è¡¨å limit èµ·å§‹ç´¢å¼•(ä»0å¼€å§‹)ï¼Œç»“æœçš„æ•°ç›®limitè¯­å¥æ”¾åœ¨æŸ¥è¯¢è¯­å¥çš„æœ€å è¦æ˜¾ç¤ºçš„é¡µæ•° page , æ¯é¡µçš„æ¡ç›®æ•°sizeselect æŸ¥è¯¢åˆ—è¡¨ from è¡¨å limit (page-1)*size,size;*/</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢å‰5æ¡å‘˜å·¥ä¿¡æ¯</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">;</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span>    employees    <span class="token keyword">LIMIT</span> <span class="token number">5</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢ç¬¬11æ¡~ç¬¬25æ¡çš„ä¿¡æ¯</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">LIMIT</span> <span class="token number">11</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># æŸ¥è¯¢æœ‰å¥–é‡‘çš„å‘˜å·¥ä¿¡æ¯ï¼Œå¹¶ä¸”å·¥èµ„è¾ƒé«˜çš„å‰10åæ˜¾ç¤ºå‡ºæ¥</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span>    commission_pct <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> salary    <span class="token keyword">DESC</span> <span class="token keyword">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">;</span></code></pre><h2 id="è”åˆæŸ¥è¯¢"><a href="#è”åˆæŸ¥è¯¢" class="headerlink" title="è”åˆæŸ¥è¯¢"></a>è”åˆæŸ¥è¯¢</h2><p>å°†å¤šæ¡æŸ¥è¯¢è¯­å¥çš„ç»“æœåˆå¹¶åœ¨ä¸€èµ·<br>è¯­æ³•ï¼š<br>select æŸ¥è¯¢åˆ—è¡¨1 from è¡¨å union select æŸ¥è¯¢åˆ—è¡¨2 from è¡¨å<br>ç‰¹ç‚¹ï¼š<br>1ã€è¦æŸ¥è¯¢çš„ç»“æœæ¥è‡ªå¤šä¸ªè¡¨ï¼Œä¸”å¤šä¸ªè¡¨ä¹‹é—´æ²¡æœ‰è”ç³»<br>2ã€è¦æ±‚æŸ¥è¯¢åˆ—è¡¨1ä¸æŸ¥è¯¢åˆ—è¡¨2çš„åˆ—æ•°ç›¸ç­‰<br>3ã€è¦æ±‚å¤šæ¡æŸ¥è¯¢è¯­å¥çš„æŸ¥è¯¢çš„æ¯ä¸€åˆ—çš„ç±»å‹å’Œé¡ºåºæœ€å¥½ä¸€è‡´<br>4ã€unionå…³é”®å­—é»˜è®¤å»é‡ï¼Œä½¿ç”¨union all å¯ä»¥åŒ…å«é‡å¤é¡¹</p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLæ¦‚è¿°</title>
      <link href="2020/02/20/mysql-01/"/>
      <url>2020/02/20/mysql-01/</url>
      
        <content type="html"><![CDATA[<h2 id="æ•°æ®åº“çš„å¥½å¤„"><a href="#æ•°æ®åº“çš„å¥½å¤„" class="headerlink" title="æ•°æ®åº“çš„å¥½å¤„"></a>æ•°æ®åº“çš„å¥½å¤„</h2><p>1.å®ç°æ•°æ®æ˜¯æŒä¹…åŒ–<br>2.å¯ä»¥å®ç°ç»“æ„åŒ–æŸ¥è¯¢ï¼Œæ–¹ä¾¿ç®¡ç†</p><h2 id="æ•°æ®åº“ç›¸å…³æ¦‚å¿µ"><a href="#æ•°æ®åº“ç›¸å…³æ¦‚å¿µ" class="headerlink" title="æ•°æ®åº“ç›¸å…³æ¦‚å¿µ"></a>æ•°æ®åº“ç›¸å…³æ¦‚å¿µ</h2><p>1.DB : æ•°æ®åº“ï¼Œç”¨äºä¿å­˜ä¸€ç»„æœ‰ç»„ç»‡çš„æ•°æ®çš„å®¹å™¨ï¼›<br>2.DBMS : æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œç”¨äºç®¡ç†DBä¸­çš„æ•°æ®ï¼›<br>3.SQL : ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼Œç”¨æ¥ä¸æ•°æ®åº“é€šä¿¡ã€‚</p><h2 id="æ•°æ®åº“å‚¨å­˜æ•°æ®çš„ç‰¹ç‚¹"><a href="#æ•°æ®åº“å‚¨å­˜æ•°æ®çš„ç‰¹ç‚¹" class="headerlink" title="æ•°æ®åº“å‚¨å­˜æ•°æ®çš„ç‰¹ç‚¹"></a>æ•°æ®åº“å‚¨å­˜æ•°æ®çš„ç‰¹ç‚¹</h2><p>1.å°†æ•°æ®æ”¾åˆ°è¡¨ä¸­ï¼Œè¡¨åœ¨æ”¾åˆ°åº“ä¸­ï¼›<br>2.ä¸€ä¸ªæ•°æ®åº“æœ‰å¤šå¼ è¡¨ï¼Œè¡¨åå…·æœ‰å”¯ä¸€æ€§ï¼Œç”¨äºè¡¨ç¤ºè‡ªå·±ï¼›<br>3.è¡¨ä¸­æœ‰ä¸€äº›ç‰¹æ€§ï¼Œè¿™äº›ç‰¹æ€§å†³å®šäº†æ•°æ®åœ¨è¡¨ä¸­å¦‚ä½•å‚¨å­˜ï¼Œç±»ä¼¼äºjavaä¸­â€œç±»â€çš„è®¾è®¡ï¼›<br>4.è¡¨ç”±åˆ—ç»„æˆï¼Œä¹Ÿç§°ä¸ºå­—æ®µã€‚æ‰€æœ‰è¡¨éƒ½æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—ç»„æˆï¼Œæ¯ä¸€åˆ—ç±»ä¼¼äºjavaç±»ä¸­            çš„â€œå±æ€§â€ï¼›<br>5.è¡¨ä¸­çš„æ•°æ®æ˜¯æŒ‰è¡Œå‚¨å­˜çš„ï¼Œæ¯ä¸€è¡Œç±»ä¼¼äºjavaä¸­çš„â€å¯¹è±¡â€ã€‚</p><h2 id="MySQLæœåŠ¡çš„å¯åŠ¨å’Œåœæ­¢"><a href="#MySQLæœåŠ¡çš„å¯åŠ¨å’Œåœæ­¢" class="headerlink" title="MySQLæœåŠ¡çš„å¯åŠ¨å’Œåœæ­¢"></a>MySQLæœåŠ¡çš„å¯åŠ¨å’Œåœæ­¢</h2><p>æ–¹å¼ä¸€ï¼šè®¡ç®—æœºâ€”å³å‡»ç®¡ç†â€”æœåŠ¡<br>æ–¹å¼äºŒï¼šé€šè¿‡ç®¡ç†å‘˜èº«ä»½è¿è¡Œcmd<br>å¯åŠ¨æœåŠ¡ ï¼šnet start æœåŠ¡åï¼›<br>åœæ­¢æœåŠ¡ï¼šnet stop æœåŠ¡åã€‚</p><h2 id="MySQLæœåŠ¡çš„ç™»å½•ä¸é€€å‡º"><a href="#MySQLæœåŠ¡çš„ç™»å½•ä¸é€€å‡º" class="headerlink" title="MySQLæœåŠ¡çš„ç™»å½•ä¸é€€å‡º"></a>MySQLæœåŠ¡çš„ç™»å½•ä¸é€€å‡º</h2><p>æ–¹å¼ä¸€ï¼šé€šè¿‡mysqlè‡ªå¸¦çš„å®¢æˆ·ç«¯ï¼Œåªé™äºrootå®¢æˆ·<br>æ–¹å¼äºŒï¼šé€šè¿‡windowè‡ªå¸¦çš„å®¢æˆ·ç«¯<br>ç™»å½•ï¼šmysql -hä¸»æœºå -Pç«¯å£å· -uç”¨æˆ·å -på¯†ç <br>é€€å‡ºï¼šexit æˆ– ctrl+c</p><h2 id="MySQLå¸¸è§å‘½ä»¤"><a href="#MySQLå¸¸è§å‘½ä»¤" class="headerlink" title="MySQLå¸¸è§å‘½ä»¤"></a>MySQLå¸¸è§å‘½ä»¤</h2><p>1.æŸ¥çœ‹å½“å‰æ‰€æœ‰çš„æ•°æ®åº“ï¼š</p><p>â€‹            show databases;<br>2.æ‰“å¼€æŒ‡å®šçš„æ•°æ®åº“ï¼š<br>â€‹            use åº“å;<br>3.æŸ¥çœ‹å½“å‰åº“çš„æ‰€æœ‰è¡¨ï¼š<br>â€‹            show tables;<br>4.æŸ¥çœ‹å…¶ä»–åº“çš„æ‰€æœ‰è¡¨ï¼š<br>â€‹            show tabkes from åº“å;<br>5.åˆ›å»ºè¡¨ï¼š<br>â€‹            create table(<br>â€‹            åˆ—å åˆ—ç±»å‹,<br>â€‹            åˆ—å åˆ—ç±»å‹,<br>â€‹            â€¦â€¦.<br>â€‹            )ï¼›<br>6.æŸ¥çœ‹è¡¨ç»“æ„ï¼š<br>â€‹        desc è¡¨å;<br>7.æŸ¥çœ‹æœåŠ¡å™¨ç‰ˆæœ¬ï¼š<br>â€‹        æ–¹å¼ä¸€ï¼šç™»å½•åˆ°mysqlæœåŠ¡ç«¯ï¼š<br>â€‹        select version();<br>â€‹        æ–¹å¼äºŒï¼šæ²¡æœ‰ç™»å½•<br>â€‹        mysql â€“version æˆ– mysql -V     </p><h2 id="MySQLè¯­æ³•è§„èŒƒ"><a href="#MySQLè¯­æ³•è§„èŒƒ" class="headerlink" title="MySQLè¯­æ³•è§„èŒƒ"></a>MySQLè¯­æ³•è§„èŒƒ</h2><p>1.ä¸åŒºåˆ†å¤§å°å†™ï¼Œä½†å»ºè®®å…³é”®å­—å¤§å†™ï¼Œè¡¨åã€åˆ—åå°å†™ï¼›<br>2.æ¯æ¡å‘½ä»¤æœ€å¥½ç”¨  åˆ†å·ç»“å°¾ï¼›<br>3.æ¯æ¡å‘½ä»¤å¯æ ¹æ®éœ€è¦è¿›è¡Œç¼©è¿›æˆ–æ¢è¡Œï¼›<br>4.å•è¡Œæ³¨é‡Šï¼š# æ³¨é‡Šæ–‡å­— æˆ– â€“ æ³¨é‡Šæ–‡å­—<br>   å¤šè¡Œæ³¨é‡Šï¼š<code>/*æ³¨é‡Šæ–‡å­—*/</code></p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤šçº¿ç¨‹</title>
      <link href="2020/02/17/java-04/"/>
      <url>2020/02/17/java-04/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¨‹åºã€è¿›ç¨‹ã€çº¿ç¨‹çš„æ¦‚å¿µ"><a href="#ç¨‹åºã€è¿›ç¨‹ã€çº¿ç¨‹çš„æ¦‚å¿µ" class="headerlink" title="ç¨‹åºã€è¿›ç¨‹ã€çº¿ç¨‹çš„æ¦‚å¿µ"></a>ç¨‹åºã€è¿›ç¨‹ã€çº¿ç¨‹çš„æ¦‚å¿µ</h2><img src="/2020/02/17/java-04/program,process,thread.png" style="zoom:70%;">        __å¹¶è¡Œï¼š__å¤šä¸ªCPUåŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚        __å¹¶å‘ï¼š__ä¸€ä¸ªCPU(é‡‡ç”¨æ—¶é—´ç‰‡)â€åŒæ—¶â€œæ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚<h2 id="çº¿ç¨‹çš„åˆ›å»ºå’Œä½¿ç”¨"><a href="#çº¿ç¨‹çš„åˆ›å»ºå’Œä½¿ç”¨" class="headerlink" title="çº¿ç¨‹çš„åˆ›å»ºå’Œä½¿ç”¨"></a>çº¿ç¨‹çš„åˆ›å»ºå’Œä½¿ç”¨</h2><p><strong>åˆ›å»ºæ–¹å¼ä¸€ï¼šç»§æ‰¿Threadç±»</strong></p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// 1.åˆ›å»ºä¸€ä¸ªç»§æ‰¿äºThreadç±»çš„å­ç±»</span><span class="token keyword">class</span> <span class="token class-name">MyThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 2.é‡å†™Threadç±»çš„run()æ–¹æ³•->å°†æ­¤çº¿ç¨‹æ‰§è¡Œçš„æ“ä½œå£°æ˜åœ¨run()ä¸­</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">%</span><span class="token number">2</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadTest1</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 3.åœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»ºThreadç±»çš„å­ç±»çš„å¯¹è±¡</span>        MyThread t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 4.é€šè¿‡æ­¤å¯¹è±¡è°ƒç”¨start()æ–¹æ³•ï¼š&lt;1>å¯åŠ¨å½“å‰çº¿ç¨‹;&lt;2>è°ƒç”¨å½“å‰çº¿ç¨‹çš„run()</span>        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ä»¥ä¸‹æ“ä½œåœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">%</span><span class="token number">2</span><span class="token operator">!=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>å­çº¿ç¨‹çš„åˆ›å»ºå’Œå¯åŠ¨è¿‡ç¨‹ï¼š<br><img src="/2020/02/17/java-04/thread1.png" alt="å­çº¿ç¨‹çš„åˆ›å»ºå’Œå¯åŠ¨è¿‡ç¨‹"></p><p><strong>åˆ›å»ºæ–¹å¼äºŒï¼šå®ç°Runnableæ¥å£</strong></p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// 1.åˆ›å»ºå­ç±»å®ç°Runnableæ¥å£</span><span class="token keyword">class</span> <span class="token class-name">MyThread2</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 2.å®ç°Runnableæ¥å£ä¸­çš„run()æ–¹æ³•</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadTest2</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 3.åˆ›å»ºRunnableå®ç°ç±»çš„å¯¹è±¡</span>        MyThread2 mThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 4.å°†æ­¤å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ å…¥Threadç±»çš„æ„é€ å™¨ä¸­ï¼Œåˆ›å»ºThread()ç±»å¯¹è±¡</span>        Thread t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>mThread<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 5.é€šè¿‡Threadç±»å¯¹è±¡è°ƒç”¨start()æ–¹æ³•</span>        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å†å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ ä¸éœ€è¦å†é€ å®ç°ç±»å¯¹è±¡</span>        Thread t3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>mThread<span class="token punctuation">)</span><span class="token punctuation">;</span>        t3<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>ä¸¤ç§åˆ›å»ºæ–¹å¼çš„æ¯”è¾ƒï¼š</strong><br>        å¼€å‘ä¸­ï¼šä¼˜å…ˆé€‰æ‹©å®ç°Runnableæ¥å£çš„æ–¹å¼ã€‚<br>        åŸå›  ï¼š1.æ²¡æœ‰ç±»çš„å•ç»§æ‰¿æ€§çš„å±€é™æ€§ï¼›2.æ›´é€‚åˆå¤„ç†å¤šä¸ªçº¿ç¨‹æœ‰å…±äº«æ•°æ®çš„æƒ…å†µã€‚<br>        ç›¸åŒç‚¹ï¼šä¸¤ç§æ–¹å¼éƒ½éœ€è¦é‡å†™run()ï¼Œå°†çº¿ç¨‹è¦æ‰§è¡Œçš„é€»è¾‘å£°æ˜åœ¨run()ä¸­ï¼›å¯åŠ¨çº¿ç¨‹éƒ½æ˜¯è°ƒç”¨Threadç±»ä¸­çš„start()æ–¹æ³•</p><h2 id="Threadç±»ä¸­å¸¸ç”¨æ–¹æ³•"><a href="#Threadç±»ä¸­å¸¸ç”¨æ–¹æ³•" class="headerlink" title="Threadç±»ä¸­å¸¸ç”¨æ–¹æ³•"></a>Threadç±»ä¸­å¸¸ç”¨æ–¹æ³•</h2><p><strong>void start()ï¼š</strong> å¯åŠ¨çº¿ç¨‹ï¼Œå¹¶æ‰§è¡Œå¯¹è±¡çš„run()æ–¹æ³•<br><strong>void run()ï¼š</strong>çº¿ç¨‹åœ¨è¢«è°ƒåº¦æ—¶æ‰§è¡Œçš„æ“ä½œ<br><strong>String getName()ï¼š</strong> è¿”å›çº¿ç¨‹çš„åç§°<br><strong>void setName(String name)ï¼š</strong>è®¾ç½®è¯¥çº¿ç¨‹åç§°<br><strong>static Thread currentThread()ï¼š</strong> è¿”å›å½“å‰çº¿ç¨‹ã€‚åœ¨Threadå­ç±»ä¸­å°±æ˜¯thisï¼Œé€šå¸¸ç”¨äºä¸»çº¿ç¨‹å’ŒRunnableå®ç°ç±»<br><strong>static void yield()ï¼š</strong>çº¿ç¨‹è®©æ­¥<br>       &lt;1&gt; æš‚åœå½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ï¼ŒæŠŠæ‰§è¡Œæœºä¼šè®©ç»™ä¼˜å…ˆçº§ç›¸åŒæˆ–æ›´é«˜çš„çº¿ç¨‹<br>       &lt;2&gt; è‹¥é˜Ÿåˆ—ä¸­æ²¡æœ‰åŒä¼˜å…ˆçº§çš„çº¿ç¨‹ï¼Œå¿½ç•¥æ­¤æ–¹æ³•<br><strong>join()ï¼š</strong>åœ¨çº¿ç¨‹aä¸­è°ƒç”¨çº¿ç¨‹bçš„ join() æ–¹æ³•æ—¶ï¼Œçº¿ç¨‹aå°†è¢«é˜»å¡ï¼Œç›´åˆ°çº¿ç¨‹bæ‰§è¡Œå®Œä¸ºæ­¢ ;ä½ä¼˜å…ˆçº§çš„çº¿ç¨‹ä¹Ÿå¯ä»¥è·å¾—æ‰§è¡Œ<br><strong>static void sleep(long millis)ï¼š</strong>(æŒ‡å®šæ—¶é—´:æ¯«ç§’)<br>&lt;1&gt; ä»¤å½“å‰æ´»åŠ¨çº¿ç¨‹åœ¨æŒ‡å®šæ—¶é—´æ®µå†…æ”¾å¼ƒå¯¹CPUæ§åˆ¶,ä½¿å…¶ä»–çº¿ç¨‹æœ‰æœºä¼šè¢«æ‰§è¡Œ,æ—¶é—´åˆ°åé‡æ’é˜Ÿ<br>&lt;2&gt; æŠ›å‡ºInterruptedExceptionå¼‚å¸¸<br><strong>stop()ï¼š</strong>å¼ºåˆ¶çº¿ç¨‹ç”Ÿå‘½æœŸç»“æŸï¼Œä¸æ¨èä½¿ç”¨<br><strong>boolean isAlive()ï¼š</strong>è¿”å›booleanï¼Œåˆ¤æ–­çº¿ç¨‹æ˜¯å¦è¿˜æ´»ç€</p><h2 id="çº¿ç¨‹çš„è°ƒåº¦"><a href="#çº¿ç¨‹çš„è°ƒåº¦" class="headerlink" title="çº¿ç¨‹çš„è°ƒåº¦"></a>çº¿ç¨‹çš„è°ƒåº¦</h2><p><strong>è°ƒåº¦çš„ç­–ç•¥ï¼š</strong>æ—¶é—´ç‰‡ï¼›æŠ¢å å¼ã€‚<br>        <strong>Javaçš„è°ƒåº¦æ–¹æ³•ï¼š</strong><br>        &lt;1&gt; åŒä¼˜å…ˆçº§çº¿ç¨‹ç»„æˆå…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—(å…ˆåˆ°å…ˆæœåŠ¡)ï¼Œä½¿ç”¨æ—¶é—´ç‰‡ç­–ç•¥ï¼›<br>        &lt;2&gt; å¯¹é«˜ä¼˜å…ˆçº§ï¼Œä½¿ç”¨æŠ¢å å¼ç­–ç•¥ï¼Œé«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹æŠ¢å CPU.<br>        <strong>çº¿ç¨‹çš„ä¼˜å…ˆçº§ç­‰çº§ï¼š</strong><br>        MAX_PRIORITY : 10<br>        MIN_PRIORITY : 1<br>        NORM_PRIORITY : 5<br>        <strong>æ¶‰åŠçš„æ–¹æ³•ï¼š</strong><br>        getPriority() : è¿”å›çº¿ç¨‹ä¼˜å…ˆçº§ï¼›<br>        setPriority(int newPriority) : é‡æ–°è®¾ç½®çº¿ç¨‹çš„ä¼˜å…ˆçº§ã€‚<br>        <strong>è¯´æ˜ï¼š</strong><br>        çº¿ç¨‹åˆ›å»ºæ—¶ç»§æ‰¿çˆ¶çº¿ç¨‹çš„ä¼˜å…ˆçº§ï¼›<br>        ä½ä¼˜å…ˆçº§åªæ˜¯è·å¾—è°ƒåº¦çš„æ¦‚ç‡ä½ï¼Œå¹¶éä¸€å®šæ˜¯åœ¨é«˜ä¼˜å…ˆçº§çº¿ç¨‹ä¹‹åæ‰è¢«è°ƒç”¨</p><h2 id="çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ"></a>çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</h2><p><img src="/2020/02/17/java-04/threadLift.png" alt="çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ"></p><h2 id="çº¿ç¨‹çš„åŒæ­¥"><a href="#çº¿ç¨‹çš„åŒæ­¥" class="headerlink" title="çº¿ç¨‹çš„åŒæ­¥"></a>çº¿ç¨‹çš„åŒæ­¥</h2><p>å¤šä¸ªçº¿ç¨‹æ‰§è¡Œçš„ä¸ç¡®å®šæ€§ä¼šå¼•èµ·ç»“æœçš„ä¸ç¨³å®šæ€§ï¼›<br>å¤šä¸ªçº¿ç¨‹å¯¹æ•°æ®çš„å…±äº«ï¼Œä¼šé€ æˆæ“ä½œçš„ä¸å®Œæ•´æ€§ã€‚<br><strong>æ–¹å¼ä¸€ï¼šåŒæ­¥ä»£ç å—</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">synchronized</span><span class="token punctuation">(</span><span class="token comment" spellcheck="true">/*åŒæ­¥ç›‘è§†å™¨*/</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// éœ€è¦åŒæ­¥çš„ä»£ç </span><span class="token punctuation">}</span></code></pre><p>éœ€è¦åŒæ­¥çš„ä»£ç ï¼šæ“ä½œå…±äº«æ•°æ®(å¤šä¸ªçº¿ç¨‹å…±åŒæ“ä½œçš„å˜é‡)çš„ä»£ç ã€‚<br>åŒæ­¥ç›‘è§†å™¨ï¼šä¿—ç§°ï¼šé”ã€‚ä»»ä½•ä¸€ä¸ªç±»çš„å¯¹è±¡éƒ½å¯ä»¥å……å½“é”ã€‚<br>è¦æ±‚ï¼šå¤šä¸ªçº¿ç¨‹å¿…é¡»è¦å…±ç”¨åŒä¸€æŠŠé”ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token operator">*</span><span class="token operator">*</span> <span class="token operator">*</span> <span class="token annotation punctuation">@author</span> zyz <span class="token operator">*</span> <span class="token annotation punctuation">@description</span> æµ‹è¯•ä¸‰ä¸ªçª—å£åŒæ—¶å–ç¥¨ï¼Œé‡‡ç”¨åŒæ­¥ä»£ç å—è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ <span class="token operator">*</span> <span class="token annotation punctuation">@create</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">22</span> <span class="token number">13</span><span class="token operator">:</span><span class="token number">57</span> <span class="token operator">*</span><span class="token operator">/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TicketTest1</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Ticket t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ticket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>        t1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"çª—å£1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>        t2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"çª—å£2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread t3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>        t3<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"çª—å£3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t3<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Ticket</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> ticketNum <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// é‡‡ç”¨å®ç°Runnableæ¥å£æ–¹å¼å®ç°å¤šçº¿ç¨‹ï¼Œå…±äº«å˜é‡æ— éœ€å£°æ˜ä¸ºstatic</span>    Object obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä¿è¯å¤šä¸ªçº¿ç¨‹å…±ç”¨ä¸€æŠŠé”</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">synchronized</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>ticketNum<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">" ç¥¨å·ï¼š"</span><span class="token operator">+</span>ticketNum<span class="token punctuation">)</span><span class="token punctuation">;</span>                    ticketNum<span class="token operator">--</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">else</span><span class="token punctuation">{</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>æ–¹å¼äºŒï¼šåŒæ­¥æ–¹æ³•</strong><br>        1.ä¸éœ€è¦æ˜¾å¼å£°æ˜åŒæ­¥ç›‘è§†å™¨ï¼›<br>        2.éé™æ€çš„åŒæ­¥æ–¹æ³•ï¼šåŒæ­¥ç›‘è§†å™¨æ˜¯this;===&gt;å¯¹è±¡é”<br>            é™æ€çš„åŒæ­¥æ–¹æ³•ï¼šåŒæ­¥ç›‘è§†å™¨æ˜¯å½“å‰ç±»ã€‚===&gt;ç±»é”</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> multithread<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * @author zyz * @description é‡‡ç”¨åŒæ­¥æ–¹æ³•è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ * @create 2020-02-22 16:08 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TicketTest2</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Ticket1 t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ticket1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread t4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span><span class="token punctuation">;</span>        t4<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"çª—å£1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread t5 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span><span class="token punctuation">;</span>        t5<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"çª—å£2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread t6 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span><span class="token punctuation">;</span>        t6<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"çª—å£3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t4<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t5<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t6<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Ticket1</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> ticketNum <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// é‡‡ç”¨å®ç°Runnableæ¥å£æ–¹å¼å®ç°å¤šçº¿ç¨‹ï¼Œå…±äº«å˜é‡æ— éœ€å£°æ˜ä¸ºstatic</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token function">threadRun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// å°†å¯èƒ½å‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜çš„ä»£ç å—å°è£…æˆä¸€ä¸ªåŒæ­¥æ–¹æ³•</span>    <span class="token keyword">private</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">threadRun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// é‡‡ç”¨ç»§æ‰¿Threadç±»å®ç°å¤šçº¿ç¨‹æ—¶ï¼Œéœ€è¦å°†æ­¤æ–¹æ³•å£°æ˜ä¸ºstatic</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>ticketNum<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">" ç¥¨å·ï¼š"</span><span class="token operator">+</span>ticketNum<span class="token punctuation">)</span><span class="token punctuation">;</span>                ticketNum<span class="token operator">--</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>æ­»é”ï¼š</strong>ä¸åŒçš„çº¿ç¨‹åˆ†åˆ«å ç”¨å¯¹æ–¹éœ€è¦çš„åŒæ­¥èµ„æºä¸æ”¾å¼ƒï¼Œéƒ½åœ¨ç­‰å¾…å¯¹æ–¹æ”¾å¼ƒè‡ªå·±éœ€è¦çš„åŒæ­¥èµ„æºï¼Œå°±å½¢æˆäº†çº¿ç¨‹çš„æ­»é”ã€‚<br>å‡ºç°æ­»é”åï¼Œä¸ä¼šå‡ºç°å¼‚å¸¸ï¼Œä¸ä¼šå‡ºç°æç¤ºï¼Œåªæ˜¯æ‰€æœ‰çš„çº¿ç¨‹éƒ½å¤„äºé˜»å¡çŠ¶æ€ï¼Œæ— æ³•ç»§ç»­ã€‚<br><strong>æ–¹å¼ä¸‰ï¼šLock</strong><br>        é€šè¿‡æ˜¾å¼å®šä¹‰åŒæ­¥é”å¯¹è±¡ï¼Œå³Lockå¯¹è±¡ï¼Œæ¥å®ç°åŒæ­¥ã€‚<br>        ReentrantLockç±»å®ç°äº†Lockï¼Œä»¥åŠåˆ›å»ºé”çš„lock()æ–¹æ³•ï¼Œé‡Šæ”¾é”çš„unlock()æ–¹æ³•ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>locks<span class="token punctuation">.</span>ReentrantLock<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * @author zyz * @description é‡‡ç”¨Lockè§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ * @create 2020-02-23 14:36 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TicketTest3</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Ticket2 t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ticket2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread th1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>        th1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"çº¿ç¨‹1ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread th2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>        th2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"çº¿ç¨‹2ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread th3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>        th3<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"çº¿ç¨‹3ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        th1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        th2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        th3<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Ticket2</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> ticketNum <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 1.å®ä¾‹åŒ–ReentrantLock</span>    ReentrantLock lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">try</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// 2.è°ƒç”¨é”å®šæ–¹æ³•lock()</span>                lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>ticketNum<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>ticketNum<span class="token punctuation">)</span><span class="token punctuation">;</span>                    ticketNum<span class="token operator">--</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">else</span><span class="token punctuation">{</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token keyword">finally</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// 3.è°ƒç”¨è§£é”æ–¹æ³•unlock()</span>                lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><em>synchronized ä¸  Lock çš„ä¸åŒç‚¹ï¼š</em><br>1.synchronizedæœºåˆ¶å†æ‰§è¡Œå®Œç›¸åº”çš„åŒæ­¥ä»£ç åï¼Œè‡ªåŠ¨é‡Šæ”¾åŒæ­¥ç›‘è§†å™¨ï¼›<br>    Lockéœ€è¦æ‰‹åŠ¨çš„å¯åŠ¨åŒæ­¥(lock())ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦æ‰‹åŠ¨çš„ç»“æŸåŒæ­¥(unlock())ã€‚<br>2.Lockåªæœ‰ä»£ç å—é”ï¼Œsynchronizedæœ‰ä»£ç å—é”å’Œæ–¹æ³•é”<br>3.ä½¿ç”¨Locké”ï¼ŒJVMå°†èŠ±è´¹è¾ƒå°‘çš„æ—¶é—´æ¥è°ƒåº¦çº¿ç¨‹ï¼Œæ€§èƒ½æ›´å¥½ã€‚å¹¶ä¸”å…·æœ‰æ›´å¥½çš„æ‰©å±•æ€§ï¼ˆæä¾›æ›´å¤šçš„å­ç±»ï¼‰<br><strong>ä¼˜å…ˆä½¿ç”¨é¡ºåºï¼š</strong><br>Lock &gt; åŒæ­¥ä»£ç å—ï¼ˆå·²ç»è¿›å…¥äº†æ–¹æ³•ä½“ï¼Œåˆ†é…äº†ç›¸åº”èµ„æºï¼‰&gt;åŒæ­¥æ–¹æ³•ï¼ˆåœ¨æ–¹æ³•ä½“ä¹‹å¤–ï¼‰</p><h2 id="çº¿ç¨‹çš„é€šä¿¡"><a href="#çº¿ç¨‹çš„é€šä¿¡" class="headerlink" title="çº¿ç¨‹çš„é€šä¿¡"></a>çº¿ç¨‹çš„é€šä¿¡</h2><p><strong>wait()ï¼š</strong>ä¸€æ—¦çº¿ç¨‹æ‰§è¡Œæ­¤æ–¹æ³•ï¼Œå½“å‰çº¿ç¨‹å°±ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œå¹¶é‡Šæ”¾åŒæ­¥ç›‘è§†å™¨(é”)ã€‚<br><strong>notify()ï¼š</strong>ä¸€æ—¦æ‰§è¡Œæ­¤æ–¹æ³•å°±ä¼šå”¤é†’è¢«waitçš„ä¸€ä¸ªçº¿ç¨‹ã€‚è‹¥æœ‰å¤šä¸ªçº¿ç¨‹è¢«waitï¼Œåˆ™å”¤é†’ä¼˜å…ˆçº§é«˜çš„ã€‚<br><strong>notifyAll()ï¼š</strong>å”¤é†’æ‰€æœ‰è¢«waitçš„çº¿ç¨‹ã€‚<br>        <em>ä¸‰ä¸ªæ–¹æ³•å¿…é¡»ä½¿ç”¨åœ¨åŒæ­¥ä»£ç å—æˆ–åŒæ­¥æ–¹æ³•ä¸­ã€‚<br>        ä¸‰ä¸ªæ–¹æ³•çš„è°ƒç”¨è€…å¿…é¡»æ˜¯åŒæ­¥ä»£ç å—æˆ–æ˜¯åŒæ­¥ä»£ç å—ä¸­çš„åŒæ­¥ç›‘è§†å™¨ã€‚<br>        ä¸‰ä¸ªæ–¹æ³•å®šä¹‰åœ¨Objectç±»ä¸­ã€‚</em></p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * @author zyz * @description ä½¿ç”¨ä¸¤ä¸ªçº¿ç¨‹æ‰“å°1-100ã€‚çº¿ç¨‹1, çº¿ç¨‹2 äº¤æ›¿æ‰“å° * @create 2020-02-23 17:30 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadCommunicate</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Number n <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread th1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>        th1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"çº¿ç¨‹1ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread th2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>        th2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"çº¿ç¨‹2ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        th1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        th2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Number</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å”¤é†’çº¿ç¨‹</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>                    num<span class="token operator">++</span><span class="token punctuation">;</span>                    <span class="token comment" spellcheck="true">// çº¿ç¨‹æ‰§è¡Œå®Œåå°±é˜»å¡</span>                    <span class="token keyword">try</span> <span class="token punctuation">{</span>                        <span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æ‰§è¡Œå®Œwait()åé‡Šæ”¾é”</span>                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><em>sleep()ä¸wait()çš„å¼‚åŒç‚¹ï¼š</em><br>1.ç›¸åŒç‚¹ï¼šä¸€æ—¦æ‰§è¡Œåã€‚çº¿ç¨‹éƒ½ä¼šè¿›å…¥é˜»å¡çŠ¶æ€<br>2.ä¸åŒç‚¹ï¼š<br>&lt;1&gt;å£°æ˜çš„ä½ç½®ä¸åŒï¼šsleep()å£°æ˜åœ¨Threadç±»ä¸­ï¼Œwait()å£°æ˜åœ¨Objectç±»ä¸­ï¼›<br>&lt;2&gt;è°ƒç”¨è¦æ±‚ä¸åŒï¼Œwait()åªèƒ½åœ¨åŒæ­¥ä»£ç å—æˆ–åŒæ­¥æ–¹æ³•ä¸­ä½¿ç”¨ï¼›<br>&lt;3&gt;sleep()ä¸ä¼šé‡Šæ”¾é”ã€‚</p><h2 id="JDK5-0æ–°å¢çš„çº¿ç¨‹åˆ›å»ºæ–¹å¼"><a href="#JDK5-0æ–°å¢çš„çº¿ç¨‹åˆ›å»ºæ–¹å¼" class="headerlink" title="JDK5.0æ–°å¢çš„çº¿ç¨‹åˆ›å»ºæ–¹å¼"></a>JDK5.0æ–°å¢çš„çº¿ç¨‹åˆ›å»ºæ–¹å¼</h2><p><strong>æ–¹å¼ä¸‰ï¼šå®ç°Callableæ¥å£</strong></p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * @author zyz * @description çº¿ç¨‹åˆ›å»ºæ–¹å¼ä¸‰ * @create 2020-02-26 14:11 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadTest3</span>  <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºå­çº¿ç¨‹1</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºCallableå®ç°ç±»çš„å¯¹è±¡</span>        MyThread3 t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å®ä¾‹åŒ–FutureTaskç±»ï¼Œå°†Callableå®ç°ç±»çš„å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ å…¥</span>        FutureTask futureTask <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FutureTask</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>        FutureTask futureTask1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FutureTask</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// Thread(Runnable target)éœ€è¦ä¼ å…¥ä¸€ä¸ªRunnableå®ç°ç±»çš„å¯¹è±¡</span>        <span class="token comment" spellcheck="true">// è€ŒFutureTaskç±»ä¸ä»…å®ç°äº†Futureæ¥å£ï¼ŒåŒæ—¶ä¹Ÿå®ç°äº†Runnableæ¥å£</span>        <span class="token comment" spellcheck="true">// å› æ­¤å¯å°†FutureTaskç±»çš„å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ å…¥</span>        Thread th3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>futureTask<span class="token punctuation">)</span><span class="token punctuation">;</span>        th3<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"å­çº¿ç¨‹1ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        th3<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// get()è¿”å›Callableå®ç°ç±»çš„å¯¹è±¡é‡å†™çš„call()çš„è¿”å›å€¼</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            Object threadName <span class="token operator">=</span> futureTask<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>threadName<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ExecutionException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºå­çº¿ç¨‹2</span>        Thread th4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>futureTask1<span class="token punctuation">)</span><span class="token punctuation">;</span>        th4<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"å­çº¿ç¨‹2ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        th4<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">MyThread3</span> <span class="token keyword">implements</span> <span class="token class-name">Callable</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> Object <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>æ–¹å¼å››ï¼šä½¿ç”¨çº¿ç¨‹æ± </strong><br>å¥½å¤„ï¼š<br>1.æé«˜å“åº”é€Ÿåº¦(å‡å°‘äº†åˆ›å»ºæ–°çº¿ç¨‹çš„æ—¶é—´)<br>2.é™ä½èµ„æºæ¶ˆè€—(é‡å¤åˆ©ç”¨çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ï¼Œä¸éœ€è¦æ¯æ¬¡éƒ½åˆ›å»º)<br>3.ä¾¿äºçº¿ç¨‹ç®¡ç†ï¼š<br>corePoolSizeï¼šæ ¸å¿ƒæ± çš„å¤§å°<br>maxinumPoolSizeï¼šæœ€å¤§çº¿ç¨‹æ•°<br>keepAliveTimeï¼šçº¿ç¨‹æ²¡æœ‰ä»»åŠ¡æ˜¯æœ€å¤šä¿æŒå¤šé•¿æ—¶é—´åä¼šç»ˆæ­¢</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * @author zyz * @description çº¿ç¨‹çš„åˆ›å»ºæ–¹å¼å›› * @create 2020-02-26 16:03 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadTest4</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºçº¿ç¨‹æ±  æä¾›æŒ‡å®šçº¿ç¨‹æ•°é‡</span>        ExecutorService service <span class="token operator">=</span> Executors<span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºçº¿ç¨‹å¹¶å¼€å§‹çº¿ç¨‹</span>        service<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyThread4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        service<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyThread4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å…³é—­è¿æ¥æ± </span>        service<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">MyThread4</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">":"</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¼‚å¸¸å¤„ç†</title>
      <link href="2020/02/11/java-03/"/>
      <url>2020/02/11/java-03/</url>
      
        <content type="html"><![CDATA[<h2 id="å¼‚å¸¸æ¦‚è¿°ä¸å¼‚å¸¸ä½“ç³»ç»“æ„"><a href="#å¼‚å¸¸æ¦‚è¿°ä¸å¼‚å¸¸ä½“ç³»ç»“æ„" class="headerlink" title="å¼‚å¸¸æ¦‚è¿°ä¸å¼‚å¸¸ä½“ç³»ç»“æ„"></a>å¼‚å¸¸æ¦‚è¿°ä¸å¼‚å¸¸ä½“ç³»ç»“æ„</h2><p><strong>Throwableï¼š</strong>æ‰€æœ‰å¼‚å¸¸éƒ½ç»§æ‰¿ä¸Throwableï¼Œåˆ†ä¸ºExceptionå’ŒErrorã€‚<br><strong>Errorï¼š</strong>Javaè™šæ‹Ÿæœºæ— æ³•è§£å†³çš„ä¸¥é‡é—®é¢˜ã€‚å¦‚ï¼šJVMç³»ç»Ÿå†…éƒ¨é”™è¯¯ã€èµ„æºè€—å°½ç­‰ä¸¥é‡æƒ…å†µã€‚<br>æ¯”å¦‚ ï¼šStackOverflowErroræ ˆå†…å­˜æº¢å‡ºå’ŒOutOfMemoryå †å†…å­˜æº¢å‡ºã€‚ä¸€èˆ¬ä¸ç¼–å†™é’ˆå¯¹æ€§çš„ä»£ç è¿›è¡Œå¤„ç†ã€‚<br><strong>Exception:</strong> å…¶å®ƒå› ç¼–ç¨‹é”™è¯¯æˆ–å¶ç„¶çš„å¤–åœ¨å› ç´ å¯¼è‡´çš„ä¸€èˆ¬æ€§é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨é’ˆå¯¹æ€§çš„ä»£ç è¿›è¡Œå¤„ç†ã€‚<br>ä¾‹å¦‚ï¼šç©ºæŒ‡é’ˆè®¿é—®ï¼Œè¯•å›¾è¯»å–ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œç½‘ç»œè¿æ¥ä¸­æ–­ï¼Œæ•°ç»„è§’æ ‡è¶Šç•Œã€‚<br>å¼‚å¸¸åˆ†ç±»ï¼š<br>ç¼–è¯‘æ—¶å¼‚å¸¸ï¼ŒCheckExceptionåŠå®ƒçš„å­ç±»ï¼Œä¾‹å¦‚IOExceptionï¼ŒFileNotFoundexception,SQLExceptionç­‰ï¼›<br>è¿è¡Œæ—¶å¼‚å¸¸ï¼ŒRuntimeExceptionç±»åŠå®ƒçš„å­ç±»,ï¼Œä¾‹å¦‚NullPointerExceptionï¼ŒClassCastExceptionï¼ŒIndexOutOfBoundExceptionç­‰ã€‚<br><img src="/2020/02/11/java-03/1.jpg" alt></p><h2 id="å¼‚å¸¸å¤„ç†æœºåˆ¶ä¸€"><a href="#å¼‚å¸¸å¤„ç†æœºåˆ¶ä¸€" class="headerlink" title="å¼‚å¸¸å¤„ç†æœºåˆ¶ä¸€"></a>å¼‚å¸¸å¤„ç†æœºåˆ¶ä¸€</h2><p>å¼‚å¸¸çš„å¤„ç†ï¼šæŠ“æŠ›æ¨¡å‹<br><strong>æŠ›å‡ºå¼‚å¸¸ï¼š</strong>ç¨‹åºåœ¨æ­£å¸¸æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå‡ºç°å¼‚å¸¸ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªå¼‚å¸¸ç±»çš„å¯¹è±¡ï¼Œå¹¶å°†æ­¤å¯¹è±¡æäº¤ç»™javaè¿è¡Œæ—¶ç³»ç»Ÿã€‚<br><strong>æ•è·å¼‚å¸¸ï¼š</strong>å¦‚æœä¸€ä¸ªæ–¹æ³•æŠ›å‡ºå¼‚å¸¸ï¼Œè¯¥å¼‚å¸¸å°±ä¼šæŠ›å‡ºç»™è°ƒç”¨è€…æ–¹æ³•ä¸­å¤„ç†ã€‚å¦‚æœå¼‚å¸¸æ²¡æœ‰åœ¨è°ƒç”¨è€…æ–¹æ³•ä¸­å¤„ç†ï¼Œç»§ç»­æŠ›ç»™ä¸Šå±‚æ–¹æ³•ï¼Œç›´åˆ°<font color="red">å¼‚å¸¸è¢«å¤„ç†</font>ã€‚</p><pre><code>try{    // å¯èƒ½å‡ºç°å¼‚å¸¸çš„ä»£ç     }catch(å¼‚å¸¸ç±»å‹1 å˜é‡å1){    // å¤„ç†å¼‚å¸¸çš„æ–¹å¼1}catch(å¼‚å¸¸ç±»å‹2 å˜é‡å2){    // å¤„ç†å¼‚å¸¸çš„æ–¹å¼2}...finally{    // ä¸è®ºåœ¨tryä»£ç å—ä¸­æ˜¯å¦å‘ç”Ÿäº†å¼‚å¸¸äº‹ä»¶ï¼Œcatchè¯­å¥æ˜¯å¦æ‰§è¡Œï¼Œæ˜¯å¦æœ‰å¼‚å¸¸ï¼Œæ˜¯å¦æœ‰returnï¼Œ    // finallyå—ä¸­çš„è¯­å¥éƒ½ä¼šè¢«æ‰§è¡Œã€‚}            </code></pre><p>( I ) try ä»£ç å—ï¼šç›‘è§†ä»£ç æ‰§è¡Œè¿‡ç¨‹ </p><p>æ—¦å‘ç°å¼‚å¸¸åˆ™ç›´æ¥è·³è½¬è‡³ catch ï¼Œå¦‚æœæ²¡æœ‰ catch ï¼Œåˆ™ç›´æ¥è·³è½¬è‡³ finally</p><p>( 2 ) catch ä»£ç å—ï¼šå¯é€‰æ‰§è¡Œçš„ä»£ç å—ï¼Œå¦‚æœæ²¡æœ‰ä»»ä½•å¼‚å¸¸å‘ç”Ÿåˆ™ä¸ä¼šæ‰§è¡Œï¼Œå¦‚æœå‘ç°å¼‚å¸¸åˆ™è¿›è¡Œå¤„ç†æˆ–å‘ä¸ŠæŠ›å‡ºã€‚è¿™ä¸€åˆ‡éƒ½åœ¨ catch ä»£ç å—ä¸­æ‰§è¡Œã€‚</p><p>( 3 ) finally ä»£ç å—ï¼šå¿…é€‰æ‰§è¡Œçš„ä»£ç å—ï¼Œä¸ ç®¡æ˜¯å¦æœ‰å¼‚å¸¸äº§ ç”Ÿï¼Œå³ä½¿å‘ç”ŸOOMä¹Ÿä¼šæ‰§è¡Œï¼Œé€šå¸¸ç”¨äºå¤„ç†å–„åæ¸…ç†å·¥ä½œã€‚å¦‚æœ finally ä»£ç å—æ²¡æœ‰æ‰§è¡Œï¼Œé‚£ä¹ˆæœ‰ä¸‰ç§å¯èƒ½ï¼š</p><ul><li><p>æ²¡æœ‰è¿›å…¥try ä»£ç å—ã€‚</p></li><li><p>è¿›å…¥tryä»£ç å—ï¼Œä½†æ˜¯ä»£ç è¿è¡Œä¸­å‡ºç°äº†æ­»å¾ªç¯æˆ–æ­»é”çŠ¶æ€ã€‚</p></li><li><p>è¿›å…¥ try ä»£ç å—ï¼Œä½†æ˜¯æ‰§è¡Œäº†<code>System.exit()</code>æ“ä½œã€‚</p></li></ul><blockquote><p>æ³¨æ„ï¼Œ finally æ˜¯åœ¨ return è¡¨è¾¾å¼è¿è¡Œåæ‰§è¡Œçš„ï¼Œæ­¤æ—¶å°†è¦return çš„ç»“æœå·²ç»è¢«æš‚å­˜èµ·æ¥ï¼Œfinally ä»£ç å—æ‰§è¡Œç»“æŸåå†å°†<strong>ä¹‹å‰æš‚å­˜çš„ç»“æœ</strong>è¿”å›ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">finallyNotWork</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">int</span> temp <span class="token operator">=</span> <span class="token number">10000</span> <span class="token punctuation">;</span> <span class="token keyword">try</span> <span class="token punctuation">{</span>     <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Excepti</span> <span class="token function">on</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e <span class="token punctuation">)</span> <span class="token punctuation">{</span>     <span class="token keyword">return</span> <span class="token operator">++</span>temp <span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">finally</span><span class="token punctuation">{</span>       temp <span class="token operator">=</span> <span class="token number">99999</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>æ­¤æ–¹æ³•çš„ç»“æœè¿”å›10001ï¼Œè€Œä¸æ˜¯99999ï¼<br>ä¸è¦åœ¨finally ä»£ç å—ä¸­ä½¿ç”¨ return è¯­å¥ï¼Œå¦åˆ™ä¼šè¦†ç›–æ‰ try æˆ– catch ä»£ç å—ä¸­returnçš„ç»“æœã€‚</p></blockquote><h2 id="å¼‚å¸¸å¤„ç†æœºåˆ¶äºŒ"><a href="#å¼‚å¸¸å¤„ç†æœºåˆ¶äºŒ" class="headerlink" title="å¼‚å¸¸å¤„ç†æœºåˆ¶äºŒ"></a>å¼‚å¸¸å¤„ç†æœºåˆ¶äºŒ</h2><p>throws + å¼‚å¸¸ç±»å‹<br>1.å†™åœ¨<strong>æ–¹æ³•çš„å£°æ˜å¤„</strong>ï¼ŒæŒ‡æ˜å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹ã€‚ä¸€æ—¦æ–¹æ³•ä½“æ‰§è¡Œå‡ºç°å¼‚å¸¸æ—¶ï¼Œå°±ä¼šå°†ç”Ÿæˆçš„å¼‚å¸¸ç±»å¯¹è±¡æŠ›ç»™è°ƒç”¨è€…ã€‚å¼‚å¸¸ä»£ç åç»­çš„ä»£ç ä¸å†æ‰§è¡Œã€‚<br>2.åªæ˜¯å°†å¼‚å¸¸æŠ›ç»™äº†è°ƒç”¨è€…ï¼Œå¹¶<font color="red">æ²¡æœ‰å°†å¼‚å¸¸å¤„ç†æ‰</font>ã€‚</p><h2 id="æ‰‹åŠ¨æŠ›å‡ºå¼‚å¸¸"><a href="#æ‰‹åŠ¨æŠ›å‡ºå¼‚å¸¸" class="headerlink" title="æ‰‹åŠ¨æŠ›å‡ºå¼‚å¸¸"></a>æ‰‹åŠ¨æŠ›å‡ºå¼‚å¸¸</h2><p>throw + new Exception(â€œæç¤ºä¿¡æ¯â€)ï¼Œå¿…é¡»åœ¨æ–¹æ³•å£°æ˜æ—¶ç”¨throwså‡ºæŒ‡æ˜å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ã€‚<br>throw : ç”Ÿæˆä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ã€‚å£°æ˜åœ¨æ–¹æ³•ä½“å†…ã€‚<br>throws : å¤„ç†å¼‚å¸¸ã€‚å£°æ˜åœ¨æ–¹æ³•çš„å£°æ˜å¤„ã€‚</p><h2 id="ç”¨æˆ·è‡ªå®šä¹‰å¼‚å¸¸ç±»"><a href="#ç”¨æˆ·è‡ªå®šä¹‰å¼‚å¸¸ç±»" class="headerlink" title="ç”¨æˆ·è‡ªå®šä¹‰å¼‚å¸¸ç±»"></a>ç”¨æˆ·è‡ªå®šä¹‰å¼‚å¸¸ç±»</h2><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * @Description ç”¨æˆ·è‡ªå®šä¹‰å¼‚å¸¸ç±»MyExceptionï¼Œç”¨äºæè¿°æ•°æ®å–å€¼èŒƒå›´é”™è¯¯ä¿¡æ¯ã€‚ *              ç”¨æˆ·è‡ªå·±çš„å¼‚å¸¸ç±»å¿…é¡»ç»§æ‰¿ç°æœ‰çš„å¼‚å¸¸ç±»ã€‚  * @author sweetboyZhang * @date 2020å¹´2æœˆ13æ—¥ä¸‹åˆ3:15:59 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyException</span> <span class="token keyword">extends</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token operator">-</span>703489719074899L<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// åºåˆ—å·</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å¼‚å¸¸ç§ç±»</span>    <span class="token keyword">public</span> <span class="token function">MyException</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">MyException</span><span class="token punctuation">(</span>String msg<span class="token punctuation">,</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyExceptionTest</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">regist</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">)</span><span class="token keyword">throws</span> MyException<span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>num <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">MyException</span><span class="token punctuation">(</span><span class="token string">"äººä¸ºè´Ÿæ•°ï¼Œä¸åˆç†"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">else</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç™»è®°äººæ•°ï¼š"</span><span class="token operator">+</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">manager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token function">regist</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>MyException e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç™»è®°é”™è¯¯ï¼Œå‡ºé”™ç§ç±»ï¼š"</span><span class="token operator">+</span>e<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœ¬æ¬¡ç™»è®°æ“ä½œç»“æŸ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        MyExceptionTest my1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyExceptionTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        my1<span class="token punctuation">.</span><span class="token function">manager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre><code></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢å‘å¯¹è±¡</title>
      <link href="2020/01/18/java-02/"/>
      <url>2020/01/18/java-02/</url>
      
        <content type="html"><![CDATA[<h1 id="Javaé¢å‘å¯¹è±¡å­¦ä¹ çš„ä¸‰æ¡ä¸»çº¿ï¼š"><a href="#Javaé¢å‘å¯¹è±¡å­¦ä¹ çš„ä¸‰æ¡ä¸»çº¿ï¼š" class="headerlink" title="Javaé¢å‘å¯¹è±¡å­¦ä¹ çš„ä¸‰æ¡ä¸»çº¿ï¼š"></a>Javaé¢å‘å¯¹è±¡å­¦ä¹ çš„ä¸‰æ¡ä¸»çº¿ï¼š</h1><p>1.Javaç±»çš„æˆå‘˜ï¼šå±æ€§ã€æ–¹æ³•ã€æ„é€ å™¨ï¼›ä»£ç å—ï¼Œå†…éƒ¨ç±»<br>2.é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹å¾ï¼šå°è£…æ€§ã€ç»§æ‰¿æ€§ã€å¤šæ€æ€§ã€ï¼ˆæŠ½è±¡æ€§ï¼‰<br>3.å…³é”®å­—ï¼šthis , super , static , final , abstract , interface , package , import<br>ç±»ï¼šæŠ½è±¡çš„ï¼Œæ¦‚å¿µä¸Šçš„å†…å®¹ã€‚<br>å¯¹è±¡ï¼šå®å®åœ¨åœ¨çš„ä¸ªä½“ã€‚<br>å¯¹è±¡æ˜¯ç”±ç±»æ´¾ç”Ÿå‡ºæ¥çš„ï¼Œæ˜¯ç±»çš„å®ä¾‹åŒ–ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * @Description  * ä¸€ã€è®¾è®¡ç±»ï¼Œå…¶å®å°±æ˜¯è®¾è®¡ç±»çš„æˆå‘˜ *     å±æ€§ = æˆå‘˜å˜é‡ = field = åŸŸã€å­—æ®µ *     æ–¹æ³• = æˆå‘˜æ–¹æ³• = å‡½æ•° = method *     åˆ›å»ºç±»çš„å¯¹è±¡ = ç±»çš„å®ä¾‹åŒ– = å®ä¾‹åŒ–å¯¹è±¡ *  * äºŒã€ç±»å’Œå¯¹è±¡çš„ä½¿ç”¨ï¼ˆé¢å‘å¯¹è±¡æ€æƒ³è½åœ°çš„å®ç°ï¼‰ *     1ã€åˆ›å»ºç±»ï¼Œè®¾è®¡ç±»çš„æˆå‘˜ *     2ã€åˆ›å»ºç±»çš„å¯¹è±¡ *     3ã€é€šè¿‡"å¯¹è±¡.å±æ€§"æˆ–"å¯¹è±¡.æ–¹æ³•"è°ƒç”¨å¯¹è±¡çš„ç»“æ„ *  * ä¸‰ã€å¦‚æœåˆ›å»ºä¸€ä¸ªç±»çš„å¤šä¸ªå¯¹è±¡ï¼Œåˆ™æ¯ä¸ªç±»éƒ½ç‹¬ç«‹çš„æ‹¥æœ‰ä¸€å¥—ç±»çš„å±æ€§ã€‚ï¼ˆéstaticï¼‰ *     ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„å±æ€§aï¼Œåˆ™ä¸å½±å“å¦å¤–ä¸€ä¸ªå¯¹è±¡çš„å±æ€§açš„å€¼ * @author sweetboyZhang * @date 2020å¹´1æœˆ18æ—¥ä¸‹åˆ2:12:14 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PersonTest</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// å¯¹è±¡å®ä¾‹åŒ–ï¼Œåˆ›å»ºPersonå¯¹è±¡</span>        Person p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è°ƒç”¨å¯¹è±¡çš„ç»“æ„ï¼šå±æ€§ã€æ–¹æ³•</span>        <span class="token comment" spellcheck="true">// è°ƒç”¨å±æ€§ï¼š"å¯¹è±¡.å±æ€§"</span>        p1<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"Taylor"</span><span class="token punctuation">;</span>        p1<span class="token punctuation">.</span>isMale <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è°ƒç”¨æ–¹æ³•ï¼š"å¯¹è±¡.æ–¹æ³•"</span>        p1<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        p1<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        p1<span class="token punctuation">.</span><span class="token function">study</span><span class="token punctuation">(</span><span class="token string">"Java"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºå¦å¤–ä¸€ä¸ªå¯¹è±¡</span>        Person p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        p2<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"Tony"</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"p2.name: "</span> <span class="token operator">+</span> p2<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// p2.name: Tony</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"p1.name: "</span> <span class="token operator">+</span> p1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// p1.name: Taylor</span>    <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// å±æ€§</span>        String name<span class="token punctuation">;</span>        <span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">boolean</span> isMale<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ–¹æ³•</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åƒé¥­"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç¡è§‰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">study</span><span class="token punctuation">(</span>String language<span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å­¦ä¹ "</span> <span class="token operator">+</span> language<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p><img src="/2020/01/18/java-02/oop_1.png" alt="å¯¹è±¡çš„å†…å­˜è§£æ"></p><h2 id="å±æ€§ï¼ˆæˆå‘˜å˜é‡ï¼‰ä¸å±€éƒ¨å˜é‡"><a href="#å±æ€§ï¼ˆæˆå‘˜å˜é‡ï¼‰ä¸å±€éƒ¨å˜é‡" class="headerlink" title="å±æ€§ï¼ˆæˆå‘˜å˜é‡ï¼‰ä¸å±€éƒ¨å˜é‡"></a>å±æ€§ï¼ˆæˆå‘˜å˜é‡ï¼‰ä¸å±€éƒ¨å˜é‡</h2><p><strong>ç›¸åŒç‚¹ï¼š</strong><br>            1.å®šä¹‰å˜é‡çš„æ ¼å¼ï¼šæ•°æ®ç±»å‹ å˜é‡å = å˜é‡å€¼<br>            2.å…ˆå£°æ˜ï¼Œåä½¿ç”¨<br>            3.å˜é‡éƒ½æœ‰å…¶å¯¹åº”çš„ä½œç”¨åŸŸ<br><strong>ä¸åŒç‚¹:</strong><br>1.å£°æ˜çš„ä½ç½®ä¸åŒ<br>        å±æ€§ï¼šç›´æ¥å®šä¹‰åœ¨ç±»çš„ä¸€å¯¹{}å†…<br>        å±€éƒ¨å˜é‡ï¼šå£°æ˜åœ¨æ–¹æ³•å†…ã€æ–¹æ³•å½¢å‚ã€ä»£ç å—å†…ã€æ„é€ å™¨å½¢å‚ã€æ„é€ å™¨å†…éƒ¨çš„å˜é‡<br>2.æƒé™ä¿®é¥°ç¬¦ä¸åŒ<br>        å±æ€§ï¼šå£°æ˜æ—¶å¯ä»¥ä½¿ç”¨æƒé™ä¿®é¥°ç¬¦æŒ‡æ˜å…¶æƒé™<br>                   å¸¸è§çš„æƒé™ä¿®é¥°ç¬¦ï¼šprivate , protected , public ,ç¼ºçœ<br>         å±€éƒ¨å˜é‡ï¼šä¸å¯ä½¿ç”¨æƒé™ä¿®é¥°ç¬¦<br>3.é»˜è®¤åˆå§‹åŒ–å€¼ä¸åŒ<br>        å±æ€§ï¼šç±»çš„å±æ€§æ ¹æ®å…¶ç±»å‹éƒ½<strong>æœ‰é»˜è®¤çš„åˆå§‹åŒ–å€¼</strong><br>                  <em>åŸºæœ¬æ•°æ®ç±»å‹ï¼š</em><br>                        æ•´å‹ï¼ˆbyte , short , int , longï¼‰: 0<br>                        æµ®ç‚¹å‹ï¼ˆfloat , doubleï¼‰: 0.0<br>                        å­—ç¬¦å‹ï¼ˆcharï¼‰: 0ï¼ˆæˆ–â€™\u0000â€™ï¼‰<br>                        å¸ƒå°”å‹ï¼ˆbooleanï¼‰: false<br>                  <em>å¼•ç”¨æ•°æ®ç±»å‹ï¼ˆç±»ã€æ•°ç»„ã€æ¥å£ï¼‰ï¼š</em>null<br>        å±€éƒ¨å˜é‡ï¼šæ²¡æœ‰åˆå§‹åŒ–å€¼ï¼Œ<strong><font color="red">è°ƒç”¨å±€éƒ¨å˜é‡ä¹‹å‰å¿…é¡»è¿›è¡Œåˆå§‹åŒ–</font></strong><br><strong>ç±»ä¸­å®ä¾‹å˜é‡å¯ä»¥ä¸ç”¨åˆå§‹åŒ–ï¼Œä½¿ç”¨ç›¸åº”ç±»å‹çš„é»˜è®¤å€¼å³å¯ï¼›æ–¹æ³•ä¸­çš„å®šä¹‰çš„å±€éƒ¨å˜é‡å¿…é¡»åˆå§‹åŒ–ï¼Œå¦åˆ™ç¼–è¯‘ä¸é€šè¿‡</strong>ã€‚</p><p>4.åœ¨å†…å­˜ä¸­åŠ è½½çš„ä½ç½®ä¸åŒ<br>        å±æ€§ï¼šåŠ è½½åˆ°å †ç©ºé—´ä¸­ï¼ˆéstaticï¼‰<br>        å±€éƒ¨å˜é‡ï¼šåŠ è½½åˆ°æ ˆç©ºé—´ä¸­<br><strong>å±æ€§èµ‹å€¼é¡ºåº</strong>ï¼š1.é»˜è®¤åˆå§‹åŒ–<br>                           2.æ˜¾å¼åˆå§‹åŒ–/ä»£ç å—ä¸­èµ‹å€¼<br>                           3.æ„é€ å™¨åˆå§‹åŒ–<br>                           4.é€šè¿‡â€œå¯¹è±¡.æ–¹æ³•â€æˆ–â€œå¯¹è±¡.å±æ€§â€œåˆå§‹åŒ–<br><strong>JavaBean:</strong> ç¬¦åˆä¸‹åˆ—æ ‡å‡†çš„Javaç±»ï¼šç±»æ˜¯å…¬å…±çš„ï¼Œä¸€ä¸ªæ— å‚çš„æ„é€ å™¨ï¼Œå±æ€§ä»¥åŠå¯¹åº”çš„get,setæ–¹æ³•</p><h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><p><strong>æ–¹æ³•çš„å£°æ˜ï¼š</strong></p><pre class=" language-java"><code class="language-java">æƒé™ä¿®é¥°ç¬¦ è¿”å›å€¼ç±»å‹ æ–¹æ³•å<span class="token punctuation">(</span>å‚æ•°åˆ—è¡¨<span class="token punctuation">)</span><span class="token punctuation">{</span>    æ–¹æ³•ä½“<span class="token punctuation">}</span></code></pre><p><strong>æ–¹æ³•çš„ä½¿ç”¨</strong>ï¼šå¯ä»¥è°ƒç”¨å½“å‰ç±»çš„å±æ€§å’Œæ–¹æ³• ï¼Œæ–¹æ³•ä¸­ä¸å¯ä»¥å®šä¹‰æ–¹æ³•<br><strong>æ–¹æ³•çš„å°è£…ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * @Description  * å®šä¹‰ç±»Studentï¼ŒåŒ…å«ä¸‰ä¸ªå±æ€§ï¼šå­¦å·number(int)ï¼Œå¹´çº§state(int)ï¼Œæˆç»©score(int)ã€‚ åˆ›å»º20ä¸ªå­¦ç”Ÿå¯¹è±¡ï¼Œå­¦å·ä¸º1åˆ°20ï¼Œå¹´çº§(1~6)å’Œæˆç»©(0~100)éƒ½ç”±éšæœºæ•°ç¡®å®šã€‚é—®é¢˜ä¸€ï¼šæ‰“å°å‡º3å¹´çº§(stateå€¼ä¸º3ï¼‰çš„å­¦ç”Ÿä¿¡æ¯ã€‚é—®é¢˜äºŒï¼šä½¿ç”¨å†’æ³¡æ’åºæŒ‰å­¦ç”Ÿæˆç»©æ’åºï¼Œå¹¶éå†æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯æç¤ºï¼š1) ç”Ÿæˆéšæœºæ•°ï¼šMath.random()ï¼Œè¿”å›å€¼ç±»å‹double; 2) å››èˆäº”å…¥å–æ•´ï¼šMath.round(double d)ï¼Œè¿”å›å€¼ç±»å‹longã€‚ * @author sweetboyZhang * @date 2020å¹´1æœˆ20æ—¥ä¸‹åˆ3:40:47 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentTest</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºStudentTestå¯¹è±¡ï¼Œç”¨æ¥è°ƒç”¨å°è£…å¥½çš„æ–¹æ³•</span>        StudentTest test <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StudentTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºå¹¶åˆå§‹åŒ–å¯¹è±¡æ•°ç»„</span>        Student<span class="token punctuation">[</span><span class="token punctuation">]</span> stuArr <span class="token operator">=</span> test<span class="token punctuation">.</span><span class="token function">bulidStuArr</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// éå†è¾“å‡º</span>        test<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>stuArr<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"*****************************"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ‰¾å‡ºå¹´çº§ä¸º3çš„å­¦ç”Ÿ</span>        test<span class="token punctuation">.</span><span class="token function">searchState</span><span class="token punctuation">(</span>stuArr<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"****************************"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ä½¿ç”¨å†’æ³¡æ’åºæŒ‰å­¦ç”Ÿæˆç»©æ’åºï¼Œå¹¶éå†æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯</span>        test<span class="token punctuation">.</span><span class="token function">bubleSort</span><span class="token punctuation">(</span>stuArr<span class="token punctuation">)</span><span class="token punctuation">;</span>        test<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>stuArr<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     *      * @Description åˆ›å»ºå¹¶åˆå§‹åŒ–å¯¹è±¡æ•°ç»„     * @author sweetboyZhang     * @date 2020å¹´1æœˆ20æ—¥ä¸‹åˆ5:15:19     * @param num     */</span>    <span class="token keyword">public</span> Student<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">bulidStuArr</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Student<span class="token punctuation">[</span><span class="token punctuation">]</span> stuArr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">[</span>num<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// åˆ›å»ºå¯¹è±¡æ•°ç»„</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> num<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            stuArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç»™æ•°ç»„å…ƒç´ èµ‹å€¼</span>            <span class="token comment" spellcheck="true">// ç»™Studentå¯¹è±¡çš„å±æ€§èµ‹å€¼</span>            stuArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>number <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>            stuArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// Math.random()*(b-a+1)+a</span>            stuArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>score <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token operator">-</span><span class="token number">0</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> stuArr<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     *      * @Description éå†å¹¶è¾“å‡ºæ•°ç»„     * @author sweetboyZhang     * @date 2020å¹´1æœˆ20æ—¥ä¸‹åˆ5:03:40     * @param stuArr     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span>Student<span class="token punctuation">[</span><span class="token punctuation">]</span> stuArr<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> stuArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stuArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     *      * @Description æ ¹æ®å¹´çº§æŸ¥æ‰¾å­¦ç”Ÿ     * @author sweetboyZhang     * @date 2020å¹´1æœˆ20æ—¥ä¸‹åˆ4:58:45     * @param stuArr     * @param state     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">searchState</span><span class="token punctuation">(</span>Student<span class="token punctuation">[</span><span class="token punctuation">]</span> stuArr<span class="token punctuation">,</span><span class="token keyword">int</span> state<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// éå†å­¦ç”Ÿæ•°ç»„  æ‰“å°å‡º3å¹´çº§(stateå€¼ä¸º3ï¼‰çš„å­¦ç”Ÿä¿¡æ¯ã€‚</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> stuArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>stuArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>state <span class="token operator">==</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stuArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     *      * @Description ä½¿ç”¨å†’æ³¡æ’åºæŒ‰å­¦ç”Ÿæˆç»©æ’åº     * @author sweetboyZhang     * @date 2020å¹´1æœˆ20æ—¥ä¸‹åˆ5:02:08     * @param stuArr     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">bubleSort</span><span class="token punctuation">(</span>Student<span class="token punctuation">[</span><span class="token punctuation">]</span> stuArr<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> stuArr<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> stuArr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> i<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>stuArr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>score <span class="token operator">></span> stuArr<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>score<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    Student temp <span class="token operator">=</span> stuArr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                    stuArr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> stuArr<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                    stuArr<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å­¦å·number(int)ï¼Œå¹´çº§state(int)ï¼Œæˆç»©score(int)</span>    <span class="token keyword">int</span> number<span class="token punctuation">;</span>    <span class="token keyword">int</span> state<span class="token punctuation">;</span>    <span class="token keyword">int</span> score<span class="token punctuation">;</span>    <span class="token keyword">public</span> String <span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"å­¦å·ï¼š"</span> <span class="token operator">+</span> number <span class="token operator">+</span> <span class="token string">" å¹´çº§ï¼š"</span> <span class="token operator">+</span> state <span class="token operator">+</span> <span class="token string">" æˆç»©ï¼š"</span> <span class="token operator">+</span> score<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><img src="/2020/01/18/java-02/oop_2.png" alt="å¯¹è±¡æ•°ç»„å†…å­˜è§£æ"></p><pre class=" language-java"><code class="language-java">stus<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å¼•ç”¨ç±»å‹å˜é‡stus[0],stus[1],stus[2]...åªèƒ½å­˜å‚¨null æˆ–åœ°å€å€¼ ,ä¸èƒ½å­˜å‚¨å¯¹è±¡çš„å±æ€§ã€‚å¿…é¡»newä¸€ä¸ªå¯¹è±¡ç”¨æ¥å­˜æ”¾è¯¥å¯¹è±¡çš„å±æ€§ï¼Œä¸”è¿™ä¸ªå¼•ç”¨ç±»å‹çš„å˜é‡å­˜æ”¾ç€æŒ‡å‘è¯¥å¯¹è±¡çš„é¦–åœ°å€å€¼ã€‚</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// åŒ¿åå¯¹è±¡ï¼šåˆ›å»ºçš„ä¸€ä¸ªå¯¹è±¡æ²¡æœ‰æ˜¾å¼åœ°èµ‹ç»™ä¸€ä¸ªå˜é‡ã€‚åªèƒ½è°ƒç”¨ä¸€æ¬¡ã€‚</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>æ–¹æ³•çš„é‡è½½ï¼š</strong>åœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œå…è®¸å­˜åœ¨ä¸€ä¸ªä»¥ä¸Šçš„åŒåæ–¹æ³•ï¼Œåªéœ€å‚æ•°ä¸ªæ•°æˆ–å‚æ•°ç±»å‹ä¸åŒå³å¯<br>        <strong>å¯å˜ä¸ªæ•°çš„å½¢å‚ï¼š</strong>æ–¹æ³•å(å‚æ•°çš„ç±»å‹å â€¦ å‚æ•°å)<br>        <strong>æ–¹æ³•å‚æ•°çš„å€¼ä¼ é€’æœºåˆ¶ï¼š</strong><br>                å½¢å‚ï¼šæ–¹æ³•å®šä¹‰æ—¶ï¼Œå£°æ˜åœ¨å°æ‹¬å·ä¸­çš„å‚æ•°<br>                å®å‚ï¼šæ–¹æ³•è°ƒç”¨æ—¶ï¼Œå®é™…ä¼ é€’ç»™å½¢å‚çš„æ•°æ®<br>        <strong>æ–¹æ³•å‚æ•°ä¼ é€’çš„æ–¹å¼ï¼š</strong><font color="red">å€¼ä¼ é€’</font>ã€‚å³å°†å®é™…å‚æ•°å€¼çš„å‰¯æœ¬(å¤åˆ¶å“)ä¼ å…¥æ–¹æ³•å†…ï¼Œè€Œå‚æ•°æœ¬èº«ä¸å—å½±å“ã€‚<br>                å½¢å‚æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼šå°†å®å‚åŸºæœ¬æ•°æ®ç±»å‹å˜é‡çš„â€œ<strong>æ•°æ®å€¼</strong>â€ä¼ é€’ç»™å½¢å‚<br>                å½¢å‚æ˜¯å¼•ç”¨æ•°æ®ç±»å‹ï¼šå°†å®å‚å¼•ç”¨æ•°æ®ç±»å‹å˜é‡çš„â€œ<strong>åœ°å€å€¼</strong>â€ä¼ é€’ç»™å½¢å‚ï¼ˆå«å˜é‡çš„æ•°æ®ç±»å‹ï¼‰</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * @Description åŸºæœ¬æ•°æ®ç±»å‹çš„å‚æ•°ä¼ é€’æµ‹è¯• * @author sweetboyZhang * @date 2020å¹´1æœˆ21æ—¥ä¸‹åˆ6:42:36 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CanshuTest</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¿®æ”¹å‰ï¼šx = "</span> <span class="token operator">+</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 1</span>        <span class="token function">change</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// åœ¨æ ˆç©ºé—´ä¸­çš„change()ä¸­å¯¹å˜é‡çš„å€¼è¿›è¡Œäº†ä¿®æ”¹ï¼Œè°ƒç”¨å®Œæˆåchange()ä¸­çš„å˜é‡å‡ºæ ˆï¼Œå¹¶æ²¡æœ‰å½±å“åˆ°ä¸»å‡½æ•°ä¸­çš„å˜é‡çš„å€¼</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¿®æ”¹åï¼šx = "</span> <span class="token operator">+</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 1</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// å£°æ˜ä¸ºé™æ€æ–¹æ³•ï¼Œä¾¿äºä¸»ç±»ç›´æ¥è°ƒç”¨ï¼Œæ— éœ€å®ä¾‹åŒ–å¯¹è±¡</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">change</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è°ƒç”¨æ–¹æ³•å‰ï¼šx = "</span> <span class="token operator">+</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 1</span>        x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è°ƒç”¨æ–¹æ³•åï¼šx = "</span> <span class="token operator">+</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 2</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * @Description å¼•ç”¨ç±»å‹å‚æ•°ä¼ é€’æµ‹è¯• * @author sweetboyZhang * @date 2020å¹´1æœˆ21æ—¥ä¸‹åˆ7:11:18 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CanshuTest1</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Person1 obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        obj<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¿®æ”¹å‰ï¼šage = "</span> <span class="token operator">+</span> obj<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 1</span>        <span class="token function">change</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// objæŒ‡å‘çš„åœ¨å †ç©ºé—´ä¸­çš„å¯¹è±¡çš„å€¼è¢«ä¿®æ”¹ï¼Œå½±å“äº†æœ€ç»ˆç»“æœ</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¿®æ”¹åï¼šage = "</span> <span class="token operator">+</span> obj<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 2</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// å°†å®å‚ä¸­å­˜å‚¨çš„åœ°å€å€¼ä¼ é€’ç»™å½¢å‚ï¼Œå½¢å‚å’Œå®å‚æŒ‡å‘å †ç©ºé—´ä¸­çš„åŒä¸€ä¸ªå¯¹è±¡</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">change</span><span class="token punctuation">(</span>Person1 obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è°ƒç”¨æ–¹æ³•å‰ï¼šage = "</span> <span class="token operator">+</span> obj<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 1</span>        obj<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è°ƒç”¨æ–¹æ³•åï¼šage = "</span> <span class="token operator">+</span> obj<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 2</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Person1</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> age<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="å°è£…æ€§"><a href="#å°è£…æ€§" class="headerlink" title="å°è£…æ€§"></a>å°è£…æ€§</h2><p><strong>å°è£…æ€§çš„ä½“ç°ï¼š</strong><br>        1.å°†ç±»çš„å±æ€§ç§æœ‰åŒ–(private)ï¼Œæä¾›å…¬å…±çš„(public)æ–¹æ³•æ¥è·å–(get)å’Œè®¾ç½®(set)å±æ€§å€¼<br>        2.ä¸å¯¹å¤–æš´éœ²çš„ç§æœ‰æ–¹æ³•<br>        3.å•ä¾‹æ¨¡å¼<br>        å°è£…æ€§çš„ä½“ç°ï¼Œéœ€è¦æƒé™ä¿®é¥°ç¬¦çš„é…åˆ<br>        Javaä¸­çš„4ç§æƒé™ä¿®é¥°ç¬¦ï¼ˆä»å°åˆ°å¤§ï¼‰ï¼šprivate , ç¼ºçœ ï¼Œprotected , public<br><img src="/2020/01/18/java-02/oop_3.png" alt="æƒé™ä¿®é¥°ç¬¦çš„è®¿é—®æƒé™"></p><p>4ç§æƒé™å‡å¯ä»¥ç”¨æ¥ä¿®é¥°ç±»çš„å†…éƒ¨ç»“æ„ï¼šå±æ€§(æˆå‘˜å˜é‡)ï¼Œæ–¹æ³•ï¼Œæ„é€ å™¨ï¼Œå†…éƒ¨ç±»<br>        ä¿®é¥°å¤–éƒ¨ç±»ï¼šç¼ºçœï¼Œpublic<br>        å±€éƒ¨å†…éƒ¨ç±»ï¼Œå±€éƒ¨å˜é‡ï¼šä¸èƒ½è¢«æƒé™ä¿®é¥°ç¬¦ä¿®é¥°</p><p>1.ä¸€ä¸ªjavaæ–‡ä»¶é‡Œï¼Œpublic çš„ç±»åªèƒ½å‡ºç°ä¸€ä¸ªï¼Œåªèƒ½å‡ºç°ä¸€ä¸ªï¼Œåªèƒ½å‡ºç°ä¸€ä¸ªï¼Œå¦åˆ™ï¼Œä¸ç®¡ä½ ç”¨å“ªä¸€ä¸ªç±»åå‘½åæ–‡ä»¶åç¼–è¯‘å™¨éƒ½ä¼šæŠ¥é”™</p><p>2.å…³äºå¤šæ€ã€‚å­ç±»ç»§æ‰¿äº†çˆ¶ç±»çš„æ‰€æœ‰æˆå‘˜ï¼ŒåŒ…æ‹¬privateæƒé™çš„æˆå‘˜å˜é‡ï¼Œä½†æ˜¯ç»§æ‰¿çš„å­ç±»å…·æœ‰ç§æœ‰å˜é‡çš„æ‹¥æœ‰æƒä½†æ˜¯æ²¡æœ‰ä½¿ç”¨æƒã€‚</p><p>3.privateçš„æˆå‘˜å˜é‡ï¼Œæ ¹æ®æƒé™ä¿®é¥°ç¬¦çš„è®¿é—®æ§åˆ¶èŒƒå›´ï¼Œåªæœ‰åœ¨ç±»å†…éƒ¨æ‰èƒ½è¢«è®¿é—®ï¼Œå°±ç®—æ˜¯ä»–çš„å­ç±»ï¼Œä¹Ÿä¸èƒ½è®¿é—®ã€‚</p><h2 id="æ„é€ å™¨ï¼ˆæ„é€ æ–¹æ³•ï¼‰"><a href="#æ„é€ å™¨ï¼ˆæ„é€ æ–¹æ³•ï¼‰" class="headerlink" title="æ„é€ å™¨ï¼ˆæ„é€ æ–¹æ³•ï¼‰"></a>æ„é€ å™¨ï¼ˆæ„é€ æ–¹æ³•ï¼‰</h2><p>ä½œç”¨ï¼šåˆ›å»ºå¯¹è±¡ new + æ„é€ å™¨<br>        1.è‹¥æ²¡æœ‰æ˜¾ç¤ºçš„å®šä¹‰ç±»çš„æ„é€ å™¨ï¼Œåˆ™ç³»ç»Ÿé»˜è®¤æä¾›ä¸€ä¸ªç©ºå‚çš„æ„é€ å™¨ã€‚<br>        2.å®šä¹‰æ„é€ å™¨çš„æ ¼å¼ï¼š</p><pre class=" language-java"><code class="language-java">æƒé™ä¿®é¥°ç¬¦ ç±»å<span class="token punctuation">(</span>å½¢å‚åˆ—è¡¨<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><p>3.ä¸€ä¸ªç±»ä¸­å¯ä»¥å®šä¹‰å¤šä¸ªæ„é€ å™¨ï¼Œå½¼æ­¤æ„æˆé‡è½½</p><p><font color="red"><strong>4.æ„é€ å‡½æ•°ä¸èƒ½è¢«ç»§æ‰¿ï¼Œåªèƒ½è¢«æ˜¾å¼æˆ–éšå¼çš„è°ƒç”¨</strong></font></p><h2 id="this"><a href="#this" class="headerlink" title="this"></a>this</h2><p>1.thiså¯ä¿®é¥°æˆ–è°ƒç”¨ï¼šå±æ€§ï¼Œæ–¹æ³•ï¼Œæ„é€ å™¨ã€‚<br>        2.thisä¿®é¥°å±æ€§å’Œæ–¹æ³•ï¼šthisè¡¨ç¤ºå½“å‰å¯¹è±¡ã€‚<br>            åœ¨ç±»çš„æ–¹æ³•ä¸­ï¼Œä½¿ç”¨â€œ this.å±æ€§ â€ æˆ– â€œ this.æ–¹æ³• â€  ï¼Œè°ƒç”¨å½“å‰å¯¹è±¡çš„å±æ€§æˆ–æ–¹æ³•ï¼Œé€šå¸¸å¯ä»¥çœç•¥ã€‚<br>            æ–¹æ³•çš„å½¢å‚ä¸ç±»çš„å±æ€§é‡åæ—¶å¿…é¡»ä½¿ç”¨â€ this.å˜é‡ â€œæ˜¾å¼è°ƒç”¨ã€‚<br>        3.thisè°ƒç”¨æ„é€ å™¨ï¼š<br>            åœ¨æ„é€ å™¨ä¸­é€šè¿‡ this(å‚æ•°åˆ—è¡¨) è°ƒç”¨æœ¬ç±»å…¶ä»–æ„é€ å™¨ï¼Œä¸èƒ½è°ƒç”¨è‡ªå·±ã€‚</p><h2 id="package"><a href="#package" class="headerlink" title="package"></a>package</h2><p>1.æ›´å¥½åœ°å®ç°é¡¹ç›®ä¸­ç±»çš„ç®¡ç†<br>        2.å£°æ˜åœ¨æºæ–‡ä»¶çš„é¦–è¡Œã€‚å£°æ˜ç±»æˆ–æ¥å£æ‰€å±çš„åŒ…<br>        3.å±äºæ ‡è¯†ç¬¦ï¼Œéµå¾ªæ ‡è¯†ç¬¦çš„å®šä¹‰è§„èŒƒ</p><h2 id="import"><a href="#import" class="headerlink" title="import"></a>import</h2><p>1.åœ¨æºæ–‡ä»¶ä¸­å¯¼å…¥æŒ‡å®šçš„åŒ…æˆ–æ¥å£<br>        2.å£°æ˜åœ¨åŒ…çš„å£°æ˜å’Œç±»çš„å£°æ˜ä¹‹é—´<br>        3.â€œ xxx.* â€è¡¨ç¤ºå¯¼å…¥xxxåŒ…ä¸‹çš„æ‰€æœ‰ç»“æ„<br>        4.å¦‚æœä½¿ç”¨çš„ç±»æˆ–æ¥å£åœ¨java.langåŒ…ä¸‹å®šä¹‰çš„ï¼Œåˆ™å¯ä»¥çœç•¥<br>        5.ä½¿ç”¨æœ¬åŒ…ä¸‹å®šä¹‰çš„ç±»æˆ–æ¥å£ï¼Œå¯ä»¥çœç•¥</p><h2 id="ç»§æ‰¿æ€§"><a href="#ç»§æ‰¿æ€§" class="headerlink" title="ç»§æ‰¿æ€§"></a>ç»§æ‰¿æ€§</h2><p>å¥½å¤„ï¼š<br>        1.å‡å°‘äº†ä»£ç çš„å†—ä½™ï¼Œæé«˜äº†ä»£ç çš„å¤ç”¨æ€§ã€‚<br>        2.ä¾¿äºåŠŸèƒ½çš„æ‰©å±•<br>        3.ä¸ºå¤šæ€çš„ä½¿ç”¨æä¾›äº†å‰æ<br>        æ ¼å¼ï¼šclass A extends B{}<br>        A:å­ç±»ï¼Œæ´¾ç”Ÿç±»ï¼Œsubclass<br>        B:çˆ¶ç±»ï¼Œè¶…ç±»ï¼ŒåŸºç±»ï¼Œsuperclass<br>        1.ä¸€æ—¦å­ç±»Aç»§æ‰¿çˆ¶ç±»Bä»¥åï¼Œå­ç±»Aä¸­å°±è·å–äº†çˆ¶ç±»Bä¸­çš„ç»“æ„ä¸­æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•ã€‚<br>        çˆ¶ç±»ä¸­çš„privateå±æ€§å’Œæ–¹æ³•ä»ç„¶è¢«å­ç±»æ‰€ç»§æ‰¿ï¼Œåªæ˜¯ç”±äºå°è£…æ€§çš„åŸå› ä½¿å¾—å­ç±»ä¸èƒ½ç›´æ¥è°ƒç”¨çˆ¶ç±»çš„ç»“æ„è€Œ        å·²ã€‚<br>        2.å­ç±»ç»§æ‰¿çˆ¶ç±»åï¼Œè¿˜å¯ä»¥å£°æ˜è‡ªå·±ç‰¹æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œå®ç°åŠŸèƒ½çš„æ‹“å±•ã€‚<br>        å­ç±»å’Œçˆ¶ç±»çš„å…³ç³»ä¸ç­‰åŒäºé›†åˆä¸å­é›†çš„å…³ç³»ã€‚<br>        <strong>Javaä¸­ç»§æ‰¿çš„è§„å®šï¼š</strong><br>        1.ä¸€ä¸ªç±»å¯ä»¥è¢«å¤šä¸ªå­ç±»ç»§æ‰¿ã€‚<br>        2.å•ç»§æ‰¿ï¼šä¸€ä¸ªç±»åªå…è®¸æœ‰ä¸€ä¸ªçˆ¶ç±»ã€‚<br>        3.å­çˆ¶ç±»çš„å…³ç³»æ˜¯ç›¸å¯¹çš„ã€‚ï¼ˆç›´æ¥çˆ¶ç±»ï¼Œé—´æ¥çˆ¶ç±»ï¼‰ã€‚<br>        4.å­ç±»ä¸€æ—¦ç»§æ‰¿äº†çˆ¶ç±»åï¼Œå°±è·å–äº†ç›´æ¥çˆ¶ç±»ä»¥åŠæ‰€æœ‰é—´æ¥çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•</p><p><strong>Objectç±»ï¼š</strong><br>        1.å¦‚æœæˆ‘ä»¬æ²¡æœ‰æ˜¾å¼åœ°å£°æ˜ä¸€ä¸ªç±»çš„çˆ¶ç±»ï¼Œåˆ™æ­¤ç±»ç»§æ‰¿äºjava.lang.Objectç±»ã€‚<br>        2.æ‰€æœ‰javaç±»(é™¤java.lang.Objectç±»å¤–)éƒ½ç›´æ¥æˆ–é—´æ¥åœ°ç»§æ‰¿äºjava.lang.Objectç±»ã€‚<br>        3.æ‰€æœ‰javaç±»éƒ½å…·æœ‰java.lang.Objectç±»å£°æ˜çš„åŠŸèƒ½ã€‚<br>        <strong>Objectç±»ä¸­çš„ä¸»è¦æ–¹æ³•ï¼š</strong>equal()ï¼ŒtoString()<br>        <font color="red">equals()ä¸==çš„åŒºåˆ«:</font><br>        ==ï¼šè¿ç®—ç¬¦ï¼Œ<br>        1.å¯ä»¥ä½¿ç”¨åœ¨åŸºæœ¬æ•°æ®ç±»å‹å˜é‡å’Œå¼•ç”¨æ•°æ®ç±»å‹ä¹‹é—´(é™¤äº†booleanç±»å‹);<br>        2.å¦‚æœæ¯”è¾ƒçš„æ˜¯åŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡ï¼Œæ¯”è¾ƒä¸¤ä¸ªå˜é‡ä¿å­˜çš„å€¼æ˜¯å¦ç›¸ç­‰(ä¸ä¸€å®šè¦ç±»å‹ç›¸ç­‰)ï¼›<br>        ä¾‹å¦‚ï¼š2 == 2.0ï¼›â€™2â€™ == 2ï¼›â€™Aâ€™ ==65<br>        3.å¦‚æœæ¯”è¾ƒçš„æ˜¯å¼•ç”¨æ•°æ®ç±»å‹çš„å˜é‡ï¼Œæ¯”è¾ƒä¸¤ä¸ªå˜é‡å­˜å‚¨çš„åœ°å€å€¼æ˜¯å¦ç›¸ç­‰ã€‚<br>        equals()ï¼šæ–¹æ³•,<br>        1.é€šè¿‡å¯¹è±¡æ¥è°ƒç”¨ï¼Œåªèƒ½é€‚ç”¨äºå¼•ç”¨æ•°æ®ç±»å‹çš„å˜é‡ï¼›<br>        2.Objectç±»ä¸­å®šä¹‰çš„equals()ä¸ == ç›¸åŒ:    </p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span>Object obj<span class="token punctuation">)</span><span class="token punctuation">{</span>     <span class="token function">rerturn</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>3.String , Date , File , åŒ…è£…ç±»ç­‰éƒ½é‡å†™äº†Objectç±»ä¸­çš„equal()æ–¹æ³•ã€‚æ¯”è¾ƒçš„ä¸æ˜¯ä¸¤ä¸ªå¼•ç”¨çš„åœ°å€ï¼Œè€Œæ˜¯æ¯”è¾ƒä¸¤        ä¸ªå¯¹è±¡çš„â€œå®ä½“å†…å®¹â€æ˜¯å¦ç›¸ç­‰ï¼›<br>        <font color="red">toString():</font><br>        1.è¾“å‡ºä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨ï¼›<br>        2.åœ¨Objectç±»ä¸­çš„å®šä¹‰ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"@"</span> <span class="token operator">+</span> Integer<span class="token punctuation">.</span><span class="token function">toHexString</span><span class="token punctuation">(</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token comment" spellcheck="true">// è¿”å›ç±»åå’Œå†…å­˜åœ°å€</span></code></pre><p>3.Stringï¼Œ Date , File , åŒ…è£…ç±»ç­‰éƒ½é‡å†™äº†Objectç±»ä¸­çš„toString()æ–¹æ³•ã€‚è°ƒç”¨å¯¹è±¡æ—¶è¿”å›çš„æ—¶å¯¹è±¡çš„å®ä½“å†…         å®¹ã€‚</p><p><strong>æ–¹æ³•çš„é‡å†™ï¼š</strong><br>â€‹å­ç±»ç»§æ‰¿çˆ¶ç±»ä»¥åï¼Œå¯ä»¥å¯¹çˆ¶ç±»ä¸­åŒååŒå‚æ•°æ–¹æ³•è¿›è¡Œè¦†ç›–æ“ä½œã€‚<br>â€‹åº”ç”¨ï¼šé‡å†™ä¹‹åï¼Œé€šè¿‡å­ç±»å¯¹è±¡è°ƒç”¨çˆ¶ç±»ä¸­çš„åŒååŒå‚æ•°çš„æ–¹æ³•æ—¶ï¼Œå®é™…æ‰§è¡Œçš„æ˜¯å­ç±»é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚<br>â€‹è¦æ±‚ï¼š<br>â€‹1.å­ç±»ä¸­é‡å†™çš„æ–¹æ³•åå’Œå½¢å‚åˆ—è¡¨å¿…é¡»ä¸çˆ¶ç±»ä¸­è¢«é‡å†™çš„æ–¹æ³•çš„æ–¹æ³•åå’Œå½¢å‚åˆ—è¡¨ç›¸åŒã€‚<br>â€‹2.å­ç±»ä¸­é‡å†™çš„æ–¹æ³•çš„æƒé™ä¿®é¥°ç¬¦ä¸å°äºçˆ¶ç±»ä¸­è¢«é‡å†™çš„æƒé™ä¿®é¥°ç¬¦ã€‚(çˆ¶ç±»ä¸­å£°æ˜ä¸ºprivateçš„æ–¹æ³•ä¸èƒ½è¢«é‡        å†™)<br>â€‹3.è¿”å›å€¼ç±»å‹ï¼š</p><ul><li><p>çˆ¶ç±»ä¸­è¢«é‡å†™çš„æ–¹æ³•çš„è¿”å›ç±»å‹ä¸ºvoidæˆ–åŸºæœ¬æ•°æ®ç±»å‹æ—¶ï¼Œå­ç±»ä¸­çš„é‡å†™æ–¹æ³•çš„è¿”å›ç±»å‹ä¹Ÿå¿…é¡»ä¸ºvoidæˆ–åŸºæœ¬æ•°æ®ç±»å‹ã€‚</p></li><li><p>çˆ¶ç±»ä¸­è¢«é‡å†™çš„æ–¹æ³•çš„è¿”å›ç±»å‹ä¸ºAç±»å‹ï¼Œå­ç±»ä¸­é‡å†™çš„æ–¹æ³•çš„è¿”å›å€¼ç±»å‹å¯ä»¥æ˜¯Aç±»æˆ–Açš„å­ç±»ã€‚</p></li></ul><p>4.å­ç±»é‡å†™çš„æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹ä¸å¤§äºçˆ¶ç±»è¢«é‡å†™æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹</p><h2 id="super"><a href="#super" class="headerlink" title="super"></a>super</h2><p>1.åœ¨å­ç±»çš„æ–¹æ³•æˆ–æ„é€ å™¨ä¸­ï¼Œé€šè¿‡â€œsuper.å±æ€§â€æˆ–â€œsuper.æ–¹æ³•â€çš„æ–¹å¼ ï¼Œæ˜¾ç¤ºåœ°è°ƒç”¨çˆ¶ç±»ä¸­çš„å±æ€§æˆ–æ–¹                       æ³•ï¼Œé€šå¸¸çœç•¥ï¼Œå­ç±»å’Œçˆ¶ç±»å‡ºç°åŒåçš„å±æ€§æ—¶ä¸å¯çœç•¥ã€‚<br>â€‹        2.åœ¨å­ç±»æ„é€ å™¨çš„é¦–è¡Œæ˜¾ç¤ºä½¿ç”¨â€œsuper(å½¢å‚åˆ—è¡¨)â€è°ƒç”¨çˆ¶ç±»ä¸­æŒ‡å®šçš„æ„é€ å™¨ï¼Œä¸”ä¸èƒ½ä¸â€œthis(å½¢å‚åˆ—è¡¨)â€åŒæ—¶å­˜        åœ¨ã€‚<br>â€‹        3.åœ¨å­ç±»æ„é€ å™¨çš„é¦–è¡Œå¦‚æœæ²¡æœ‰æ˜¾ç¤ºåœ°å£°æ˜â€œsuper(å½¢å‚åˆ—è¡¨)â€æˆ–â€œthis(å½¢å‚åˆ—è¡¨)â€ï¼Œé»˜è®¤è°ƒç”¨çˆ¶ç±»ä¸­ç©ºå‚çš„æ„é€         å™¨ã€‚<br>â€‹        4.åœ¨å­ç±»çš„å¤šä¸ªæ„é€ å™¨ä¸­è‡³å°‘æœ‰ä¸€ä¸ªç±»çš„æ„é€ å™¨ä¸­ä½¿ç”¨äº†â€œsuper(å½¢å‚åˆ—è¡¨)â€æ¥è°ƒç”¨çˆ¶ç±»æ„é€ å™¨ã€‚</p><h2 id="å¤šæ€æ€§"><a href="#å¤šæ€æ€§" class="headerlink" title="å¤šæ€æ€§"></a>å¤šæ€æ€§</h2><p>1.å¯¹è±¡çš„å¤šæ€æ€§ï¼šçˆ¶ç±»çš„å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡ã€‚<br>â€‹        2.å¤šæ€çš„ä½¿ç”¨ï¼šå½“è°ƒç”¨å­çˆ¶ç±»åŒååŒå‚æ•°çš„æ–¹æ³•æ—¶ï¼Œå®é™…æ‰§è¡Œçš„æ˜¯å­ç±»é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚(è™šæ‹Ÿæ–¹æ³•è°ƒç”¨)<br>â€‹        åœ¨ç¼–è¯‘æœŸåªèƒ½è°ƒç”¨çˆ¶ç±»ä¸­å£°æ˜çš„æ–¹æ³•ï¼Œåœ¨è¿è¡ŒæœŸå®é™…æ‰§è¡Œçš„æ˜¯å­ç±»é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚(åŠ¨æ€ç»‘å®š)</p><pre class=" language-java"><code class="language-java">Person p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// çˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡</span>p1<span class="token punctuation">.</span><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è°ƒç”¨Studentç±»å‘getInfo()æ–¹æ³•</span></code></pre><p>3.ä½¿ç”¨å‰æï¼šç±»çš„ç»§æ‰¿å…³ç³»ï¼Œæ–¹æ³•çš„é‡å†™ã€‚<br>        4.å¯¹è±¡çš„å¤šæ€æ€§åªä½¿ç”¨äºæ–¹æ³•ï¼Œä¸ä½¿ç”¨äºå±æ€§ã€‚<br><strong>é‡è½½ä¸é‡å†™çš„åŒºåˆ«ï¼š</strong><br>        é‡è½½ï¼Œæ˜¯æŒ‡å…è®¸å­˜åœ¨å¤šä¸ªåŒåæ–¹æ³•ï¼Œè€Œè¿™äº›æ–¹æ³•çš„å‚æ•°ä¸åŒã€‚ç¼–è¯‘å™¨æ ¹æ®æ–¹æ³•ä¸åŒçš„å‚æ•°è¡¨ï¼Œå¯¹åŒåæ–¹æ³•çš„åç§°åšä¿®é¥°ã€‚å¯¹äºç¼–è¯‘å™¨è€Œè¨€ï¼Œè¿™äº›åŒåæ–¹æ³•å°±æˆäº†ä¸åŒçš„æ–¹æ³•ã€‚å®ƒä»¬çš„è°ƒç”¨åœ°å€åœ¨ç¼–è¯‘æœŸå°±ç»‘å®šäº†ã€‚Javaçš„é‡è½½æ˜¯å¯ä»¥åŒ…æ‹¬çˆ¶ç±»å’Œå­ç±»çš„ï¼Œå³å­ç±»å¯ä»¥é‡è½½çˆ¶ç±»çš„åŒåä¸åŒå‚æ•°çš„æ–¹æ³•ã€‚æ‰€ä»¥ï¼šå¯¹äºé‡è½½è€Œè¨€ï¼Œåœ¨æ–¹æ³•è°ƒç”¨ä¹‹å‰ï¼Œç¼–è¯‘å™¨å°±å·²ç»ç¡®å®šäº†æ‰€è¦è°ƒç”¨çš„æ–¹æ³•ï¼Œè¿™ç§°ä¸º<font color="red">â€œæ—©ç»‘å®šâ€æˆ–â€œé™æ€ç»‘å®šâ€</font>ï¼›<br>        é‡å†™ï¼Œä½“ç°äº†å¤šæ€æ€§ï¼Œåªæœ‰ç­‰åˆ°æ–¹æ³•è°ƒç”¨çš„é‚£ä¸€åˆ»ï¼Œè§£é‡Šè¿è¡Œå™¨æ‰ä¼šç¡®å®šæ‰€è¦è°ƒç”¨çš„å…·ä½“æ–¹æ³•ï¼Œè¿™ç§°ä¸º<font color="red">â€œæ™šç»‘å®šâ€æˆ–â€œåŠ¨æ€ç»‘å®šâ€</font>ã€‚</p><h2 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a>instanceof</h2><p>a instanceof A :åˆ¤æ–­å¯¹è±¡aæ˜¯å¦æ˜¯ç±»Açš„å®ä¾‹æˆ–å­ç±»ã€‚è‹¥æ˜¯åˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›false.<br>ä½¿ç”¨ï¼š</p><pre class=" language-java"><code class="language-java">Person p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Man</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å£°æ˜ä¸€ä¸ªçˆ¶ç±»Personå¯¹è±¡ï¼Œå¹¶æŒ‡å‘å­ç±»Manå¯¹è±¡</span><span class="token comment" spellcheck="true">// å‘ä¸‹è½¬å‹ï¼šä½¿ç”¨å¼ºè½¬ç¬¦()</span><span class="token comment" spellcheck="true">// å‘ä¸‹è½¬å‹ç›®çš„ï¼š</span><span class="token comment" spellcheck="true">//æœ‰äº†å¯¹è±¡çš„å¤šæ€æ€§ä»¥åï¼Œå†…å­˜ä¸­å®é™…åŠ è½½äº†å­ç±»ç‰¹æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œä½†æ˜¯å˜é‡å£°æ˜ä¸ºçˆ¶ç±»ç±»å‹ï¼Œåœ¨ç¼–è¯‘æ—¶åªèƒ½è°ƒç”¨çˆ¶ç±»ä¸­å£°æ˜çš„å±æ€§å’Œæ–¹æ³•,</span><span class="token comment" spellcheck="true">//ä¸ºäº†è°ƒç”¨å­ç±»å¯¹è±¡ä¸­ç‰¹æœ‰çš„å±æ€§å’Œæ–¹æ³•,ä½¿ç”¨å‘ä¸‹è½¬å‹</span><span class="token comment" spellcheck="true">//Women w1 = (Women)p1;// æŠ›å‡ºå¼‚å¸¸</span><span class="token keyword">if</span><span class="token punctuation">(</span>p1 <span class="token keyword">instanceof</span> <span class="token class-name">Man</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    Man m1 <span class="token operator">=</span> <span class="token punctuation">(</span>Man<span class="token punctuation">)</span>p1<span class="token punctuation">;</span>    m1<span class="token punctuation">.</span><span class="token function">earnMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è°ƒç”¨å­ç±»Manä¸­ç‰¹æœ‰çš„æ–¹æ³•(çˆ¶ç±»Personæ²¡æœ‰çš„æ–¹æ³•)æ—¶ï¼Œç¼–è¯‘å‰ä¸ä¼šæŠ¥é”™</span><span class="token punctuation">}</span></code></pre><p><img src="/2020/01/18/java-02/oop_6.png" alt></p><h2 id="åŒ…è£…ç±»"><a href="#åŒ…è£…ç±»" class="headerlink" title="åŒ…è£…ç±»"></a>åŒ…è£…ç±»</h2><p>Javaæä¾›äº†8ç§åŸºæœ¬æ•°æ®ç±»å‹çš„åŒ…è£…ç±»ï¼Œä½¿å¾—åŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡å…·æœ‰ç±»çš„ç‰¹å¾<br><img src="/2020/01/18/java-02/oop_4.png" alt="8ç§åŒ…è£…ç±»"></p><p><img src="/2020/01/18/java-02/oop_5.png" alt="åŸºæœ¬ç±»å‹ã€åŒ…è£…ç±»ä¸Stringç±»é—´çš„è½¬æ¢"></p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * @Description åŸºæœ¬ç±»å‹ã€åŒ…è£…ç±»ä¸Stringç±»é—´çš„è½¬æ¢ * @author sweetboyZhang  * @date 2020å¹´2æœˆ3æ—¥ä¸‹åˆ2:21:04 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WrapperTest</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span><span class="token comment" spellcheck="true">// åŸºæœ¬æ•°æ®ç±»å‹->åŒ…è£…ç±» </span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">int</span> num1 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>        Integer num1_Object <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è°ƒç”¨åŒ…è£…ç±»çš„æ„é€ å™¨</span>        Integer num2_Object <span class="token operator">=</span> <span class="token number">666</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è‡ªåŠ¨è£…ç®±</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>num2_Object<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>num1_Object<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span><span class="token comment" spellcheck="true">// åŒ…è£…ç±»->åŸºæœ¬æ•°æ®ç±»å‹</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        Integer num3_Object <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> num3 <span class="token operator">=</span> num3_Object<span class="token punctuation">.</span><span class="token function">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è°ƒç”¨xxxValue()</span>        <span class="token keyword">int</span> num4 <span class="token operator">=</span> num3_Object<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è‡ªåŠ¨æ‹†ç®±</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>num3<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>num4<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// åŸºæœ¬æ•°æ®ç±»å‹ï¼ŒåŒ…è£…ç±»->Stringç±»å‹</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// æ–¹å¼ä¸€ï¼šè¿æ¥è¿ç®—</span>        <span class="token keyword">int</span> num5 <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>        String str1 <span class="token operator">=</span> num5 <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ–¹å¼äºŒï¼šè°ƒç”¨Stringé‡è½½çš„valueOf()æ–¹æ³•</span>        <span class="token keyword">float</span> num6 <span class="token operator">=</span> <span class="token number">6.6f</span><span class="token punctuation">;</span>        String str2 <span class="token operator">=</span> String<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>num6<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span> <span class="token comment" spellcheck="true">// Stringç±»å‹->åŸºæœ¬æ•°æ®ç±»å‹ï¼ŒåŒ…è£…ç±»</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// è°ƒç”¨ åŒ…è£…ç±»çš„parseXxx()æ–¹æ³•</span>        String str3 <span class="token operator">=</span> <span class="token string">"1432132"</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> num7 <span class="token operator">=</span> Integer<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>str3<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str3<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="static"><a href="#static" class="headerlink" title="static"></a>static</h2><p>1.å¯ä»¥ä¿®é¥°ï¼šå±æ€§ï¼Œæ–¹æ³•ï¼Œä»£ç å—ï¼Œå†…éƒ¨ç±»ã€‚<br>2.ä½¿ç”¨ static ä¿®é¥°å±æ€§ï¼š<br><font color="red"><strong>é™æ€å˜é‡åªèƒ½åœ¨ç±»ä¸»ä½“ä¸­å®šä¹‰ï¼Œä¸èƒ½åœ¨æ–¹æ³•ä¸­å®šä¹‰ã€‚ é™æ€å˜é‡å±äºç±»æ‰€æœ‰è€Œä¸å±äºæ–¹æ³•ã€‚</strong></font><br>æŒ‰æ˜¯å¦ä½¿ç”¨staticä¿®é¥°åˆ†ä¸º<strong>é™æ€å±æ€§(ç±»å˜é‡)</strong>å’Œ<strong>éé™æ€å±æ€§(å®ä¾‹å˜é‡)</strong>;<br><strong>éé™æ€å±æ€§</strong>ï¼šå¦‚æœåˆ›å»ºå¤šä¸ªå¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½ç‹¬ç«‹æ‹¥æœ‰ä¸€å¥—ç±»ä¸­çš„éé™æ€å±æ€§ã€‚ä¿®æ”¹å…¶ä¸­ä¸€ä¸ªå¯¹è±¡ä¸­çš„éé™æ€å±æ€§æ—¶ï¼Œä¸ä¼šå¯¼è‡´å…¶ä»–å¯¹è±¡ä¸­çš„ç›¸åŒå±æ€§å‘ç”Ÿå˜åŒ–ã€‚<br><strong>é™æ€å±æ€§</strong>ï¼šå¤šä¸ªå¯¹è±¡å…±äº«ä¸€ä¸ªé™æ€å±æ€§ã€‚å½“å…¶ä¸­ä¸€ä¸ªå¯¹è±¡ä¿®æ”¹é™æ€å±æ€§æ—¶ï¼Œä¼šå¯¼è‡´å…¶ä»–å¯¹è±¡è°ƒç”¨æ­¤é™æ€å±æ€§æ—¶ï¼Œæ˜¯ä¿®æ”¹è¿‡äº†çš„ã€‚<br><font color="red">æ³¨æ„</font>ï¼š<br>&lt;1&gt;.é™æ€å˜é‡éšç€ç±»çš„åŠ è½½è€ŒåŠ è½½ï¼Œå¯ä»¥é€šè¿‡â€ç±»å.é™æ€å˜é‡â€çš„æ–¹å¼è¿›è¡Œè°ƒç”¨ã€‚<br>&lt;2&gt;.é™æ€å˜é‡çš„åŠ è½½æ—©äºå¯¹è±¡çš„åˆ›å»ºã€‚<br>&lt;3&gt;.ç”±äºç±»åªä¼šåŠ è½½ä¸€æ¬¡ï¼Œåˆ™é™æ€å˜é‡åœ¨å†…å­˜ä¸­ä¹Ÿåªä¼šå­˜åœ¨ä¸€ä»½(å­˜åœ¨æ–¹æ³•åŒºçš„é™æ€åŸŸä¸­)ã€‚<br>&lt;4&gt;.ç±»èƒ½è°ƒç”¨ç±»å˜é‡ï¼Œä½†ä¸èƒ½è°ƒç”¨å®ä¾‹å˜é‡ï¼›å¯¹è±¡æ—¢èƒ½è°ƒç”¨ç±»å˜é‡ï¼Œåˆèƒ½è°ƒç”¨å®ä¾‹å˜é‡ã€‚</p><p><img src="/2020/01/18/java-02/oop_7.png" alt="ç±»å˜é‡ä¸å®ä¾‹å˜é‡å†…å­˜è§£æ"></p><p>3.ä½¿ç”¨ static ä¿®é¥°æ–¹æ³•ï¼š<br>        &lt;1&gt;.é™æ€æ–¹æ³•éšç€ç±»çš„åŠ è½½è€ŒåŠ è½½ï¼Œå¯ é€šè¿‡â€ç±»å.é™æ€æ–¹æ³•â€çš„æ–¹å¼è¿›è¡Œè°ƒç”¨ã€‚<br>        &lt;2&gt;.ç±»å¯ä»¥è°ƒç”¨é™æ€æ–¹æ³•ï¼Œä½†ä¸èƒ½è°ƒç”¨éé™æ€æ–¹æ³•ï¼›å¯¹è±¡æ—¢å¯ä»¥è°ƒç”¨é™æ€æ–¹æ³•ï¼Œåˆèƒ½è°ƒç”¨éé™æ€æ–¹æ³•ã€‚<br>        &lt;3&gt;.é™æ€æ–¹æ³•ä¸­åªèƒ½è°ƒç”¨é™æ€å±æ€§æˆ–é™æ€æ–¹æ³•ï¼›éé™æ€æ–¹æ³•ä¸­æ—¢èƒ½è°ƒç”¨é™æ€å±æ€§åˆèƒ½è°ƒç”¨é™æ€æ–¹æ³•ã€‚<br>        &lt;4&gt;.é™æ€æ–¹æ³•ä¸­ä¸èƒ½ä½¿ç”¨this,superå…³é”®å­—ã€‚</p><p>4.å¦‚ä½•ç¡®å®šä¸€ä¸ªå±æ€§æ˜¯å¦è¦å£°æ˜ä¸ºstatic<br>        &lt;1&gt;.å±æ€§å¯ä»¥è¢«å¤šä¸ªå¯¹è±¡æ‰€å…±äº«ï¼Œä¸ä¼šéšç€å¯¹è±¡çš„ä¸åŒè€Œä¸åŒã€‚<br>        &lt;2&gt;.ç±»ä¸­çš„å¸¸é‡å¸¸å¸¸å£°æ˜ä¸ºstatic</p><p>5.å¦‚ä½•ç¡®å®šä¸€ä¸ªæ–¹æ³•æ˜¯å¦è¦å£°æ˜ä¸ºstatic<br>        &lt;1&gt;.æ“ä½œé™æ€å±æ€§çš„æ–¹æ³•é€šå¸¸è®¾ç½®ä¸ºstatic;<br>        &lt;2&gt;.å·¥å…·ç±»ä¸­çš„æ–¹æ³•ï¼Œä¹ æƒ¯ä¸Šå£°æ˜ä¸ºstatic,ä¾‹å¦‚Math,Arrays,Collections</p><h2 id="ä»£ç å—"><a href="#ä»£ç å—" class="headerlink" title="ä»£ç å—"></a>ä»£ç å—</h2><p>ä½œç”¨ï¼šåˆå§‹åŒ–ç±»æˆ–å¯¹è±¡<br>        <strong>é™æ€ä»£ç å—</strong>ï¼šstatic{}<br>        &lt;1&gt; å†…éƒ¨å¯ä»¥æœ‰è¾“å‡ºè¯­å¥<br>        &lt;2&gt; éšç€ç±»çš„åŠ è½½è€Œæ‰§è¡Œï¼Œè€Œä¸”åªæ‰§è¡Œä¸€æ¬¡<br>        &lt;3&gt; ä½œç”¨ï¼šåˆå§‹åŒ–ç±»çš„ä¿¡æ¯<br>        &lt;4&gt; å¦‚æœä¸€ä¸ªç±»ä¸­å®šä¹‰äº†å¤šä¸ªé™æ€ä»£ç å—ï¼Œåˆ™æŒ‰ç…§å£°æ˜çš„å…ˆåé¡ºåºæ‰§è¡Œ<br>        &lt;5&gt; é™æ€ä»£ç å—çš„æ‰§è¡Œä¼˜å…ˆäºéé™æ€ä»£ç å—çš„æ‰§è¡Œ<br>        &lt;6&gt; é™æ€ä»£ç å—å†…åªèƒ½è°ƒç”¨é™æ€çš„å±æ€§å’Œæ–¹æ³•ï¼Œä¸å¯ä»¥è°ƒç”¨éé™æ€çš„å±æ€§å’Œæ–¹æ³•<br>        <strong>éé™æ€ä»£ç å—</strong>ï¼š{}<br>        &lt;1&gt;  å†…éƒ¨å¯ä»¥æœ‰è¾“å‡ºè¯­å¥<br>        &lt;2&gt; éšç€ç±»çš„åˆ›å»ºè€Œæ‰§è¡Œ<br>        &lt;3&gt; æ¯åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå°±æ‰§è¡Œä¸€æ¬¡éé™æ€ä»£ç å—<br>        &lt;4&gt; ä½œç”¨ï¼šå¯ä»¥åœ¨åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå¯¹å¯¹è±¡çš„å±æ€§è¿›è¡Œåˆå§‹åŒ–<br>        &lt;5&gt;éé™æ€ä»£ç å—å†…æ—¢èƒ½è°ƒç”¨é™æ€çš„å±æ€§å’Œæ–¹æ³•ï¼Œåˆèƒ½è°ƒç”¨éé™æ€çš„å±æ€§å’Œæ–¹æ³•</p><h2 id="final"><a href="#final" class="headerlink" title="final"></a>final</h2><p>1.ä¿®é¥°ç±»ï¼šè¡¨æ˜è¯¥ç±»ä¸èƒ½è¢«ç»§æ‰¿ã€‚ä¾‹å¦‚ï¼šStringç±»ï¼ŒSystemç±»ï¼ŒStringBufferç±»<br>2.ä¿®é¥°æ–¹æ³•ï¼šè¡¨æ˜è¯¥æ–¹æ³•ä¸èƒ½è¢«é‡å†™ã€‚ä¾‹å¦‚ï¼šObjectç±»ä¸­çš„getClass()æ–¹æ³•<br>3.ä¿®é¥°å˜é‡ï¼šæ­¤æ—¶çš„â€œå˜é‡â€å°±ç§°ä¸ºä¸€ä¸ªå¸¸é‡<br>    &lt;1&gt; finalä¿®é¥°æˆå‘˜å˜é‡ï¼šæ˜¾å¼åˆå§‹åŒ–ï¼Œå£°æ˜æ—¶ç›´æ¥èµ‹å€¼ï¼›ä»£ç å—ä¸­åˆå§‹åŒ–ï¼›æ„é€ å™¨ä¸­åˆå§‹åŒ–ã€‚<br>    &lt;2&gt; ä¿®é¥°å±€éƒ¨å˜é‡ï¼šä¿®é¥°å½¢å‚æ—¶ï¼Œè¡¨æ˜æ­¤å½¢å‚æ˜¯ä¸€ä¸ªå¸¸é‡ã€‚è°ƒç”¨æ­¤æ–¹æ³•æ—¶ï¼Œç»™å¸¸é‡å½¢å‚èµ‹ä¸€ä¸ªå®å‚ï¼Œä»¥ååª            èƒ½åœ¨æ–¹æ³•ä½“å†…ä½¿ç”¨æ­¤å½¢å‚ï¼Œä½†ä¸èƒ½é‡æ–°èµ‹å€¼ã€‚<br>ä¿®é¥°åŸºæœ¬æ•°æ®ç±»å‹æ—¶ï¼Œåœ¨èµ‹å€¼ä¹‹åå°±æ— æ³•æ”¹å˜ï¼›<br>ä¿®é¥°å¼•ç”¨æ•°æ®ç±»å‹æ—¶ï¼Œåœ¨èµ‹å€¼åæŒ‡å‘çš„åœ°å€æ— æ³•æ”¹å˜ï¼Œä½†æ˜¯å¯¹è±¡çš„å†…å®¹å¯ä»¥æ”¹å˜ã€‚</p><p>static final ä¿®é¥°å±æ€§ï¼šå…¨å±€å¸¸é‡</p><h2 id="abstract"><a href="#abstract" class="headerlink" title="abstract"></a>abstract</h2><p>1.abstractä¿®é¥°ç±»ï¼šæŠ½è±¡ç±»<br>        &lt;1&gt; æ­¤ç±»ä¸èƒ½å®ä¾‹åŒ–<br>        &lt;2&gt; æŠ½è±¡ç±»ä¸­ä¸€å®šæœ‰æ„é€ å™¨ï¼Œä¾¿äºå­ç±»å®ä¾‹åŒ–è°ƒç”¨<br>        &lt;3&gt; é€šè¿‡æä¾›æŠ½è±¡ç±»çš„å­ç±»ï¼Œé€šè¿‡å®ä¾‹åŒ–å­ç±»å®Œæˆç›¸åº”çš„æ“ä½œ<br>2.abstractä¿®é¥°æ–¹æ³•ï¼šæŠ½è±¡æ–¹æ³•(<strong>é»˜è®¤æƒé™ä¸ºdefault</strong>)<br>        &lt;1&gt; æŠ½è±¡æ–¹æ³•åªæœ‰æ–¹æ³•çš„å£°æ˜ï¼Œæ²¡æœ‰æ–¹æ³•ä½“<br>        &lt;2&gt; åŒ…å«æŠ½è±¡æ–¹æ³•çš„ç±»ä¸€å®šæ˜¯æŠ½è±¡ç±»ï¼›æŠ½è±¡ç±»ä¸­å¯ä»¥æ²¡æœ‰æŠ½è±¡æ–¹æ³•<br>        &lt;3&gt; è‹¥å­ç±»é‡å†™äº†çˆ¶ç±»çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼Œæ­¤å­ç±»å¯ä»¥å®ä¾‹åŒ–ï¼›å¦åˆ™ï¼Œæ­¤å­ç±»å¿…é¡»å£°æ˜ä¸ºæŠ½è±¡ç±»</p><h2 id="interface"><a href="#interface" class="headerlink" title="interface"></a>interface</h2><p>1.åœ¨javaä¸­ï¼Œæ¥å£ä¸ç±»æ˜¯å¹¶åˆ—çš„ä¸¤ä¸ªç»“æ„ã€‚(<strong>é»˜è®¤æƒé™ä¸ºpublic</strong>)<br>2.æ¥å£ä¸­çš„æˆå‘˜ï¼š</p><ul><li>JDK7åŠä»¥å‰ï¼šåªèƒ½å®šä¹‰å…¨å±€å¸¸é‡(public static final å¯ä»¥çœç•¥)å’ŒæŠ½è±¡æ–¹æ³•(<strong>é»˜è®¤ä¸ºpublic abstract</strong> )</li><li>JDK8ï¼šè¿˜å¯ä»¥å®šä¹‰é™æ€æ–¹æ³•(public static åªèƒ½é€šè¿‡æ¥å£æ¥è°ƒç”¨)ï¼Œ<strong>æ­¤æ—¶è¢«ä¿®é¥°çš„æ–¹æ³•å¿…é¡»å¸¦æœ‰æ–¹æ³•ä½“</strong>ã€‚</li></ul><p>3.æ¥å£ä¸­ä¸èƒ½å®šä¹‰æ„é€ å™¨</p><p>4.<strong>éæŠ½è±¡ç±»</strong>å®ç°æ¥å£å¿…é¡»é‡å†™è¯¥æ¥å£ä¸­çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•</p><p>5.Javaé€šè¿‡å®ç°å¤šä¸ªæ¥å£ï¼Œå¼¥è¡¥å•ç»§æ‰¿çš„å±€é™æ€§<br>  <code>class A extends B implements C,D,E{}</code><br> 6.æ¥å£ä¹‹é—´å¯ä»¥ç»§æ‰¿ï¼Œè€Œä¸”å¯ä»¥å¤šç»§æ‰¿</p><blockquote><p>æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p></blockquote><ol><li>æ¥å£çš„æ–¹æ³•é»˜è®¤æ˜¯publicï¼Œæ‰€æœ‰æ–¹æ³•åœ¨æ¥å£ä¸­ä¸èƒ½æœ‰å®ç°(Java 8 å¼€å§‹æ¥å£æ–¹æ³•å¯ä»¥æœ‰é»˜è®¤å®<br> ç°ï¼‰ï¼Œè€ŒæŠ½è±¡ç±»å¯ä»¥æœ‰éæŠ½è±¡çš„æ–¹æ³•ã€‚</li><li>æ¥å£ä¸­é™¤äº†staticã€ï¬nal å˜é‡ï¼Œä¸èƒ½æœ‰å…¶ä»–å˜é‡ï¼Œè€ŒæŠ½è±¡ç±»ä¸­åˆ™ä¸ä¸€å®šã€‚</li><li>ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œä½†åªèƒ½å®ç°ä¸€ä¸ªæŠ½è±¡ç±»ã€‚æ¥å£è‡ªå·±æœ¬èº«å¯ä»¥é€šè¿‡extends å…³é”®å­—æ‰©å±•<br> å¤šä¸ªæ¥å£ã€‚</li><li>æ¥å£æ–¹æ³•é»˜è®¤ä¿®é¥°ç¬¦æ˜¯publicï¼ŒæŠ½è±¡æ–¹æ³•å¯ä»¥æœ‰publicã€protected å’Œdefault è¿™äº›ä¿®é¥°ç¬¦ï¼ˆæŠ½è±¡<br> æ–¹æ³•å°±æ˜¯ä¸ºäº†è¢«é‡å†™æ‰€ä»¥ä¸èƒ½ä½¿ç”¨private å…³é”®å­—ä¿®é¥°ï¼ï¼‰ã€‚</li><li>ä»è®¾è®¡å±‚é¢æ¥è¯´ï¼ŒæŠ½è±¡æ˜¯å¯¹ç±»çš„æŠ½è±¡ï¼Œæ˜¯ä¸€ç§æ¨¡æ¿è®¾è®¡ï¼Œè€Œæ¥å£æ˜¯å¯¹è¡Œä¸ºçš„æŠ½è±¡ï¼Œæ˜¯ä¸€ç§è¡Œä¸ºçš„è§„<br> èŒƒã€‚</li></ol><h2 id="å†…éƒ¨ç±»"><a href="#å†…éƒ¨ç±»" class="headerlink" title="å†…éƒ¨ç±»"></a>å†…éƒ¨ç±»</h2><p>Javaä¸­å…è®¸ä¸€ä¸ªç±»Aå£°æ˜åœ¨å¦ä¸€ä¸ªç±»Bä¸­ï¼Œåˆ™ç±»Aå°±æ˜¯å†…éƒ¨ç±»ï¼Œç±»Bå°±æ˜¯å¤–éƒ¨ç±»ã€‚<br>        1.éstaticçš„æˆå‘˜å†…éƒ¨ç±»ä¸­çš„æˆå‘˜ä¸èƒ½å£°æ˜ä¸ºstaticçš„ï¼Œåªæœ‰åœ¨å¤–éƒ¨ç±»æˆ–staticçš„æˆå‘˜<br>        å†…éƒ¨ç±»ä¸­æ‰å¯å£°æ˜staticæˆå‘˜ã€‚<br>        2.å¤–éƒ¨ç±»è®¿é—®æˆå‘˜å†…éƒ¨ç±»çš„æˆå‘˜ï¼Œéœ€è¦â€œå†…éƒ¨ç±».æˆå‘˜â€æˆ–â€œå†…éƒ¨ç±»å¯¹è±¡.æˆå‘˜â€çš„æ–¹å¼<br>        3.<strong>æˆå‘˜å†…éƒ¨ç±»å¯ä»¥ç›´æ¥ä½¿ç”¨å¤–éƒ¨ç±»çš„æ‰€æœ‰æˆå‘˜ï¼ŒåŒ…æ‹¬ç§æœ‰çš„æ•°æ®</strong><br>        4.å½“æƒ³è¦åœ¨å¤–éƒ¨ç±»çš„é™æ€æˆå‘˜éƒ¨åˆ†ä½¿ç”¨å†…éƒ¨ç±»æ—¶ï¼Œå¯ä»¥è€ƒè™‘å†…éƒ¨ç±»å£°æ˜ä¸ºé™æ€çš„        </p><p><strong>javaä¸­çš„ç±»åŠ è½½é¡ºåºï¼š</strong><br>çˆ¶ç±»é™æ€å˜é‡-&gt;çˆ¶ç±»é™æ€ä»£ç å—-&gt;å­ç±»é™æ€å˜é‡-&gt;å­ç±»é™æ€ä»£ç å—-&gt;çˆ¶ç±»æˆå‘˜å˜é‡-&gt;çˆ¶ç±»éé™æ€ä»£ç å—-&gt;çˆ¶ç±»æ„é€ å™¨-&gt;å­ç±»æˆå‘˜å˜é‡-&gt;å­ç±»éé™æ€ä»£ç å—-&gt;å­ç±»æ„é€ å™¨</p>]]></content>
      
      
      <categories>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ç±»å‹ï¼Œè¿ç®—ç¬¦ï¼Œæ•°ç»„</title>
      <link href="2020/01/09/java-01/"/>
      <url>2020/01/09/java-01/</url>
      
        <content type="html"><![CDATA[<h2 id="å˜é‡çš„ä½¿ç”¨"><a href="#å˜é‡çš„ä½¿ç”¨" class="headerlink" title="å˜é‡çš„ä½¿ç”¨"></a>å˜é‡çš„ä½¿ç”¨</h2><p>1.å˜é‡å¿…é¡»å…ˆå£°æ˜åä½¿ç”¨ã€‚<br>2.å˜é‡éƒ½å®šä¹‰åœ¨å…¶ä½œç”¨åŸŸå†…ï¼Œåœ¨ä½œç”¨åŸŸå†…æœ‰æ•ˆï¼Œå‡ºäº†ä½œç”¨åŸŸå°±å¤±æ•ˆäº†ã€‚<br>3.åŒä¸€ä¸ªä½œç”¨åŸŸå†…ä¸èƒ½å£°æ˜ä¸¤ä¸ªåŒåå˜é‡ã€‚</p><h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><p><img src="/2020/01/09/java-01/1.jpg" alt></p><p><strong>åŸºæœ¬æ•°æ®ç±»å‹(primitive type)</strong><br>        æ•´å‹  byte(1å­—èŠ‚) -128~127 , short (2å­—èŠ‚), int(4å­—èŠ‚) , long(8å­—èŠ‚) læˆ–Lç»“å°¾<br>        æµ®ç‚¹å‹  float(4å­—èŠ‚) å®šä¹‰æ—¶è¦ä»¥fæˆ–Fç»“å°¾ , double(8å­—èŠ‚)<br>        å­—ç¬¦å‹  char(2å­—èŠ‚)<br>        å¸ƒå°”å‹  boolean åªèƒ½å–ä¸¤ä¸ªå€¼ä¹‹ä¸€ ï¼štrue , false<br><em>7ç§åŸºæœ¬æ•°æ®ç±»å‹ä¹‹é—´çš„è®¡ç®—ï¼ˆä¸åŒ…æ‹¬å¸ƒå°”ç±»å‹ï¼‰:</em><br>        1.è‡ªåŠ¨ç±»å‹æå‡ï¼š<br>               å®¹é‡å°çš„æ•°æ®ç±»å‹å˜é‡ä¸å®¹é‡å¤§çš„æ•°æ®ç±»å‹åšè¿ç®—æ—¶ï¼Œè¿ç®—ç»“æœè‡ªåŠ¨è£…æ¢ä¸ºå®¹é‡å¤§çš„ã€‚<br>               byte , char , short â€“&gt; int â€“&gt; long â€“&gt; float â€“&gt; double<br><strong>æ‰€æœ‰çš„byte , short , char ç±»å‹çš„å€¼å°†è¢«æå‡ä¸ºintå‹ï¼›</strong><br><strong>è¢«final ä¿®é¥°çš„å˜é‡ä¸ä¼šè‡ªåŠ¨æå‡å…¶ç±»å‹</strong></p><p>â€‹        2.å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼š<br>â€‹        ä½¿ç”¨å¼ºè½¬ç¬¦ () ï¼Œå¯èƒ½é€ æˆç²¾åº¦æŸå¤±<br><strong>å¼•ç”¨æ•°æ®ç±»å‹(reference type)</strong><br>â€‹        ç±» class<br>â€‹        Stringç±»å‹ï¼š  å£°æ˜æ—¶ä½¿ç”¨ä¸€å¯¹â€â€ï¼Œå¯ä»¥ä¸8ç§åŸºæœ¬æ•°æ®ç±»å‹åšè¿ç®—ï¼Œ+ åªèƒ½è¡¨ç¤ºè¿æ¥<br>â€‹        æ¥å£ interfere<br>â€‹        æ•°ç»„ [ ]</p><h2 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h2><p>â€‹    <strong>ç®—æœ¯è¿ç®—ç¬¦</strong><br>â€‹            <strong>é€»è¾‘è¿ç®—ç¬¦</strong><br>â€‹            <strong>&amp;&amp;ä¸&amp;çš„åŒºåˆ«ï¼š</strong><br>â€‹            &amp; : å·¦è¾¹æ— è®ºçœŸå‡ï¼Œå³è¾¹è¿›è¡Œè¿ç®—<br>â€‹            &amp;&amp; ï¼š å·¦è¾¹ä¸ºçœŸï¼Œå³è¾¹å‚ä¸è¿ç®—ï¼›å·¦è¾¹ä¸ºå‡ï¼Œå³è¾¹ä¸å‚ä¸è¿ç®—<br>â€‹            <strong>|ä¸||çš„åŒºåˆ«ï¼š</strong><br>â€‹            ||ï¼šå·¦è¾¹ä¸ºçœŸï¼Œå³è¾¹ä¸å‚ä¸è¿ç®—<br>â€‹            <strong>ä½è¿ç®—ï¼š</strong><br>â€‹         <img src="/2020/01/09/java-01/1.png" alt></p><p><strong>è¿ç®—ç¬¦ä¼˜å…ˆçº§ï¼š</strong></p><p>å•ç›®ä¹˜é™¤ä¸º(ä½)å…³ç³»ï¼Œé€»è¾‘ä¸‰ç›®åèµ‹å€¼ã€‚ </p><p>å•ç›®ï¼šå•ç›®è¿ç®—ç¬¦+ â€“(è´Ÿæ•°) ++ â€“ ç­‰<br>ä¹˜é™¤ï¼šç®—æ•°å•ç›®è¿ç®—ç¬¦* / % + -<br>ä¸ºï¼ˆä½ï¼‰ï¼šä½ç§»å•ç›®è¿ç®—ç¬¦&lt;&lt; &gt;&gt;<br>å…³ç³»ï¼šå…³ç³»å•ç›®è¿ç®—ç¬¦&gt; &lt; &gt;= &lt;= == !=<br>é€»è¾‘ï¼šé€»è¾‘å•ç›®è¿ç®—ç¬¦&amp;&amp; || &amp; | ^<br>ä¸‰ç›®ï¼šä¸‰ç›®å•ç›®è¿ç®—ç¬¦A &gt; B ? X : Y<br>åï¼šæ— æ„ä¹‰ï¼Œä»…ä»…ä¸ºäº†å‡‘å­—æ•°<br>èµ‹å€¼ï¼šèµ‹å€¼=</p><h2 id="æµç¨‹æ§åˆ¶"><a href="#æµç¨‹æ§åˆ¶" class="headerlink" title="æµç¨‹æ§åˆ¶"></a>æµç¨‹æ§åˆ¶</h2><p><strong>é¡ºåºç»“æ„</strong><br><strong>åˆ†æ”¯ç»“æ„</strong><br><strong>å¾ªç¯ç»“æ„</strong><br>        break :  ç»“æŸå½“å‰å¾ªç¯<br>        continue :  ç»“æŸå½“æ¬¡å¾ªç¯</p><h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><p><strong>æ•°ç»„çš„ç‰¹ç‚¹:</strong><br>            1.æ•°ç»„æ˜¯æœ‰åºæ’åˆ—çš„<br>            2.æ•°ç»„å±äºå¼•ç”¨æ•°æ®ç±»å‹çš„å˜é‡ã€‚æ•°ç»„çš„å…ƒç´ ï¼Œæ—¢å¯ä»¥æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å¼•ç”¨æ•°æ®ç±»å‹çš„å˜é‡<br>            3.åˆ›å»ºæ•°ç»„å¯¹è±¡æ—¶ä¼šåœ¨å†…å­˜ä¸­å¼€è¾Ÿä¸€æ•´å—è¿ç»­çš„å†…å­˜ç©ºé—´<br>            4.æ•°ç»„çš„é•¿åº¦ä¸€æ—¦ç¡®å®šå°±ä¸èƒ½ä¿®æ”¹ </p><p><strong>ä¸€ç»´æ•°ç»„çš„ä½¿ç”¨:</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayTest</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å£°æ˜</span>    <span class="token comment" spellcheck="true">// é™æ€åˆå§‹åŒ–:æ•°ç»„çš„åˆå§‹åŒ–å’Œæ•°ç»„å…ƒç´ çš„åˆå§‹åŒ–åŒæ—¶è¿›è¡Œ</span>    <span class="token comment" spellcheck="true">// intå‹æ•°ç»„å…ƒç´ æ•°é‡å°äºæŒ‡å®šå®¹é‡æ—¶ï¼Œä»¥0å¡«å……</span>    nums <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// int[] nums = {1,2,3,4,5,6}</span>    <span class="token comment" spellcheck="true">// åŠ¨æ€åˆå§‹åŒ–:æ•°ç»„çš„åˆå§‹åŒ–å’Œæ•°ç»„å…ƒç´ çš„åˆå§‹åŒ–åˆ†å¼€è¿›è¡Œ</span>    String<span class="token punctuation">[</span><span class="token punctuation">]</span> names <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// é€šè¿‡è§’æ ‡çš„æ–¹å¼è°ƒç”¨æŒ‡å®šä½ç½®çš„å…ƒç´ </span>    names<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Tom"</span><span class="token punctuation">;</span>    names<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Justin"</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è·å–æ•°ç»„é•¿åº¦ï¼š length</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>names<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// éå†æ•°ç»„</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>ä¸€ç»´æ•°ç»„å…ƒç´ çš„é»˜è®¤åˆå§‹å€¼</strong><br><em>åŸºæœ¬æ•°æ®ç±»å‹ï¼š</em><br>æ•´å½¢ï¼š0<br>æµ®ç‚¹å‹ï¼š0.0<br>charå‹ï¼š0ï¼ˆASCIIç å€¼ï¼‰ è€Œéâ€™0â€™<br>booleanå‹ï¼šfalse<br>å¼•ç”¨æ•°æ®ç±»å‹ï¼šnull</p><p><strong>ä¸€ç»´æ•°ç»„çš„å†…å­˜è§£æ:</strong></p><p>åœ¨æ ˆç©ºé—´ä¸­ç”³è¯·ä¸€ä¸ªå˜é‡ç”¨æ¥å­˜å‚¨å †ç©ºé—´ä¸­æ•°ç»„çš„é¦–åœ°å€å€¼<br>        åœ¨å †ç©ºé—´ä¸­ç”³è¯·ä¸€ä¸ªæ•°ç»„ç”¨æ¥å­˜æ”¾æ•°ç»„å…ƒç´ </p><p><strong>å¤šç»´æ•°ç»„çš„ä½¿ç”¨ï¼š</strong></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayTest1</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// é™æ€åˆå§‹åŒ–</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span>  <span class="token keyword">new</span> <span class="token class-name">int</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//åŠ¨æ€åˆå§‹åŒ–</span>        String <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        String <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è°ƒç”¨æ•°ç»„æŒ‡å®šä½ç½®çš„å…ƒç´ </span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 2</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>arr1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// null</span>        <span class="token comment" spellcheck="true">// è·å–æ•°ç»„çš„é•¿åº¦</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 3</span>        <span class="token comment" spellcheck="true">// éå†äºŒç»´æ•°ç»„</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>äºŒç»´æ•°ç»„å…ƒç´ çš„é»˜è®¤åˆå§‹å€¼:</strong><br>é’ˆå¯¹åˆå§‹åŒ–æ–¹å¼ä¸€ï¼š<code>String [][] arr1 = new String[3][2];</code><br>å¤–å±‚å…ƒç´ çš„åˆå§‹åŒ–å€¼ä¸ºï¼šåœ°å€å€¼<br>å†…å±‚å…ƒç´ çš„åˆå§‹åŒ–å€¼ä¸ºï¼šä¸ä¸€ç»´æ•°ç»„çš„åˆå§‹åŒ–æƒ…å†µç›¸åŒ<br>é’ˆå¯¹åˆå§‹åŒ–æ–¹å¼äºŒï¼š<code>String [][] arr1 = new String[3][];</code><br>å¤–å±‚å…ƒç´ çš„åˆå§‹åŒ–å€¼ä¸ºï¼šnull<br>å†…å±‚å…ƒç´ çš„åˆå§‹åŒ–å€¼ä¸ºï¼š<font color="red">ä¸èƒ½è°ƒç”¨ï¼Œå¦åˆ™æŠ¥é”™ </font></p><p><strong>äºŒä½æ•°ç»„çš„å†…å­˜è§£æ:</strong><br>åœ¨æ ˆç©ºé—´ä¸­ç”³è¯·ä¸€ä¸ªå˜é‡ç”¨æ¥å­˜å‚¨å †ç©ºé—´ä¸­æ•°ç»„çš„é¦–åœ°å€å€¼<br>åœ¨å †ç©ºé—´ä¸­ç”³è¯·ä¸€ä¸ªæ•°ç»„ç”¨æ¥å­˜æ”¾äºŒç»´æ•°ç»„çš„å¤–å±‚å…ƒç´ ï¼Œå¤–å±‚å…ƒç´ ä¸­å­˜æ”¾ç€æŒ‡å‘å­˜å‚¨å†…å±‚å…ƒç´ æ•°ç»„çš„é¦–åœ°å€<br>åœ¨å †ç©ºé—´ä¸­ç”³è¯·ä¸€ä¸ªæ•°ç»„ç”¨æ¥å­˜å‚¨å†…å±‚å…ƒ<br><img src="/2020/01/09/java-01/Array_02.png" alt></p><h2 id="æ•°ç»„ä¸­æ¶‰åŠçš„å¸¸è§ç®—æ³•"><a href="#æ•°ç»„ä¸­æ¶‰åŠçš„å¸¸è§ç®—æ³•" class="headerlink" title="æ•°ç»„ä¸­æ¶‰åŠçš„å¸¸è§ç®—æ³•"></a>æ•°ç»„ä¸­æ¶‰åŠçš„å¸¸è§ç®—æ³•</h2><p><strong>æ•°ç»„å…ƒç´ çš„èµ‹å€¼</strong></p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * @Description æ‰“å°10è¡Œæ¨è¾‰ä¸‰è§’ * @author sweetboyZhang * @date 2020å¹´1æœˆ13æ—¥ä¸Šåˆ11:26:21 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">YangHui_Test</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// å£°æ˜å¹¶åŠ¨æ€åˆå§‹åŒ–äºŒä½æ•°ç»„</span>        <span class="token keyword">int</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> yangHui <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 10è¡Œï¼Œåˆ—æ•°ä¸ç¡®å®š</span>        <span class="token comment" spellcheck="true">// ç»™å…ƒç´ èµ‹å€¼</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> yangHui<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            yangHui<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç¬¬iè¡Œæœ‰i+1ä¸ªå…ƒç´ </span>            <span class="token comment" spellcheck="true">// ç»™é¦–æœ«å…ƒç´ èµ‹å€¼</span>            yangHui<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span>yangHui<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//é¦–æœ«å…ƒç´ ä¸º1</span>            <span class="token comment" spellcheck="true">// ç»™å…¶ä½™å…ƒç´ èµ‹å€¼</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> yangHui<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    yangHui<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> yangHui<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> yangHui<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// éå†è¾“å‡º</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> yangHui<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> yangHui<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>yangHui<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>æ±‚æ•°å€¼å‹æ•°ç»„ä¸­å…ƒç´ çš„æœ€å¤§å€¼ã€æœ€å°å€¼ã€å¹³å‡æ•°ã€æ€»å’Œç­‰</strong></p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * @Description å®šä¹‰ä¸€ä¸ªintå‹çš„ä¸€ç»´æ•°ç»„ï¼ŒåŒ…å«10ä¸ªå…ƒç´ ï¼Œåˆ†åˆ«èµ‹ä¸€äº›éšæœºæ•´æ•°ï¼Œç„¶åæ±‚å‡ºæ‰€æœ‰å…ƒç´ çš„æœ€å¤§å€¼ï¼Œæœ€å°å€¼ï¼Œå’Œå€¼ï¼Œå¹³å‡å€¼ï¼Œå¹¶è¾“å‡ºå‡ºæ¥ã€‚è¦æ±‚ï¼šæ‰€æœ‰éšæœºæ•°éƒ½æ˜¯ä¸¤ä½æ•°ã€‚ * @author sweetboyZhang * @date 2020å¹´1æœˆ13æ—¥ä¸‹åˆ2:13:41 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayTest2</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> min <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> max <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> average <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// è·å–[a,b]èŒƒå›´å†…çš„éšæœºæ•°ï¼Œ(int)(Math.random()*(b-a+1)+a)</span>            arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">99</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>min<span class="token operator">></span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                min <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>max<span class="token operator">&lt;</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                max <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            sum<span class="token operator">+=</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            average <span class="token operator">=</span> sum<span class="token operator">/</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœ€å¤§å€¼ï¼š"</span> <span class="token operator">+</span> max<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœ€å°å€¼ï¼š"</span> <span class="token operator">+</span> min<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å’Œå€¼ï¼š"</span> <span class="token operator">+</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å¹³å‡å€¼ï¼š"</span> <span class="token operator">+</span> average<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong><font color="red">èµ‹å€¼ä¸å¤åˆ¶</font></strong></p><p>èµ‹å€¼ï¼š<code>array2 = array1;// array1æŒ‡å‘å †ç©ºé—´çš„åœ°å€èµ‹ç»™array2,ä¸èƒ½ç§°ä¸ºæ•°ç»„çš„å¤åˆ¶</code><br>            å¯¹array2ä¿®æ”¹å°±æ˜¯å¯¹array1è¿›è¡Œä¿®æ”¹<br>        å¤åˆ¶ï¼š<code>for(int i = 0;i &lt; array2.length;i++) {            array2[i] = array1[i];        }</code><br>            å¯¹array2ä¿®æ”¹ä¸ä¼šå½±å“åˆ°array1</p><p><strong>æ•°ç»„çš„åè½¬</strong></p><pre class=" language-java"><code class="language-java">String<span class="token punctuation">[</span><span class="token punctuation">]</span> array1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token string">"Tom"</span><span class="token punctuation">,</span><span class="token string">"Taylor"</span><span class="token punctuation">,</span><span class="token string">"Justin"</span><span class="token punctuation">,</span><span class="token string">"Troye"</span><span class="token punctuation">,</span><span class="token string">"Swift"</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> array1<span class="token punctuation">.</span>length<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        String temp <span class="token operator">=</span> array1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        array1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> array1<span class="token punctuation">[</span>array1<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        array1<span class="token punctuation">[</span>array1<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><strong>æŸ¥æ‰¾</strong></p><ol><li>çº¿æ€§æŸ¥æ‰¾</li></ol><pre class=" language-java"><code class="language-java">String<span class="token punctuation">[</span><span class="token punctuation">]</span> array1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token string">"Tom"</span><span class="token punctuation">,</span><span class="token string">"Taylor"</span><span class="token punctuation">,</span><span class="token string">"Justin"</span><span class="token punctuation">,</span><span class="token string">"Troye"</span><span class="token punctuation">,</span><span class="token string">"Swift"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>String dest <span class="token operator">=</span> <span class="token string">"Justin"</span><span class="token punctuation">;</span><span class="token keyword">boolean</span> isFlag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> array1<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>dest<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>array1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å…ƒç´ Justinçš„ä½ç½®ä¸ºï¼š"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        isFlag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token keyword">if</span><span class="token punctuation">(</span>isFlag<span class="token punctuation">)</span> <span class="token punctuation">{</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ²¡æœ‰æ‰¾åˆ°ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><ol start="2"><li>äºŒåˆ†æŸ¥æ‰¾</li></ol><pre class=" language-java"><code class="language-java"><span class="token keyword">int</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> array3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> number <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span><span class="token keyword">int</span> head <span class="token operator">=</span> array3<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// åˆå§‹çš„é¦–ç´¢å¼•</span><span class="token keyword">int</span> end <span class="token operator">=</span> array3<span class="token punctuation">[</span>array3<span class="token punctuation">.</span>length <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// åˆå§‹çš„å°¾ç´¢å¼•</span><span class="token keyword">int</span> middle <span class="token operator">=</span> <span class="token punctuation">(</span>head <span class="token operator">+</span> end<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// äºŒåˆ†</span><span class="token keyword">boolean</span> isFlag1 <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è®¾ç½®æ ‡å¿—ä½ï¼Œæ‰¾åˆ°å…ƒç´ åç½®false</span><span class="token keyword">while</span><span class="token punctuation">(</span>head <span class="token operator">&lt;=</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>number <span class="token operator">==</span> array3<span class="token punctuation">[</span>middle<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å…ƒç´ 6çš„ä½ç½®ä¸ºï¼š"</span> <span class="token operator">+</span> middle<span class="token punctuation">)</span><span class="token punctuation">;</span>        isFlag1 <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>number <span class="token operator">&lt;</span> array3<span class="token punctuation">[</span>middle<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            end <span class="token operator">=</span> middle <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>            head <span class="token operator">=</span> middle <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>   <span class="token keyword">if</span><span class="token punctuation">(</span>isFlag1<span class="token punctuation">)</span> <span class="token punctuation">{</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ²¡æœ‰æ‰¾åˆ°è¯¥å…ƒç´ ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><strong>æ’åº</strong></p><p><strong>å†’æ³¡æ’åº</strong></p><p>æ’åºæ€æƒ³ï¼š</p><ol><li>æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼ˆå‡åºï¼‰ï¼Œå°±äº¤æ¢ä»–ä»¬ä¸¤ä¸ªã€‚</li><li>å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œï¼Œä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ã€‚è¿™æ­¥<br>åšå®Œåï¼Œæœ€åçš„å…ƒç´ ä¼šæ˜¯æœ€å¤§çš„æ•°ã€‚</li><li>é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åä¸€ä¸ªã€‚</li><li>æŒç»­æ¯æ¬¡å¯¹è¶Šæ¥è¶Šå°‘çš„å…ƒç´ é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•ä¸€å¯¹æ•°å­—éœ€è¦<br>æ¯”è¾ƒä¸ºæ­¢ã€‚</li></ol><pre class=" language-java"><code class="language-java"><span class="token keyword">int</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> array <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> array<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> array<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span>i<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>array<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">></span>array<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">int</span> temp <span class="token operator">=</span> array<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            array<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> array<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            array<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> array<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>array<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><strong>Arrayså·¥å…·ç±»</strong></p><p>java.util.Arrays ï¼šæ“ä½œæ•°ç»„çš„å·¥å…·ç±»ï¼Œå®šä¹‰äº†è®¸å¤šæ“ä½œæ•°ç»„çš„æ–¹æ³•</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 1.boolean equals(int[] a,int[] b) åˆ¤æ–­ä¸¤ä¸ªæ•°ç»„æ˜¯å¦ç›¸ç­‰ã€‚</span>        <span class="token keyword">boolean</span> isEqual <span class="token operator">=</span>Arrays<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>arr1<span class="token punctuation">,</span> arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>isEqual<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// false</span>    <span class="token comment" spellcheck="true">// 2.String toString(int[] a) è¾“å‡ºæ•°ç»„ä¿¡æ¯</span>        String arr1Info <span class="token operator">=</span> Arrays<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>arr1Info<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// [1,2,3,4]</span>    <span class="token comment" spellcheck="true">// 3.void fill(int[] a,int val) å°†æŒ‡å®šå€¼å¡«å……åˆ°æ•°ç»„ä¹‹ä¸­ã€‚</span>        Arrays<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>arr1<span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Arrays<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// [6,6,6,6]</span>    <span class="token comment" spellcheck="true">// 4.void sort(int[] a) å¯¹æ•°ç»„è¿›è¡Œæ’åºã€‚</span>        Arrays<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Arrays<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// [1,2,3,4,5]</span>    <span class="token comment" spellcheck="true">// 5.int binarySearch(int[] a,int key) å¯¹æ’åºåçš„æ•°ç»„è¿›è¡ŒäºŒåˆ†æ³•æ£€ç´¢æŒ‡å®šçš„å€¼ã€‚</span>        <span class="token keyword">int</span> index <span class="token operator">=</span> Arrays<span class="token punctuation">.</span><span class="token function">binarySearch</span><span class="token punctuation">(</span>arr2<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>index <span class="token operator">>=</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å…ƒç´ 4çš„ç´¢å¼•ä¸ºï¼š"</span><span class="token operator">+</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">else</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœªæ‰¾åˆ°è¯¥å…ƒç´ ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// 6. List&lt;T> asList(T... a) è¿”å›ä¸€ä¸ªList  åº•å±‚æ˜¯finalæ•°ç»„</span>    <span class="token punctuation">}</span></code></pre><p><strong>æ•°ç»„ä½¿ç”¨çš„å¸¸è§å¼‚å¸¸</strong></p><p>1.æ•°ç»„è„šæ ‡è¶Šç•Œå¼‚å¸¸<br>    ArrayIndexOutOfBoundsExceptionï¼šè®¿é—®åˆ°äº†æ•°ç»„ä¸­çš„ä¸å­˜åœ¨çš„è„šæ ‡æ—¶å‘ç”Ÿã€‚<br>    åˆç†èŒƒå›´ï¼š[0,array.length-1]</p><p>2.ç©ºæŒ‡é’ˆå¼‚å¸¸<br>    NullPointerExceptionï¼šarrayå¼•ç”¨æ²¡æœ‰æŒ‡å‘å®ä½“ï¼Œå´åœ¨æ“ä½œå®ä½“ä¸­çš„å…ƒç´ æ—¶ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
